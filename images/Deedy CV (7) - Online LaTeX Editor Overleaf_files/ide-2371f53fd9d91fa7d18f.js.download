/*! For license information please see ide-2371f53fd9d91fa7d18f.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Frontend=t():(e.Frontend=e.Frontend||{},e.Frontend.ide=t())}(self,(function(){return function(){var __webpack_modules__={57058:function(e,t,n){e.exports=n(80630)},71305:function(e,t,n){e.exports=n(11522)},72005:function(e,t,n){e.exports=n(29035)},8633:function(e,t,n){e.exports=n(2670)},62085:function(e,t,n){e.exports=n(58209)},98839:function(e,t,n){e.exports=n(18252)},7746:function(e,t,n){e.exports=n(73413)},69774:function(e,t,n){e.exports=n(49139)},44922:function(e,t,n){var r=n(72005);function a(){return e.exports=a=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},28318:function(e,t,n){var r=n(8633),a=n(27427);e.exports=function(e,t){e.prototype=r(t.prototype),e.prototype.constructor=e,a(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},67154:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},48331:function(e,t,n){var r=n(98839);e.exports=function(e,t){if(null==e)return{};var n,a,l={},f=r(e);for(a=0;a<f.length;a++)n=f[a],t.indexOf(n)>=0||(l[n]=e[n]);return l},e.exports.__esModule=!0,e.exports.default=e.exports},27427:function(e,t,n){var r=n(7746);function a(t,n){return e.exports=a=r||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,a(t,n)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},80630:function(e,t,n){n(13165),n(33488),e.exports=n(61417).Array.from},11522:function(e,t,n){n(22423),e.exports=n(61417).Array.isArray},29035:function(e,t,n){n(18566),e.exports=n(61417).Object.assign},2670:function(e,t,n){n(39685);var r=n(61417).Object;e.exports=function(e,t){return r.create(e,t)}},58209:function(e,t,n){n(74574),e.exports=n(61417).Object.entries},18252:function(e,t,n){n(74046),e.exports=n(61417).Object.keys},73413:function(e,t,n){n(45460),e.exports=n(61417).Object.setPrototypeOf},49139:function(e,t,n){n(21954),e.exports=n(61417).Object.values},59879:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},8026:function(e,t,n){var r=n(87742);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},17950:function(e,t,n){var r=n(2815),a=n(30712),l=n(6453);e.exports=function(e){return function(t,n,f){var d,h=r(t),p=a(h.length),y=l(f,p);if(e&&n!=n){for(;p>y;)if((d=h[y++])!=d)return!0}else for(;p>y;y++)if((e||y in h)&&h[y]===n)return e||y||0;return!e&&-1}}},61330:function(e,t,n){var r=n(99860),a=n(15765)("toStringTag"),l="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,f;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:l?r(t):"Object"==(f=r(t))&&"function"==typeof t.callee?"Arguments":f}},99860:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},61417:function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},9407:function(e,t,n){"use strict";var r=n(16135),a=n(96116);e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},10842:function(e,t,n){var r=n(59879);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},26838:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},34765:function(e,t,n){e.exports=!n(37110)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},68922:function(e,t,n){var r=n(87742),a=n(81931).document,l=r(a)&&r(a.createElement);e.exports=function(e){return l?a.createElement(e):{}}},4561:function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},53864:function(e,t,n){var r=n(81931),a=n(61417),l=n(10842),f=n(87362),d=n(57558),h="prototype",p=function(e,t,n){var y,w,x,_=e&p.F,S=e&p.G,k=e&p.S,C=e&p.P,E=e&p.B,O=e&p.W,j=S?a:a[t]||(a[t]={}),T=j[h],A=S?r:k?r[t]:(r[t]||{})[h];for(y in S&&(n=t),n)(w=!_&&A&&void 0!==A[y])&&d(j,y)||(x=w?A[y]:n[y],j[y]=S&&"function"!=typeof A[y]?n[y]:E&&w?l(x,r):O&&A[y]==x?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[h]=e[h],t}(x):C&&"function"==typeof x?l(Function.call,x):x,C&&((j.virtual||(j.virtual={}))[y]=x,e&p.R&&T&&!T[y]&&f(T,y,x)))};p.F=1,p.G=2,p.S=4,p.P=8,p.B=16,p.W=32,p.U=64,p.R=128,e.exports=p},37110:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},81931:function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},57558:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},87362:function(e,t,n){var r=n(16135),a=n(96116);e.exports=n(34765)?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},23645:function(e,t,n){var r=n(81931).document;e.exports=r&&r.documentElement},89538:function(e,t,n){e.exports=!n(34765)&&!n(37110)((function(){return 7!=Object.defineProperty(n(68922)("div"),"a",{get:function(){return 7}}).a}))},12266:function(e,t,n){var r=n(99860);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},53424:function(e,t,n){var r=n(97308),a=n(15765)("iterator"),l=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||l[a]===e)}},37141:function(e,t,n){var r=n(99860);e.exports=Array.isArray||function(e){return"Array"==r(e)}},87742:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},46697:function(e,t,n){var r=n(8026);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){var l=e.return;throw void 0!==l&&r(l.call(e)),t}}},44787:function(e,t,n){"use strict";var r=n(45985),a=n(96116),l=n(87560),f={};n(87362)(f,n(15765)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(f,{next:a(1,n)}),l(e,t+" Iterator")}},89908:function(e,t,n){"use strict";var r=n(97857),a=n(53864),l=n(82965),f=n(87362),d=n(97308),h=n(44787),p=n(87560),y=n(98685),w=n(15765)("iterator"),x=!([].keys&&"next"in[].keys()),_="keys",S="values",k=function(){return this};e.exports=function(e,t,n,C,E,O,j){h(n,t,C);var T,A,P,D=function(e){if(!x&&e in L)return L[e];switch(e){case _:case S:return function(){return new n(this,e)}}return function(){return new n(this,e)}},R=t+" Iterator",I=E==S,M=!1,L=e.prototype,N=L[w]||L["@@iterator"]||E&&L[E],F=N||D(E),q=E?I?D("entries"):F:void 0,B="Array"==t&&L.entries||N;if(B&&(P=y(B.call(new e)))!==Object.prototype&&P.next&&(p(P,R,!0),r||"function"==typeof P[w]||f(P,w,k)),I&&N&&N.name!==S&&(M=!0,F=function(){return N.call(this)}),r&&!j||!x&&!M&&L[w]||f(L,w,F),d[t]=F,d[R]=k,E)if(T={values:I?F:D(S),keys:O?F:D(_),entries:q},j)for(A in T)A in L||l(L,A,T[A]);else a(a.P+a.F*(x||M),t,T);return T}},74695:function(e,t,n){var r=n(15765)("iterator"),a=!1;try{var l=[7][r]();l.return=function(){a=!0},Array.from(l,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var l=[7],f=l[r]();f.next=function(){return{done:n=!0}},l[r]=function(){return f},e(l)}catch(e){}return n}},97308:function(e){e.exports={}},97857:function(e){e.exports=!0},7678:function(e,t,n){"use strict";var r=n(34765),a=n(13450),l=n(93132),f=n(89266),d=n(37315),h=n(12266),p=Object.assign;e.exports=!p||n(37110)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=p({},e)[n]||Object.keys(p({},t)).join("")!=r}))?function(e,t){for(var n=d(e),p=arguments.length,y=1,w=l.f,x=f.f;p>y;)for(var _,S=h(arguments[y++]),k=w?a(S).concat(w(S)):a(S),C=k.length,E=0;C>E;)_=k[E++],r&&!x.call(S,_)||(n[_]=S[_]);return n}:p},45985:function(e,t,n){var r=n(8026),a=n(57566),l=n(4561),f=n(99886)("IE_PROTO"),d=function(){},h="prototype",p=function(){var e,t=n(68922)("iframe"),r=l.length;for(t.style.display="none",n(23645).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),p=e.F;r--;)delete p[h][l[r]];return p()};e.exports=Object.create||function(e,t){var n;return null!==e?(d[h]=r(e),n=new d,d[h]=null,n[f]=e):n=p(),void 0===t?n:a(n,t)}},16135:function(e,t,n){var r=n(8026),a=n(89538),l=n(86343),f=Object.defineProperty;t.f=n(34765)?Object.defineProperty:function(e,t,n){if(r(e),t=l(t,!0),r(n),a)try{return f(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},57566:function(e,t,n){var r=n(16135),a=n(8026),l=n(13450);e.exports=n(34765)?Object.defineProperties:function(e,t){a(e);for(var n,f=l(t),d=f.length,h=0;d>h;)r.f(e,n=f[h++],t[n]);return e}},49580:function(e,t,n){var r=n(89266),a=n(96116),l=n(2815),f=n(86343),d=n(57558),h=n(89538),p=Object.getOwnPropertyDescriptor;t.f=n(34765)?p:function(e,t){if(e=l(e),t=f(t,!0),h)try{return p(e,t)}catch(e){}if(d(e,t))return a(!r.f.call(e,t),e[t])}},93132:function(e,t){t.f=Object.getOwnPropertySymbols},98685:function(e,t,n){var r=n(57558),a=n(37315),l=n(99886)("IE_PROTO"),f=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),r(e,l)?e[l]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?f:null}},72752:function(e,t,n){var r=n(57558),a=n(2815),l=n(17950)(!1),f=n(99886)("IE_PROTO");e.exports=function(e,t){var n,d=a(e),h=0,p=[];for(n in d)n!=f&&r(d,n)&&p.push(n);for(;t.length>h;)r(d,n=t[h++])&&(~l(p,n)||p.push(n));return p}},13450:function(e,t,n){var r=n(72752),a=n(4561);e.exports=Object.keys||function(e){return r(e,a)}},89266:function(e,t){t.f={}.propertyIsEnumerable},75341:function(e,t,n){var r=n(53864),a=n(61417),l=n(37110);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],f={};f[e]=t(n),r(r.S+r.F*l((function(){n(1)})),"Object",f)}},68800:function(e,t,n){var r=n(34765),a=n(13450),l=n(2815),f=n(89266).f;e.exports=function(e){return function(t){for(var n,d=l(t),h=a(d),p=h.length,y=0,w=[];p>y;)n=h[y++],r&&!f.call(d,n)||w.push(e?[n,d[n]]:d[n]);return w}}},96116:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},82965:function(e,t,n){e.exports=n(87362)},47994:function(e,t,n){var r=n(87742),a=n(8026),l=function(e,t){if(a(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(10842)(Function.call,n(49580).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return l(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:l}},87560:function(e,t,n){var r=n(16135).f,a=n(57558),l=n(15765)("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,l)&&r(e,l,{configurable:!0,value:t})}},99886:function(e,t,n){var r=n(23388)("keys"),a=n(43469);e.exports=function(e){return r[e]||(r[e]=a(e))}},23388:function(e,t,n){var r=n(61417),a=n(81931),l="__core-js_shared__",f=a[l]||(a[l]={});(e.exports=function(e,t){return f[e]||(f[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(97857)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},77068:function(e,t,n){var r=n(80966),a=n(26838);e.exports=function(e){return function(t,n){var l,f,d=String(a(t)),h=r(n),p=d.length;return h<0||h>=p?e?"":void 0:(l=d.charCodeAt(h))<55296||l>56319||h+1===p||(f=d.charCodeAt(h+1))<56320||f>57343?e?d.charAt(h):l:e?d.slice(h,h+2):f-56320+(l-55296<<10)+65536}}},6453:function(e,t,n){var r=n(80966),a=Math.max,l=Math.min;e.exports=function(e,t){return(e=r(e))<0?a(e+t,0):l(e,t)}},80966:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},2815:function(e,t,n){var r=n(12266),a=n(26838);e.exports=function(e){return r(a(e))}},30712:function(e,t,n){var r=n(80966),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},37315:function(e,t,n){var r=n(26838);e.exports=function(e){return Object(r(e))}},86343:function(e,t,n){var r=n(87742);e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},43469:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},15765:function(e,t,n){var r=n(23388)("wks"),a=n(43469),l=n(81931).Symbol,f="function"==typeof l;(e.exports=function(e){return r[e]||(r[e]=f&&l[e]||(f?l:a)("Symbol."+e))}).store=r},37507:function(e,t,n){var r=n(61330),a=n(15765)("iterator"),l=n(97308);e.exports=n(61417).getIteratorMethod=function(e){if(null!=e)return e[a]||e["@@iterator"]||l[r(e)]}},33488:function(e,t,n){"use strict";var r=n(10842),a=n(53864),l=n(37315),f=n(46697),d=n(53424),h=n(30712),p=n(9407),y=n(37507);a(a.S+a.F*!n(74695)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,a,w,x=l(e),_="function"==typeof this?this:Array,S=arguments.length,k=S>1?arguments[1]:void 0,C=void 0!==k,E=0,O=y(x);if(C&&(k=r(k,S>2?arguments[2]:void 0,2)),null==O||_==Array&&d(O))for(n=new _(t=h(x.length));t>E;E++)p(n,E,C?k(x[E],E):x[E]);else for(w=O.call(x),n=new _;!(a=w.next()).done;E++)p(n,E,C?f(w,k,[a.value,E],!0):a.value);return n.length=E,n}})},22423:function(e,t,n){var r=n(53864);r(r.S,"Array",{isArray:n(37141)})},18566:function(e,t,n){var r=n(53864);r(r.S+r.F,"Object",{assign:n(7678)})},39685:function(e,t,n){var r=n(53864);r(r.S,"Object",{create:n(45985)})},74046:function(e,t,n){var r=n(37315),a=n(13450);n(75341)("keys",(function(){return function(e){return a(r(e))}}))},45460:function(e,t,n){var r=n(53864);r(r.S,"Object",{setPrototypeOf:n(47994).set})},13165:function(e,t,n){"use strict";var r=n(77068)(!0);n(89908)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},74574:function(e,t,n){var r=n(53864),a=n(68800)(!0);r(r.S,"Object",{entries:function(e){return a(e)}})},21954:function(e,t,n){var r=n(53864),a=n(68800)(!1);r(r.S,"Object",{values:function(e){return a(e)}})},44763:function(e,t,n){"use strict";n.r(t),n.d(t,{Breadcrumbs:function(){return Bt},BrowserClient:function(){return _n},Dedupe:function(){return Yt},FunctionToString:function(){return B},GlobalHandlers:function(){return Et},HttpContext:function(){return Kt},Hub:function(){return ge},InboundFilters:function(){return ee},Integrations:function(){return tr},LinkedErrors:function(){return Wt},SDK_VERSION:function(){return Se},Scope:function(){return fe},TryCatch:function(){return Dt},addBreadcrumb:function(){return Oe},addGlobalEventProcessor:function(){return he},captureEvent:function(){return Ce},captureException:function(){return captureException},captureMessage:function(){return ke},chromeStackLineParser:function(){return Tn},close:function(){return Yn},configureScope:function(){return Ee},createTransport:function(){return Ge},defaultIntegrations:function(){return Hn},defaultStackLineParsers:function(){return qn},defaultStackParser:function(){return Bn},flush:function(){return Kn},forceLoad:function(){return Zn},geckoStackLineParser:function(){return Dn},getCurrentHub:function(){return be},getHubFromCarrier:function(){return xe},init:function(){return zn},lastEventId:function(){return Wn},makeFetchTransport:function(){return Sn},makeMain:function(){return ye},makeXHRTransport:function(){return Cn},onLoad:function(){return Gn},opera10StackLineParser:function(){return Ln},opera11StackLineParser:function(){return Fn},setContext:function(){return je},setExtra:function(){return Te},setExtras:function(){return $e},setTag:function(){return Pe},setTags:function(){return Ae},setUser:function(){return De},showReportDialog:function(){return Vn},startTransaction:function(){return Ie},winjsStackLineParser:function(){return In},withScope:function(){return Re},wrap:function(){return Xn}});var r={};n.r(r),n.d(r,{FunctionToString:function(){return B},InboundFilters:function(){return ee}});var a={};n.r(a),n.d(a,{Breadcrumbs:function(){return Bt},Dedupe:function(){return Yt},GlobalHandlers:function(){return Et},HttpContext:function(){return Kt},LinkedErrors:function(){return Wt},TryCatch:function(){return Dt}});var l=n(68718),f=Object.prototype.toString;function isError(e){switch(f.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return S(e,Error)}}function d(e,t){return f.call(e)===`[object ${t}]`}function h(e){return d(e,"ErrorEvent")}function isDOMError(e){return d(e,"DOMError")}function p(e){return d(e,"String")}function y(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function w(e){return d(e,"Object")}function x(e){return"undefined"!=typeof Event&&S(e,Event)}function _(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function S(e,t){try{return e instanceof t}catch(e){return!1}}function k(e,t){try{let a=e;var n=[];let l=0,f=0;var r=" > ".length;let d;for(;a&&l++<5&&(d=C(a,t),!("html"===d||l>1&&f+n.length*r+d.length>=80));)n.push(d),f+=d.length,a=a.parentNode;return n.reverse().join(" > ")}catch(e){return"<unknown>"}}function C(e,t){var n=e,r=[];let a,l,f,d,h;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());var y=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(y&&y.length)y.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),a=n.className,a&&p(a))for(l=a.split(/\s+/),h=0;h<l.length;h++)r.push(`.${l[h]}`);var w=["type","name","title","alt"];for(h=0;h<w.length;h++)f=w[h],d=n.getAttribute(f),d&&r.push(`[${f}="${d}"]`);return r.join("")}function E(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.substr(0,t)}...`}function O(e,t){if(!Array.isArray(e))return"";var n=[];for(let t=0;t<e.length;t++){var r=e[t];try{n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function j(e,t){return!!p(e)&&(d(t,"RegExp")?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}function T(e,t,n){if(t in e){var r=e[t],a=n(r);if("function"==typeof a)try{P(a,r)}catch(e){}e[t]=a}}function A(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function P(e,t){var n=t.prototype||{};e.prototype=t.prototype=n,A(e,"__sentry_original__",t)}function D(e){return e.__sentry_original__}function R(e){if(isError(e))return{message:e.message,name:e.name,stack:e.stack,...M(e)};if(x(e)){var t={type:e.type,target:I(e.target),currentTarget:I(e.currentTarget),...M(e)};return"undefined"!=typeof CustomEvent&&S(e,CustomEvent)&&(t.detail=e.detail),t}return e}function I(e){try{return t=e,"undefined"!=typeof Element&&S(t,Element)?k(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function M(e){if("object"==typeof e&&null!==e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function L(e,t=40){var n=Object.keys(R(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return E(n[0],t);for(let e=n.length;e>0;e--){var r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:E(r,t)}return""}function N(e){return F(e,new Map)}function F(e,t){if(w(e)){if(void 0!==(a=t.get(e)))return a;var n={};for(var r of(t.set(e,n),Object.keys(e)))void 0!==e[r]&&(n[r]=F(e[r],t));return n}if(Array.isArray(e)){var a;if(void 0!==(a=t.get(e)))return a;n=[];return t.set(e,n),e.forEach((e=>{n.push(F(e,t))})),n}return e}let q;class B{constructor(){B.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=B.id}setupOnce(){q=Function.prototype.toString,Function.prototype.toString=function(...e){var t=D(this)||this;return q.apply(t,e)}}}B.__initStatic();var U=(0,l.R)(),H=["debug","info","warn","error","log","assert","trace"];function z(e){var t=(0,l.R)();if(!("console"in t))return e();var n=t.console,r={};H.forEach((e=>{var a=n[e]&&n[e].__sentry_original__;e in t.console&&a&&(r[e]=n[e],n[e]=a)}));try{return e()}finally{Object.keys(r).forEach((e=>{n[e]=r[e]}))}}function V(){let e=!1;var t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?H.forEach((n=>{t[n]=(...t)=>{e&&z((()=>{U.console[n](`Sentry Logger [${n}]:`,...t)}))}})):H.forEach((e=>{t[e]=()=>{}})),t}let W;function Z(){var e=(0,l.R)(),t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");var n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function G(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function getFirstException(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function K(e){const{message:t,event_id:n}=e;if(t)return t;var r=getFirstException(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Y(e,t,n){var r=e.exception=e.exception||{},a=r.values=r.values||[],l=a[0]=a[0]||{};l.value||(l.value=t||""),l.type||(l.type=n||"Error")}function X(e,t){var n=getFirstException(e);if(n){var r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){var a={...r&&r.data,...t.data};n.mechanism.data=a}}}W="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,l.Y)("logger",V):V();function J(e){if(e&&e.__sentry_captured__)return!0;try{A(e,"__sentry_captured__",!0)}catch(e){}return!1}var Q=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class ee{static __initStatic(){this.id="InboundFilters"}__init(){this.name=ee.id}constructor(e={}){this._options=e,ee.prototype.__init.call(this)}setupOnce(e,t){var n=e=>{var n=t();if(n){var r=n.getIntegration(ee);if(r){var a=n.getClient(),l=a?a.getOptions():{},f=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...Q],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(r._options,l);return function(e,t){if(t.ignoreInternal&&function _isSentryError(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${K(e)}`),!0;if(function _isIgnoredError(e,t){if(!t||!t.length)return!1;return function(e){if(e.message)return[e.message];if(e.exception)try{const{type:t="",value:n=""}=e.exception.values&&e.exception.values[0]||{};return[`${n}`,`${t}: ${n}`]}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error(`Cannot extract message for event ${K(e)}`),[]}return[]}(e).some((e=>t.some((t=>j(e,t)))))}(e,t.ignoreErrors))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${K(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;var n=te(e);return!!n&&t.some((e=>j(n,e)))}(e,t.denyUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${K(e)}.\nUrl: ${te(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;var n=te(e);return!n||t.some((e=>j(n,e)))}(e,t.allowUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${K(e)}.\nUrl: ${te(e)}`),!0;return!1}(e,f)?null:e}}return e};n.id=this.name,e(n)}}function te(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let n=e.length-1;n>=0;n--){var t=e[n];if(t&&"<anonymous>"!==t.filename&&"[native code]"!==t.filename)return t.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error(`Cannot extract url for event ${K(e)}`),null}}ee.__initStatic();var ne,re=n(88271),oe=n(27643);function ae(e){return new le((t=>{t(e)}))}function se(e){return new le(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(ne||(ne={}));class le{__init(){this._state=ne.PENDING}__init2(){this._handlers=[]}constructor(e){le.prototype.__init.call(this),le.prototype.__init2.call(this),le.prototype.__init3.call(this),le.prototype.__init4.call(this),le.prototype.__init5.call(this),le.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new le(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new le(((t,n)=>{let r,a;return this.then((t=>{a=!1,r=t,e&&e()}),(t=>{a=!0,r=t,e&&e()})).then((()=>{a?n(r):t(r)}))}))}__init3(){this._resolve=e=>{this._setResult(ne.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(ne.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{this._state===ne.PENDING&&(_(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state!==ne.PENDING){var e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===ne.RESOLVED&&e[1](this._value),this._state===ne.REJECTED&&e[2](this._value),e[0]=!0)}))}}}}function ce(e){var t=(0,re.ph)(),n={sid:Z(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return N({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&ue(n,e),n}function ue(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,re.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Z()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{var n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class fe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){var t=new fe;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments]),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&ue(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts={...this._contexts,[e]:t},this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){var e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){var t=e(this);return t instanceof fe?t:this}return e instanceof fe?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):w(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var r={timestamp:(0,re.yW)(),...e};return this._breadcrumbs=[...this._breadcrumbs,r].slice(-n),this._notifyScopeListeners(),this}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};var n=this._span.transaction&&this._span.transaction.name;n&&(e.tags={transaction:n,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...de(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,t,n,r=0){return new le(((a,l)=>{var f=e[r];if(null===t||"function"!=typeof f)a(t);else{var d=f({...t},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&f.id&&null===d&&W.log(`Event processor "${f.id}" dropped event`),_(d)?d.then((t=>this._notifyEventProcessors(e,t,n,r+1).then(a))).then(null,l):this._notifyEventProcessors(e,d,n,r+1).then(a).then(null,l)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function de(){return(0,l.Y)("globalEventProcessors",(()=>[]))}function he(e){de().push(e)}var pe=4,me=100;class ge{__init(){this._stack=[{}]}constructor(e,t=new fe,n=pe){this._version=n,ge.prototype.__init.call(this),this.getStackTop().scope=t,e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){var e=fe.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){var n=this._lastEventId=t&&t.event_id?t.event_id:Z(),r=new Error("Sentry syntheticException");return this._withClient(((a,l)=>{a.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},l)})),n}captureMessage(e,t,n){var r=this._lastEventId=n&&n.event_id?n.event_id:Z(),a=new Error(e);return this._withClient(((l,f)=>{l.captureMessage(e,t,{originalException:e,syntheticException:a,...n,event_id:r},f)})),r}captureEvent(e,t){var n=t&&t.event_id?t.event_id:Z();return"transaction"!==e.type&&(this._lastEventId=n),this._withClient(((r,a)=>{r.captureEvent(e,{...t,event_id:n},a)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!n||!r)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:l=me}=r.getOptions&&r.getOptions()||{};if(!(l<=0)){var f={timestamp:(0,re.yW)(),...e},d=a?z((()=>a(f,t))):f;null!==d&&n.addBreadcrumb(d,l)}}setUser(e){var t=this.getScope();t&&t.setUser(e)}setTags(e){var t=this.getScope();t&&t.setTags(e)}setExtras(e){var t=this.getScope();t&&t.setExtras(e)}setTag(e,t){var n=this.getScope();n&&n.setTag(e,t)}setExtra(e,t){var n=this.getScope();n&&n.setExtra(e,t)}setContext(e,t){var n=this.getScope();n&&n.setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();t&&n&&e(t)}run(e){var t=ye(this);try{e(this)}finally{ye(t)}}getIntegration(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){return this._callExtensionMethod("startTransaction",e,t)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){var e=this.getStackTop(),t=e&&e.scope,n=t&&t.getSession();n&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),ue(e,n)}(n),this._sendSessionUpdate(),t&&t.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:a}=n&&n.getOptions()||{};var f=(0,l.R)();const{userAgent:d}=f.navigator||{};var h=ce({release:r,environment:a,...t&&{user:t.getUser()},...d&&{userAgent:d},...e});if(t){var p=t.getSession&&t.getSession();p&&"ok"===p.status&&ue(p,{status:"exited"}),this.endSession(),t.setSession(h)}return h}shouldSendDefaultPii(){var e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop();if(e){var n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}}_withClient(e){const{scope:t,client:n}=this.getStackTop();n&&e(n,t)}_callExtensionMethod(e,...t){var n=ve().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function ve(){var e=(0,l.R)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function ye(e){var t=ve(),n=xe(t);return _e(t,e),n}function be(){var e=ve();return we(e)&&!xe(e).isOlderThan(pe)||_e(e,new ge),(0,oe.KV)()?function(e){try{var t=ve().__SENTRY__,n=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!n)return xe(e);if(!we(n)||xe(n).isOlderThan(pe)){var r=xe(e).getStackTop();_e(n,new ge(r.client,fe.clone(r.scope)))}return xe(n)}catch(t){return xe(e)}}(e):xe(e)}function we(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function xe(e){return(0,l.Y)("hub",(()=>new ge),e)}function _e(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}var Se="7.8.1";function captureException(e,t){return be().captureException(e,{captureContext:t})}function ke(e,t){var n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return be().captureMessage(e,n,r)}function Ce(e,t){return be().captureEvent(e,t)}function Ee(e){be().configureScope(e)}function Oe(e){be().addBreadcrumb(e)}function je(e,t){be().setContext(e,t)}function $e(e){be().setExtras(e)}function Te(e,t){be().setExtra(e,t)}function Ae(e){be().setTags(e)}function Pe(e,t){be().setTag(e,t)}function De(e){be().setUser(e)}function Re(e){be().withScope(e)}function Ie(e,t){return be().startTransaction({metadata:{source:"custom"},...e},t)}class SentryError extends Error{constructor(e){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}function Me(e){var t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return se(new SentryError("Not adding Promise due to buffer limit reached."));var a=r();return-1===t.indexOf(a)&&t.push(a),a.then((()=>n(a))).then(null,(()=>n(a).then(null,(()=>{})))),a},drain:function(e){return new le(((n,r)=>{let a=t.length;if(!a)return n(!0);var l=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{ae(e).then((()=>{--a||(clearTimeout(l),n(!0))}),r)}))}))}}}function Le(e,t=[]){return[e,t]}function Ne(e,t){const[n,r]=e;return[n,[...r,t]]}function Fe(e,t){e[1].forEach((e=>{var n=e[0].type;t(e,n)}))}function qe(e,t){return(t||new TextEncoder).encode(e)}function Be(e,t){const[n,r]=e;let a=JSON.stringify(n);function l(e){"string"==typeof a?a="string"==typeof e?a+e:[qe(a,t),e]:a.push("string"==typeof e?qe(e,t):e)}for(var f of r){const[e,t]=f;l(`\n${JSON.stringify(e)}\n`),l("string"==typeof t||t instanceof Uint8Array?t:JSON.stringify(t))}return"string"==typeof a?a:function(e){var t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(var a of e)n.set(a,r),r+=a.length;return n}(a)}function Ue(e,t){var n="string"==typeof e.data?qe(e.data,t):e.data;return[N({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}var He={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default"};function ze(e){return He[e]}var Ve=6e4;function We(e,{statusCode:t,headers:n},r=Date.now()){var a={...e},l=n&&n["x-sentry-rate-limits"],f=n&&n["retry-after"];if(l)for(var d of l.trim().split(",")){const[e,t]=d.split(":",2);var h=parseInt(e,10),p=1e3*(isNaN(h)?60:h);if(t)for(var y of t.split(";"))a[y]=r+p;else a.all=r+p}else f?a.all=r+function(e,t=Date.now()){var n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(`${e}`);return isNaN(r)?Ve:r-t}(f,r):429===t&&(a.all=r+6e4);return a}var Ze=30;function Ge(e,t,n=Me(e.bufferSize||Ze)){let r={};return{send:function(a){var l=[];if(Fe(a,((t,n)=>{var a=ze(n);!function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(r,a)?l.push(t):e.recordDroppedEvent("ratelimit_backoff",a)})),0===l.length)return ae();var f=Le(a[0],l),d=t=>{Fe(f,((n,r)=>{e.recordDroppedEvent(t,ze(r))}))};return n.add((()=>t({body:Be(f,e.textEncoder)}).then((e=>{void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=We(r,e)}),(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error("Failed while sending event:",e),d("network_error")})))).then((e=>e),(e=>{if(e instanceof SentryError)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error("Skipped sending event due to full buffer"),d("queue_overflow"),ae();throw e}))},flush:e=>n.drain(e)}}var Ke=50;function Ye(...e){var t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{var r=[];for(var a of e.split("\n").slice(n))for(var l of t){var f=l(a);if(f){r.push(f);break}}return function(e){if(!e.length)return[];let t=e;var n=t[0].function||"",r=t[t.length-1].function||"";-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1));-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1));return t.slice(0,Ke).map((e=>({...e,filename:e.filename||t[0].filename,function:e.function||"?"}))).reverse()}(r)}}var Xe="<anonymous>";function Je(e){try{return e&&"function"==typeof e&&e.name||Xe}catch(e){return Xe}}function Qe(){if(!("fetch"in(0,l.R)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function et(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}var tt=(0,l.R)(),nt={},rt={};function it(e){if(!rt[e])switch(rt[e]=!0,e){case"console":!function(){if(!("console"in tt))return;H.forEach((function(e){e in tt.console&&T(tt.console,e,(function(t){return function(...n){at("console",{args:n,level:e}),t&&t.apply(tt.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in tt))return;var e=at.bind(null,"dom"),t=ht(e,!0);tt.document.addEventListener("click",t,!1),tt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{var n=tt[t]&&tt[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(T(n,"addEventListener",(function(t){return function(n,r,a){if("click"===n||"keypress"==n)try{var l=this,f=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},d=f[n]=f[n]||{refCount:0};if(!d.handler){var h=ht(e);d.handler=h,t.call(this,n,h,a)}d.refCount+=1}catch(e){}return t.call(this,n,r,a)}})),T(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var a=this,l=a.__sentry_instrumentation_handlers__||{},f=l[t];f&&(f.refCount-=1,f.refCount<=0&&(e.call(this,t,f.handler,r),f.handler=void 0,delete l[t]),0===Object.keys(l).length&&delete a.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in tt))return;var e=XMLHttpRequest.prototype;T(e,"open",(function(e){return function(...t){var n=this,r=t[1],a=n.__sentry_xhr__={method:p(t[0])?t[0].toUpperCase():t[0],url:t[1]};p(r)&&"POST"===a.method&&r.match(/sentry_key/)&&(n.__sentry_own_request__=!0);var l=function(){if(4===n.readyState){try{a.status_code=n.status}catch(e){}at("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?T(n,"onreadystatechange",(function(e){return function(...t){return l(),e.apply(n,t)}})):n.addEventListener("readystatechange",l),e.apply(n,t)}})),T(e,"send",(function(e){return function(...t){return this.__sentry_xhr__&&void 0!==t[0]&&(this.__sentry_xhr__.body=t[0]),at("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":!function(){if(!function(){if(!Qe())return!1;var e=(0,l.R)();if(et(e.fetch))return!0;let t=!1;var n=e.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=et(r.contentWindow.fetch)),n.head.removeChild(r)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}())return;T(tt,"fetch",(function(e){return function(...t){var n={args:t,fetchData:{method:st(t),url:lt(t)},startTimestamp:Date.now()};return at("fetch",{...n}),e.apply(tt,t).then((e=>(at("fetch",{...n,endTimestamp:Date.now(),response:e}),e)),(e=>{throw at("fetch",{...n,endTimestamp:Date.now(),error:e}),e}))}}))}();break;case"history":!function(){if(!function(){var e=(0,l.R)(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}())return;var e=tt.onpopstate;function t(e){return function(...t){var n=t.length>2?t[2]:void 0;if(n){var r=ct,a=String(n);ct=a,at("history",{from:r,to:a})}return e.apply(this,t)}}tt.onpopstate=function(...t){var n=tt.location.href,r=ct;if(ct=n,at("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},T(tt.history,"pushState",t),T(tt.history,"replaceState",t)}();break;case"error":!function instrumentError(){pt=tt.onerror,tt.onerror=function(e,t,n,r,a){return at("error",{column:r,error:a,line:n,msg:e,url:t}),!!pt&&pt.apply(this,arguments)}}();break;case"unhandledrejection":mt=tt.onunhandledrejection,tt.onunhandledrejection=function(e){return at("unhandledrejection",e),!mt||mt.apply(this,arguments)};break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("unknown instrumentation type:",e))}}function ot(e,t){nt[e]=nt[e]||[],nt[e].push(t),it(e)}function at(e,t){if(e&&nt[e])for(var n of nt[e]||[])try{n(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Je(n)}\nError:`,t)}}function st(e=[]){return"Request"in tt&&S(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function lt(e=[]){return"string"==typeof e[0]?e[0]:"Request"in tt&&S(e[0],Request)?e[0].url:String(e[0])}let ct;var ut=1e3;let ft,dt;function ht(e,t=!1){return n=>{if(n&&dt!==n&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===ft||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(dt,n))&&(e({event:n,name:r,global:t}),dt=n),clearTimeout(ft),ft=tt.setTimeout((()=>{ft=void 0}),ut)}}}let pt=null;let mt=null;function gt(e,t=1/0,n=1/0){try{return yt("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function vt(e,t=3,n=102400){var r,a=gt(e,t);return r=a,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>n?vt(e,t-1,n):a}function yt(e,t,r=1/0,a=1/0,l=function(){var e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[f,d]=l;if(null===t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(h=t)||h==h))return t;var h,p=function(e,t){try{return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":void 0!==n.g&&t===n.g?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":function(e){return w(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?`[Function: ${Je(t)}]`:"symbol"==typeof t?`[${String(t)}]`:"bigint"==typeof t?`[BigInt: ${String(t)}]`:`[object ${Object.getPrototypeOf(t).constructor.name}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!p.startsWith("[object "))return p;if(t.__sentry_skip_normalization__)return t;if(0===r)return p.replace("object ","");if(f(t))return"[Circular ~]";var y=t;if(y&&"function"==typeof y.toJSON)try{return yt("",y.toJSON(),r-1,a,l)}catch(e){}var x=Array.isArray(t)?[]:{};let _=0;var S=R(t);for(var k in S)if(Object.prototype.hasOwnProperty.call(S,k)){if(_>=a){x[k]="[MaxProperties ~]";break}var C=S[k];x[k]=yt(k,C,r-1,a,l),_+=1}return d(t),x}function exceptionFromError(e,t){var n=bt(e,t),r={type:t&&t.name,value:xt(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function eventFromError(e,t){return{exception:{values:[exceptionFromError(e,t)]}}}function bt(e,t){var n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(wt.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}var wt=/Minified React error #\d+;/i;function xt(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function _t(e,t,n,r,a){let l;if(h(t)&&t.error)return eventFromError(e,t.error);if(isDOMError(t)||function isDOMException(e){return d(e,"DOMException")}(t)){var f=t;if("stack"in t)l=eventFromError(e,t);else{var p=f.name||(isDOMError(f)?"DOMError":"DOMException"),y=f.message?`${p}: ${f.message}`:p;l=St(e,y,n,r),Y(l,y)}return"code"in f&&(l.tags={...l.tags,"DOMException.code":`${f.code}`}),l}return isError(t)?eventFromError(e,t):w(t)||x(t)?(l=function(e,t,n,r){var a={exception:{values:[{type:x(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:`Non-Error ${r?"promise rejection":"exception"} captured with keys: ${L(t)}`}]},extra:{__serialized__:vt(t)}};if(n){var l=bt(e,n);l.length&&(a.exception.values[0].stacktrace={frames:l})}return a}(e,t,n,a),X(l,{synthetic:!0}),l):(l=St(e,t,n,r),Y(l,`${t}`,void 0),X(l,{synthetic:!0}),l)}function St(e,t,n,r){var a={message:t};if(r&&n){var l=bt(e,n);l.length&&(a.exception={values:[{value:t,stacktrace:{frames:l}}]})}return a}let kt=0;function shouldIgnoreOnError(){return kt>0}function Ct(e,t={},n){if("function"!=typeof e)return e;try{var r=e.__sentry_wrapped__;if(r)return r;if(D(e))return e}catch(t){return e}var a=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var a=r.map((e=>Ct(e,t)));return e.apply(this,a)}catch(e){throw function ignoreNextOnError(){kt+=1,setTimeout((()=>{kt-=1}))}(),Re((n=>{n.addEventProcessor((e=>(t.mechanism&&(Y(e,void 0,void 0),X(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),captureException(e)})),e}};try{for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(a[l]=e[l])}catch(e){}P(a,e),A(e,"__sentry_wrapped__",a);try{Object.getOwnPropertyDescriptor(a,"name").configurable&&Object.defineProperty(a,"name",{get(){return e.name}})}catch(e){}return a}class Et{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=Et.id}__init2(){this._installFunc={onerror:Ot,onunhandledrejection:jt}}constructor(e){Et.prototype.__init.call(this),Et.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;var e,t=this._options;for(var n in t){var r=this._installFunc[n];r&&t[n]&&(e=n,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.log(`Global Handler attached: ${e}`),r(),this._installFunc[n]=void 0)}}}function Ot(){ot("error",(e=>{const[t,n,r]=At();if(!t.getIntegration(Et))return;const{msg:a,url:l,line:f,column:d,error:y}=e;if(!(shouldIgnoreOnError()||y&&y.__sentry_own_request__)){var w=void 0===y&&p(a)?function _eventFromIncompleteOnError(e,t,n,r){var a=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let l=h(e)?e.message:e,f="Error";var d=l.match(a);d&&(f=d[1],l=d[2]);var p={exception:{values:[{type:f,value:l}]}};return $t(p,t,n,r)}(a,l,f,d):$t(_t(n,y||a,void 0,r,!1),l,f,d);w.level="error",Tt(t,y,w,"onerror")}}))}function jt(){ot("unhandledrejection",(e=>{const[t,n,r]=At();if(!t.getIntegration(Et))return;let a=e;try{"reason"in e?a=e.reason:"detail"in e&&"reason"in e.detail&&(a=e.detail.reason)}catch(e){}if(shouldIgnoreOnError()||a&&a.__sentry_own_request__)return!0;var l=y(a)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(a)}`}]}}:_t(n,a,void 0,r,!0);l.level="error",Tt(t,a,l,"onunhandledrejection")}))}function $t(e,t,n,r){var a=e.exception=e.exception||{},f=a.values=a.values||[],d=f[0]=f[0]||{},h=d.stacktrace=d.stacktrace||{},y=h.frames=h.frames||[],w=isNaN(parseInt(r,10))?void 0:r,x=isNaN(parseInt(n,10))?void 0:n,_=p(t)&&t.length>0?t:function(){var e=(0,l.R)();try{return e.document.location.href}catch(e){return""}}();return 0===y.length&&y.push({colno:w,filename:_,function:"?",in_app:!0,lineno:x}),e}function Tt(e,t,n,r){X(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function At(){var e=be(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}Et.__initStatic();var Pt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Dt{static __initStatic(){this.id="TryCatch"}__init(){this.name=Dt.id}constructor(e){Dt.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){var e=(0,l.R)();this._options.setTimeout&&T(e,"setTimeout",Rt),this._options.setInterval&&T(e,"setInterval",Rt),this._options.requestAnimationFrame&&T(e,"requestAnimationFrame",It),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&T(XMLHttpRequest.prototype,"send",Mt);var t=this._options.eventTarget;t&&(Array.isArray(t)?t:Pt).forEach(Lt)}}function Rt(e){return function(...t){var n=t[0];return t[0]=Ct(n,{mechanism:{data:{function:Je(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function It(e){return function(t){return e.apply(this,[Ct(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Je(e)},handled:!0,type:"instrument"}})])}}function Mt(e){return function(...t){var n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&T(n,e,(function(t){var n={mechanism:{data:{function:e,handler:Je(t)},handled:!0,type:"instrument"}},r=D(t);return r&&(n.mechanism.data.handler=Je(r)),Ct(t,n)}))})),e.apply(this,t)}}function Lt(e){var t=(0,l.R)(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(T(n,"addEventListener",(function(t){return function(n,r,a){try{"function"==typeof r.handleEvent&&(r.handleEvent=Ct(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Je(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Ct(r,{mechanism:{data:{function:"addEventListener",handler:Je(r),target:e},handled:!0,type:"instrument"}}),a])}})),T(n,"removeEventListener",(function(e){return function(t,n,r){var a=n;try{var l=a&&a.__sentry_wrapped__;l&&e.call(this,t,l,r)}catch(e){}return e.call(this,t,a,r)}})))}Dt.__initStatic();var Nt=["fatal","error","warning","log","info","debug"];function Ft(e){return"warn"===e?"warning":Nt.includes(e)?e:"log"}var qt="Breadcrumbs";class Bt{static __initStatic(){this.id=qt}__init(){this.name=Bt.id}constructor(e){Bt.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&ot("console",Ut),this.options.dom&&ot("dom",function(e){function t(t){let n,r="object"==typeof e?e.serializeAttribute:void 0;"string"==typeof r&&(r=[r]);try{n=t.event.target?k(t.event.target,r):k(t.event,r)}catch(e){n="<unknown>"}0!==n.length&&be().addBreadcrumb({category:`ui.${t.name}`,message:n},{event:t.event,name:t.name,global:t.global})}return t}(this.options.dom)),this.options.xhr&&ot("xhr",Ht),this.options.fetch&&ot("fetch",zt),this.options.history&&ot("history",Vt)}}function Ut(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:Ft(e.level),message:O(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${O(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}be().addBreadcrumb(t,{input:e.args,level:e.level})}function Ht(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;const{method:t,url:n,status_code:r,body:a}=e.xhr.__sentry_xhr__||{};be().addBreadcrumb({category:"xhr",data:{method:t,url:n,status_code:r},type:"http"},{xhr:e.xhr,input:a})}else;}function zt(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?be().addBreadcrumb({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args}):be().addBreadcrumb({category:"fetch",data:{...e.fetchData,status_code:e.response.status},type:"http"},{input:e.args,response:e.response})))}function Vt(e){var t=(0,l.R)();let n=e.from,r=e.to;var a=G(t.location.href);let f=G(n);var d=G(r);f.path||(f=a),a.protocol===d.protocol&&a.host===d.host&&(r=d.relative),a.protocol===f.protocol&&a.host===f.host&&(n=f.relative),be().addBreadcrumb({category:"navigation",data:{from:n,to:r}})}Bt.__initStatic();class Wt{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Wt.id}constructor(e={}){Wt.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){var e=be().getClient();e&&he(((t,n)=>{var r=be().getIntegration(Wt);return r?function(e,t,n,r,a){if(!(r.exception&&r.exception.values&&a&&S(a.originalException,Error)))return r;var l=Zt(e,n,a.originalException,t);return r.exception.values=[...l,...r.exception.values],r}(e.getOptions().stackParser,r._key,r._limit,t,n):t}))}}function Zt(e,t,n,r,a=[]){if(!S(n[r],Error)||a.length+1>=t)return a;var l=exceptionFromError(e,n[r]);return Zt(e,t,n[r],r,[l,...a])}Wt.__initStatic();var Gt=(0,l.R)();class Kt{constructor(){Kt.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Kt.id}setupOnce(){he((e=>{if(be().getIntegration(Kt)){if(!Gt.navigator&&!Gt.location&&!Gt.document)return e;var t=e.request&&e.request.url||Gt.location&&Gt.location.href;const{referrer:r}=Gt.document||{},{userAgent:a}=Gt.navigator||{};var n={...t&&{url:t},headers:{...e.request&&e.request.headers,...r&&{Referer:r},...a&&{"User-Agent":a}}};return{...e,request:n}}return e}))}}Kt.__initStatic();class Yt{constructor(){Yt.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Yt.id}setupOnce(e,t){var n=e=>{var n=t().getIntegration(Yt);if(n){try{if(function(e,t){if(!t)return!1;if(function(e,t){var n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Jt(e,t))return!1;if(!Xt(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){var n=Qt(t),r=Qt(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Jt(e,t))return!1;if(!Xt(e,t))return!1;return!0}(e,t))return!0;return!1}(e,n._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return n._previousEvent=e}return n._previousEvent=e}return e};n.id=this.name,e(n)}}function Xt(e,t){let n=en(e),r=en(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){var a=r[e],l=n[e];if(a.filename!==l.filename||a.lineno!==l.lineno||a.colno!==l.colno||a.function!==l.function)return!1}return!0}function Jt(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Qt(e){return e.exception&&e.exception.values&&e.exception.values[0]}function en(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Yt.__initStatic();var tn=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function nn(e,t=!1){const{host:n,path:r,pass:a,port:l,projectId:f,protocol:d,publicKey:h}=e;return`${d}://${h}${t&&a?`:${a}`:""}@${n}${l?`:${l}`:""}/${r?`${r}/`:r}${f}`}function rn(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function on(e){var t="string"==typeof e?function(e){var t=tn.exec(e);if(!t)throw new SentryError(`Invalid Sentry Dsn: ${e}`);const[n,r,a="",l,f="",d]=t.slice(1);let h="",p=d;var y=p.split("/");if(y.length>1&&(h=y.slice(0,-1).join("/"),p=y.pop()),p){var w=p.match(/^\d+/);w&&(p=w[0])}return rn({host:l,pass:a,path:h,projectId:p,port:f,protocol:n,publicKey:r})}(e):rn(e);return function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return;const{port:t,projectId:n,protocol:r}=e;if(["protocol","publicKey","host","projectId"].forEach((t=>{if(!e[t])throw new SentryError(`Invalid Sentry Dsn: ${t} missing`)})),!n.match(/^\d+$/))throw new SentryError(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!function(e){return"http"===e||"https"===e}(r))throw new SentryError(`Invalid Sentry Dsn: Invalid protocol ${r}`);if(t&&isNaN(parseInt(t,10)))throw new SentryError(`Invalid Sentry Dsn: Invalid port ${t}`)}(t),t}var an="7";function sn(e){var t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function ln(e,t){return n={sentry_key:e.publicKey,sentry_version:an,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function cn(e,t={}){var n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${sn(e)}${e.projectId}/envelope/`}(e)}?${ln(e,r)}`}function un(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function dn(e,t,n,r){var a=un(n),l=e.type||"event";const{transactionSampling:f}=e.sdkProcessingMetadata||{},{method:d,rate:h}=f||{};!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);var p=function(e,t,n,r){var a=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.baggage,l=a&&function(e){return e[0]}(a);return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&{dsn:nn(r)},..."transaction"===e.type&&l&&{trace:N({...l})}}}(e,a,r,t);return delete e.sdkProcessingMetadata,Le(p,[[{type:l,sample_rates:[{id:d,rate:h}]},e]])}var hn=[];function pn(e){return e.reduce(((e,t)=>(e.every((e=>t.name!==e.name))&&e.push(t),e)),[])}function mn(e){var t=e.defaultIntegrations&&[...e.defaultIntegrations]||[],n=e.integrations;let r=[...pn(t)];Array.isArray(n)?r=[...r.filter((e=>n.every((t=>t.name!==e.name)))),...pn(n)]:"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var a=r.map((e=>e.name)),l="Debug";return-1!==a.indexOf(l)&&r.push(...r.splice(a.indexOf(l),1)),r}var gn="Not capturing exception because it's already been captured.";class vn{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(e){if(vn.prototype.__init.call(this),vn.prototype.__init2.call(this),vn.prototype.__init3.call(this),vn.prototype.__init4.call(this),this._options=e,e.dsn){this._dsn=on(e.dsn);var t=cn(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("No DSN provided, client will not do anything.")}captureException(e,t,n){if(J(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.log(gn));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let a=n&&n.event_id;var l=y(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(l.then((e=>this._captureEvent(e,n,r))).then((e=>{a=e}))),a}captureEvent(e,t,n){if(t&&t.originalException&&J(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.log(gn));let r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((e=>{r=e}))),r}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ue(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getTransport(){return this._transport}flush(e){var t=this._transport;return t?this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e)))):ae(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){var e,t;this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=(e=this._options.integrations,t={},e.forEach((e=>{t[e.name]=e,-1===hn.indexOf(e.name)&&(e.setupOnce(he,be),hn.push(e.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.log(`Integration installed: ${e.name}`))})),t),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}sendEvent(e,t={}){if(this._dsn){let r=dn(e,this._dsn,this._options._metadata,this._options.tunnel);for(var n of t.attachments||[])r=Ne(r,Ue(n,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(r)}}sendSession(e){if(this._dsn){var t=function(e,t,n,r){var a=un(n);return Le({sent_at:(new Date).toISOString(),...a&&{sdk:a},...!!r&&{dsn:nn(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t){if(this._options.sendClientReports){var n=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}_updateSessionFromEvent(e,t){let n=!1,r=!1;var a=t.exception&&t.exception.values;if(a)for(var l of(r=!0,a)){var f=l.mechanism;if(f&&!1===f.handled){n=!0;break}}var d="ok"===e.status;(d&&0===e.errors||d&&n)&&(ue(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new le((t=>{let n=0;var r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,n){const{normalizeDepth:r=3,normalizeMaxBreadth:a=1e3}=this.getOptions();var l={...e,event_id:e.event_id||t.event_id||Z(),timestamp:e.timestamp||(0,re.yW)()};this._applyClientOptions(l),this._applyIntegrationsMetadata(l);let f=n;t.captureContext&&(f=fe.clone(f).update(t.captureContext));let d=ae(l);if(f){var h=[...t.attachments||[],...f.getAttachments()];h.length&&(t.attachments=h),d=f.applyToEvent(l,t)}return d.then((e=>"number"==typeof r&&r>0?this._normalizeEvent(e,r,a):e))}_normalizeEvent(e,t,n){if(!e)return null;var r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:gt(e.data,t,n)}})))},...e.user&&{user:gt(e.user,t,n)},...e.contexts&&{contexts:gt(e.contexts,t,n)},...e.extra&&{extra:gt(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=gt(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map((e=>(e.data&&(e.data=gt(e.data,t,n)),e)))),r}_applyClientOptions(e){var t=this.getOptions();const{environment:n,release:r,dist:a,maxValueLength:l=250}=t;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==a&&(e.dist=a),e.message&&(e.message=E(e.message,l));var f=e.exception&&e.exception.values&&e.exception.values[0];f&&f.value&&(f.value=E(f.value,l));var d=e.request;d&&d.url&&(d.url=E(d.url,l))}_applyIntegrationsMetadata(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn(e)}))}_processEvent(e,t,n){const{beforeSend:r,sampleRate:a}=this.getOptions();if(!this._isEnabled())return se(new SentryError("SDK not enabled, will not capture event."));var l="transaction"===e.type;return!l&&"number"==typeof a&&Math.random()>a?(this.recordDroppedEvent("sample_rate","error"),se(new SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${a})`))):this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",e.type||"error"),new SentryError("An event processor returned null, will not send event.");return t.data&&!0===t.data.__sentry__||l||!r?n:function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(_(e))return e.then((e=>{if(!w(e)&&null!==e)throw new SentryError(t);return e}),(e=>{throw new SentryError(`beforeSend rejected with ${e}`)}));if(!w(e)&&null!==e)throw new SentryError(t);return e}(r(n,t))})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",e.type||"error"),new SentryError("`beforeSend` returned `null`, will not send event.");var a=n&&n.getSession();return!l&&a&&this._updateSessionFromEvent(a,r),this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof SentryError)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing+=1,e.then((e=>(this._numProcessing-=1,e)),(e=>(this._numProcessing-=1,e)))}_sendEnvelope(e){this._transport&&this._dsn?this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error("Error while sending event:",e)})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error("Transport disabled")}_clearOutcomes(){var e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}var yn=(0,l.R)();let bn;function wn(){if(bn)return bn;if(et(yn.fetch))return bn=yn.fetch.bind(yn);var e=yn.document;let t=yn.fetch;if(e&&"function"==typeof e.createElement)try{var n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);var r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return bn=t.bind(yn)}var xn=(0,l.R)();class _n extends vn{constructor(e){e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:Se}],version:Se},super(e),e.sendClientReports&&xn.document&&xn.document.addEventListener("visibilitychange",(()=>{"hidden"===xn.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function eventFromException(e,t,n,r){var a=_t(e,t,n&&n.syntheticException||void 0,r);return X(a),a.level="error",n&&n.event_id&&(a.event_id=n.event_id),ae(a)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",r,a){var l=St(e,t,r&&r.syntheticException||void 0,a);return l.level=n,r&&r.event_id&&(l.event_id=r.event_id),ae(l)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}sendEvent(e,t){var n=this.getIntegrationById(qt);n&&n.options&&n.options.sentry&&be().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:K(e)},{event:e}),super.sendEvent(e,t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){var e=this._clearOutcomes();if(0!==e.length)if(this._dsn){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.log("Sending outcomes:",e);var t,n,r,a=cn(this._dsn,this._options),l=(t=e,Le((n=this._options.tunnel&&nn(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:r||(0,re.yW)(),discarded_events:t}]]));try{!function(e,t){"[object Navigator]"===Object.prototype.toString.call(yn&&yn.navigator)&&"function"==typeof yn.navigator.sendBeacon?yn.navigator.sendBeacon.bind(yn.navigator)(e,t):Qe()&&wn()(e,{body:t,method:"POST",credentials:"omit",keepalive:!0}).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error(e)}))}(a,Be(l))}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error(e)}}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.log("No dsn provided, will not send outcomes");else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.log("No outcomes to send")}}function Sn(e,t=wn()){return Ge(e,(function(n){var r={body:n.body,method:"POST",referrerPolicy:"origin",headers:e.headers,...e.fetchOptions};return t(e.url,r).then((e=>({statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}))}var kn=4;function Cn(e){return Ge(e,(function(t){return new le(((n,r)=>{var a=new XMLHttpRequest;for(var l in a.onerror=r,a.onreadystatechange=()=>{a.readyState===kn&&n({statusCode:a.status,headers:{"x-sentry-rate-limits":a.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":a.getResponseHeader("Retry-After")}})},a.open("POST",e.url),e.headers)Object.prototype.hasOwnProperty.call(e.headers,l)&&a.setRequestHeader(l,e.headers[l]);a.send(t.body)}))}))}var En="?";function On(e,t,n,r){var a={filename:e,function:t,in_app:!0};return void 0!==n&&(a.lineno=n),void 0!==r&&(a.colno=r),a}var jn=/^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,$n=/\((\S*)(?::(\d+))(?::(\d+))\)/,Tn=[30,e=>{var t=jn.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){var n=$n.exec(t[2]);n&&(t[2]=n[1],t[3]=n[2],t[4]=n[3])}const[e,r]=Un(t[1]||En,t[2]);return On(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],An=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Pn=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Dn=[50,e=>{var t=An.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=Pn.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}let e=t[3],r=t[1]||En;return[r,e]=Un(r,e),On(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Rn=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,In=[40,e=>{var t=Rn.exec(e);return t?On(t[2],t[1]||En,+t[3],t[4]?+t[4]:void 0):void 0}],Mn=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Ln=[10,e=>{var t=Mn.exec(e);return t?On(t[2],t[3]||En,+t[1]):void 0}],Nn=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Fn=[20,e=>{var t=Nn.exec(e);return t?On(t[5],t[3]||t[4]||En,+t[1],+t[2]):void 0}],qn=[Tn,Dn,In],Bn=Ye(...qn),Un=(e,t)=>{var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:En,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var Hn=[new ee,new B,new Dt,new Bt,new Et,new Wt,new Yt,new Kt];function zn(e={}){if(void 0===e.defaultIntegrations&&(e.defaultIntegrations=Hn),void 0===e.release){var t=(0,l.R)();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);var n,r={...e,stackParser:(n=e.stackParser||Bn,Array.isArray(n)?Ye(...n):n),integrations:mn(e),transport:e.transport||(Qe()?Sn:Cn)};!function(e,t){!0===t.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?W.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));var n=be(),r=n.getScope();r&&r.update(t.initialScope);var a=new e(t);n.bindClient(a)}(_n,r),e.autoSessionTracking&&function(){var e=(0,l.R)(),t=e.document;if(void 0===t)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));var n=be();if(!n.captureSession)return;Jn(n),ot("history",(({from:e,to:t})=>{void 0!==e&&e!==t&&Jn(be())}))}()}function Vn(e={},t=be()){var n=(0,l.R)();if(!n.document)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error("Global document not defined in showReportDialog call"));const{client:r,scope:a}=t.getStackTop();var f=e.dsn||r&&r.getDsn();if(f){a&&(e.user={...a.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());var d=n.document.createElement("script");d.async=!0,d.src=function(e,t){var n=on(e),r=`${sn(n)}embed/error-page/`;let a=`dsn=${nn(n)}`;for(var l in t)if("dsn"!==l)if("user"===l){var f=t.user;if(!f)continue;f.name&&(a+=`&name=${encodeURIComponent(f.name)}`),f.email&&(a+=`&email=${encodeURIComponent(f.email)}`)}else a+=`&${encodeURIComponent(l)}=${encodeURIComponent(t[l])}`;return`${r}?${a}`}(f,e),e.onLoad&&(d.onload=e.onLoad);var h=n.document.head||n.document.body;h?h.appendChild(d):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error("Not injecting report dialog. No injection point found in HTML")}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.error("DSN not configured for showReportDialog call")}function Wn(){return be().lastEventId()}function Zn(){}function Gn(e){e()}function Kn(e){var t=be().getClient();return t?t.flush(e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("Cannot flush events. No client defined."),ae(!1))}function Yn(e){var t=be().getClient();return t?t.close(e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&W.warn("Cannot flush events and disable SDK. No client defined."),ae(!1))}function Xn(e){return Ct(e)()}function Jn(e){e.startSession({ignoreDuration:!0}),e.captureSession()}let Qn={};var er=(0,l.R)();er.Sentry&&er.Sentry.Integrations&&(Qn=er.Sentry.Integrations);var tr={...Qn,...r,...a}},68718:function(e,t,n){"use strict";n.d(t,{R:function(){return l},Y:function(){return f}});var r=n(27643),a={};function l(){return(0,r.KV)()?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:a}function f(e,t,n){var r=n||l(),a=r.__SENTRY__=r.__SENTRY__||{};return a[e]||(a[e]=t())}},27643:function(e,t,n){"use strict";function r(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function a(e,t){return e.require(t)}n.d(t,{l$:function(){return a},KV:function(){return r}}),e=n.hmd(e)},88271:function(e,t,n){"use strict";n.d(t,{ph:function(){return p},yW:function(){return h}});var r=n(68718),a=n(27643);e=n.hmd(e);var l={nowSeconds:()=>Date.now()/1e3};var f=(0,a.KV)()?function(){try{return(0,a.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=(0,r.R)();if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),d=void 0===f?l:{nowSeconds:()=>(f.timeOrigin+f.now())/1e3},h=l.nowSeconds.bind(l),p=d.nowSeconds.bind(d);let y;(()=>{const{performance:e}=(0,r.R)();if(e&&e.now){var t=36e5,n=e.now(),a=Date.now(),l=e.timeOrigin?Math.abs(e.timeOrigin+n-a):t,f=l<t,d=e.timing&&e.timing.navigationStart,h="number"==typeof d?Math.abs(d+n-a):t;return f||h<t?l<=h?(y="timeOrigin",e.timeOrigin):(y="navigationStart",d):(y="dateNow",a)}y="none"})()},39961:function(e){e.exports=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,r));var a=n[r];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+a:(t?"-":"")+e.toFixed(1)+" "+a}},62923:function(e){"use strict";function t(e){var l="function"==typeof Map?new Map:void 0;return t=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==l){if(l.has(e))return l.get(e);l.set(e,f)}function f(){return n(e,arguments,a(this).constructor)}return f.prototype=Object.create(e.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),r(f,e)},t(e)}function n(e,t,a){return n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var l=new(Function.bind.apply(e,a));return n&&r(l,n.prototype),l},n.apply(null,arguments)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var l=function(e){var t,n;function AuthError(){var t;return(t=e.call(this,"Authorization required")||this).name="AuthError",t.isAuthError=!0,t}return n=e,(t=AuthError).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),AuthError}(t(Error));e.exports=l},68830:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var l=n(86802),f=n(64846),d=n(7033),h=n(55920);e.exports=function(e){var t,n;function d(t,n){var r;return(r=e.call(this,t,n)||this).provider=n.provider,r.id=r.provider,r.name=r.opts.name||r.id.split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "),r.pluginId=r.opts.pluginId,r.tokenKey="companion-"+r.pluginId+"-auth-token",r.companionKeysParams=r.opts.companionKeysParams,r.preAuthToken=null,r}n=e,(t=d).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var p=d.prototype;return p.headers=function(){var t=this;return Promise.all([e.prototype.headers.call(this),this.getAuthToken()]).then((function(e){var n=e[0],a=e[1],l={};return a&&(l["uppy-auth-token"]=a),t.companionKeysParams&&(l["uppy-credentials-params"]=btoa(JSON.stringify({params:t.companionKeysParams}))),r({},n,l)}))},p.onReceiveResponse=function(t){t=e.prototype.onReceiveResponse.call(this,t);var n=this.uppy.getPlugin(this.pluginId),r=n.getPluginState().authenticated?401!==t.status:t.status<400;return n.setPluginState({authenticated:r}),t},p.setAuthToken=function(e){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,e)},p.getAuthToken=function(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)},p.authUrl=function(e){void 0===e&&(e={}),this.preAuthToken&&(e.uppyPreAuthToken=this.preAuthToken);var t=l(e);return t=t?"?"+t:t,this.hostname+"/"+this.id+"/connect"+t},p.fileUrl=function(e){return this.hostname+"/"+this.id+"/get/"+e},p.fetchPreAuthToken=function(){var e=this;return this.companionKeysParams?this.post(this.id+"/preauth/",{params:this.companionKeysParams}).then((function(t){e.preAuthToken=t.token})).catch((function(t){e.uppy.log("[CompanionClient] unable to fetch preAuthToken "+t,"warning")})):Promise.resolve()},p.list=function(e){return this.get(this.id+"/list/"+(e||""))},p.logout=function(){var e=this;return this.get(this.id+"/logout").then((function(t){return Promise.all([t,e.uppy.getPlugin(e.pluginId).storage.removeItem(e.tokenKey)])})).then((function(e){return e[0]}))},d.initPlugin=function(e,t,n){if(e.type="acquirer",e.files=[],n&&(e.opts=r({},n,t)),t.serverUrl||t.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(t.companionAllowedHosts){var a=t.companionAllowedHosts;if(!("string"==typeof a||Array.isArray(a)||a instanceof RegExp))throw new TypeError(e.id+': the option "companionAllowedHosts" must be one of string, Array, RegExp');e.opts.companionAllowedHosts=a}else/^(?!https?:\/\/).*$/i.test(t.companionUrl)?e.opts.companionAllowedHosts="https://"+t.companionUrl.replace(/^\/\//,""):e.opts.companionAllowedHosts=new f(t.companionUrl).origin;e.storage=e.opts.storage||h},d}(d)},7033:function(e,t,n){"use strict";var r,a;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=n(62923),h=n(62010);e.exports=(a=r=function(){function e(e,t){this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),this.allowedHeaders=["accept","content-type","uppy-auth-token"],this.preflightDone=!1}var t,n,r,a=e.prototype;return a.headers=function(){var e=this.opts.companionHeaders||this.opts.serverHeaders||{};return Promise.resolve(l({},this.defaultHeaders,e))},a._getPostResponseFunc=function(e){var t=this;return function(n){return e?n:t.onReceiveResponse(n)}},a.onReceiveResponse=function(e){var t,n=this.uppy.getState().companion||{},r=this.opts.companionUrl,a=e.headers;a.has("i-am")&&a.get("i-am")!==n[r]&&this.uppy.setState({companion:l({},n,(t={},t[r]=a.get("i-am"),t))});return e},a._getUrl=function(e){return/^(https?:|)\/\//.test(e)?e:this.hostname+"/"+e},a._json=function(e){if(401===e.status)throw new d;if(e.status<200||e.status>300){var t="Failed request with status: "+e.status+". "+e.statusText;return e.json().then((function(e){throw t=e.message?t+" message: "+e.message:t,t=e.requestId?t+" request-Id: "+e.requestId:t,new Error(t)})).catch((function(){throw new Error(t)}))}return e.json()},a.preflight=function(e){var t=this;return this.preflightDone?Promise.resolve(this.allowedHeaders.slice()):fetch(this._getUrl(e),{method:"OPTIONS"}).then((function(e){return e.headers.has("access-control-allow-headers")&&(t.allowedHeaders=e.headers.get("access-control-allow-headers").split(",").map((function(e){return e.trim().toLowerCase()}))),t.preflightDone=!0,t.allowedHeaders.slice()})).catch((function(e){return t.uppy.log("[CompanionClient] unable to make preflight request "+e,"warning"),t.preflightDone=!0,t.allowedHeaders.slice()}))},a.preflightAndHeaders=function(e){var t=this;return Promise.all([this.preflight(e),this.headers()]).then((function(e){var n=e[0],r=e[1];return Object.keys(r).forEach((function(e){-1===n.indexOf(e.toLowerCase())&&(t.uppy.log("[CompanionClient] excluding unallowed header "+e),delete r[e])})),r}))},a.get=function(e,t){var n=this;return this.preflightAndHeaders(e).then((function(t){return h(n._getUrl(e),{method:"get",headers:t,credentials:n.opts.companionCookiesRule||"same-origin"})})).then(this._getPostResponseFunc(t)).then((function(e){return n._json(e)})).catch((function(t){return t.isAuthError||(t.message="Could not get "+n._getUrl(e)+". "+t.message),Promise.reject(t)}))},a.post=function(e,t,n){var r=this;return this.preflightAndHeaders(e).then((function(n){return h(r._getUrl(e),{method:"post",headers:n,credentials:r.opts.companionCookiesRule||"same-origin",body:JSON.stringify(t)})})).then(this._getPostResponseFunc(n)).then((function(e){return r._json(e)})).catch((function(t){return t.isAuthError||(t.message="Could not post "+r._getUrl(e)+". "+t.message),Promise.reject(t)}))},a.delete=function(e,t,n){var r=this;return this.preflightAndHeaders(e).then((function(n){return h(r.hostname+"/"+e,{method:"delete",headers:n,credentials:r.opts.companionCookiesRule||"same-origin",body:t?JSON.stringify(t):null})})).then(this._getPostResponseFunc(n)).then((function(e){return r._json(e)})).catch((function(t){return t.isAuthError||(t.message="Could not delete "+r._getUrl(e)+". "+t.message),Promise.reject(t)}))},t=e,(n=[{key:"hostname",get:function(){var e=this.uppy.getState().companion,t=this.opts.companionUrl;return(e&&e[t]?e[t]:t).replace(/\/$/,"")}},{key:"defaultHeaders",get:function(){return{Accept:"application/json","Content-Type":"application/json","Uppy-Versions":"@uppy/companion-client="+e.VERSION}}}])&&f(t.prototype,n),r&&f(t,r),e}(),r.VERSION="1.10.2",a)},93824:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}var a=n(7033);e.exports=function(e){var t,n;function a(t,n){var r;return(r=e.call(this,t,n)||this).provider=n.provider,r.id=r.provider,r.name=r.opts.name||r.id.split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "),r.pluginId=r.opts.pluginId,r}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var l=a.prototype;return l.fileUrl=function(e){return this.hostname+"/search/"+this.id+"/get/"+e},l.search=function(e,t){return t=t?"&"+t:"",this.get("search/"+this.id+"/list?q="+encodeURIComponent(e)+t)},a}(a)},22899:function(e,t,n){var r=n(5450);e.exports=function(){function e(e){this.opts=e,this._queued=[],this.isOpen=!1,this.emitter=r(),this._handleMessage=this._handleMessage.bind(this),this.close=this.close.bind(this),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.once=this.once.bind(this),this.send=this.send.bind(this),e&&!1===e.autoOpen||this.open()}var t=e.prototype;return t.open=function(){var e=this;this.socket=new WebSocket(this.opts.target),this.socket.onopen=function(t){for(e.isOpen=!0;e._queued.length>0&&e.isOpen;){var n=e._queued[0];e.send(n.action,n.payload),e._queued=e._queued.slice(1)}},this.socket.onclose=function(t){e.isOpen=!1},this.socket.onmessage=this._handleMessage},t.close=function(){this.socket&&this.socket.close()},t.send=function(e,t){this.isOpen?this.socket.send(JSON.stringify({action:e,payload:t})):this._queued.push({action:e,payload:t})},t.on=function(e,t){this.emitter.on(e,t)},t.emit=function(e,t){this.emitter.emit(e,t)},t.once=function(e,t){this.emitter.once(e,t)},t._handleMessage=function(e){try{var t=JSON.parse(e.data);this.emit(t.action,t.payload)}catch(e){console.log(e)}},e}()},20405:function(e,t,n){"use strict";var r=n(7033),a=n(68830),l=n(93824),f=n(22899);e.exports={RequestClient:r,Provider:a,SearchProvider:l,Socket:f}},55920:function(e){"use strict";e.exports.setItem=function(e,t){return new Promise((function(n){localStorage.setItem(e,t),n()}))},e.exports.getItem=function(e){return Promise.resolve(localStorage.getItem(e))},e.exports.removeItem=function(e){return new Promise((function(t){localStorage.removeItem(e),t()}))}},61999:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var a=n(92427),l=n(10791);e.exports=function(){function e(e,t){this.uppy=e,this.opts=t||{},this.update=this.update.bind(this),this.mount=this.mount.bind(this),this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this)}var t=e.prototype;return t.getPluginState=function(){return this.uppy.getState().plugins[this.id]||{}},t.setPluginState=function(e){var t,n=this.uppy.getState().plugins;this.uppy.setState({plugins:r({},n,(t={},t[this.id]=r({},n[this.id],e),t))})},t.setOptions=function(e){this.opts=r({},this.opts,e),this.setPluginState()},t.update=function(e){void 0!==this.el&&this._updateUI&&this._updateUI(e)},t.afterUpdate=function(){},t.onMount=function(){},t.mount=function(t,n){var r,f,d,h,p=this,y=n.id,w=l(t);if(w)return this.isTargetDOMEl=!0,this.rerender=function(e){p.uppy.getPlugin(p.id)&&(p.el=a.render(p.render(e),w,p.el),p.afterUpdate())},this._updateUI=(r=this.rerender,f=null,d=null,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d=t,f||(f=Promise.resolve().then((function(){return f=null,r.apply(void 0,d)}))),f}),this.uppy.log("Installing "+y+" to a DOM element '"+t+"'"),this.opts.replaceTargetContent&&(w.innerHTML=""),this.el=a.render(this.render(this.uppy.getState()),w),this.onMount(),this.el;if("object"==typeof t&&t instanceof e)h=t;else if("function"==typeof t){var x=t;this.uppy.iteratePlugins((function(e){if(e instanceof x)return h=e,!1}))}if(h)return this.uppy.log("Installing "+y+" to "+h.id),this.parent=h,this.el=h.addTarget(n),this.onMount(),this.el;this.uppy.log("Not installing "+y);var _="Invalid target option given to "+y+".";throw _+="function"==typeof t?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(_)},t.render=function(e){throw new Error("Extend the render method to add your plugin to a DOM element")},t.addTarget=function(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")},t.unmount=function(){this.isTargetDOMEl&&this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},t.install=function(){},t.uninstall=function(){this.unmount()},e}()},7924:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,h(e,t)}function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)},f(e)}function d(e,t,n){return d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&h(a,n.prototype),a},d.apply(null,arguments)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var y=n(14019),w=n(5450),x=n(6676),_=n(98357),S=n(39961),k=n(34752),C=n(45089),E=n(23928),O=n(20769),j=n(7300),T=n(91259),A=n(83765),P=n(82159),D=P.justErrorsLogger,R=P.debugLogger,I=n(61999),M=function(e){function RestrictionError(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).isRestriction=!0,t}return l(RestrictionError,e),RestrictionError}(f(Error));"undefined"==typeof AggregateError&&(AggregateError=function(e){function AggregateError(t,n){var r;return(r=e.call(this,t)||this).errors=n,r}return l(AggregateError,e),AggregateError}(f(Error)));var L=function(e){function AggregateRestrictionError(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).isRestriction=!0,t}return l(AggregateRestrictionError,e),AggregateRestrictionError}(AggregateError),N=function(){function e(e){var t=this;this.defaultLocale={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",exceedsSize2:"%{backwardsCompat} %{size}",exceedsSize:"%{file} exceeds maximum allowed size of",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noNewAlreadyUploading:"Cannot add new files: already uploading",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},selectAllFilesFromFolderNamed:"Select all files from folder %{name}",unselectAllFilesFromFolderNamed:"Unselect all files from folder %{name}",selectFileNamed:"Select file %{name}",unselectFileNamed:"Unselect file %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",backToSearch:"Back to Search",emptyFolderAdded:"No files were added from empty folder",folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}};var n={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,debug:!1,restrictions:{maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},meta:{},onBeforeFileAdded:function(e){return e},onBeforeUpload:function(e){return e},store:C(),logger:D,infoTimeout:5e3};if(this.opts=r({},n,e,{restrictions:r({},n.restrictions,e&&e.restrictions)}),e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=R),this.log("Using Core v"+this.constructor.VERSION),this.opts.restrictions.allowedFileTypes&&null!==this.opts.restrictions.allowedFileTypes&&!Array.isArray(this.opts.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");this.i18nInit(),this.plugins={},this.getState=this.getState.bind(this),this.getPlugin=this.getPlugin.bind(this),this.setFileMeta=this.setFileMeta.bind(this),this.setFileState=this.setFileState.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.hideInfo=this.hideInfo.bind(this),this.addFile=this.addFile.bind(this),this.removeFile=this.removeFile.bind(this),this.pauseResume=this.pauseResume.bind(this),this.validateRestrictions=this.validateRestrictions.bind(this),this.calculateProgress=_(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.updateOnlineStatus=this.updateOnlineStatus.bind(this),this.resetProgress=this.resetProgress.bind(this),this.pauseAll=this.pauseAll.bind(this),this.resumeAll=this.resumeAll.bind(this),this.retryAll=this.retryAll.bind(this),this.cancelAll=this.cancelAll.bind(this),this.retryUpload=this.retryUpload.bind(this),this.upload=this.upload.bind(this),this.emitter=w(),this.on=this.on.bind(this),this.off=this.off.bind(this),this.once=this.emitter.once.bind(this.emitter),this.emit=this.emitter.emit.bind(this.emitter),this.preProcessors=[],this.uploaders=[],this.postProcessors=[],this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:A(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:r({},this.opts.meta),info:{isHidden:!0,type:"info",message:""},recoveredState:null}),this.storeUnsubscribe=this.store.subscribe((function(e,n,r){t.emit("state-update",e,n,r),t.updateAll(n)})),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),this.addListeners()}var t,n,l,f=e.prototype;return f.on=function(e,t){return this.emitter.on(e,t),this},f.off=function(e,t){return this.emitter.off(e,t),this},f.updateAll=function(e){this.iteratePlugins((function(t){t.update(e)}))},f.setState=function(e){this.store.setState(e)},f.getState=function(){return this.store.getState()},f.setFileState=function(e,t){var n;if(!this.getState().files[e])throw new Error("Can’t set state for "+e+" (the file could have been removed)");this.setState({files:r({},this.getState().files,(n={},n[e]=r({},this.getState().files[e],t),n))})},f.i18nInit=function(){this.translator=new y([this.defaultLocale,this.opts.locale]),this.locale=this.translator.locale,this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator)},f.setOptions=function(e){this.opts=r({},this.opts,e,{restrictions:r({},this.opts.restrictions,e&&e.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins((function(e){e.setOptions()})),this.setState()},f.resetProgress=function(){var e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t=r({},this.getState().files),n={};Object.keys(t).forEach((function(a){var l=r({},t[a]);l.progress=r({},l.progress,e),n[a]=l})),this.setState({files:n,totalProgress:0}),this.emit("reset-progress")},f.addPreProcessor=function(e){this.preProcessors.push(e)},f.removePreProcessor=function(e){var t=this.preProcessors.indexOf(e);-1!==t&&this.preProcessors.splice(t,1)},f.addPostProcessor=function(e){this.postProcessors.push(e)},f.removePostProcessor=function(e){var t=this.postProcessors.indexOf(e);-1!==t&&this.postProcessors.splice(t,1)},f.addUploader=function(e){this.uploaders.push(e)},f.removeUploader=function(e){var t=this.uploaders.indexOf(e);-1!==t&&this.uploaders.splice(t,1)},f.setMeta=function(e){var t=r({},this.getState().meta,e),n=r({},this.getState().files);Object.keys(n).forEach((function(t){n[t]=r({},n[t],{meta:r({},n[t].meta,e)})})),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})},f.setFileMeta=function(e,t){var n=r({},this.getState().files);if(n[e]){var a=r({},n[e].meta,t);n[e]=r({},n[e],{meta:a}),this.setState({files:n})}else this.log("Was trying to set metadata for a file that has been removed: ",e)},f.getFile=function(e){return this.getState().files[e]},f.getFiles=function(){var e=this.getState().files;return Object.keys(e).map((function(t){return e[t]}))},f.validateRestrictions=function(e,t){try{return this.checkRestrictions(e,t),{result:!0}}catch(e){return{result:!1,reason:e.message}}},f.checkRestrictions=function(e,t){void 0===t&&(t=this.getFiles());var n=this.opts.restrictions,r=n.maxFileSize,a=n.minFileSize,l=n.maxTotalFileSize,f=n.maxNumberOfFiles,d=n.allowedFileTypes;if(f&&t.length+1>f)throw new M(""+this.i18n("youCanOnlyUploadX",{smart_count:f}));if(d&&!d.some((function(t){return t.indexOf("/")>-1?!!e.type&&k(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.substr(1).toLowerCase()}))){var h=d.join(", ");throw new M(this.i18n("youCanOnlyUploadFileTypes",{types:h}))}if(l&&null!=e.size){var p=0;if(p+=e.size,t.forEach((function(e){p+=e.size})),p>l)throw new M(this.i18n("exceedsSize2",{backwardsCompat:this.i18n("exceedsSize"),size:S(l),file:e.name}))}if(r&&null!=e.size&&e.size>r)throw new M(this.i18n("exceedsSize2",{backwardsCompat:this.i18n("exceedsSize"),size:S(r),file:e.name}));if(a&&null!=e.size&&e.size<a)throw new M(this.i18n("inferiorSize",{size:S(a)}))},f.checkMinNumberOfFiles=function(e){var t=this.opts.restrictions.minNumberOfFiles;if(Object.keys(e).length<t)throw new M(""+this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))},f.checkRequiredMetaFields=function(e){for(var t=this.opts.restrictions.requiredMetaFields,n=Object.prototype.hasOwnProperty,r=[],a=Object.keys(e),l=0;l<a.length;l++)for(var f=this.getFile(a[l]),d=0;d<t.length;d++)if(!n.call(f.meta,t[d])||""===f.meta[t[d]]){var h=new M(""+this.i18n("missingRequiredMetaFieldOnFile",{fileName:f.name}));r.push(h),this.showOrLogErrorAndThrow(h,{file:f,throwErr:!1})}if(r.length)throw new L(""+this.i18n("missingRequiredMetaField"),r)},f.showOrLogErrorAndThrow=function(e,t){var n=void 0===t?{}:t,r=n.showInformer,a=void 0===r||r,l=n.file,f=void 0===l?null:l,d=n.throwErr,h=void 0===d||d,p="object"==typeof e?e.message:e,y="object"==typeof e&&e.details?e.details:"",w=p;if(y&&(w+=" "+y),e.isRestriction?(this.log(w),this.emit("restriction-failed",f,e)):this.log(w,"error"),a&&this.info({message:p,details:y},"error",this.opts.infoTimeout),h)throw"object"==typeof e?e:new Error(e)},f.assertNewUploadAllowed=function(e){!1===this.getState().allowNewUpload&&this.showOrLogErrorAndThrow(new M(this.i18n("noNewAlreadyUploading")),{file:e})},f.checkAndCreateFileStateObject=function(e,t){var n=E(t),a=t;a.type=n;var l,f=this.opts.onBeforeFileAdded(a,e);!1===f&&this.showOrLogErrorAndThrow(new M("Cannot add the file because onBeforeFileAdded returned false."),{showInformer:!1,file:a}),"object"==typeof f&&f&&(a=f),l=a.name?a.name:"image"===n.split("/")[0]?n.split("/")[0]+"."+n.split("/")[1]:"noname";var d=O(l).extension,h=a.isRemote||!1,p=j(a);e[p]&&!e[p].isGhost&&this.showOrLogErrorAndThrow(new M(this.i18n("noDuplicates",{fileName:l})),{file:a});var y=a.meta||{};y.name=l,y.type=n;var w=isFinite(a.data.size)?a.data.size:null,x={source:a.source||"",id:p,name:l,extension:d||"",meta:r({},this.getState().meta,y),type:n,data:a.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:w,uploadComplete:!1,uploadStarted:null},size:w,isRemote:h,remote:a.remote||"",preview:a.preview};try{var _=Object.keys(e).map((function(t){return e[t]}));this.checkRestrictions(x,_)}catch(e){this.showOrLogErrorAndThrow(e,{file:x})}return x},f.startIfAutoProceed=function(){var e=this;this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout((function(){e.scheduledAutoProceed=null,e.upload().catch((function(t){t.isRestriction||e.log(t.stack||t.message||t)}))}),4))},f.addFile=function(e){var t;this.assertNewUploadAllowed(e);var n=this.getState().files,a=this.checkAndCreateFileStateObject(n,e);return n[a.id]&&n[a.id].isGhost&&(a=r({},n[a.id],{data:e.data,isGhost:!1}),this.log("Replaced the blob in the restored ghost file: "+a.name+", "+a.id)),this.setState({files:r({},n,(t={},t[a.id]=a,t))}),this.emit("file-added",a),this.emit("files-added",[a]),this.log("Added file: "+a.name+", "+a.id+", mime type: "+a.type),this.startIfAutoProceed(),a.id},f.addFiles=function(e){var t=this;this.assertNewUploadAllowed();for(var n=r({},this.getState().files),a=[],l=[],f=0;f<e.length;f++)try{var d=this.checkAndCreateFileStateObject(n,e[f]);n[d.id]&&n[d.id].isGhost&&(d=r({},n[d.id],{data:e[f].data,isGhost:!1}),this.log("Replaced blob in a ghost file: "+d.name+", "+d.id)),n[d.id]=d,a.push(d)}catch(p){p.isRestriction||l.push(p)}if(this.setState({files:n}),a.forEach((function(e){t.emit("file-added",e)})),this.emit("files-added",a),a.length>5?this.log("Added batch of "+a.length+" files"):Object.keys(a).forEach((function(e){t.log("Added file: "+a[e].name+"\n id: "+a[e].id+"\n type: "+a[e].type)})),a.length>0&&this.startIfAutoProceed(),l.length>0){var h="Multiple errors occurred while adding files:\n";if(l.forEach((function(e){h+="\n * "+e.message})),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:l.length}),details:h},"error",this.opts.infoTimeout),"function"==typeof AggregateError)throw new AggregateError(l,h);var p=new Error(h);throw p.errors=l,p}},f.removeFiles=function(e,t){var n=this,a=this.getState(),l=a.files,f=a.currentUploads,d=r({},l),h=r({},f),p=Object.create(null);function y(e){return void 0===p[e]}e.forEach((function(e){l[e]&&(p[e]=l[e],delete d[e])})),Object.keys(h).forEach((function(e){var t=f[e].fileIDs.filter(y);0!==t.length?h[e]=r({},f[e],{fileIDs:t}):delete h[e]}));var w={currentUploads:h,files:d};0===Object.keys(d).length&&(w.allowNewUpload=!0,w.error=null,w.recoveredState=null),this.setState(w),this.calculateTotalProgress();var x=Object.keys(p);x.forEach((function(e){n.emit("file-removed",p[e],t)})),x.length>5?this.log("Removed "+x.length+" files"):this.log("Removed files: "+x.join(", "))},f.removeFile=function(e,t){void 0===t&&(t=null),this.removeFiles([e],t)},f.pauseResume=function(e){if(this.getState().capabilities.resumableUploads&&!this.getFile(e).uploadComplete){var t=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}},f.pauseAll=function(){var e=r({},this.getState().files);Object.keys(e).filter((function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted})).forEach((function(t){var n=r({},e[t],{isPaused:!0});e[t]=n})),this.setState({files:e}),this.emit("pause-all")},f.resumeAll=function(){var e=r({},this.getState().files);Object.keys(e).filter((function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted})).forEach((function(t){var n=r({},e[t],{isPaused:!1,error:null});e[t]=n})),this.setState({files:e}),this.emit("resume-all")},f.retryAll=function(){var e=r({},this.getState().files),t=Object.keys(e).filter((function(t){return e[t].error}));if(t.forEach((function(t){var n=r({},e[t],{isPaused:!1,error:null});e[t]=n})),this.setState({files:e,error:null}),this.emit("retry-all",t),0===t.length)return Promise.resolve({successful:[],failed:[]});var n=this.createUpload(t,{forceAllowNewUpload:!0});return this.runUpload(n)},f.cancelAll=function(){this.emit("cancel-all");var e=this.getState().files,t=Object.keys(e);t.length&&this.removeFiles(t,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})},f.retryUpload=function(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);var t=this.createUpload([e],{forceAllowNewUpload:!0});return this.runUpload(t)},f.reset=function(){this.cancelAll()},f.logout=function(){this.iteratePlugins((function(e){e.provider&&e.provider.logout&&e.provider.logout()}))},f.calculateProgress=function(e,t){if(this.getFile(e.id)){var n=isFinite(t.bytesTotal)&&t.bytesTotal>0;this.setFileState(e.id,{progress:r({},this.getFile(e.id).progress,{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:n?Math.round(t.bytesUploaded/t.bytesTotal*100):0})}),this.calculateTotalProgress()}else this.log("Not setting progress for a file that has been removed: "+e.id)},f.calculateTotalProgress=function(){var e=this.getFiles().filter((function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess}));if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});var t=e.filter((function(e){return null!=e.progress.bytesTotal})),n=e.filter((function(e){return null==e.progress.bytesTotal}));if(0!==t.length){var r=t.reduce((function(e,t){return e+t.progress.bytesTotal}),0),a=r/t.length;r+=a*n.length;var l=0;t.forEach((function(e){l+=e.progress.bytesUploaded})),n.forEach((function(e){l+=a*(e.progress.percentage||0)/100}));var f=0===r?0:Math.round(l/r*100);f>100&&(f=100),this.setState({totalProgress:f}),this.emit("progress",f)}else{var d=100*e.length,h=n.reduce((function(e,t){return e+t.progress.percentage}),0),p=Math.round(h/d*100);this.setState({totalProgress:p})}},f.addListeners=function(){var e=this,t=function(t,n,r){var a=t.message||"Unknown error";t.details&&(a+=" "+t.details),e.setState({error:a}),null!=n&&"string"==typeof n.id&&e.setFileState(n.id,{error:a,response:r})};this.on("error",t),this.on("upload-error",(function(n,r,a){if(t(r,n,a),"object"==typeof r&&r.message){var l=new Error(r.message);l.details=r.message,r.details&&(l.details+=" "+r.details),l.message=e.i18n("failedToUpload",{file:n.name}),e.showOrLogErrorAndThrow(l,{throwErr:!1})}else e.showOrLogErrorAndThrow(r,{throwErr:!1})})),this.on("upload",(function(){e.setState({error:null})})),this.on("upload-started",(function(t){e.getFile(t.id)?e.setFileState(t.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:t.size}}):e.log("Not setting progress for a file that has been removed: "+t.id)})),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(function(t,n){if(e.getFile(t.id)){var a=e.getFile(t.id).progress;e.setFileState(t.id,{progress:r({},a,{postprocess:e.postProcessors.length>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:a.bytesTotal}),response:n,uploadURL:n.uploadURL,isPaused:!1}),null==t.size&&e.setFileState(t.id,{size:n.bytesUploaded||a.bytesTotal}),e.calculateTotalProgress()}else e.log("Not setting progress for a file that has been removed: "+t.id)})),this.on("preprocess-progress",(function(t,n){e.getFile(t.id)?e.setFileState(t.id,{progress:r({},e.getFile(t.id).progress,{preprocess:n})}):e.log("Not setting progress for a file that has been removed: "+t.id)})),this.on("preprocess-complete",(function(t){if(e.getFile(t.id)){var n=r({},e.getState().files);n[t.id]=r({},n[t.id],{progress:r({},n[t.id].progress)}),delete n[t.id].progress.preprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: "+t.id)})),this.on("postprocess-progress",(function(t,n){e.getFile(t.id)?e.setFileState(t.id,{progress:r({},e.getState().files[t.id].progress,{postprocess:n})}):e.log("Not setting progress for a file that has been removed: "+t.id)})),this.on("postprocess-complete",(function(t){if(e.getFile(t.id)){var n=r({},e.getState().files);n[t.id]=r({},n[t.id],{progress:r({},n[t.id].progress)}),delete n[t.id].progress.postprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: "+t.id)})),this.on("restored",(function(){e.calculateTotalProgress()})),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",(function(){return e.updateOnlineStatus()})),window.addEventListener("offline",(function(){return e.updateOnlineStatus()})),setTimeout((function(){return e.updateOnlineStatus()}),3e3))},f.updateOnlineStatus=function(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)},f.getID=function(){return this.opts.id},f.use=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a plugin class, but got "+(null===e?"null":typeof e)+". Please verify that the plugin was imported and spelled correctly.");var n=new e(this,t),r=n.id;if(this.plugins[n.type]=this.plugins[n.type]||[],!r)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");var a=this.getPlugin(r);if(a){var l="Already found a plugin named '"+a.id+"'. Tried to use: '"+r+"'.\nUppy plugins must have unique `id` options. See https://uppy.io/docs/plugins/#id.";throw new Error(l)}return e.VERSION&&this.log("Using "+r+" v"+e.VERSION),this.plugins[n.type].push(n),n.install(),this},f.getPlugin=function(e){var t=null;return this.iteratePlugins((function(n){if(n.id===e)return t=n,!1})),t},f.iteratePlugins=function(e){var t=this;Object.keys(this.plugins).forEach((function(n){t.plugins[n].forEach(e)}))},f.removePlugin=function(e){var t;this.log("Removing plugin "+e.id),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();var n=this.plugins[e.type].slice(),a=T(n,(function(t){return t.id===e.id}));-1!==a&&(n.splice(a,1),this.plugins[e.type]=n);var l={plugins:r({},this.getState().plugins,(t={},t[e.id]=void 0,t))};this.setState(l)},f.close=function(){var e=this;this.log("Closing Uppy instance "+this.opts.id+": removing all files and uninstalling plugins"),this.reset(),this.storeUnsubscribe(),this.iteratePlugins((function(t){e.removePlugin(t)}))},f.info=function(e,t,n){void 0===t&&(t="info"),void 0===n&&(n=3e3);var r="object"==typeof e;this.setState({info:{isHidden:!1,type:t,message:r?e.message:e,details:r?e.details:null}}),this.emit("info-visible"),clearTimeout(this.infoTimeoutID),this.infoTimeoutID=0!==n?setTimeout(this.hideInfo,n):void 0},f.hideInfo=function(){var e=r({},this.getState().info,{isHidden:!0});this.setState({info:e}),this.emit("info-hidden")},f.log=function(e,t){var n=this.opts.logger;switch(t){case"error":n.error(e);break;case"warning":n.warn(e);break;default:n.debug(e)}},f.run=function(){return this.log("Calling run() is no longer necessary.","warning"),this},f.restore=function(e){return this.log('Core: attempting to restore upload "'+e+'"'),this.getState().currentUploads[e]?this.runUpload(e):(this.removeUpload(e),Promise.reject(new Error("Nonexistent upload")))},f.createUpload=function(e,t){var n;void 0===t&&(t={});var a=t.forceAllowNewUpload,l=void 0!==a&&a,f=this.getState(),d=f.allowNewUpload,h=f.currentUploads;if(!d&&!l)throw new Error("Cannot create a new upload: already uploading.");var p=x();return this.emit("upload",{id:p,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploads,currentUploads:r({},h,(n={},n[p]={fileIDs:e,step:0,result:{}},n))}),p},f.getUpload=function(e){return this.getState().currentUploads[e]},f.addResultData=function(e,t){var n;if(this.getUpload(e)){var a=this.getState().currentUploads,l=r({},a[e],{result:r({},a[e].result,t)});this.setState({currentUploads:r({},a,(n={},n[e]=l,n))})}else this.log("Not setting result for an upload that has been removed: "+e)},f.removeUpload=function(e){var t=r({},this.getState().currentUploads);delete t[e],this.setState({currentUploads:t})},f.runUpload=function(e){var t=this,n=this.getState().currentUploads[e].step,a=[].concat(this.preProcessors,this.uploaders,this.postProcessors),l=Promise.resolve();return a.forEach((function(a,f){f<n||(l=l.then((function(){var n,l=t.getState().currentUploads,d=l[e];if(d){var h=r({},d,{step:f});return t.setState({currentUploads:r({},l,(n={},n[e]=h,n))}),a(h.fileIDs,e)}})).then((function(){return null})))})),l.catch((function(n){t.emit("error",n),t.removeUpload(e)})),l.then((function(){var n=t.getState().currentUploads[e];if(n){n.fileIDs.forEach((function(e){var n=t.getFile(e);n&&n.progress.postprocess&&t.emit("postprocess-complete",n)}));var r=n.fileIDs.map((function(e){return t.getFile(e)})),a=r.filter((function(e){return!e.error})),l=r.filter((function(e){return e.error}));t.addResultData(e,{successful:a,failed:l,uploadID:e})}})).then((function(){var n=t.getState().currentUploads;if(n[e]){var r=n[e].result;return t.emit("complete",r),t.removeUpload(e),r}})).then((function(n){return null==n&&t.log("Not setting result for an upload that has been removed: "+e),n}))},f.upload=function(){var e=this;this.plugins.uploader||this.log("No uploader type plugins are used","warning");var t=this.getState().files,n=this.opts.onBeforeUpload(t);return!1===n?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(n&&"object"==typeof n&&(t=n,this.setState({files:t})),Promise.resolve().then((function(){e.checkMinNumberOfFiles(t),e.checkRequiredMetaFields(t)})).catch((function(t){e.showOrLogErrorAndThrow(t)})).then((function(){var n=e.getState().currentUploads,r=Object.keys(n).reduce((function(e,t){return e.concat(n[t].fileIDs)}),[]),a=[];Object.keys(t).forEach((function(t){var n=e.getFile(t);n.progress.uploadStarted||-1!==r.indexOf(t)||a.push(n.id)}));var l=e.createUpload(a);return e.runUpload(l)})).catch((function(t){e.showOrLogErrorAndThrow(t,{showInformer:!1})})))},t=e,(n=[{key:"state",get:function(){return this.getState()}}])&&a(t.prototype,n),l&&a(t,l),e}();N.VERSION="1.20.1",e.exports=function(e){return new N(e)},e.exports.Uppy=N,e.exports.Plugin=I,e.exports.debugLogger=R},82159:function(e,t,n){var r=n(25674),a={debug:function(){},warn:function(){},error:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=console).error.apply(e,["[Uppy] ["+r()+"]"].concat(n))}},l={debug:function(){for(var e=console.debug||console.log,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.call.apply(e,[console,"[Uppy] ["+r()+"]"].concat(n))},warn:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=console).warn.apply(e,["[Uppy] ["+r()+"]"].concat(n))},error:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=console).error.apply(e,["[Uppy] ["+r()+"]"].concat(n))}};e.exports={justErrorsLogger:a,debugLogger:l}},83765:function(e){e.exports=function(e){if(null==e&&(e="undefined"!=typeof navigator?navigator.userAgent:null),!e)return!0;var t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;var n=t[1].split("."),r=n[0],a=n[1];return r=parseInt(r,10),a=parseInt(a,10),r<15||15===r&&a<15063||(r>18||18===r&&a>=18218)}},56088:function(e,t,n){function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}var a=n(92427),l=a.h,f=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).triggerFileInputClick=function(){t.fileInput.click()},t.triggerFolderInputClick=function(){t.folderInput.click()},t.onFileInputChange=function(e){t.props.handleInputChange(e),e.target.value=null},t.renderHiddenInput=function(e,n){return l("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:1!==t.props.maxNumberOfFiles,onChange:t.onFileInputChange,accept:t.props.allowedFileTypes,ref:n})},t.renderMyDeviceAcquirer=function(){return l("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},l("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:t.triggerFileInputClick},l("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},l("g",{fill:"none",fillRule:"evenodd"},l("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#2275D7"}),l("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"}))),l("div",{className:"uppy-DashboardTab-name"},t.props.i18n("myDevice"))))},t.renderBrowseButton=function(e,n){var r=t.props.acquirers.length;return l("button",{type:"button",className:"uppy-u-reset uppy-Dashboard-browse",onClick:n,"data-uppy-super-focusable":0===r},e)},t.renderDropPasteBrowseTagline=function(){var e=t.props.acquirers.length,n=t.props.fileManagerSelectionType,r=n.charAt(0).toUpperCase()+n.slice(1),a="browse",f="browse",d="browse";if("files"===n)try{a=t.props.i18n("browse"),f=t.props.i18n("browse"),d=t.props.i18n("browse")}catch(e){}try{f=t.props.i18n("browseFiles"),d=t.props.i18n("browseFolders")}catch(e){}var h,p=t.renderBrowseButton(a,t.triggerFileInputClick),y=t.renderBrowseButton(f,t.triggerFileInputClick),w=t.renderBrowseButton(d,t.triggerFolderInputClick);if(h=e>0?t.props.i18nArray("dropPasteImport"+r,{browseFiles:y,browseFolders:w,browse:p}):t.props.i18nArray("dropPaste"+r,{browseFiles:y,browseFolders:w,browse:p}),"files"===n)try{h=e>0?t.props.i18nArray("dropPasteImport",{browse:p}):t.props.i18nArray("dropPaste",{browse:p})}catch(e){}return t.props.disableLocalFiles&&(h=t.props.i18n("importFiles")),l("div",{className:"uppy-Dashboard-AddFiles-title"},h)},t.renderAcquirer=function(e){return l("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},l("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"aria-controls":"uppy-DashboardContent-panel--"+e.id,"aria-selected":t.props.activePickerPanel.id===e.id,"data-uppy-super-focusable":!0,onClick:function(){return t.props.showPanel(e.id)}},e.icon(),l("div",{className:"uppy-DashboardTab-name"},e.name)))},t.renderAcquirers=function(e,n){var r=[].concat(e),a=r.splice(e.length-2,e.length);return l("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},!n&&t.renderMyDeviceAcquirer(),r.map((function(e){return t.renderAcquirer(e)})),l("span",{role:"presentation",style:"white-space: nowrap;"},a.map((function(e){return t.renderAcquirer(e)}))))},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var f=a.prototype;return f.renderPoweredByUppy=function(){var e=l("span",null,l("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},l("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),l("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),t=this.props.i18nArray("poweredBy2",{backwardsCompat:this.props.i18n("poweredBy"),uppy:e});return l("a",{tabIndex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},t)},f.render=function(){var e=this;return l("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,(function(t){e.fileInput=t})),this.renderHiddenInput(!0,(function(t){e.folderInput=t})),this.renderDropPasteBrowseTagline(),this.props.acquirers.length>0&&this.renderAcquirers(this.props.acquirers,this.props.disableLocalFiles),l("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&l("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))},a}(a.Component);e.exports=f},46063:function(e,t,n){var r=n(92427).h,a=n(72779),l=n(56088);e.exports=function(e){return r("div",{className:a("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":e.showAddFilesPanel},r("div",{className:"uppy-DashboardContent-bar"},r("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18n("addingMoreFiles")),r("button",{className:"uppy-DashboardContent-back",type:"button",onClick:function(t){return e.toggleAddFilesPanel(!1)}},e.i18n("back"))),r(l,e))}},28298:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var a=n(92427).h,l=n(72779),f=n(57348),d=n(56088),h=n(46063),p=n(86108),y=n(85685),w=n(62252),x=n(9297),_=n(38597),S=n(4230);e.exports=function(e){var t=0===e.totalFileCount,n=e.containerWidth>576,k=l({"uppy-Root":e.isTargetDOMEl}),C=l({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>576,"uppy-size--lg":e.containerWidth>700,"uppy-size--xl":e.containerWidth>900,"uppy-size--height-md":e.containerHeight>400,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible}),E=1;e.containerWidth>900?E=5:e.containerWidth>700?E=4:e.containerWidth>576&&(E=3);var O=e.showSelectedFiles&&!t,j=e.recoveredState?Object.keys(e.recoveredState.files).length:null,T=e.files?Object.keys(e.files).filter((function(t){return e.files[t].isGhost})).length:null,A=a("div",{className:C,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&S(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop},a("div",{className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),a("div",{className:"uppy-Dashboard-inner","aria-modal":!e.inline&&"true",role:!e.inline&&"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""}},e.inline?null:a("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal},a("span",{"aria-hidden":"true"},"×")),a("div",{className:"uppy-Dashboard-innerWrap"},a("div",{className:"uppy-Dashboard-dropFilesHereHint"},e.i18n("dropHint")),O&&a(w,e),j&&a("div",{className:"uppy-Dashboard-serviceMsg"},a("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},a("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},a("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),a("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),a("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),a("strong",{className:"uppy-Dashboard-serviceMsg-title"},e.i18n("sessionRestored")),a("div",{class:"uppy-Dashboard-serviceMsg-text"},T>0?e.i18n("recoveredXFiles",{smart_count:T}):e.i18n("recoveredAllFiles"))),O?a(f,r({},e,{itemsPerRow:E})):a(d,r({},e,{isSizeMD:n})),a(_,null,e.showAddFilesPanel?a(h,r({key:"AddFiles"},e,{isSizeMD:n})):null),a(_,null,e.fileCardFor?a(x,r({key:"FileCard"},e)):null),a(_,null,e.activePickerPanel?a(p,r({key:"Picker"},e)):null),a(_,null,e.showFileEditor?a(y,r({key:"Editor"},e)):null),a("div",{className:"uppy-Dashboard-progressindicators"},e.progressindicators.map((function(t){return e.getPlugin(t.id).render(e.state)}))))));return a("div",{className:k,dir:e.direction},A)}},85685:function(e,t,n){var r=n(92427).h,a=n(72779);e.exports=function(e){var t=this.props.files[this.props.fileCardFor];return r("div",{className:a("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},r("div",{className:"uppy-DashboardContent-bar"},r("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18nArray("editing",{file:r("span",{className:"uppy-DashboardContent-titleFile"},t.meta?t.meta.name:t.name)})),r("button",{className:"uppy-DashboardContent-back",type:"button",onClick:e.hideAllPanels},e.i18n("cancel")),r("button",{className:"uppy-DashboardContent-save",type:"button",onClick:e.saveFileEditor},e.i18n("save"))),r("div",{className:"uppy-DashboardContent-panelBody"},e.editors.map((function(t){return e.getPlugin(t.id).render(e.state)}))))}},9297:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var l=n(92427),f=l.h,d=l.Component,h=n(72779),p=n(52784),y=n(62428),w=n(29920),x=function(e){var t,n;function l(t){var n;(n=e.call(this,t)||this).updateMeta=function(e,t){var a;n.setState({formState:r({},n.state.formState,(a={},a[t]=e,a))})},n.handleSave=function(e){e.preventDefault();var t=n.props.fileCardFor;n.props.saveFileCard(n.state.formState,t)},n.handleCancel=function(){n.props.toggleFileCard(!1)},n.saveOnEnter=function(e){if(13===e.keyCode){e.stopPropagation(),e.preventDefault();var t=n.props.files[n.props.fileCardFor];n.props.saveFileCard(n.state.formState,t.id)}},n.renderMetaFields=function(){var e=n.getMetaFields()||[],t={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map((function(e){var r="uppy-Dashboard-FileCard-input-"+e.id,a=n.props.requiredMetaFields.includes(e.id);return f("fieldset",{key:e.id,className:"uppy-Dashboard-FileCard-fieldset"},f("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:r},e.name),void 0!==e.render?e.render({value:n.state.formState[e.id],onChange:function(t){return n.updateMeta(t,e.id)},fieldCSSClasses:t,required:a},f):f("input",{className:t.text,id:r,type:e.type||"text",required:a,value:n.state.formState[e.id],placeholder:e.placeholder,onKeyUp:n.saveOnEnter,onKeyDown:n.saveOnEnter,onKeyPress:n.saveOnEnter,onInput:function(t){return n.updateMeta(t.target.value,e.id)},"data-uppy-super-focusable":!0}))}))};var a=n.props.files[n.props.fileCardFor],l=n.getMetaFields()||[],d={};return l.forEach((function(e){d[e.id]=a.meta[e.id]||""})),n.state={formState:d},n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var d=l.prototype;return d.getMetaFields=function(){return"function"==typeof this.props.metaFields?this.props.metaFields(this.props.files[this.props.fileCardFor]):this.props.metaFields},d.render=function(){var e=this,t=this.props.files[this.props.fileCardFor],n=this.props.canEditFile(t);return f("div",{className:h("uppy-Dashboard-FileCard",this.props.className),"data-uppy-panelType":"FileCard",onDragOver:y,onDragLeave:y,onDrop:y,onPaste:y},f("div",{className:"uppy-DashboardContent-bar"},f("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},this.props.i18nArray("editing",{file:f("span",{className:"uppy-DashboardContent-titleFile"},t.meta?t.meta.name:t.name)})),f("button",{className:"uppy-DashboardContent-back",type:"button",title:this.props.i18n("finishEditingFile"),onClick:this.handleCancel},this.props.i18n("cancel"))),f("div",{className:"uppy-Dashboard-FileCard-inner"},f("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:p(t.type).color}},f(w,{file:t}),n&&f("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:function(){return e.props.openFileEditor(t)}},this.props.i18n("editFile"))),f("div",{className:"uppy-Dashboard-FileCard-info"},this.renderMetaFields()),f("div",{className:"uppy-Dashboard-FileCard-actions"},f("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:this.handleSave},this.props.i18n("saveChanges")),f("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:this.handleCancel},this.props.i18n("cancel")))))},l}(d);e.exports=x},3780:function(e,t,n){var r=n(92427).h,a=n(52214);function l(e){var t=e.file,n=e.uploadInProgressOrComplete,a=e.metaFields,l=e.canEditFile,f=e.i18n,d=e.onClick;return!n&&a&&a.length>0||!n&&l(t)?r("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":f("editFile")+" "+t.meta.name,title:f("editFile"),onClick:function(){return d()}},r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},r("g",{fillRule:"evenodd"},r("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),r("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),r("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function f(e){var t=e.i18n,n=e.onClick;return r("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":t("removeFile"),title:t("removeFile"),onClick:function(){return n()}},r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},r("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),r("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}function d(e){return r("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":e.i18n("copyLink"),title:e.i18n("copyLink"),onClick:function(t){return function(e,t){a(t.file.uploadURL,t.i18n("copyLinkToClipboardFallback")).then((function(){t.log("Link copied to clipboard."),t.info(t.i18n("copyLinkToClipboardSuccess"),"info",3e3)})).catch(t.log).then((function(){return e.target.focus({preventScroll:!0})}))}(t,e)}},r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},r("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}e.exports=function(e){var t=e.file,n=e.uploadInProgressOrComplete,a=e.canEditFile,h=e.metaFields,p=e.showLinkToFileUploadResult,y=e.showRemoveButton,w=e.i18n,x=e.removeFile,_=e.toggleFileCard,S=e.openFileEditor,k=e.log,C=e.info;return r("div",{className:"uppy-Dashboard-Item-actionWrapper"},r(l,{i18n:w,file:t,uploadInProgressOrComplete:n,canEditFile:a,metaFields:h,onClick:function(){h&&h.length>0?_(!0,t.id):S(t)}}),p&&t.uploadURL?r(d,{file:t,i18n:w,info:C,log:k}):null,y?r(f,{i18n:w,info:e.info,log:e.log,onClick:function(){return x(t.id,"removed-by-user")}}):null)}},178:function(e,t,n){var r=n(92427).h,a=n(39961),l=n(29033),f=function(e){var t=e.file,n=e.onClick;return t.error?r("span",{className:"uppy-Dashboard-Item-errorDetails","aria-label":t.error,"data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",onClick:n},"?"):null};e.exports=function(e){return r("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.file.source},function(e){var t;return t=e.containerWidth<=352?35:e.containerWidth<=576?60:30,r("div",{className:"uppy-Dashboard-Item-name",title:e.file.meta.name},l(e.file.meta.name,t))}(e),r("div",{className:"uppy-Dashboard-Item-status"},function(e){return e.file.size&&r("div",{className:"uppy-Dashboard-Item-statusSize"},a(e.file.size))}(e),function(e){return e.file.isGhost&&r("span",null," • ",r("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:e.toggleAddFilesPanel},e.i18n("reSelect")))}(e),r(f,{file:e.file,onClick:function(){alert(e.file.error)}})))}},3115:function(e,t,n){var r=n(92427).h,a=n(29920),l=n(52784);e.exports=function(e){return r("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:l(e.file.type).color}},e.showLinkToFileUploadResult&&e.file.uploadURL&&r("a",{className:"uppy-Dashboard-Item-previewLink",href:e.file.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.file.meta.name}),r(a,{file:e.file}))}},40644:function(e,t,n){var r=n(92427).h;function a(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function l(e){return r("div",{className:"uppy-Dashboard-Item-progress"},r("button",{className:"uppy-u-reset uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":a(e),title:a(e),onClick:function(){return function(e){e.isUploaded||(!e.error||e.hideRetryButton?e.resumableUploads&&!e.hidePauseResumeButton?e.pauseUpload(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.cancelUpload(e.file.id):e.retryUpload(e.file.id))}(e)}},e.children))}function f(e){var t=e.children;return r("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},t)}function d(e){var t=e.progress,n=2*Math.PI*15;return r("g",null,r("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),r("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":n,"stroke-dashoffset":n-n/100*t}))}e.exports=function(e){return e.file.progress.uploadStarted?e.isUploaded?r("div",{className:"uppy-Dashboard-Item-progress"},r("div",{className:"uppy-Dashboard-Item-progressIndicator"},r(f,null,r("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),r("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):e.recoveredState?void 0:e.error&&!e.hideRetryButton?r(l,e,r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},r("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),r("path",{d:"M7.9 3H10v2H7.9z"}),r("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),r("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):e.resumableUploads&&!e.hidePauseResumeButton?r(l,e,r(f,null,r(d,{progress:e.file.progress.percentage}),e.file.isPaused?r("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):r("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},r("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),r("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):e.resumableUploads||!e.individualCancellation||e.hideCancelButton?r("div",{className:"uppy-Dashboard-Item-progress"},r("div",{className:"uppy-Dashboard-Item-progressIndicator"},r(f,null,r(d,{progress:e.file.progress.percentage})))):r(l,e,r(f,null,r(d,{progress:e.file.progress.percentage}),r("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):null}},1665:function(e,t,n){function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}var a=n(92427),l=a.h,f=a.Component,d=n(72779),h=n(98843),p=n(3115),y=n(40644),w=n(178),x=n(3780);e.exports=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var f=a.prototype;return f.shouldComponentUpdate=function(e){return!h(this.props,e)},f.componentDidMount=function(){var e=this.props.file;e.preview||this.props.handleRequestThumbnail(e)},f.componentDidUpdate=function(){var e=this.props.file;e.preview||this.props.handleRequestThumbnail(e)},f.componentWillUnmount=function(){var e=this.props.file;e.preview||this.props.handleCancelThumbnail(e)},f.render=function(){var e=this.props.file,t=e.progress.preprocess||e.progress.postprocess,n=e.progress.uploadComplete&&!t&&!e.error,r=e.progress.uploadStarted||t,a=e.progress.uploadStarted&&!e.progress.uploadComplete||t,f=e.error||!1,h=e.isGhost,_=(this.props.individualCancellation||!a)&&!n;n&&this.props.showRemoveButtonAfterComplete&&(_=!0);var S=d({"uppy-Dashboard-Item":!0,"is-inprogress":a&&!this.props.recoveredState,"is-processing":t,"is-complete":n,"is-error":!!f,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":h});return l("div",{className:S,id:"uppy_"+e.id,role:this.props.role},l("div",{className:"uppy-Dashboard-Item-preview"},l(p,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult}),l(y,{file:e,error:f,isUploaded:n,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,pauseUpload:this.props.pauseUpload,cancelUpload:this.props.cancelUpload,retryUpload:this.props.retryUpload,i18n:this.props.i18n})),l("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},l(w,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel}),l(x,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:_,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:r,removeFile:this.props.removeFile,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,i18n:this.props.i18n,log:this.props.log,info:this.props.info})))},a}(f)},57348:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var a=n(1665),l=n(24130),f=n(72779),d=n(92427).h;e.exports=function(e){var t=0===e.totalFileCount,n=f("uppy-Dashboard-files",{"uppy-Dashboard-files--noFiles":t}),h=1===e.itemsPerRow?71:200,p={id:e.id,error:e.error,i18n:e.i18n,log:e.log,info:e.info,acquirers:e.acquirers,resumableUploads:e.resumableUploads,individualCancellation:e.individualCancellation,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,isWide:e.isWide,metaFields:e.metaFields,recoveredState:e.recoveredState,retryUpload:e.retryUpload,pauseUpload:e.pauseUpload,cancelUpload:e.cancelUpload,toggleFileCard:e.toggleFileCard,removeFile:e.removeFile,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail},y=Object.keys(e.files);e.recoveredState&&y.sort((function(t,n){return e.files[n].isGhost-e.files[t].isGhost}));var w,x,_,S,k=(w=y,x=e.itemsPerRow,_=[],S=[],w.forEach((function(e,t){S.length<x?S.push(e):(_.push(S),S=[e])})),S.length&&_.push(S),_);return d(l,{class:n,role:"list",data:k,renderRow:function(t){return d("div",{role:"presentation",key:t[0]},t.map((function(t){return d(a,r({key:t},p,{role:"listitem",openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,file:e.files[t]}))})))},rowHeight:h})}},29920:function(e,t,n){var r=n(52784),a=n(92427).h;e.exports=function(e){var t=e.file;if(t.preview)return a("img",{className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});var n=r(t.type),l=n.color,f=n.icon;return a("div",{className:"uppy-Dashboard-Item-previewIconWrap"},a("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:l}},f),a("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},a("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}},86108:function(e,t,n){var r=n(92427).h,a=n(72779),l=n(62428);e.exports=function(e){return r("div",{className:a("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:"uppy-DashboardContent-panel--"+e.activePickerPanel.id,onDragOver:l,onDragLeave:l,onDrop:l,onPaste:l},r("div",{className:"uppy-DashboardContent-bar"},r("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18n("importFrom",{name:e.activePickerPanel.name})),r("button",{className:"uppy-DashboardContent-back",type:"button",onClick:e.hideAllPanels},e.i18n("cancel"))),r("div",{className:"uppy-DashboardContent-panelBody"},e.getPlugin(e.activePickerPanel.id).render(e.state)))}},62252:function(e,t,n){var r=n(92427).h,a={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function l(e){switch(function(e,t,n,r){if(void 0===r&&(r={}),e)return a.STATE_ERROR;if(t)return a.STATE_COMPLETE;if(n)return a.STATE_PAUSED;for(var l=a.STATE_WAITING,f=Object.keys(r),d=0;d<f.length;d++){var h=r[f[d]].progress;if(h.uploadStarted&&!h.uploadComplete)return a.STATE_UPLOADING;h.preprocess&&l!==a.STATE_UPLOADING&&(l=a.STATE_PREPROCESSING),h.postprocess&&l!==a.STATE_UPLOADING&&l!==a.STATE_PREPROCESSING&&(l=a.STATE_POSTPROCESSING)}return l}(e.isAllErrored,e.isAllComplete,e.isAllPaused,e.files)){case"uploading":return e.i18n("uploadingXFiles",{smart_count:e.inProgressNotPausedFiles.length});case"preprocessing":case"postprocessing":return e.i18n("processingXFiles",{smart_count:e.processingFiles.length});case"paused":return e.i18n("uploadPaused");case"waiting":return e.i18n("xFilesSelected",{smart_count:e.newFiles.length});case"complete":return e.i18n("uploadComplete")}}e.exports=function(e){var t=e.allowNewUpload;return t&&e.maxNumberOfFiles&&(t=e.totalFileCount<e.maxNumberOfFiles),r("div",{className:"uppy-DashboardContent-bar"},e.isAllComplete||e.hideCancelButton?r("div",null):r("button",{className:"uppy-DashboardContent-back",type:"button",onClick:e.cancelAll},e.i18n("cancel")),r("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r(l,e)),t?r("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e.i18n("addMoreFiles"),title:e.i18n("addMoreFiles"),onClick:function(){return e.toggleAddFilesPanel(!0)}},r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},r("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),r("span",{className:"uppy-DashboardContent-addMoreCaption"},e.i18n("addMore"))):r("div",null))}},38597:function(e,t,n){function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}var a=n(92427),l=a.cloneElement,f=a.Component,d=n(72779),h="uppy-transition-slideDownUp",p=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this).state={cachedChildren:null,className:""},n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var f=a.prototype;return f.componentWillUpdate=function(e){var t=this,n=this.state.cachedChildren,r=e.children[0];if(n!==r){var a={cachedChildren:r};r&&!n&&(a.className=h+"-enter",cancelAnimationFrame(this.animationFrame),clearTimeout(this.leaveTimeout),this.leaveTimeout=void 0,this.animationFrame=requestAnimationFrame((function(){t.base.getBoundingClientRect(),t.setState({className:h+"-enter "+h+"-enter-active"}),t.enterTimeout=setTimeout((function(){t.setState({className:""})}),250)}))),n&&!r&&void 0===this.leaveTimeout&&(a.cachedChildren=n,a.className=h+"-leave",cancelAnimationFrame(this.animationFrame),clearTimeout(this.enterTimeout),this.enterTimeout=void 0,this.animationFrame=requestAnimationFrame((function(){t.setState({className:h+"-leave "+h+"-leave-active"}),t.leaveTimeout=setTimeout((function(){t.setState({cachedChildren:null,className:""})}),250)}))),this.setState(a)}},f.render=function(){var e=this.state,t=e.cachedChildren,n=e.className;return t?l(t,{className:d(n,t.attributes.className)}):null},a}(f);e.exports=p},24130:function(e,t,n){var r=["data","rowHeight","renderRow","overscanCount","sync"];function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}var f=n(92427),d=f.h,h=f.Component,p={position:"relative",width:"100%",minHeight:"100%"},y={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},w=function(e){var t,n;function f(t){var n;return(n=e.call(this,t)||this).handleResize=function(){n.resize()},n.handleScroll=function(){n.setState({offset:n.base.scrollTop}),n.props.sync&&n.forceUpdate()},n.focusElement=null,n.state={offset:0,height:0},n}n=e,(t=f).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var h=f.prototype;return h.resize=function(){this.state.height!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})},h.componentWillUpdate=function(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)},h.componentDidUpdate=function(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()},h.componentDidMount=function(){this.resize(),window.addEventListener("resize",this.handleResize)},h.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize)},h.render=function(e){var t=e.data,n=e.rowHeight,l=e.renderRow,f=e.overscanCount,h=void 0===f?10:f,w=(e.sync,function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r)),x=this.state,_=x.offset,S=x.height,k=Math.floor(_/n),C=Math.floor(S/n);h&&(k=Math.max(0,k-k%h),C+=h);var E=k+C+4,O=t.slice(k,E),j=a({},p,{height:t.length*n}),T=a({},y,{top:k*n});return d("div",a({onScroll:this.handleScroll},w),d("div",{role:"presentation",style:j},d("div",{role:"presentation",style:T},O.map(l))))},f}(h);e.exports=w},42651:function(e,t,n){var r,a;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var h=n(92427).h,p=n(7924).Plugin,y=n(14019),w=n(28298),x=n(86270),_=n(40908),S=n(75384),k=n(55246),C=n(66226),E=n(32892),O=n(90915),j=n(91489),T=n(6676),A=n(97209).default||n(97209),P=n(61381),D=n(36631).default||n(36631),R=n(21329);function I(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}function M(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},h("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}e.exports=(a=r=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).setOptions=function(t){e.prototype.setOptions.call(f(r),t),r.i18nInit()},r.i18nInit=function(){r.translator=new y([r.defaultLocale,r.uppy.locale,r.opts.locale]),r.i18n=r.translator.translate.bind(r.translator),r.i18nArray=r.translator.translateArray.bind(r.translator),r.setPluginState()},r.removeTarget=function(e){var t=r.getPluginState().targets.filter((function(t){return t.id!==e.id}));r.setPluginState({targets:t})},r.addTarget=function(e){var t=e.id||e.constructor.name,n=e.title||t,a=e.type;if("acquirer"===a||"progressindicator"===a||"editor"===a){var l={id:t,name:n,type:a},f=r.getPluginState().targets.slice();return f.push(l),r.setPluginState({targets:f}),r.el}r.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error")},r.hideAllPanels=function(){var e={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1},t=r.getPluginState();t.activePickerPanel===e.activePickerPanel&&t.showAddFilesPanel===e.showAddFilesPanel&&t.showFileEditor===e.showFileEditor&&t.activeOverlayType===e.activeOverlayType||r.setPluginState(e)},r.showPanel=function(e){var t=r.getPluginState().targets.filter((function(t){return"acquirer"===t.type&&t.id===e}))[0];r.setPluginState({activePickerPanel:t,activeOverlayType:"PickerPanel"})},r.canEditFile=function(e){var t=r.getPluginState().targets;return r._getEditors(t).some((function(t){return r.uppy.getPlugin(t.id).canEditFile(e)}))},r.openFileEditor=function(e){var t=r.getPluginState().targets,n=r._getEditors(t);r.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),n.forEach((function(t){r.uppy.getPlugin(t.id).selectFile(e)}))},r.saveFileEditor=function(){var e=r.getPluginState().targets;r._getEditors(e).forEach((function(e){r.uppy.getPlugin(e.id).save()})),r.hideAllPanels()},r.openModal=function(){var e=I(),t=e.promise,n=e.resolve;if(r.savedScrollPosition=window.pageYOffset,r.savedActiveElement=document.activeElement,r.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),r.opts.animateOpenClose&&r.getPluginState().isClosing){r.el.addEventListener("animationend",(function e(){r.setPluginState({isHidden:!1}),r.el.removeEventListener("animationend",e,!1),n()}),!1)}else r.setPluginState({isHidden:!1}),n();return r.opts.browserBackButtonClose&&r.updateBrowserHistory(),document.addEventListener("keydown",r.handleKeyDownInModal),r.uppy.emit("dashboard:modal-open"),t},r.closeModal=function(e){void 0===e&&(e={});var t=e.manualClose,n=void 0===t||t,a=r.getPluginState(),l=a.isHidden,f=a.isClosing;if(!l&&!f){var d=I(),h=d.promise,p=d.resolve;if(r.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),r.opts.animateOpenClose){r.setPluginState({isClosing:!0});r.el.addEventListener("animationend",(function e(){r.setPluginState({isHidden:!0,isClosing:!1}),r.superFocus.cancel(),r.savedActiveElement.focus(),r.el.removeEventListener("animationend",e,!1),p()}),!1)}else r.setPluginState({isHidden:!0}),r.superFocus.cancel(),r.savedActiveElement.focus(),p();return document.removeEventListener("keydown",r.handleKeyDownInModal),n&&r.opts.browserBackButtonClose&&history.state&&history.state[r.modalName]&&history.go(-1),r.uppy.emit("dashboard:modal-closed"),h}},r.isModalOpen=function(){return!r.getPluginState().isHidden||!1},r.requestCloseModal=function(){return r.opts.onRequestCloseModal?r.opts.onRequestCloseModal():r.closeModal()},r.setDarkModeCapability=function(e){var t=r.uppy.getState().capabilities;r.uppy.setState({capabilities:l({},t,{darkMode:e})})},r.handleSystemDarkModeChange=function(e){var t=e.matches;r.uppy.log("[Dashboard] Dark mode is "+(t?"on":"off")),r.setDarkModeCapability(t)},r.toggleFileCard=function(e,t){var n=r.uppy.getFile(t);e?r.uppy.emit("dashboard:file-edit-start",n):r.uppy.emit("dashboard:file-edit-complete",n),r.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})},r.toggleAddFilesPanel=function(e){r.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})},r.addFiles=function(e){var t=e.map((function(e){return{source:r.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}}}));try{r.uppy.addFiles(t)}catch(e){r.uppy.log(e)}},r.startListeningToResize=function(){r.resizeObserver=new A((function(e,t){var n=e[0].contentRect,a=n.width,l=n.height;r.uppy.log("[Dashboard] resized: "+a+" / "+l,"debug"),r.setPluginState({containerWidth:a,containerHeight:l,areInsidesReadyToBeVisible:!0})})),r.resizeObserver.observe(r.el.querySelector(".uppy-Dashboard-inner")),r.makeDashboardInsidesVisibleAnywayTimeout=setTimeout((function(){var e=r.getPluginState(),t=!r.opts.inline&&e.isHidden;e.areInsidesReadyToBeVisible||t||(r.uppy.log("[Dashboard] resize event didn't fire on time: defaulted to mobile layout","debug"),r.setPluginState({areInsidesReadyToBeVisible:!0}))}),1e3)},r.stopListeningToResize=function(){r.resizeObserver.disconnect(),clearTimeout(r.makeDashboardInsidesVisibleAnywayTimeout)},r.recordIfFocusedOnUppyRecently=function(e){r.el.contains(e.target)?r.ifFocusedOnUppyRecently=!0:(r.ifFocusedOnUppyRecently=!1,r.superFocus.cancel())},r.disableAllFocusableElements=function(e){var t=C(r.el.querySelectorAll(R));e?t.forEach((function(e){var t=e.getAttribute("tabindex");t&&(e.dataset.inertTabindex=t),e.setAttribute("tabindex","-1")})):t.forEach((function(e){"inertTabindex"in e.dataset?e.setAttribute("tabindex",e.dataset.inertTabindex):e.removeAttribute("tabindex")})),r.dashboardIsDisabled=e},r.updateBrowserHistory=function(){var e;history.state&&history.state[r.modalName]||history.pushState(l({},history.state,((e={})[r.modalName]=!0,e)),"");window.addEventListener("popstate",r.handlePopState,!1)},r.handlePopState=function(e){!r.isModalOpen()||e.state&&e.state[r.modalName]||r.closeModal({manualClose:!1}),!r.isModalOpen()&&e.state&&e.state[r.modalName]&&history.go(-1)},r.handleKeyDownInModal=function(e){27===e.keyCode&&r.requestCloseModal(e),9===e.keyCode&&j.forModal(e,r.getPluginState().activeOverlayType,r.el)},r.handleClickOutside=function(){r.opts.closeModalOnClickOutside&&r.requestCloseModal()},r.handlePaste=function(e){r.uppy.iteratePlugins((function(t){"acquirer"===t.type&&t.handleRootPaste&&t.handleRootPaste(e)}));var t=C(e.clipboardData.files);r.addFiles(t)},r.handleInputChange=function(e){e.preventDefault();var t=C(e.target.files);r.addFiles(t)},r.handleDragOver=function(e){e.preventDefault(),e.stopPropagation(),r.opts.disabled||r.opts.disableLocalFiles||(e.dataTransfer.dropEffect="copy",clearTimeout(r.removeDragOverClassTimeout),r.setPluginState({isDraggingOver:!0}))},r.handleDragLeave=function(e){e.preventDefault(),e.stopPropagation(),r.opts.disabled||r.opts.disableLocalFiles||(clearTimeout(r.removeDragOverClassTimeout),r.removeDragOverClassTimeout=setTimeout((function(){r.setPluginState({isDraggingOver:!1})}),50))},r.handleDrop=function(e,t){if(e.preventDefault(),e.stopPropagation(),!r.opts.disabled&&!r.opts.disableLocalFiles){clearTimeout(r.removeDragOverClassTimeout),r.setPluginState({isDraggingOver:!1}),r.uppy.iteratePlugins((function(t){"acquirer"===t.type&&t.handleRootDrop&&t.handleRootDrop(e)}));var n=!1;E(e.dataTransfer,{logDropError:function logDropError(e){r.uppy.log(e,"error"),n||(r.uppy.info(e.message,"error"),n=!0)}}).then((function(e){e.length>0&&(r.uppy.log("[Dashboard] Files were dropped"),r.addFiles(e))}))}},r.handleRequestThumbnail=function(e){r.opts.waitForThumbnailsBeforeUpload||r.uppy.emit("thumbnail:request",e)},r.handleCancelThumbnail=function(e){r.opts.waitForThumbnailsBeforeUpload||r.uppy.emit("thumbnail:cancel",e)},r.handleKeyDownInInline=function(e){9===e.keyCode&&j.forInline(e,r.getPluginState().activeOverlayType,r.el)},r.handlePasteOnBody=function(e){r.el.contains(document.activeElement)&&r.handlePaste(e)},r.handleComplete=function(e){var t=e.failed;r.opts.closeAfterFinish&&0===t.length&&r.requestCloseModal()},r.handleCancelRestore=function(){r.uppy.emit("restore-canceled")},r._openFileEditorWhenFilesAdded=function(e){var t=e[0];r.canEditFile(t)&&r.openFileEditor(t)},r.initEvents=function(){if(r.opts.trigger&&!r.opts.inline){var e=k(r.opts.trigger);e?e.forEach((function(e){return e.addEventListener("click",r.openModal)})):r.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}r.startListeningToResize(),document.addEventListener("paste",r.handlePasteOnBody),r.uppy.on("plugin-remove",r.removeTarget),r.uppy.on("file-added",r.hideAllPanels),r.uppy.on("dashboard:modal-closed",r.hideAllPanels),r.uppy.on("file-editor:complete",r.hideAllPanels),r.uppy.on("complete",r.handleComplete),document.addEventListener("focus",r.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",r.recordIfFocusedOnUppyRecently,!0),r.opts.inline&&r.el.addEventListener("keydown",r.handleKeyDownInInline),r.opts.autoOpenFileEditor&&r.uppy.on("files-added",r._openFileEditorWhenFilesAdded)},r.removeEvents=function(){var e=k(r.opts.trigger);!r.opts.inline&&e&&e.forEach((function(e){return e.removeEventListener("click",r.openModal)})),r.stopListeningToResize(),document.removeEventListener("paste",r.handlePasteOnBody),window.removeEventListener("popstate",r.handlePopState,!1),r.uppy.off("plugin-remove",r.removeTarget),r.uppy.off("file-added",r.hideAllPanels),r.uppy.off("dashboard:modal-closed",r.hideAllPanels),r.uppy.off("file-editor:complete",r.hideAllPanels),r.uppy.off("complete",r.handleComplete),document.removeEventListener("focus",r.recordIfFocusedOnUppyRecently),document.removeEventListener("click",r.recordIfFocusedOnUppyRecently),r.opts.inline&&r.el.removeEventListener("keydown",r.handleKeyDownInInline),r.opts.autoOpenFileEditor&&r.uppy.off("files-added",r._openFileEditorWhenFilesAdded)},r.superFocusOnEachUpdate=function(){var e=r.el.contains(document.activeElement),t=document.activeElement===document.body||null===document.activeElement,n=r.uppy.getState().info.isHidden,a=!r.opts.inline;n&&(a||e||t&&r.ifFocusedOnUppyRecently)?r.superFocus(r.el,r.getPluginState().activeOverlayType):r.superFocus.cancel()},r.afterUpdate=function(){!r.opts.disabled||r.dashboardIsDisabled?(!r.opts.disabled&&r.dashboardIsDisabled&&r.disableAllFocusableElements(!1),r.superFocusOnEachUpdate()):r.disableAllFocusableElements(!0)},r.cancelUpload=function(e){r.uppy.removeFile(e)},r.saveFileCard=function(e,t){r.uppy.setFileMeta(t,e),r.toggleFileCard(!1,t)},r._attachRenderFunctionToTarget=function(e){var t=r.uppy.getPlugin(e.id);return l({},e,{icon:t.icon||r.opts.defaultPickerIcon,render:t.render})},r._isTargetSupported=function(e){var t=r.uppy.getPlugin(e.id);return"function"!=typeof t.isSupported||t.isSupported()},r._getAcquirers=D((function(e){return e.filter((function(e){return"acquirer"===e.type&&r._isTargetSupported(e)})).map(r._attachRenderFunctionToTarget)})),r._getProgressIndicators=D((function(e){return e.filter((function(e){return"progressindicator"===e.type})).map(r._attachRenderFunctionToTarget)})),r._getEditors=D((function(e){return e.filter((function(e){return"editor"===e.type})).map(r._attachRenderFunctionToTarget)})),r.render=function(e){var t,n=r.getPluginState(),a=e.files,l=e.capabilities,f=e.allowNewUpload,d=Object.keys(a).filter((function(e){return!a[e].progress.uploadStarted})),h=Object.keys(a).filter((function(e){return a[e].progress.uploadStarted})),p=Object.keys(a).filter((function(e){return a[e].isPaused})),y=Object.keys(a).filter((function(e){return a[e].progress.uploadComplete})),x=Object.keys(a).filter((function(e){return a[e].error})),_=Object.keys(a).filter((function(e){return!a[e].progress.uploadComplete&&a[e].progress.uploadStarted})),S=_.filter((function(e){return!a[e].isPaused})),k=Object.keys(a).filter((function(e){return a[e].progress.preprocess||a[e].progress.postprocess})),C=h.length>0,E=100===e.totalProgress&&y.length===Object.keys(a).length&&0===k.length,O=C&&x.length===h.length,j=0!==_.length&&p.length===_.length,T=r._getAcquirers(n.targets),A=r._getProgressIndicators(n.targets),P=r._getEditors(n.targets);return t="auto"===r.opts.theme?l.darkMode?"dark":"light":r.opts.theme,["files","folders","both"].indexOf(r.opts.fileManagerSelectionType)<0&&(r.opts.fileManagerSelectionType="files",console.error('Unsupported option for "fileManagerSelectionType". Using default of "'+r.opts.fileManagerSelectionType+'".')),w({state:e,isHidden:n.isHidden,files:a,newFiles:d,uploadStartedFiles:h,completeFiles:y,erroredFiles:x,inProgressFiles:_,inProgressNotPausedFiles:S,processingFiles:k,isUploadStarted:C,isAllComplete:E,isAllErrored:O,isAllPaused:j,totalFileCount:Object.keys(a).length,totalProgress:e.totalProgress,allowNewUpload:f,acquirers:T,theme:t,disabled:r.opts.disabled,disableLocalFiles:r.opts.disableLocalFiles,direction:r.opts.direction,activePickerPanel:n.activePickerPanel,showFileEditor:n.showFileEditor,saveFileEditor:r.saveFileEditor,disableAllFocusableElements:r.disableAllFocusableElements,animateOpenClose:r.opts.animateOpenClose,isClosing:n.isClosing,getPlugin:r.uppy.getPlugin,progressindicators:A,editors:P,autoProceed:r.uppy.opts.autoProceed,id:r.id,closeModal:r.requestCloseModal,handleClickOutside:r.handleClickOutside,handleInputChange:r.handleInputChange,handlePaste:r.handlePaste,inline:r.opts.inline,showPanel:r.showPanel,hideAllPanels:r.hideAllPanels,log:r.uppy.log,i18n:r.i18n,i18nArray:r.i18nArray,removeFile:r.uppy.removeFile,uppy:r.uppy,info:r.uppy.info,note:r.opts.note,recoveredState:e.recoveredState,metaFields:n.metaFields,resumableUploads:l.resumableUploads||!1,individualCancellation:l.individualCancellation,isMobileDevice:l.isMobileDevice,pauseUpload:r.uppy.pauseResume,retryUpload:r.uppy.retryUpload,cancelUpload:r.cancelUpload,cancelAll:r.uppy.cancelAll,fileCardFor:n.fileCardFor,toggleFileCard:r.toggleFileCard,toggleAddFilesPanel:r.toggleAddFilesPanel,showAddFilesPanel:n.showAddFilesPanel,saveFileCard:r.saveFileCard,openFileEditor:r.openFileEditor,canEditFile:r.canEditFile,width:r.opts.width,height:r.opts.height,showLinkToFileUploadResult:r.opts.showLinkToFileUploadResult,fileManagerSelectionType:r.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:r.opts.proudlyDisplayPoweredByUppy,hideCancelButton:r.opts.hideCancelButton,hideRetryButton:r.opts.hideRetryButton,hidePauseResumeButton:r.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:r.opts.showRemoveButtonAfterComplete,containerWidth:n.containerWidth,containerHeight:n.containerHeight,areInsidesReadyToBeVisible:n.areInsidesReadyToBeVisible,isTargetDOMEl:r.isTargetDOMEl,parentElement:r.el,allowedFileTypes:r.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:r.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:r.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:r.opts.showSelectedFiles,handleCancelRestore:r.handleCancelRestore,handleRequestThumbnail:r.handleRequestThumbnail,handleCancelThumbnail:r.handleCancelThumbnail,isDraggingOver:n.isDraggingOver,handleDragOver:r.handleDragOver,handleDragLeave:r.handleDragLeave,handleDrop:r.handleDrop})},r.discoverProviderPlugins=function(){r.uppy.iteratePlugins((function(e){e&&!e.target&&e.opts&&e.opts.target===r.constructor&&r.addTarget(e)}))},r.install=function(){r.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,showFileEditor:!1,metaFields:r.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});var e=r.opts,t=e.inline,n=e.closeAfterFinish;if(t&&n)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");r.uppy.opts.allowMultipleUploads&&n&&r.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploads` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");var a=r.opts.target;a&&r.mount(a,f(r)),(r.opts.plugins||[]).forEach((function(e){var t=r.uppy.getPlugin(e);t&&t.mount(f(r),t)})),r.opts.disableStatusBar||r.uppy.use(x,{id:r.id+":StatusBar",target:f(r),hideUploadButton:r.opts.hideUploadButton,hideRetryButton:r.opts.hideRetryButton,hidePauseResumeButton:r.opts.hidePauseResumeButton,hideCancelButton:r.opts.hideCancelButton,showProgressDetails:r.opts.showProgressDetails,hideAfterFinish:r.opts.hideProgressAfterFinish,locale:r.opts.locale,doneButtonHandler:r.opts.doneButtonHandler}),r.opts.disableInformer||r.uppy.use(_,{id:r.id+":Informer",target:f(r)}),r.opts.disableThumbnailGenerator||r.uppy.use(S,{id:r.id+":ThumbnailGenerator",thumbnailWidth:r.opts.thumbnailWidth,thumbnailType:r.opts.thumbnailType,waitForThumbnailsBeforeUpload:r.opts.waitForThumbnailsBeforeUpload,lazy:!r.opts.waitForThumbnailsBeforeUpload}),r.darkModeMediaQuery="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;var l=!!r.darkModeMediaQuery&&r.darkModeMediaQuery.matches;r.uppy.log("[Dashboard] Dark mode is "+(l?"on":"off")),r.setDarkModeCapability(l),"auto"===r.opts.theme&&r.darkModeMediaQuery.addListener(r.handleSystemDarkModeChange),r.discoverProviderPlugins(),r.initEvents()},r.uninstall=function(){if(!r.opts.disableInformer){var e=r.uppy.getPlugin(r.id+":Informer");e&&r.uppy.removePlugin(e)}if(!r.opts.disableStatusBar){var t=r.uppy.getPlugin(r.id+":StatusBar");t&&r.uppy.removePlugin(t)}if(!r.opts.disableThumbnailGenerator){var n=r.uppy.getPlugin(r.id+":ThumbnailGenerator");n&&r.uppy.removePlugin(n)}(r.opts.plugins||[]).forEach((function(e){var t=r.uppy.getPlugin(e);t&&t.unmount()})),"auto"===r.opts.theme&&r.darkModeMediaQuery.removeListener(r.handleSystemDarkModeChange),r.unmount(),r.removeEvents()},r.id=r.opts.id||"Dashboard",r.title="Dashboard",r.type="orchestrator",r.modalName="uppy-Dashboard-"+T(),r.defaultLocale={strings:{closeModal:"Close Modal",importFrom:"Import from %{name}",addingMoreFiles:"Adding more files",addMoreFiles:"Add more files",dashboardWindowTitle:"File Uploader Window (Press escape to close)",dashboardTitle:"File Uploader",copyLinkToClipboardSuccess:"Link copied to clipboard",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",fileSource:"File source: %{name}",back:"Back",addMore:"Add more",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",finishEditingFile:"Finish editing file",save:"Save",saveChanges:"Save changes",cancel:"Cancel",myDevice:"My Device",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",dropHint:"Drop your files here",browseFiles:"browse files",browseFolders:"browse folders",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",poweredBy2:"%{backwardsCompat} %{uppy}",poweredBy:"Powered by"}};var a={target:"body",metaFields:[],trigger:"#uppy-select-files",inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:M,showLinkToFileUploadResult:!0,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,doneButtonHandler:function(){r.uppy.reset(),r.requestCloseModal()},note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:function(){return r.closeModal()},showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1};return r.opts=l({},a,n),r.i18nInit(),r.superFocus=P(),r.ifFocusedOnUppyRecently=!1,r.makeDashboardInsidesVisibleAnywayTimeout=null,r.removeDragOverClassTimeout=null,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n),r.prototype.onMount=function(){var e=this.el;O(e)||(e.dir="ltr")},r}(p),r.VERSION="1.21.1",a)},52214:function(e){e.exports=function(e,t){return t=t||"Copy the URL below",new Promise((function(n){var r=document.createElement("textarea");r.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),r.value=e,document.body.appendChild(r),r.select();var a=function(){document.body.removeChild(r),window.prompt(t,e),n()};try{return document.execCommand("copy")?(document.body.removeChild(r),n()):a()}catch(e){return document.body.removeChild(r),a()}}))}},61381:function(e,t,n){var r=n(80594),a=n(21329),l=n(47878);e.exports=function(){var e=!1;return r((function(t,n){var r=l(t,n),f=r.contains(document.activeElement);if(!f||!e){var d=r.querySelector("[data-uppy-super-focusable]");if(!f||d)if(d)d.focus({preventScroll:!0}),e=!0;else{var h=r.querySelector(a);h&&h.focus({preventScroll:!0}),e=!1}}}),260)}},47878:function(e){e.exports=function(e,t){if(t){var n=e.querySelector('[data-uppy-paneltype="'+t+'"]');if(n)return n}return e}},52784:function(e,t,n){var r=n(92427).h;e.exports=function(e){var t={color:"#838999",icon:r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},r("g",{fill:"#A7AFB7",fillRule:"nonzero"},r("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),r("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))};if(!e)return t;var n=e.split("/")[0],a=e.split("/")[1];if("text"===n)return{color:"#5a5e69",icon:r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},r("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))};if("image"===n)return{color:"#686de0",icon:r("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},r("g",{fill:"#686DE0",fillRule:"evenodd"},r("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),r("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),r("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))};if("audio"===n)return{color:"#068dbb",icon:r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},r("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))};if("video"===n)return{color:"#19af67",icon:r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},r("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))};if("application"===n&&"pdf"===a)return{color:"#e25149",icon:r("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},r("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))};return"application"===n&&-1!==["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(a)?{color:"#00C469",icon:r("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},r("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}:t}},62428:function(e){e.exports=function(e){var t=e.target.tagName;"INPUT"!==t&&"TEXTAREA"!==t?(e.preventDefault(),e.stopPropagation()):e.stopPropagation()}},91489:function(e,t,n){var r=n(66226),a=n(47878),l=n(21329);function f(e,t){var n=t[0];n&&(n.focus(),e.preventDefault())}function d(e,t,n){var d=a(n,t),h=r(d.querySelectorAll(l)),p=h.indexOf(document.activeElement);!function(e){return e.contains(document.activeElement)}(d)?f(e,h):e.shiftKey&&0===p?function(e,t){var n=t[t.length-1];n&&(n.focus(),e.preventDefault())}(e,h):e.shiftKey||p!==h.length-1||f(e,h)}e.exports={forModal:function(e,t,n){d(e,t,n)},forInline:function(e,t,n){null===t||d(e,t,n)}}},52540:function(e,t,n){var r,a;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var h=n(7924).Plugin,p=n(14019),y=n(66226),w=n(4230),x=n(32892),_=n(92427).h;e.exports=(a=r=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).type="acquirer",r.id=r.opts.id||"DragDrop",r.title="Drag & Drop",r.defaultLocale={strings:{dropHereOr:"Drop files here or %{browse}",browse:"browse"}};return r.opts=l({},{target:null,inputName:"files[]",width:"100%",height:"100%",note:null},n),r.isDragDropSupported=w(),r.removeDragOverClassTimeout=null,r.i18nInit(),r.onInputChange=r.onInputChange.bind(f(r)),r.handleDragOver=r.handleDragOver.bind(f(r)),r.handleDragLeave=r.handleDragLeave.bind(f(r)),r.handleDrop=r.handleDrop.bind(f(r)),r.addFiles=r.addFiles.bind(f(r)),r.render=r.render.bind(f(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var a=r.prototype;return a.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},a.i18nInit=function(){this.translator=new p([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},a.addFiles=function(e){var t=this,n=e.map((function(e){return{source:t.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}}}));try{this.uppy.addFiles(n)}catch(e){this.uppy.log(e)}},a.onInputChange=function(e){this.uppy.log("[DragDrop] Files selected through input");var t=y(e.target.files);this.addFiles(t),e.target.value=null},a.handleDrop=function(e){var t=this;this.opts.onDrop&&this.opts.onDrop(e),e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.log("[DragDrop] Files were dropped");x(e.dataTransfer,{logDropError:function logDropError(e){t.uppy.log(e,"error")}}).then((function(e){return t.addFiles(e)}))},a.handleDragOver=function(e){this.opts.onDragOver&&this.opts.onDragOver(e),e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0})},a.handleDragLeave=function(e){var t=this;this.opts.onDragLeave&&this.opts.onDragLeave(e),e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout((function(){t.setPluginState({isDraggingOver:!1})}),50)},a.renderHiddenFileInput=function(){var e=this,t=this.uppy.opts.restrictions;return _("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:function(t){e.fileInputRef=t},name:this.opts.inputName,multiple:1!==t.maxNumberOfFiles,accept:t.allowedFileTypes,onChange:this.onInputChange})},r.renderArrowSvg=function(){return _("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},_("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))},a.renderLabel=function(){return _("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:_("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))},a.renderNote=function(){return _("span",{className:"uppy-DragDrop-note"},this.opts.note)},a.render=function(){var e=this,t="uppy-Root\n      uppy-u-reset\n      uppy-DragDrop-container\n      "+(this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":"")+"\n      "+(this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":"")+"\n    ",n={width:this.opts.width,height:this.opts.height};return _("button",{type:"button",className:t,style:n,onClick:function(){return e.fileInputRef.click()},onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),_("div",{className:"uppy-DragDrop-inner"},r.renderArrowSvg(),this.renderLabel(),this.renderNote()))},a.install=function(){var e=this.opts.target;this.setPluginState({isDraggingOver:!1}),e&&this.mount(e,this)},a.uninstall=function(){this.unmount()},r}(h),r.VERSION="1.4.31",a)},41149:function(e,t,n){var r,a;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var h=n(7924).Plugin,p=n(66226),y=n(14019),w=n(92427).h;e.exports=(a=r=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).id=r.opts.id||"FileInput",r.title="File Input",r.type="acquirer",r.defaultLocale={strings:{chooseFiles:"Choose files"}};return r.opts=l({},{target:null,pretty:!0,inputName:"files[]"},n),r.i18nInit(),r.render=r.render.bind(f(r)),r.handleInputChange=r.handleInputChange.bind(f(r)),r.handleClick=r.handleClick.bind(f(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var a=r.prototype;return a.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},a.i18nInit=function(){this.translator=new y([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},a.addFiles=function(e){var t=this,n=e.map((function(e){return{source:t.id,name:e.name,type:e.type,data:e}}));try{this.uppy.addFiles(n)}catch(e){this.uppy.log(e)}},a.handleInputChange=function(e){this.uppy.log("[FileInput] Something selected through input...");var t=p(e.target.files);this.addFiles(t),e.target.value=null},a.handleClick=function(e){this.input.click()},a.render=function(e){var t=this,n=this.uppy.opts.restrictions,r=n.allowedFileTypes?n.allowedFileTypes.join(","):null;return w("div",{className:"uppy-Root uppy-FileInput-container"},w("input",{className:"uppy-FileInput-input",style:this.opts.pretty&&{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},type:"file",name:this.opts.inputName,onChange:this.handleInputChange,multiple:1!==n.maxNumberOfFiles,accept:r,ref:function(e){t.input=e}}),this.opts.pretty&&w("button",{className:"uppy-FileInput-btn",type:"button",onClick:this.handleClick},this.i18n("chooseFiles")))},a.install=function(){var e=this.opts.target;e&&this.mount(e,this)},a.uninstall=function(){this.unmount()},r}(h),r.VERSION="1.5.2",a)},40908:function(e,t,n){var r,a;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var d=n(7924).Plugin,h=n(92427).h;e.exports=(a=r=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).render=function(e){var t=e.info,n=t.isHidden,a=t.message,l=t.details;return h("div",{className:"uppy uppy-Informer","aria-hidden":n},h("p",{role:"alert"},a," ",l&&h("span",{"aria-label":l,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:function(){alert(a+" \n\n "+l)},onMouseOver:function(){clearTimeout(r.uppy.infoTimeoutID)},onMouseLeave:function(){r.uppy.infoTimeoutID=setTimeout(r.uppy.hideInfo,2e3)}},"?")))},r.type="progressindicator",r.id=r.opts.id||"Informer",r.title="Informer";return r.opts=l({},{},n),r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n),r.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},r}(d),r.VERSION="1.6.6",a)},20790:function(e,t,n){var r,a;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var d=n(7924).Plugin,h=n(92427).h;e.exports=(a=r=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).id=r.opts.id||"ProgressBar",r.title="Progress Bar",r.type="progressindicator";return r.opts=l({},{target:"body",replaceTargetContent:!1,fixed:!1,hideAfterFinish:!0},n),r.render=r.render.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var a=r.prototype;return a.render=function(e){var t=e.totalProgress||0,n=(0===t||100===t)&&this.opts.hideAfterFinish;return h("div",{className:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":n},h("div",{className:"uppy-ProgressBar-inner",style:{width:t+"%"}}),h("div",{className:"uppy-ProgressBar-percentage"},t))},a.install=function(){var e=this.opts.target;e&&this.mount(e,this)},a.uninstall=function(){this.unmount()},r}(d),r.VERSION="1.3.30",a)},91977:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var l=n(2784),f=n(42651),d=n(10698).dashboard,h=n(57254),p=l.createElement,y=function(e){var t,n;function l(t){var n;return(n=e.call(this,t)||this).validProps=h(t),n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var d=l.prototype;return d.componentDidMount=function(){this.installPlugin()},d.componentDidUpdate=function(e){e.uppy!==this.props.uppy&&(this.uninstallPlugin(e),this.installPlugin())},d.componentWillUnmount=function(){this.uninstallPlugin()},d.installPlugin=function(){var e=this.props.uppy,t=r({id:"react:Dashboard"},this.props,{target:this.container});delete t.uppy,e.use(f,t),this.plugin=e.getPlugin(t.id)},d.uninstallPlugin=function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)},d.render=function(){var e=this;return p("div",r({ref:function(t){e.container=t}},this.validProps))},l}(l.Component);y.propTypes=d,y.defaultProps={inline:!0},e.exports=y},91484:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var l=n(2784),f=n(13980),d=n(42651),h=n(10698).dashboard,p=n(57254),y=l.createElement,w=function(e){var t,n;function l(t){var n;return(n=e.call(this,t)||this).validProps=p(t),n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var f=l.prototype;return f.componentDidMount=function(){this.installPlugin()},f.componentDidUpdate=function(e){e.uppy!==this.props.uppy&&(this.uninstallPlugin(e),this.installPlugin()),e.open&&!this.props.open?this.plugin.closeModal():!e.open&&this.props.open&&this.plugin.openModal()},f.componentWillUnmount=function(){this.uninstallPlugin()},f.installPlugin=function(){var e=this.props.uppy,t=r({id:"react:DashboardModal"},this.props,{onRequestCloseModal:this.props.onRequestClose});t.target||(t.target=this.container),delete t.uppy,e.use(d,t),this.plugin=e.getPlugin(t.id),this.props.open&&this.plugin.openModal()},f.uninstallPlugin=function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)},f.render=function(){var e=this;return y("div",r({ref:function(t){e.container=t}},this.validProps))},l}(l.Component);w.propTypes=r({target:"undefined"!=typeof window?f.instanceOf(window.HTMLElement):f.any,open:f.bool,onRequestClose:f.func,closeModalOnClickOutside:f.bool,disablePageScrollWhenModalOpen:f.bool},h),w.defaultProps={},e.exports=w},37615:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var l=n(2784),f=n(52540),d=n(10698),h=n(57254),p=l.createElement,y=function(e){var t,n;function l(t){var n;return(n=e.call(this,t)||this).validProps=h(t),n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var d=l.prototype;return d.componentDidMount=function(){this.installPlugin()},d.componentDidUpdate=function(e){e.uppy!==this.props.uppy&&(this.uninstallPlugin(e),this.installPlugin())},d.componentWillUnmount=function(){this.uninstallPlugin()},d.installPlugin=function(){var e=this.props.uppy,t=r({id:"react:DragDrop"},this.props,{target:this.container});delete t.uppy,e.use(f,t),this.plugin=e.getPlugin(t.id)},d.uninstallPlugin=function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)},d.render=function(){var e=this;return p("div",r({ref:function(t){e.container=t}},this.validProps))},l}(l.Component);y.propTypes={uppy:d.uppy,locale:d.locale},y.defaultProps={},e.exports=y},88594:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var l=n(13980),f=n(2784),d=n(41149),h=n(10698),p=f.createElement,y=function(e){var t,n;function l(){return e.apply(this,arguments)||this}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var f=l.prototype;return f.componentDidMount=function(){this.installPlugin()},f.componentDidUpdate=function(e){e.uppy!==this.props.uppy&&(this.uninstallPlugin(e),this.installPlugin())},f.componentWillUnmount=function(){this.uninstallPlugin()},f.installPlugin=function(){var e=this.props.uppy,t=r({id:"react:FileInput"},this.props,{target:this.container});delete t.uppy,e.use(d,t),this.plugin=e.getPlugin(t.id)},f.uninstallPlugin=function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)},f.render=function(){var e=this;return p("div",{ref:function(t){e.container=t}})},l}(f.Component);y.propTypes={uppy:h.uppy,locale:h.locale,pretty:l.bool,inputName:l.string},y.defaultProps={},e.exports=y},46379:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var l=n(2784),f=n(13980),d=n(20790),h=n(10698).uppy,p=n(57254),y=l.createElement,w=function(e){var t,n;function l(t){var n;return(n=e.call(this,t)||this).validProps=p(t),n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var f=l.prototype;return f.componentDidMount=function(){this.installPlugin()},f.componentDidUpdate=function(e){e.uppy!==this.props.uppy&&(this.uninstallPlugin(e),this.installPlugin())},f.componentWillUnmount=function(){this.uninstallPlugin()},f.installPlugin=function(){var e=this.props.uppy,t=r({id:"react:ProgressBar"},this.props,{target:this.container});delete t.uppy,e.use(d,t),this.plugin=e.getPlugin(t.id)},f.uninstallPlugin=function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)},f.render=function(){var e=this;return y("div",r({ref:function(t){e.container=t}},this.validProps))},l}(l.Component);w.propTypes={uppy:h,fixed:f.bool,hideAfterFinish:f.bool},w.defaultProps={},e.exports=w},40826:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var l=n(2784),f=n(13980),d=n(86270),h=n(10698).uppy,p=n(57254),y=l.createElement,w=function(e){var t,n;function l(t){var n;return(n=e.call(this,t)||this).validProps=p(t),n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var f=l.prototype;return f.componentDidMount=function(){this.installPlugin()},f.componentDidUpdate=function(e){e.uppy!==this.props.uppy&&(this.uninstallPlugin(e),this.installPlugin())},f.componentWillUnmount=function(){this.uninstallPlugin()},f.installPlugin=function(){var e=this.props.uppy,t=r({id:"react:StatusBar"},this.props,{target:this.container});delete t.uppy,e.use(d,t),this.plugin=e.getPlugin(t.id)},f.uninstallPlugin=function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)},f.render=function(){var e=this;return y("div",r({ref:function(t){e.container=t}},this.validProps))},l}(l.Component);w.propTypes={uppy:h,hideAfterFinish:f.bool,showProgressDetails:f.bool},w.defaultProps={},e.exports=w},57254:function(e){function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}var n=["accept","acceptCharset","acceptCharset","accessKey","action","allowFullScreen","alt","as","async","autoCapitalize","autoComplete","autoCorrect","autoFocus","autoPlay","autoSave","capture","cellPadding","cellSpacing","challenge","charSet","checked","children","cite","className","classID","className","cols","colSpan","content","contentEditable","contextMenu","controls","controlsList","coords","crossOrigin","dangerouslySetInnerHTML","data","dateTime","default","defaultChecked","defaultValue","defer","dir","disabled","disablePictureInPicture","disableRemotePlayback","download","draggable","encType","enterKeyHint","htmlFor","form","formMethod","formAction","formEncType","formNoValidate","formTarget","frameBorder","headers","hidden","high","href","hrefLang","htmlFor","httpEquiv","httpEquiv","icon","id","innerHTML","inputMode","integrity","is","itemID","itemProp","itemRef","itemScope","itemType","keyParams","keyType","kind","label","lang","list","loop","low","manifest","marginWidth","marginHeight","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noModule","nonce","noValidate","open","optimum","pattern","placeholder","playsInline","poster","preload","profile","radioGroup","readOnly","referrerPolicy","rel","required","reversed","role","rows","rowSpan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","spellCheck","src","srcDoc","srcLang","srcSet","start","step","style","summary","tabIndex","title","type","useMap","value","wmode","wrap"];e.exports=function(e){var r;return(r=e,Object.entries?Object.entries(r):Object.keys(r).map((function(e){return[e,r[e]]}))).reduce((function(e,r){var a,l=r[0],f=r[1];return n.includes(l)?t({},e,((a={})[l]=f,a)):e}),{})}},10698:function(e,t,n){var r=n(13980),a=n(7924).Uppy,l=r.instanceOf(a).isRequired,f=r.arrayOf(r.string),d=r.shape({strings:r.object,pluralize:r.func}),h=r.shape({id:r.string.isRequired,name:r.string.isRequired,placeholder:r.string}),p=r.oneOfType([r.arrayOf(h),r.func]),y=r.oneOfType([r.string,r.number]),w={uppy:l,inline:r.bool,plugins:f,width:y,height:y,showProgressDetails:r.bool,hideUploadButton:r.bool,hideProgressAfterFinish:r.bool,note:r.string,metaFields:p,proudlyDisplayPoweredByUppy:r.bool,disableStatusBar:r.bool,disableInformer:r.bool,disableThumbnailGenerator:r.bool,thumbnailWidth:r.number,locale:d};e.exports={uppy:l,locale:d,dashboard:w}},31033:function(e,t,n){var r=n(2784),a=r.useEffect,l=r.useRef,f=n(7924).Uppy;e.exports=function(e){if("function"!=typeof e)throw new TypeError("useUppy: expected a function that returns a new Uppy instance");var t=l(void 0);if(void 0===t.current&&(t.current=e(),!(t.current instanceof f)))throw new TypeError("useUppy: factory function must return an Uppy instance, got "+typeof t.current);return a((function(){return function(){t.current.close()}}),[]),t.current}},37468:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var a=n(98357),l=n(72779),f=n(47494),d=n(39961),h=n(38318),p=n(92427).h;e.exports=function(e){var t,n,a=e=e||{},d=a.newFiles,h=a.allowNewUpload,k=a.isUploadInProgress,E=a.isAllPaused,O=a.resumableUploads,j=a.error,D=a.hideUploadButton,R=a.hidePauseResumeButton,I=a.hideCancelButton,M=a.hideRetryButton,L=a.recoveredState,N=e.uploadState,F=e.totalProgress;if(N===f.STATE_PREPROCESSING||N===f.STATE_POSTPROCESSING){var q=function(e){var t=[];Object.keys(e).forEach((function(n){var r=e[n].progress;r.preprocess&&t.push(r.preprocess),r.postprocess&&t.push(r.postprocess)}));var n=t[0];return{mode:n.mode,message:n.message,value:t.filter((function(e){return"determinate"===e.mode})).reduce((function(e,t,n,r){return e+t.value/r.length}),0)}}(e.files);"determinate"===(t=q.mode)&&(F=100*q.value),n=C(q)}else N===f.STATE_COMPLETE?n=A(e):N===f.STATE_UPLOADING?(e.supportsUploadProgress||(t="indeterminate",F=null),n=T(e)):N===f.STATE_ERROR&&(F=void 0,n=P(e));var B="number"==typeof F?F:100,U=N===f.STATE_WAITING&&e.hideUploadButton||N===f.STATE_WAITING&&!e.newFiles>0||N===f.STATE_COMPLETE&&e.hideAfterFinish,H=!j&&d&&!k&&!E&&h&&!D;L&&(U=!1,H=!0);var z=!I&&N!==f.STATE_WAITING&&N!==f.STATE_COMPLETE,V=O&&!R&&N===f.STATE_UPLOADING,W=j&&!M,Z=e.doneButtonHandler&&N===f.STATE_COMPLETE,G="uppy-StatusBar-progress\n                           "+(t?"is-"+t:""),K=l({"uppy-Root":e.isTargetDOMEl},"uppy-StatusBar","is-"+N,{"has-ghosts":e.isSomeGhost});return p("div",{className:K,"aria-hidden":U},p("div",{className:G,style:{width:B+"%"},role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":F}),n,p("div",{className:"uppy-StatusBar-actions"},H?p(y,r({},e,{uploadState:N})):null,W?p(w,e):null,V?p(_,e):null,z?p(x,e):null,Z?p(S,e):null))};var y=function(e){var t=l("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":e.uploadState===f.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":e.isSomeGhost}),n=e.newFiles&&e.isUploadStarted&&!e.recoveredState?e.i18n("uploadXNewFiles",{smart_count:e.newFiles}):e.i18n("uploadXFiles",{smart_count:e.newFiles});return p("button",{type:"button",className:t,"aria-label":e.i18n("uploadXFiles",{smart_count:e.newFiles}),onClick:e.startUpload,disabled:e.isSomeGhost,"data-uppy-super-focusable":!0},n)},w=function(e){return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e.i18n("retryUpload"),onClick:e.retryAll,"data-uppy-super-focusable":!0},p("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},p("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e.i18n("retry"))},x=function(e){return p("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e.i18n("cancel"),"aria-label":e.i18n("cancel"),onClick:e.cancelAll,"data-uppy-super-focusable":!0},p("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},p("g",{fill:"none",fillRule:"evenodd"},p("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),p("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))},_=function(e){var t=e.isAllPaused,n=e.i18n,r=n(t?"resume":"pause");return p("button",{title:r,"aria-label":r,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:function(){return function(e){if(!e.isAllComplete)return e.resumableUploads?e.isAllPaused?e.resumeAll():e.pauseAll():e.cancelAll()}(e)},"data-uppy-super-focusable":!0},p("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},p("g",{fill:"none",fillRule:"evenodd"},p("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),p("path",t?{fill:"#FFF",d:"M6 4.25L11.5 8 6 11.75z"}:{d:"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z",fill:"#FFF"}))))},S=function(e){var t=e.i18n;return p("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:e.doneButtonHandler,"data-uppy-super-focusable":!0},t("done"))},k=function(){return p("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},p("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))},C=function(e){var t=Math.round(100*e.value);return p("div",{className:"uppy-StatusBar-content"},p(k,null),"determinate"===e.mode?t+"% · ":"",e.message)},E=function(e){return p("div",{className:"uppy-StatusBar-statusSecondary"},e.i18n("filesUploadedOfTotal",{complete:e.complete,smart_count:e.numUploads}))},O=function(e){var t=l("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return p("div",{className:"uppy-StatusBar-statusSecondary"},p("div",{className:"uppy-StatusBar-statusSecondaryHint"},e.i18n("xMoreFilesAdded",{smart_count:e.newFiles})),p("button",{type:"button",className:t,"aria-label":e.i18n("uploadXFiles",{smart_count:e.newFiles}),onClick:e.startUpload},e.i18n("upload")))},j=a((function(e){var t=e.numUploads>1;return p("div",{className:"uppy-StatusBar-statusSecondary"},t&&e.i18n("filesUploadedOfTotal",{complete:e.complete,smart_count:e.numUploads}),p("span",{className:"uppy-StatusBar-additionalInfo"},t&&" · ",e.i18n("dataUploadedOfTotal",{complete:d(e.totalUploadedSize),total:d(e.totalSize)})," · ",e.i18n("xTimeLeft",{time:h(e.totalETA)})))}),500,{leading:!0,trailing:!0}),T=function(e){if(!e.isUploadStarted||e.isAllComplete)return null;var t=e.isAllPaused?e.i18n("paused"):e.i18n("uploading"),n=e.newFiles&&e.isUploadStarted;return p("div",{className:"uppy-StatusBar-content","aria-label":t,title:t},e.isAllPaused?null:p(k,null),p("div",{className:"uppy-StatusBar-status"},p("div",{className:"uppy-StatusBar-statusPrimary"},e.supportsUploadProgress?t+": "+e.totalProgress+"%":t),e.isAllPaused||n||!e.showProgressDetails?null:e.supportsUploadProgress?p(j,e):p(E,e),n?p(O,e):null))},A=function(e){e.totalProgress;var t=e.i18n;return p("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete")},p("div",{className:"uppy-StatusBar-status"},p("div",{className:"uppy-StatusBar-statusPrimary"},p("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},p("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),t("complete"))))},P=function ProgressBarError(e){var t=e.error,n=(e.retryAll,e.hideRetryButton,e.i18n);return p("div",{className:"uppy-StatusBar-content",role:"alert",title:n("uploadFailed")},p("div",{className:"uppy-StatusBar-status"},p("div",{className:"uppy-StatusBar-statusPrimary"},p("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},p("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),n("uploadFailed"))),p("span",{className:"uppy-StatusBar-details","aria-label":t,"data-microtip-position":"top-right","data-microtip-size":"medium",role:"tooltip",onClick:function(){var e=n("uploadFailed")+" \n\n "+t;alert(e)}},"?"))}},47494:function(e){e.exports={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"}},86270:function(e,t,n){var r,a;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var h=n(7924).Plugin,p=n(14019),y=n(37468),w=n(47494),x=n(42527),_=n(5739),S=n(90915);e.exports=(a=r=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).startUpload=function(){if(!r.uppy.getState().recoveredState)return r.uppy.upload().catch((function(){}));r.uppy.emit("restore-confirmed")},r.id=r.opts.id||"StatusBar",r.title="StatusBar",r.type="progressindicator",r.defaultLocale={strings:{uploading:"Uploading",upload:"Upload",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",retryUpload:"Retry upload",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"}}};return r.opts=l({},{target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null},n),r.i18nInit(),r.render=r.render.bind(f(r)),r.install=r.install.bind(f(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var a=r.prototype;return a.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},a.i18nInit=function(){this.translator=new p([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},a.getTotalSpeed=function(e){var t=0;return e.forEach((function(e){t+=x(e.progress)})),t},a.getTotalETA=function(e){var t=this.getTotalSpeed(e);if(0===t)return 0;var n=e.reduce((function(e,t){return e+_(t.progress)}),0);return Math.round(n/t*10)/10},a.getUploadingState=function(e,t,n,r){if(e)return w.STATE_ERROR;if(t)return w.STATE_COMPLETE;if(n)return w.STATE_WAITING;for(var a=w.STATE_WAITING,l=Object.keys(r),f=0;f<l.length;f++){var d=r[l[f]].progress;if(d.uploadStarted&&!d.uploadComplete)return w.STATE_UPLOADING;d.preprocess&&a!==w.STATE_UPLOADING&&(a=w.STATE_PREPROCESSING),d.postprocess&&a!==w.STATE_UPLOADING&&a!==w.STATE_PREPROCESSING&&(a=w.STATE_POSTPROCESSING)}return a},a.render=function(e){var t=e.capabilities,n=e.files,r=e.allowNewUpload,a=e.totalProgress,l=e.error,f=e.recoveredState,d=Object.keys(n).map((function(e){return n[e]})),h=d.filter((function(e){return!e.progress.uploadStarted&&!e.progress.preprocess&&!e.progress.postprocess}));f&&(h=d);var p=d.filter((function(e){return e.progress.uploadStarted})).filter((function(e){return e.isPaused})),w=d.filter((function(e){return e.progress.uploadComplete})),x=d.filter((function(e){return e.error})),_=d.filter((function(e){return!e.progress.uploadComplete&&e.progress.uploadStarted})),S=_.filter((function(e){return!e.isPaused})),k=d.filter((function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess})),C=d.filter((function(e){return e.progress.preprocess||e.progress.postprocess})),E=this.getTotalETA(S),O=0,j=0;k.forEach((function(e){O+=e.progress.bytesTotal||0,j+=e.progress.bytesUploaded||0}));var T=k.length>0,A=100===a&&w.length===Object.keys(n).length&&0===C.length,P=l&&x.length===d.length,D=0!==_.length&&p.length===_.length,R=_.length>0,I=t.resumableUploads||!1,M=!1!==t.uploadProgress,L=d.some((function(e){return e.isGhost}));return y({error:l,uploadState:this.getUploadingState(P,A,f,e.files||{}),allowNewUpload:r,totalProgress:a,totalSize:O,totalUploadedSize:j,isAllComplete:A,isAllPaused:D,isAllErrored:P,isUploadStarted:T,isUploadInProgress:R,isSomeGhost:L,recoveredState:f,complete:w.length,newFiles:h.length,numUploads:k.length,totalETA:E,files:n,i18n:this.i18n,pauseAll:this.uppy.pauseAll,resumeAll:this.uppy.resumeAll,retryAll:this.uppy.retryAll,cancelAll:this.uppy.cancelAll,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:I,supportsUploadProgress:M,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})},a.onMount=function(){var e=this.el;S(e)||(e.dir="ltr")},a.install=function(){var e=this.opts.target;e&&this.mount(e,this)},a.uninstall=function(){this.unmount()},r}(h),r.VERSION="1.9.6",a)},45089:function(e){function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}var n=function(){function e(){this.state={},this.callbacks=[]}var n=e.prototype;return n.getState=function(){return this.state},n.setState=function(e){var n=t({},this.state),r=t({},this.state,e);this.state=r,this._publish(n,r,e)},n.subscribe=function(e){var t=this;return this.callbacks.push(e),function(){t.callbacks.splice(t.callbacks.indexOf(e),1)}},n._publish=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callbacks.forEach((function(e){e.apply(void 0,t)}))},e}();n.VERSION="1.2.7",e.exports=function(){return new n}},75384:function(e,t,n){var r,a;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var d=n(7924).Plugin,h=n(14019),p=n(50178),y=n(99039),w=n(55215),x=n(14320),_=n(39765);e.exports=(a=r=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).onFileAdded=function(e){!e.preview&&e.data&&w(e.type)&&!e.isRemote&&r.addToQueue(e.id)},r.onCancelRequest=function(e){var t=r.queue.indexOf(e.id);-1!==t&&r.queue.splice(t,1)},r.onFileRemoved=function(e){var t=r.queue.indexOf(e.id);-1!==t&&r.queue.splice(t,1),e.preview&&y(e.preview)&&URL.revokeObjectURL(e.preview)},r.onRestored=function(){r.uppy.getFiles().filter((function(e){return e.isRestored})).forEach((function(e){e.preview&&!y(e.preview)||r.addToQueue(e.id)}))},r.waitUntilAllProcessed=function(e){e.forEach((function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:r.i18n("generatingThumbnails")})}));var t=function(){e.forEach((function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-complete",t)}))};return new Promise((function(e,n){r.queueProcessing?r.uppy.once("thumbnail:all-generated",(function(){t(),e()})):(t(),e())}))},r.type="modifier",r.id=r.opts.id||"ThumbnailGenerator",r.title="Thumbnail Generator",r.queue=[],r.queueProcessing=!1,r.defaultThumbnailDimension=200,r.thumbnailType=r.opts.thumbnailType||"image/jpeg",r.defaultLocale={strings:{generatingThumbnails:"Generating thumbnails..."}};if(r.opts=l({},{thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1},n),r.opts.lazy&&r.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.");return r.i18nInit(),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var a=r.prototype;return a.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},a.i18nInit=function(){this.translator=new h([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},a.createThumbnail=function(e,t,n){var r=this,a=URL.createObjectURL(e.data),l=new Promise((function(e,t){var n=new Image;n.src=a,n.addEventListener("load",(function(){URL.revokeObjectURL(a),e(n)})),n.addEventListener("error",(function(e){URL.revokeObjectURL(a),t(e.error||new Error("Could not create thumbnail"))}))})),f=_.rotation(e.data).catch((function(e){return 1}));return Promise.all([l,f]).then((function(e){var a=e[0],l=e[1],f=r.getProportionalDimensions(a,t,n,l.deg),d=r.rotateImage(a,l),h=r.resizeImage(d,f.width,f.height);return r.canvasToBlob(h,r.thumbnailType,80)})).then((function(e){return URL.createObjectURL(e)}))},a.getProportionalDimensions=function(e,t,n,r){var a=e.width/e.height;return 90!==r&&270!==r||(a=e.height/e.width),null!=t?{width:t,height:Math.round(t/a)}:null!=n?{width:Math.round(n*a),height:n}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/a)}},a.protect=function(e){var t=e.width/e.height,n=5e6,r=4096,a=Math.floor(Math.sqrt(n*t)),l=Math.floor(n/Math.sqrt(n*t));if(a>r&&(a=r,l=Math.round(a/t)),l>r&&(l=r,a=Math.round(t*l)),e.width>a){var f=document.createElement("canvas");f.width=a,f.height=l,f.getContext("2d").drawImage(e,0,0,a,l),e=f}return e},a.resizeImage=function(e,t,n){e=this.protect(e);var r=Math.ceil(x(e.width/t));r<1&&(r=1);for(var a=t*Math.pow(2,r-1),l=n*Math.pow(2,r-1);r--;){var f=document.createElement("canvas");f.width=a,f.height=l,f.getContext("2d").drawImage(e,0,0,a,l),e=f,a=Math.round(a/2),l=Math.round(l/2)}return e},a.rotateImage=function(e,t){var n=e.width,r=e.height;90!==t.deg&&270!==t.deg||(n=e.height,r=e.width);var a=document.createElement("canvas");a.width=n,a.height=r;var l=a.getContext("2d");return l.translate(n/2,r/2),t.canvas&&(l.rotate(t.rad),l.scale(t.scaleX,t.scaleY)),l.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),a},a.canvasToBlob=function(e,t,n){try{e.getContext("2d").getImageData(0,0,1,1)}catch(e){if(18===e.code)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise((function(r){e.toBlob(r,t,n)})).then((function(e){if(null===e)throw new Error("cannot read image, probably an svg with external resources");return e})):Promise.resolve().then((function(){return p(e.toDataURL(t,n),{})})).then((function(e){if(null===e)throw new Error("could not extract blob, probably an old browser");return e}))},a.setPreviewURL=function(e,t){this.uppy.setFileState(e,{preview:t})},a.addToQueue=function(e){this.queue.push(e),!1===this.queueProcessing&&this.processQueue()},a.processQueue=function(){var e=this;if(this.queueProcessing=!0,this.queue.length>0){var t=this.uppy.getFile(this.queue.shift());return t?this.requestThumbnail(t).catch((function(e){})).then((function(){return e.processQueue()})):void this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error")}this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated")},a.requestThumbnail=function(e){var t=this;return w(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then((function(n){t.setPreviewURL(e.id,n),t.uppy.log("[ThumbnailGenerator] Generated thumbnail for "+e.id),t.uppy.emit("thumbnail:generated",t.uppy.getFile(e.id),n)})).catch((function(n){t.uppy.log("[ThumbnailGenerator] Failed thumbnail for "+e.id+":","warning"),t.uppy.log(n,"warning"),t.uppy.emit("thumbnail:error",t.uppy.getFile(e.id),n)})):Promise.resolve()},a.install=function(){this.uppy.on("file-removed",this.onFileRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)},a.uninstall=function(){this.uppy.off("file-removed",this.onFileRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)},r}(d),r.VERSION="1.7.11",a)},51603:function(e){e.exports=function(){function e(e){this._events=[],this._emitter=e}var t=e.prototype;return t.on=function(e,t){return this._events.push([e,t]),this._emitter.on(e,t)},t.remove=function(){var e=this;this._events.forEach((function(t){var n=t[0],r=t[1];e._emitter.off(n,r)}))},e}()},21329:function(e){e.exports=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])']},19703:function(e){function t(e){var l="function"==typeof Map?new Map:void 0;return t=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==l){if(l.has(e))return l.get(e);l.set(e,f)}function f(){return n(e,arguments,a(this).constructor)}return f.prototype=Object.create(e.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),r(f,e)},t(e)}function n(e,t,a){return n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var l=new(Function.bind.apply(e,a));return n&&r(l,n.prototype),l},n.apply(null,arguments)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var l=function(e){var t,n;function NetworkError(t,n){var r;return void 0===n&&(n=null),(r=e.call(this,"This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.\n\nSource error: ["+t+"]")||this).isNetworkError=!0,r.request=n,r}return n=e,(t=NetworkError).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),NetworkError}(t(Error));e.exports=l},55564:function(e){var t=function(){function e(e,t){this._timeout=e,this._onTimedOut=t,this._isDone=!1,this._aliveTimer=null,this._onTimedOut=this._onTimedOut.bind(this)}var t=e.prototype;return t.progress=function(){this._isDone||this._timeout>0&&(this._aliveTimer&&clearTimeout(this._aliveTimer),this._aliveTimer=setTimeout(this._onTimedOut,this._timeout))},t.done=function(){this._aliveTimer&&(clearTimeout(this._aliveTimer),this._aliveTimer=null),this._isDone=!0},e}();e.exports=t},83368:function(e,t,n){var r=n(91259);e.exports=function(){function e(e){this.limit="number"!=typeof e||0===e?1/0:e,this.activeRequests=0,this.queuedHandlers=[]}var t=e.prototype;return t._call=function(e){var t=this;this.activeRequests+=1;var n,r=!1;try{n=e()}catch(e){throw this.activeRequests-=1,e}return{abort:function(){r||(r=!0,t.activeRequests-=1,n(),t._queueNext())},done:function(){r||(r=!0,t.activeRequests-=1,t._queueNext())}}},t._queueNext=function(){var e=this;Promise.resolve().then((function(){e._next()}))},t._next=function(){if(!(this.activeRequests>=this.limit)&&0!==this.queuedHandlers.length){var e=this.queuedHandlers.shift(),t=this._call(e.fn);e.abort=t.abort,e.done=t.done}},t._queue=function(e,t){var n=this;void 0===t&&(t={});var a={fn:e,priority:t.priority||0,abort:function(){n._dequeue(a)},done:function(){throw new Error("Cannot mark a queued request as done: this indicates a bug")}},l=r(this.queuedHandlers,(function(e){return a.priority>e.priority}));return-1===l?this.queuedHandlers.push(a):this.queuedHandlers.splice(l,0,a),a},t._dequeue=function(e){var t=this.queuedHandlers.indexOf(e);-1!==t&&this.queuedHandlers.splice(t,1)},t.run=function(e,t){return this.activeRequests<this.limit?this._call(e):this._queue(e,t)},t.wrapPromiseFunction=function(e,t){var n=this;return function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];var f,d=new Promise((function(r,l){f=n.run((function(){var t,n;try{n=Promise.resolve(e.apply(void 0,a))}catch(e){n=Promise.reject(e)}return n.then((function(e){t?l(t):(f.done(),r(e))}),(function(e){t?l(t):(f.done(),l(e))})),function(){t=function createCancelError(){return new Error("Cancelled")}()}}),t)}));return d.abort=function(){f.abort()},d}},e}()},14019:function(e,t,n){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var a=n(51923);e.exports=function(){function e(e){var t=this;this.locale={strings:{},pluralize:function(e){return 1===e?0:1}},Array.isArray(e)?e.forEach((function(e){return t._apply(e)})):this._apply(e)}var t=e.prototype;return t._apply=function(e){if(e&&e.strings){var t=this.locale;this.locale=r({},t,{strings:r({},t.strings,e.strings)}),this.locale.pluralize=e.pluralize||t.pluralize}},t.interpolate=function(e,t){var n=String.prototype,r=n.split,l=n.replace,f=/\$/g,d=[e];for(var h in t)if("_"!==h&&a(t,h)){var p=t[h];"string"==typeof p&&(p=l.call(t[h],f,"$$$$")),d=y(d,new RegExp("%\\{"+h+"\\}","g"),p)}return d;function y(e,t,n){var a=[];return e.forEach((function(e){if("string"!=typeof e)return a.push(e);r.call(e,t).forEach((function(e,t,r){""!==e&&a.push(e),t<r.length-1&&a.push(n)}))})),a}},t.translate=function(e,t){return this.translateArray(e,t).join("")},t.translateArray=function(e,t){if(!a(this.locale.strings,e))throw new Error("missing string: "+e);var n=this.locale.strings[e];if("object"==typeof n){if(t&&void 0!==t.smart_count){var r=this.locale.pluralize(t.smart_count);return this.interpolate(n[r],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return this.interpolate(n,t)},e}()},50178:function(e){e.exports=function(e,t,n){var r=e.split(",")[1],a=t.mimeType||e.split(",")[0].split(":")[1].split(";")[0];null==a&&(a="plain/text");for(var l,f=atob(r),d=[],h=0;h<f.length;h++)d.push(f.charCodeAt(h));try{l=new Uint8Array(d)}catch(e){return null}return n?new File([l],t.name||"",{type:a}):new Blob([l],{type:a})}},39211:function(e,t,n){var r=n(98357);e.exports=r((function(e,t,n){var r=t.progress,a=t.bytesUploaded,l=t.bytesTotal;r&&(e.uppy.log("Upload progress: "+r),e.uppy.emit("upload-progress",n,{uploader:e,bytesUploaded:a,bytesTotal:l}))}),300,{leading:!0,trailing:!0})},62010:function(e,t,n){var r=n(19703);e.exports=function fetchWithNetworkError(){return fetch.apply(void 0,arguments).catch((function(e){throw"AbortError"===e.name?e:new r(e)}))}},55246:function(e,t,n){var r=n(6575);e.exports=function(e){if("string"==typeof e){var t=[].slice.call(document.querySelectorAll(e));return t.length>0?t:null}if("object"==typeof e&&r(e))return[e]}},10791:function(e,t,n){var r=n(6575);e.exports=function(e,t){return void 0===t&&(t=document),"string"==typeof e?t.querySelector(e):r(e)?e:void 0}},91259:function(e){e.exports=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}},7300:function(e){function t(e){var t="";return e.replace(/[^A-Z0-9]/gi,(function(e){return t+="-"+function(e){return e.charCodeAt(0).toString(32)}(e),"/"}))+t}e.exports=function(e){var n="uppy";return"string"==typeof e.name&&(n+="-"+t(e.name.toLowerCase())),void 0!==e.type&&(n+="-"+e.type),e.meta&&"string"==typeof e.meta.relativePath&&(n+="-"+t(e.meta.relativePath.toLowerCase())),void 0!==e.data.size&&(n+="-"+e.data.size),void 0!==e.data.lastModified&&(n+="-"+e.data.lastModified),n}},5739:function(e){e.exports=function(e){return e.bytesTotal-e.bytesUploaded}},32892:function(e,t,n){var r=n(18216),a=n(72057);e.exports=function(e,t){var n=(void 0===t?{}:t).logDropError,l=void 0===n?function(){}:n;return e.items&&e.items[0]&&"webkitGetAsEntry"in e.items[0]?r(e,l):a(e)}},72057:function(e,t,n){var r=n(66226);e.exports=function(e){var t=r(e.files);return Promise.resolve(t)}},12624:function(e){e.exports=function e(t,n,r,a){var l=a.onSuccess;t.readEntries((function(a){var f=[].concat(n,a);a.length?setTimeout((function(){e(t,f,r,{onSuccess:l})}),0):l(f)}),(function(e){r(e),l(n)}))}},92625:function(e){e.exports=function(e){return e.fullPath&&e.fullPath!=="/"+e.name?e.fullPath:null}},18216:function(e,t,n){var r=n(66226),a=n(92625),l=n(12624);e.exports=function(e,t){var n=[],f=[],d=function e(r){return new Promise((function(f){if(r.isFile)r.file((function(e){e.relativePath=a(r),n.push(e),f()}),(function(e){t(e),f()}));else if(r.isDirectory){var d=r.createReader();l(d,[],t,{onSuccess:function(t){var n=t.map((function(t){return e(t)}));Promise.all(n).then((function(){return f()}))}})}}))};return r(e.items).forEach((function(e){var t=e.webkitGetAsEntry();t&&f.push(d(t))})),Promise.all(f).then((function(){return n}))}},20769:function(e){e.exports=function(e){var t=e.lastIndexOf(".");return-1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}},23928:function(e,t,n){var r=n(20769),a=n(40489);e.exports=function(e){var t=e.name?r(e.name).extension:null;return t=t?t.toLowerCase():null,e.type?e.type:t&&a[t]?a[t]:"application/octet-stream"}},38483:function(e){e.exports=function(e){var t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(e)[1];return(/^http:\/\//i.test(e)?"ws":"wss")+"://"+t}},42527:function(e){e.exports=function(e){if(!e.bytesUploaded)return 0;var t=new Date-e.uploadStarted;return e.bytesUploaded/(t/1e3)}},90915:function(e){e.exports=function(e){for(;e&&!e.dir;)e=e.parentNode;return e?e.dir:void 0}},25674:function(e){function t(e){return 2!==e.length?0+e:e}e.exports=function(){var e=new Date;return t(e.getHours().toString())+":"+t(e.getMinutes().toString())+":"+t(e.getSeconds().toString())}},51923:function(e){e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},6575:function(e){e.exports=function(e){return e&&"object"==typeof e&&e.nodeType===Node.ELEMENT_NODE}},4230:function(e){e.exports=function(){var e=document.createElement("div");return"draggable"in e&&"ondragstart"in e&&"ondrop"in e&&("FormData"in window&&"FileReader"in window)}},4423:function(e){e.exports=function isNetworkError(e){return!!e&&(0!==e.readyState&&4!==e.readyState||0===e.status)}},99039:function(e){e.exports=function(e){return 0===e.indexOf("blob:")}},55215:function(e){e.exports=function(e){if(!e)return!1;var t=e.split("/")[1];return!!/^(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(t)}},40489:function(e){e.exports={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"}},38318:function(e,t,n){var r=n(22872);e.exports=function(e){var t=r(e),n=t.hours?t.hours+"h ":"",a=t.hours?("0"+t.minutes).substr(-2):t.minutes,l=a?a+"m":"",f=a?("0"+t.seconds).substr(-2):t.seconds;return""+n+l+(t.hours?"":a?" "+f+"s":f+"s")}},22872:function(e){e.exports=function(e){return{hours:Math.floor(e/3600)%24,minutes:Math.floor(e/60)%60,seconds:Math.floor(e%60)}}},87575:function(e){e.exports=function(e){var t=[],n=[];function r(e){t.push(e)}function a(e){n.push(e)}return Promise.all(e.map((function(e){return e.then(r,a)}))).then((function(){return{successful:t,failed:n}}))}},66226:function(e){e.exports=function(e){return Array.prototype.slice.call(e||[],0)}},29033:function(e){e.exports=function(e,t){var n="...";if(e.length<=t)return e;if(t<=n.length)return e.substr(0,t);var r=t-n.length,a=Math.ceil(r/2),l=Math.floor(r/2);return e.substr(0,a)+n+e.substr(e.length-l)}},55675:function(e,t,n){var r,a;function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}var d=n(7924).Plugin,h=n(6676),p=n(14019),y=n(20405),w=y.Provider,x=y.RequestClient,_=y.Socket,S=n(39211),k=n(38483),C=n(87575),E=n(51603),O=n(55564),j=n(83368),T=n(19703),A=n(4423);function buildResponseError(e,t){return t||(t=new Error("Upload error")),"string"==typeof t&&(t=new Error(t)),t instanceof Error||(t=f(new Error("Upload error"),{data:t})),A(e)?t=new T(t,e):(t.request=e,t)}function P(e){return e.data.slice(0,e.data.size,e.meta.type)}e.exports=(a=r=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).type="uploader",r.id=r.opts.id||"XHRUpload",r.title="XHRUpload",r.defaultLocale={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}};var a={formData:!0,fieldName:"files[]",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!1,headers:{},timeout:3e4,limit:0,withCredentials:!1,responseType:"",getResponseData:function(e,t){var n={};try{n=JSON.parse(e)}catch(e){console.log(e)}return n},getResponseError:function getResponseError(e,t){var n=new Error("Upload error");return A(t)&&(n=new T(n,t)),n},validateStatus:function(e,t,n){return e>=200&&e<300}};if(r.opts=f({},a,n),r.i18nInit(),r.handleUpload=r.handleUpload.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r.opts.__queue instanceof j?r.requests=r.opts.__queue:r.requests=new j(r.opts.limit),r.opts.bundle&&!r.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");return r.uploaderEvents=Object.create(null),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var a=r.prototype;return a.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},a.i18nInit=function(){this.translator=new p([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},a.getOptions=function(e){var t=this.uppy.getState().xhrUpload,n=this.opts.headers,r=f({},this.opts,t||{},e.xhrUpload||{},{headers:{}});return"function"==typeof n?r.headers=n(e):f(r.headers,this.opts.headers),t&&f(r.headers,t.headers),e.xhrUpload&&f(r.headers,e.xhrUpload.headers),r},a.addMetadata=function(e,t,n){(Array.isArray(n.metaFields)?n.metaFields:Object.keys(t)).forEach((function(n){e.append(n,t[n])}))},a.createFormDataUpload=function(e,t){var n=new FormData;this.addMetadata(n,e.meta,t);var r=P(e);return e.name?n.append(t.fieldName,r,e.meta.name):n.append(t.fieldName,r),n},a.createBundledUpload=function(e,t){var n=this,r=new FormData,a=this.uppy.getState().meta;return this.addMetadata(r,a,t),e.forEach((function(e){var t=n.getOptions(e),a=P(e);e.name?r.append(t.fieldName,a,e.name):r.append(t.fieldName,a)})),r},a.createBareUpload=function(e,t){return e.data},a.upload=function(e,t,n){var r=this,a=this.getOptions(e);return this.uppy.log("uploading "+t+" of "+n),new Promise((function(t,n){r.uppy.emit("upload-started",e);var l=a.formData?r.createFormDataUpload(e,a):r.createBareUpload(e,a),f=new XMLHttpRequest;r.uploaderEvents[e.id]=new E(r.uppy);var d=new O(a.timeout,(function(){f.abort(),y.done();var t=new Error(r.i18n("timedOut",{seconds:Math.ceil(a.timeout/1e3)}));r.uppy.emit("upload-error",e,t),n(t)})),p=h();f.upload.addEventListener("loadstart",(function(e){r.uppy.log("[XHRUpload] "+p+" started")})),f.upload.addEventListener("progress",(function(t){r.uppy.log("[XHRUpload] "+p+" progress: "+t.loaded+" / "+t.total),d.progress(),t.lengthComputable&&r.uppy.emit("upload-progress",e,{uploader:r,bytesUploaded:t.loaded,bytesTotal:t.total})})),f.addEventListener("load",(function(l){if(r.uppy.log("[XHRUpload] "+p+" finished"),d.done(),y.done(),r.uploaderEvents[e.id]&&(r.uploaderEvents[e.id].remove(),r.uploaderEvents[e.id]=null),a.validateStatus(l.target.status,f.responseText,f)){var h=a.getResponseData(f.responseText,f),w=h[a.responseUrlFieldName],x={status:l.target.status,body:h,uploadURL:w};return r.uppy.emit("upload-success",e,x),w&&r.uppy.log("Download "+e.name+" from "+w),t(e)}var _=a.getResponseData(f.responseText,f),S=buildResponseError(f,a.getResponseError(f.responseText,f)),k={status:l.target.status,body:_};return r.uppy.emit("upload-error",e,S,k),n(S)})),f.addEventListener("error",(function(t){r.uppy.log("[XHRUpload] "+p+" errored"),d.done(),y.done(),r.uploaderEvents[e.id]&&(r.uploaderEvents[e.id].remove(),r.uploaderEvents[e.id]=null);var l=buildResponseError(f,a.getResponseError(f.responseText,f));return r.uppy.emit("upload-error",e,l),n(l)})),f.open(a.method.toUpperCase(),a.endpoint,!0),f.withCredentials=a.withCredentials,""!==a.responseType&&(f.responseType=a.responseType);var y=r.requests.run((function(){var t=r.getOptions(e);return Object.keys(t.headers).forEach((function(e){f.setRequestHeader(e,t.headers[e])})),f.send(l),function(){d.done(),f.abort()}}));r.onFileRemove(e.id,(function(){y.abort(),n(new Error("File removed"))})),r.onCancelAll(e.id,(function(){y.abort(),n(new Error("Upload cancelled"))}))}))},a.uploadRemote=function(e,t,n){var r=this,a=this.getOptions(e);return new Promise((function(t,n){r.uppy.emit("upload-started",e);var l={};(Array.isArray(a.metaFields)?a.metaFields:Object.keys(e.meta)).forEach((function(t){l[t]=e.meta[t]})),new(e.remote.providerOptions.provider?w:x)(r.uppy,e.remote.providerOptions).post(e.remote.url,f({},e.remote.body,{endpoint:a.endpoint,size:e.data.size,fieldname:a.fieldName,metadata:l,httpMethod:a.method,useFormData:a.formData,headers:a.headers})).then((function(l){var d=l.token,h=k(e.remote.companionUrl),p=new _({target:h+"/api/"+d,autoOpen:!1});r.uploaderEvents[e.id]=new E(r.uppy),r.onFileRemove(e.id,(function(){p.send("pause",{}),y.abort(),t("upload "+e.id+" was removed")})),r.onCancelAll(e.id,(function(){p.send("pause",{}),y.abort(),t("upload "+e.id+" was canceled")})),r.onRetry(e.id,(function(){p.send("pause",{}),p.send("resume",{})})),r.onRetryAll(e.id,(function(){p.send("pause",{}),p.send("resume",{})})),p.on("progress",(function(t){return S(r,t,e)})),p.on("success",(function(n){var l=a.getResponseData(n.response.responseText,n.response),f=l[a.responseUrlFieldName],d={status:n.response.status,body:l,uploadURL:f};return r.uppy.emit("upload-success",e,d),y.done(),r.uploaderEvents[e.id]&&(r.uploaderEvents[e.id].remove(),r.uploaderEvents[e.id]=null),t()})),p.on("error",(function(t){var l=t.response,d=l?a.getResponseError(l.responseText,l):f(new Error(t.error.message),{cause:t.error});r.uppy.emit("upload-error",e,d),y.done(),r.uploaderEvents[e.id]&&(r.uploaderEvents[e.id].remove(),r.uploaderEvents[e.id]=null),n(d)}));var y=r.requests.run((function(){return p.open(),e.isPaused&&p.send("pause",{}),function(){return p.close()}}))})).catch((function(t){r.uppy.emit("upload-error",e,t),n(t)}))}))},a.uploadBundle=function(e){var t=this;return new Promise((function(n,r){var a=t.opts.endpoint,l=t.opts.method,d=t.uppy.getState().xhrUpload,h=t.createBundledUpload(e,f({},t.opts,d||{})),p=new XMLHttpRequest,y=new O(t.opts.timeout,(function(){p.abort();var e=new Error(t.i18n("timedOut",{seconds:Math.ceil(t.opts.timeout/1e3)}));w(e),r(e)})),w=function emitError(n){e.forEach((function(e){t.uppy.emit("upload-error",e,n)}))};p.upload.addEventListener("loadstart",(function(e){t.uppy.log("[XHRUpload] started uploading bundle"),y.progress()})),p.upload.addEventListener("progress",(function(n){y.progress(),n.lengthComputable&&e.forEach((function(e){t.uppy.emit("upload-progress",e,{uploader:t,bytesUploaded:n.loaded/n.total*e.size,bytesTotal:e.size})}))})),p.addEventListener("load",(function(a){if(y.done(),t.opts.validateStatus(a.target.status,p.responseText,p)){var l=t.opts.getResponseData(p.responseText,p),f={status:a.target.status,body:l};return e.forEach((function(e){t.uppy.emit("upload-success",e,f)})),n()}var d=t.opts.getResponseError(p.responseText,p)||new Error("Upload error");return d.request=p,w(d),r(d)})),p.addEventListener("error",(function(e){y.done();var n=t.opts.getResponseError(p.responseText,p)||new Error("Upload error");return w(n),r(n)})),t.uppy.on("cancel-all",(function(){y.done(),p.abort()})),p.open(l.toUpperCase(),a,!0),p.withCredentials=t.opts.withCredentials,""!==t.opts.responseType&&(p.responseType=t.opts.responseType),Object.keys(t.opts.headers).forEach((function(e){p.setRequestHeader(e,t.opts.headers[e])})),p.send(h),e.forEach((function(e){t.uppy.emit("upload-started",e)}))}))},a.uploadFiles=function(e){var t=this,n=e.map((function(n,r){var a=parseInt(r,10)+1,l=e.length;return n.error?Promise.reject(new Error(n.error)):n.isRemote?t.uploadRemote(n,a,l):t.upload(n,a,l)}));return C(n)},a.onFileRemove=function(e,t){this.uploaderEvents[e].on("file-removed",(function(n){e===n.id&&t(n.id)}))},a.onRetry=function(e,t){this.uploaderEvents[e].on("upload-retry",(function(n){e===n&&t()}))},a.onRetryAll=function(e,t){var n=this;this.uploaderEvents[e].on("retry-all",(function(r){n.uppy.getFile(e)&&t()}))},a.onCancelAll=function(e,t){var n=this;this.uploaderEvents[e].on("cancel-all",(function(){n.uppy.getFile(e)&&t()}))},a.handleUpload=function(e){var t=this;if(0===e.length)return this.uppy.log("[XHRUpload] No files to upload!"),Promise.resolve();0!==this.opts.limit||this.opts.__queue||this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");var n=e.map((function(e){return t.uppy.getFile(e)}));if(this.opts.bundle){if(n.some((function(e){return e.isRemote})))throw new Error("Can’t upload remote files when the `bundle: true` option is set");if("function"==typeof this.opts.headers)throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");return this.uploadBundle(n)}return this.uploadFiles(n).then((function(){return null}))},a.install=function(){if(this.opts.bundle){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:f({},e,{individualCancellation:!1})})}this.uppy.addUploader(this.handleUpload)},a.uninstall=function(){if(this.opts.bundle){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:f({},e,{individualCancellation:!0})})}this.uppy.removeUploader(this.handleUpload)},r}(d),r.VERSION="1.7.5",a)},28359:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(73076);class a extends r.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){const e=l.get(this);if("boolean"!=typeof e)throw new TypeError("Expected 'this' to be an 'AbortSignal' object, but got "+(null===this?"null":typeof this));return e}}r.defineEventAttribute(a.prototype,"abort");const l=new WeakMap;Object.defineProperties(a.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(a.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class f{constructor(){d.set(this,function(){const e=Object.create(a.prototype);return r.EventTarget.call(e),l.set(e,!1),e}())}get signal(){return h(this)}abort(){var e;e=h(this),!1===l.get(e)&&(l.set(e,!0),e.dispatchEvent({type:"abort"}))}}const d=new WeakMap;function h(e){const t=d.get(e);if(null==t)throw new TypeError("Expected 'this' to be an 'AbortController' object, but got "+(null===e?"null":typeof e));return t}Object.defineProperties(f.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(f.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),t.AbortController=f,t.AbortSignal=a,t.default=f,e.exports=f,e.exports.AbortController=e.exports.default=f,e.exports.AbortSignal=a},46533:function(e,t,n){"use strict";const r=n(28359),a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:void 0;a&&(void 0===a.AbortController&&(a.AbortController=r.AbortController),void 0===a.AbortSignal&&(a.AbortSignal=r.AbortSignal))},95095:function(e,t,n){e=n.nmd(e),function(){var e=function(){return this}();e||"undefined"==typeof window||(e=window);var t=function(e,n,r){"string"==typeof e?(2==arguments.length&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};t.modules={},t.payloads={};var n,r,a=function(e,t,n){if("string"==typeof t){var r=d(e,t);if(null!=r)return n&&n(),r}else if("[object Array]"===Object.prototype.toString.call(t)){for(var a=[],f=0,h=t.length;f<h;++f){var p=d(e,t[f]);if(null==p&&l.original)return;a.push(p)}return n&&n.apply(null,a)||!0}},l=function(e,t){var n=a("",e,t);return null==n&&l.original?l.original.apply(this,arguments):n},f=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return f(e,n[0])+"!"+f(e,n[1])}if("."==t.charAt(0))for(t=e.split("/").slice(0,-1).join("/")+"/"+t;-1!==t.indexOf(".")&&r!=t;){var r=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return t},d=function(e,n){n=f(e,n);var r=t.modules[n];if(!r){if("function"==typeof(r=t.payloads[n])){var l={},d={id:n,uri:"",exports:l,packaged:!0};l=r((function(e,t){return a(n,e,t)}),l,d)||d.exports,t.modules[n]=l,delete t.payloads[n]}r=t.modules[n]=l||r}return r};r=e,(n="ace")&&(e[n]||(e[n]={}),r=e[n]),r.define&&r.define.packaged||(t.original=r.define,r.define=t,r.define.packaged=!0),r.require&&r.require.packaged||(l.original=r.require,r.require=l,r.require.packaged=!0)}(),ace.define("ace/lib/fixoldbrowsers",[],(function(e,t,n){"use strict";"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",[],(function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var r="object"==typeof navigator?navigator:{},a=(/mac|win|linux/i.exec(r.platform)||["other"])[0].toLowerCase(),l=r.userAgent||"",f=r.appName||"";t.isWin="win"==a,t.isMac="mac"==a,t.isLinux="linux"==a,t.isIE="Microsoft Internet Explorer"==f||f.indexOf("MSAppHost")>=0?parseFloat((l.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((l.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=l.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(l.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(l.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(l.split(" Edge/")[1])||void 0,t.isAIR=l.indexOf("AdobeAIR")>=0,t.isAndroid=l.indexOf("Android")>=0,t.isChromeOS=l.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(l)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid})),ace.define("ace/lib/dom",[],(function(e,t,n){"use strict";var r=e("./useragent");if(t.buildDom=function e(t,n,r){if("string"==typeof t&&t){var a=document.createTextNode(t);return n&&n.appendChild(a),a}if(!Array.isArray(t))return t&&t.appendChild&&n&&n.appendChild(t),t;if("string"!=typeof t[0]||!t[0]){for(var l=[],f=0;f<t.length;f++){var d=e(t[f],n,r);d&&l.push(d)}return l}var h=document.createElement(t[0]),p=t[1],y=1;p&&"object"==typeof p&&!Array.isArray(p)&&(y=2);for(f=y;f<t.length;f++)e(t[f],h,r);return 2==y&&Object.keys(p).forEach((function(e){var t=p[e];"class"===e?h.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e||"$"==e[0]?h[e]=t:"ref"===e?r&&(r[t]=h):null!=t&&h.setAttribute(e,t)})),n&&n.appendChild(h),h},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},t.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var r=n.indexOf(t);if(-1==r)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),r=!0;;){var a=n.indexOf(t);if(-1==a)break;r=!1,n.splice(a,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,r=0;if(n=(t=t||document).querySelectorAll("style"))for(;r<n.length;)if(n[r++].id===e)return!0},t.importCssString=function(e,n,r){var a=r;r&&r.getRootNode&&(a=r.getRootNode())&&a!=r||(a=document);var l=a.ownerDocument||a;if(n&&t.hasCssString(n,a))return null;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */");var f=t.createElement("style");f.appendChild(l.createTextNode(e)),n&&(f.id=n),a==l&&(a=t.getDocumentHead(l)),a.insertBefore(f,a.firstChild)},t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),a=r.style;a.position="absolute",a.left="-10000px",a.overflow="hidden",a.width="200px",a.minWidth="0px",a.height="150px",a.display="block",r.appendChild(n);var l=e.documentElement;l.appendChild(r);var f=n.offsetWidth;a.overflow="scroll";var d=n.offsetWidth;return f==d&&(d=r.clientWidth),l.removeChild(r),f-d},"undefined"==typeof document&&(t.importCssString=function(){}),t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=!r.isWin||"undefined"!=typeof window&&window.devicePixelRatio>=1.5,"undefined"!=typeof document){var a=document.createElement("div");t.HI_DPI&&void 0!==a.style.transform&&(t.HAS_CSS_TRANSFORMS=!0),r.isEdge||void 0===a.style.animationName||(t.HAS_CSS_ANIMATION=!0),a=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}})),ace.define("ace/lib/oop",[],(function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}})),ace.define("ace/lib/keys",[],(function(e,t,n){"use strict";var r=e("./oop"),a=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return r.mixin(n,n.MODIFIER_KEYS),r.mixin(n,n.PRINTABLE_KEYS),r.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter((function(e){return t&n.KEY_MODS[e]})).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();r.mixin(t,a),t.keyCodeToString=function(e){var t=a[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}})),ace.define("ace/lib/event",[],(function(e,t,n){"use strict";var r,a=e("./keys"),l=e("./useragent"),f=null,d=0;function h(){return null==r&&function(){r=!1;try{document.createComment("").addEventListener("test",(function(){}),{get passive(){r={passive:!1}}})}catch(e){}}(),r}function p(e,t,n){this.elem=e,this.type=t,this.callback=n}p.prototype.destroy=function(){w(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var y=t.addListener=function(e,t,n,r){e.addEventListener(t,n,h()),r&&r.$toDestroy.push(new p(e,t,n))},w=t.removeListener=function(e,t,n){e.removeEventListener(t,n,h())};t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},t.preventDefault=function(e){e.preventDefault&&e.preventDefault()},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||l.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},t.capture=function(e,t,n){var r=e&&e.ownerDocument||document;function a(e){t&&t(e),n&&n(e),w(r,"mousemove",t),w(r,"mouseup",a),w(r,"dragstart",a)}return y(r,"mousemove",t),y(r,"mouseup",a),y(r,"dragstart",a),a},t.addMouseWheelListener=function(e,t,n){"onmousewheel"in e?y(e,"mousewheel",(function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),t(e)}),n):"onwheel"in e?y(e,"wheel",(function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}t(e)}),n):y(e,"DOMMouseScroll",(function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),t(e)}),n)},t.addMultiMouseDownListener=function(e,n,r,a,f){var d,h,p,w=0,x={2:"dblclick",3:"tripleclick",4:"quadclick"};function _(e){if(0!==t.getButton(e)?w=0:e.detail>1?++w>4&&(w=1):w=1,l.isIE){var f=Math.abs(e.clientX-d)>5||Math.abs(e.clientY-h)>5;p&&!f||(w=1),p&&clearTimeout(p),p=setTimeout((function(){p=null}),n[w-1]||600),1==w&&(d=e.clientX,h=e.clientY)}if(e._clicks=w,r[a]("mousedown",e),w>4)w=0;else if(w>1)return r[a](x[w],e)}Array.isArray(e)||(e=[e]),e.forEach((function(e){y(e,"mousedown",_,f)}))};var x=function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)};function _(e,t,n){var r=x(t);if(!l.isMac&&f){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(r|=8),f.altGr){if(3==(3&r))return;f.altGr=0}if(18===n||17===n){var h="location"in t?t.location:t.keyLocation;if(17===n&&1===h)1==f[n]&&(d=t.timeStamp);else if(18===n&&3===r&&2===h){t.timeStamp-d<50&&(f.altGr=!0)}}}if((n in a.MODIFIER_KEYS&&(n=-1),!r&&13===n)&&(3===(h="location"in t?t.location:t.keyLocation)&&(e(t,r,-n),t.defaultPrevented)))return;if(l.isChromeOS&&8&r){if(e(t,r,n),t.defaultPrevented)return;r&=-9}return!!(r||n in a.FUNCTION_KEYS||n in a.PRINTABLE_KEYS)&&e(t,r,n)}function S(){f=Object.create(null)}if(t.getModifierString=function(e){return a.KEY_MODS[x(e)]},t.addCommandKeyListener=function(e,n,r){if(l.isOldGecko||l.isOpera&&!("KeyboardEvent"in window)){var a=null;y(e,"keydown",(function(e){a=e.keyCode}),r),y(e,"keypress",(function(e){return _(n,e,a)}),r)}else{var d=null;y(e,"keydown",(function(e){f[e.keyCode]=(f[e.keyCode]||0)+1;var t=_(n,e,e.keyCode);return d=e.defaultPrevented,t}),r),y(e,"keypress",(function(e){d&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),d=null)}),r),y(e,"keyup",(function(e){f[e.keyCode]=null}),r),f||(S(),y(window,"focus",S))}},"object"==typeof window&&window.postMessage&&!l.isOldIE){var k=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+k++,a=function(l){l.data==r&&(t.stopPropagation(l),w(n,"message",a),e())};y(n,"message",a),n.postMessage(r,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout((function n(){t.$idleBlocked?setTimeout(n,100):e()}),n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout((function(){t.$idleBlocked=!1}),e||100)},t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}})),ace.define("ace/range",[],(function(e,t,n){"use strict";var r=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,r=e.start;return 1==(t=this.compare(n.row,n.column))?1==(t=this.compare(r.row,r.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(r.row,r.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)n={row:e,column:0};if(this.start.row>t)var a={row:t+1,column:0};else if(this.start.row<e)a={row:e,column:0};return r.fromPoints(a||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var a={row:e,column:t};else var l={row:e,column:t};return r.fromPoints(a||this.start,l||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new r(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(r.prototype),r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=r})),ace.define("ace/lib/lang",[],(function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var r=/^\s\s*/,a=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(a,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function e(t){if("object"!=typeof t||!t)return t;var n;if(Array.isArray(t)){n=[];for(var r=0;r<t.length;r++)n[r]=e(t[r]);return n}if("[object Object]"!==Object.prototype.toString.call(t))return t;for(var r in n={},t)n[r]=e(t[r]);return n},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,(function(e){n.push({offset:arguments[arguments.length-2],length:e.length})})),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},a=function(e){null==n&&(n=setTimeout(r,e||t))};return a.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},a.schedule=a,a.call=function(){this.cancel(),e()},a.cancel=function(){n&&clearTimeout(n),n=null},a.isPending=function(){return n},a}})),ace.define("ace/clipboard",[],(function(e,t,n){"use strict";var r;n.exports={lineMode:!1,pasteCancelled:function(){return!!(r&&r>Date.now()-50)||(r=!1)},cancel:function(){r=Date.now()}}})),ace.define("ace/keyboard/textinput",[],(function(e,t,n){"use strict";var r=e("../lib/event"),a=e("../lib/useragent"),l=e("../lib/dom"),f=e("../lib/lang"),d=e("../clipboard"),h=a.isChrome<18,p=a.isIE,y=a.isChrome>63,w=400,x=e("../lib/keys"),_=x.KEY_MODS,S=a.isIOS,k=S?/\s/:/\n/,C=a.isMobile;t.TextInput=function(e,t){var n=l.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",e.insertBefore(n,e.firstChild);var E=!1,O=!1,j=!1,T=!1,A="";C||(n.style.fontSize="1px");var P=!1,D=!1,R="",I=0,M=0,L=0;try{var N=document.activeElement===n}catch(e){}r.addListener(n,"blur",(function(e){D||(t.onBlur(e),N=!1)}),t),r.addListener(n,"focus",(function(e){if(!D){if(N=!0,a.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),a.isEdge?setTimeout(F):F()}}),t),this.$focusScroll=!1,this.focus=function(){if(A||y||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var e=n.style.top;n.style.position="fixed",n.style.top="0px";try{var t=0!=n.getBoundingClientRect().top}catch(e){return}var r=[];if(t)for(var a=n.parentElement;a&&1==a.nodeType;)r.push(a),a.setAttribute("ace_nocontext",!0),a=!a.parentElement&&a.getRootNode?a.getRootNode().host:a.parentElement;n.focus({preventScroll:!0}),t&&r.forEach((function(e){e.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=e)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return N},t.on("beforeEndOperation",(function(){var e=t.curOp,r=e&&e.command&&e.command.name;if("insertstring"!=r){var a=r&&(e.docChanged||e.selectionChanged);j&&a&&(R=n.value="",Y()),F()}}));var F=S?function(e){if(N&&(!E||e)&&!T){e||(e="");var r="\n ab"+e+"cde fg\n";r!=n.value&&(n.value=R=r);var a=4+(e.length||(t.selection.isEmpty()?0:1));4==I&&M==a||n.setSelectionRange(4,a),I=4,M=a}}:function(){if(!j&&!T&&(N||B)){j=!0;var e=0,r=0,a="";if(t.session){var l=t.selection,f=l.getRange(),d=l.cursor.row;if(e=f.start.column,r=f.end.column,a=t.session.getLine(d),f.start.row!=d){var h=t.session.getLine(d-1);e=f.start.row<d-1?0:e,r+=h.length+1,a=h+"\n"+a}else if(f.end.row!=d){var p=t.session.getLine(d+1);r=f.end.row>d+1?p.length:r,r+=a.length+1,a=a+"\n"+p}else C&&d>0&&(a="\n"+a,r+=1,e+=1);a.length>w&&(e<w&&r<w?a=a.slice(0,w):(a="\n",e==r?e=r=0:(e=0,r=1)))}var y=a+"\n\n";if(y!=R&&(n.value=R=y,I=M=y.length),B&&(I=n.selectionStart,M=n.selectionEnd),M!=r||I!=e||n.selectionEnd!=M)try{n.setSelectionRange(e,r),I=e,M=r}catch(e){}j=!1}};this.resetSelection=F,N&&t.onFocus();var q=null;this.setInputHandler=function(e){q=e},this.getInputHandler=function(){return q};var B=!1,U=function(e,r){if(B&&(B=!1),O)return F(),e&&t.onPaste(e),O=!1,"";for(var l=n.selectionStart,f=n.selectionEnd,d=I,h=R.length-M,p=e,y=e.length-l,w=e.length-f,x=0;d>0&&R[x]==e[x];)x++,d--;for(p=p.slice(x),x=1;h>0&&R.length-x>I-1&&R[R.length-x]==e[e.length-x];)x++,h--;y-=x-1,w-=x-1;var _=p.length-x+1;if(_<0&&(d=-_,_=0),p=p.slice(0,_),!(r||p||y||d||h||w))return"";T=!0;var S=!1;return a.isAndroid&&". "==p&&(p="  ",S=!0),p&&!d&&!h&&!y&&!w||P?t.onTextInput(p):t.onTextInput(p,{extendLeft:d,extendRight:h,restoreStart:y,restoreEnd:w}),T=!1,R=e,I=l,M=f,L=w,S?"\n":p},H=function(e){if(j)return K();if(e&&e.inputType){if("historyUndo"==e.inputType)return t.execCommand("undo");if("historyRedo"==e.inputType)return t.execCommand("redo")}var r=n.value,a=U(r,!0);(r.length>500||k.test(a)||C&&I<1&&I==M)&&F()},z=function(e,t,n){var r=e.clipboardData||window.clipboardData;if(r&&!h){var a=p||n?"Text":"text/plain";try{return t?!1!==r.setData(a,t):r.getData(a)}catch(e){if(!n)return z(e,t,!0)}}},V=function(e,a){var l=t.getCopyText();if(!l)return r.preventDefault(e);z(e,l)?(S&&(F(l),E=l,setTimeout((function(){E=!1}),10)),a?t.onCut():t.onCopy(),r.preventDefault(e)):(E=!0,n.value=l,n.select(),setTimeout((function(){E=!1,F(),a?t.onCut():t.onCopy()})))},W=function(e){V(e,!0)},Z=function(e){V(e,!1)},G=function(e){var l=z(e);d.pasteCancelled()||("string"==typeof l?(l&&t.onPaste(l,e),a.isIE&&setTimeout(F),r.preventDefault(e)):(n.value="",O=!0))};r.addCommandKeyListener(n,t.onCommandKey.bind(t),t),r.addListener(n,"select",(function(e){j||(E?E=!1:!function(e){return 0===e.selectionStart&&e.selectionEnd>=R.length&&e.value===R&&R&&e.selectionEnd!==M}(n)?C&&n.selectionStart!=I&&F():(t.selectAll(),F()))}),t),r.addListener(n,"input",H,t),r.addListener(n,"cut",W,t),r.addListener(n,"copy",Z,t),r.addListener(n,"paste",G,t),"oncut"in n&&"oncopy"in n&&"onpaste"in n||r.addListener(e,"keydown",(function(e){if((!a.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:Z(e);break;case 86:G(e);break;case 88:W(e)}}),t);var K=function(){if(j&&t.onCompositionUpdate&&!t.$readOnly){if(P)return X();if(j.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;U(e),j.markerRange&&(j.context&&(j.markerRange.start.column=j.selectionStart=j.context.compositionStartOffset),j.markerRange.end.column=j.markerRange.start.column+M-j.selectionStart+L)}}},Y=function(e){t.onCompositionEnd&&!t.$readOnly&&(j=!1,t.onCompositionEnd(),t.off("mousedown",X),e&&H())};function X(){D=!0,n.blur(),n.focus(),D=!1}var J,Q=f.delayedCall(K,50).schedule.bind(null,null);function ee(){clearTimeout(J),J=setTimeout((function(){A&&(n.style.cssText=A,A=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()}),0)}r.addListener(n,"compositionstart",(function(e){if(!j&&t.onCompositionStart&&!t.$readOnly&&(j={},!P)){e.data&&(j.useTextareaForIME=!1),setTimeout(K,0),t._signal("compositionStart"),t.on("mousedown",X);var r=t.getSelectionRange();r.end.row=r.start.row,r.end.column=r.start.column,j.markerRange=r,j.selectionStart=I,t.onCompositionStart(j),j.useTextareaForIME?(R=n.value="",I=0,M=0):(n.msGetInputContext&&(j.context=n.msGetInputContext()),n.getInputContext&&(j.context=n.getInputContext()))}}),t),r.addListener(n,"compositionupdate",K,t),r.addListener(n,"keyup",(function(e){27==e.keyCode&&n.value.length<n.selectionStart&&(j||(R=n.value),I=M=-1,F()),Q()}),t),r.addListener(n,"keydown",Q,t),r.addListener(n,"compositionend",Y,t),this.getElement=function(){return n},this.setCommandMode=function(e){P=e,n.readOnly=!1},this.setReadOnly=function(e){P||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){B=!0,F(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,f){A||(A=n.style.cssText),n.style.cssText=(f?"z-index:100000;":"")+(a.isIE?"opacity:0.1;":"")+"text-indent: -"+(I+M)*t.renderer.characterWidth*.5+"px;";var d=t.container.getBoundingClientRect(),h=l.computedStyle(t.container),p=d.top+(parseInt(h.borderTopWidth)||0),y=d.left+(parseInt(d.borderLeftWidth)||0),w=d.bottom-p-n.clientHeight-2,x=function(e){l.translate(n,e.clientX-y-2,Math.min(e.clientY-p-2,w))};x(e),"mousedown"==e.type&&(t.renderer.$isMousePressed=!0,clearTimeout(J),a.isWin&&r.capture(t.container,x,ee))},this.onContextMenuClose=ee;var te=function(e){t.textInput.onContextMenu(e),ee()};r.addListener(n,"mouseup",te,t),r.addListener(n,"mousedown",(function(e){e.preventDefault(),ee()}),t),r.addListener(t.renderer.scroller,"contextmenu",te,t),r.addListener(n,"contextmenu",te,t),S&&function(e,t,n){var r=null,a=!1;n.addEventListener("keydown",(function(e){r&&clearTimeout(r),a=!0}),!0),n.addEventListener("keyup",(function(e){r=setTimeout((function(){a=!1}),100)}),!0);var l=function(e){if(document.activeElement===n&&!(a||j||t.$mouseHandler.isMousePressed||E)){var r=n.selectionStart,l=n.selectionEnd,f=null,d=0;if(0==r?f=x.up:1==r?f=x.home:l>M&&"\n"==R[l]?f=x.end:r<I&&" "==R[r-1]?(f=x.left,d=_.option):r<I||r==I&&M!=I&&r==l?f=x.left:l>M&&R.slice(0,l).split("\n").length>2?f=x.down:l>M&&" "==R[l-1]?(f=x.right,d=_.option):(l>M||l==M&&M!=I&&r==l)&&(f=x.right),r!==l&&(d|=_.shift),f){if(!t.onCommandKey({},d,f)&&t.commands){f=x.keyCodeToString(f);var h=t.commands.findKeyCommand(d,f);h&&t.execCommand(h)}I=r,M=l,F("")}}};document.addEventListener("selectionchange",l),t.on("destroy",(function(){document.removeEventListener("selectionchange",l)}))}(0,t,n)},t.$setUserAgentForTests=function(e,t){C=e,S=t}})),ace.define("ace/mouse/default_handlers",[],(function(e,t,n){"use strict";var r=e("../lib/useragent");function a(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(t){e[t]=this[t]}),this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function l(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var a=this.editor,l=e.getButton();return 0!==l?((a.getSelectionRange().isEmpty()||1==l)&&a.selection.moveToPosition(n),void(2==l&&(a.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault()))):(this.mousedownEvent.time=Date.now(),!t||a.isFocused()||(a.focus(),!this.$focusTimeout||this.$clickSelection||a.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(-1==r)e=this.$clickSelection.end;else if(1==r)e=this.$clickSelection.start;else{var a=l(this.$clickSelection,n);n=a.cursor,e=a.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),a=n.selection[e](r.row,r.column);if(this.$clickSelection){var f=this.$clickSelection.comparePoint(a.start),d=this.$clickSelection.comparePoint(a.end);if(-1==f&&d<=0)t=this.$clickSelection.end,a.end.row==r.row&&a.end.column==r.column||(r=a.start);else if(1==d&&f>=0)t=this.$clickSelection.start,a.start.row==r.row&&a.start.column==r.column||(r=a.end);else if(-1==f&&1==d)r=a.end,t=a.start;else{var h=l(this.$clickSelection,r);r=h.cursor,t=h.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e,t,n,r,a=(e=this.mousedownEvent.x,t=this.mousedownEvent.y,n=this.x,r=this.y,Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))),l=Date.now();(a>0||l-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session.getBracketRange(t);r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.setState("select")):(r=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=r,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,r=e.domEvent.timeStamp,a=r-n.t,l=a?e.wheelX/a:n.vx,f=a?e.wheelY/a:n.vy;a<550&&(l=(l+n.vx)/2,f=(f+n.vy)/2);var d=Math.abs(l/f),h=!1;if(d>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(h=!0),d<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(h=!0),h)n.allowed=r;else if(r-n.allowed<550){Math.abs(l)<=1.5*Math.abs(n.vx)&&Math.abs(f)<=1.5*Math.abs(n.vy)?(h=!0,n.allowed=r):n.allowed=0}return n.t=r,n.vx=l,n.vy=f,h?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(a.prototype),t.DefaultHandlers=a})),ace.define("ace/tooltip",[],(function(e,t,n){"use strict";e("./lib/oop");var r=e("./lib/dom");function a(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}(function(){this.$init=function(){return this.$element=r.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){r.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(a.prototype),t.Tooltip=a})),ace.define("ace/mouse/default_gutter_handler",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=e("../lib/oop"),l=e("../lib/event"),f=e("../tooltip").Tooltip;function d(e){f.call(this,e)}a.inherits(d,f),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,a=this.getWidth(),l=this.getHeight();(e+=15)+a>n&&(e-=e+a-n),(t+=15)+l>r&&(t-=20+l),f.prototype.setPosition.call(this,e,t)}}.call(d.prototype),t.GutterHandler=function(e){var t,n,a,f=e.editor,h=f.renderer.$gutterLayer,p=new d(f.container);function y(){t&&(t=clearTimeout(t)),a&&(p.hide(),a=null,f._signal("hideGutterTooltip",p),f.off("mousewheel",y))}function w(e){p.setPosition(e.x,e.y)}e.editor.setDefaultHandler("guttermousedown",(function(t){if(f.isFocused()&&0==t.getButton()&&"foldWidgets"!=h.getRegion(t)){var n=t.getDocumentPosition().row,r=f.session.selection;if(t.getShiftKey())r.selectTo(n,0);else{if(2==t.domEvent.detail)return f.selectAll(),t.preventDefault();e.$clickSelection=f.selection.getLineRange(n)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}})),e.editor.setDefaultHandler("guttermousemove",(function(l){var d=l.domEvent.target||l.domEvent.srcElement;if(r.hasCssClass(d,"ace_fold-widget"))return y();a&&e.$tooltipFollowsMouse&&w(l),n=l,t||(t=setTimeout((function(){t=null,n&&!e.isMousePressed?function(){var t=n.getDocumentPosition().row,r=h.$annotations[t];if(!r)return y();if(t==f.session.getLength()){var l=f.renderer.pixelToScreenCoordinates(0,n.y).row,d=n.$pos;if(l>f.session.documentToScreenRow(d.row,d.column))return y()}if(a!=r)if(a=r.text.join("<br/>"),p.setHtml(a),p.show(),f._signal("showGutterTooltip",p),f.on("mousewheel",y),e.$tooltipFollowsMouse)w(n);else{var x=n.domEvent.target.getBoundingClientRect(),_=p.getElement().style;_.left=x.right+"px",_.top=x.bottom+"px"}}():y()}),50))})),l.addListener(f.renderer.$gutter,"mouseout",(function(e){n=null,a&&!t&&(t=setTimeout((function(){t=null,y()}),50))}),f),f.on("changeSession",y)}})),ace.define("ace/mouse/mouse_event",[],(function(e,t,n){"use strict";var r=e("../lib/event"),a=e("../lib/useragent"),l=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=a.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(l.prototype)})),ace.define("ace/mouse/dragdrop_handler",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=e("../lib/event"),l=e("../lib/useragent");function f(e){var t=e.editor,n=r.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",l.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(t){e[t]=this[t]}),this),t.on("mousedown",this.onMouseDown.bind(e));var f,h,p,y,w,x,_,S,k,C,E,O=t.container,j=0;function T(){var e=x;(function(e,n){var r=Date.now(),a=!n||e.row!=n.row,l=!n||e.column!=n.column;!C||a||l?(t.moveCursorToPosition(e),C=r,E={x:h,y:p}):d(E.x,E.y,h,p)>5?C=null:r-C>=200&&(t.renderer.scrollCursorIntoView(),C=null)})(x=t.renderer.screenToTextCoordinates(h,p),e),function(e,n){var r=Date.now(),a=t.renderer.layerConfig.lineHeight,l=t.renderer.layerConfig.characterWidth,f=t.renderer.scroller.getBoundingClientRect(),d={x:{left:h-f.left,right:f.right-h},y:{top:p-f.top,bottom:f.bottom-p}},y=Math.min(d.x.left,d.x.right),w=Math.min(d.y.top,d.y.bottom),x={row:e.row,column:e.column};y/l<=2&&(x.column+=d.x.left<d.x.right?-3:2),w/a<=1&&(x.row+=d.y.top<d.y.bottom?-1:1);var _=e.row!=x.row,S=e.column!=x.column,C=!n||e.row!=n.row;_||S&&!C?k?r-k>=200&&t.renderer.scrollCursorIntoView(x):k=r:k=null}(x,e)}function A(){w=t.selection.toOrientedRange(),f=t.session.addMarker(w,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(y),T(),y=setInterval(T,20),j=0,a.addListener(document,"mousemove",R)}function P(){clearInterval(y),t.session.removeMarker(f),f=null,t.selection.fromOrientedRange(w),t.isFocused()&&!S&&t.$resetCursorStyle(),w=null,x=null,j=0,k=null,C=null,a.removeListener(document,"mousemove",R)}this.onDragStart=function(e){if(this.cancelDrag||!O.draggable){var r=this;return setTimeout((function(){r.startSelect(),r.captureMouse(e)}),0),e.preventDefault()}w=t.getSelectionRange();var a=e.dataTransfer;a.effectAllowed=t.getReadOnly()?"copy":"copyMove",l.isOpera&&(t.container.appendChild(n),n.scrollTop=0),a.setDragImage&&a.setDragImage(n,0,0),l.isOpera&&t.container.removeChild(n),a.clearData(),a.setData("Text",t.session.getTextRange()),S=!0,this.setState("drag")},this.onDragEnd=function(e){if(O.draggable=!1,S=!1,this.setState(null),!t.getReadOnly()){var n=e.dataTransfer.dropEffect;_||"move"!=n||t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!t.getReadOnly()&&I(e.dataTransfer))return h=e.clientX,p=e.clientY,f||A(),j++,e.dataTransfer.dropEffect=_=M(e),a.preventDefault(e)},this.onDragOver=function(e){if(!t.getReadOnly()&&I(e.dataTransfer))return h=e.clientX,p=e.clientY,f||(A(),j++),null!==D&&(D=null),e.dataTransfer.dropEffect=_=M(e),a.preventDefault(e)},this.onDragLeave=function(e){if(--j<=0&&f)return P(),_=null,a.preventDefault(e)},this.onDrop=function(e){if(x){var n=e.dataTransfer;if(S)switch(_){case"move":w=w.contains(x.row,x.column)?{start:x,end:x}:t.moveText(w,x);break;case"copy":w=t.moveText(w,x,!0)}else{var r=n.getData("Text");w={start:x,end:t.session.insert(x,r)},t.focus(),_=null}return P(),a.preventDefault(e)}},a.addListener(O,"dragstart",this.onDragStart.bind(e),t),a.addListener(O,"dragend",this.onDragEnd.bind(e),t),a.addListener(O,"dragenter",this.onDragEnter.bind(e),t),a.addListener(O,"dragover",this.onDragOver.bind(e),t),a.addListener(O,"dragleave",this.onDragLeave.bind(e),t),a.addListener(O,"drop",this.onDrop.bind(e),t);var D=null;function R(){null==D&&(D=setTimeout((function(){null!=D&&f&&P()}),20))}function I(e){var t=e.types;return!t||Array.prototype.some.call(t,(function(e){return"text/plain"==e||"Text"==e}))}function M(e){var t=["copy","copymove","all","uninitialized"],n=l.isMac?e.altKey:e.ctrlKey,r="uninitialized";try{r=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var a="none";return n&&t.indexOf(r)>=0?a="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(r)>=0?a="move":t.indexOf(r)>=0&&(a="copy"),a}}function d(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=l.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;l.isIE&&"dragReady"==this.state&&(d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop());"dragWait"===this.state&&(d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton();if(1===(e.domEvent.detail||1)&&0===r&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var a=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in a&&(a.unselectable="on"),t.getDragDelay()){if(l.isWebKit)this.cancelDrag=!0,t.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(f.prototype),t.DragdropHandler=f})),ace.define("ace/mouse/touch_handler",[],(function(e,t,n){"use strict";var r=e("./mouse_event").MouseEvent,a=e("../lib/event"),l=e("../lib/dom");t.addTouchListeners=function(e,t){var n,f,d,h,p,y,w,x,_,S="scroll",k=0,C=0,E=0,O=0;function j(){var e=window.navigator&&window.navigator.clipboard,n=!1,r=function(r){var a,f,d=r.target.getAttribute("action");if("more"==d||!n)return n=!n,a=t.getCopyText(),f=t.session.getUndoManager().hasUndo(),void _.replaceChild(l.buildDom(n?["span",!a&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],a&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],a&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],e&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],f&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),_.firstChild);"paste"==d?e.readText().then((function(e){t.execCommand(d,e)})):d&&("cut"!=d&&"copy"!=d||(e?e.writeText(t.getCopyText()):document.execCommand("copy")),t.execCommand(d)),_.firstChild.style.display="none",n=!1,"openCommandPallete"!=d&&t.focus()};_=l.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(e){S="menu",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),r(e)},onclick:r},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],t.container)}function T(){_||j();var e=t.selection.cursor,n=t.renderer.textToScreenCoordinates(e.row,e.column),r=t.renderer.textToScreenCoordinates(0,0).pageX,a=t.renderer.scrollLeft,l=t.container.getBoundingClientRect();_.style.top=n.pageY-l.top-3+"px",n.pageX-l.left<l.width-70?(_.style.left="",_.style.right="10px"):(_.style.right="",_.style.left=r+a-l.left+"px"),_.style.display="",_.firstChild.style.display="none",t.on("input",A)}function A(e){_&&(_.style.display="none"),t.off("input",A)}function P(){p=null,clearTimeout(p);var e=t.selection.getRange(),n=e.contains(w.row,w.column);!e.isEmpty()&&n||(t.selection.moveToPosition(w),t.selection.selectWord()),S="wait",T()}a.addListener(e,"contextmenu",(function(e){x&&t.textInput.getElement().focus()}),t),a.addListener(e,"touchstart",(function(e){var a=e.touches;if(p||a.length>1)return clearTimeout(p),p=null,d=-1,void(S="zoom");x=t.$mouseHandler.isMousePressed=!0;var l=t.renderer.layerConfig.lineHeight,y=t.renderer.layerConfig.lineHeight,_=e.timeStamp;h=_;var j=a[0],T=j.clientX,A=j.clientY;Math.abs(n-T)+Math.abs(f-A)>l&&(d=-1),n=e.clientX=T,f=e.clientY=A,E=O=0;var D=new r(e,t);if(w=D.getDocumentPosition(),_-d<500&&1==a.length&&!k)C++,e.preventDefault(),e.button=0,function(){p=null,clearTimeout(p),t.selection.moveToPosition(w);var e=C>=2?t.selection.getLineRange(w.row):t.session.getBracketRange(w);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),S="wait"}();else{C=0;var R=t.selection.cursor,I=t.selection.isEmpty()?R:t.selection.anchor,M=t.renderer.$cursorLayer.getPixelPosition(R,!0),L=t.renderer.$cursorLayer.getPixelPosition(I,!0),N=t.renderer.scroller.getBoundingClientRect(),F=t.renderer.layerConfig.offset,q=t.renderer.scrollLeft,B=function(e,t){return(e/=y)*e+(t=t/l-.75)*t};if(e.clientX<N.left)return void(S="zoom");var U=B(e.clientX-N.left-M.left+q,e.clientY-N.top-M.top+F),H=B(e.clientX-N.left-L.left+q,e.clientY-N.top-L.top+F);U<3.5&&H<3.5&&(S=U>H?"cursor":"anchor"),S=H<3.5?"anchor":U<3.5?"cursor":"scroll",p=setTimeout(P,450)}d=_}),t),a.addListener(e,"touchend",(function(e){x=t.$mouseHandler.isMousePressed=!1,y&&clearInterval(y),"zoom"==S?(S="",k=0):p?(t.selection.moveToPosition(w),k=0,T()):"scroll"==S?(k+=60,y=setInterval((function(){k--<=0&&(clearInterval(y),y=null),Math.abs(E)<.01&&(E=0),Math.abs(O)<.01&&(O=0),k<20&&(E*=.9),k<20&&(O*=.9);var e=t.session.getScrollTop();t.renderer.scrollBy(10*E,10*O),e==t.session.getScrollTop()&&(k=0)}),10),A()):T(),clearTimeout(p),p=null}),t),a.addListener(e,"touchmove",(function(e){p&&(clearTimeout(p),p=null);var a=e.touches;if(!(a.length>1||"zoom"==S)){var l=a[0],d=n-l.clientX,y=f-l.clientY;if("wait"==S){if(!(d*d+y*y>4))return e.preventDefault();S="cursor"}n=l.clientX,f=l.clientY,e.clientX=l.clientX,e.clientY=l.clientY;var w=e.timeStamp,x=w-h;if(h=w,"scroll"==S){var _=new r(e,t);_.speed=1,_.wheelX=d,_.wheelY=y,10*Math.abs(d)<Math.abs(y)&&(d=0),10*Math.abs(y)<Math.abs(d)&&(y=0),0!=x&&(E=d/x,O=y/x),t._emit("mousewheel",_),_.propagationStopped||(E=O=0)}else{var k=new r(e,t).getDocumentPosition();"cursor"==S?t.selection.moveCursorToPosition(k):"anchor"==S&&t.selection.setSelectionAnchor(k.row,k.column),t.renderer.scrollCursorIntoView(k),e.preventDefault()}}}),t)}})),ace.define("ace/lib/net",[],(function(e,t,n){"use strict";var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),a=document.createElement("script");a.src=e,n.appendChild(a),a.onload=a.onreadystatechange=function(e,n){!n&&a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(a=a.onload=a.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}})),ace.define("ace/lib/event_emitter",[],(function(e,t,n){"use strict";var r={},a=function(){this.propagationStopped=!0},l=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(n.length||r){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=a),t.preventDefault||(t.preventDefault=l),n=n.slice();for(var f=0;f<n.length&&(n[f](t,this),!t.propagationStopped);f++);return r&&!t.defaultPrevented?r(t,this):void 0}},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)}},r.once=function(e,t){var n=this;if(this.on(e,(function r(){n.off(e,r),t.apply(null,arguments)})),!t)return new Promise((function(e){t=e}))},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var r=n[e],a=n._disabled_[e];a||(n._disabled_[e]=a=[]),a.push(r);var l=a.indexOf(t);-1!=l&&a.splice(l,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var r=n._disabled_[e];if(n[e]==t)r&&this.setDefaultHandler(e,r.pop());else if(r){var a=r.indexOf(t);-1!=a&&r.splice(a,1)}}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),-1==r.indexOf(t)&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}},r.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[e]=void 0),this._defaultHandlers&&(this._defaultHandlers[e]=void 0)},t.EventEmitter=r})),ace.define("ace/lib/app_config",[],(function(e,t,n){var r=e("./oop"),a=e("./event_emitter").EventEmitter,l={setOptions:function(e){Object.keys(e).forEach((function(t){this.setOption(t,e[t])}),this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var n=this.$options;e=Object.keys(n).filter((function(e){return!n[e].hidden}))}return e.forEach((function(e){t[e]=this.getOption(e)}),this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return f('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:f('misspelled option "'+e+'"')}};function f(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function reportError(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}var d=function(){this.$defaultOptions={}};(function(){r.implement(this,a),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach((function(t){var r=n[t];"string"==typeof r&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)})),r.implement(e,l),this},this.resetOptions=function(e){Object.keys(e.$options).forEach((function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)}))},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,n):r[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach((function(n){this.setDefaultValue(e,n,t[n])}),this)},this.warn=f,this.reportError=reportError}).call(d.prototype),t.AppConfig=d})),ace.define("ace/config",[],(function(e,t,r){var a=e("./lib/lang"),l=(e("./lib/oop"),e("./lib/net")),f=e("./lib/app_config").AppConfig;r.exports=t=new f;var d=function(){return this||"undefined"!=typeof window&&window}(),h={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};t.get=function(e){if(!h.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return h[e]},t.set=function(e,t){if(h.hasOwnProperty(e))h[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e)},t.all=function(){return a.copyObject(h)},t.$modes={},t.moduleUrl=function(e,t){if(h.$moduleUrls[e])return h.$moduleUrls[e];var n=e.split("/"),r="snippets"==(t=t||n[n.length-2]||"")?"/":"-",a=n[n.length-1];if("worker"==t&&"-"==r){var l=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");a=a.replace(l,"")}(!a||a==t)&&n.length>1&&(a=n[n.length-2]);var f=h[t+"Path"];return null==f?f=h.basePath:"/"==r&&(t=r=""),f&&"/"!=f.slice(-1)&&(f+="/"),f+t+r+a+this.get("suffix")},t.setModuleUrl=function(e,t){return h.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var a,f;Array.isArray(n)&&(f=n[0],n=n[1]);try{a=e(n)}catch(e){}if(a&&!t.$loading[n])return r&&r(a);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r),!(t.$loading[n].length>1)){var d=function(){e([n],(function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach((function(t){t&&t(e)}))}))};if(!t.get("packaged"))return d();l.loadScript(t.moduleUrl(n,f),d),p()}};var p=function(){h.basePath||h.workerPath||h.modePath||h.themePath||Object.keys(h.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),p=function(){})};function y(a){if(d&&d.document){h.packaged=a||e.packaged||r.packaged||d.define&&n.amdD.packaged;for(var l,f={},p="",y=document.currentScript||document._currentScript,w=(y&&y.ownerDocument||document).getElementsByTagName("script"),x=0;x<w.length;x++){var _=w[x],S=_.src||_.getAttribute("src");if(S){for(var k=_.attributes,C=0,E=k.length;C<E;C++){var O=k[C];0===O.name.indexOf("data-ace-")&&(f[(l=O.name.replace(/^data-ace-/,""),l.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=O.value)}var j=S.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);j&&(p=j[1])}}for(var T in p&&(f.base=f.base||p,f.packaged=!0),f.basePath=f.base,f.workerPath=f.workerPath||f.base,f.modePath=f.modePath||f.base,f.themePath=f.themePath||f.base,delete f.base,f)void 0!==f[T]&&t.set(T,f[T])}}y(!0),t.init=y,t.version="1.4.12"})),ace.define("ace/mouse/mouse_handler",[],(function(e,t,n){"use strict";var r=e("../lib/event"),a=e("../lib/useragent"),l=e("./default_handlers").DefaultHandlers,f=e("./default_gutter_handler").GutterHandler,d=e("./mouse_event").MouseEvent,h=e("./dragdrop_handler").DragdropHandler,p=e("./touch_handler").addTouchListeners,y=e("../config"),w=function(e){var t=this;this.editor=e,new l(this),new f(this),new h(this);var n=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus()},d=e.renderer.getMouseEventTarget();r.addListener(d,"click",this.onMouseEvent.bind(this,"click"),e),r.addListener(d,"mousemove",this.onMouseMove.bind(this,"mousemove"),e),r.addMultiMouseDownListener([d,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",e),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"),e),p(e.container,e);var y=e.renderer.$gutter;r.addListener(y,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),e),r.addListener(y,"click",this.onMouseEvent.bind(this,"gutterclick"),e),r.addListener(y,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),e),r.addListener(y,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),e),r.addListener(d,"mousedown",n,e),r.addListener(y,"mousedown",n,e),a.isIE&&e.renderer.scrollBarV&&(r.addListener(e.renderer.scrollBarV.element,"mousedown",n,e),r.addListener(e.renderer.scrollBarH.element,"mousedown",n,e)),e.on("mousemove",(function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var r=e.renderer.screenToTextCoordinates(n.x,n.y),a=e.session.selection.getRange(),l=e.renderer;!a.isEmpty()&&a.insideStart(r.row,r.column)?l.setCursorStyle("default"):l.setCursorStyle("")}}),e)};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new d(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new d(t,this.editor))},this.onMouseWheel=function(e,t){var n=new d(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,l=this.editor.renderer;l.$isMousePressed=!0;var f=this,h=function(e){if(e){if(a.isWebKit&&!e.which&&f.releaseMouse)return f.releaseMouse();f.x=e.clientX,f.y=e.clientY,t&&t(e),f.mouseEvent=new d(e,f.editor),f.$mouseMoved=!0}},p=function(e){n.off("beforeEndOperation",w),clearInterval(x),y(),f[f.state+"End"]&&f[f.state+"End"](e),f.state="",f.isMousePressed=l.$isMousePressed=!1,l.$keepTextAreaAtCursor&&l.$moveTextAreaToCursor(),f.$onCaptureMouseMove=f.releaseMouse=null,e&&f.onMouseEvent("mouseup",e),n.endOperation()},y=function(){f[f.state]&&f[f.state](),f.$mouseMoved=!1};if(a.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout((function(){p(e)}));var w=function(e){f.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(f[f.state+"End"]&&f[f.state+"End"](),f.state="",f.releaseMouse())};n.on("beforeEndOperation",w),n.startOperation({command:{name:"mouse"}}),f.$onCaptureMouseMove=h,f.releaseMouse=r.capture(this.editor.container,h,p);var x=setInterval(y,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&r.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(w.prototype),y.defineOptions(w.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:a.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=w})),ace.define("ace/mouse/fold_handler",[],(function(e,t,n){"use strict";var r=e("../lib/dom");t.FoldHandler=function(e){e.on("click",(function(t){var n=t.getDocumentPosition(),a=e.session,l=a.getFoldAt(n.row,n.column,1);l&&(t.getAccelKey()?a.removeFold(l):a.expandFold(l),t.stop());var f=t.domEvent&&t.domEvent.target;f&&r.hasCssClass(f,"ace_inline_button")&&r.hasCssClass(f,"ace_toggle_wrap")&&(a.setOption("wrap",!a.getUseWrapMode()),e.renderer.scrollCursorIntoView())})),e.on("gutterclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,r=e.session;r.foldWidgets&&r.foldWidgets[n]&&e.session.onFoldWidgetClick(n,t),e.isFocused()||e.focus(),t.stop()}})),e.on("gutterdblclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,r=e.session,a=r.getParentFoldRangeData(n,!0),l=a.range||a.firstRange;if(l){n=l.start.row;var f=r.getFoldAt(n,r.getLine(n).length,1);f?r.removeFold(f):(r.addFold("...",l),e.renderer.scrollCursorIntoView({row:l.start.row,column:0}))}t.stop()}}))}})),ace.define("ace/keyboard/keybinding",[],(function(e,t,n){"use strict";var r=e("../lib/keys"),a=e("../lib/event"),l=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),null==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(t,e)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,r){for(var l,f=!1,d=this.$editor.commands,h=this.$handlers.length;h--&&!((l=this.$handlers[h].handleKeyboard(this.$data,e,t,n,r))&&l.command&&((f="null"==l.command||d.exec(l.command,this.$editor,l.args,r))&&r&&-1!=e&&1!=l.passEvent&&1!=l.command.passEvent&&a.stopEvent(r),f)););return f||-1!=e||(l={command:"insertstring"},f=d.exec("insertstring",this.$editor,t)),f&&this.$editor._signal&&this.$editor._signal("keyboardActivity",l),f},this.onCommandKey=function(e,t,n){var a=r.keyCodeToString(n);return this.$callKeyboardHandlers(t,a,n,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(l.prototype),t.KeyBinding=l})),ace.define("ace/lib/bidiutil",[],(function(e,t,n){"use strict";var r=0,a=0,l=!1,f=!1,d=!1,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y=0,w=1,x=2,_=3,S=4,k=5,C=6,E=7,O=8,j=9,T=10,A=11,P=12,D=13,R=14,I=15,M=16,L=17,N=18,F=[N,N,N,N,N,N,N,N,N,C,k,C,O,k,N,N,N,N,N,N,N,N,N,N,N,N,N,N,k,k,k,C,O,S,S,A,A,A,S,S,S,S,S,T,j,T,j,j,x,x,x,x,x,x,x,x,x,x,j,S,S,S,S,S,S,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,S,S,S,S,S,S,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,S,S,S,S,N,N,N,N,N,N,k,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,j,S,A,A,A,A,S,S,S,S,y,S,S,N,S,S,A,A,x,x,S,y,S,S,S,x,y,S,S,S,S,S],q=[O,O,O,O,O,O,O,O,O,O,O,N,N,N,y,w,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,O,k,D,R,I,M,L,j,A,A,A,A,A,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,j,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,O];function B(e,t,n){if(!(a<e))if(1!=e||1!=r||f)for(var l,d,h,p,y=n.length,w=0;w<y;){if(t[w]>=e){for(l=w+1;l<y&&t[l]>=e;)l++;for(d=w,h=l-1;d<h;d++,h--)p=n[d],n[d]=n[h],n[h]=p;w=l}w++}else n.reverse()}function U(e,t,n,a){var h,p,F,q,B=t[a];switch(B){case y:case w:l=!1;case S:case _:return B;case x:return l?_:x;case E:return l=!0,!0,w;case O:return S;case j:return a<1||a+1>=t.length||(h=n[a-1])!=x&&h!=_||(p=t[a+1])!=x&&p!=_?S:(l&&(p=_),p==h?p:S);case T:return(h=a>0?n[a-1]:k)==x&&a+1<t.length&&t[a+1]==x?x:S;case A:if(a>0&&n[a-1]==x)return x;if(l)return S;for(q=a+1,F=t.length;q<F&&t[q]==A;)q++;return q<F&&t[q]==x?x:S;case P:for(F=t.length,q=a+1;q<F&&t[q]==P;)q++;if(q<F){var U=e[a],H=U>=1425&&U<=2303||64286==U;if(h=t[q],H&&(h==w||h==E))return w}return a<1||(h=t[a-1])==k?S:n[a-1];case k:return l=!1,f=!0,r;case C:return d=!0,S;case D:case R:case M:case L:case I:l=!1;case N:return S}}function H(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?t>191?y:F[t]:5==n?/[\u0591-\u05f4]/.test(e)?w:y:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?P:/[\u0660-\u0669\u066b-\u066c]/.test(e)?_:1642==t?A:/[\u06f0-\u06f9]/.test(e)?x:E:32==n&&t<=8287?q[255&t]:254==n&&t>=65136?E:S}t.L=y,t.R=w,t.EN=x,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="·",t.doBidiReorder=function(e,n,y){if(e.length<2)return{};var x=e.split(""),j=new Array(x.length),T=new Array(x.length),A=[];r=y?1:0,function(e,t,n,y){var w=r?p:h,x=null,_=null,S=null,E=0,j=null,T=-1,A=null,P=null,D=[];if(!y)for(A=0,y=[];A<n;A++)y[A]=H(e[A]);for(a=r,l=!1,!1,f=!1,d=!1,P=0;P<n;P++){if(x=E,D[P]=_=U(e,y,D,P),j=240&(E=w[x][_]),E&=15,t[P]=S=w[E][5],j>0)if(16==j){for(A=T;A<P;A++)t[A]=1;T=-1}else T=-1;if(w[E][6])-1==T&&(T=P);else if(T>-1){for(A=T;A<P;A++)t[A]=S;T=-1}y[P]==k&&(t[P]=0),a|=S}if(d)for(A=0;A<n;A++)if(y[A]==C){t[A]=r;for(var R=A-1;R>=0&&y[R]==O;R--)t[R]=r}}(x,A,x.length,n);for(var P=0;P<j.length;j[P]=P,P++);B(2,A,j),B(1,A,j);for(P=0;P<j.length-1;P++)n[P]===_?A[P]=t.AN:A[P]===w&&(n[P]>E&&n[P]<D||n[P]===S||n[P]===N)?A[P]=t.ON_R:P>0&&"ل"===x[P-1]&&/\u0622|\u0623|\u0625|\u0627/.test(x[P])&&(A[P-1]=A[P]=t.R_H,P++);x[x.length-1]===t.DOT&&(A[x.length-1]=t.B),"‫"===x[0]&&(A[0]=t.RLE);for(P=0;P<j.length;P++)T[P]=A[j[P]];return{logicalFromVisual:j,bidiLevels:T}},t.hasBidiCharacters=function(e,t){for(var n=!1,r=0;r<e.length;r++)t[r]=H(e.charAt(r)),n||t[r]!=w&&t[r]!=E&&t[r]!=_||(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}})),ace.define("ace/bidihandler",[],(function(e,t,n){"use strict";var r=e("./lib/bidiutil"),a=e("./lib/lang"),l=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,f=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=l.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&l.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,r=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===r;)r=n,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var l=this.session.$wrapData[e];l&&(void 0===t&&(t=this.getSplitIndex()),t>0&&l.length?(this.wrapIndent=l.indent,this.wrapOffset=this.wrapIndent*this.charWidths[r.L],this.line=t<l.length?this.line.substring(l[t-1],l[t]):this.line.substring(l[l.length-1])):this.line=this.line.substring(0,l[t])),t==l.length&&(this.line+=this.showInvisibles?n:r.DOT)}else this.line+=this.showInvisibles?n:r.DOT;var f,d=this.session,h=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(e,t){return"\t"===e||d.isFullWidth(e.charCodeAt(0))?(f="\t"===e?d.getScreenTabSize(t+h):2,h+=f-1,a.stringRepeat(r.DOT,f)):e})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==r.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];r.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=r.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("ה");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=t,this.charWidths[r.R]=this.charWidths[r.AN]=n,this.charWidths[r.R_H]=.45*n,this.charWidths[r.B]=this.charWidths[r.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(null!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var n=e.getCursorPosition(),r=e.selection.getSelectionAnchor().row;r<=n.row;r++)t||e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:r},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(r,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,a=r.getVisualFromLogicalIdx(n,this.bidiMap),l=this.bidiMap.bidiLevels,f=0;!this.session.getOverwrite()&&e<=t&&l[a]%2!=0&&a++;for(var d=0;d<a;d++)f+=this.charWidths[l[d]];return!this.session.getOverwrite()&&e>t&&l[a]%2==0&&(f+=this.charWidths[l[a]]),this.wrapIndent&&(f+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(f+=this.rtlLineOffset),f},this.getSelections=function(e,t){var n,r=this.bidiMap,a=r.bidiLevels,l=[],f=0,d=Math.min(e,t)-this.wrapIndent,h=Math.max(e,t)-this.wrapIndent,p=!1,y=!1,w=0;this.wrapIndent&&(f+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var x,_=0;_<a.length;_++)x=r.logicalFromVisual[_],n=a[_],(p=x>=d&&x<h)&&!y?w=f:!p&&y&&l.push({left:w,width:f-w}),f+=this.charWidths[n],y=p;if(p&&_===a.length&&l.push({left:w,width:f-w}),this.isRtlDir)for(var S=0;S<l.length;S++)l[S].left+=this.rtlLineOffset;return l},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,n=(e=Math.max(e,0),0),r=0,a=this.bidiMap.bidiLevels,l=this.charWidths[a[r]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);e>n+l/2;){if(n+=l,r===a.length-1){l=0;break}l=this.charWidths[a[++r]]}return r>0&&a[r-1]%2!=0&&a[r]%2==0?(e<n&&r--,t=this.bidiMap.logicalFromVisual[r]):r>0&&a[r-1]%2==0&&a[r]%2!=0?t=1+(e>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===a.length-1&&0===l&&a[r-1]%2==0||!this.isRtlDir&&0===r&&a[r]%2!=0?t=1+this.bidiMap.logicalFromVisual[r]:(r>0&&a[r-1]%2!=0&&0!==l&&r--,t=this.bidiMap.logicalFromVisual[r]),0===t&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(f.prototype),t.BidiHandler=f})),ace.define("ace/selection",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/lang"),l=e("./lib/event_emitter").EventEmitter,f=e("./range").Range,d=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",(function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)})),this.anchor.on("change",(function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")}))};(function(){r.implement(this,l),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?f.fromPoints(t,t):this.isBackwards()?f.fromPoints(t,e):f.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,r=t?e.start:e.end;this.$setSelection(n.row,n.column,r.row,r.column)},this.$setSelection=function(e,t,n,r){if(!this.$silent){var a=this.$isEmpty,l=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,r),this.$isEmpty=!f.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||a!=this.$isEmpty||l)&&this._emit("changeSelection")}},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection((function(){this.moveCursorTo(e,t)}))},this.selectToPosition=function(e){this.$moveSelection((function(){this.moveCursorToPosition(e)}))},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(void 0===t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n,r="number"==typeof e?e:this.lead.row,a=this.session.getFoldLine(r);return a?(r=a.start.row,n=a.end.row):n=r,!0===t?new f(r,0,n,this.session.getLine(n).length):new f(r,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var r=e.column,a=e.column+t;return n<0&&(r=e.column-t,a=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(r,a).split(" ").length-1==t},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();t=this.lead;this.wouldMoveIntoSoftTab(t,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),a=this.session.getDisplayLine(e,null,r.row,r.column).match(/^\s*/);a[0].length==t||this.session.$useEmacsStyleLineStart||(r.column+=a[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var a=this.session.getFoldAt(e,t,1);if(a)this.moveCursorTo(a.end.row,a.end.column);else{if(this.session.nonTokenRe.exec(r)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t)),t>=n.length)return this.moveCursorTo(e,n.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(r)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))this.moveCursorTo(e.start.row,e.start.column);else{var r=this.session.getFoldStringAt(t,n,-1);null==r&&(r=this.doc.getLine(t).substring(0,n));var l=a.stringReverse(r);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(l)&&(n-=this.session.nonTokenRe.lastIndex,l=l.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(l)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n)}},this.$shortWordEndIndex=function(e){var t,n=0,r=/\s/,a=this.session.tokenRe;if(a.lastIndex=0,this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(t=e[n])&&r.test(t);)n++;if(n<1)for(a.lastIndex=0;(t=e[n])&&!a.test(t);)if(a.lastIndex=0,n++,r.test(t)){if(n>2){n--;break}for(;(t=e[n])&&r.test(t);)n++;if(n>2)break}}return a.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),a=this.session.getFoldAt(e,t,1);if(a)return this.moveCursorTo(a.end.row,a.end.column);if(t==n.length){var l=this.doc.getLength();do{e++,r=this.doc.getLine(e)}while(e<l&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var f=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+f)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var r=this.session.getLine(t).substring(0,n);if(0===n){do{t--,r=this.doc.getLine(t)}while(t>0&&/^\s*$/.test(r));n=r.length,/\s+$/.test(r)||(r="")}var l=a.stringReverse(r),f=this.$shortWordEndIndex(l);return this.moveCursorTo(t,n-f)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n,r=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(r.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(r.column),r.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=r.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?r.column=this.$desiredColumn:this.$desiredColumn=r.column),0!=e&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var a=this.session.lineWidgets[this.lead.row];e<0?e-=a.rowsAbove||0:e>0&&(e+=a.rowCount-(a.rowsAbove||0))}var l=this.session.screenToDocumentPosition(r.row+e,r.column,n);0!==e&&0===t&&l.row===this.lead.row&&(l.column,this.lead.column),this.moveCursorTo(l.row,l.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0;var a=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(a.charAt(t))&&a.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return f.fromPoints(t,n)}catch(e){return f.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map((function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}));else(e=this.getRange()).isBackwards=this.isBackwards();return e},this.fromJSON=function(e){if(null==e.start){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=f.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(d.prototype),t.Selection=d})),ace.define("ace/tokenizer",[],(function(e,t,n){"use strict";var r=e("./config"),a=2e3,l=function(e){for(var t in this.states=e,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[t],r=[],a=0,l=this.matchMappings[t]={defaultToken:"text"},f="g",d=[],h=0;h<n.length;h++){var p=n[h];if(p.defaultToken&&(l.defaultToken=p.defaultToken),p.caseInsensitive&&(f="gi"),null!=p.regex){p.regex instanceof RegExp&&(p.regex=p.regex.toString().slice(1,-1));var y=p.regex,w=new RegExp("(?:("+y+")|(.))").exec("a").length-2;Array.isArray(p.token)?1==p.token.length||1==w?p.token=p.token[0]:w-1!=p.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:p,groupCount:w-1}),p.token=p.token[0]):(p.tokenArray=p.token,p.token=null,p.onMatch=this.$arrayTokens):"function"!=typeof p.token||p.onMatch||(p.onMatch=w>1?this.$applyToken:p.token),w>1&&(/\\\d/.test(p.regex)?y=p.regex.replace(/\\([0-9]+)/g,(function(e,t){return"\\"+(parseInt(t,10)+a+1)})):(w=1,y=this.removeCapturingGroups(p.regex)),p.splitRegex||"string"==typeof p.token||d.push(p)),l[a]=h,a+=w,r.push(y),p.onMatch||(p.onMatch=null)}}r.length||(l[0]=0,r.push("$")),d.forEach((function(e){e.splitRegex=this.createSplitterRegexp(e.regex,f)}),this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",f)}};(function(){this.$setMaxTokenCount=function(e){a=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"==typeof n)return[{type:n,value:e}];for(var r=[],a=0,l=n.length;a<l;a++)t[a]&&(r[r.length]={type:n[a],value:t[a]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],r=this.tokenArray,a=0,l=r.length;a<l;a++)t[a+1]&&(n[n.length]={type:r[a],value:t[a+1]});return n},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(e,t){return t?"(?:":e}))},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,r=!1,a={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(e,t,l,f,d,h){return r?r="]"!=d:d?r=!0:f?(n==a.stack&&(a.end=h+1,a.stack=-1),n--):l&&(n++,1!=l.length&&(a.stack=n,a.start=h)),e})),null!=a.end&&/^\)*$/.test(e.substr(a.end))&&(e=e.substring(0,a.start)+e.substr(a.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);"#tmp"===(t=n[0])&&(n.shift(),t=n.shift())}else n=[];var r=t||"start",l=this.states[r];l||(r="start",l=this.states[r]);var f=this.matchMappings[r],d=this.regExps[r];d.lastIndex=0;for(var h,p=[],y=0,w=0,x={type:null,value:""};h=d.exec(e);){var _=f.defaultToken,S=null,k=h[0],C=d.lastIndex;if(C-k.length>y){var E=e.substring(y,C-k.length);x.type==_?x.value+=E:(x.type&&p.push(x),x={type:_,value:E})}for(var O=0;O<h.length-2;O++)if(void 0!==h[O+1]){_=(S=l[f[O]]).onMatch?S.onMatch(k,r,n,e):S.token,S.next&&(r="string"==typeof S.next?S.next:S.next(r,n),(l=this.states[r])||(this.reportError("state doesn't exist",r),r="start",l=this.states[r]),f=this.matchMappings[r],y=C,(d=this.regExps[r]).lastIndex=C),S.consumeLineEnd&&(y=C);break}if(k)if("string"==typeof _)S&&!1===S.merge||x.type!==_?(x.type&&p.push(x),x={type:_,value:k}):x.value+=k;else if(_){x.type&&p.push(x),x={type:null,value:""};for(O=0;O<_.length;O++)p.push(_[O])}if(y==e.length)break;if(y=C,w++>a){for(w>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});y<e.length;)x.type&&p.push(x),x={value:e.substring(y,y+=500),type:"overflow"};r="start",n=[];break}}return x.type&&p.push(x),n.length>1&&n[0]!==r&&n.unshift("#tmp",r),{tokens:p,state:n.length?n:r}},this.reportError=r.reportError}).call(l.prototype),t.Tokenizer=l})),ace.define("ace/mode/text_highlight_rules",[],(function(e,t,n){"use strict";var r=e("../lib/lang"),a=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var r=e[n],a=0;a<r.length;a++){var l=r[a];(l.next||l.onMatch)&&("string"==typeof l.next&&0!==l.next.indexOf(t)&&(l.next=t+l.next),l.nextState&&0!==l.nextState.indexOf(t)&&(l.nextState=t+l.nextState))}this.$rules[t+n]=r}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,a,l){var f="function"==typeof e?(new e).getRules():e;if(a)for(var d=0;d<a.length;d++)a[d]=t+a[d];else for(var h in a=[],f)a.push(t+h);if(this.addRules(f,t),n){var p=Array.prototype[l?"push":"unshift"];for(d=0;d<a.length;d++)p.apply(this.$rules[a[d]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var n=0,r=this.$rules;Object.keys(r).forEach((function a(l){var f=r[l];f.processed=!0;for(var d=0;d<f.length;d++){var h=f[d],p=null;Array.isArray(h)&&(p=h,h={}),!h.regex&&h.start&&(h.regex=h.start,h.next||(h.next=[]),h.next.push({defaultToken:h.token},{token:h.token+".end",regex:h.end||h.start,next:"pop"}),h.token=h.token+".start",h.push=!0);var y=h.next||h.push;if(y&&Array.isArray(y)){var w=h.stateName;w||("string"!=typeof(w=h.token)&&(w=w[0]||""),r[w]&&(w+=n++)),r[w]=y,h.next=w,a(w)}else"pop"==y&&(h.next=t);if(h.push&&(h.nextState=h.next||h.push,h.next=e,delete h.push),h.rules)for(var x in h.rules)r[x]?r[x].push&&r[x].push.apply(r[x],h.rules[x]):r[x]=h.rules[x];var _="string"==typeof h?h:h.include;if(_&&(p=Array.isArray(_)?_.map((function(e){return r[e]})):r[_]),p){var S=[d,1].concat(p);h.noEscape&&(S=S.filter((function(e){return!e.next}))),f.splice.apply(f,S),d--}h.keywordMap&&(h.token=this.createKeywordMapper(h.keywordMap,h.defaultToken||"text",h.caseInsensitive),delete h.defaultToken)}}),this)},this.createKeywordMapper=function(e,t,n,r){var a=Object.create(null);return this.$keywordList=[],Object.keys(e).forEach((function(t){for(var l=e[t].split(r||"|"),f=l.length;f--;){var d=l[f];this.$keywordList.push(d),n&&(d=d.toLowerCase()),a[d]=t}}),this),e=null,n?function(e){return a[e.toLowerCase()]||t}:function(e){return a[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(a.prototype),t.TextHighlightRules=a})),ace.define("ace/mode/behaviour",[],(function(e,t,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var n=(new e).getBehaviours(t);else n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(e){for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}return this.$behaviours}}).call(r.prototype),t.Behaviour=r})),ace.define("ace/token_iterator",[],(function(e,t,n){"use strict";var r=e("./range").Range,a=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)n+=e[t-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new r(this.$row,t,this.$row,t+e.value.length)}}).call(a.prototype),t.TokenIterator=a})),ace.define("ace/mode/behaviour/cstyle",[],(function(e,t,n){"use strict";var r,a=e("../../lib/oop"),l=e("../behaviour").Behaviour,f=e("../../token_iterator").TokenIterator,d=e("../../lib/lang"),h=["text","paren.rparen","rparen","paren","punctuation.operator"],p=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],y={},w={'"':'"',"'":"'"},x=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,y.rangeCount!=e.multiSelect.rangeCount&&(y={rangeCount:e.multiSelect.rangeCount})),y[t])return r=y[t];r=y[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},_=function(e,t,n,r){var a=e.end.row-e.start.row;return{text:n+t+r,selection:[0,e.start.column+1,a,e.end.column+(a?0:1)]}},S=function(e){this.add("braces","insertion",(function(t,n,a,l,f){var h=a.getCursorPosition(),p=l.doc.getLine(h.row);if("{"==f){x(a);var y=a.getSelectionRange(),w=l.doc.getTextRange(y);if(""!==w&&"{"!==w&&a.getWrapBehavioursEnabled())return _(y,w,"{","}");if(S.isSaneInsertion(a,l))return/[\]\}\)]/.test(p[h.column])||a.inMultiSelectMode||e&&e.braces?(S.recordAutoInsert(a,l,"}"),{text:"{}",selection:[1,1]}):(S.recordMaybeInsert(a,l,"{"),{text:"{",selection:[1,1]})}else if("}"==f){if(x(a),"}"==p.substring(h.column,h.column+1))if(null!==l.$findOpeningBracket("}",{column:h.column+1,row:h.row})&&S.isAutoInsertedClosing(h,p,f))return S.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==f||"\r\n"==f){x(a);var k="";if(S.isMaybeInsertedClosing(h,p)&&(k=d.stringRepeat("}",r.maybeInsertedBrackets),S.clearMaybeInsertedClosing()),"}"===p.substring(h.column,h.column+1)){var C=l.findMatchingBracket({row:h.row,column:h.column+1},"}");if(!C)return null;var E=this.$getIndent(l.getLine(C.row))}else{if(!k)return void S.clearMaybeInsertedClosing();E=this.$getIndent(p)}var O=E+l.getTabString();return{text:"\n"+O+"\n"+E+k,selection:[1,O.length,1,O.length]}}S.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(e,t,n,a,l){var f=a.doc.getTextRange(l);if(!l.isMultiLine()&&"{"==f){if(x(n),"}"==a.doc.getLine(l.start.row).substring(l.end.column,l.end.column+1))return l.end.column++,l;r.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,t,n,r,a){if("("==a){x(n);var l=n.getSelectionRange(),f=r.doc.getTextRange(l);if(""!==f&&n.getWrapBehavioursEnabled())return _(l,f,"(",")");if(S.isSaneInsertion(n,r))return S.recordAutoInsert(n,r,")"),{text:"()",selection:[1,1]}}else if(")"==a){x(n);var d=n.getCursorPosition(),h=r.doc.getLine(d.row);if(")"==h.substring(d.column,d.column+1))if(null!==r.$findOpeningBracket(")",{column:d.column+1,row:d.row})&&S.isAutoInsertedClosing(d,h,a))return S.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(e,t,n,r,a){var l=r.doc.getTextRange(a);if(!a.isMultiLine()&&"("==l&&(x(n),")"==r.doc.getLine(a.start.row).substring(a.start.column+1,a.start.column+2)))return a.end.column++,a})),this.add("brackets","insertion",(function(e,t,n,r,a){if("["==a){x(n);var l=n.getSelectionRange(),f=r.doc.getTextRange(l);if(""!==f&&n.getWrapBehavioursEnabled())return _(l,f,"[","]");if(S.isSaneInsertion(n,r))return S.recordAutoInsert(n,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==a){x(n);var d=n.getCursorPosition(),h=r.doc.getLine(d.row);if("]"==h.substring(d.column,d.column+1))if(null!==r.$findOpeningBracket("]",{column:d.column+1,row:d.row})&&S.isAutoInsertedClosing(d,h,a))return S.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(e,t,n,r,a){var l=r.doc.getTextRange(a);if(!a.isMultiLine()&&"["==l&&(x(n),"]"==r.doc.getLine(a.start.row).substring(a.start.column+1,a.start.column+2)))return a.end.column++,a})),this.add("string_dquotes","insertion",(function(e,t,n,r,a){var l=r.$mode.$quotes||w;if(1==a.length&&l[a]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(a))return;x(n);var f=a,d=n.getSelectionRange(),h=r.doc.getTextRange(d);if(!(""===h||1==h.length&&l[h])&&n.getWrapBehavioursEnabled())return _(d,h,f,f);if(!h){var p=n.getCursorPosition(),y=r.doc.getLine(p.row),S=y.substring(p.column-1,p.column),k=y.substring(p.column,p.column+1),C=r.getTokenAt(p.row,p.column),E=r.getTokenAt(p.row,p.column+1);if("\\"==S&&C&&/escape/.test(C.type))return null;var O,j=C&&/string|escape/.test(C.type),T=!E||/string|escape/.test(E.type);if(k==f)(O=j!==T)&&/string\.end/.test(E.type)&&(O=!1);else{if(j&&!T)return null;if(j&&T)return null;var A=r.$mode.tokenRe;A.lastIndex=0;var P=A.test(S);A.lastIndex=0;var D=A.test(S);if(P||D)return null;if(k&&!/[\s;,.})\]\\]/.test(k))return null;var R=y[p.column-2];if(S==f&&(R==f||A.test(R)))return null;O=!0}return{text:O?f+f:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(e,t,n,r,a){var l=r.$mode.$quotes||w,f=r.doc.getTextRange(a);if(!a.isMultiLine()&&l.hasOwnProperty(f)&&(x(n),r.doc.getLine(a.start.row).substring(a.start.column+1,a.start.column+2)==f))return a.end.column++,a}))};S.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new f(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",h)){if(/[)}\]]/.test(e.session.getLine(n.row)[n.column]))return!0;var a=new f(t,n.row,n.column+1);if(!this.$matchTokenType(a.getCurrentToken()||"text",h))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",p)},S.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},S.recordAutoInsert=function(e,t,n){var a=e.getCursorPosition(),l=t.doc.getLine(a.row);this.isAutoInsertedClosing(a,l,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=a.row,r.autoInsertedLineEnd=n+l.substr(a.column),r.autoInsertedBrackets++},S.recordMaybeInsert=function(e,t,n){var a=e.getCursorPosition(),l=t.doc.getLine(a.row);this.isMaybeInsertedClosing(a,l)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=a.row,r.maybeInsertedLineStart=l.substr(0,a.column)+n,r.maybeInsertedLineEnd=l.substr(a.column),r.maybeInsertedBrackets++},S.isAutoInsertedClosing=function(e,t,n){return r.autoInsertedBrackets>0&&e.row===r.autoInsertedRow&&n===r.autoInsertedLineEnd[0]&&t.substr(e.column)===r.autoInsertedLineEnd},S.isMaybeInsertedClosing=function(e,t){return r.maybeInsertedBrackets>0&&e.row===r.maybeInsertedRow&&t.substr(e.column)===r.maybeInsertedLineEnd&&t.substr(0,e.column)==r.maybeInsertedLineStart},S.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},S.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},a.inherits(S,l),t.CstyleBehaviour=S})),ace.define("ace/unicode",[],(function(e,t,n){"use strict";for(var r=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],a=0,l=[],f=0;f<r.length;f+=2)l.push(a+=r[f]),r[f+1]&&l.push(45,a+=r[f+1]);t.wordChars=String.fromCharCode.apply(null,l)})),ace.define("ace/mode/text",[],(function(e,t,n){"use strict";var r=e("../config"),a=e("../tokenizer").Tokenizer,l=e("./text_highlight_rules").TextHighlightRules,f=e("./behaviour/cstyle").CstyleBehaviour,d=e("../unicode"),h=e("../lib/lang"),p=e("../token_iterator").TokenIterator,y=e("../range").Range,w=function(){this.HighlightRules=l};(function(){this.$defaultBehaviour=new f,this.tokenRe=new RegExp("^["+d.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+d.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new a(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){var a=t.doc,l=!0,f=!0,d=1/0,p=t.getTabSize(),y=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))k=this.lineCommentStart.map(h.escapeRegExp).join("|"),_=this.lineCommentStart[0];else k=h.escapeRegExp(this.lineCommentStart),_=this.lineCommentStart;k=new RegExp("^(\\s*)(?:"+k+") ?"),y=t.getUseSoftTabs();O=function(e,t){var n=e.match(k);if(n){var r=n[1].length,l=n[0].length;x(e,r,l)||" "!=n[0][l-1]||l--,a.removeInLine(t,r,l)}};var w=_+" ",x=(E=function(e,t){l&&!/\S/.test(e)||(x(e,d,d)?a.insertInLine({row:t,column:d},w):a.insertInLine({row:t,column:d},_))},j=function(e,t){return k.test(e)},function(e,t,n){for(var r=0;t--&&" "==e.charAt(t);)r++;if(r%p!=0)return!1;for(r=0;" "==e.charAt(n++);)r++;return p>2?r%p!=p-1:r%p==0})}else{if(!this.blockComment)return!1;var _=this.blockComment.start,S=this.blockComment.end,k=new RegExp("^(\\s*)(?:"+h.escapeRegExp(_)+")"),C=new RegExp("(?:"+h.escapeRegExp(S)+")\\s*$"),E=function(e,t){j(e,t)||l&&!/\S/.test(e)||(a.insertInLine({row:t,column:e.length},S),a.insertInLine({row:t,column:d},_))},O=function(e,t){var n;(n=e.match(C))&&a.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(k))&&a.removeInLine(t,n[1].length,n[0].length)},j=function(e,n){if(k.test(e))return!0;for(var r=t.getTokens(n),a=0;a<r.length;a++)if("comment"===r[a].type)return!0}}function T(e){for(var t=n;t<=r;t++)e(a.getLine(t),t)}var A=1/0;T((function(e,t){var n=e.search(/\S/);-1!==n?(n<d&&(d=n),f&&!j(e,t)&&(f=!1)):A>e.length&&(A=e.length)})),d==1/0&&(d=A,l=!1,f=!1),y&&d%p!=0&&(d=Math.floor(d/p)*p),T(f?O:E)},this.toggleBlockComment=function(e,t,n,r){var a=this.blockComment;if(a){!a.start&&a[0]&&(a=a[0]);var l,f,d=(k=new p(t,r.row,r.column)).getCurrentToken(),h=(t.selection,t.selection.toOrientedRange());if(d&&/comment/.test(d.type)){for(var w,x;d&&/comment/.test(d.type);){if(-1!=(C=d.value.indexOf(a.start))){var _=k.getCurrentTokenRow(),S=k.getCurrentTokenColumn()+C;w=new y(_,S,_,S+a.start.length);break}d=k.stepBackward()}var k;for(d=(k=new p(t,r.row,r.column)).getCurrentToken();d&&/comment/.test(d.type);){var C;if(-1!=(C=d.value.indexOf(a.end))){_=k.getCurrentTokenRow(),S=k.getCurrentTokenColumn()+C;x=new y(_,S,_,S+a.end.length);break}d=k.stepForward()}x&&t.remove(x),w&&(t.remove(w),l=w.start.row,f=-a.start.length)}else f=a.start.length,l=n.start.row,t.insert(n.end,a.end),t.insert(n.start,a.start);h.start.row==l&&(h.start.column+=f),h.end.row==l&&(h.end.column+=f),t.selection.fromOrientedRange(h)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var t in this.$embeds=[],this.$modes={},e)if(e[t]){var n=e[t],a=n.prototype.$id,l=r.$modes[a];l||(r.$modes[a]=l=new n),r.$modes[t]||(r.$modes[t]=l),this.$embeds.push(t),this.$modes[t]=l}var f=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(t=0;t<f.length;t++)!function(e){var n=f[t],r=e[n];e[f[t]]=function(){return this.$delegator(n,arguments,r)}}(this)},this.$delegator=function(e,t,n){var r=t[0]||"start";if("string"!=typeof r){if(Array.isArray(r[2])){var a=r[2][r[2].length-1];if(f=this.$modes[a])return f[e].apply(f,[r[1]].concat([].slice.call(t,1)))}r=r[0]||"start"}for(var l=0;l<this.$embeds.length;l++)if(this.$modes[this.$embeds[l]]){var f,d=r.split(this.$embeds[l]);if(!d[0]&&d[1])return t[0]=d[1],(f=this.$modes[this.$embeds[l]])[e].apply(f,t)}var h=n.apply(this,t);return n?h:void 0},this.transformAction=function(e,t,n,r,a){if(this.$behaviour){var l=this.$behaviour.getBehaviours();for(var f in l)if(l[f][t]){var d=l[f][t].apply(this,arguments);if(d)return d}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t)for(var a=t[r],l=0,f=a.length;l<f;l++)if("string"==typeof a[l].token)/keyword|support|storage/.test(a[l].token)&&n.push(a[l].regex);else if("object"==typeof a[l].token)for(var d=0,h=a[l].token.length;d<h;d++)if(/keyword|support|storage/.test(a[l].token[d])){r=a[l].regex.match(/\(.+?\)/g)[d];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){return(this.$keywordList||this.$createKeywordList()).map((function(e){return{name:e,value:e,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(w.prototype),t.Mode=w})),ace.define("ace/apply_delta",[],(function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var r=t.start.row,a=t.start.column,l=e[r]||"";switch(t.action){case"insert":if(1===t.lines.length)e[r]=l.substring(0,a)+t.lines[0]+l.substring(a);else{var f=[r,1].concat(t.lines);e.splice.apply(e,f),e[r]=l.substring(0,a)+e[r],e[r+t.lines.length-1]+=l.substring(a)}break;case"remove":var d=t.end.column,h=t.end.row;r===h?e[r]=l.substring(0,a)+l.substring(d):e.splice(r,h-r+1,l.substring(0,a)+e[h].substring(d))}}})),ace.define("ace/anchor",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/event_emitter").EventEmitter,l=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var r=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&r}r.implement(this,a),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if(!(t.start.row==t.end.row&&t.start.row!=this.row||t.start.row>this.row)){var n=function(t,n,r){var a="insert"==t.action,l=(a?1:-1)*(t.end.row-t.start.row),f=(a?1:-1)*(t.end.column-t.start.column),d=t.start,h=a?d:t.end;if(e(n,d,r))return{row:n.row,column:n.column};if(e(h,n,!r))return{row:n.row+l,column:n.column+(n.row==h.row?f:0)};return{row:d.row,column:d.column}}(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(e,t,n){var r;if(r=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=r.row||this.column!=r.column){var a={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:a,value:r})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(l.prototype)})),ace.define("ace/document",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./apply_delta").applyDelta,l=e("./lib/event_emitter").EventEmitter,f=e("./range").Range,d=e("./anchor").Anchor,h=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){r.implement(this,l),this.setValue=function(e){var t=this.getLength()-1;this.remove(new f(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new d(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:e>=n&&(e=n-1,t=void 0);var r=this.getLine(e);return null==t&&(t=r.length),{row:e,column:t=Math.min(Math.max(t,0),r.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var n=0;(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),r={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:t}),this.clonePos(r)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var r=this.clippedPos(e,t),a=this.clippedPos(e,n);return this.applyDelta({start:r,end:a,action:"remove",lines:this.getLinesForRange({start:r,end:a})},!0),this.clonePos(r)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var n=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&e>0,r=t<this.getLength()-1,a=n?e-1:e,l=n?this.getLine(a).length:0,d=r?t+1:t,h=r?0:this.getLine(d).length,p=new f(a,l,d,h),y=this.$lines.slice(e,t+1);return this.applyDelta({start:p.start,end:p.end,action:"remove",lines:this.getLinesForRange(p)}),y},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){return e instanceof f||(e=f.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!f.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(a(this.$lines,e,t),this._signal("change",e)))},this.$safeApplyDelta=function(e){var t=this.$lines.length;("remove"==e.action&&e.start.row<t&&e.end.row<t||"insert"==e.action&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,r=n.length-t+1,a=e.start.row,l=e.start.column,f=0,d=0;f<r;f=d){d+=t-1;var h=n.slice(f,d);h.push(""),this.applyDelta({start:this.pos(a+f,l),end:this.pos(a+d,l=0),action:e.action,lines:h},!0)}e.lines=n.slice(f),e.start.row=a+f,e.start.column=l,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,a=t||0,l=n.length;a<l;a++)if((e-=n[a].length+r)<0)return{row:a,column:e+n[a].length+r};return{row:l-1,column:e+n[l-1].length+r}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,a=0,l=Math.min(e.row,n.length),f=t||0;f<l;++f)a+=n[f].length+r;return a+e.column}}).call(h.prototype),t.Document=h})),ace.define("ace/background_tokenizer",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/event_emitter").EventEmitter,l=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,r=-1,a=n.doc,l=t;n.lines[t];)t++;var f=a.getLength(),d=0;for(n.running=!1;t<f;){n.$tokenizeRow(t),r=t;do{t++}while(n.lines[t]);if(++d%5==0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,-1==r&&(r=t),l<=r&&n.fireUpdateEvent(l,r)}}};(function(){r.implement(this,a),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(l.prototype),t.BackgroundTokenizer=l})),ace.define("ace/search_highlight",[],(function(e,t,n){"use strict";var r=e("./lib/lang"),a=(e("./lib/oop"),e("./range").Range),l=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,l){if(this.regExp)for(var f=l.firstRow,d=l.lastRow,h=f;h<=d;h++){var p=this.cache[h];null==p&&((p=r.getMatchOffsets(n.getLine(h),this.regExp)).length>this.MAX_RANGES&&(p=p.slice(0,this.MAX_RANGES)),p=p.map((function(e){return new a(h,e.offset,h,e.offset+e.length)})),this.cache[h]=p.length?p:"");for(var y=p.length;y--;)t.drawSingleLineMarker(e,p[y].toScreenRange(n),this.clazz,l)}}}).call(l.prototype),t.SearchHighlight=l})),ace.define("ace/edit_session/fold_line",[],(function(e,t,n){"use strict";var r=e("../range").Range;function a(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(e){e.setFoldLine(this)}),this)}(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach((function(t){t.start.row+=e,t.end.row+=e}))},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort((function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)})),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r,a,l=0,f=this.folds,d=!0;null==t&&(t=this.end.row,n=this.end.column);for(var h=0;h<f.length;h++){if(-1==(a=(r=f[h]).range.compareStart(t,n)))return void e(null,t,n,l,d);if(!e(null,r.start.row,r.start.column,l,d)&&e(r.placeholder,r.start.row,r.start.column,l)||0===a)return;d=!r.sameRow,l=r.end.column}e(null,t,n,l,d)},this.getNextFoldTo=function(e,t){for(var n,r,a=0;a<this.folds.length;a++){if(-1==(r=(n=this.folds[a]).range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===r)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var r,a,l=this.getNextFoldTo(e,t);if(l)if(r=l.fold,"inside"==l.kind&&r.start.column!=t&&r.start.row!=e)window.console&&window.console.log(e,t,r);else if(r.start.row==e){var f=(a=this.folds).indexOf(r);for(0===f&&(this.start.column+=n);f<a.length;f++){if((r=a[f]).start.column+=n,!r.sameRow)return;r.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var r=n.fold,l=this.folds,f=this.foldData,d=l.indexOf(r),h=l[d-1];this.end.row=h.end.row,this.end.column=h.end.column;var p=new a(f,l=l.splice(d,l.length-d));return f.splice(f.indexOf(this)+1,0,p),p},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach((function(t){e.push("  "+t.toString())})),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var r=this.folds[n];if((e-=r.start.column-t)<0)return{row:r.start.row,column:r.start.column+e};if((e-=r.placeholder.length)<0)return r.start;t=r.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(a.prototype),t.FoldLine=a})),ace.define("ace/range_list",[],(function(e,t,n){"use strict";var r=e("./range").Range.comparePoints,a=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=r,this.pointIndex=function(e,t,n){for(var a=this.ranges,l=n||0;l<a.length;l++){var f=a[l],d=r(e,f.end);if(!(d>0)){var h=r(e,f.start);return 0===d?t&&0!==h?-l-2:l:h>0||0===h&&!t?l:-l-1}}return-l-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){for(var e,t=[],n=this.ranges,a=(n=n.sort((function(e,t){return r(e.start,t.start)})))[0],l=1;l<n.length;l++){e=a,a=n[l];var f=r(e.end,a.start);f<0||(0!=f||e.isEmpty()||a.isEmpty())&&(r(e.end,a.end)<0&&(e.end.row=a.end.row,e.end.column=a.end.column),n.splice(l,1),t.push(a),a=e,l--)}return this.ranges=n,t},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var a=this.pointIndex({row:t,column:0},r);a<0&&(a=-a-1);for(var l=[],f=r;f<a;f++)l.push(n[f]);return l},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,n=e.end,r=t.row,a=n.row,l=this.ranges,f=0,d=l.length;f<d;f++){if((y=l[f]).end.row>=r)break}if("insert"==e.action)for(var h=a-r,p=-t.column+n.column;f<d;f++){if((y=l[f]).start.row>r)break;if(y.start.row==r&&y.start.column>=t.column&&(y.start.column==t.column&&this.$bias<=0||(y.start.column+=p,y.start.row+=h)),y.end.row==r&&y.end.column>=t.column){if(y.end.column==t.column&&this.$bias<0)continue;y.end.column==t.column&&p>0&&f<d-1&&y.end.column>y.start.column&&y.end.column==l[f+1].start.column&&(y.end.column-=p),y.end.column+=p,y.end.row+=h}}else for(h=r-a,p=t.column-n.column;f<d;f++){if((y=l[f]).start.row>a)break;y.end.row<a&&(r<y.end.row||r==y.end.row&&t.column<y.end.column)?(y.end.row=r,y.end.column=t.column):y.end.row==a?y.end.column<=n.column?(h||y.end.column>t.column)&&(y.end.column=t.column,y.end.row=t.row):(y.end.column+=p,y.end.row+=h):y.end.row>a&&(y.end.row+=h),y.start.row<a&&(r<y.start.row||r==y.start.row&&t.column<y.start.column)?(y.start.row=r,y.start.column=t.column):y.start.row==a?y.start.column<=n.column?(h||y.start.column>t.column)&&(y.start.column=t.column,y.start.row=t.row):(y.start.column+=p,y.start.row+=h):y.start.row>a&&(y.start.row+=h)}if(0!=h&&f<d)for(;f<d;f++){var y;(y=l[f]).start.row+=h,y.end.row+=h}}}).call(a.prototype),t.RangeList=a})),ace.define("ace/edit_session/fold",[],(function(e,t,n){"use strict";var r=e("../range_list").RangeList,a=e("../lib/oop"),l=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};function f(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function d(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}a.inherits(l,r),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach((function(t){t.setFoldLine(e)}))},this.clone=function(){var e=this.range.clone(),t=new l(e,this.placeholder);return this.subFolds.forEach((function(e){t.subFolds.push(e.clone())})),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){var t,n;t=e,n=this.start,f(t.start,n),f(t.end,n);for(var r=e.start.row,a=e.start.column,l=0,d=-1;l<this.subFolds.length&&1==(d=this.subFolds[l].range.compare(r,a));l++);var h=this.subFolds[l],p=0;if(0==d){if(h.range.containsRange(e))return h.addSubFold(e);p=1}r=e.range.end.row,a=e.range.end.column;var y=l;for(d=-1;y<this.subFolds.length&&1==(d=this.subFolds[y].range.compare(r,a));y++);0==d&&y++;for(var w=this.subFolds.splice(l,y-l,e),x=0==d?w.length-1:w.length,_=p;_<x;_++)e.addSubFold(w[_]);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return function(e,t){d(e.start,t),d(e.end,t)}(e,this.start)}}.call(l.prototype)})),ace.define("ace/edit_session/folding",[],(function(e,t,n){"use strict";var r=e("../range").Range,a=e("./fold_line").FoldLine,l=e("./fold").Fold,f=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;for(var a=r.folds,l=0;l<a.length;l++){var f=a[l].range;if(f.contains(e,t)){if(1==n&&f.isEnd(e,t)&&!f.isEmpty())continue;if(-1==n&&f.isStart(e,t)&&!f.isEmpty())continue;return a[l]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,a=[];t.column+=1,n.column-=1;for(var l=0;l<r.length;l++){var f=r[l].range.compareRange(e);if(2!=f){if(-2==f)break;for(var d=r[l].folds,h=0;h<d.length;h++){var p=d[h];if(-2==(f=p.range.compareRange(e)))break;if(2!=f){if(42==f)break;a.push(p)}}}}return t.column-=1,n.column+=1,a},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach((function(e){t=t.concat(this.getFoldsInRange(e))}),this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){if(!(r=r||this.getFoldLine(e)))return null;for(var a,l,f={end:{column:0}},d=0;d<r.folds.length;d++){var h=(l=r.folds[d]).range.compareEnd(e,t);if(-1==h){a=this.getLine(l.start.row).substring(f.end.column,l.start.column);break}if(0===h)return null;f=l}return a||(a=this.getLine(l.start.row).substring(f.end.column)),-1==n?a.substring(0,t-f.end.column):1==n?a.substring(t-f.end.column):a},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0);r<n.length;r++){var a=n[r];if(a.start.row<=e&&a.end.row>=e)return a;if(a.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0);r<n.length;r++){var a=n[r];if(a.end.row>=e)return a}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,r=t-e+1,a=0;a<n.length;a++){var l=n[a],f=l.end.row,d=l.start.row;if(f>=t){d<t&&(d>=e?r-=t-d:r=0);break}f>=e&&(r-=d>=e?f-d:f-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort((function(e,t){return e.start.row-t.start.row})),e},this.addFold=function(e,t){var n,r=this.$foldData,f=!1;e instanceof l?n=e:(n=new l(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(n.range);var d=n.start.row,h=n.start.column,p=n.end.row,y=n.end.column,w=this.getFoldAt(d,h,1),x=this.getFoldAt(p,y,-1);if(w&&x==w)return w.addSubFold(n);w&&!w.range.isStart(d,h)&&this.removeFold(w),x&&!x.range.isEnd(p,y)&&this.removeFold(x);var _=this.getFoldsInRange(n.range);_.length>0&&(this.removeFolds(_),n.collapseChildren||_.forEach((function(e){n.addSubFold(e)})));for(var S=0;S<r.length;S++){var k=r[S];if(p==k.start.row){k.addFold(n),f=!0;break}if(d==k.end.row){if(k.addFold(n),f=!0,!n.sameRow){var C=r[S+1];if(C&&C.start.row==p){k.merge(C);break}}break}if(p<=k.start.row)break}return f||(k=this.$addFoldLine(new a(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(k.start.row,k.start.row):this.$updateRowLengthCache(k.start.row,k.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(e){e.forEach((function(e){this.addFold(e)}),this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,a=this.$foldData,l=t.folds;if(1==l.length)a.splice(a.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))l.pop(),t.end.row=l[l.length-1].end.row,t.end.column=l[l.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))l.shift(),t.start.row=l[0].start.row,t.start.column=l[0].start.column;else if(e.sameRow)l.splice(l.indexOf(e),1);else{var f=t.split(e.start.row,e.start.column);(l=f.folds).shift(),f.start.row=l[0].start.row,f.start.column=l[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach((function(e){this.removeFold(e)}),this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach((function(t){e.restoreRange(t),this.addFold(t)}),this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach((function(e){this.expandFold(e)}),this)},this.unfold=function(e,t){var n,a;if(null==e?(n=new r(0,0,this.getLength(),0),null==t&&(t=!0)):n="number"==typeof e?new r(e,0,e,this.getLine(e).length):"row"in e?r.fromPoints(e,e):e,a=this.getFoldsInRangeList(n),0!=t?this.removeFolds(a):this.expandFolds(a),a.length)return a},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,a){null==r&&(r=e.start.row),null==a&&(a=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var l=this.doc,f="";return e.walk((function(e,t,n,d){if(!(t<r)){if(t==r){if(n<a)return;d=Math.max(a,d)}f+=null!=e?e:l.getLine(t).substring(d,n)}}),t,n),f},this.getDisplayLine=function(e,t,n,r){var a,l=this.getFoldLine(e);return l?this.getFoldDisplayLine(l,e,t,n,r):(a=this.doc.getLine(e)).substring(r||0,t||a.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map((function(t){var n=t.folds.map((function(e){return e.clone()}));return new a(e,n)}))},this.toggleFold=function(e){var t,n,r=this.selection.getRange();if(r.isEmpty()){var a=r.start;if(t=this.getFoldAt(a.row,a.column))return void this.expandFold(t);(n=this.findMatchingBracket(a))?1==r.comparePoint(n)?r.end=n:(r.start=n,r.start.column++,r.end.column--):(n=this.findMatchingBracket({row:a.row,column:a.column+1}))?(1==r.comparePoint(n)?r.end=n:r.start=n,r.start.column++):r=this.getCommentFoldRange(a.row,a.column)||r}else{var l=this.getFoldsInRange(r);if(e&&l.length)return void this.expandFolds(l);1==l.length&&(t=l[0])}if(t||(t=this.getFoldAt(r.start.row,r.start.column)),t&&t.range.toString()==r.toString())this.expandFold(t);else{var f="...";if(!r.isMultiLine()){if((f=this.getTextRange(r)).length<4)return;f=f.trim().substring(0,2)+".."}this.addFold(f,r)}},this.getCommentFoldRange=function(e,t,n){var a=new f(this,e,t),l=a.getCurrentToken(),d=l&&l.type;if(l&&/^comment|string/.test(d)){"comment"==(d=d.match(/comment|string/)[0])&&(d+="|doc-start");var h=new RegExp(d),p=new r;if(1!=n){do{l=a.stepBackward()}while(l&&h.test(l.type));a.stepForward()}if(p.start.row=a.getCurrentTokenRow(),p.start.column=a.getCurrentTokenColumn()+2,a=new f(this,e,t),-1!=n){var y=-1;do{if(l=a.stepForward(),-1==y){var w=this.getState(a.$row);h.test(w)||(y=a.$row)}else if(a.$row>y)break}while(l&&h.test(l.type));l=a.stepBackward()}else l=a.getCurrentToken();return p.end.row=a.getCurrentTokenRow(),p.end.column=a.getCurrentTokenColumn()+l.value.length-2,p}},this.foldAll=function(e,t,n,r){null==n&&(n=1e5);var a=this.foldWidgets;if(a){t=t||this.getLength();for(var l=e=e||0;l<t;l++)if(null==a[l]&&(a[l]=this.getFoldWidget(l)),"start"==a[l]&&(!r||r(l))){var f=this.getFoldWidgetRange(l);f&&f.isMultiLine()&&f.end.row<=t&&f.start.row>=e&&(l=f.end.row,f.collapseChildren=n,this.addFold("...",f))}}},this.foldToLevel=function(e){for(this.foldAll();e-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var e=this;this.foldAll(null,null,null,(function(t){for(var n=e.getTokens(t),r=0;r<n.length;r++){var a=n[r];if("text"!=a.type||!/^\s+$/.test(a.value))return!!/comment/.test(a.type)}}))},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var r,a=e-1;a>=0;){var l=n[a];if(null==l&&(l=n[a]=this.getFoldWidget(a)),"start"==l){var f=this.getFoldWidgetRange(a);if(r||(r=f),f&&f.end.row>=e)break}a--}return{range:-1!==a&&f,firstRange:r}},this.onFoldWidgetClick=function(e,t){var n={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,n)){var r=t.target||t.srcElement;r&&/ace_fold-widget/.test(r.className)&&(r.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),r=this.getLine(e),a="end"===n?-1:1,l=this.getFoldAt(e,-1===a?0:r.length,a);if(l)return t.children||t.all?this.removeFold(l):this.expandFold(l),l;var f=this.getFoldWidgetRange(e,!0);if(f&&!f.isMultiLine()&&(l=this.getFoldAt(f.start.row,f.start.column,1))&&f.isEqual(l.range))return this.removeFold(l),l;if(t.siblings){var d=this.getParentFoldRangeData(e);if(d.range)var h=d.range.start.row+1,p=d.range.end.row;this.foldAll(h,p,t.all?1e4:0)}else t.children?(p=f?f.end.row:this.getLength(),this.foldAll(e+1,p,t.all?1e4:0)):f&&(t.all&&(f.collapseChildren=1e4),this.addFold("...",f));return f}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var r=this.getParentFoldRangeData(t,!0);if(n=r.range||r.firstRange){t=n.start.row;var a=this.getFoldAt(t,this.getLine(t).length,1);a?this.removeFold(a):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",[],(function(e,t,n){"use strict";var r=e("../token_iterator").TokenIterator,a=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),r=!0,l=n.charAt(e.column-1),f=l&&l.match(/([\(\[\{])|([\)\]\}])/);if(f||(l=n.charAt(e.column),e={row:e.row,column:e.column+1},f=l&&l.match(/([\(\[\{])|([\)\]\}])/),r=!1),!f)return null;if(f[1]){if(!(d=this.$findClosingBracket(f[1],e)))return null;t=a.fromPoints(e,d),r||(t.end.column++,t.start.column--),t.cursor=t.end}else{var d;if(!(d=this.$findOpeningBracket(f[2],e)))return null;t=a.fromPoints(d,e),r||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.getMatchingBracketRanges=function(e){var t=this.getLine(e.row),n=t.charAt(e.column-1),r=n&&n.match(/([\(\[\{])|([\)\]\}])/);if(r||(n=t.charAt(e.column),e={row:e.row,column:e.column+1},r=n&&n.match(/([\(\[\{])|([\)\]\}])/)),!r)return null;var l=new a(e.row,e.column-1,e.row,e.column),f=r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e);return f?[l,new a(f.row,f.column,f.row,f.column+1)]:[l]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var a=this.$brackets[e],l=1,f=new r(this,t.row,t.column),d=f.getCurrentToken();if(d||(d=f.stepForward()),d){n||(n=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var h=t.column-f.getCurrentTokenColumn()-2,p=d.value;;){for(;h>=0;){var y=p.charAt(h);if(y==a){if(0==(l-=1))return{row:f.getCurrentTokenRow(),column:h+f.getCurrentTokenColumn()}}else y==e&&(l+=1);h-=1}do{d=f.stepBackward()}while(d&&!n.test(d.type));if(null==d)break;h=(p=d.value).length-1}return null}},this.$findClosingBracket=function(e,t,n){var a=this.$brackets[e],l=1,f=new r(this,t.row,t.column),d=f.getCurrentToken();if(d||(d=f.stepForward()),d){n||(n=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var h=t.column-f.getCurrentTokenColumn();;){for(var p=d.value,y=p.length;h<y;){var w=p.charAt(h);if(w==a){if(0==(l-=1))return{row:f.getCurrentTokenRow(),column:h+f.getCurrentTokenColumn()}}else w==e&&(l+=1);h+=1}do{d=f.stepForward()}while(d&&!n.test(d.type));if(null==d)break;h=0}return null}}}})),ace.define("ace/edit_session",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/lang"),l=e("./bidihandler").BidiHandler,f=e("./config"),d=e("./lib/event_emitter").EventEmitter,h=e("./selection").Selection,p=e("./mode/text").Mode,y=e("./range").Range,w=e("./document").Document,x=e("./background_tokenizer").BackgroundTokenizer,_=e("./search_highlight").SearchHighlight,S=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++S.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new w(e)),this.setDocument(e),this.selection=new h(this),this.$bidiHandler=new l(this),f.resetOptions(this),this.setMode(t),f._signal("session",this)};S.$uid=0,function(){r.implement(this,d),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+r>>1,l=e[a];if(t>l)n=a+1;else{if(!(t<l))return a;r=a-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n,r=this.bgTokenizer.getTokens(e),a=0;if(null==t){var l=r.length-1;a=this.getLine(e).length}else for(l=0;l<r.length&&!((a+=r[l].value.length)>=t);l++);return(n=r[l])?(n.index=l,n.start=a-n.value.length,n):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=a.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?a.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var a=this.$markerId++,l={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!r,id:a};return r?(this.$frontMarkers[a]=l,this._signal("changeFrontMarker")):(this.$backMarkers[a]=l,this._signal("changeBackMarker")),a},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new _(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var a=new y(e,0,t,1/0);return a.id=this.addMarker(a,n,"fullLine",r),a},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;if(t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe)),r)var a=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))a=/\s/;else a=this.nonTokenRe;var l=t;if(l>0){do{l--}while(l>=0&&n.charAt(l).match(a));l++}for(var f=t;f<n.length&&n.charAt(f).match(a);)f++;return new y(e,l,e,f)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),r=this.getLine(n.end.row);r.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=f.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new p),this.$modes[r]&&!n)return this.$onChangeMode(this.$modes[r]),void(t&&t());this.$modeId=r,f.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){var n=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var r=e.getTokenizer();if(void 0!==r.on){var a=this.onReloadTokenizer.bind(this);r.on("update",a)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(r);else{this.bgTokenizer=new x(r);var l=this;this.bgTokenizer.on("update",(function(e){l._signal("tokenizerUpdate",e)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:e}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){f.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach((function(t){t&&t.screenWidth>e&&(e=t.screenWidth)})),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,a=0,l=this.$foldData[a],f=l?l.start.row:1/0,d=t.length,h=0;h<d;h++){if(h>f){if((h=l.end.row+1)>=d)break;f=(l=this.$foldData[a++])?l.start.row:1/0}null==n[h]&&(n[h]=this.$getStringScreenWidth(t[h])[0]),n[h]>r&&(r=n[h])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=e.length-1;-1!=n;n--){var r=e[n];"insert"==r.action||"remove"==r.action?this.doc.revertDelta(r):r.folds&&this.addFolds(r.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=0;n<e.length;n++){var r=e[n];"insert"!=r.action&&"remove"!=r.action||this.doc.$safeApplyDelta(r)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?"insert"!==e.action:"insert"===e.action}for(var r,a,l=0;l<e.length;l++){var f=e[l];f.start&&(r?n(f)?(a=f.start,-1==r.compare(a.row,a.column)&&r.setStart(a),a=f.end,1==r.compare(a.row,a.column)&&r.setEnd(a)):(a=f.start,-1==r.compare(a.row,a.column)&&(r=y.fromPoints(f.start,f.start))):r=n(f)?y.fromPoints(f.start,f.end):y.fromPoints(f.start,f.start))}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),a=this.getFoldsInRange(e),l=y.fromPoints(t,t);if(!n){this.remove(e);var f=e.start.row-e.end.row;(p=f?-e.end.column:e.start.column-e.end.column)&&(l.start.row==e.end.row&&l.start.column>e.end.column&&(l.start.column+=p),l.end.row==e.end.row&&l.end.column>e.end.column&&(l.end.column+=p)),f&&l.start.row>=e.end.row&&(l.start.row+=f,l.end.row+=f)}if(l.end=this.insert(l.start,r),a.length){var d=e.start,h=l.start,p=(f=h.row-d.row,h.column-d.column);this.addFolds(a.map((function(e){return(e=e.clone()).start.row==d.row&&(e.start.column+=p),e.end.row==d.row&&(e.end.column+=p),e.start.row+=f,e.end.row+=f,e})))}return l},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new y(0,0,0,0),r=this.getTabSize(),a=t.start.row;a<=t.end.row;++a){var l=this.getLine(a);n.start.row=a,n.end.row=a;for(var f=0;f<r&&" "==l.charAt(f);++f);f<r&&"\t"==l.charAt(f)?(n.start.column=f,n.end.column=f+1):(n.start.column=0,n.end.column=f),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),n<0){if((a=this.getRowFoldStart(e+n))<0)return 0;var r=a-e}else if(n>0){var a;if((a=this.getRowFoldEnd(t+n))>this.doc.getLength()-1)return 0;r=a-t}else{e=this.$clipRowToDocument(e);r=(t=this.$clipRowToDocument(t))-e+1}var l=new y(e,0,t,Number.MAX_VALUE),f=this.getFoldsInRange(l).map((function(e){return(e=e.clone()).start.row+=r,e.end.row+=r,e})),d=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+r,d),f.length&&this.addFolds(f),r},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1&&(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,r=e.start,a=e.end,l=r.row,f=a.row,d=f-l,h=null;if(this.$updating=!0,0!=d)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(l,d);var p=this.$foldData;h=this.getFoldsInRange(e),this.removeFolds(h);var y=0;if(k=this.getFoldLine(a.row)){k.addRemoveChars(a.row,a.column,r.column-a.column),k.shiftRow(-d);var w=this.getFoldLine(l);w&&w!==k&&(w.merge(k),k=w),y=p.indexOf(k)+1}for(;y<p.length;y++){(k=p[y]).start.row>=a.row&&k.shiftRow(-d)}f=l}else{var x=Array(d);x.unshift(l,0);var _=t?this.$wrapData:this.$rowLengthCache;_.splice.apply(_,x);p=this.$foldData,y=0;if(k=this.getFoldLine(l)){var S=k.range.compareInside(r.row,r.column);0==S?(k=k.split(r.row,r.column))&&(k.shiftRow(d),k.addRemoveChars(f,0,a.column-r.column)):-1==S&&(k.addRemoveChars(l,0,a.column-r.column),k.shiftRow(d)),y=p.indexOf(k)+1}for(;y<p.length;y++){var k;(k=p[y]).start.row>=l&&k.shiftRow(d)}}else d=Math.abs(e.start.column-e.end.column),"remove"===n&&(h=this.getFoldsInRange(e),this.removeFolds(h),d=-d),(k=this.getFoldLine(l))&&k.addRemoveChars(l,r.column,d);return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(l,f):this.$updateRowLengthCache(l,f),h},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(n,r){var a,l,f=this.doc.getAllLines(),d=this.getTabSize(),h=this.$wrapData,p=this.$wrapLimit,y=n;for(r=Math.min(r,f.length-1);y<=r;)(l=this.getFoldLine(y,l))?(a=[],l.walk(function(n,r,l,d){var h;if(null!=n){(h=this.$getDisplayTokens(n,a.length))[0]=e;for(var p=1;p<h.length;p++)h[p]=t}else h=this.$getDisplayTokens(f[r].substring(d,l),a.length);a=a.concat(h)}.bind(this),l.end.row,f[l.end.row].length+1),h[l.start.row]=this.$computeWrapSplits(a,p,d),y=l.end.row+1):(a=this.$getDisplayTokens(f[y]),h[y]=this.$computeWrapSplits(a,p,d),y++)};var e=3,t=4;function n(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}this.$computeWrapSplits=function(n,r,a){if(0==n.length)return[];var l=[],f=n.length,d=0,h=0,p=this.$wrapAsCode,y=this.$indentedSoftWrap,w=r<=Math.max(2*a,8)||!1===y?0:Math.floor(r/2);function x(e){for(var t=e-d,r=d;r<e;r++){var f=n[r];12!==f&&2!==f||(t-=1)}l.length||(_=function(){var e=0;if(0===w)return e;if(y)for(var t=0;t<n.length;t++){var r=n[t];if(10==r)e+=1;else{if(11!=r){if(12==r)continue;break}e+=a}}return p&&!1!==y&&(e+=a),Math.min(e,w)}(),l.indent=_),h+=t,l.push(h),d=e}for(var _=0;f-d>r-_;){var S=d+r-_;if(n[S-1]>=10&&n[S]>=10)x(S);else if(n[S]!=e&&n[S]!=t){for(var k=Math.max(S-(r-(r>>2)),d-1);S>k&&n[S]<e;)S--;if(p){for(;S>k&&n[S]<e;)S--;for(;S>k&&9==n[S];)S--}else for(;S>k&&n[S]<10;)S--;S>k?x(++S):(2==n[S=d+r]&&S--,x(S-_))}else{for(;S!=d-1&&n[S]!=e;S--);if(S>d){x(S);continue}for(S=d+r;S<n.length&&n[S]==t;S++);if(S==n.length)break;x(S)}}return l},this.$getDisplayTokens=function(e,t){var r,a=[];t=t||0;for(var l=0;l<e.length;l++){var f=e.charCodeAt(l);if(9==f){r=this.getScreenTabSize(a.length+t),a.push(11);for(var d=1;d<r;d++)a.push(12)}else 32==f?a.push(10):f>39&&f<48||f>57&&f<64?a.push(9):f>=4352&&n(f)?a.push(1,2):a.push(1)}return a},this.$getStringScreenWidth=function(e,t,r){if(0==t)return[0,0];var a,l;for(null==t&&(t=1/0),r=r||0,l=0;l<e.length&&(9==(a=e.charCodeAt(l))?r+=this.getScreenTabSize(r):a>=4352&&n(a)?r+=2:r+=1,!(r>t));l++);return[r,l]},this.lineWidgets=null,this.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+t:t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var r,a,l=0,f=0,d=0,h=0,p=this.$screenRowCache,y=this.$getRowCacheIndex(p,e),w=p.length;if(w&&y>=0){d=p[y],l=this.$docRowCache[y];var x=e>p[w-1]}else x=!w;for(var _=this.getLength()-1,S=this.getNextFoldLine(l),k=S?S.start.row:1/0;d<=e&&!(d+(h=this.getRowLength(l))>e||l>=_);)d+=h,++l>k&&(l=S.end.row+1,k=(S=this.getNextFoldLine(l,S))?S.start.row:1/0),x&&(this.$docRowCache.push(l),this.$screenRowCache.push(d));if(S&&S.start.row<=l)r=this.getFoldDisplayLine(S),l=S.start.row;else{if(d+h<=e||l>_)return{row:_,column:this.getLine(_).length};r=this.getLine(l),S=null}var C=0,E=Math.floor(e-d);if(this.$useWrapMode){var O=this.$wrapData[l];O&&(a=O[E],E>0&&O.length&&(C=O.indent,f=O[E-1]||O[O.length-1],r=r.substring(f)))}return void 0!==n&&this.$bidiHandler.isBidiRow(d+E,l,E)&&(t=this.$bidiHandler.offsetToCol(n)),f+=this.$getStringScreenWidth(r,t-C)[1],this.$useWrapMode&&f>=a&&(f=a-1),S?S.idxToPosition(f):{row:l,column:f}},this.documentToScreenPosition=function(e,t){if(void 0===t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r,a=0,l=null;(r=this.getFoldAt(e,t,1))&&(e=r.start.row,t=r.start.column);var f,d=0,h=this.$docRowCache,p=this.$getRowCacheIndex(h,e),y=h.length;if(y&&p>=0){d=h[p],a=this.$screenRowCache[p];var w=e>h[y-1]}else w=!y;for(var x=this.getNextFoldLine(d),_=x?x.start.row:1/0;d<e;){if(d>=_){if((f=x.end.row+1)>e)break;_=(x=this.getNextFoldLine(f,x))?x.start.row:1/0}else f=d+1;a+=this.getRowLength(d),d=f,w&&(this.$docRowCache.push(d),this.$screenRowCache.push(a))}var S="";x&&d>=_?(S=this.getFoldDisplayLine(x,e,t),l=x.start.row):(S=this.getLine(e).substring(0,t),l=e);var k=0;if(this.$useWrapMode){var C=this.$wrapData[l];if(C){for(var E=0;S.length>=C[E];)a++,E++;S=S.substring(C[E-1]||0,S.length),k=E>0?C.indent:0}}return this.lineWidgets&&this.lineWidgets[d]&&this.lineWidgets[d].rowsAbove&&(a+=this.lineWidgets[d].rowsAbove),{row:a,column:k+this.$getStringScreenWidth(S)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,r=0,a=(d=0,(t=this.$foldData[d++])?t.start.row:1/0);r<n;){var l=this.$wrapData[r];e+=l?l.length+1:1,++r>a&&(r=t.end.row+1,a=(t=this.$foldData[d++])?t.start.row:1/0)}else{e=this.getLength();for(var f=this.$foldData,d=0;d<f.length;d++)e-=(t=f[d]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,r){if(0===n)return[0,0];var a,l;for(n||(n=1/0),r=r||0,l=0;l<t.length&&!((r+="\t"===(a=t.charAt(l))?this.getScreenTabSize(r):e.getCharacterWidth(a))>n);l++);return[r,l]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.selection.detach()},this.isFullWidth=n}.call(S.prototype),e("./edit_session/folding").Folding.call(S.prototype),e("./edit_session/bracket_match").BracketMatch.call(S.prototype),f.defineOptions(S.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){(e=parseInt(e))>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=S})),ace.define("ace/search",[],(function(e,t,n){"use strict";var r=e("./lib/lang"),a=e("./lib/oop"),l=e("./range").Range,f=function(){this.$options={}};(function(){this.set=function(e){return a.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var r=null;return n.forEach((function(e,n,a,f){return r=new l(e,n,a,f),!(n==f&&t.start&&t.start.start&&0!=t.skipCurrent&&r.isEqual(t.start))||(r=null,!1)})),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,a=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),f=[],d=t.re;if(t.$isMultiLine){var h,p=d.length,y=a.length-p;e:for(var w=d.offset||0;w<=y;w++){for(var x=0;x<p;x++)if(-1==a[w+x].search(d[x]))continue e;var _=a[w],S=a[w+p-1],k=_.length-_.match(d[0])[0].length,C=S.match(d[p-1])[0].length;h&&h.end.row===w&&h.end.column>k||(f.push(h=new l(w,k,w+p-1,C)),p>2&&(w=w+p-2))}}else for(var E=0;E<a.length;E++){var O=r.getMatchOffsets(a[E],d);for(x=0;x<O.length;x++){var j=O[x];f.push(new l(E,j.offset,E,j.offset+j.length))}}if(n){var T=n.start.column,A=n.start.column;for(E=0,x=f.length-1;E<x&&f[E].start.column<T&&f[E].start.row==n.start.row;)E++;for(;E<x&&f[x].end.column>A&&f[x].end.row==n.end.row;)x--;for(f=f.slice(E,x+1),E=0,x=f.length;E<x;E++)f[E].start.row+=n.start.row,f[E].end.row+=n.start.row}return f},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(r){var a=r.exec(e);if(!a||a[0].length!=e.length)return null;if(t=e.replace(r,t),n.preserveCase){t=t.split("");for(var l=Math.min(e.length,e.length);l--;){var f=e[l];f&&f.toLowerCase()!=f?t[l]=t[l].toUpperCase():t[l]=t[l].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n=function(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}(n,e));var a=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,a);try{var l=new RegExp(n,a)}catch(e){l=!1}return e.re=l},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[],a=0;a<n.length;a++)try{r.push(new RegExp(n[a],t))}catch(e){return!1}return r},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var r=1==t.backwards,a=0!=t.skipCurrent,l=t.range,f=t.start;f||(f=l?l[r?"end":"start"]:e.selection.getRange()),f.start&&(f=f[a!=r?"end":"start"]);var d=l?l.start.row:0,h=l?l.end.row:e.getLength()-1;if(r)var p=function(e){var n=f.row;if(!w(n,f.column,e)){for(n--;n>=d;n--)if(w(n,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(n=h,d=f.row;n>=d;n--)if(w(n,Number.MAX_VALUE,e))return}};else p=function(e){var n=f.row;if(!w(n,f.column,e)){for(n+=1;n<=h;n++)if(w(n,0,e))return;if(0!=t.wrap)for(n=d,h=f.row;n<=h;n++)if(w(n,0,e))return}};if(t.$isMultiLine)var y=n.length,w=function(t,a,l){var f=r?t-y+1:t;if(!(f<0)){var d=e.getLine(f),h=d.search(n[0]);if(!(!r&&h<a||-1===h)){for(var p=1;p<y;p++)if(-1==(d=e.getLine(f+p)).search(n[p]))return;var w=d.match(n[y-1])[0].length;if(!(r&&w>a))return!!l(f,h,f+y-1,w)||void 0}}};else if(r)w=function(t,r,a){var l,f=e.getLine(t),d=[],h=0;for(n.lastIndex=0;l=n.exec(f);){var p=l[0].length;if(h=l.index,!p){if(h>=f.length)break;n.lastIndex=h+=1}if(l.index+p>r)break;d.push(l.index,p)}for(var y=d.length-1;y>=0;y-=2){var w=d[y-1];if(a(t,w,t,w+(p=d[y])))return!0}};else w=function(t,r,a){var l,f,d=e.getLine(t);for(n.lastIndex=r;f=n.exec(d);){var h=f[0].length;if(a(t,l=f.index,t,l+h))return!0;if(!h&&(n.lastIndex=l+=1,l>=d.length))return!1}};return{forEach:p}}}).call(f.prototype),t.Search=f})),ace.define("ace/keyboard/hash_handler",[],(function(e,t,n){"use strict";var r=e("../lib/keys"),a=e("../lib/useragent"),l=r.KEY_MODS;function f(e,t){this.platform=t||(a.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function d(e,t){f.call(this,e,t),this.$singleCommand=!1}d.prototype=f.prototype,function(){function e(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"==typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var r=this.commandKeyBinding;for(var a in r){var l=r[a];if(l==e)delete r[a];else if(Array.isArray(l)){var f=l.indexOf(e);-1!=f&&(l.splice(f,1),1==l.length&&(r[a]=l[0]))}}},this.bindKey=function(e,t,n){if("object"==typeof e&&e&&(null==n&&(n=e.position),e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach((function(e){var r="";if(-1!=e.indexOf(" ")){var a=e.split(/\s+/);e=a.pop(),a.forEach((function(e){var t=this.parseKeys(e),n=l[t.hashId]+t.key;r+=(r?" ":"")+n,this._addCommandToBinding(r,"chainKeys")}),this),r+=" "}var f=this.parseKeys(e),d=l[f.hashId]+f.key;this._addCommandToBinding(r+d,t,n)}),this)},this._addCommandToBinding=function(t,n,r){var a,l=this.commandKeyBinding;if(n)if(!l[t]||this.$singleCommand)l[t]=n;else{Array.isArray(l[t])?-1!=(a=l[t].indexOf(n))&&l[t].splice(a,1):l[t]=[l[t]],"number"!=typeof r&&(r=e(n));var f=l[t];for(a=0;a<f.length;a++){if(e(f[a])>r)break}f.splice(a,0,n)}else delete l[t]},this.addCommands=function(e){e&&Object.keys(e).forEach((function(t){var n=e[t];if(n){if("string"==typeof n)return this.bindKey(n,t);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=t),this.addCommand(n))}}),this)},this.removeCommands=function(e){Object.keys(e).forEach((function(t){this.removeCommand(e[t])}),this)},this.bindKeys=function(e){Object.keys(e).forEach((function(t){this.bindKey(t,e[t])}),this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(e){return e})),n=t.pop(),a=r[n];if(r.FUNCTION_KEYS[a])n=r.FUNCTION_KEYS[a].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var l=0,f=t.length;f--;){var d=r.KEY_MODS[t[f]];if(null==d)return"undefined"!=typeof console&&console.error("invalid modifier "+t[f]+" in "+e),!1;l|=d}return{key:n,hashId:l}},this.findKeyCommand=function(e,t){var n=l[e]+t;return this.commandKeyBinding[n]},this.handleKeyboard=function(e,t,n,r){if(!(r<0)){var a=l[t]+n,f=this.commandKeyBinding[a];return e.$keyChain&&(e.$keyChain+=" "+a,f=this.commandKeyBinding[e.$keyChain]||f),!f||"chainKeys"!=f&&"chainKeys"!=f[f.length-1]?(e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||r>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-a.length-1)),{command:f}):(e.$keyChain=e.$keyChain||a,{command:"null"})}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(f.prototype),t.HashHandler=f,t.MultiHashHandler=d})),ace.define("ace/commands/command_manager",[],(function(e,t,n){"use strict";var r=e("../lib/oop"),a=e("../keyboard/hash_handler").MultiHashHandler,l=e("../lib/event_emitter").EventEmitter,f=function(e,t){a.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",(function(e){return e.command.exec(e.editor,e.args||{})}))};r.inherits(f,a),function(){r.implement(this,l),this.exec=function(e,t,n){if(Array.isArray(e)){for(var r=e.length;r--;)if(this.exec(e[r],t,n))return!0;return!1}if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var a={editor:t,command:e,args:n};return a.returnValue=this._emit("exec",a),this._signal("afterExec",a),!1!==a.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach((function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map((function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e}))}}.call(f.prototype),t.CommandManager=f})),ace.define("ace/commands/default_commands",[],(function(e,t,n){"use strict";var r=e("../lib/lang"),a=e("../config"),l=e("../range").Range;function f(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",bindKey:f("Ctrl-,","Command-,"),exec:function(e){a.loadModule("ace/ext/settings_menu",(function(t){t.init(e),e.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:f("Alt-E","F4"),exec:function(e){a.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:f("Alt-Shift-E","Shift-F4"),exec:function(e){a.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:f("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:f(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:f("Ctrl-L","Command-L"),exec:function(e,t){"number"!=typeof t||isNaN(t)||e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:f("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:f("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:f("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:f("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:f(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:f(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:f("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:f("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:f("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:f("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:f("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:f("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:f("Ctrl-F","Command-F"),exec:function(e){a.loadModule("ace/ext/searchbox",(function(t){t.Search(e)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:f("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:f("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:f("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:f("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:f("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:f("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:f("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:f("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:f("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:f("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:f("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:f("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:f("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:f("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:f("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:f("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:f("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:f("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:f("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:f("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:f(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:f("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:f(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:f("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:f("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:f("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:f("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:f("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:f("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:f("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:f(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:f("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:f("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:f("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:f("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:f("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:f("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:f("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:f("Ctrl-H","Command-Option-F"),exec:function(e){a.loadModule("ace/ext/searchbox",(function(t){t.Search(e,!0)}))}},{name:"undo",description:"Undo",bindKey:f("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:f("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:f("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:f("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:f("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:f("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:f("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:f("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:f("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:f("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:f("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:f("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:f("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:f("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:f("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:f("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:f("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:f("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:f("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:f(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:f("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:f("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:f("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:f(null,null),exec:function(e){e.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:f("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:f(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),a=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),f=e.session.doc.getLine(n.row).length,d=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,h=e.session.doc.getLine(n.row),p=n.row+1;p<=a.row+1;p++){var y=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(p)));0!==y.length&&(y=" "+y),h+=y}a.row+1<e.session.doc.getLength()-1&&(h+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new l(n.row,0,a.row+2,0),h),d>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+d)):(f=e.session.doc.getLine(n.row).length>f?f+1:f,e.selection.moveCursorTo(n.row,f))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:f(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,r=e.selection.rangeList.ranges,a=[];r.length<1&&(r=[e.selection.getRange()]);for(var f=0;f<r.length;f++)f==r.length-1&&(r[f].end.row===t&&r[f].end.column===n||a.push(new l(r[f].end.row,r[f].end.column,t,n))),0===f?0===r[f].start.row&&0===r[f].start.column||a.push(new l(0,0,r[f].start.row,r[f].start.column)):a.push(new l(r[f-1].end.row,r[f-1].end.column,r[f].start.row,r[f].start.column));e.exitMultiSelectMode(),e.clearSelection();for(f=0;f<a.length;f++)e.selection.addRange(a[f],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert("\n"),0===t.row&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:f("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:f(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var d=1;d<9;d++)t.commands.push({name:"foldToLevel"+d,description:"Fold To Level "+d,level:d,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})})),ace.define("ace/editor",[],(function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/oop"),a=e("./lib/dom"),l=e("./lib/lang"),f=e("./lib/useragent"),d=e("./keyboard/textinput").TextInput,h=e("./mouse/mouse_handler").MouseHandler,p=e("./mouse/fold_handler").FoldHandler,y=e("./keyboard/keybinding").KeyBinding,w=e("./edit_session").EditSession,x=e("./search").Search,_=e("./range").Range,S=e("./lib/event_emitter").EventEmitter,k=e("./commands/command_manager").CommandManager,C=e("./commands/default_commands").commands,E=e("./config"),O=e("./token_iterator").TokenIterator,j=e("./clipboard"),T=function(e,t,n){this.$toDestroy=[];var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++T.$uid,this.commands=new k(f.isMac?"mac":"win",C),"object"==typeof document&&(this.textInput=new d(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new h(this),new p(this)),this.keyBinding=new y(this),this.$search=(new x).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=l.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(e,t){t._$emitInputEvent.schedule(31)})),this.setSession(t||n&&n.session||new w("")),E.resetOptions(this),n&&this.setOptions(n),E._signal("editor",this)};T.$uid=0,function(){r.implement(this,S),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=l.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp&&this.session){if(e&&!1===e.returnValue||!this.session)return this.curOp=null;if(1==e&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),a=this.renderer.layerConfig;(r.start.row>=a.lastRow||r.end.row<=a.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var l=this.selection.toJSON();this.curOp.selectionAfter=l,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(l),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var a=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(a)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"==typeof e&&"ace"!=e){this.$keybindingId=e;var n=this;E.loadModule(["keybinding",e],(function(r){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(r&&r.handler),t&&t()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||a.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout((function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach((function(e){t.removeMarker(e)})),t.$bracketHighlight=null);var n=t.getMatchingBracketRanges(e.getCursorPosition());if(!n&&t.$mode.getMatching&&(n=t.$mode.getMatching(e.session)),n){var r="ace_bracket";Array.isArray(n)?1==n.length&&(r="ace_error_bracket"):n=[n],2==n.length&&(0==_.comparePoints(n[0].end,n[1].start)?n=[_.fromPoints(n[0].start,n[1].end)]:0==_.comparePoints(n[0].start,n[1].end)&&(n=[_.fromPoints(n[1].start,n[0].end)])),t.$bracketHighlight={ranges:n,markerIds:n.map((function(e){return t.addMarker(e,r,"text")}))}}}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout((function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=e.getCursorPosition(),r=new O(e.session,n.row,n.column),a=r.getCurrentToken();if(!a||!/\b(?:tag-open|tag-name)/.test(a.type))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);if(-1===a.type.indexOf("tag-open")||(a=r.stepForward())){var l=a.value,f=a.value,d=0,h=r.stepBackward();if("<"===h.value)do{h=a,(a=r.stepForward())&&(-1!==a.type.indexOf("tag-name")?l===(f=a.value)&&("<"===h.value?d++:"</"===h.value&&d--):l===f&&"/>"===a.value&&d--)}while(a&&d>=0);else{do{if(a=h,h=r.stepBackward(),a)if(-1!==a.type.indexOf("tag-name"))l===a.value&&("<"===h.value?d++:"</"===h.value&&d--);else if("/>"===a.value){for(var p=0,y=h;y;){if(-1!==y.type.indexOf("tag-name")&&y.value===l){d--;break}if("<"===y.value)break;y=r.stepBackward(),p++}for(var w=0;w<p;w++)r.stepForward()}}while(h&&d<=0);r.stepForward()}if(!a)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var x=r.getCurrentTokenRow(),S=r.getCurrentTokenColumn(),k=new _(x,S,x,S+a.value.length),C=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&null!=C&&0!==k.compareRange(C.range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),t.$tagHighlight||(t.$tagHighlight=t.addMarker(k,"ace_bracket","text"))}}}),50)}},this.focus=function(){var e=this;setTimeout((function(){e.isFocused()||e.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new _(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}var a=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(a),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column,r=t.end.column,a=e.getLine(t.start.row),l=a.substring(n,r);if(!(l.length>5e3)&&/[\w\d]/.test(l)){var f=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:l}),d=a.substring(n-1,r+1);if(f.test(d))return f}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;for(var r=this.selection.getAllRanges(),a=0;a<r.length;a++){var l=r[a];a&&r[a-1].start.row==l.start.row||(e+=this.session.getLine(l.start.row)+t)}}var f={text:e};return this._signal("copy",f),j.lineMode=n?f.text:"",f.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t==j.lineMode,r=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?r.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach((function(e){r.insert({row:e.start.row,column:0},t)}));else{var a=t.split(/\r\n|\r|\n/),l=this.selection.rangeList.ranges,f=!(2!=a.length||a[0]&&a[1]);if(a.length!=l.length||f)return this.commands.exec("insertstring",this,t);for(var d=l.length;d--;){var h=l[d];h.isEmpty()||r.remove(h),r.insert(h.start,a[d])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),a=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var l=r.transformAction(n.getState(a.row),"insertion",this,n,e);l&&(e!==l.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=l.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==e.indexOf("\n")){(f=new _.fromPoints(a,a)).end.column+=e.length,this.session.remove(f)}}else{var f=this.getSelectionRange();a=this.session.remove(f),this.clearSelection()}if("\n"==e||"\r\n"==e){var d=n.getLine(a.row);if(a.column>d.search(/\S|$/)){var h=d.substr(a.column).search(/\S|$/);n.doc.removeInLine(a.row,a.column,a.column+h)}}this.clearSelection();var p=a.column,y=n.getState(a.row),w=(d=n.getLine(a.row),r.checkOutdent(y,d,e));if(n.insert(a,e),l&&l.selection&&(2==l.selection.length?this.selection.setSelectionRange(new _(a.row,p+l.selection[0],a.row,p+l.selection[1])):this.selection.setSelectionRange(new _(a.row+l.selection[0],l.selection[1],a.row+l.selection[2],l.selection[3]))),this.$enableAutoIndent){if(n.getDocument().isNewLine(e)){var x=r.getNextLineIndent(y,d.slice(0,a.column),n.getTabString());n.insert({row:a.row+1,column:0},x)}w&&r.autoOutdent(y,n,a.row)}},this.autoIndent=function(){var e,t,n=this.session,r=n.getMode();if(this.selection.isEmpty())e=0,t=n.doc.getLength()-1;else{var a=this.getSelectionRange();e=a.start.row,t=a.end.row}for(var l,f,d,h="",p="",y="",w=n.getTabString(),x=e;x<=t;x++)x>0&&(h=n.getState(x-1),p=n.getLine(x-1),y=r.getNextLineIndent(h,p,w)),l=n.getLine(x),y!==(f=r.$getIndent(l))&&(f.length>0&&(d=new _(x,0,x,f.length),n.remove(d)),y.length>0&&n.insert({row:x,column:0},y)),r.autoOutdent(h,n,x)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){var n;(t.extendLeft||t.extendRight)&&((n=this.selection.getRange()).start.column-=t.extendLeft,n.end.column+=t.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),e||n.isEmpty()||this.remove());(!e&&this.selection.isEmpty()||this.insert(e,!0),t.restoreStart||t.restoreEnd)&&((n=this.selection.getRange()).start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),a=n.getMode().transformAction(r,"deletion",this,n,t);if(0===t.end.column){var l=n.getTextRange(t);if("\n"==l[l.length-1]){var f=n.getLine(t.end.row);/^\s+$/.test(f)&&(t.end.column=f.length)}}a&&(t=a)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,r,a=this.session.getLine(e.row);t<a.length?(n=a.charAt(t)+a.charAt(t-1),r=new _(e.row,t-1,e.row,t+1)):(n=a.charAt(t-1)+a.charAt(t-2),r=new _(e.row,t-2,e.row,t)),this.session.replace(r,n),this.session.selection.moveToPosition(r.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var n=e.getTextRange(t);if(!/^\s+$/.test(n)){y=this.$getSelectedRows();return void e.indentRows(y.first,y.last,"\t")}}var r=e.getLine(t.start.row),a=t.start,f=e.getTabSize(),d=e.documentToScreenColumn(a.row,a.column);if(this.session.getUseSoftTabs())var h=f-d%f,p=l.stringRepeat(" ",h);else{for(h=d%f;" "==r[t.start.column-1]&&h;)t.start.column--,h--;this.selection.setSelectionRange(t),p="\t"}return this.insert(p)}var y=this.$getSelectedRows();e.indentRows(y.first,y.last,"\t")},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],r=e.first;r<=e.last;r++)n.push(t.getLine(r));n.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}));var a=new _(0,0,0,0);for(r=e.first;r<=e.last;r++){var l=t.getLine(r);a.start.row=r,a.end.row=r,a.end.column=l.length,t.replace(a,n[r-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var r=this.session.getLine(e);n.lastIndex<t;){var a=n.exec(r);if(a.index<=t&&a.index+a[0].length>=t)return{value:a[0],start:a.index,end:a.index+a[0].length}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new _(t,n-1,t,n),a=this.session.getTextRange(r);if(!isNaN(parseFloat(a))&&isFinite(a)){var l=this.getNumberAt(t,n);if(l){var f=l.value.indexOf(".")>=0?l.start+l.value.indexOf(".")+1:l.end,d=l.start+l.value.length-f,h=parseFloat(l.value);h*=Math.pow(10,d),f!==l.end&&n<f?e*=Math.pow(10,l.end-n-1):e*=Math.pow(10,l.end-n),h+=e;var p=(h/=Math.pow(10,d)).toFixed(d),y=new _(t,l.start,t,l.end);this.session.replace(y,p),this.moveCursorTo(t,Math.max(l.start+1,n+p.length-l.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),r=this.selection.getWordRange().start.column,a=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),f=t-r-1;f<0&&(f=0);var d=0,h=0,p=this;n.match(/[A-Za-z0-9_]+/)&&a.forEach((function(t,a){h=d+t.length,f>=d&&f<=h&&(n=t,p.selection.clearSelection(),p.moveCursorTo(e,d+r),p.selection.selectTo(e,h+r)),d=h}));for(var y,w=this.$toggleWordPairs,x=0;x<w.length;x++)for(var _=w[x],S=0;S<=1;S++){var k=+!S,C=n.match(new RegExp("^\\s?_?("+l.escapeRegExp(_[S])+")\\s?$","i"));if(C)n.match(new RegExp("([_]|^|\\s)("+l.escapeRegExp(C[1])+")($|\\s)","g"))&&(y=n.replace(new RegExp(l.escapeRegExp(_[S]),"i"),(function(e){var t=_[k];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+_[k].charAt(0).toUpperCase()+t.substr(1)),t})),this.insert(y),y="")}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var a=n.start.row;t.duplicateLines(a,a)}else{var l=r?n.start:n.end,f=t.insert(l,t.getTextRange(n),!1);n.start=l,n.end=f,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,r,a=this.selection;if(!a.inMultiSelectMode||this.inVirtualSelectionMode){var l=a.toOrientedRange();n=this.$getSelectedRows(l),r=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(r=0),l.moveBy(r,0),a.fromOrientedRange(l)}else{var f=a.rangeList.ranges;a.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var d=0,h=0,p=f.length,y=0;y<p;y++){var w=y;f[y].moveBy(d,0);for(var x=(n=this.$getSelectedRows(f[y])).first,_=n.last;++y<p;){h&&f[y].moveBy(h,0);var S=this.$getSelectedRows(f[y]);if(t&&S.first!=_)break;if(!t&&S.first>_+1)break;_=S.last}for(y--,d=this.session.$moveLines(x,_,t?0:e),t&&-1==e&&(w=y+1);w<=y;)f[w].moveBy(d,0),w++;t||(d=0),h+=d}a.fromOrientedRange(a.ranges[0]),a.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,a=e*Math.floor(r.height/r.lineHeight);!0===t?this.selection.$moveSelection((function(){this.moveCursorBy(a,0)})):!1===t&&(this.selection.moveCursorBy(a,0),this.selection.clearSelection());var l=n.scrollTop;n.scrollBy(0,a*r.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(l)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),r=new O(this.session,n.row,n.column),a=r.getCurrentToken(),l=a||r.stepForward();if(l){var f,d,h=!1,p={},y=n.column-l.start,w={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(l.value.match(/[{}()\[\]]/g)){for(;y<l.value.length&&!h;y++)if(w[l.value[y]])switch(d=w[l.value[y]]+"."+l.type.replace("rparen","lparen"),isNaN(p[d])&&(p[d]=0),l.value[y]){case"(":case"[":case"{":p[d]++;break;case")":case"]":case"}":p[d]--,-1===p[d]&&(f="bracket",h=!0)}}else-1!==l.type.indexOf("tag-name")&&(isNaN(p[l.value])&&(p[l.value]=0),"<"===a.value?p[l.value]++:"</"===a.value&&p[l.value]--,-1===p[l.value]&&(f="tag",h=!0));h||(a=l,l=r.stepForward(),y=0)}while(l&&!h);if(f){var x,S;if("bracket"===f)(x=this.session.getBracketRange(n))||(S=(x=new _(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+y-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+y-1)).start,(t||S.row===n.row&&Math.abs(S.column-n.column)<2)&&(x=this.session.getBracketRange(S)));else if("tag"===f){if(!l||-1===l.type.indexOf("tag-name"))return;var k=l.value;if(0===(x=new _(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2)).compare(n.row,n.column)){h=!1;do{l=a,(a=r.stepBackward())&&(-1!==a.type.indexOf("tag-close")&&x.setEnd(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1),l.value===k&&-1!==l.type.indexOf("tag-name")&&("<"===a.value?p[k]++:"</"===a.value&&p[k]--,0===p[k]&&(h=!0)))}while(a&&!h)}l&&l.type.indexOf("tag-name")&&(S=x.start).row==n.row&&Math.abs(S.column-n.column)<2&&(S=x.end)}(S=x&&x.cursor||S)&&(e?x&&t?this.selection.setRange(x):x&&x.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(S.row,S.column):this.selection.moveTo(S.row,S.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;var a=this.getSelectionRange();this.selection.moveTo(0,0);for(var l=n.length-1;l>=0;--l)this.$tryReplace(n[l],e)&&r++;return this.selection.setSelectionRange(a),r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return null!==(t=this.$search.replace(n,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&r.mixin(t,e);var a=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(a)||this.$search.$options.needle)||(a=this.session.getWordRange(a.start.row,a.start.column),e=this.session.getTextRange(a)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:a});var l=this.$search.find(this.session);return t.preventScroll?l:l?(this.revealRange(l,n),l):(t.backwards?a.start=a.end:a.end=a.start,void this.selection.setRange(a))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach((function(e){e.destroy()})),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var a=this.$scrollAnchor;a.style.cssText="position:absolute",this.container.insertBefore(a,this.container.firstChild);var l=this.on("changeSelection",(function(){r=!0})),f=this.renderer.on("beforeRender",(function(){r&&(t=n.renderer.container.getBoundingClientRect())})),d=this.renderer.on("afterRender",(function(){if(r&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,l=e.$cursorLayer.$pixelPos,f=e.layerConfig,d=l.top-f.offset;null!=(r=l.top>=0&&d+t.top<0||!(l.top<f.height&&l.top+t.top+f.lineHeight>window.innerHeight)&&null)&&(a.style.top=d+"px",a.style.left=l.left+"px",a.style.height=f.lineHeight+"px",a.scrollIntoView(r)),r=t=null}}));this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",l),this.renderer.off("afterRender",d),this.renderer.off("beforeRender",f))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,a.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},this.prompt=function(e,t,n){var r=this;E.loadModule("./ext/prompt",(function(a){a.prompt(r,e,t,n)}))}}.call(T.prototype),E.defineOptions(T.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?A.attach(this):A.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?A.attach(this):A.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.getValue());if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),a.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(e||this.renderer.placeholderNode)!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"");else{this.renderer.on("afterRender",this.$updatePlaceholder),a.addCssClass(this.container,"ace_hasPlaceholder");var t=a.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var A={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"·":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=T})),ace.define("ace/undomanager",[],(function(e,t,n){"use strict";var r=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){this.$fromUndo||e!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),!1!==t&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev),"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e),this.lastDeltas.push(e))},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,r=n.length;r--;){var a=n[r][0];if(a.id<=e)break;a.id<t&&(a.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var n=this.selections,r=n.length;r--;){var a=n[r];if(a.rev<e)return t&&(a=n[r+1]),a}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,r=null,a=0,l=n.length;l--;){var f=n[l][0];if(f.id<t&&!r&&(r=l+1),f.id<=e){a=l+1;break}}return n.slice(a,r)},this.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},this.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(function(e,t){for(var n=t;n--;){var r=e[n];if(r&&!r[0].ignore){for(;n<t-1;){var a=y(e[n],e[n+1]);e[n]=a[0],e[n+1]=a[1],n++}return!0}}}(n,n.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var r=n.pop(),a=null;return r&&(a=e.undoChanges(r,t),this.$redoStack.push(r),this.$syncRev()),this.$fromUndo=!1,a}},this.redo=function(e,t){if(this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],a=0;a<r.length;a++)k(e,r[a])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(e){e[0].id=++this.$maxRev}),this)}var r=this.$redoStack.pop(),a=null;return r&&(a=e.redoChanges(r,t),this.$undoStack.push(r),this.$syncRev()),this.$fromUndo=!1,a},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){null==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?d(e):d(this.$undoStack)+"\n---\n"+d(this.$redoStack)}}).call(r.prototype);var a=e("./range").Range,l=a.comparePoints;a.comparePoints;function f(e){return{row:e.row,column:e.column}}function d(e){if(e=e||this,Array.isArray(e))return e.map(d).join("\n");var t="";return e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(h).join("\n"):h(e.value)),e.start&&(t+=h(e)),(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")"),t}function h(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function p(e,t){var n="insert"==e.action,r="insert"==t.action;if(n&&r)if(l(t.start,e.end)>=0)x(t,e,-1);else{if(!(l(t.start,e.start)<=0))return null;x(e,t,1)}else if(n&&!r)if(l(t.start,e.end)>=0)x(t,e,-1);else{if(!(l(t.end,e.start)<=0))return null;x(e,t,-1)}else if(!n&&r)if(l(t.start,e.start)>=0)x(t,e,1);else{if(!(l(t.start,e.start)<=0))return null;x(e,t,1)}else if(!n&&!r)if(l(t.start,e.start)>=0)x(t,e,1);else{if(!(l(t.end,e.start)<=0))return null;x(e,t,-1)}return[t,e]}function y(e,t){for(var n=e.length;n--;)for(var r=0;r<t.length;r++)if(!p(e[n],t[r])){for(;n<e.length;){for(;r--;)p(t[r],e[n]);r=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function w(e,t){var n="insert"==e.action,r="insert"==t.action;if(n&&r)l(e.start,t.start)<0?x(t,e,1):x(e,t,1);else if(n&&!r)l(e.start,t.end)>=0?x(e,t,-1):(l(e.start,t.start)<=0||x(e,a.fromPoints(t.start,e.start),-1),x(t,e,1));else if(!n&&r)l(t.start,e.end)>=0?x(t,e,-1):(l(t.start,e.start)<=0||x(t,a.fromPoints(e.start,t.start),-1),x(e,t,1));else if(!n&&!r)if(l(t.start,e.end)>=0)x(t,e,-1);else{var f,d;if(!(l(t.end,e.start)<=0))return l(e.start,t.start)<0&&(f=e,e=S(e,t.start)),l(e.end,t.end)>0&&(d=S(e,t.end)),_(t.end,e.start,e.end,-1),d&&!f&&(e.lines=d.lines,e.start=d.start,e.end=d.end,d=e),[t,f,d].filter(Boolean);x(e,t,-1)}return[t,e]}function x(e,t,n){_(e.start,t.start,t.end,n),_(e.end,t.start,t.end,n)}function _(e,t,n,r){e.row==(1==r?t:n).row&&(e.column+=r*(n.column-t.column)),e.row+=r*(n.row-t.row)}function S(e,t){var n=e.lines,r=e.end;e.end=f(t);var a=e.end.row-e.start.row,l=n.splice(a,n.length),d=a?t.column:t.column-e.start.column;return n.push(l[0].substring(0,d)),l[0]=l[0].substr(d),{start:f(t),end:r,lines:l,action:e.action}}function k(e,t){t=function(e){return{start:f(e.start),end:f(e.end),action:e.action,lines:e.lines.slice()}}(t);for(var n=e.length;n--;){for(var r=e[n],a=0;a<r.length;a++){var l=w(r[a],t);t=l[0],2!=l.length&&(l[2]?(r.splice(a+1,1,l[1],l[2]),a++):l[1]||(r.splice(a,1),a--))}r.length||e.splice(n,1)}return e}t.UndoManager=r})),ace.define("ace/layer/lines",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){r.translate(this.element,0,-e.firstRowScreen*e.lineHeight%this.canvasHeight-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var r=t.firstRowScreen*t.lineHeight,a=Math.floor(r/this.canvasHeight);return n.documentToScreenRow(e,0)*t.lineHeight-a*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLineCount(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=r.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=r.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,n,a){var l=this.cellCache.pop();if(!l){var f=r.createElement("div");a&&a(f),this.element.appendChild(f),l={element:f,text:"",row:e}}return l.row=e,l}}).call(a.prototype),t.Lines=a})),ace.define("ace/layer/gutter",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=e("../lib/oop"),l=e("../lib/lang"),f=e("../lib/event_emitter").EventEmitter,d=e("./lines").Lines,h=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new d(this.element),this.$lines.$offsetCoefficient=1};function p(e){var t=document.createTextNode("");e.appendChild(t);var n=r.createElement("span");return e.appendChild(n),e}(function(){a.implement(this,f),this.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,a=this.$annotations[r];a||(a=this.$annotations[r]={text:[]});var f=n.text;f=f?l.escapeHTML(f):n.html||"",-1===a.text.indexOf(f)&&a.text.push(f);var d=n.type;"error"==d?a.className=" ace_error":"warning"==d&&" ace_error"!=a.className?a.className=" ace_warning":"info"!=d||a.className||(a.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0===n);else if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var r=new Array(n+1);r.unshift(t,1),this.$annotations.splice.apply(this.$annotations,r)}}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=r,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var a=t.getNextFoldLine(n),l=a?a.start.row:1/0,f=null,d=-1,h=n;;){if(h>l&&(h=a.end.row+1,l=(a=t.getNextFoldLine(h,a))?a.start.row:1/0),h>r){for(;this.$lines.getLength()>d+1;)this.$lines.pop();break}(f=this.$lines.get(++d))?f.row=h:(f=this.$lines.createCell(h,e,this.session,p),this.$lines.push(f)),this.$renderCell(f,e,a,h),h++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,r=t.$firstLineNumber,a=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(a=t.getLength()+r-1);var l=n?n.getWidth(t,a,e):a.toString().length*e.characterWidth,f=this.$padding||this.$computePadding();(l+=f.left+f.right)===this.gutterWidth||isNaN(l)||(this.gutterWidth=l,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",l))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var r=t[n];if(r.row>=this.$cursorRow){if(r.row>this.$cursorRow){var a=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&a&&a.start.row==t[n-1].row))break;r=t[n-1]}r.element.className="ace_gutter-active-line "+r.element.className,this.$cursorCell=r;break}}}}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),r=this.oldLastRow;if(this.oldLastRow=n,!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var a=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);a>0;a--)this.$lines.shift();if(r>n)for(a=this.session.getFoldedRowCount(n+1,r);a>0;a--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>r&&this.$lines.push(this.$renderLines(e,r+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){for(var r=[],a=t,l=this.session.getNextFoldLine(a),f=l?l.start.row:1/0;a>f&&(a=l.end.row+1,f=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(a>n);){var d=this.$lines.createCell(a,e,this.session,p);this.$renderCell(d,e,l,a),r.push(d),a++}return r},this.$renderCell=function(e,t,n,a){var l=e.element,f=this.session,d=l.childNodes[0],h=l.childNodes[1],p=f.$firstLineNumber,y=f.$breakpoints,w=f.$decorations,x=f.gutterRenderer||this.$renderer,_=this.$showFoldWidgets&&f.foldWidgets,S=n?n.start.row:Number.MAX_VALUE,k="ace_gutter-cell ";if(this.$highlightGutterLine&&(a==this.$cursorRow||n&&a<this.$cursorRow&&a>=S&&this.$cursorRow<=n.end.row)&&(k+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),y[a]&&(k+=y[a]),w[a]&&(k+=w[a]),this.$annotations[a]&&(k+=this.$annotations[a].className),l.className!=k&&(l.className=k),_){var C=_[a];null==C&&(C=_[a]=f.getFoldWidget(a))}if(C){k="ace_fold-widget ace_"+C;"start"==C&&a==S&&a<n.end.row?k+=" ace_closed":k+=" ace_open",h.className!=k&&(h.className=k);var E=t.lineHeight+"px";r.setStyle(h.style,"height",E),r.setStyle(h.style,"display","inline-block")}else h&&r.setStyle(h.style,"display","none");var O=(x?x.getText(f,a):a+p).toString();return O!==d.data&&(d.data=O),r.setStyle(e.element.style,"height",this.$lines.computeLineHeight(a,t,f)+"px"),r.setStyle(e.element.style,"top",this.$lines.computeLineTop(a,t,f)+"px"),e.text=O,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(h.prototype),t.Gutter=h})),ace.define("ace/layer/marker",[],(function(e,t,n){"use strict";var r=e("../range").Range,a=e("../lib/dom"),l=function(e){this.element=a.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(e){var t;for(var n in this.config=e,this.i=0,this.markers){var r=this.markers[n];if(r.range){var a=r.range.clipRows(e.firstRow,e.lastRow);if(!a.isEmpty())if(a=a.toScreenRange(this.session),r.renderer){var l=this.$getTop(a.start.row,e),f=this.$padding+a.start.column*e.characterWidth;r.renderer(t,a,f,l,e)}else"fullLine"==r.type?this.drawFullLineMarker(t,a,r.clazz,e):"screenLine"==r.type?this.drawScreenLineMarker(t,a,r.clazz,e):a.isMultiLine()?"text"==r.type?this.drawTextMarker(t,a,r.clazz,e):this.drawMultiLineMarker(t,a,r.clazz,e):this.drawSingleLineMarker(t,a,r.clazz+" ace_start ace_br15",e)}else r.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,a,l){for(var f=this.session,d=t.start.row,h=t.end.row,p=d,y=0,w=0,x=f.getScreenLastRowColumn(p),_=new r(p,t.start.column,p,w);p<=h;p++)_.start.row=_.end.row=p,_.start.column=p==d?t.start.column:f.getRowWrapIndent(p),_.end.column=x,y=w,w=x,x=p+1<h?f.getScreenLastRowColumn(p+1):p==h?0:t.end.column,this.drawSingleLineMarker(e,_,n+(p==d?" ace_start":"")+" ace_br"+((p==d||p==d+1&&t.start.column?1:0)|(y<w?2:0)|(w>x?4:0)|(p==h?8:0)),a,p==h?0:1,l)},this.drawMultiLineMarker=function(e,t,n,r,a){var l=this.$padding,f=r.lineHeight,d=this.$getTop(t.start.row,r),h=l+t.start.column*r.characterWidth;(a=a||"",this.session.$bidiHandler.isBidiRow(t.start.row))?((p=t.clone()).end.row=p.start.row,p.end.column=this.session.getLine(p.start.row).length,this.drawBidiSingleLineMarker(e,p,n+" ace_br1 ace_start",r,null,a)):this.elt(n+" ace_br1 ace_start","height:"+f+"px;right:0;top:"+d+"px;left:"+h+"px;"+(a||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var p;(p=t.clone()).start.row=p.end.row,p.start.column=0,this.drawBidiSingleLineMarker(e,p,n+" ace_br12",r,null,a)}else{d=this.$getTop(t.end.row,r);var y=t.end.column*r.characterWidth;this.elt(n+" ace_br12","height:"+f+"px;width:"+y+"px;top:"+d+"px;left:"+l+"px;"+(a||""))}if(!((f=(t.end.row-t.start.row-1)*r.lineHeight)<=0)){d=this.$getTop(t.start.row+1,r);var w=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(w?" ace_br"+w:""),"height:"+f+"px;right:0;top:"+d+"px;left:"+l+"px;"+(a||""))}},this.drawSingleLineMarker=function(e,t,n,r,a,l){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,r,a,l);var f=r.lineHeight,d=(t.end.column+(a||0)-t.start.column)*r.characterWidth,h=this.$getTop(t.start.row,r),p=this.$padding+t.start.column*r.characterWidth;this.elt(n,"height:"+f+"px;width:"+d+"px;top:"+h+"px;left:"+p+"px;"+(l||""))},this.drawBidiSingleLineMarker=function(e,t,n,r,a,l){var f=r.lineHeight,d=this.$getTop(t.start.row,r),h=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach((function(e){this.elt(n,"height:"+f+"px;width:"+e.width+(a||0)+"px;top:"+d+"px;left:"+(h+e.left)+"px;"+(l||""))}),this)},this.drawFullLineMarker=function(e,t,n,r,a){var l=this.$getTop(t.start.row,r),f=r.lineHeight;t.start.row!=t.end.row&&(f+=this.$getTop(t.end.row,r)-l),this.elt(n,"height:"+f+"px;top:"+l+"px;left:0;right:0;"+(a||""))},this.drawScreenLineMarker=function(e,t,n,r,a){var l=this.$getTop(t.start.row,r),f=r.lineHeight;this.elt(n,"height:"+f+"px;top:"+l+"px;left:0;right:0;"+(a||""))}}).call(l.prototype),t.Marker=l})),ace.define("ace/layer/text",[],(function(e,t,n){"use strict";var r=e("../lib/oop"),a=e("../lib/dom"),l=e("../lib/lang"),f=e("./lines").Lines,d=e("../lib/event_emitter").EventEmitter,h=function(e){this.dom=a,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new f(this.element)};(function(){r.implement(this,d),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,t="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,"string"==typeof e?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++){if(this.showTabs)(r=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",r.textContent=l.stringRepeat(this.TAB_CHAR,n),t.push(r);else t.push(this.dom.createTextNode(l.stringRepeat(" ",n),this.element))}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r,a="ace_indent-guide",f=this.showSpaces?" ace_invisible ace_invisible_space":"",d=this.showSpaces?l.stringRepeat(this.SPACE_CHAR,this.tabSize):l.stringRepeat(" ",this.tabSize),h=this.showTabs?" ace_invisible ace_invisible_tab":"",p=this.showTabs?l.stringRepeat(this.TAB_CHAR,this.tabSize):d;(r=this.dom.createElement("span")).className=a+f,r.textContent=d,this.$tabStrings[" "]=r,(r=this.dom.createElement("span")).className=a+h,r.textContent=p,this.$tabStrings["\t"]=r}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var r=Math.max(t,e.firstRow),a=Math.min(n,e.lastRow),l=this.element.childNodes,f=0,d=e.firstRow;d<r;d++){if(h=this.session.getFoldLine(d)){if(h.containsRow(r)){r=h.start.row;break}d=h.end.row}f++}for(var h,p=!1,y=(d=r,(h=this.session.getNextFoldLine(d))?h.start.row:1/0);d>y&&(d=h.end.row+1,y=(h=this.session.getNextFoldLine(d,h))?h.start.row:1/0),!(d>a);){var w=l[f++];if(w){this.dom.removeChildren(w),this.$renderLine(w,d,d==y&&h),p&&(w.style.top=this.$lines.computeLineTop(d,e,this.session)+"px");var x=e.lineHeight*this.session.getRowLength(d)+"px";w.style.height!=x&&(p=!0,w.style.height=x)}d++}if(p)for(;f<this.$lines.cells.length;){var _=this.$lines.cells[f++];_.element.style.top=this.$lines.computeLineTop(_.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,r=t?t.lastRow:-1;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var a=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);a>0;a--)this.$lines.shift();if(t.lastRow>e.lastRow)for(a=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);a>0;a--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,n){for(var r=[],l=t,f=this.session.getNextFoldLine(l),d=f?f.start.row:1/0;l>d&&(l=f.end.row+1,d=(f=this.session.getNextFoldLine(l,f))?f.start.row:1/0),!(l>n);){var h=this.$lines.createCell(l,e,this.session),p=h.element;this.dom.removeChildren(p),a.setStyle(p.style,"height",this.$lines.computeLineHeight(l,e,this.session)+"px"),a.setStyle(p.style,"top",this.$lines.computeLineTop(l,e,this.session)+"px"),this.$renderLine(p,l,l==d&&f),this.$useLineGroups()?p.className="ace_line_group":p.className="ace_line",r.push(h),l++}return r},this.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,n=e.lastRow,r=this.$lines;r.getLength();)r.pop();r.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){for(var a,f=this,d=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,h=this.dom.createFragment(this.element),p=0;a=d.exec(r);){var y=a[1],w=a[2],x=a[3],_=a[4],S=a[5];if(f.showSpaces||!w){var k=p!=a.index?r.slice(p,a.index):"";if(p=a.index+a[0].length,k&&h.appendChild(this.dom.createTextNode(k,this.element)),y){var C=f.session.getScreenTabSize(t+a.index);h.appendChild(f.$tabStrings[C].cloneNode(!0)),t+=C-1}else if(w){if(f.showSpaces)(O=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",O.textContent=l.stringRepeat(f.SPACE_CHAR,w.length),h.appendChild(O);else h.appendChild(this.com.createTextNode(w,this.element))}else if(x){(O=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",O.textContent=l.stringRepeat(f.SPACE_CHAR,x.length),h.appendChild(O)}else if(_){t+=1,(O=this.dom.createElement("span")).style.width=2*f.config.characterWidth+"px",O.className=f.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",O.textContent=f.showSpaces?f.SPACE_CHAR:_,h.appendChild(O)}else if(S){t+=1,(O=this.dom.createElement("span")).style.width=2*f.config.characterWidth+"px",O.className="ace_cjk",O.textContent=S,h.appendChild(O)}}}if(h.appendChild(this.dom.createTextNode(p?r.slice(p):r,this.element)),this.$textToken[n.type])e.appendChild(h);else{var E="ace_"+n.type.replace(/\./g," ace_"),O=this.dom.createElement("span");"fold"==n.type&&(O.style.width=n.value.length*this.config.characterWidth+"px"),O.className=E,O.appendChild(h),e.appendChild(O)}return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);if(r<=0||r>=n)return t;if(" "==t[0]){for(var a=(r-=r%this.tabSize)/this.tabSize,l=0;l<a;l++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(r)}if("\t"==t[0]){for(l=0;l<r;l++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return t.substr(r)}return t},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var r=0,a=0,f=n[0],d=0,h=this.$createLineElement();e.appendChild(h);for(var p=0;p<t.length;p++){var y=t[p],w=y.value;if(0==p&&this.displayIndentGuides){if(r=w.length,!(w=this.renderIndentGuide(h,w,f)))continue;r-=w.length}if(r+w.length<f)d=this.$renderToken(h,d,y,w),r+=w.length;else{for(;r+w.length>=f;)d=this.$renderToken(h,d,y,w.substring(0,f-r)),w=w.substring(f-r),r=f,h=this.$createLineElement(),e.appendChild(h),h.appendChild(this.dom.createTextNode(l.stringRepeat(" ",n.indent),this.element)),d=0,f=n[++a]||Number.MAX_VALUE;0!=w.length&&(r+=w.length,d=this.$renderToken(h,d,y,w))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(h,d,null,"",!0)},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],a=r.value;this.displayIndentGuides&&(a=this.renderIndentGuide(e,a)),a&&(n=this.$renderToken(e,n,r,a));for(var l=1;l<t.length;l++){if(n+(a=(r=t[l]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,r,a);n=this.$renderToken(e,n,r,a)}},this.$renderOverflowMessage=function(e,t,n,r,a){n&&this.$renderToken(e,t,n,r.slice(0,this.MAX_LINE_LENGTH-t));var l=this.dom.createElement("span");l.className="ace_inline_button ace_keyword ace_toggle_wrap",l.textContent=a?"<hide>":"<click to see more...>",e.appendChild(l)},this.$renderLine=function(e,t,n){if(n||0==n||(n=this.session.getFoldLine(t)),n)var r=this.$getFoldLineTokens(t,n);else r=this.session.getTokens(t);var a=e;if(r.length){var l=this.session.getRowSplitData(t);if(l&&l.length){this.$renderWrappedLine(e,r,l);a=e.lastChild}else{a=e;this.$useLineGroups()&&(a=this.$createLineElement(),e.appendChild(a)),this.$renderSimpleLine(a,r)}}else this.$useLineGroups()&&(a=this.$createLineElement(),e.appendChild(a));if(this.showEOL&&a){n&&(t=n.end.row);var f=this.dom.createElement("span");f.className="ace_invisible ace_invisible_eol",f.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,a.appendChild(f)}},this.$getFoldLineTokens=function(e,t){var n=this.session,r=[];var a=n.getTokens(e);return t.walk((function(e,t,l,f,d){null!=e?r.push({type:"fold",value:e}):(d&&(a=n.getTokens(t)),a.length&&function(e,t,n){for(var a=0,l=0;l+e[a].value.length<t;)if(l+=e[a].value.length,++a==e.length)return;for(l!=t&&((f=e[a].value.substring(t-l)).length>n-t&&(f=f.substring(0,n-t)),r.push({type:e[a].type,value:f}),l=t+f.length,a+=1);l<n&&a<e.length;){var f;(f=e[a].value).length+l>n?r.push({type:e[a].type,value:f.substring(0,n-l)}):r.push(e[a]),l+=f.length,a+=1}}(a,f,l))}),t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(h.prototype),t.Text=h})),ace.define("ace/layer/cursor",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)r.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){r.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){r.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),r.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout((function(){e(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){e(!0),t()}),this.blinkInterval),t()}else this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,a=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);n=0;for(var l=t.length;n<l;n++){var f=this.getPixelPosition(t[n].cursor,!0);if(!((f.top>e.height+e.offset||f.top<0)&&n>1)){var d=this.cursors[a++]||this.addCursor(),h=d.style;this.drawCursor?this.drawCursor(d,f,e,t[n],this.session):this.isCursorInView(f,e)?(r.setStyle(h,"display","block"),r.translate(d,f.left,f.top),r.setStyle(h,"width",Math.round(e.characterWidth)+"px"),r.setStyle(h,"height",e.lineHeight+"px")):r.setStyle(h,"display","none")}}for(;this.cursors.length>a;)this.removeCursor();var p=this.session.getOverwrite();this.$setOverwrite(p),this.$pixelPos=f,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(a.prototype),t.Cursor=a})),ace.define("ace/scrollbar",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/dom"),l=e("./lib/event"),f=e("./lib/event_emitter").EventEmitter,d=32768,h=function(e){this.element=a.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=a.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addListener(this.element,"scroll",this.onScroll.bind(this)),l.addListener(this.element,"mousedown",l.preventDefault)};(function(){r.implement(this,f),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(h.prototype);var p=function(e,t){h.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=a.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};r.inherits(p,h),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>d?(this.coeff=d/e,e=d):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(p.prototype);var y=function(e,t){h.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(y,h),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(y.prototype),t.ScrollBar=p,t.ScrollBarV=p,t.ScrollBarH=y,t.VScrollBar=p,t.HScrollBar=y})),ace.define("ace/renderloop",[],(function(e,t,n){"use strict";var r=e("./lib/event"),a=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;if(t&&(r.blockIdle(100),n.changes=0,n.onRender(t)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(r.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(a.prototype),t.RenderLoop=a})),ace.define("ace/layer/font_metrics",[],(function(e,t,n){var r=e("../lib/oop"),a=e("../lib/dom"),l=e("../lib/lang"),f=e("../lib/event"),d=e("../lib/useragent"),h=e("../lib/event_emitter").EventEmitter,p=256,y="function"==typeof ResizeObserver,w=200,x=t.FontMetrics=function(e){this.el=a.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=a.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=a.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=l.stringRepeat("X",p),this.$characterSize={width:0,height:0},y?this.$addObserver():this.checkForSizeChanges()};(function(){r.implement(this,h),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",d.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){if(void 0===e&&(e=this.$measureSizes()),e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver((function(t){e.checkForSizeChanges()})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=f.onIdle((function t(){e.checkForSizeChanges(),f.onIdle(t,500)}),500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/p};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.textContent=l.stringRepeat(e,p),this.$main.getBoundingClientRect().width/p},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t&&t.parentElement?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=a.buildDom([e(0,0),e(w,0),e(0,w),e(w,w)],this.el)},this.transformCoordinates=function(e,t){e&&(e=l(1/this.$getZoom(this.el),e));function n(e,t,n){var r=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/r,(+e[1]*n[0]-e[0]*n[1])/r]}function r(e,t){return[e[0]-t[0],e[1]-t[1]]}function a(e,t){return[e[0]+t[0],e[1]+t[1]]}function l(e,t){return[e*t[0],e*t[1]]}function f(e){var t=e.getBoundingClientRect();return[t.left,t.top]}this.els||this.$initTransformMeasureNodes();var d=f(this.els[0]),h=f(this.els[1]),p=f(this.els[2]),y=f(this.els[3]),x=n(r(y,h),r(y,p),r(a(h,p),a(y,d))),_=l(1+x[0],r(h,d)),S=l(1+x[1],r(p,d));if(t){var k=t,C=x[0]*k[0]/w+x[1]*k[1]/w+1,E=a(l(k[0],_),l(k[1],S));return a(l(1/C/w,E),d)}var O=r(e,d),j=n(r(_,l(x[0],O)),r(S,l(x[1],O)),O);return l(w,j)}}).call(x.prototype)})),ace.define("ace/virtual_renderer",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/dom"),l=e("./config"),f=e("./layer/gutter").Gutter,d=e("./layer/marker").Marker,h=e("./layer/text").Text,p=e("./layer/cursor").Cursor,y=e("./scrollbar").HScrollBar,w=e("./scrollbar").VScrollBar,x=e("./renderloop").RenderLoop,_=e("./layer/font_metrics").FontMetrics,S=e("./lib/event_emitter").EventEmitter,k='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',C=e("./lib/useragent"),E=C.isIE;a.importCssString(k,"ace_editor.css");var O=function(e,t){var n=this;this.container=e||a.createElement("div"),a.addCssClass(this.container,"ace_editor"),a.HI_DPI&&a.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),this.$gutter=a.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=a.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=a.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new f(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new d(this.content);var r=this.$textLayer=new h(this.content);this.canvas=r.element,this.$markerFront=new d(this.content),this.$cursorLayer=new p(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new w(this.container,this),this.scrollBarH=new y(this.container,this),this.scrollBarV.on("scroll",(function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)})),this.scrollBarH.on("scroll",(function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new _(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",(function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!C.isIOS,this.$loop=new x(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),l.resetOptions(this),l._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,S),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),a.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var a=this.container;r||(r=a.clientHeight||a.scrollHeight),n||(n=a.clientWidth||a.scrollWidth);var l=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(l|this.$changes,!0):this.$loop.schedule(l|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var l=0,f=this.$size,d={width:f.width,height:f.height,scrollerHeight:f.scrollerHeight,scrollerWidth:f.scrollerWidth};if(r&&(e||f.height!=r)&&(f.height=r,l|=this.CHANGE_SIZE,f.scrollerHeight=f.height,this.$horizScroll&&(f.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",l|=this.CHANGE_SCROLL),n&&(e||f.width!=n)){l|=this.CHANGE_SIZE,f.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,a.setStyle(this.scrollBarH.element.style,"left",t+"px"),a.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),f.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),a.setStyle(this.$gutter.style,"left",this.margin.left+"px");var h=this.scrollBarV.getWidth()+"px";a.setStyle(this.scrollBarH.element.style,"right",h),a.setStyle(this.scroller.style,"right",h),a.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(l|=this.CHANGE_FULL)}return f.$dirty=!n||!r,l&&this._signal("resize",d),l},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=a.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=a.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(this.$keepTextAreaAtCursor||t){var n=this.$cursorLayer.$pixelPos;if(n){t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var r=this.layerConfig,l=n.top,f=n.left;l-=r.offset;var d=t&&t.useTextareaForIME?this.lineHeight:E?0:1;if(l<0||l>r.height-d)a.translate(this.textarea,0,0);else{var h=1,p=this.$size.height-d;if(t)if(t.useTextareaForIME){var y=this.textarea.value;h=this.characterWidth*this.session.$getStringScreenWidth(y)[0]}else l+=this.lineHeight+2;else l+=this.lineHeight;(f-=this.scrollLeft)>this.$size.scrollerWidth-h&&(f=this.$size.scrollerWidth-h),f+=this.gutterWidth+this.margin.left,a.setStyle(e,"height",d+"px"),a.setStyle(e,"width",h+"px"),a.translate(this.textarea,Math.min(f,this.$size.scrollerWidth-h),Math.min(l,p))}}}else a.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var a=this.scrollMargin;a.top=0|e,a.bottom=0|t,a.right=0|r,a.left=0|n,a.v=a.top+a.bottom,a.h=a.left+a.right,a.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-a.top),this.updateFull()},this.setMargin=function(e,t,n,r){var a=this.margin;a.top=0|e,a.bottom=0|t,a.right=0|r,a.left=0|n,a.v=a.top+a.bottom,a.h=a.left+a.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),a.translate(this.content,-this.scrollLeft,-n.offset);var l=n.width+2*this.$padding+"px",f=n.minHeight+"px";a.setStyle(this.content.style,"width",l),a.setStyle(this.content.style,"height",f)}if(e&this.CHANGE_H_SCROLL&&(a.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);if(e&this.CHANGE_SCROLL)return this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender",e)}else this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var r=!(n<=2*this.lineHeight)&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var a=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,a,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength()*this.lineHeight,a=this.$getLongestLine(),l=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-a-2*this.$padding<0),f=this.$horizScroll!==l;f&&(this.$horizScroll=l,this.scrollBarH.setVisible(l));var d=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var h=t.scrollerHeight+this.lineHeight,p=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;r+=p;var y=this.scrollMargin;this.session.setScrollTop(Math.max(-y.top,Math.min(this.scrollTop,r-t.scrollerHeight+y.bottom))),this.session.setScrollLeft(Math.max(-y.left,Math.min(this.scrollLeft,a+2*this.$padding-t.scrollerWidth+y.right)));var w=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-r+p<0||this.scrollTop>y.top),x=d!==w;x&&(this.$vScroll=w,this.scrollBarV.setVisible(w));var _,S,k=this.scrollTop%this.lineHeight,C=Math.ceil(h/this.lineHeight)-1,E=Math.max(0,Math.round((this.scrollTop-k)/this.lineHeight)),O=E+C,j=this.lineHeight;E=e.screenToDocumentRow(E,0);var T=e.getFoldLine(E);T&&(E=T.start.row),_=e.documentToScreenRow(E,0),S=e.getRowLength(E)*j,O=Math.min(e.screenToDocumentRow(O,0),e.getLength()-1),h=t.scrollerHeight+e.getRowLength(O)*j+S,k=this.scrollTop-_*j;var A=0;return(this.layerConfig.width!=a||f)&&(A=this.CHANGE_H_SCROLL),(f||x)&&(A|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),x&&(a=this.$getLongestLine())),this.layerConfig={width:a,padding:this.$padding,firstRow:E,firstRowScreen:_,lastRow:O,lineHeight:j,characterWidth:this.characterWidth,minHeight:h,maxHeight:r,offset:k,gutterOffset:j?Math.max(0,Math.ceil((k+t.height-t.scrollerHeight)/j)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(a-this.$padding),A},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1||t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var r=this.$cursorLayer.getPixelPosition(e),a=r.left,l=r.top,f=n&&n.top||0,d=n&&n.bottom||0,h=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;h+f>l?(t&&h+f>l+this.lineHeight&&(l-=t*this.$size.scrollerHeight),0===l&&(l=-this.scrollMargin.top),this.session.setScrollTop(l)):h+this.$size.scrollerHeight-d<l+this.lineHeight&&(t&&h+this.$size.scrollerHeight-d<l-this.lineHeight&&(l+=t*this.$size.scrollerHeight),this.session.setScrollTop(l+this.lineHeight+d-this.$size.scrollerHeight));var p=this.scrollLeft;p>a?(a<this.$padding+2*this.layerConfig.characterWidth&&(a=-this.scrollMargin.left),this.session.setScrollLeft(a)):p+this.$size.scrollerWidth<a+this.characterWidth?this.session.setScrollLeft(Math.round(a+this.characterWidth-this.$size.scrollerWidth)):p<=this.$padding&&a-p<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,a=n.top-r*(t||0);return this.session.setScrollTop(a),a},this.STEPS=8,this.$calcSteps=function(e,t){var n,r,a=0,l=this.STEPS,f=[];for(a=0;a<l;++a)f.push((n=a/this.STEPS,r=e,(t-e)*(Math.pow(n-1,3)+1)+r));return f},this.scrollToLine=function(e,t,n,r){var a=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(a-=this.$size.scrollerHeight/2);var l=this.scrollTop;this.session.setScrollTop(a),!1!==n&&this.animateScrolling(l,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var r=this;if(e!=n){if(this.$scrollAnimation){var a=this.$scrollAnimation.steps;if(a.length&&(e=a[0])==n)return}var l=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:l},clearInterval(this.$timer),r.session.setScrollTop(l.shift()),r.session.$scrollTop=n,this.$timer=setInterval((function(){if(!r.session)return clearInterval(r.$timer);l.length?(r.session.setScrollTop(l.shift()),r.session.$scrollTop=n):null!=n?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())}),10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var a=e+this.scrollLeft-n.left-this.$padding,l=a/this.characterWidth,f=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),d=this.$blockCursor?Math.floor(l):Math.round(l);return{row:f,column:d,side:l-d>0?1:-1,offsetX:a}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var a=e+this.scrollLeft-n.left-this.$padding,l=a/this.characterWidth,f=this.$blockCursor?Math.floor(l):Math.round(l),d=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(d,Math.max(f,0),a)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),a=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,e)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),l=r.row*this.lineHeight;return{pageX:n.left+a-this.scrollLeft,pageY:n.top+l-this.scrollTop}},this.visualizeFocus=function(){a.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){a.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),null==e.useTextareaForIME&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(a.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),a.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(e,t,n,r){var a=this.session;a.bgTokenizer.lines[n]=null;var l={type:t,value:e},f=a.getTokens(n);if(null==r)f.push(l);else for(var d=0,h=0;h<f.length;h++){var p=f[h];if(r<=(d+=p.value.length)){var y=p.value.length-(d-r),w=p.value.slice(0,y),x=p.value.slice(y);f.splice(h,1,{type:p.type,value:w},l,{type:p.type,value:x});break}}this.updateLines(n,n)},this.removeExtraToken=function(e,t){this.updateLines(e,e)},this.setTheme=function(e,t){var n=this;if(this.$themeId=e,n._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)f(e);else{var r=e||this.$options.theme.initialValue;l.loadModule(["theme",r],f)}function f(r){if(n.$themeId!=e)return t&&t();if(!r||!r.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");r.$id&&(n.$themeId=r.$id),a.importCssString(r.cssText,r.cssClass,n.container),n.theme&&a.removeCssClass(n.container,n.theme.cssClass);var l="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&l!=n.$padding&&n.setPadding(l),n.$theme=r.cssClass,n.theme=r,a.addCssClass(n.container,r.cssClass),a.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){a.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){a.removeCssClass(this.container,e)},this.setCursorStyle=function(e){a.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){a.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){a.importCssString(k,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(O.prototype),l.defineOptions(O.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){a.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!C.isMobile&&!C.isIE}}),t.VirtualRenderer=O})),ace.define("ace/worker/worker_client",[],(function(e,t,n){"use strict";var r=e("../lib/oop"),a=e("../lib/net"),l=e("../lib/event_emitter").EventEmitter,f=e("../config");function d(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(f.get("loadWorkerFromBlob")){var t=function(e){var t="importScripts('"+a.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(e){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(t),n.getBlob("application/javascript")}}(e),n=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(n)}return new Worker(e)}var h=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,l),this.$createWorkerFromOldConfig=function(t,n,r,a,l){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),f.get("packaged")||!e.toUrl)a=a||f.moduleUrl(n,"worker");else{var h=this.$normalizePath;a=a||h(e.toUrl("ace/worker/worker.js",null,"_"));var p={};t.forEach((function(t){p[t]=h(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=d(a),l&&this.send("importScripts",l),this.$worker.postMessage({init:!0,tlns:p,module:n,classname:r}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return a.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(h.prototype);t.UIWorkerClient=function(e,t,n){var r=null,a=!1,d=Object.create(l),p=[],y=new h({messageBuffer:p,terminate:function(){},postMessage:function(e){p.push(e),r&&(a?setTimeout(w):w())}});y.setEmitSync=function(e){a=e};var w=function(){var e=p.shift();e.command?r[e.command].apply(r,e.args):e.event&&d._signal(e.event,e.data)};return d.postMessage=function(e){y.onMessage({data:e})},d.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},d.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},f.loadModule(["worker",t],(function(e){for(r=new e[n](d);p.length;)w()})),y},t.WorkerClient=h,t.createWorker=d})),ace.define("ace/placeholder",[],(function(e,t,n){"use strict";var r=e("./range").Range,a=e("./lib/event_emitter").EventEmitter,l=e("./lib/oop"),f=function(e,t,n,r,a,l){var f=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=a,this.othersClass=l,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout((function(){f.onCursorChange()}))},this.$pos=n;var d=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=d.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){l.implement(this,a),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var a=this.pos;a.$insertRight=!0,a.detach(),a.markerId=n.addMarker(new r(a.row,a.column,a.row,a.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var r=t.createAnchor(n.row,n.column);r.$insertRight=!0,r.detach(),e.others.push(r)})),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach((function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,a=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,l=t.start.column-this.pos.column;if(this.updateAnchors(e),a&&(this.length+=n),a&&!this.session.$fromUndo)if("insert"===e.action)for(var f=this.others.length-1;f>=0;f--){var d={row:(h=this.others[f]).row,column:h.column+l};this.doc.insertMergedLines(d,e.lines)}else if("remove"===e.action)for(f=this.others.length-1;f>=0;f--){var h;d={row:(h=this.others[f]).row,column:h.column+l};this.doc.remove(new r(d.row,d.column,d.row,d.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,a){t.removeMarker(n.markerId),n.markerId=t.addMarker(new r(n.row,n.column,n.row,n.column+e.length),a,null,!1)};n(this.pos,this.mainClass);for(var a=this.others.length;a--;)n(this.others[a],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(f.prototype),t.PlaceHolder=f})),ace.define("ace/mouse/multi_select_handler",[],(function(e,t,n){var r=e("../lib/event"),a=e("../lib/useragent");function l(e,t){return e.row==t.row&&e.column==t.column}t.onMouseDown=function(e){var t=e.domEvent,n=t.altKey,f=t.shiftKey,d=t.ctrlKey,h=e.getAccelKey(),p=e.getButton();if(d&&a.isMac&&(p=t.button),e.editor.inMultiSelectMode&&2==p)e.editor.textInput.onContextMenu(e.domEvent);else if(d||n||h){if(0===p){var y,w=e.editor,x=w.selection,_=w.inMultiSelectMode,S=e.getDocumentPosition(),k=x.getCursor(),C=e.inSelection()||x.isEmpty()&&l(S,k),E=e.x,O=e.y,j=w.session,T=w.renderer.pixelToScreenCoordinates(E,O),A=T;if(w.$mouseHandler.$enableJumpToDef)d&&n||h&&n?y=f?"block":"add":n&&w.$blockSelectEnabled&&(y="block");else if(h&&!n){if(y="add",!_&&f)return}else n&&w.$blockSelectEnabled&&(y="block");if(y&&a.isMac&&t.ctrlKey&&w.$mouseHandler.cancelContextMenu(),"add"==y){if(!_&&C)return;if(!_){var P=x.toOrientedRange();w.addSelectionMarker(P)}var D=x.rangeList.rangeAtPoint(S);w.inVirtualSelectionMode=!0,f&&(D=null,P=x.ranges[0]||P,w.removeSelectionMarker(P)),w.once("mouseup",(function(){var e=x.toOrientedRange();D&&e.isEmpty()&&l(D.cursor,e.cursor)?x.substractPoint(e.cursor):(f?x.substractPoint(P.cursor):P&&(w.removeSelectionMarker(P),x.addRange(P)),x.addRange(e)),w.inVirtualSelectionMode=!1}))}else if("block"==y){var R;e.stop(),w.inVirtualSelectionMode=!0;var I=[],M=function(){var e=w.renderer.pixelToScreenCoordinates(E,O),t=j.screenToDocumentPosition(e.row,e.column,e.offsetX);l(A,e)&&l(t,x.lead)||(A=e,w.selection.moveToPosition(t),w.renderer.scrollCursorIntoView(),w.removeSelectionMarkers(I),I=x.rectangularRangeBlock(A,T),w.$mouseHandler.$clickSelection&&1==I.length&&I[0].isEmpty()&&(I[0]=w.$mouseHandler.$clickSelection.clone()),I.forEach(w.addSelectionMarker,w),w.updateSelectionMarkers())};_&&!h?x.toSingleRange():!_&&h&&(R=x.toOrientedRange(),w.addSelectionMarker(R)),f?T=j.documentToScreenPosition(x.lead):x.moveToPosition(S),A={row:-1,column:-1};var L=M;r.capture(w.container,(function(e){E=e.clientX,O=e.clientY}),(function(e){M(),clearInterval(N),w.removeSelectionMarkers(I),I.length||(I=[x.toOrientedRange()]),R&&(w.removeSelectionMarker(R),x.toSingleRange(R));for(var t=0;t<I.length;t++)x.addRange(I[t]);w.inVirtualSelectionMode=!1,w.$mouseHandler.$clickSelection=null}));var N=setInterval((function(){L()}),20);return e.preventDefault()}}}else 0===p&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",[],(function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.rangeCount>1?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)})),ace.define("ace/multi_select",[],(function(e,t,n){var r=e("./range_list").RangeList,a=e("./range").Range,l=e("./selection").Selection,f=e("./mouse/multi_select_handler").onMouseDown,d=e("./lib/event"),h=e("./lib/lang"),p=e("./commands/multi_select_commands");t.commands=p.defaultCommands.concat(p.multiSelectCommands);var y=new(0,e("./search").Search);var w=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(w.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var e=this.ranges.length?this.ranges:[this.getRange()],t=[],n=0;n<e.length;n++){var r=e[n],l=r.start.row,f=r.end.row;if(l===f)t.push(r.clone());else{for(t.push(new a(l,r.start.column,l,this.session.getLine(l).length));++l<f;)t.push(this.getLineRange(l,!0));t.push(new a(f,0,f,r.end.column))}0!=n||this.isBackwards()||(t=t.reverse())}this.toSingleRange();for(n=t.length;n--;)this.addRange(t[n])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],n=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.cursor),l=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(r,l).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],l=e.column<t.column;if(l)var f=e.column,d=t.column,h=e.offsetX,p=t.offsetX;else f=t.column,d=e.column,h=t.offsetX,p=e.offsetX;var y,w,x,_=e.row<t.row;if(_)var S=e.row,k=t.row;else S=t.row,k=e.row;f<0&&(f=0),S<0&&(S=0),S==k&&(n=!0);for(var C=S;C<=k;C++){var E=a.fromPoints(this.session.screenToDocumentPosition(C,f,h),this.session.screenToDocumentPosition(C,d,p));if(E.isEmpty()){if(y&&(w=E.end,x=y,w.row==x.row&&w.column==x.column))break;y=E.end}E.cursor=l?E.start:E.end,r.push(E)}if(_&&r.reverse(),!n){for(var O=r.length-1;r[O].isEmpty()&&O>0;)O--;if(O>0)for(var j=0;r[j].isEmpty();)j++;for(var T=O;T>=j;T--)r[T].isEmpty()&&r.splice(T,1)}return r}}.call(l.prototype);var x=e("./editor").Editor;function _(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",f),e.commands.addCommands(p.defaultCommands),function(e){if(!e.textInput)return;var t=e.textInput.getElement(),n=!1;function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}d.addListener(t,"keydown",(function(t){var a=18==t.keyCode&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&a?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&r()}),e),d.addListener(t,"keyup",r,e),d.addListener(t,"blur",r,e)}(e))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var r=e[n];if(r.marker){this.session.removeMarker(r.marker);var a=t.indexOf(r);-1!=a&&t.splice(a,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(p.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(p.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?r=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?r=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});else{var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return r}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var r,a=n&&n.keepOrder,f=1==n||n&&n.$byLines,d=this.session,h=this.selection,p=h.rangeList,y=(a?h:p).ranges;if(!y.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var w=h._eventRegistry;h._eventRegistry={};var x=new l(d);this.inVirtualSelectionMode=!0;for(var _=y.length;_--;){if(f)for(;_>0&&y[_].start.row==y[_-1].end.row;)_--;x.fromOrientedRange(y[_]),x.index=_,this.selection=d.selection=x;var S=e.exec?e.exec(this,t||{}):e(this,t||{});r||void 0===S||(r=S),x.toOrientedRange(y[_])}x.detach(),this.selection=d.selection=h,this.inVirtualSelectionMode=!1,h._eventRegistry=w,h.mergeOverlappingRanges(),h.ranges[0]&&h.fromOrientedRange(h.ranges[0]);var k=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),k&&k.from==k.to&&this.renderer.animateScrolling(k.from),r}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var a=this.session.getDocument().getNewLineCharacter();(e=n.join(a)).length==(n.length-1)*a.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var r=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;r.row!=t.row||this.session.$clipPositionToDocument(r.row,r.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){if((t=t||{}).needle=e||t.needle,null==t.needle){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(r)}this.$search.set(t);var a=this.$search.findAll(this.session);if(!a.length)return 0;var l=this.multiSelect;n||l.toSingleRange(a[0]);for(var f=a.length;f--;)l.addRange(a[f],!0);return r&&l.rangeList.rangeAtPoint(r.start)&&l.addRange(r,!0),a.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,l=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(l.column=this.selection.$desiredColumn);var f,d=this.session.screenToDocumentPosition(l.row+e,l.column);if(n.isEmpty())p=d;else var h=this.session.documentToScreenPosition(r?n.end:n.start),p=this.session.screenToDocumentPosition(h.row+e,h.column);r?(f=a.fromPoints(d,p)).cursor=f.start:(f=a.fromPoints(p,d)).cursor=f.end;if(f.desiredColumn=l.column,this.selection.inMultiSelectMode){if(t)var y=n.cursor}else this.selection.addRange(n);this.selection.addRange(f),y&&this.selection.substractPoint(y)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,r=n.ranges,a=r.length;a--;){if((d=r[a]).isEmpty()){var l=t.getWordRange(d.start.row,d.start.column);d.start.row=l.start.row,d.start.column=l.start.column,d.end.row=l.end.row,d.end.column=l.end.column}}n.mergeOverlappingRanges();var f=[];for(a=r.length;a--;){var d=r[a];f.unshift(t.getTextRange(d))}e<0?f.unshift(f.pop()):f.push(f.shift());for(a=r.length;a--;){l=(d=r[a]).clone();t.replace(d,f[a]),d.start.row=l.start.row,d.start.column=l.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var r=this.session,a=r.multiSelect.toOrientedRange();if(!a.isEmpty()||((a=r.getWordRange(a.start.row,a.start.column)).cursor=-1==e?a.start:a.end,this.multiSelect.addRange(a),!n)){var l=r.getTextRange(a),f=function(e,t,n){return y.$options.wrap=!0,y.$options.needle=t,y.$options.backwards=-1==n,y.find(e)}(r,l,e);f&&(f.cursor=-1==e?f.start:f.end,this.session.unfold(f),this.multiSelect.addRange(f),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(a.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,r=-1,l=n.filter((function(e){if(e.cursor.row==r)return!0;r=e.cursor.row}));if(n.length&&l.length!=n.length-1){l.forEach((function(e){t.substractPoint(e.cursor)}));var f=0,d=1/0,p=n.map((function(t){var n=t.cursor,r=e.getLine(n.row).substr(n.column).search(/\S/g);return-1==r&&(r=0),n.column>f&&(f=n.column),r<d&&(d=r),r}));n.forEach((function(t,n){var r=t.cursor,l=f-r.column,y=p[n]-d;l>y?e.insert(r,h.stringRepeat(" ",l-y)):e.remove(new a(r.row,r.column,r.row,r.column-l+y)),t.start.column=t.end.column=f,t.start.row=t.end.row=r.row,t.cursor=t.end})),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var y=this.selection.getRange(),w=y.start.row,x=y.end.row,_=w==x;if(_){var S,k=this.session.getLength();do{S=this.session.getLine(x)}while(/[=:]/.test(S)&&++x<k);do{S=this.session.getLine(w)}while(/[=:]/.test(S)&&--w>0);w<0&&(w=0),x>=k&&(x=k-1)}var C=this.session.removeFullLines(w,x);C=this.$reAlignText(C,_),this.session.insert({row:w,column:0},C.join("\n")+"\n"),_||(y.start.column=0,y.end.column=C[C.length-1].length),this.selection.setRange(y)}},this.$reAlignText=function(e,t){var n,r,a,l=!0,f=!0;return e.map((function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==n?(n=t[1].length,r=t[2].length,a=t[3].length,t):(n+r+a!=t[1].length+t[2].length+t[3].length&&(f=!1),n!=t[1].length&&(l=!1),n>t[1].length&&(n=t[1].length),r<t[2].length&&(r=t[2].length),a>t[3].length&&(a=t[3].length),t):[e]})).map(t?p:l?f?function(e){return e[2]?d(n+r-e[2].length)+e[2]+d(a)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:p:function(e){return e[2]?d(n)+e[2]+d(a)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]});function d(e){return h.stringRepeat(" ",e)}function p(e){return e[2]?d(n)+e[2]+d(r-e[2].length+a)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}}}).call(x.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=_,e("./config").defineOptions(x.prototype,"editor",{enableMultiselect:{set:function(e){_(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",f)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",f))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})})),ace.define("ace/mode/folding/fold_mode",[],(function(e,t,n){"use strict";var r=e("../../range").Range,a=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var a=/\S/,l=e.getLine(t),f=l.search(a);if(-1!=f){for(var d=n||l.length,h=e.getLength(),p=t,y=t;++t<h;){var w=e.getLine(t).search(a);if(-1!=w){if(w<=f){var x=e.getTokenAt(t,0);if(!x||"string"!==x.type)break}y=t}}if(y>p){var _=e.getLine(y).length;return new r(p,d,y,_)}}},this.openingBracketBlock=function(e,t,n,a,l){var f={row:n,column:a+1},d=e.$findClosingBracket(t,f,l);if(d){var h=e.foldWidgets[d.row];return null==h&&(h=e.getFoldWidget(d.row)),"start"==h&&d.row>f.row&&(d.row--,d.column=e.getLine(d.row).length),r.fromPoints(f,d)}},this.closingBracketBlock=function(e,t,n,a,l){var f={row:n,column:a},d=e.$findOpeningBracket(t,f);if(d)return d.column++,f.column--,r.fromPoints(d,f)}}).call(a.prototype)})),ace.define("ace/theme/textmate",[],(function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate",e("../lib/dom").importCssString(t.cssText,t.cssClass)})),ace.define("ace/line_widgets",[],(function(e,t,n){"use strict";var r=e("./lib/dom");function a(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach((function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)})),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach((function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))}))}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var r=e.data,a=r.start.row,l=r.end.row,f="add"==e.action,d=a+1;d<l;d++)n[d]&&(n[d].hidden=f);n[l]&&(f?n[a]?n[l].hidden=f:n[a]=n[l]:(n[a]==n[l]&&(n[a]=void 0),n[l].hidden=f))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,r=e.end.row-n;if(0===r);else if("remove"==e.action){var a=t.splice(n+1,r);!t[n]&&a[a.length-1]&&(t[n]=a.pop()),a.forEach((function(e){e&&this.removeLineWidget(e)}),this),this.$updateRows()}else{var l=new Array(r);t[n]&&null!=t[n].column&&e.start.column>t[n].column&&n++,l.unshift(n,0),t.splice.apply(t,l),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach((function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget})),t&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e},this.addLineWidget=function(e){if(this.$registerLineWidget(e),e.session=this.session,!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=r.createElement("div"),e.el.innerHTML=e.html),e.el&&(r.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight)),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(e.row,0);if(e.$fold=n,n){var a=this.session.lineWidgets;e.row!=n.end.row||a[n.start.row]?e.hidden=!0:a[n.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],r=[];n;)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(n&&n.length){for(var a=1/0,l=0;l<n.length;l++){var f=n[l];if(f&&f.el&&f.session==this.session){if(!f._inDocument){if(this.session.lineWidgets[f.row]!=f)continue;f._inDocument=!0,t.container.appendChild(f.el)}f.h=f.el.offsetHeight,f.fixedWidth||(f.w=f.el.offsetWidth,f.screenWidth=Math.ceil(f.w/r.characterWidth));var d=f.h/r.lineHeight;f.coverLine&&(d-=this.session.getRowLineCount(f.row))<0&&(d=0),f.rowCount!=d&&(f.rowCount=d,f.row<a&&(a=f.row))}}a!=1/0&&(this.session._emit("changeFold",{data:{start:{row:a}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(r){for(var a=Math.min(this.firstRow,n.firstRow),l=Math.max(this.lastRow,n.lastRow,r.length);a>0&&!r[a];)a--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var f=a;f<=l;f++){var d=r[f];if(d&&d.el)if(d.hidden)d.el.style.top=-100-(d.pixelHeight||0)+"px";else{d._inDocument||(d._inDocument=!0,t.container.appendChild(d.el));var h=t.$cursorLayer.getPixelPosition({row:f,column:0},!0).top;d.coverLine||(h+=n.lineHeight*this.session.getRowLineCount(d.row)),d.el.style.top=h-n.offset+"px";var p=d.coverGutter?0:t.gutterWidth;d.fixedWidth||(p-=t.scrollLeft),d.el.style.left=p+"px",d.fullWidth&&d.screenWidth&&(d.el.style.minWidth=n.width+2*n.padding+"px"),d.fixedWidth?d.el.style.right=t.scrollBar.getWidth()+"px":d.el.style.right=""}}}}}).call(a.prototype),t.LineWidgets=a})),ace.define("ace/ext/error_marker",[],(function(e,t,n){"use strict";var r=e("../line_widgets").LineWidgets,a=e("../lib/dom"),l=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var f=e.getCursorPosition(),d=f.row,h=n.widgetManager.getWidgetsAtRow(d).filter((function(e){return"errorMarker"==e.type}))[0];h?h.destroy():d-=t;var p,y=function(e,t,n){var r=e.getAnnotations().sort(l.comparePoints);if(r.length){var a=function(e,t,n){for(var r=0,a=e.length-1;r<=a;){var l=r+a>>1,f=n(t,e[l]);if(f>0)r=l+1;else{if(!(f<0))return l;a=l-1}}return-(r+1)}(r,{row:t,column:-1},l.comparePoints);a<0&&(a=-a-1),a>=r.length?a=n>0?0:r.length-1:0===a&&n<0&&(a=r.length-1);var f=r[a];if(f&&n){if(f.row===t){do{f=r[a+=n]}while(f&&f.row===t);if(!f)return r.slice()}var d=[];t=f.row;do{d[n<0?"unshift":"push"](f),f=r[a+=n]}while(f&&f.row==t);return d.length&&d}}}(n,d,t);if(y){var w=y[0];f.column=(w.pos&&"number"!=typeof w.column?w.pos.sc:w.column)||0,f.row=w.row,p=e.renderer.$gutterLayer.$annotations[f.row]}else{if(h)return;p={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(f.row),e.selection.moveToPosition(f);var x={row:f.row,fixedWidth:!0,coverGutter:!0,el:a.createElement("div"),type:"errorMarker"},_=x.el.appendChild(a.createElement("div")),S=x.el.appendChild(a.createElement("div"));S.className="error_widget_arrow "+p.className;var k=e.renderer.$cursorLayer.getPixelPosition(f).left;S.style.left=k+e.renderer.gutterWidth-5+"px",x.el.className="error_widget_wrapper",_.className="error_widget "+p.className,_.innerHTML=p.text.join("<br>"),_.appendChild(a.createElement("div"));var C=function(e,t,n){if(0===t&&("esc"===n||"return"===n))return x.destroy(),{command:"null"}};x.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(C),n.widgetManager.removeLineWidget(x),e.off("changeSelection",x.destroy),e.off("changeSession",x.destroy),e.off("mouseup",x.destroy),e.off("change",x.destroy))},e.keyBinding.addKeyboardHandler(C),e.on("changeSelection",x.destroy),e.on("changeSession",x.destroy),e.on("mouseup",x.destroy),e.on("change",x.destroy),e.session.widgetManager.addLineWidget(x),x.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:x.el.offsetHeight})},a.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",[],(function(e,t,r){"use strict";e("./lib/fixoldbrowsers");var a=e("./lib/dom"),l=e("./lib/event"),f=e("./range").Range,d=e("./editor").Editor,h=e("./edit_session").EditSession,p=e("./undomanager").UndoManager,y=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.define=n.amdD,t.edit=function(e,n){if("string"==typeof e){var r=e;if(!(e=document.getElementById(r)))throw new Error("ace.edit can't find div #"+r)}if(e&&e.env&&e.env.editor instanceof d)return e.env.editor;var f="";if(e&&/input|textarea/i.test(e.tagName)){var h=e;f=h.value,e=a.createElement("pre"),h.parentNode.replaceChild(e,h)}else e&&(f=e.textContent,e.innerHTML="");var p=t.createEditSession(f),w=new d(new y(e),p,n),x={document:p,editor:w,onResize:w.resize.bind(w,null)};return h&&(x.textarea=h),l.addListener(window,"resize",x.onResize),w.on("destroy",(function(){l.removeListener(window,"resize",x.onResize),x.editor.container.env=null})),w.container.env=w.env=x,w},t.createEditSession=function(e,t){var n=new h(e,t);return n.setUndoManager(new p),n},t.Range=f,t.Editor=d,t.EditSession=h,t.UndoManager=p,t.VirtualRenderer=y,t.version=t.config.version})),ace.require(["ace/ace"],(function(t){for(var n in t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t),t)t.hasOwnProperty(n)&&(window.ace[n]=t[n]);window.ace.default=window.ace,e&&(e.exports=window.ace)}))},59910:function(e,t,n){e=n.nmd(e),ace.define("ace/snippets",[],(function(e,t,n){"use strict";var r=e("./lib/oop"),a=e("./lib/event_emitter").EventEmitter,l=e("./lib/lang"),f=e("./range").Range,d=e("./range_list").RangeList,h=e("./keyboard/hash_handler").HashHandler,p=e("./tokenizer").Tokenizer,y=e("./clipboard"),w={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,t,n){var r=e.session.getTextRange();return n?r.replace(/\n\r?([ \t]*\S)/g,"\n"+n+"$1"):r},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return y.getText&&y.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.start||""},BLOCK_COMMENT_END:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.end||""},LINE_COMMENT:function(e){return(e.session.$mode||{}).lineCommentStart||""},CURRENT_YEAR:x.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:x.bind(null,{year:"2-digit"}),CURRENT_MONTH:x.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:x.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:x.bind(null,{month:"short"}),CURRENT_DATE:x.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:x.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:x.bind(null,{weekday:"short"}),CURRENT_HOUR:x.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:x.bind(null,{minute:"2-digit"}),CURRENT_SECOND:x.bind(null,{second:"2-digit"})};function x(e){var t=(new Date).toLocaleString("en-us",e);return 1==t.length?"0"+t:t}w.SELECTED_TEXT=w.SELECTION;var _=function(){this.snippetMap={},this.snippetNameMap={}};(function(){r.implement(this,a),this.getTokenizer=function(){return _.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function e(e){return e=e.substr(1),/^\d+$/.test(e)?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}var n={regex:"/("+t("/")+"+)/",onMatch:function(e,t,n){var r=n[0];return r.fmtString=!0,r.guard=e.slice(1,-1),r.flag="",""},next:"formatString"};return _.$tokenizer=new p({start:[{regex:/\\./,onMatch:function(e,t,n){var r=e[1];return("}"==r&&n.length||-1!="`$\\".indexOf(r))&&(e=r),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,n,r){var a=e(t.substr(1));return r.unshift(a[0]),a},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,n){var r=e.slice(1,-1).replace(/\\[,|\\]|,/g,(function(e){return 2==e.length?e[1]:"\0"})).split("\0").map((function(e){return{value:e}}));return n[0].choices=r,[r[0]]},next:"start"},n,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectElse?(n[0].expectElse=!1,n[0].ifEnd={elseEnd:n[0]},[n[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(e,t,n){var r=e[1];return"}"==r&&n.length||-1!="`$\\".indexOf(r)?e=r:"n"==r?e="\n":"t"==r?e="\t":-1!="ulULE".indexOf(r)&&(e={changeCase:r,local:r>"a"}),[e]}},{regex:"/\\w*}",onMatch:function(e,t,n){var r=n.shift();return r&&(r.flag=e.slice(1,-1)),this.next=r&&r.tabstopId?"start":"",[r||e]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(e,t,n){return[{text:e.slice(1)}]}},{regex:/\${\w+/,onMatch:function(e,t,n){var r={text:e.slice(2)};return n.unshift(r),[r]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(e,t,n){var r=n.shift();return this.next=r&&r.tabstopId?"start":"",[r||e]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(e,t,n){return n[0].formatFunction=e.slice(2,-1),[n.shift()]},next:"formatString"},n,{regex:/:[\?\-+]?/,onMatch:function(e,t,n){"+"==e[1]&&(n[0].ifEnd=n[0]),"?"==e[1]&&(n[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]})},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map((function(e){return e.value||e}))},this.getVariableValue=function(e,t,n){if(/^\d+$/.test(t))return(this.variables.__||{})[t]||"";if(/^[A-Z]\d+$/.test(t))return(this.variables[t[0]+"__"]||{})[t.substr(1)]||"";if(t=t.replace(/^TM_/,""),!this.variables.hasOwnProperty(t))return"";var r=this.variables[t];return"function"==typeof r&&(r=this.variables[t](e,t,n)),null==r?"":r},this.variables=w,this.tmStrFormat=function(e,t,n){if(!t.fmt)return e;var r=t.flag||"",a=t.guard;a=new RegExp(a,r.replace(/[^gim]/g,""));var l="string"==typeof t.fmt?this.tokenizeTmSnippet(t.fmt,"formatString"):t.fmt,f=this,d=e.replace(a,(function(){var e=f.variables.__;f.variables.__=[].slice.call(arguments);for(var t=f.resolveVariables(l,n),r="E",a=0;a<t.length;a++){var d=t[a];if("object"==typeof d)if(t[a]="",d.changeCase&&d.local){var h=t[a+1];h&&"string"==typeof h&&("u"==d.changeCase?t[a]=h[0].toUpperCase():t[a]=h[0].toLowerCase(),t[a+1]=h.substr(1))}else d.changeCase&&(r=d.changeCase);else"U"==r?t[a]=d.toUpperCase():"L"==r&&(t[a]=d.toLowerCase())}return f.variables.__=e,t.join("")}));return d},this.tmFormatFunction=function(e,t,n){return"upcase"==t.formatFunction?e.toUpperCase():"downcase"==t.formatFunction?e.toLowerCase():e},this.resolveVariables=function(e,t){for(var n=[],r="",a=!0,l=0;l<e.length;l++){var f=e[l];if("string"!=typeof f){if(f){if(a=!1,f.fmtString){var d=e.indexOf(f,l+1);-1==d&&(d=e.length),f.fmt=e.slice(l+1,d),l=d}if(f.text){var h=this.getVariableValue(t,f.text,r)+"";f.fmtString&&(h=this.tmStrFormat(h,f,t)),f.formatFunction&&(h=this.tmFormatFunction(h,f,t)),h&&!f.ifEnd?(n.push(h),p(f)):!h&&f.ifEnd&&p(f.ifEnd)}else f.elseEnd?p(f.elseEnd):(null!=f.tabstopId||null!=f.changeCase)&&n.push(f)}}else n.push(f),"\n"==f?(a=!0,r=""):a&&(r=/^\t*/.exec(f)[0],a=/\S/.test(f))}function p(t){var n=e.indexOf(t,l+1);-1!=n&&(l=n)}return n},this.insertSnippetForSelection=function(e,t){var n=e.getCursorPosition(),r=e.session.getLine(n.row),a=e.session.getTabString(),l=r.match(/^\s*/)[0];n.column<l.length&&(l=l.slice(0,n.column)),t=t.replace(/\r/g,"");var f=this.tokenizeTmSnippet(t);f=(f=this.resolveVariables(f,e)).map((function(e){return"\n"==e?e+l:"string"==typeof e?e.replace(/\t/g,a):e}));var d=[];f.forEach((function(e,t){if("object"==typeof e){var n=e.tabstopId,r=d[n];if(r||((r=d[n]=[]).index=n,r.value="",r.parents={}),-1===r.indexOf(e)){e.choices&&!r.choices&&(r.choices=e.choices),r.push(e);var a=f.indexOf(e,t+1);if(-1!==a){var l=f.slice(t+1,a);l.some((function(e){return"object"==typeof e}))&&!r.value?r.value=l:!l.length||r.value&&"string"==typeof r.value||(r.value=l.join(""))}}}})),d.forEach((function(e){e.length=0}));var h={};function p(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if("object"==typeof r){if(h[r.tabstopId])continue;r=t[e.lastIndexOf(r,n-1)]||{tabstopId:r.tabstopId}}t[n]=r}return t}for(var y=0;y<f.length;y++){var w=f[y];if("object"==typeof w){var x=w.tabstopId,_=d[x],k=f.indexOf(w,y+1);if(h[x])h[x]===w&&(delete h[x],Object.keys(h).forEach((function(e){_.parents[e]=!0})));else{h[x]=w;var C=_.value;"string"!=typeof C?C=p(C):w.fmt&&(C=this.tmStrFormat(C,w,e)),f.splice.apply(f,[y+1,Math.max(0,k-y)].concat(C,w)),-1===_.indexOf(w)&&_.push(w)}}}var E=0,O=0,j="";f.forEach((function(e){if("string"==typeof e){var t=e.split("\n");t.length>1?(O=t[t.length-1].length,E+=t.length-1):O+=e.length,j+=e}else e&&(e.start?e.end={row:E,column:O}:e.start={row:E,column:O})}));var T=e.getSelectionRange(),A=e.session.replace(T,j),P=new S(e),D=e.inVirtualSelectionMode&&e.selection.index;P.addTabstops(d,T.start,A,D)},this.insertSnippet=function(e,t){var n=this;if(e.inVirtualSelectionMode)return n.insertSnippetForSelection(e,t);e.forEachSelection((function(){n.insertSnippetForSelection(e,t)}),null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},this.$getScope=function(e){var t=e.session.$mode.$id||"";if("html"===(t=t.split("/").pop())||"php"===t){"php"!==t||e.session.$mode.inlinePhp||(t="html");var n=e.getCursorPosition(),r=e.session.getState(n.row);"object"==typeof r&&(r=r[0]),r.substring&&("js-"==r.substring(0,3)?t="javascript":"css-"==r.substring(0,4)?t="css":"php-"==r.substring(0,4)&&(t="php"))}return t},this.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],r=this.snippetMap;return r[t]&&r[t].includeScopes&&n.push.apply(n,r[t].includeScopes),n.push("_"),n},this.expandWithTab=function(e,t){var n=this,r=e.forEachSelection((function(){return n.expandSnippetForSelection(e,t)}),null,{keepOrder:!0});return r&&e.tabstopManager&&e.tabstopManager.tabNext(),r},this.expandSnippetForSelection=function(e,t){var n,r=e.getCursorPosition(),a=e.session.getLine(r.row),l=a.substring(0,r.column),f=a.substr(r.column),d=this.snippetMap;return this.getActiveScopes(e).some((function(e){var t=d[e];return t&&(n=this.findMatchingSnippet(t,l,f)),!!n}),this),!!n&&(t&&t.dryRun||(e.session.doc.removeInLine(r.row,r.column-n.replaceBefore.length,r.column+n.replaceAfter.length),this.variables.M__=n.matchBefore,this.variables.T__=n.matchAfter,this.insertSnippetForSelection(e,n.content),this.variables.M__=this.variables.T__=null),!0)},this.findMatchingSnippet=function(e,t,n){for(var r=e.length;r--;){var a=e[r];if((!a.startRe||a.startRe.test(t))&&((!a.endRe||a.endRe.test(n))&&(a.startRe||a.endRe)))return a.matchBefore=a.startRe?a.startRe.exec(t):[""],a.matchAfter=a.endRe?a.endRe.exec(n):[""],a.replaceBefore=a.triggerRe?a.triggerRe.exec(t)[0]:"",a.replaceAfter=a.endTriggerRe?a.endTriggerRe.exec(n)[0]:"",a}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,t){var n=this.snippetMap,r=this.snippetNameMap,a=this;function f(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function d(e,t,n){return e=f(e),t=f(t),n?(e=t+e)&&"$"!=e[e.length-1]&&(e+="$"):(e+=t)&&"^"!=e[0]&&(e="^"+e),new RegExp(e)}function h(e){e.scope||(e.scope=t||"_"),t=e.scope,n[t]||(n[t]=[],r[t]={});var f=r[t];if(e.name){var h=f[e.name];h&&a.unregister(h),f[e.name]=e}n[t].push(e),e.prefix&&(e.tabTrigger=e.prefix),!e.content&&e.body&&(e.content=Array.isArray(e.body)?e.body.join("\n"):e.body),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=l.escapeRegExp(e.tabTrigger)),(e.trigger||e.guard||e.endTrigger||e.endGuard)&&(e.startRe=d(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger),e.endRe=d(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger))}e||(e=[]),Array.isArray(e)?e.forEach(h):Object.keys(e).forEach((function(t){h(e[t])})),this._signal("registerSnippets",{scope:t})},this.unregister=function(e,t){var n=this.snippetMap,r=this.snippetNameMap;function a(e){var a=r[e.scope||t];if(a&&a[e.name]){delete a[e.name];var l=n[e.scope||t],f=l&&l.indexOf(e);f>=0&&l.splice(f,1)}}e.content?a(e):Array.isArray(e)&&e.forEach(a)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,n=[],r={},a=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;t=a.exec(e);){if(t[1])try{r=JSON.parse(t[1]),n.push(r)}catch(e){}if(t[4])r.content=t[4].replace(/^\t/gm,""),n.push(r),r={};else{var l=t[2],f=t[3];if("regex"==l){var d=/\/((?:[^\/\\]|\\.)*)|$/g;r.guard=d.exec(f)[1],r.trigger=d.exec(f)[1],r.endTrigger=d.exec(f)[1],r.endGuard=d.exec(f)[1]}else"snippet"==l?(r.tabTrigger=f.match(/^\S*/)[0],r.name||(r.name=f)):l&&(r[l]=f)}}return n},this.getSnippetByName=function(e,t){var n,r=this.snippetNameMap;return this.getActiveScopes(t).some((function(t){var a=r[t];return a&&(n=a[e]),!!n}),this),n}}).call(_.prototype);var S=function(e){if(e.tabstopManager)return e.tabstopManager;e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=l.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)};(function(){this.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){for(var t="r"==e.action[0],n=this.selectedTabstop||{},r=n.parents||{},a=(this.tabstops||[]).slice(),l=0;l<a.length;l++){var f=a[l],d=f==n||r[f.index];if(f.rangeList.$bias=d?0:1,"remove"==e.action&&f!==n){var h=f.parents&&f.parents[n.index],p=f.rangeList.pointIndex(e.start,h);p=p<0?-p-1:p+1;var y=f.rangeList.pointIndex(e.end,h);y=y<0?-y-1:y-1;for(var w=f.rangeList.ranges.slice(p,y),x=0;x<w.length;x++)this.removeRange(w[x])}f.rangeList.$onChange(e)}var _=this.editor.session;this.$inChange||!t||1!=_.getLength()||_.getValue()||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges&&e.firstNonLinked){this.$inChange=!0;for(var n=this.editor.session,r=n.getTextRange(e.firstNonLinked),a=0;a<e.length;a++){var l=e[a];if(l.linked){var f=l.original,d=t.snippetManager.tmStrFormat(r,f,this.editor);n.replace(l,d)}}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty(),r=0;r<this.ranges.length;r++)if(!this.ranges[r].linked){var a=this.ranges[r].contains(e.row,e.column),l=n||this.ranges[r].contains(t.row,t.column);if(a&&l)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);(n=Math.min(Math.max(n,1),t))==t&&(n=0),this.selectTabstop(n),0===n&&this.detach()},this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,(t=this.tabstops[this.index])&&t.length){this.selectedTabstop=t;var n=t.firstNonLinked||t;if(t.choices&&(n.cursor=n.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(n);else{var r=this.editor.multiSelect;r.toSingleRange(n);for(var a=0;a<t.length;a++)t.hasLinkedRanges&&t[a].linked||r.addRange(t[a].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(e,t,n){var r=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!e[0]){var a=f.fromPoints(n,n);C(a.start,t),C(a.end,t),e[0]=[a],e[0].index=0}var l=[this.index+1,0],h=this.ranges;e.forEach((function(e,n){for(var a=this.$openTabstops[n]||e,p=0;p<e.length;p++){var y=e[p],w=f.fromPoints(y.start,y.end||y.start);k(w.start,t),k(w.end,t),w.original=y,w.tabstop=a,h.push(w),a!=e?a.unshift(w):a[p]=w,y.fmtString||a.firstNonLinked&&r?(w.linked=!0,a.hasLinkedRanges=!0):a.firstNonLinked||(a.firstNonLinked=w)}a.firstNonLinked||(a.hasLinkedRanges=!1),a===e&&(l.push(a),this.$openTabstops[n]=a),this.addTabstopMarkers(a),a.rangeList=a.rangeList||new d,a.rangeList.$bias=0,a.rangeList.addList(a)}),this),l.length>2&&(this.tabstops.length&&l.push(l.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,l))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach((function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))}))},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach((function(e){t.removeMarker(e.markerId),e.markerId=null}))},this.removeRange=function(e){var t=e.tabstop.indexOf(e);-1!=t&&e.tabstop.splice(t,1),-1!=(t=this.ranges.indexOf(e))&&this.ranges.splice(t,1),-1!=(t=e.tabstop.rangeList.ranges.indexOf(e))&&e.tabstop.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(-1!=(t=this.tabstops.indexOf(e.tabstop))&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},this.keyboardHandler=new h,this.keyboardHandler.bindKeys({Tab:function(e){t.snippetManager&&t.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}})}).call(S.prototype);var k=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},C=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),t.snippetManager=new _;var E=e("./editor").Editor;(function(){this.insertSnippet=function(e,n){return t.snippetManager.insertSnippet(this,e,n)},this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(E.prototype)})),ace.define("ace/autocomplete/popup",[],(function(e,t,n){"use strict";var r=e("../virtual_renderer").VirtualRenderer,a=e("../editor").Editor,l=e("../range").Range,f=e("../lib/event"),d=e("../lib/lang"),h=e("../lib/dom"),p=function(e){var t=new r(e);t.$maxLines=4;var n=new a(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusTimeout=0,n.$highlightTagPending=!0,n};h.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #3a674e;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);    position: absolute;    z-index: 2;}.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid rgba(109, 150, 13, 0.8);    background: rgba(58, 103, 78, 0.62);}.ace_completion-meta {    opacity: 0.5;    margin: 0.9em;}.ace_completion-message {    color: blue;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #2d69c7;}.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #93ca12;}.ace_editor.ace_autocomplete {    width: 300px;    z-index: 200000;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;    background: #fefefe;    color: #111;}.ace_dark.ace_editor.ace_autocomplete {    border: 1px #484747 solid;    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);    line-height: 1.4;    background: #25282c;    color: #c1c1c1;}","autocompletion.css"),t.AcePopup=function(e){var t=h.createElement("div"),n=new p(t);e&&e.appendChild(t),t.style.display="none",n.renderer.content.style.cursor="default",n.renderer.setStyle("ace_autocomplete"),n.setOption("displayIndentGuides",!1),n.setOption("dragDelay",150);var r,a=function(){};n.focus=a,n.$isFocused=!0,n.renderer.$cursorLayer.restartTimer=a,n.renderer.$cursorLayer.element.style.opacity=0,n.renderer.$maxLines=8,n.renderer.$keepTextAreaAtCursor=!1,n.setHighlightActiveLine(!1),n.session.highlight(""),n.session.$searchHighlight.clazz="ace_highlight-marker",n.on("mousedown",(function(e){var t=e.getDocumentPosition();n.selection.moveToPosition(t),w.start.row=w.end.row=t.row,e.stop()}));var y=new l(-1,0,-1,1/0),w=new l(-1,0,-1,1/0);w.id=n.session.addMarker(w,"ace_active-line","fullLine"),n.setSelectOnHover=function(e){e?y.id&&(n.session.removeMarker(y.id),y.id=null):y.id=n.session.addMarker(y,"ace_line-hover","fullLine")},n.setSelectOnHover(!1),n.on("mousemove",(function(e){if(r){if(r.x!=e.x||r.y!=e.y){(r=e).scrollTop=n.renderer.scrollTop;var t=r.getDocumentPosition().row;y.start.row!=t&&(y.id||n.setRow(t),_(t))}}else r=e})),n.renderer.on("beforeRender",(function(){if(r&&-1!=y.start.row){r.$pos=null;var e=r.getDocumentPosition().row;y.id||n.setRow(e),_(e,!0)}})),n.renderer.on("afterRender",(function(){var e=n.getRow(),t=n.renderer.$textLayer,r=t.element.childNodes[e-t.config.firstRow];r!==t.selectedNode&&t.selectedNode&&h.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=r,r&&h.addCssClass(r,"ace_selected")}));var x=function(){_(-1)},_=function(e,t){e!==y.start.row&&(y.start.row=y.end.row=e,t||n.session._emit("changeBackMarker"),n._emit("changeHoverMarker"))};n.getHoveredRow=function(){return y.start.row},f.addListener(n.container,"mouseout",x),n.on("hide",x),n.on("changeSelection",x),n.session.doc.getLength=function(){return n.data.length},n.session.doc.getLine=function(e){var t=n.data[e];return"string"==typeof t?t:t&&t.value||""};var S=n.session.bgTokenizer;return S.$tokenizeRow=function(e){var t=n.data[e],r=[];if(!t)return r;"string"==typeof t&&(t={value:t});var a=t.caption||t.value||t.name;function l(e,n){e&&r.push({type:(t.className||"")+(n||""),value:e})}for(var f=a.toLowerCase(),d=(n.filterText||"").toLowerCase(),h=0,p=0,y=0;y<=d.length;y++)if(y!=p&&(t.matchMask&1<<y||y==d.length)){var w=d.slice(p,y);p=y;var x=f.indexOf(w,h);if(-1==x)continue;l(a.slice(h,x),""),h=x+w.length,l(a.slice(x,h),"completion-highlight")}return l(a.slice(h,a.length),""),t.meta&&r.push({type:"completion-meta",value:t.meta}),t.message&&r.push({type:"completion-message",value:t.message}),r},S.$updateOnChange=a,S.start=a,n.session.$computeWidth=function(){return this.screenWidth=0},n.isOpen=!1,n.isTopdown=!1,n.autoSelect=!0,n.filterText="",n.data=[],n.setData=function(e,t){n.filterText=t||"",n.setValue(d.stringRepeat("\n",e.length),-1),n.data=e||[],n.setRow(0)},n.getData=function(e){return n.data[e]},n.getRow=function(){return w.start.row},n.setRow=function(e){e=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,e)),w.start.row!=e&&(n.selection.clearSelection(),w.start.row=w.end.row=e||0,n.session._emit("changeBackMarker"),n.moveCursorTo(e||0,0),n.isOpen&&n._signal("select"))},n.on("changeSelection",(function(){n.isOpen&&n.setRow(n.selection.lead.row),n.renderer.scrollCursorIntoView()})),n.hide=function(){this.container.style.display="none",this._signal("hide"),n.isOpen=!1},n.show=function(e,t,a){var l=this.container,f=window.innerHeight,d=window.innerWidth,h=this.renderer,p=h.$maxLines*t*1.4,y=e.top+this.$borderSize;y>f/2&&!a&&y+t+p>f?(h.$maxPixelHeight=y-2*this.$borderSize,l.style.top="",l.style.bottom=f-y+"px",n.isTopdown=!1):(y+=t,h.$maxPixelHeight=f-y-.2*t,l.style.top=y+"px",l.style.bottom="",n.isTopdown=!0),l.style.display="";var w=e.left;w+l.offsetWidth>d&&(w=d-l.offsetWidth),l.style.left=w+"px",this._signal("show"),r=null,n.isOpen=!0},n.goTo=function(e){var t=this.getRow(),n=this.session.getLength()-1;switch(e){case"up":t=t<=0?n:t-1;break;case"down":t=t>=n?-1:t+1;break;case"start":t=0;break;case"end":t=n}this.setRow(t)},n.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},n.$imageSize=0,n.$borderSize=1,n},t.$singleLineEditor=p})),ace.define("ace/autocomplete/util",[],(function(e,t,n){"use strict";t.parForEach=function(e,t,n){var r=0,a=e.length;0===a&&n();for(var l=0;l<a;l++)t(e[l],(function(e,t){++r===a&&n(e,t)}))};var r=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,n){n=n||r;for(var a=[],l=t-1;l>=0&&n.test(e[l]);l--)a.push(e[l]);return a.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,n){n=n||r;for(var a=[],l=t;l<e.length&&n.test(e[l]);l++)a.push(e[l]);return a},t.getCompletionPrefix=function(e){var t,n=e.getCursorPosition(),r=e.session.getLine(n.row);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!t&&e&&(t=this.retrievePrecedingIdentifier(r,n.column,e))}.bind(this))}.bind(this)),t||this.retrievePrecedingIdentifier(r,n.column)}})),ace.define("ace/autocomplete",[],(function(e,t,n){"use strict";var r=e("./keyboard/hash_handler").HashHandler,a=e("./autocomplete/popup").AcePopup,l=e("./autocomplete/util"),f=e("./lib/lang"),d=e("./lib/dom"),h=e("./snippets").snippetManager,p=e("./config"),y=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new r,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=f.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=f.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new a(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(e,t,n){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),e.keyBinding.addKeyboardHandler(this.keyboardHandler);var r=e.renderer;if(this.popup.setRow(this.autoSelect?0:-1),n)n&&!t&&this.detach();else{this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize());var a=r.layerConfig.lineHeight,l=r.$cursorLayer.getPixelPosition(this.base,!0);l.left-=this.popup.getTextLeftOffset();var f=e.container.getBoundingClientRect();l.top+=f.top-r.layerConfig.offset,l.left+=f.left-e.renderer.scrollLeft,l.left+=r.gutterWidth,this.popup.show(l,a)}this.changeTimer.cancel()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(e){var t=document.activeElement,n=this.editor.textInput.getElement(),r=e.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(e.relatedTarget),a=this.popup&&this.popup.container;t==n||t.parentNode==a||r||t==this.tooltipNode||e.relatedTarget==n||this.detach()},this.mousedownListener=function(e){this.detach()},this.mousewheelListener=function(e){this.detach()},this.goTo=function(e){this.popup.goTo(e)},this.insertMatch=function(e,t){if(e||(e=this.popup.getData(this.popup.getRow())),!e)return!1;var n=this.completions;if(this.editor.startOperation({command:{name:"insertMatch"}}),e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor,e);else{if(n.filterText)for(var r,a=this.editor.selection.getAllRanges(),l=0;r=a[l];l++)r.start.column-=n.filterText.length,this.editor.session.remove(r);e.snippet?h.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.completions==n&&this.detach(),this.editor.endOperation()},this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(e){var t=e.completer.insertMatch();if(t||e.tabstopManager)return t;e.completer.goTo("down")},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},this.gatherCompletions=function(e,t){var n=e.getSession(),r=e.getCursorPosition(),a=l.getCompletionPrefix(e);this.base=n.doc.createAnchor(r.row,r.column-a.length),this.base.$insertRight=!0;var f=[],d=e.completers.length;return e.completers.forEach((function(h,p){h.getCompletions(e,n,r,a,(function(n,r){!n&&r&&(f=f.concat(r)),t(null,{prefix:l.getCompletionPrefix(e),matches:f,finished:0==--d})}))})),!0},this.showPopup=function(e,t){this.editor&&this.detach(),this.activated=!0,this.editor=e,e.completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,t)},this.updateCompletions=function(e,t){if(e&&this.base&&this.completions){var n=this.editor.getCursorPosition(),r=this.editor.session.getTextRange({start:this.base,end:n});if(r==this.completions.filterText)return;return this.completions.setFilter(r),this.completions.filtered.length?1!=this.completions.filtered.length||this.completions.filtered[0].value!=r||this.completions.filtered[0].snippet?void this.openPopup(this.editor,r,e):this.detach():this.detach()}if(t&&t.matches){n=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(n.row,n.column),this.base.$insertRight=!0,this.completions=new w(t.matches),this.openPopup(this.editor,"",e)}var a=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(t,n){var r=function(){if(n.finished)return this.detach()}.bind(this),l=n.prefix,f=n&&n.matches;if(!f||!f.length)return r();if(0===l.indexOf(n.prefix)&&a==this.gatherCompletionsId){this.completions=new w(f),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(l);var d=this.completions.filtered;return d.length&&(1!=d.length||d[0].value!=l||d[0].snippet)?this.autoInsert&&1==d.length&&n.finished?this.insertMatch(d[0]):void this.openPopup(this.editor,l,e):r()}}.bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var e=this.popup,t=e.data,n=t&&(t[e.getHoveredRow()]||t[e.getRow()]),r=null;return n&&this.editor&&this.popup.isOpen?(this.editor.completers.some((function(e){return e.getDocTooltip&&(r=e.getDocTooltip(n)),r})),r||"string"==typeof n||(r=n),"string"==typeof r&&(r={docText:r}),r&&(r.docHTML||r.docText)?void this.showDocTooltip(r):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=d.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var t=this.tooltipNode;e.docHTML?t.innerHTML=e.docHTML:e.docText&&(t.textContent=e.docText),t.parentNode||document.body.appendChild(t);var n=this.popup,r=n.container.getBoundingClientRect();t.style.top=n.container.style.top,t.style.bottom=n.container.style.bottom,t.style.display="block",window.innerWidth-r.right<320?r.left<320?n.isTopdown?(t.style.top=r.bottom+"px",t.style.left=r.left+"px",t.style.right="",t.style.bottom=""):(t.style.top=n.container.offsetTop-t.offsetHeight+"px",t.style.left=r.left+"px",t.style.right="",t.style.bottom=""):(t.style.right=window.innerWidth-r.left+"px",t.style.left=""):(t.style.left=r.right+1+"px",t.style.right="")},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var e=this.tooltipNode;this.editor.isFocused()||document.activeElement!=e||this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e)}},this.onTooltipClick=function(e){for(var t=e.target;t&&t!=this.tooltipNode;){if("A"==t.nodeName&&t.href){t.rel="noreferrer",t.target="_blank";break}t=t.parentNode}},this.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var e=this.popup.container;e&&e.parentNode&&e.parentNode.removeChild(e)}this.editor&&this.editor.completer==this&&this.editor.completer,this.popup=null}}).call(y.prototype),y.for=function(e){return e.completer||(p.get("sharedPopups")?(y.$shared||(y.$sharedInstance=new y),e.completer=y.$sharedInstance):(e.completer=new y,e.once("destroy",(function(e,t){t.completer.destroy()})))),e.completer},y.startCommand={name:"startAutocomplete",exec:function(e,t){var n=y.for(e);n.autoInsert=!1,n.autoSelect=!0,n.showPopup(e,t),n.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var w=function(e,t){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1};(function(){this.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else t=this.all;this.filterText=e,t=(t=this.filterCompletions(t,this.filterText)).sort((function(e,t){return t.exactMatch-e.exactMatch||t.$score-e.$score||(e.caption||e.value).localeCompare(t.caption||t.value)}));var n=null;t=t.filter((function(e){var t=e.snippet||e.caption||e.value;return t!==n&&(n=t,!0)})),this.filtered=t},this.filterCompletions=function(e,t){var n=[],r=t.toUpperCase(),a=t.toLowerCase();e:for(var l,f=0;l=e[f];f++){var d=l.value||l.caption||l.snippet;if(d){var h,p,y=-1,w=0,x=0;if(this.exactMatch){if(t!==d.substr(0,t.length))continue e}else{var _=d.toLowerCase().indexOf(a);if(_>-1)x=_;else for(var S=0;S<t.length;S++){var k=d.indexOf(a[S],y+1),C=d.indexOf(r[S],y+1);if((h=k>=0&&(C<0||k<C)?k:C)<0)continue e;(p=h-y-1)>0&&(-1===y&&(x+=10),x+=p,w|=1<<S),y=h}}l.matchMask=w,l.exactMatch=x?0:1,l.$score=(l.score||0)-x,n.push(l)}}return n}}).call(w.prototype),t.Autocomplete=y,t.FilteredList=w})),ace.define("ace/autocomplete/text_completer",[],(function(e,t,n){var r=e("../range").Range,a=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function l(e,t){var n=function(e,t){return e.getTextRange(r.fromPoints({row:0,column:0},t)).split(a).length-1}(e,t),l=e.getValue().split(a),f=Object.create(null),d=l[n];return l.forEach((function(e,t){if(e&&e!==d){var r=Math.abs(n-t),a=l.length-r;f[e]?f[e]=Math.max(a,f[e]):f[e]=a}})),f}t.getCompletions=function(e,t,n,r,a){var f=l(t,n);a(null,Object.keys(f).map((function(e){return{caption:e,value:e,score:f[e],meta:"local"}})))}})),ace.define("ace/ext/language_tools",[],(function(e,t,n){"use strict";var r=e("../snippets").snippetManager,a=e("../autocomplete").Autocomplete,l=e("../config"),f=e("../lib/lang"),d=e("../autocomplete/util"),h=e("../autocomplete/text_completer"),p={getCompletions:function(e,t,n,r,a){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,n,r,a);var l=e.session.getState(n.row);a(null,t.$mode.getCompletions(l,t,n,r))}},y={getCompletions:function(e,t,n,a,l){var f=[],d=t.getTokenAt(n.row,n.column);d&&d.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?f.push("html-tag"):f=r.getActiveScopes(e);var h=r.snippetMap,p=[];f.forEach((function(e){for(var t=h[e]||[],n=t.length;n--;){var r=t[n],a=r.name||r.tabTrigger;a&&p.push({caption:a,snippet:r.content,meta:r.tabTrigger&&!r.name?r.tabTrigger+"⇥ ":"snippet",type:"snippet"})}}),this),l(null,p)},getDocTooltip:function(e){"snippet"!=e.type||e.docHTML||(e.docHTML=["<b>",f.escapeHTML(e.caption),"</b>","<hr></hr>",f.escapeHTML(e.snippet)].join(""))}},w=[y,h,p];t.setCompleters=function(e){w.length=0,e&&w.push.apply(w,e)},t.addCompleter=function(e){w.push(e)},t.textCompleter=h,t.keyWordCompleter=p,t.snippetCompleter=y;var x={name:"expandSnippet",exec:function(e){return r.expandWithTab(e)},bindKey:"Tab"},_=function(e,t){S(t.session.$mode)},S=function(e){"string"==typeof e&&(e=l.$modes[e]),e&&(r.files||(r.files={}),k(e.$id,e.snippetFileId),e.modes&&e.modes.forEach(S))},k=function(e,t){t&&e&&!r.files[e]&&(r.files[e]={},l.loadModule(t,(function(t){t&&(r.files[e]=t,!t.snippets&&t.snippetText&&(t.snippets=r.parseSnippetFile(t.snippetText)),r.register(t.snippets||[],t.scope),t.includeScopes&&(r.snippetMap[t.scope].includeScopes=t.includeScopes,t.includeScopes.forEach((function(e){S("ace/mode/"+e)}))))})))},C=function(e){var t=e.editor,n=t.completer&&t.completer.activated;if("backspace"===e.command.name)n&&!d.getCompletionPrefix(t)&&t.completer.detach();else if("insertstring"===e.command.name){if(d.getCompletionPrefix(t)&&!n){var r=a.for(t);r.autoInsert=!1,r.showPopup(t)}}},E=e("../editor").Editor;e("../config").defineOptions(E.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:w),this.commands.addCommand(a.startCommand)):this.commands.removeCommand(a.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:w),this.commands.on("afterExec",C)):this.commands.removeListener("afterExec",C)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(x),this.on("changeMode",_),_(0,this)):(this.commands.removeCommand(x),this.off("changeMode",_))},value:!1}})})),ace.require(["ace/ext/language_tools"],(function(t){e&&(e.exports=t)}))},69516:function(e,t,n){e=n.nmd(e),ace.define("ace/ext/modelist",[],(function(e,t,n){"use strict";var r=[];var a=function(e,t,n){var r;this.name=e,this.caption=t,this.mode="ace/mode/"+e,this.extensions=n,r=/\^/.test(n)?n.replace(/\|(\^)?/g,(function(e,t){return"$|"+(t?"^":"^.*\\.")}))+"$":"^.*\\.("+n+")$",this.extRe=new RegExp(r,"gi")};a.prototype.supportsFile=function(e){return e.match(this.extRe)};var l={ABAP:["abap"],ABC:["abc"],ActionScript:["as"],ADA:["ada|adb"],Alda:["alda"],Apache_Conf:["^htaccess|^htgroups|^htpasswd|^conf|htaccess|htgroups|htpasswd"],Apex:["apex|cls|trigger|tgr"],AQL:["aql"],AsciiDoc:["asciidoc|adoc"],ASL:["dsl|asl"],Assembly_x86:["asm|a"],AutoHotKey:["ahk"],BatchFile:["bat|cmd"],C_Cpp:["cpp|c|cc|cxx|h|hh|hpp|ino"],C9Search:["c9search_results"],Cirru:["cirru|cr"],Clojure:["clj|cljs"],Cobol:["CBL|COB"],coffee:["coffee|cf|cson|^Cakefile"],ColdFusion:["cfm"],Crystal:["cr"],CSharp:["cs"],Csound_Document:["csd"],Csound_Orchestra:["orc"],Csound_Score:["sco"],CSS:["css"],Curly:["curly"],D:["d|di"],Dart:["dart"],Diff:["diff|patch"],Dockerfile:["^Dockerfile"],Dot:["dot"],Drools:["drl"],Edifact:["edi"],Eiffel:["e|ge"],EJS:["ejs"],Elixir:["ex|exs"],Elm:["elm"],Erlang:["erl|hrl"],Forth:["frt|fs|ldr|fth|4th"],Fortran:["f|f90"],FSharp:["fsi|fs|ml|mli|fsx|fsscript"],FSL:["fsl"],FTL:["ftl"],Gcode:["gcode"],Gherkin:["feature"],Gitignore:["^.gitignore"],Glsl:["glsl|frag|vert"],Gobstones:["gbs"],golang:["go"],GraphQLSchema:["gql"],Groovy:["groovy"],HAML:["haml"],Handlebars:["hbs|handlebars|tpl|mustache"],Haskell:["hs"],Haskell_Cabal:["cabal"],haXe:["hx"],Hjson:["hjson"],HTML:["html|htm|xhtml|vue|we|wpy"],HTML_Elixir:["eex|html.eex"],HTML_Ruby:["erb|rhtml|html.erb"],INI:["ini|conf|cfg|prefs"],Io:["io"],Jack:["jack"],Jade:["jade|pug"],Java:["java"],JavaScript:["js|jsm|jsx"],JSON:["json"],JSON5:["json5"],JSONiq:["jq"],JSP:["jsp"],JSSM:["jssm|jssm_state"],JSX:["jsx"],Julia:["jl"],Kotlin:["kt|kts"],LaTeX:["tex|latex|ltx|bib"],LESS:["less"],Liquid:["liquid"],Lisp:["lisp"],LiveScript:["ls"],LogiQL:["logic|lql"],LSL:["lsl"],Lua:["lua"],LuaPage:["lp"],Lucene:["lucene"],Makefile:["^Makefile|^GNUmakefile|^makefile|^OCamlMakefile|make"],Markdown:["md|markdown"],Mask:["mask"],MATLAB:["matlab"],Maze:["mz"],MediaWiki:["wiki|mediawiki"],MEL:["mel"],MIXAL:["mixal"],MUSHCode:["mc|mush"],MySQL:["mysql"],Nginx:["nginx|conf"],Nim:["nim"],Nix:["nix"],NSIS:["nsi|nsh"],Nunjucks:["nunjucks|nunjs|nj|njk"],ObjectiveC:["m|mm"],OCaml:["ml|mli"],Pascal:["pas|p"],Perl:["pl|pm"],Perl6:["p6|pl6|pm6"],pgSQL:["pgsql"],PHP:["php|inc|phtml|shtml|php3|php4|php5|phps|phpt|aw|ctp|module"],PHP_Laravel_blade:["blade.php"],Pig:["pig"],Powershell:["ps1"],Praat:["praat|praatscript|psc|proc"],Prisma:["prisma"],Prolog:["plg|prolog"],Properties:["properties"],Protobuf:["proto"],Puppet:["epp|pp"],Python:["py"],QML:["qml"],R:["r"],Razor:["cshtml|asp"],RDoc:["Rd"],Red:["red|reds"],RHTML:["Rhtml"],RST:["rst"],Ruby:["rb|ru|gemspec|rake|^Guardfile|^Rakefile|^Gemfile"],Rust:["rs"],SASS:["sass"],SCAD:["scad"],Scala:["scala|sbt"],Scheme:["scm|sm|rkt|oak|scheme"],SCSS:["scss"],SH:["sh|bash|^.bashrc"],SJS:["sjs"],Slim:["slim|skim"],Smarty:["smarty|tpl"],snippets:["snippets"],Soy_Template:["soy"],Space:["space"],SQL:["sql"],SQLServer:["sqlserver"],Stylus:["styl|stylus"],SVG:["svg"],Swift:["swift"],Tcl:["tcl"],Terraform:["tf","tfvars","terragrunt"],Tex:["tex"],Text:["txt"],Textile:["textile"],Toml:["toml"],TSX:["tsx"],Twig:["latte|twig|swig"],Typescript:["ts|typescript|str"],Vala:["vala"],VBScript:["vbs|vb"],Velocity:["vm"],Verilog:["v|vh|sv|svh"],VHDL:["vhd|vhdl"],Visualforce:["vfp|component|page"],Wollok:["wlk|wpgm|wtest"],XML:["xml|rdf|rss|wsdl|xslt|atom|mathml|mml|xul|xbl|xaml"],XQuery:["xq"],YAML:["yaml|yml"],Zeek:["zeek|bro"],Django:["html"]},f={ObjectiveC:"Objective-C",CSharp:"C#",golang:"Go",C_Cpp:"C and C++",Csound_Document:"Csound Document",Csound_Orchestra:"Csound",Csound_Score:"Csound Score",coffee:"CoffeeScript",HTML_Ruby:"HTML (Ruby)",HTML_Elixir:"HTML (Elixir)",FTL:"FreeMarker",PHP_Laravel_blade:"PHP (Blade Template)",Perl6:"Perl 6",AutoHotKey:"AutoHotkey / AutoIt"},d={};for(var h in l){var p=l[h],y=(f[h]||h).replace(/_/g," "),w=h.toLowerCase(),x=new a(w,y,p[0]);d[w]=x,r.push(x)}n.exports={getModeForPath:function(e){for(var t=d.text,n=e.split(/[\/\\]/).pop(),a=0;a<r.length;a++)if(r[a].supportsFile(n)){t=r[a];break}return t},modes:r,modesByName:d}})),ace.require(["ace/ext/modelist"],(function(t){e&&(e.exports=t)}))},80997:function(e,t,n){e=n.nmd(e),ace.define("ace/ext/searchbox",[],(function(e,t,n){"use strict";var r=e("../lib/dom"),a=e("../lib/lang"),l=e("../lib/event"),f=e("../keyboard/hash_handler").HashHandler,d=e("../lib/keys");r.importCssString('.ace_search {background-color: #ddd;color: #666;border: 1px solid #cbcbcb;border-top: 0 none;overflow: hidden;margin: 0;padding: 4px 6px 0 4px;position: absolute;top: 0;z-index: 99;white-space: normal;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form, .ace_replace_form {margin: 0 20px 4px 0;overflow: hidden;line-height: 1.9;}.ace_replace_form {margin-right: 0;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {border-radius: 3px 0 0 3px;background-color: white;color: black;border: 1px solid #cbcbcb;border-right: 0 none;outline: 0;padding: 0;font-size: inherit;margin: 0;line-height: inherit;padding: 0 6px;min-width: 17em;vertical-align: top;min-height: 1.8em;box-sizing: content-box;}.ace_searchbtn {border: 1px solid #cbcbcb;line-height: inherit;display: inline-block;padding: 0 6px;background: #fff;border-right: 0 none;border-left: 1px solid #dcdcdc;cursor: pointer;margin: 0;position: relative;color: #666;}.ace_searchbtn:last-child {border-radius: 0 3px 3px 0;border-right: 1px solid #cbcbcb;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn:hover {background-color: #eef1f6;}.ace_searchbtn.prev, .ace_searchbtn.next {padding: 0px 0.7em}.ace_searchbtn.prev:after, .ace_searchbtn.next:after {content: "";border: solid 2px #888;width: 0.5em;height: 0.5em;border-width:  2px 0 0 2px;display:inline-block;transform: rotate(-45deg);}.ace_searchbtn.next:after {border-width: 0 2px 2px 0 ;}.ace_searchbtn_close {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;border-radius: 50%;border: 0 none;color: #656565;cursor: pointer;font: 16px/16px Arial;padding: 0;height: 14px;width: 14px;top: 9px;right: 7px;position: absolute;}.ace_searchbtn_close:hover {background-color: #656565;background-position: 50% 100%;color: white;}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100,100,100,0.23);padding: 1px;box-sizing:    border-box!important;color: black;}.ace_button:hover {background-color: #eee;opacity:1;}.ace_button:active {background-color: #ddd;}.ace_button.checked {border-color: #3399ff;opacity:1;}.ace_search_options{margin-bottom: 3px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;clear: both;}.ace_search_counter {float: left;font-family: arial;padding: 0 8px;}',"ace_searchbox");var h=function(e,t,n){var a=r.createElement("div");r.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:"Search for",spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"​"],["span",{action:"findNext",class:"ace_searchbtn next"},"​"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},"All"]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:"Replace with",spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},"Replace"],["span",{action:"replaceAll",class:"ace_searchbtn"},"All"]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:"Search In Selection"},"S"]]],a),this.element=a.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(e)};(function(){this.setEditor=function(e){e.searchBox=this,e.renderer.scroller.appendChild(this.element),this.editor=e},this.setSession=function(e){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(e){this.searchBox=e.querySelector(".ace_search_form"),this.replaceBox=e.querySelector(".ace_replace_form"),this.searchOption=e.querySelector("[action=searchInSelection]"),this.replaceOption=e.querySelector("[action=toggleReplace]"),this.regExpOption=e.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=e.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=e.querySelector(".ace_search_counter")},this.$init=function(){var e=this.element;this.$initElements(e);var t=this;l.addListener(e,"mousedown",(function(e){setTimeout((function(){t.activeInput.focus()}),0),l.stopPropagation(e)})),l.addListener(e,"click",(function(e){var n=(e.target||e.srcElement).getAttribute("action");n&&t[n]?t[n]():t.$searchBarKb.commands[n]&&t.$searchBarKb.commands[n].exec(t),l.stopPropagation(e)})),l.addCommandKeyListener(e,(function(e,n,r){var a=d.keyCodeToString(r),f=t.$searchBarKb.findKeyCommand(n,a);f&&f.exec&&(f.exec(t),l.stopEvent(e))})),this.$onChange=a.delayedCall((function(){t.find(!1,!1)})),l.addListener(this.searchInput,"input",(function(){t.$onChange.schedule(20)})),l.addListener(this.searchInput,"focus",(function(){t.activeInput=t.searchInput,t.searchInput.value&&t.highlight()})),l.addListener(this.replaceInput,"focus",(function(){t.activeInput=t.replaceInput,t.searchInput.value&&t.highlight()}))},this.$closeSearchBarKb=new f([{bindKey:"Esc",name:"closeSearchBar",exec:function(e){e.searchBox.hide()}}]),this.$searchBarKb=new f,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?"":"none",e.replaceOption.checked=!1,e.$syncOptions(),e.searchInput.focus()},"Ctrl-H|Command-Option-F":function(e){e.editor.getReadOnly()||(e.replaceOption.checked=!0,e.$syncOptions(),e.replaceInput.focus())},"Ctrl-G|Command-G":function(e){e.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout((function(){e.hide()}))},Return:function(e){e.activeInput==e.replaceInput&&e.replace(),e.findNext()},"Shift-Return":function(e){e.activeInput==e.replaceInput&&e.replace(),e.findPrev()},"Alt-Return":function(e){e.activeInput==e.replaceInput&&e.replaceAll(),e.findAll()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked,e.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked,e.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked,e.$syncOptions()}},{name:"toggleReplace",exec:function(e){e.replaceOption.checked=!e.replaceOption.checked,e.$syncOptions()}},{name:"searchInSelection",exec:function(e){e.searchOption.checked=!e.searchRange,e.setSearchRange(e.searchOption.checked&&e.editor.getSelectionRange()),e.$syncOptions()}}]),this.setSearchRange=function(e){this.searchRange=e,e?this.searchRangeMarker=this.editor.session.addMarker(e,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(e){r.setCssClass(this.replaceOption,"checked",this.searchRange),r.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",r.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),r.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),r.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var t=this.editor.getReadOnly();this.replaceOption.style.display=t?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!t?"":"none",this.find(!1,!1,e)},this.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(e,t,n){var a=!this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n,range:this.searchRange})&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",a),this.editor._emit("findSearchBox",{match:!a}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var e=this.editor,t=e.$search.$options.re,n=0,r=0;if(t){var a=this.searchRange?e.session.getTextRange(this.searchRange):e.getValue(),l=e.session.doc.positionToIndex(e.selection.anchor);this.searchRange&&(l-=e.session.doc.positionToIndex(this.searchRange.start));for(var f,d=t.lastIndex=0;(f=t.exec(a))&&(n++,(d=f.index)<=l&&r++,!(n>999))&&(f[0]||(t.lastIndex=d+=1,!(d>=a.length))););}this.searchCounter.textContent=r+" of "+(n>999?"999+":n)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var e=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",e),this.editor._emit("findSearchBox",{match:!e}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(e,t){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=t,e&&(this.searchInput.value=e),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var e=document.activeElement;return e==this.searchInput||e==this.replaceInput}}).call(h.prototype),t.SearchBox=h,t.Search=function(e,t){(e.searchBox||new h(e)).show(e.session.getTextRange(),t)}})),ace.require(["ace/ext/searchbox"],(function(t){e&&(e.exports=t)}))},93866:function(e,t,n){e=n.nmd(e),ace.define("ace/keyboard/vim",[],(function(e,t,n){"use strict";var r=e("../range").Range,a=e("../lib/event_emitter").EventEmitter,l=e("../lib/dom"),f=e("../lib/oop"),d=e("../lib/keys"),h=e("../lib/event"),p=e("../search").Search,y=e("../lib/useragent"),w=e("../search_highlight").SearchHighlight,x=e("../commands/multi_select_commands"),_=e("../mode/text").Mode.prototype.tokenRe;e("../multi_select");var S=function(e){this.ace=e,this.state={},this.marks={},this.$uid=0,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onBeforeEndOperation=this.onBeforeEndOperation.bind(this),this.ace.on("change",this.onChange),this.ace.on("changeSelection",this.onSelectionChange),this.ace.on("beforeEndOperation",this.onBeforeEndOperation)};function k(e){return{row:e.line,column:e.ch}}function C(e){return new T(e.row,e.column)}S.Pos=function(e,t){if(!(this instanceof T))return new T(e,t);this.line=e,this.ch=t},S.defineOption=function(e,t,n){},S.commands={redo:function(e){e.ace.redo()},undo:function(e){e.ace.undo()},newlineAndIndent:function(e){e.ace.insert("\n")}},S.keyMap={},S.addClass=S.rmClass=function(){},S.e_stop=S.e_preventDefault=h.stopEvent,S.keyName=function(e){var t=d[e.keyCode]||e.key||"";return 1==t.length&&(t=t.toUpperCase()),t=h.getModifierString(e).replace(/(^|-)\w/g,(function(e){return e.toUpperCase()}))+t},S.keyMap.default=function(e){return function(t){var n=t.ace.commands.commandKeyBinding[e.toLowerCase()];return n&&!1!==t.ace.execCommand(n)}},S.lookupKey=function e(t,n,r){n||(n="default"),"string"==typeof n&&(n=S.keyMap[n]);var a="function"==typeof n?n(t):n[t];if(!1===a)return"nothing";if("..."===a)return"multi";if(null!=a&&r(a))return"handled";if(n.fallthrough){if(!Array.isArray(n.fallthrough))return e(t,n.fallthrough,r);for(var l=0;l<n.fallthrough.length;l++){var f=e(t,n.fallthrough[l],r);if(f)return f}}},S.signal=function(e,t,n){return e._signal(t,n)},S.on=h.addListener,S.off=h.removeListener,S.isWordChar=function(e){return e<""?/^\w$/.test(e):(_.lastIndex=0,_.test(e))},function(){f.implement(S.prototype,a),this.destroy=function(){this.ace.off("change",this.onChange),this.ace.off("changeSelection",this.onSelectionChange),this.ace.off("beforeEndOperation",this.onBeforeEndOperation),this.removeOverlay()},this.virtualSelectionMode=function(){return this.ace.inVirtualSelectionMode&&this.ace.selection.index},this.onChange=function(e){var t={text:"i"==e.action[0]?e.lines:[]},n=this.curOp=this.curOp||{};n.changeHandlers||(n.changeHandlers=this._eventRegistry.change&&this._eventRegistry.change.slice()),n.lastChange?n.lastChange.next=n.lastChange=t:n.lastChange=n.change=t,this.$updateMarkers(e)},this.onSelectionChange=function(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._eventRegistry.cursorActivity&&this._eventRegistry.cursorActivity.slice()),this.curOp.cursorActivity=!0,this.ace.inMultiSelectMode&&this.ace.keyBinding.removeKeyboardHandler(x.keyboardHandler)},this.operation=function(e,t){if(!t&&this.curOp||t&&this.curOp&&this.curOp.force)return e();if(!t&&this.ace.curOp||this.curOp&&this.onBeforeEndOperation(),!this.ace.curOp){var n=this.ace.prevOp;this.ace.startOperation({command:{name:"vim",scrollIntoView:"cursor"}})}var r=this.curOp=this.curOp||{};this.curOp.force=t;var a=e();return this.ace.curOp&&"vim"==this.ace.curOp.command.name&&(this.state.dialog&&(this.ace.curOp.command.scrollIntoView=!1),this.ace.endOperation(),r.cursorActivity||r.lastChange||!n||(this.ace.prevOp=n)),!t&&this.ace.curOp||this.curOp&&this.onBeforeEndOperation(),a},this.onBeforeEndOperation=function(){var e=this.curOp;e&&(e.change&&this.signal("change",e.change,e),e&&e.cursorActivity&&this.signal("cursorActivity",null,e),this.curOp=null)},this.signal=function(e,t,n){var r=n?n[e+"Handlers"]:(this._eventRegistry||{})[e];if(r){r=r.slice();for(var a=0;a<r.length;a++)r[a](this,t)}},this.firstLine=function(){return 0},this.lastLine=function(){return this.ace.session.getLength()-1},this.lineCount=function(){return this.ace.session.getLength()},this.setCursor=function(e,t){"object"==typeof e&&(t=e.ch,e=e.line),this.ace.inVirtualSelectionMode||this.ace.exitMultiSelectMode(),this.ace.session.unfold({row:e,column:t}),this.ace.selection.moveTo(e,t)},this.getCursor=function(e){var t=this.ace.selection;return C("anchor"==e?t.isEmpty()?t.lead:t.anchor:"head"!=e&&e?t.getRange()[e]:t.lead)},this.listSelections=function(e){var t=this.ace.multiSelect.rangeList.ranges;return!t.length||this.ace.inVirtualSelectionMode?[{anchor:this.getCursor("anchor"),head:this.getCursor("head")}]:t.map((function(e){return{anchor:this.clipPos(C(e.cursor==e.end?e.start:e.end)),head:this.clipPos(C(e.cursor))}}),this)},this.setSelections=function(e,t){var n=this.ace.multiSelect,a=e.map((function(e){var t=k(e.anchor),n=k(e.head),a=r.comparePoints(t,n)<0?new r.fromPoints(t,n):new r.fromPoints(n,t);return a.cursor=r.comparePoints(a.start,n)?a.end:a.start,a}));if(this.ace.inVirtualSelectionMode)this.ace.selection.fromOrientedRange(a[0]);else{t?a[t]&&a.push(a.splice(t,1)[0]):a=a.reverse(),n.toSingleRange(a[0].clone());for(var l=this.ace.session,f=0;f<a.length;f++){var d=l.$clipRangeToDocument(a[f]);n.addRange(d)}}},this.setSelection=function(e,t,n){var r=this.ace.selection;r.moveTo(e.line,e.ch),r.selectTo(t.line,t.ch),n&&"*mouse"==n.origin&&this.onBeforeEndOperation()},this.somethingSelected=function(e){return!this.ace.selection.isEmpty()},this.clipPos=function(e){return C(this.ace.session.$clipPositionToDocument(e.line,e.ch))},this.markText=function(e){return{clear:function(){},find:function(){}}},this.$updateMarkers=function(e){var t="insert"==e.action,n=e.start,a=e.end,l=(a.row-n.row)*(t?1:-1),f=(a.column-n.column)*(t?1:-1);for(var d in t&&(a=n),this.marks){var h=this.marks[d],p=r.comparePoints(h,n);if(!(p<0)){if(0===p&&t){if(1!=h.bias){h.bias=-1;continue}p=1}var y=t?p:r.comparePoints(h,a);y>0?(h.row+=l,h.column+=h.row==a.row?f:0):!t&&y<=0&&(h.row=n.row,h.column=n.column,0===y&&(h.bias=1))}}};var e=function(e,t,n,r){this.cm=e,this.id=t,this.row=n,this.column=r,e.marks[this.id]=this};e.prototype.clear=function(){delete this.cm.marks[this.id]},e.prototype.find=function(){return C(this)},this.setBookmark=function(t,n){var r=new e(this,this.$uid++,t.line,t.ch);return n&&n.insertLeft||(r.$insertRight=!0),this.marks[r.id]=r,r},this.moveH=function(e,t){if("char"==t){var n=this.ace.selection;n.clearSelection(),n.moveCursorBy(0,e)}},this.findPosV=function(e,t,n,r){if("page"==n){var a=this.ace.renderer.layerConfig;t*=Math.floor(a.height/a.lineHeight),n="line"}if("line"==n){var l=this.ace.session.documentToScreenPosition(e.line,e.ch);return null!=r&&(l.column=r),l.row+=t,l.row=Math.min(Math.max(0,l.row),this.ace.session.getScreenLength()-1),C(this.ace.session.screenToDocumentPosition(l.row,l.column))}},this.charCoords=function(e,t){if("div"==t||!t)return{left:(r=this.ace.session.documentToScreenPosition(e.line,e.ch)).column,top:r.row};if("local"==t){var n=this.ace.renderer,r=this.ace.session.documentToScreenPosition(e.line,e.ch),a=n.layerConfig.lineHeight,l=n.layerConfig.characterWidth,f=a*r.row;return{left:r.column*l,top:f,bottom:f+a}}},this.coordsChar=function(e,t){var n=this.ace.renderer;if("local"==t){var r=Math.max(0,Math.floor(e.top/n.lineHeight)),a=Math.max(0,Math.floor(e.left/n.characterWidth));return C(n.session.screenToDocumentPosition(r,a))}if("div"==t)throw"not implemented"},this.getSearchCursor=function(e,t,n){var r=!1,a=!1;e instanceof RegExp&&!e.global&&(r=!e.ignoreCase,e=e.source,a=!0);var l=new p;null==t.ch&&(t.ch=Number.MAX_VALUE);var f={row:t.line,column:t.ch},d=this,h=null;return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){l.setOptions({needle:e,caseSensitive:r,wrap:!1,backwards:t,regExp:a,start:h||f});var n=l.find(d.ace.session);return n&&n.isEmpty()&&d.getLine(n.start.row).length==n.start.column&&(l.$options.start=n,n=l.find(d.ace.session)),h=n},from:function(){return h&&C(h.start)},to:function(){return h&&C(h.end)},replace:function(e){h&&(h.end=d.ace.session.doc.replace(h,e))}}},this.scrollTo=function(e,t){var n=this.ace.renderer,r=n.layerConfig,a=r.maxHeight;a-=(n.$size.scrollerHeight-n.lineHeight)*n.$scrollPastEnd,null!=t&&this.ace.session.setScrollTop(Math.max(0,Math.min(t,a))),null!=e&&this.ace.session.setScrollLeft(Math.max(0,Math.min(e,r.width)))},this.scrollInfo=function(){return 0},this.scrollIntoView=function(e,t){if(e){var n=this.ace.renderer,r={top:0,bottom:t};n.scrollCursorIntoView(k(e),2*n.lineHeight/n.$size.scrollerHeight,r)}},this.getLine=function(e){return this.ace.session.getLine(e)},this.getRange=function(e,t){return this.ace.session.getTextRange(new r(e.line,e.ch,t.line,t.ch))},this.replaceRange=function(e,t,n){return n||(n=t),this.ace.session.replace(new r(t.line,t.ch,n.line,n.ch),e)},this.replaceSelection=this.replaceSelections=function(e){var t=this.ace.selection;if(this.ace.inVirtualSelectionMode)this.ace.session.replace(t.getRange(),e[0]||"");else{t.inVirtualSelectionMode=!0;var n=t.rangeList.ranges;n.length||(n=[this.ace.multiSelect.getRange()]);for(var r=n.length;r--;)this.ace.session.replace(n[r],e[r]||"");t.inVirtualSelectionMode=!1}},this.getSelection=function(){return this.ace.getSelectedText()},this.getSelections=function(){return this.listSelections().map((function(e){return this.getRange(e.anchor,e.head)}),this)},this.getInputField=function(){return this.ace.textInput.getElement()},this.getWrapperElement=function(){return this.ace.container};var t={indentWithTabs:"useSoftTabs",indentUnit:"tabSize",tabSize:"tabSize",firstLineNumber:"firstLineNumber",readOnly:"readOnly"};this.setOption=function(e,n){switch(this.state[e]=n,e){case"indentWithTabs":e=t[e],n=!n;break;case"keyMap":return void(this.state.$keyMap=n);default:e=t[e]}e&&this.ace.setOption(e,n)},this.getOption=function(e,n){var r=t[e];switch(r&&(n=this.ace.getOption(r)),e){case"indentWithTabs":return e=t[e],!n;case"keyMap":return this.state.$keyMap}return r?n:this.state[e]},this.toggleOverwrite=function(e){return this.state.overwrite=e,this.ace.setOverwrite(e)},this.addOverlay=function(e){if(!this.$searchHighlight||!this.$searchHighlight.session){var t=new w(null,"ace_highlight-marker","text"),n=this.ace.session.addDynamicMarker(t);t.id=n.id,t.session=this.ace.session,t.destroy=function(e){t.session.off("change",t.updateOnChange),t.session.off("changeEditor",t.destroy),t.session.removeMarker(t.id),t.session=null},t.updateOnChange=function(e){var n=e.start.row;n==e.end.row?t.cache[n]=void 0:t.cache.splice(n,t.cache.length)},t.session.on("changeEditor",t.destroy),t.session.on("change",t.updateOnChange)}var r=new RegExp(e.query.source,"gmi");this.$searchHighlight=e.highlight=t,this.$searchHighlight.setRegexp(r),this.ace.renderer.updateBackMarkers()},this.removeOverlay=function(e){this.$searchHighlight&&this.$searchHighlight.session&&this.$searchHighlight.destroy()},this.getScrollInfo=function(){var e=this.ace.renderer,t=e.layerConfig;return{left:e.scrollLeft,top:e.scrollTop,height:t.maxHeight,width:t.width,clientHeight:t.height,clientWidth:t.width}},this.getValue=function(){return this.ace.getValue()},this.setValue=function(e){return this.ace.setValue(e,-1)},this.getTokenTypeAt=function(e){var t=this.ace.session.getTokenAt(e.line,e.ch);return t&&/comment|string/.test(t.type)?"string":""},this.findMatchingBracket=function(e){var t=this.ace.session.findMatchingBracket(k(e));return{to:t&&C(t)}},this.indentLine=function(e,t){!0===t?this.ace.session.indentRows(e,e,"\t"):!1===t&&this.ace.session.outdentRows(new r(e,0,e,0))},this.indexFromPos=function(e){return this.ace.session.doc.positionToIndex(k(e))},this.posFromIndex=function(e){return C(this.ace.session.doc.indexToPosition(e))},this.focus=function(e){return this.ace.textInput.focus()},this.blur=function(e){return this.ace.blur()},this.defaultTextHeight=function(e){return this.ace.renderer.layerConfig.lineHeight},this.scanForBracket=function(e,t,n,r){var a=r.bracketRegex.source,l=/paren|text|operator|tag/;if(1==t)var f=this.ace.session.$findClosingBracket(a.slice(1,2),k(e),l);else f=this.ace.session.$findOpeningBracket(a.slice(-2,-1),{row:e.line,column:e.ch+1},l);return f&&{pos:C(f)}},this.refresh=function(){return this.ace.resize(!0)},this.getMode=function(){return{name:this.getOption("mode")}},this.execCommand=function(e){"indentAuto"==e?this.ace.execCommand("autoindent"):console.log(e+" is not implemented")}}.call(S.prototype),(S.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0}).prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){throw"not implemented"},indentation:function(){throw"not implemented"},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var a=function(e){return n?e.toLowerCase():e};if(a(this.string.substr(this.pos,e.length))==a(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}},S.defineExtension=function(e,t){S.prototype[e]=t},l.importCssString(".normal-mode .ace_cursor{    border: none;    background-color: rgba(255,0,0,0.5);}.normal-mode .ace_hidden-cursors .ace_cursor{  background-color: transparent;  border: 1px solid red;  opacity: 0.7}.ace_dialog {  position: absolute;  left: 0; right: 0;  background: inherit;  z-index: 15;  padding: .1em .8em;  overflow: hidden;  color: inherit;}.ace_dialog-top {  border-bottom: 1px solid #444;  top: 0;}.ace_dialog-bottom {  border-top: 1px solid #444;  bottom: 0;}.ace_dialog input {  border: none;  outline: none;  background: transparent;  width: 20em;  color: inherit;  font-family: monospace;}","vimMode"),function(){function e(e,t,n){var r;return(r=e.ace.container.appendChild(document.createElement("div"))).className=n?"ace_dialog ace_dialog-bottom":"ace_dialog ace_dialog-top","string"==typeof t?r.innerHTML=t:r.appendChild(t),r}function t(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}S.defineExtension("openDialog",(function(n,r,a){if(!this.virtualSelectionMode()){a||(a={}),t(this,null);var l=e(this,n,a.bottom),f=!1,d=this;this.state.dialog=l;var h,p=l.getElementsByTagName("input")[0];return p?(a.value&&(p.value=a.value,!1!==a.selectValueOnOpen&&p.select()),a.onInput&&S.on(p,"input",(function(e){a.onInput(e,p.value,y)})),a.onKeyUp&&S.on(p,"keyup",(function(e){a.onKeyUp(e,p.value,y)})),S.on(p,"keydown",(function(e){a&&a.onKeyDown&&a.onKeyDown(e,p.value,y)||(13==e.keyCode&&r(p.value),(27==e.keyCode||!1!==a.closeOnEnter&&13==e.keyCode)&&(p.blur(),S.e_stop(e),y()))})),!1!==a.closeOnBlur&&S.on(p,"blur",y),p.focus()):(h=l.getElementsByTagName("button")[0])&&(S.on(h,"click",(function(){y(),d.focus()})),!1!==a.closeOnBlur&&S.on(h,"blur",y),h.focus()),y}function y(e){if("string"==typeof e)p.value=e;else{if(f)return;if(e&&"blur"==e.type&&document.activeElement===p)return;d.state.dialog=null,f=!0,l.parentNode.removeChild(l),d.focus(),a.onClose&&a.onClose(l)}}})),S.defineExtension("openNotification",(function(n,r){if(!this.virtualSelectionMode()){t(this,h);var a,l=e(this,n,r&&r.bottom),f=!1,d=r&&void 0!==r.duration?r.duration:5e3;return S.on(l,"click",(function(e){S.e_preventDefault(e),h()})),d&&(a=setTimeout(h,d)),h}function h(){f||(f=!0,clearTimeout(a),l.parentNode.removeChild(l))}}))}();var E=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],O=E.length,j=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],T=S.Pos,A=function(){return fe};function P(e,t){this==S.keyMap.vim&&S.rmClass(e.getWrapperElement(),"cm-fat-cursor"),t&&t.attach==D||function(e){e.setOption("disableInput",!1),e.off("cursorActivity",Ct),S.off(e.getInputField(),"paste",L(e)),e.state.vim=null}(e)}function D(e,t){this==S.keyMap.vim&&S.addClass(e.getWrapperElement(),"cm-fat-cursor"),t&&t.attach==D||function(e){e.setOption("disableInput",!0),e.setOption("showCursorWhenSelecting",!1),S.signal(e,"vim-mode-change",{mode:"normal"}),e.on("cursorActivity",Ct),ce(e),S.on(e.getInputField(),"paste",L(e))}(e)}function R(e,t){if(t){if(this[e])return this[e];var n=function(e){if("'"==e.charAt(0))return e.charAt(1);var t=e.split(/-(?!$)/),n=t[t.length-1];if(1==t.length&&1==t[0].length)return!1;if(2==t.length&&"Shift"==t[0]&&1==n.length)return!1;for(var r=!1,a=0;a<t.length;a++){var l=t[a];l in I?t[a]=I[l]:r=!0,l in M&&(t[a]=M[l])}if(!r)return!1;K(n)&&(t[t.length-1]=n.toLowerCase());return"<"+t.join("-")+">"}(e);if(!n)return!1;var r=S.Vim.findKey(t,n);return"function"==typeof r&&S.signal(t,"vim-keypress",n),r}}S.defineOption("vimMode",!1,(function(e,t,n){t&&"vim"!=e.getOption("keyMap")?e.setOption("keyMap","vim"):!t&&n!=S.Init&&/^vim/.test(e.getOption("keyMap"))&&e.setOption("keyMap","default")}));var I={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},M={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function L(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(ke(e.getCursor(),0,1)),xe.enterInsertMode(e,{},t))}),t.onPasteFn}var N=/[\d]/,F=[S.isWordChar,function(e){return e&&!S.isWordChar(e)&&!/\s/.test(e)}],q=[function(e){return/\S/.test(e)}];function B(e,t){for(var n=[],r=e;r<e+t;r++)n.push(String.fromCharCode(r));return n}var U=B(65,26),H=B(97,26),z=B(48,10),V=[].concat(U,H,z,["<",">"]),W=[].concat(U,H,z,["-",'"',".",":","/"]);function Z(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function G(e){return/^[a-z]$/.test(e)}function K(e){return/^[A-Z]$/.test(e)}function Y(e){return/^\s*$/.test(e)}function X(e){return-1!=".?!".indexOf(e)}function J(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}var Q={};function ee(e,t,n,r,a){if(void 0===t&&!a)throw Error("defaultValue is required unless callback is provided");if(n||(n="string"),Q[e]={type:n,defaultValue:t,callback:a},r)for(var l=0;l<r.length;l++)Q[r[l]]=Q[e];t&&te(e,t)}function te(e,t,n,r){var a=Q[e],l=(r=r||{}).scope;if(!a)return new Error("Unknown option: "+e);if("boolean"==a.type){if(t&&!0!==t)return new Error("Invalid argument: "+e+"="+t);!1!==t&&(t=!0)}a.callback?("local"!==l&&a.callback(t,void 0),"global"!==l&&n&&a.callback(t,n)):("local"!==l&&(a.value="boolean"==a.type?!!t:t),"global"!==l&&n&&(n.state.vim.options[e]={value:t}))}function ne(e,t,n){var r=Q[e],a=(n=n||{}).scope;if(!r)return new Error("Unknown option: "+e);if(r.callback){var l=t&&r.callback(void 0,t);return"global"!==a&&void 0!==l?l:"local"!==a?r.callback():void 0}return((l="global"!==a&&t&&t.state.vim.options[e])||"local"!==a&&r||{}).value}ee("filetype",void 0,"string",["ft"],(function(e,t){if(void 0!==t){if(void 0===e)return"null"==(n=t.getOption("mode"))?"":n;var n=""==e?"null":e;t.setOption("mode",n)}}));var re,oe,ae=function(){var e=100,t=-1,n=0,r=0,a=new Array(e);function l(l,f){(t+=f)>n?t=n:t<r&&(t=r);var d=a[(e+t)%e];if(d&&!d.find()){var h,p=f>0?1:-1,y=l.getCursor();do{if((d=a[(e+(t+=p))%e])&&(h=d.find())&&!je(y,h))break}while(t<n&&t>r)}return d}return{cachedCursor:void 0,add:function(l,f,d){var h=a[t%e];function p(n){var r=++t%e,f=a[r];f&&f.clear(),a[r]=l.setBookmark(n)}if(h){var y=h.find();y&&!je(y,f)&&p(f)}else p(f);p(d),n=t,(r=t-e+1)<0&&(r=0)},find:function(e,n){var r=t,a=l(e,n);return t=r,a&&a.find()},move:l}},se=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function le(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=se()}function ce(e){return e.state.vim||(e.state.vim={inputState:new de,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),e.state.vim}function ue(){for(var e in re={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:ae(),macroModeState:new le,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new me({}),searchHistoryController:new ge,exCommandHistoryController:new ge},Q){var t=Q[e];t.value=t.defaultValue}}le.prototype={exitMacroRecordMode:function(){var e=re.macroModeState;e.onRecordingDone&&e.onRecordingDone(),e.onRecordingDone=void 0,e.isRecording=!1},enterMacroRecordMode:function(e,t){var n=re.registerController.getRegister(t);n&&(n.clear(),this.latestRegister=t,e.openDialog&&(this.onRecordingDone=e.openDialog("(recording)["+t+"]",null,{bottom:!0})),this.isRecording=!0)}};var fe={buildKeyMap:function(){},getRegisterController:function(){return re.registerController},resetVimGlobalState_:ue,getVimGlobalState_:function(){return re},maybeInitVimState_:ce,suppressErrorLogging:!1,InsertModeKey:jt,map:function(e,t,n){wt.map(e,t,n)},unmap:function(e,t){wt.unmap(e,t)},noremap:function(e,t,n){function r(e){return e?[e]:["normal","insert","visual"]}for(var a=r(n),l=E.length,f=l-O;f<l&&a.length;f++){var d=E[f];if(!(d.keys!=t||n&&d.context&&d.context!==n||"ex"===d.type.substr(0,2)||"key"===d.type.substr(0,3))){var h={};for(var p in d)h[p]=d[p];h.keys=e,n&&!h.context&&(h.context=n),this._mapCommand(h);var y=r(d.context);a=a.filter((function(e){return-1===y.indexOf(e)}))}}},mapclear:function(e){var t=E.length,n=O,r=E.slice(0,t-n);if(E=E.slice(t-n),e)for(var a=r.length-1;a>=0;a--){var l=r[a];if(e!==l.context)if(l.context)this._mapCommand(l);else{var f=["normal","insert","visual"];for(var d in f)if(f[d]!==e){var h={};for(var p in l)h[p]=l[p];h.context=f[d],this._mapCommand(h)}}}},setOption:te,getOption:ne,defineOption:ee,defineEx:function(e,t,n){if(t){if(0!==e.indexOf(t))throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered')}else t=e;bt[e]=n,wt.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(e,t,n){var r=this.findKey(e,t,n);if("function"==typeof r)return r()},findKey:function(e,t,n){var r,a=ce(e);function l(){var r=re.macroModeState;if(r.isRecording){if("q"==t)return r.exitMacroRecordMode(),he(e),!0;"mapping"!=n&&function(e,t){if(e.isPlaying)return;var n=e.latestRegister,r=re.registerController.getRegister(n);r&&r.pushText(t)}(r,t)}}function f(){if("<Esc>"==t)return he(e),a.visualMode?Be(e):a.insertMode&&xt(e),!0}return!1===(r=a.insertMode?function(){if(f())return!0;for(var n=a.inputState.keyBuffer=a.inputState.keyBuffer+t,r=1==t.length,l=ve.matchCommand(n,E,a.inputState,"insert");n.length>1&&"full"!=l.type;){n=a.inputState.keyBuffer=n.slice(1);var d=ve.matchCommand(n,E,a.inputState,"insert");"none"!=d.type&&(l=d)}if("none"==l.type)return he(e),!1;if("partial"==l.type)return oe&&window.clearTimeout(oe),oe=window.setTimeout((function(){a.insertMode&&a.inputState.keyBuffer&&he(e)}),ne("insertModeEscKeysTimeout")),!r;if(oe&&window.clearTimeout(oe),r){for(var h=e.listSelections(),p=0;p<h.length;p++){var y=h[p].head;e.replaceRange("",ke(y,0,-(n.length-1)),y,"+input")}re.macroModeState.lastInsertModeChanges.changes.pop()}return he(e),l.command}():function(){if(l()||f())return!0;var n=a.inputState.keyBuffer=a.inputState.keyBuffer+t;if(/^[1-9]\d*$/.test(n))return!0;if(!(r=/^(\d*)(.*)$/.exec(n)))return he(e),!1;var r,d=a.visualMode?"visual":"normal",h=ve.matchCommand(r[2]||r[1],E,a.inputState,d);return"none"==h.type?(he(e),!1):"partial"==h.type||(a.inputState.keyBuffer="",(r=/^(\d*)(.*)$/.exec(n))[1]&&"0"!=r[1]&&a.inputState.pushRepeatDigit(r[1]),h.command)}())?void 0:!0===r?function(){return!0}:function(){if(!r.operator&&!r.isEdit||!e.getOption("readOnly"))return e.operation((function(){e.curOp.isVimOp=!0;try{"keyToKey"==r.type?function(n){for(var r;n;)r=/<\w+-.+?>|<\w+>|./.exec(n),t=r[0],n=n.substring(r.index+t.length),S.Vim.handleKey(e,t,"mapping")}(r.toKeys):ve.processCommand(e,a,r)}catch(t){throw e.state.vim=void 0,ce(e),S.Vim.suppressErrorLogging||console.log(t),t}return!0}))}},handleEx:function(e,t){wt.processCommand(e,t)},defineMotion:function(e,t){ye[e]=t},defineAction:function(e,t){xe[e]=t},defineOperator:function(e,t){we[e]=t},mapCommand:function(e,t,n,r,a){var l={keys:e,type:t};for(var f in l[t]=n,l[t+"Args"]=r,a)l[f]=a[f];_t(l)},_mapCommand:_t,defineRegister:function(e,t){var n=re.registerController.registers;if(!e||1!=e.length)throw Error("Register name must be 1 character");n[e]=t,W.push(e)},exitVisualMode:Be,exitInsertMode:xt};function de(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function he(e,t){e.state.vim.inputState=new de,S.signal(e,"vim-command-done",t)}function pe(e,t,n){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!n}function me(e){this.registers=e,this.unnamedRegister=e['"']=new pe,e["."]=new pe,e[":"]=new pe,e["/"]=new pe}function ge(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}de.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},de.prototype.getRepeat=function(){var e=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10))),e},pe.prototype={setText:function(e,t,n){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!n},pushText:function(e,t){t&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(e)},pushInsertModeChanges:function(e){this.insertModeChanges.push(se(e))},pushSearchQuery:function(e){this.searchQueries.push(e)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},me.prototype={pushText:function(e,t,n,r,a){r&&"\n"!==n.charAt(n.length-1)&&(n+="\n");var l=this.isValidRegister(e)?this.getRegister(e):null;if(l){K(e)?l.pushText(n,r):l.setText(n,r,a),this.unnamedRegister.setText(l.toString(),r)}else{switch(t){case"yank":this.registers[0]=new pe(n,r,a);break;case"delete":case"change":-1==n.indexOf("\n")?this.registers["-"]=new pe(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new pe(n,r))}this.unnamedRegister.setText(n,r,a)}},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new pe),this.registers[e]):this.unnamedRegister},isValidRegister:function(e){return e&&J(e,W)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}},ge.prototype={nextMatch:function(e,t){var n=this.historyBuffer,r=t?-1:1;null===this.initialPrefix&&(this.initialPrefix=e);for(var a=this.iterator+r;t?a>=0:a<n.length;a+=r)for(var l=n[a],f=0;f<=l.length;f++)if(this.initialPrefix==l.substring(0,f))return this.iterator=a,l;return a>=n.length?(this.iterator=n.length,this.initialPrefix):a<0?e:void 0},pushInput:function(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var ve={matchCommand:function(e,t,n,r){var a,l=function(e,t,n,r){for(var a,l=[],f=[],d=0;d<t.length;d++){var h=t[d];"insert"==n&&"insert"!=h.context||h.context&&h.context!=n||r.operator&&"action"==h.type||!(a=Ce(e,h.keys))||("partial"==a&&l.push(h),"full"==a&&f.push(h))}return{partial:l.length&&l,full:f.length&&f}}(e,t,r,n);if(!l.full&&!l.partial)return{type:"none"};if(!l.full&&l.partial)return{type:"partial"};for(var f=0;f<l.full.length;f++){var d=l.full[f];a||(a=d)}if("<character>"==a.keys.slice(-11)){var h=function(e){var t=/^.*(<[^>]+>)$/.exec(e),n=t?t[1]:e.slice(-1);if(n.length>1)switch(n){case"<CR>":n="\n";break;case"<Space>":n=" ";break;default:n=""}return n}(e);if(/<C-.>/.test(h)||!h)return{type:"none"};n.selectedCharacter=h}return{type:"full",command:a}},processCommand:function(e,t,n){switch(t.inputState.repeatOverride=n.repeatOverride,n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n)}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=Se(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator)return r.motion="expandToLine",r.motionArgs={linewise:!0},void this.evalInput(e,t);he(e)}r.operator=n.operator,r.operatorArgs=Se(n.operatorArgs),n.exitVisualBlock&&(t.visualBlock=!1,Fe(e)),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,a=Se(n.operatorMotionArgs);a&&r&&a.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,a=r.getRepeat(),l=!!a,f=Se(n.actionArgs)||{};r.selectedCharacter&&(f.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),f.repeat=a||1,f.repeatIsExplicit=l,f.registerName=r.registerName,he(e),t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,r,n),xe[n.action](e,f,t)},processSearch:function(e,t,n){if(e.getSearchCursor){var r=n.searchArgs.forward,a=n.searchArgs.wholeWordOnly;et(e).setReversed(!r);var l=r?"/":"?",f=et(e).getQuery(),d=e.getScrollInfo();switch(n.searchArgs.querySrc){case"prompt":var h=re.macroModeState;if(h.isPlaying)x(w=h.replaySearchQueries.shift(),!0,!1);else ct(e,{onClose:function(t){e.scrollTo(d.left,d.top),x(t,!0,!0);var n=re.macroModeState;n.isRecording&&function(e,t){if(!e.isPlaying){var n=e.latestRegister,r=re.registerController.getRegister(n);r&&r.pushSearchQuery&&r.pushSearchQuery(t)}}(n,t)},prefix:l,desc:lt,onKeyUp:function(t,n,a){var l,f,h,p=S.keyName(t);"Up"==p||"Down"==p?(l="Up"==p,f=t.target?t.target.selectionEnd:0,a(n=re.searchHistoryController.nextMatch(n,l)||""),f&&t.target&&(t.target.selectionEnd=t.target.selectionStart=Math.min(f,t.target.value.length))):"Left"!=p&&"Right"!=p&&"Ctrl"!=p&&"Alt"!=p&&"Shift"!=p&&re.searchHistoryController.reset();try{h=ut(e,n,!0,!0)}catch(t){}h?e.scrollIntoView(dt(e,!r,h),30):(ht(e),e.scrollTo(d.left,d.top))},onKeyDown:function(t,n,r){var a=S.keyName(t);"Esc"==a||"Ctrl-C"==a||"Ctrl-["==a||"Backspace"==a&&""==n?(re.searchHistoryController.pushInput(n),re.searchHistoryController.reset(),ut(e,f),ht(e),e.scrollTo(d.left,d.top),S.e_stop(t),he(e),r(),e.focus()):"Up"==a||"Down"==a?S.e_stop(t):"Ctrl-U"==a&&(S.e_stop(t),r(""))}});break;case"wordUnderCursor":var p=He(e,!1,!0,!1,!0),y=!0;if(p||(p=He(e,!1,!0,!1,!1),y=!1),!p)return;var w=e.getLine(p.start.line).substring(p.start.ch,p.end.ch);w=y&&a?"\\b"+w+"\\b":function(e){return e.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}(w),re.jumpList.cachedCursor=e.getCursor(),e.setCursor(p.start),x(w,!0,!1)}}function x(r,a,l){re.searchHistoryController.pushInput(r),re.searchHistoryController.reset();try{ut(e,r,a,l)}catch(t){return st(e,"Invalid regex: "+r),void he(e)}ve.processMotion(e,t,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:n.searchArgs.toJumplist}})}},processEx:function(e,t,n){function r(t){re.exCommandHistoryController.pushInput(t),re.exCommandHistoryController.reset(),wt.processCommand(e,t)}function a(t,n,r){var a,l,f=S.keyName(t);("Esc"==f||"Ctrl-C"==f||"Ctrl-["==f||"Backspace"==f&&""==n)&&(re.exCommandHistoryController.pushInput(n),re.exCommandHistoryController.reset(),S.e_stop(t),he(e),r(),e.focus()),"Up"==f||"Down"==f?(S.e_stop(t),a="Up"==f,l=t.target?t.target.selectionEnd:0,r(n=re.exCommandHistoryController.nextMatch(n,a)||""),l&&t.target&&(t.target.selectionEnd=t.target.selectionStart=Math.min(l,t.target.value.length))):"Ctrl-U"==f?(S.e_stop(t),r("")):"Left"!=f&&"Right"!=f&&"Ctrl"!=f&&"Alt"!=f&&"Shift"!=f&&re.exCommandHistoryController.reset()}"keyToEx"==n.type?wt.processCommand(e,n.exArgs.input):t.visualMode?ct(e,{onClose:r,prefix:":",value:"'<,'>",onKeyDown:a,selectValueOnOpen:!1}):ct(e,{onClose:r,prefix:":",onKeyDown:a})},evalInput:function(e,t){var n,r,a,l=t.inputState,f=l.motion,d=l.motionArgs||{},h=l.operator,p=l.operatorArgs||{},y=l.registerName,w=t.sel,x=Oe(t.visualMode?_e(e,w.head):e.getCursor("head")),_=Oe(t.visualMode?_e(e,w.anchor):e.getCursor("anchor")),S=Oe(x),k=Oe(_);if(h&&this.recordLastEdit(t,l),(a=void 0!==l.repeatOverride?l.repeatOverride:l.getRepeat())>0&&d.explicitRepeat?d.repeatIsExplicit=!0:(d.noRepeat||!d.explicitRepeat&&0===a)&&(a=1,d.repeatIsExplicit=!1),l.selectedCharacter&&(d.selectedCharacter=p.selectedCharacter=l.selectedCharacter),d.repeat=a,he(e),f){var C=ye[f](e,x,d,t);if(t.lastMotion=ye[f],!C)return;if(d.toJumplist){h||null==e.ace.curOp||(e.ace.curOp.command.scrollIntoView="center-animate");var E=re.jumpList,O=E.cachedCursor;O?(ze(e,O,C),delete E.cachedCursor):ze(e,x,C)}C instanceof Array?(r=C[0],n=C[1]):n=C,n||(n=Oe(x)),t.visualMode?(t.visualBlock&&n.ch===1/0||(n=_e(e,n,t.visualBlock)),r&&(r=_e(e,r,!0)),r=r||k,w.anchor=r,w.head=n,Fe(e),Ye(e,t,"<",$e(r,n)?r:n),Ye(e,t,">",$e(r,n)?n:r)):h||(n=_e(e,n),e.setCursor(n.line,n.ch))}if(h){if(p.lastSel){r=k;var j=p.lastSel,A=Math.abs(j.head.line-j.anchor.line),P=Math.abs(j.head.ch-j.anchor.ch);n=j.visualLine?T(k.line+A,k.ch):j.visualBlock?T(k.line+A,k.ch+P):j.head.line==j.anchor.line?T(k.line,k.ch+P):T(k.line+A,k.ch),t.visualMode=!0,t.visualLine=j.visualLine,t.visualBlock=j.visualBlock,w=t.sel={anchor:r,head:n},Fe(e)}else t.visualMode&&(p.lastSel={anchor:Oe(w.anchor),head:Oe(w.head),visualBlock:t.visualBlock,visualLine:t.visualLine});var D,R,I,M,L;if(t.visualMode){if(D=Te(w.head,w.anchor),R=Ae(w.head,w.anchor),I=t.visualLine||p.linewise,L=qe(e,{anchor:D,head:R},M=t.visualBlock?"block":I?"line":"char"),I){var N=L.ranges;if("block"==M)for(var F=0;F<N.length;F++)N[F].head.ch=De(e,N[F].head.line);else"line"==M&&(N[0].head=T(N[0].head.line+1,0))}}else{if(D=Oe(r||k),$e(R=Oe(n||S),D)){var q=D;D=R,R=q}(I=d.linewise||p.linewise)?function(e,t,n){t.ch=0,n.ch=0,n.line++}(0,D,R):d.forward&&function(e,t,n){var r=e.getRange(t,n);if(/\n\s*$/.test(r)){var a=r.split("\n");a.pop();for(var l=a.pop();a.length>0&&l&&Y(l);l=a.pop())n.line--,n.ch=0;l?(n.line--,n.ch=De(e,n.line)):n.ch=0}}(e,D,R),L=qe(e,{anchor:D,head:R},M="char",!d.inclusive||I)}e.setSelections(L.ranges,L.primary),t.lastMotion=null,p.repeat=a,p.registerName=y,p.linewise=I;var B=we[h](e,p,L.ranges,k,n);t.visualMode&&Be(e,null!=B),B&&e.setCursor(B)}},recordLastEdit:function(e,t,n){var r=re.macroModeState;r.isPlaying||(e.lastEditInputState=t,e.lastEditActionCommand=n,r.lastInsertModeChanges.changes=[],r.lastInsertModeChanges.expectCursorActivityForChange=!1,r.lastInsertModeChanges.visualBlock=e.visualBlock?e.sel.head.line-e.sel.anchor.line:0)}},ye={moveToTopLine:function(e,t,n){var r=mt(e).top+n.repeat-1;return T(r,Ue(e.getLine(r)))},moveToMiddleLine:function(e){var t=mt(e),n=Math.floor(.5*(t.top+t.bottom));return T(n,Ue(e.getLine(n)))},moveToBottomLine:function(e,t,n){var r=mt(e).bottom-n.repeat+1;return T(r,Ue(e.getLine(r)))},expandToLine:function(e,t,n){return T(t.line+n.repeat-1,1/0)},findNext:function(e,t,n){var r=et(e),a=r.getQuery();if(a){var l=!n.forward;return l=r.isReversed()?!l:l,ft(e,a),dt(e,l,a,n.repeat)}},goToMark:function(e,t,n,r){var a=gt(e,r,n.selectedCharacter);return a?n.linewise?{line:a.line,ch:Ue(e.getLine(a.line))}:a:null},moveToOtherHighlightedEnd:function(e,t,n,r){if(r.visualBlock&&n.sameLine){var a=r.sel;return[_e(e,T(a.anchor.line,a.head.ch)),_e(e,T(a.head.line,a.anchor.ch))]}return[r.sel.head,r.sel.anchor]},jumpToMark:function(e,t,n,r){for(var a=t,l=0;l<n.repeat;l++){var f=a;for(var d in r.marks)if(G(d)){var h=r.marks[d].find();if(!((n.forward?$e(h,f):$e(f,h))||n.linewise&&h.line==f.line)){var p=je(f,a),y=n.forward?Pe(f,h,a):Pe(a,h,f);(p||y)&&(a=h)}}}return n.linewise&&(a=T(a.line,Ue(e.getLine(a.line)))),a},moveByCharacters:function(e,t,n){var r=t,a=n.repeat,l=n.forward?r.ch+a:r.ch-a;return T(r.line,l)},moveByLines:function(e,t,n,r){var a=t,l=a.ch;switch(r.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:l=r.lastHPos;break;default:r.lastHPos=l}var f=n.repeat+(n.repeatOffset||0),d=n.forward?a.line+f:a.line-f,h=e.firstLine(),p=e.lastLine();if(d<h&&a.line==h)return this.moveToStartOfLine(e,t,n,r);if(d>p&&a.line==p)return this.moveToEol(e,t,n,r,!0);var y=e.ace.session.getFoldLine(d);return y&&(n.forward?d>y.start.row&&(d=y.end.row+1):d=y.start.row),n.toFirstChar&&(l=Ue(e.getLine(d)),r.lastHPos=l),r.lastHSPos=e.charCoords(T(d,l),"div").left,T(d,l)},moveByDisplayLines:function(e,t,n,r){var a=t;switch(r.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:r.lastHSPos=e.charCoords(a,"div").left}var l=n.repeat;if((d=e.findPosV(a,n.forward?l:-l,"line",r.lastHSPos)).hitSide)if(n.forward)var f={top:e.charCoords(d,"div").top+8,left:r.lastHSPos},d=e.coordsChar(f,"div");else{var h=e.charCoords(T(e.firstLine(),0),"div");h.left=r.lastHSPos,d=e.coordsChar(h,"div")}return r.lastHPos=d.ch,d},moveByPage:function(e,t,n){var r=t,a=n.repeat;return e.findPosV(r,n.forward?a:-a,"page")},moveByParagraph:function(e,t,n){var r=n.forward?1:-1;return Je(e,t,n.repeat,r)},moveBySentence:function(e,t,n){var r=n.forward?1:-1;return function(e,t,n,r){function a(e,t){if(t.pos+t.dir<0||t.pos+t.dir>=t.line.length){if(t.ln+=t.dir,!Z(e,t.ln))return t.line=null,t.ln=null,void(t.pos=null);t.line=e.getLine(t.ln),t.pos=t.dir>0?0:t.line.length-1}else t.pos+=t.dir}function l(e,t,n,r){var l=""===(p=e.getLine(t)),f={line:p,ln:t,pos:n,dir:r},d={ln:f.ln,pos:f.pos},h=""===f.line;for(a(e,f);null!==f.line;){if(d.ln=f.ln,d.pos=f.pos,""===f.line&&!h)return{ln:f.ln,pos:f.pos};if(l&&""!==f.line&&!Y(f.line[f.pos]))return{ln:f.ln,pos:f.pos};!X(f.line[f.pos])||l||f.pos!==f.line.length-1&&!Y(f.line[f.pos+1])||(l=!0),a(e,f)}var p=e.getLine(d.ln);d.pos=0;for(var y=p.length-1;y>=0;--y)if(!Y(p[y])){d.pos=y;break}return d}function f(e,t,n,r){var l={line:h=e.getLine(t),ln:t,pos:n,dir:r},f={ln:l.ln,pos:null},d=""===l.line;for(a(e,l);null!==l.line;){if(""===l.line&&!d)return null!==f.pos?f:{ln:l.ln,pos:l.pos};if(X(l.line[l.pos])&&null!==f.pos&&(l.ln!==f.ln||l.pos+1!==f.pos))return f;""===l.line||Y(l.line[l.pos])||(d=!1,f={ln:l.ln,pos:l.pos}),a(e,l)}var h=e.getLine(f.ln);f.pos=0;for(var p=0;p<h.length;++p)if(!Y(h[p])){f.pos=p;break}return f}var d={ln:t.line,pos:t.ch};for(;n>0;)d=r<0?f(e,d.ln,d.pos,r):l(e,d.ln,d.pos,r),n--;return T(d.ln,d.pos)}(e,t,n.repeat,r)},moveByScroll:function(e,t,n,r){var a=e.getScrollInfo(),l=null,f=n.repeat;f||(f=a.clientHeight/(2*e.defaultTextHeight()));var d=e.charCoords(t,"local");if(n.repeat=f,!(l=ye.moveByDisplayLines(e,t,n,r)))return null;var h=e.charCoords(l,"local");return e.scrollTo(null,a.top+h.top-d.top),l},moveByWords:function(e,t,n){return function(e,t,n,r,a,l){var f=Oe(t),d=[];(r&&!a||!r&&a)&&n++;for(var h=!(r&&a),p=0;p<n;p++){var y=Ge(e,t,r,l,h);if(!y){var w=De(e,e.lastLine());d.push(r?{line:e.lastLine(),from:w,to:w}:{line:0,from:0,to:0});break}d.push(y),t=T(y.line,r?y.to-1:y.from)}var x=d.length!=n,_=d[0],S=d.pop();return r&&!a?(x||_.from==f.ch&&_.line==f.line||(S=d.pop()),T(S.line,S.from)):r&&a?T(S.line,S.to-1):!r&&a?(x||_.to==f.ch&&_.line==f.line||(S=d.pop()),T(S.line,S.to)):T(S.line,S.from)}(e,t,n.repeat,!!n.forward,!!n.wordEnd,!!n.bigWord)},moveTillCharacter:function(e,t,n){var r=Ke(e,n.repeat,n.forward,n.selectedCharacter),a=n.forward?-1:1;return Ve(a,n),r?(r.ch+=a,r):null},moveToCharacter:function(e,t,n){var r=n.repeat;return Ve(0,n),Ke(e,r,n.forward,n.selectedCharacter)||t},moveToSymbol:function(e,t,n){return function(e,t,n,r){var a=Oe(e.getCursor()),l=n?1:-1,f=n?e.lineCount():-1,d=a.ch,h=a.line,p=e.getLine(h),y={lineText:p,nextCh:p.charAt(d),lastCh:null,index:d,symb:r,reverseSymb:(n?{")":"(","}":"{"}:{"(":")","{":"}"})[r],forward:n,depth:0,curMoveThrough:!1},w=We[r];if(!w)return a;var x=Ze[w].init,_=Ze[w].isComplete;x&&x(y);for(;h!==f&&t;){if(y.index+=l,y.nextCh=y.lineText.charAt(y.index),!y.nextCh){if(h+=l,y.lineText=e.getLine(h)||"",l>0)y.index=0;else{var S=y.lineText.length;y.index=S>0?S-1:0}y.nextCh=y.lineText.charAt(y.index)}_(y)&&(a.line=h,a.ch=y.index,t--)}if(y.nextCh||y.curMoveThrough)return T(h,y.index);return a}(e,n.repeat,n.forward,n.selectedCharacter)||t},moveToColumn:function(e,t,n,r){var a=n.repeat;return r.lastHPos=a-1,r.lastHSPos=e.charCoords(t,"div").left,function(e,t){var n=e.getCursor().line;return _e(e,T(n,t-1))}(e,a)},moveToEol:function(e,t,n,r,a){var l=T(t.line+n.repeat-1,1/0),f=e.clipPos(l);return f.ch--,a||(r.lastHPos=1/0,r.lastHSPos=e.charCoords(f,"div").left),l},moveToFirstNonWhiteSpaceCharacter:function(e,t){var n=t;return T(n.line,Ue(e.getLine(n.line)))},moveToMatchedSymbol:function(e,t){for(var n,r=t,a=r.line,l=r.ch,f=e.getLine(a);l<f.length;l++)if((n=f.charAt(l))&&-1!="()[]{}".indexOf(n)){var d=e.getTokenTypeAt(T(a,l+1));if("string"!==d&&"comment"!==d)break}if(l<f.length){var h=/[<>]/.test(f[l])?/[(){}[\]<>]/:/[(){}[\]]/;return e.findMatchingBracket(T(a,l+1),{bracketRegex:h}).to}return r},moveToStartOfLine:function(e,t){return T(t.line,0)},moveToLineOrEdgeOfDocument:function(e,t,n){var r=n.forward?e.lastLine():e.firstLine();return n.repeatIsExplicit&&(r=n.repeat-e.getOption("firstLineNumber")),T(r,Ue(e.getLine(r)))},textObjectManipulation:function(e,t,n,r){var a=n.selectedCharacter;"b"==a?a="(":"B"==a&&(a="{");var l,f=!n.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[a])l=function(e,t,n,r){var a,l,f=t,d={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[n],h={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[n],p=e.getLine(f.line).charAt(f.ch),y=p===h?1:0;if(a=e.scanForBracket(T(f.line,f.ch+y),-1,void 0,{bracketRegex:d}),l=e.scanForBracket(T(f.line,f.ch+y),1,void 0,{bracketRegex:d}),!a||!l)return{start:f,end:f};if(a=a.pos,l=l.pos,a.line==l.line&&a.ch>l.ch||a.line>l.line){var w=a;a=l,l=w}r?l.ch+=1:a.ch+=1;return{start:a,end:l}}(e,t,a,f);else if({"'":!0,'"':!0,"`":!0}[a])l=function(e,t,n,r){var a,l,f,d,h=Oe(t),p=e.getLine(h.line),y=p.split(""),w=y.indexOf(n);h.ch<w?h.ch=w:w<h.ch&&y[h.ch]==n&&(l=h.ch,--h.ch);if(y[h.ch]!=n||l)for(f=h.ch;f>-1&&!a;f--)y[f]==n&&(a=f+1);else a=h.ch+1;if(a&&!l)for(f=a,d=y.length;f<d&&!l;f++)y[f]==n&&(l=f);if(!a||!l)return{start:h,end:h};r&&(--a,++l);return{start:T(h.line,a),end:T(h.line,l)}}(e,t,a,f);else if("W"===a)l=He(e,f,!0,!0);else if("w"===a)l=He(e,f,!0,!1);else{if("p"!==a)return null;if(l=Je(e,t,n.repeat,0,f),n.linewise=!0,r.visualMode)r.visualLine||(r.visualLine=!0);else{var d=r.inputState.operatorArgs;d&&(d.linewise=!0),l.end.line--}}return e.state.vim.visualMode?function(e,t,n){var r,a=e.state.vim.sel,l=a.head,f=a.anchor;$e(n,t)&&(r=n,n=t,t=r);$e(l,f)?(l=Te(t,l),f=Ae(f,n)):(f=Te(t,f),-1==(l=ke(l=Ae(l,n),0,-1)).ch&&l.line!=e.firstLine()&&(l=T(l.line-1,De(e,l.line-1))));return[f,l]}(e,l.start,l.end):[l.start,l.end]},repeatLastCharacterSearch:function(e,t,n){var r=re.lastCharacterSearch,a=n.repeat,l=n.forward===r.forward,f=(r.increment?1:0)*(l?-1:1);e.moveH(-f,"char"),n.inclusive=!!l;var d=Ke(e,a,l,r.selectedCharacter);return d?(d.ch+=f,d):(e.moveH(f,"char"),t)}};function be(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}var we={change:function(e,t,n){var r,a,l=e.state.vim,f=n[0].anchor,d=n[0].head;if(l.visualMode)if(t.fullLine)d.ch=Number.MAX_VALUE,d.line--,e.setSelection(f,d),a=e.getSelection(),e.replaceSelection(""),r=f;else{a=e.getSelection();var h=be("",n.length);e.replaceSelections(h),r=Te(n[0].head,n[0].anchor)}else{a=e.getRange(f,d);var p=l.lastEditInputState||{};if("moveByWords"==p.motion&&!Y(a)){var y=/\s+$/.exec(a);y&&p.motionArgs&&p.motionArgs.forward&&(d=ke(d,0,-y[0].length),a=a.slice(0,-y[0].length))}var w=new T(f.line-1,Number.MAX_VALUE),x=e.firstLine()==e.lastLine();d.line>e.lastLine()&&t.linewise&&!x?e.replaceRange("",w,d):e.replaceRange("",f,d),t.linewise&&(x||(e.setCursor(w),S.commands.newlineAndIndent(e)),f.ch=Number.MAX_VALUE),r=f}re.registerController.pushText(t.registerName,"change",a,t.linewise,n.length>1),xe.enterInsertMode(e,{head:r},e.state.vim)},delete:function(e,t,n){var r,a,l=e.state.vim;if(l.visualBlock){a=e.getSelection();var f=be("",n.length);e.replaceSelections(f),r=n[0].anchor}else{var d=n[0].anchor,h=n[0].head;t.linewise&&h.line!=e.firstLine()&&d.line==e.lastLine()&&d.line==h.line-1&&(d.line==e.firstLine()?d.ch=0:d=T(d.line-1,De(e,d.line-1))),a=e.getRange(d,h),e.replaceRange("",d,h),r=d,t.linewise&&(r=ye.moveToFirstNonWhiteSpaceCharacter(e,d))}return re.registerController.pushText(t.registerName,"delete",a,t.linewise,l.visualBlock),_e(e,r,l.insertMode)},indent:function(e,t,n){var r=e.state.vim,a=n[0].anchor.line,l=r.visualBlock?n[n.length-1].anchor.line:n[0].head.line,f=r.visualMode?t.repeat:1;t.linewise&&l--;for(var d=a;d<=l;d++)for(var h=0;h<f;h++)e.indentLine(d,t.indentRight);return ye.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},indentAuto:function(e,t,n){return e.execCommand("indentAuto"),ye.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},changeCase:function(e,t,n,r,a){for(var l=e.getSelections(),f=[],d=t.toLower,h=0;h<l.length;h++){var p=l[h],y="";if(!0===d)y=p.toLowerCase();else if(!1===d)y=p.toUpperCase();else for(var w=0;w<p.length;w++){var x=p.charAt(w);y+=K(x)?x.toLowerCase():x.toUpperCase()}f.push(y)}return e.replaceSelections(f),t.shouldMoveCursor?a:!e.state.vim.visualMode&&t.linewise&&n[0].anchor.line+1==n[0].head.line?ye.moveToFirstNonWhiteSpaceCharacter(e,r):t.linewise?r:Te(n[0].anchor,n[0].head)},yank:function(e,t,n,r){var a=e.state.vim,l=e.getSelection(),f=a.visualMode?Te(a.sel.anchor,a.sel.head,n[0].head,n[0].anchor):r;return re.registerController.pushText(t.registerName,"yank",l,t.linewise,a.visualBlock),f}};var xe={jumpListWalk:function(e,t,n){if(!n.visualMode){var r=t.repeat,a=t.forward,l=re.jumpList.move(e,a?r:-r),f=l?l.find():void 0;f=f||e.getCursor(),e.setCursor(f),e.ace.curOp.command.scrollIntoView="center-animate"}},scroll:function(e,t,n){if(!n.visualMode){var r=t.repeat||1,a=e.defaultTextHeight(),l=e.getScrollInfo().top,f=a*r,d=t.forward?l+f:l-f,h=Oe(e.getCursor()),p=e.charCoords(h,"local");if(t.forward)d>p.top?(h.line+=(d-p.top)/a,h.line=Math.ceil(h.line),e.setCursor(h),p=e.charCoords(h,"local"),e.scrollTo(null,p.top)):e.scrollTo(null,d);else{var y=d+e.getScrollInfo().clientHeight;y<p.bottom?(h.line-=(p.bottom-y)/a,h.line=Math.floor(h.line),e.setCursor(h),p=e.charCoords(h,"local"),e.scrollTo(null,p.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,d)}}},scrollToCursor:function(e,t){var n=e.getCursor().line,r=e.charCoords(T(n,0),"local"),a=e.getScrollInfo().clientHeight,l=r.top,f=r.bottom-l;switch(t.position){case"center":l=l-a/2+f;break;case"bottom":l=l-a+f}e.scrollTo(null,l)},replayMacro:function(e,t,n){var r=t.selectedCharacter,a=t.repeat,l=re.macroModeState;for("@"==r?r=l.latestRegister:l.latestRegister=r;a--;)St(e,n,l,r)},enterMacroRecordMode:function(e,t){var n=re.macroModeState,r=t.selectedCharacter;re.registerController.isValidRegister(r)&&n.enterMacroRecordMode(e,r)},toggleOverwrite:function(e){e.state.overwrite?(e.toggleOverwrite(!1),e.setOption("keyMap","vim-insert"),S.signal(e,"vim-mode-change",{mode:"insert"})):(e.toggleOverwrite(!0),e.setOption("keyMap","vim-replace"),S.signal(e,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(e,t,n){if(!e.getOption("readOnly")){n.insertMode=!0,n.insertModeRepeat=t&&t.repeat||1;var r=t?t.insertAt:null,a=n.sel,l=t.head||e.getCursor("head"),f=e.listSelections().length;if("eol"==r)l=T(l.line,De(e,l.line));else if("bol"==r)l=T(l.line,0);else if("charAfter"==r)l=ke(l,0,1);else if("firstNonBlank"==r)l=ye.moveToFirstNonWhiteSpaceCharacter(e,l);else if("startOfSelectedArea"==r){if(!n.visualMode)return;n.visualBlock?(l=T(Math.min(a.head.line,a.anchor.line),Math.min(a.head.ch,a.anchor.ch)),f=Math.abs(a.head.line-a.anchor.line)+1):l=a.head.line<a.anchor.line?a.head:T(a.anchor.line,0)}else if("endOfSelectedArea"==r){if(!n.visualMode)return;n.visualBlock?(l=T(Math.min(a.head.line,a.anchor.line),Math.max(a.head.ch+1,a.anchor.ch)),f=Math.abs(a.head.line-a.anchor.line)+1):l=a.head.line>=a.anchor.line?ke(a.head,0,1):T(a.anchor.line,0)}else if("inplace"==r){if(n.visualMode)return}else"lastEdit"==r&&(l=vt(e)||l);e.setOption("disableInput",!1),t&&t.replace?(e.toggleOverwrite(!0),e.setOption("keyMap","vim-replace"),S.signal(e,"vim-mode-change",{mode:"replace"})):(e.toggleOverwrite(!1),e.setOption("keyMap","vim-insert"),S.signal(e,"vim-mode-change",{mode:"insert"})),re.macroModeState.isPlaying||(e.on("change",kt),S.on(e.getInputField(),"keydown",$t)),n.visualMode&&Be(e),Le(e,l,f)}},toggleVisualMode:function(e,t,n){var r,a=t.repeat,l=e.getCursor();n.visualMode?n.visualLine^t.linewise||n.visualBlock^t.blockwise?(n.visualLine=!!t.linewise,n.visualBlock=!!t.blockwise,S.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""}),Fe(e)):Be(e):(n.visualMode=!0,n.visualLine=!!t.linewise,n.visualBlock=!!t.blockwise,r=_e(e,T(l.line,l.ch+a-1),!0),n.sel={anchor:l,head:r},S.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""}),Fe(e),Ye(e,n,"<",Te(l,r)),Ye(e,n,">",Ae(l,r)))},reselectLastSelection:function(e,t,n){var r=n.lastSelection;if(n.visualMode&&Ne(e,n),r){var a=r.anchorMark.find(),l=r.headMark.find();if(!a||!l)return;n.sel={anchor:a,head:l},n.visualMode=!0,n.visualLine=r.visualLine,n.visualBlock=r.visualBlock,Fe(e),Ye(e,n,"<",Te(a,l)),Ye(e,n,">",Ae(a,l)),S.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":n.visualBlock?"blockwise":""})}},joinLines:function(e,t,n){var r,a;if(n.visualMode){if(r=e.getCursor("anchor"),$e(a=e.getCursor("head"),r)){var l=a;a=r,r=l}a.ch=De(e,a.line)-1}else{var f=Math.max(t.repeat,2);r=e.getCursor(),a=_e(e,T(r.line+f-1,1/0))}for(var d=0,h=r.line;h<a.line;h++){d=De(e,r.line);l=T(r.line+1,De(e,r.line+1));var p=e.getRange(r,l);p=t.keepSpaces?p.replace(/\n\r?/g,""):p.replace(/\n\s*/g," "),e.replaceRange(p,r,l)}var y=T(r.line,d);n.visualMode&&Be(e,!1),e.setCursor(y)},newLineAndEnterInsertMode:function(e,t,n){n.insertMode=!0;var r=Oe(e.getCursor());r.line!==e.firstLine()||t.after?(r.line=t.after?r.line:r.line-1,r.ch=De(e,r.line),e.setCursor(r),(S.commands.newlineAndIndentContinueComment||S.commands.newlineAndIndent)(e)):(e.replaceRange("\n",T(e.firstLine(),0)),e.setCursor(e.firstLine(),0));this.enterInsertMode(e,{repeat:t.repeat},n)},paste:function(e,t,n){var r=Oe(e.getCursor()),a=re.registerController.getRegister(t.registerName);if(x=a.toString()){if(t.matchIndent){var l=e.getOption("tabSize"),f=function(e){var t=e.split("\t").length-1,n=e.split(" ").length-1;return t*l+1*n},d=e.getLine(e.getCursor().line),h=f(d.match(/^\s*/)[0]),p=x.replace(/\n$/,""),y=x!==p,w=f(x.match(/^\s*/)[0]),x=p.replace(/^\s*/gm,(function(t){var n=h+(f(t)-w);if(n<0)return"";if(e.getOption("indentWithTabs")){var r=Math.floor(n/l);return Array(r+1).join("\t")}return Array(n+1).join(" ")}));x+=y?"\n":""}if(t.repeat>1)x=Array(t.repeat+1).join(x);var _,S,k=a.linewise,C=a.blockwise;if(C){x=x.split("\n"),k&&x.pop();for(var E=0;E<x.length;E++)x[E]=""==x[E]?" ":x[E];r.ch+=t.after?1:0,r.ch=Math.min(De(e,r.line),r.ch)}else k?n.visualMode?x=n.visualLine?x.slice(0,-1):"\n"+x.slice(0,x.length-1)+"\n":t.after?(x="\n"+x.slice(0,x.length-1),r.ch=De(e,r.line)):r.ch=0:r.ch+=t.after?1:0;if(n.visualMode){var O;n.lastPastedText=x;var j=function(e,t){var n=t.lastSelection,r=function(){var t=e.listSelections(),n=t[0],r=t[t.length-1];return[$e(n.anchor,n.head)?n.anchor:n.head,$e(r.anchor,r.head)?r.head:r.anchor]},a=function(){var t=e.getCursor(),r=e.getCursor(),a=n.visualBlock;if(a){var l=a.width,f=a.height;r=T(t.line+f,t.ch+l);for(var d=[],h=t.line;h<r.line;h++){var p={anchor:T(h,t.ch),head:T(h,r.ch)};d.push(p)}e.setSelections(d)}else{var y=n.anchorMark.find(),w=n.headMark.find(),x=w.line-y.line,_=w.ch-y.ch;r={line:r.line+x,ch:x?r.ch:_+r.ch},n.visualLine&&(t=T(t.line,0),r=T(r.line,De(e,r.line))),e.setSelection(t,r)}return[t,r]};return t.visualMode?r():a()}(e,n),A=j[0],P=j[1],D=e.getSelection(),R=e.listSelections(),I=new Array(R.length).join("1").split("1");n.lastSelection&&(O=n.lastSelection.headMark.find()),re.registerController.unnamedRegister.setText(D),C?(e.replaceSelections(I),P=T(A.line+x.length-1,A.ch),e.setCursor(A),Me(e,P),e.replaceSelections(x),_=A):n.visualBlock?(e.replaceSelections(I),e.setCursor(A),e.replaceRange(x,A,A),_=A):(e.replaceRange(x,A,P),_=e.posFromIndex(e.indexFromPos(A)+x.length-1)),O&&(n.lastSelection.headMark=e.setBookmark(O)),k&&(_.ch=0)}else if(C){e.setCursor(r);for(E=0;E<x.length;E++){var M=r.line+E;M>e.lastLine()&&e.replaceRange("\n",T(M,0)),De(e,M)<r.ch&&Ie(e,M,r.ch)}e.setCursor(r),Me(e,T(r.line+x.length-1,r.ch)),e.replaceSelections(x),_=r}else e.replaceRange(x,r),k&&t.after?_=T(r.line+1,Ue(e.getLine(r.line+1))):k&&!t.after?_=T(r.line,Ue(e.getLine(r.line))):!k&&t.after?(S=e.indexFromPos(r),_=e.posFromIndex(S+x.length-1)):(S=e.indexFromPos(r),_=e.posFromIndex(S+x.length));n.visualMode&&Be(e,!1),e.setCursor(_)}},undo:function(e,t){e.operation((function(){Ee(e,S.commands.undo,t.repeat)(),e.setCursor(e.getCursor("anchor"))}))},redo:function(e,t){Ee(e,S.commands.redo,t.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){Ye(e,n,t.selectedCharacter,e.getCursor())},replace:function(e,t,n){var r,a,l=t.selectedCharacter,f=e.getCursor(),d=e.listSelections();if(n.visualMode)f=e.getCursor("start"),a=e.getCursor("end");else{var h=e.getLine(f.line);(r=f.ch+t.repeat)>h.length&&(r=h.length),a=T(f.line,r)}if("\n"==l)n.visualMode||e.replaceRange("",f,a),(S.commands.newlineAndIndentContinueComment||S.commands.newlineAndIndent)(e);else{var p=e.getRange(f,a);if(p=p.replace(/[^\n]/g,l),n.visualBlock){var y=new Array(e.getOption("tabSize")+1).join(" ");p=(p=e.getSelection()).replace(/\t/g,y).replace(/[^\n]/g,l).split("\n"),e.replaceSelections(p)}else e.replaceRange(p,f,a);n.visualMode?(f=$e(d[0].anchor,d[0].head)?d[0].anchor:d[0].head,e.setCursor(f),Be(e,!1)):e.setCursor(ke(a,0,-1))}},incrementNumberToken:function(e,t){for(var n,r,a,l,f=e.getCursor(),d=e.getLine(f.line),h=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(n=h.exec(d))&&(a=(r=n.index)+n[0].length,!(f.ch<a)););if((t.backtrack||!(a<=f.ch))&&n){var p=n[2]||n[4],y=n[3]||n[5],w=t.increase?1:-1,x={"0b":2,0:8,"":10,"0x":16}[p.toLowerCase()];l=(parseInt(n[1]+y,x)+w*t.repeat).toString(x);var _=p?new Array(y.length-l.length+1+n[1].length).join("0"):"";l="-"===l.charAt(0)?"-"+p+_+l.substr(1):p+_+l;var S=T(f.line,r),k=T(f.line,a);e.replaceRange(l,S,k),e.setCursor(T(f.line,r+l.length-1))}},repeatLastEdit:function(e,t,n){if(n.lastEditInputState){var r=t.repeat;r&&t.repeatIsExplicit?n.lastEditInputState.repeatOverride=r:r=n.lastEditInputState.repeatOverride||r,Tt(e,n,r,!1)}},indent:function(e,t){e.indentLine(e.getCursor().line,t.indentRight)},exitInsertMode:xt};function _e(e,t,n){var r=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),a=De(e,r)-1;a=n?a+1:a;var l=Math.min(Math.max(0,t.ch),a);return T(r,l)}function Se(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ke(e,t,n){return"object"==typeof t&&(n=t.ch,t=t.line),T(e.line+t,e.ch+n)}function Ce(e,t){if("<character>"==t.slice(-11)){var n=t.length-11,r=e.slice(0,n),a=t.slice(0,n);return r==a&&e.length>n?"full":0==a.indexOf(r)&&"partial"}return e==t?"full":0==t.indexOf(e)&&"partial"}function Ee(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function Oe(e){return T(e.line,e.ch)}function je(e,t){return e.ch==t.ch&&e.line==t.line}function $e(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Te(e,t){return arguments.length>2&&(t=Te.apply(void 0,Array.prototype.slice.call(arguments,1))),$e(e,t)?e:t}function Ae(e,t){return arguments.length>2&&(t=Ae.apply(void 0,Array.prototype.slice.call(arguments,1))),$e(e,t)?t:e}function Pe(e,t,n){var r=$e(e,t),a=$e(t,n);return r&&a}function De(e,t){return e.getLine(t).length}function Re(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Ie(e,t,n){var r=De(e,t),a=new Array(n-r+1).join(" ");e.setCursor(T(t,r)),e.replaceRange(a,e.getCursor())}function Me(e,t){var n=[],r=e.listSelections(),a=Oe(e.clipPos(t)),l=!je(t,a),f=function(e,t,n){for(var r=0;r<e.length;r++){var a="head"!=n&&je(e[r].anchor,t),l="anchor"!=n&&je(e[r].head,t);if(a||l)return r}return-1}(r,e.getCursor("head")),d=je(r[f].head,r[f].anchor),h=r.length-1,p=h-f>f?h:0,y=r[p].anchor,w=Math.min(y.line,a.line),x=Math.max(y.line,a.line),_=y.ch,S=a.ch,k=r[p].head.ch-_,C=S-_;k>0&&C<=0?(_++,l||S--):k<0&&C>=0?(_--,d||S++):k<0&&-1==C&&(_--,S++);for(var E=w;E<=x;E++){var O={anchor:new T(E,_),head:new T(E,S)};n.push(O)}return e.setSelections(n),t.ch=S,y.ch=_,y}function Le(e,t,n){for(var r=[],a=0;a<n;a++){var l=ke(t,a,0);r.push({anchor:l,head:l})}e.setSelections(r,0)}function Ne(e,t){var n=t.sel.anchor,r=t.sel.head;t.lastPastedText&&(r=e.posFromIndex(e.indexFromPos(n)+t.lastPastedText.length),t.lastPastedText=null),t.lastSelection={anchorMark:e.setBookmark(n),headMark:e.setBookmark(r),anchor:Oe(n),head:Oe(r),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:t.visualBlock}}function Fe(e,t,n){var r=e.state.vim,a=qe(e,t=t||r.sel,n=n||r.visualLine?"line":r.visualBlock?"block":"char");e.setSelections(a.ranges,a.primary),Et(e)}function qe(e,t,n,r){var a=Oe(t.head),l=Oe(t.anchor);if("char"==n){var f=r||$e(t.head,t.anchor)?0:1,d=$e(t.head,t.anchor)?1:0;return a=ke(t.head,0,f),{ranges:[{anchor:l=ke(t.anchor,0,d),head:a}],primary:0}}if("line"==n){if($e(t.head,t.anchor))a.ch=0,l.ch=De(e,l.line);else{l.ch=0;var h=e.lastLine();a.line>h&&(a.line=h),a.ch=De(e,a.line)}return{ranges:[{anchor:l,head:a}],primary:0}}if("block"==n){for(var p=Math.min(l.line,a.line),y=Math.min(l.ch,a.ch),w=Math.max(l.line,a.line),x=Math.max(l.ch,a.ch)+1,_=w-p+1,S=a.line==p?0:_-1,k=[],C=0;C<_;C++)k.push({anchor:T(p+C,y),head:T(p+C,x)});return{ranges:k,primary:S}}}function Be(e,t){var n=e.state.vim;!1!==t&&e.setCursor(_e(e,n.sel.head)),Ne(e,n),n.visualMode=!1,n.visualLine=!1,n.visualBlock=!1,S.signal(e,"vim-mode-change",{mode:"normal"}),n.fakeCursor&&n.fakeCursor.clear()}function Ue(e){if(!e)return 0;var t=e.search(/\S/);return-1==t?e.length:t}function He(e,t,n,r,a){for(var l=function(e){var t=e.getCursor("head");return 1==e.getSelection().length&&(t=Te(t,e.getCursor("anchor"))),t}(e),f=e.getLine(l.line),d=l.ch,h=a?F[0]:q[0];!h(f.charAt(d));)if(++d>=f.length)return null;r?h=q[0]:(h=F[0])(f.charAt(d))||(h=F[1]);for(var p=d,y=d;h(f.charAt(p))&&p<f.length;)p++;for(;h(f.charAt(y))&&y>=0;)y--;if(y++,t){for(var w=p;/\s/.test(f.charAt(p))&&p<f.length;)p++;if(w==p){for(var x=y;/\s/.test(f.charAt(y-1))&&y>0;)y--;y||(y=x)}}return{start:T(l.line,y),end:T(l.line,p)}}function ze(e,t,n){je(t,n)||re.jumpList.add(e,t,n)}function Ve(e,t){re.lastCharacterSearch.increment=e,re.lastCharacterSearch.forward=t.forward,re.lastCharacterSearch.selectedCharacter=t.selectedCharacter}var We={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},Ze={bracket:{isComplete:function(e){if(e.nextCh===e.symb){if(e.depth++,e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return 0===e.index&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t="*"===e.lastCh&&"/"===e.nextCh;return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb="m"===e.symb?"{":"}",e.reverseSymb="{"===e.symb?"}":"{"},isComplete:function(e){return e.nextCh===e.symb}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if("#"===e.nextCh){var t=e.lineText.match(/#(\w+)/)[1];if("endif"===t){if(e.forward&&0===e.depth)return!0;e.depth++}else if("if"===t){if(!e.forward&&0===e.depth)return!0;e.depth--}if("else"===t&&0===e.depth)return!0}return!1}}};function Ge(e,t,n,r,a){var l=t.line,f=t.ch,d=e.getLine(l),h=n?1:-1,p=r?q:F;if(a&&""==d){if(l+=h,d=e.getLine(l),!Z(e,l))return null;f=n?0:d.length}for(;;){if(a&&""==d)return{from:0,to:0,line:l};for(var y=h>0?d.length:-1,w=y,x=y;f!=y;){for(var _=!1,S=0;S<p.length&&!_;++S)if(p[S](d.charAt(f))){for(w=f;f!=y&&p[S](d.charAt(f));)f+=h;if(_=w!=(x=f),w==t.ch&&l==t.line&&x==w+h)continue;return{from:Math.min(w,x+1),to:Math.max(w,x),line:l}}_||(f+=h)}if(!Z(e,l+=h))return null;d=e.getLine(l),f=h>0?0:d.length}}function Ke(e,t,n,r){for(var a,l=e.getCursor(),f=l.ch,d=0;d<t;d++){if(-1==(a=Xe(f,e.getLine(l.line),r,n,!0)))return null;f=a}return T(e.getCursor().line,a)}function Ye(e,t,n,r){J(n,V)&&(t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r))}function Xe(e,t,n,r,a){var l;return r?-1==(l=t.indexOf(n,e+1))||a||(l-=1):-1==(l=t.lastIndexOf(n,e-1))||a||(l+=1),l}function Je(e,t,n,r,a){var l,f=t.line,d=e.firstLine(),h=e.lastLine(),p=f;function y(t){return!/\S/.test(e.getLine(t))}function w(e,t,n){return n?y(e)!=y(e+t):!y(e)&&y(e+t)}function x(t){r=r>0?1:-1;var n=e.ace.session.getFoldLine(t);n&&t+r>n.start.row&&t+r<n.end.row&&(r=(r>0?n.end.row:n.start.row)-t)}if(r){for(;d<=p&&p<=h&&n>0;)x(p),w(p,r)&&n--,p+=r;return new T(p,0)}var _=e.state.vim;if(_.visualLine&&w(f,1,!0)){var S=_.sel.anchor;w(S.line,-1,!0)&&(a&&S.line==f||(f+=1))}var k=y(f);for(p=f;p<=h&&n;p++)w(p,1,!0)&&(a&&y(p)==k||n--);for(l=new T(p,0),p>h&&!k?k=!0:a=!1,p=f;p>d&&(a&&y(p)!=k&&p!=f||!w(p,-1,!0));p--);return{start:new T(p,0),end:l}}function Qe(){}function et(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new Qe)}function tt(e,t,n,r,a){e.openDialog?e.openDialog(t,r,{bottom:!0,value:a.value,onKeyDown:a.onKeyDown,onKeyUp:a.onKeyUp,selectValueOnOpen:!1,onClose:function(){e.state.vim&&(e.state.vim.status="",e.ace.renderer.$loop.schedule(e.ace.renderer.CHANGE_CURSOR))}}):r(prompt(n,""))}function nt(e,t){var n=rt(e,t)||[];if(!n.length)return[];var r=[];if(0===n[0]){for(var a=0;a<n.length;a++)"number"==typeof n[a]&&r.push(e.substring(n[a]+1,n[a+1]));return r}}function rt(e,t){t||(t="/");for(var n=!1,r=[],a=0;a<e.length;a++){var l=e.charAt(a);n||l!=t||r.push(a),n=!n&&"\\"==l}return r}ee("pcre",!0,"boolean"),Qe.prototype={getQuery:function(){return re.query},setQuery:function(e){re.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return re.isReversed},setReversed:function(e){re.isReversed=e},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(e){this.annotate=e}};var it={"\\n":"\n","\\r":"\r","\\t":"\t"};var ot={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t"};function at(e,t,n){if(re.registerController.getRegister("/").setText(e),e instanceof RegExp)return e;var r,a,l=rt(e,"/");l.length?(r=e.substring(0,l[0]),a=-1!=e.substring(l[0]).indexOf("i")):r=e;return r?(ne("pcre")||(r=function(e){for(var t=!1,n=[],r=-1;r<e.length;r++){var a=e.charAt(r)||"",l=e.charAt(r+1)||"",f=l&&-1!="|(){".indexOf(l);t?("\\"===a&&f||n.push(a),t=!1):"\\"===a?(t=!0,l&&-1!="}".indexOf(l)&&(f=!0),f&&"\\"!==l||n.push(a)):(n.push(a),f&&"\\"!==l&&n.push("\\"))}return n.join("")}(r)),n&&(t=/^[^A-Z]*$/.test(r)),new RegExp(r,t||a?"i":void 0)):null}function st(e,t){e.openNotification?e.openNotification('<span style="color: red">'+t+"</span>",{bottom:!0,duration:5e3}):alert(t)}var lt="(Javascript regexp)";function ct(e,t){var n,r,a,l=(t.prefix||"")+" "+(t.desc||"");tt(e,(n=t.prefix,r=t.desc,a='<span style="font-family: monospace; white-space: pre">'+(n||"")+'<input type="text" autocorrect="off" autocapitalize="none" autocomplete="off"></span>',r&&(a+=' <span style="color: #888">'+r+"</span>"),a),l,t.onClose,t)}function ut(e,t,n,r){if(t){var a=et(e),l=at(t,!!n,!!r);if(l)return ft(e,l),function(e,t){if(e instanceof RegExp&&t instanceof RegExp){for(var n=["global","multiline","ignoreCase","source"],r=0;r<n.length;r++){var a=n[r];if(e[a]!==t[a])return!1}return!0}return!1}(l,a.getQuery())||a.setQuery(l),l}}function ft(e,t){var n=et(e),r=n.getOverlay();r&&t==r.query||(r&&e.removeOverlay(r),r=function(e){if("^"==e.source.charAt(0))var t=!0;return{token:function(n){if(!t||n.sol()){var r=n.match(e,!1);if(r)return 0==r[0].length?(n.next(),"searching"):n.sol()||(n.backUp(1),e.exec(n.next()+r[0]))?(n.match(e),"searching"):(n.next(),null);for(;!n.eol()&&(n.next(),!n.match(e,!1)););}else n.skipToEnd()},query:e}}(t),e.addOverlay(r),e.showMatchesOnScrollbar&&(n.getScrollbarAnnotate()&&n.getScrollbarAnnotate().clear(),n.setScrollbarAnnotate(e.showMatchesOnScrollbar(t))),n.setOverlay(r))}function dt(e,t,n,r){return void 0===r&&(r=1),e.operation((function(){for(var a=e.getCursor(),l=e.getSearchCursor(n,a),f=0;f<r;f++){var d=l.find(t);if(0==f&&d&&je(l.from(),a)&&(d=l.find(t)),!d&&!(l=e.getSearchCursor(n,t?T(e.lastLine()):T(e.firstLine(),0))).find(t))return}return l.from()}))}function ht(e){var t=et(e);e.removeOverlay(et(e).getOverlay()),t.setOverlay(null),t.getScrollbarAnnotate()&&(t.getScrollbarAnnotate().clear(),t.setScrollbarAnnotate(null))}function pt(e,t,n){return"number"!=typeof e&&(e=e.line),t instanceof Array?J(e,t):n?e>=t&&e<=n:e==t}function mt(e){var t=e.ace.renderer;return{top:t.getFirstFullyVisibleRow(),bottom:t.getLastFullyVisibleRow()}}function gt(e,t,n){if("'"==n||"`"==n)return re.jumpList.find(e,-1)||T(0,0);if("."==n)return vt(e);var r=t.marks[n];return r&&r.find()}function vt(e){var t=e.ace.session.$undoManager;if(t&&t.$lastDelta)return C(t.$lastDelta.end)}var yt=function(){this.buildCommandMap_()};yt.prototype={processCommand:function(e,t,n){var r=this;e.operation((function(){e.curOp.isVimOp=!0,r._processCommand(e,t,n)}))},_processCommand:function(e,t,n){var r=e.state.vim,a=re.registerController.getRegister(":"),l=a.toString();r.visualMode&&Be(e);var f=new S.StringStream(t);a.setText(t);var d,h,p=n||{};p.input=t;try{this.parseInput_(e,f,p)}catch(t){throw st(e,t),t}if(p.commandName){if(d=this.matchCommand_(p.commandName)){if(h=d.name,d.excludeFromCommandHistory&&a.setText(l),this.parseCommandArgs_(f,p,d),"exToKey"==d.type){for(var y=0;y<d.toKeys.length;y++)S.Vim.handleKey(e,d.toKeys[y],"mapping");return}if("exToEx"==d.type)return void this.processCommand(e,d.toInput)}}else void 0!==p.line&&(h="move");if(h)try{bt[h](e,p),d&&d.possiblyAsync||!p.callback||p.callback()}catch(t){throw st(e,t),t}else st(e,'Not an editor command ":'+t+'"')},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),void 0!==n.line&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var r=t.match(/^(\w+)/);return n.commandName=r?r[1]:t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return this.parseLineSpecOffset_(t,e.getCursor().line);case"$":return this.parseLineSpecOffset_(t,e.lastLine());case"'":var r=t.next(),a=gt(e,e.state.vim,r);if(!a)throw new Error("Mark not set");return this.parseLineSpecOffset_(t,a.line);case"-":case"+":return t.backUp(1),this.parseLineSpecOffset_(t,e.getCursor().line);default:return void t.backUp(1)}},parseLineSpecOffset_:function(e,t){var n=e.match(/^([+-])?(\d+)/);if(n){var r=parseInt(n[2],10);"-"==n[1]?t-=r:t+=r}return t},parseCommandArgs_:function(e,t,n){if(!e.eol()){t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\s+/,a=Re(t.argString).split(r);a.length&&a[0]&&(t.args=a)}},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(0===r.name.indexOf(e))return r}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<j.length;e++){var t=j[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(e,t,n){if(":"!=e&&":"==e.charAt(0)){if(n)throw Error("Mode not supported for ex mappings");var r=e.substring(1);":"!=t&&":"==t.charAt(0)?this.commandMap_[r]={name:r,type:"exToEx",toInput:t.substring(1),user:!0}:this.commandMap_[r]={name:r,type:"exToKey",toKeys:t,user:!0}}else if(":"!=t&&":"==t.charAt(0)){var a={keys:e,type:"keyToEx",exArgs:{input:t.substring(1)}};n&&(a.context=n),E.unshift(a)}else{a={keys:e,type:"keyToKey",toKeys:t};n&&(a.context=n),E.unshift(a)}},unmap:function(e,t){if(":"!=e&&":"==e.charAt(0)){if(t)throw Error("Mode not supported for ex mappings");var n=e.substring(1);if(this.commandMap_[n]&&this.commandMap_[n].user)return void delete this.commandMap_[n]}else for(var r=e,a=0;a<E.length;a++)if(r==E[a].keys&&E[a].context===t)return void E.splice(a,1)}};var bt={colorscheme:function(e,t){!t.args||t.args.length<1?st(e,e.getOption("theme")):e.setOption("theme",t.args[0])},map:function(e,t,n){var r=t.args;!r||r.length<2?e&&st(e,"Invalid mapping: "+t.input):wt.map(r[0],r[1],n)},imap:function(e,t){this.map(e,t,"insert")},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},unmap:function(e,t,n){var r=t.args;!r||r.length<1?e&&st(e,"No such mapping: "+t.input):wt.unmap(r[0],n)},move:function(e,t){ve.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var n=t.args,r=t.setCfg||{};if(!n||n.length<1)e&&st(e,"Invalid mapping: "+t.input);else{var a=n[0].split("="),l=a[0],f=a[1],d=!1;if("?"==l.charAt(l.length-1)){if(f)throw Error("Trailing characters: "+t.argString);l=l.substring(0,l.length-1),d=!0}void 0===f&&"no"==l.substring(0,2)&&(l=l.substring(2),f=!1);var h=Q[l]&&"boolean"==Q[l].type;if(h&&null==f&&(f=!0),!h&&void 0===f||d){var p=ne(l,e,r);p instanceof Error?st(e,p.message):st(e,!0===p||!1===p?" "+(p?"":"no")+l:"  "+l+"="+p)}else{var y=te(l,f,e,r);y instanceof Error&&st(e,y.message)}}},setlocal:function(e,t){t.setCfg={scope:"local"},this.set(e,t)},setglobal:function(e,t){t.setCfg={scope:"global"},this.set(e,t)},registers:function(e,t){var n=t.args,r=re.registerController.registers,a="----------Registers----------<br><br>";if(n){n=n.join("");for(var l=0;l<n.length;l++){if(f=n.charAt(l),re.registerController.isValidRegister(f))a+='"'+f+"    "+(r[f]||new pe).toString()+"<br>"}}else for(var f in r){var d=r[f].toString();d.length&&(a+='"'+f+"    "+d+"<br>")}st(e,a)},sort:function(e,t){var n,r,a,l,f;var d=function(){if(t.argString){var e=new S.StringStream(t.argString);if(e.eat("!")&&(n=!0),e.eol())return;if(!e.eatSpace())return"Invalid arguments";var d=e.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!d&&!e.eol())return"Invalid arguments";if(d[1]){r=-1!=d[1].indexOf("i"),a=-1!=d[1].indexOf("u");var h=-1!=d[1].indexOf("d")||-1!=d[1].indexOf("n")&&1,p=-1!=d[1].indexOf("x")&&1,y=-1!=d[1].indexOf("o")&&1;if(h+p+y>1)return"Invalid arguments";l=(h?"decimal":p&&"hex")||y&&"octal"}d[2]&&(f=new RegExp(d[2].substr(1,d[2].length-2),r?"i":""))}}();if(d)st(e,d+": "+t.argString);else{var h=t.line||e.firstLine(),p=t.lineEnd||t.line||e.lastLine();if(h!=p){var y=T(h,0),w=T(p,De(e,p)),x=e.getRange(y,w).split("\n"),_=f||("decimal"==l?/(-?)([\d]+)/:"hex"==l?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==l?/([0-7]+)/:null),k="decimal"==l?10:"hex"==l?16:"octal"==l?8:null,C=[],E=[];if(l||f)for(var O=0;O<x.length;O++){var j=f?x[O].match(f):null;j&&""!=j[0]?C.push(j):!f&&_.exec(x[O])?C.push(x[O]):E.push(x[O])}else E=x;if(C.sort(f?function(e,t){var a;return n&&(a=e,e=t,t=a),r&&(e[0]=e[0].toLowerCase(),t[0]=t[0].toLowerCase()),e[0]<t[0]?-1:1}:D),f)for(O=0;O<C.length;O++)C[O]=C[O].input;else l||E.sort(D);if(x=n?C.concat(E):E.concat(C),a){var A,P=x;x=[];for(O=0;O<P.length;O++)P[O]!=A&&x.push(P[O]),A=P[O]}e.replaceRange(x.join("\n"),y,w)}}function D(e,t){var a;n&&(a=e,e=t,t=a);r&&(e=e.toLowerCase(),t=t.toLowerCase());var f=l&&_.exec(e),d=l&&_.exec(t);return f?(f=parseInt((f[1]+f[2]).toLowerCase(),k))-(d=parseInt((d[1]+d[2]).toLowerCase(),k)):e<t?-1:1}},global:function(e,t){var n=t.argString;if(n){var r,a=void 0!==t.line?t.line:e.firstLine(),l=t.lineEnd||t.line||e.lastLine(),f=function(e){return nt(e,"/")}(n),d=n;if(f.length&&(d=f[0],r=f.slice(1,f.length).join("/")),d)try{ut(e,d,!0,!0)}catch(t){return void st(e,"Invalid regex: "+d)}for(var h=et(e).getQuery(),p=[],y="",w=a;w<=l;w++){h.test(e.getLine(w))&&(p.push(w+1),y+=e.getLine(w)+"<br>")}if(r){var x=0,_=function(){if(x<p.length){var t=p[x]+r;wt.processCommand(e,t,{callback:_})}x++};_()}else st(e,y)}else st(e,"Regular Expression missing from global")},substitute:function(e,t){if(!e.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var n,r,a,l,f=t.argString,d=f?nt(f,f[0]):[],h="",p=!1,y=!1;if(d.length)n=d[0],ne("pcre")&&""!==n&&(n=new RegExp(n).source),h=d[1],n&&"$"===n[n.length-1]&&(n=n.slice(0,n.length-1)+"\\n",h=h?h+"\n":"\n"),void 0!==h&&(h=ne("pcre")?function(e){for(var t=new S.StringStream(e),n=[];!t.eol();){for(;t.peek()&&"\\"!=t.peek();)n.push(t.next());var r=!1;for(var a in ot)if(t.match(a,!0)){r=!0,n.push(ot[a]);break}r||n.push(t.next())}return n.join("")}(h.replace(/([^\\])&/g,"$1$$&")):function(e){for(var t,n=!1,r=[],a=-1;a<e.length;a++){var l=e.charAt(a)||"",f=e.charAt(a+1)||"";it[l+f]?(r.push(it[l+f]),a++):n?(r.push(l),n=!1):"\\"===l?(n=!0,t=f,N.test(t)||"$"===f?r.push("$"):"/"!==f&&"\\"!==f&&r.push("\\")):("$"===l&&r.push("$"),r.push(l),"/"===f&&r.push("\\"))}return r.join("")}(h),re.lastSubstituteReplacePart=h),r=d[2]?d[2].split(" "):[];else if(f&&f.length)return void st(e,"Substitutions should be of the form :s/pattern/replace/");if(r&&(a=r[0],l=parseInt(r[1]),a&&(-1!=a.indexOf("c")&&(p=!0,a.replace("c","")),-1!=a.indexOf("g")&&(y=!0,a.replace("g","")),n=ne("pcre")?n+"/"+a:n.replace(/\//g,"\\/")+"/"+a)),n)try{ut(e,n,!0,!0)}catch(t){return void st(e,"Invalid regex: "+n)}if(void 0!==(h=h||re.lastSubstituteReplacePart)){var w=et(e).getQuery(),x=void 0!==t.line?t.line:e.getCursor().line,_=t.lineEnd||x;x==e.firstLine()&&_==e.lastLine()&&(_=1/0),l&&(_=(x=_)+l-1);var k=_e(e,T(x,0)),C=e.getSearchCursor(w,k);!function(e,t,n,r,a,l,f,d,h){e.state.vim.exMode=!0;var p=!1,y=l.from();function w(){e.operation((function(){for(;!p;)x(),_();k()}))}function x(){var t=e.getRange(l.from(),l.to()).replace(f,d);l.replace(t)}function _(){for(;l.findNext()&&pt(l.from(),r,a);)if(n||!y||l.from().line!=y.line)return e.scrollIntoView(l.from(),30),e.setSelection(l.from(),l.to()),y=l.from(),void(p=!1);p=!0}function k(t){if(t&&t(),e.focus(),y){e.setCursor(y);var n=e.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=y.ch}h&&h()}function C(t,n,r){switch(S.e_stop(t),S.keyName(t)){case"Y":x(),_();break;case"N":_();break;case"A":var a=h;h=void 0,e.operation(w),h=a;break;case"L":x();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":k(r)}return p&&k(r),!0}if(_(),p)return void st(e,"No matches for "+f.source);if(!t)return w(),void(h&&h());ct(e,{prefix:"replace with <strong>"+d+"</strong> (y/n/a/q/l)",onKeyDown:C})}(e,p,y,x,_,C,w,h,t.callback)}else st(e,"No previous substitute regular expression")},redo:S.commands.redo,undo:S.commands.undo,write:function(e){S.commands.save?S.commands.save(e):e.save&&e.save()},nohlsearch:function(e){ht(e)},yank:function(e){var t=Oe(e.getCursor()).line,n=e.getLine(t);re.registerController.pushText("0","yank",n,!0,!0)},delmarks:function(e,t){if(t.argString&&Re(t.argString))for(var n=e.state.vim,r=new S.StringStream(Re(t.argString));!r.eol();){r.eatSpace();var a=r.pos;if(!r.match(/[a-zA-Z]/,!1))return void st(e,"Invalid argument: "+t.argString.substring(a));var l=r.next();if(r.match("-",!0)){if(!r.match(/[a-zA-Z]/,!1))return void st(e,"Invalid argument: "+t.argString.substring(a));var f=l,d=r.next();if(!(G(f)&&G(d)||K(f)&&K(d)))return void st(e,"Invalid argument: "+f+"-");var h=f.charCodeAt(0),p=d.charCodeAt(0);if(h>=p)return void st(e,"Invalid argument: "+t.argString.substring(a));for(var y=0;y<=p-h;y++){var w=String.fromCharCode(h+y);delete n.marks[w]}}else delete n.marks[l]}else st(e,"Argument required")}},wt=new yt;function xt(e){var t=e.state.vim,n=re.macroModeState,r=re.registerController.getRegister("."),a=n.isPlaying,l=n.lastInsertModeChanges;a||(e.off("change",kt),S.off(e.getInputField(),"keydown",$t)),!a&&t.insertModeRepeat>1&&(Tt(e,t,t.insertModeRepeat-1,!0),t.lastEditInputState.repeatOverride=t.insertModeRepeat),delete t.insertModeRepeat,t.insertMode=!1,e.setCursor(e.getCursor().line,e.getCursor().ch-1),e.setOption("keyMap","vim"),e.setOption("disableInput",!0),e.toggleOverwrite(!1),r.setText(l.changes.join("")),S.signal(e,"vim-mode-change",{mode:"normal"}),n.isRecording&&function(e){if(e.isPlaying)return;var t=e.latestRegister,n=re.registerController.getRegister(t);n&&n.pushInsertModeChanges&&n.pushInsertModeChanges(e.lastInsertModeChanges)}(n)}function _t(e){E.unshift(e)}function St(e,t,n,r){var a=re.registerController.getRegister(r);if(":"==r)return a.keyBuffer[0]&&wt.processCommand(e,a.keyBuffer[0]),void(n.isPlaying=!1);var l=a.keyBuffer,f=0;n.isPlaying=!0,n.replaySearchQueries=a.searchQueries.slice(0);for(var d=0;d<l.length;d++)for(var h,p,y=l[d];y;)if(p=(h=/<\w+-.+?>|<\w+>|./.exec(y))[0],y=y.substring(h.index+p.length),S.Vim.handleKey(e,p,"macro"),t.insertMode){var w=a.insertModeChanges[f++].changes;re.macroModeState.lastInsertModeChanges.changes=w,At(e,w,1),xt(e)}n.isPlaying=!1}function kt(e,t){var n=re.macroModeState,r=n.lastInsertModeChanges;if(!n.isPlaying)for(;t;){if(r.expectCursorActivityForChange=!0,r.ignoreCount>1)r.ignoreCount--;else if("+input"==t.origin||"paste"==t.origin||void 0===t.origin){var a=e.listSelections().length;a>1&&(r.ignoreCount=a);var l=t.text.join("\n");r.maybeReset&&(r.changes=[],r.maybeReset=!1),l&&(e.state.overwrite&&!/\n/.test(l)?r.changes.push([l]):r.changes.push(l))}t=t.next}}function Ct(e){var t=e.state.vim;if(t.insertMode){var n=re.macroModeState;if(n.isPlaying)return;var r=n.lastInsertModeChanges;r.expectCursorActivityForChange?r.expectCursorActivityForChange=!1:r.maybeReset=!0}else e.curOp.isVimOp||Ot(e,t);t.visualMode&&Et(e)}function Et(e){var t=e.state.vim,n=_e(e,Oe(t.sel.head)),r=ke(n,0,1);t.fakeCursor&&t.fakeCursor.clear(),t.fakeCursor=e.markText(n,r,{className:"cm-animate-fat-cursor"})}function Ot(e,t,n){var r=e.getCursor("anchor"),a=e.getCursor("head");if(t.visualMode&&!e.somethingSelected()?Be(e,!1):t.visualMode||t.insertMode||!e.somethingSelected()||(t.visualMode=!0,t.visualLine=!1,S.signal(e,"vim-mode-change",{mode:"visual"})),t.visualMode){var l=$e(a,r)?0:-1,f=$e(a,r)?-1:0;a=ke(a,0,l),r=ke(r,0,f),t.sel={anchor:r,head:a},Ye(e,t,"<",Te(a,r)),Ye(e,t,">",Ae(a,r))}else t.insertMode||n||(t.lastHPos=e.getCursor().ch)}function jt(e){this.keyName=e}function $t(e){var t=re.macroModeState.lastInsertModeChanges,n=S.keyName(e);n&&(-1==n.indexOf("Delete")&&-1==n.indexOf("Backspace")||S.lookupKey(n,"vim-insert",(function(){return t.maybeReset&&(t.changes=[],t.maybeReset=!1),t.changes.push(new jt(n)),!0})))}function Tt(e,t,n,r){var a=re.macroModeState;a.isPlaying=!0;var l=!!t.lastEditActionCommand,f=t.inputState;function d(){l?ve.processAction(e,t,t.lastEditActionCommand):ve.evalInput(e,t)}function h(n){if(a.lastInsertModeChanges.changes.length>0){n=t.lastEditActionCommand?n:1;var r=a.lastInsertModeChanges;At(e,r.changes,n)}}if(t.inputState=t.lastEditInputState,l&&t.lastEditActionCommand.interlaceInsertRepeat)for(var p=0;p<n;p++)d(),h(1);else r||d(),h(n);t.inputState=f,t.insertMode&&!r&&xt(e),a.isPlaying=!1}function At(e,t,n){function r(t){return"string"==typeof t?S.commands[t](e):t(e),!0}var a=e.getCursor("head"),l=re.macroModeState.lastInsertModeChanges.visualBlock;l&&(Le(e,a,l+1),n=e.listSelections().length,e.setCursor(a));for(var f=0;f<n;f++){l&&e.setCursor(ke(a,f,0));for(var d=0;d<t.length;d++){var h=t[d];if(h instanceof jt)S.lookupKey(h.keyName,"vim-insert",r);else if("string"==typeof h){var p=e.getCursor();e.replaceRange(h,p,p)}else{var y=e.getCursor(),w=ke(y,0,h[0].length);e.replaceRange(h[0],y,w)}}}l&&e.setCursor(ke(a,0,1))}S.keyMap.vim={attach:D,detach:P,call:R},ee("insertModeEscKeysTimeout",200,"number"),S.keyMap["vim-insert"]={fallthrough:["default"],attach:D,detach:P,call:R},S.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:D,detach:P,call:R},ue(),S.Vim=A(),A=S.Vim;var Pt={return:"CR",backspace:"BS",delete:"Del",esc:"Esc",left:"Left",right:"Right",up:"Up",down:"Down",space:"Space",home:"Home",end:"End",pageup:"PageUp",pagedown:"PageDown",enter:"CR"};var Dt=A.handleKey.bind(A);function Rt(e){var t=new e.constructor;return Object.keys(e).forEach((function(n){var r=e[n];Array.isArray(r)?r=r.slice():r&&"object"==typeof r&&r.constructor!=Object&&(r=Rt(r)),t[n]=r})),e.sel&&(t.sel={head:e.sel.head&&Oe(e.sel.head),anchor:e.sel.anchor&&Oe(e.sel.anchor)}),t}A.handleKey=function(e,t,n){return e.operation((function(){return Dt(e,t,n)}),!0)},t.CodeMirror=S;var It=A.maybeInitVimState_;function Mt(e,t){t.off("beforeEndOperation",Mt);var n=t.state.cm.vimCmd;n&&t.execCommand(n.exec?n:n.name,n.args),t.curOp=t.prevOp}t.handler={$id:"ace/keyboard/vim",drawCursor:function(e,t,n,a,f){var d=this.state.vim||{},h=n.characterWidth,p=n.lineHeight,y=t.top,w=t.left;d.insertMode||!(a.cursor?r.comparePoints(a.cursor,a.start)<=0:f.selection.isBackwards()||f.selection.isEmpty())&&w>h&&(w-=h);!d.insertMode&&d.status&&(y+=p/=2),l.translate(e,w,y),l.setStyle(e.style,"width",h+"px"),l.setStyle(e.style,"height",p+"px")},handleKeyboard:function(e,t,n,r,a){var l=e.editor,f=l.state.cm,d=It(f);if(-1!=r){if(d.insertMode||(-1==t?(n.charCodeAt(0)>255&&e.inputKey&&(n=e.inputKey)&&4==e.inputHash&&(n=n.toUpperCase()),e.inputChar=n):4==t||0==t?e.inputKey==n&&e.inputHash==t&&e.inputChar?(n=e.inputChar,t=-1):(e.inputChar=null,e.inputKey=n,e.inputHash=t):e.inputChar=e.inputKey=null),"c"==n&&1==t&&!y.isMac&&l.getCopyText())return l.once("copy",(function(){l.selection.clearSelection()})),{command:"null",passEvent:!0};if("esc"==n&&!d.insertMode&&!d.visualMode&&!f.ace.inMultiSelectMode){var h=et(f).getOverlay();h&&f.removeOverlay(h)}if(-1==t||1&t||0===t&&n.length>1){var p=d.insertMode,w=function(e,t,n){t.length>1&&"n"==t[0]&&(t=t.replace("numpad","")),t=Pt[t]||t;var r="";return n.ctrlKey&&(r+="C-"),n.altKey&&(r+="A-"),(r||t.length>1)&&n.shiftKey&&(r+="S-"),(r+=t).length>1&&(r="<"+r+">"),r}(0,n,a||{});null==d.status&&(d.status="");var x=function(e,t,n){var r=!1,a=A.maybeInitVimState_(e),l=a.visualBlock||a.wasInVisualBlock,f=e.ace.inMultiSelectMode;if(a.wasInVisualBlock&&!f?a.wasInVisualBlock=!1:f&&a.visualBlock&&(a.wasInVisualBlock=!0),"<Esc>"!=t||a.insertMode||a.visualMode||!f)if(l||!f||e.ace.inVirtualSelectionMode)r=A.handleKey(e,t,n);else{var d=Rt(a);e.operation((function(){e.ace.forEachSelection((function(){var a=e.ace.selection;e.state.vim.lastHPos=null==a.$desiredColumn?a.lead.column:a.$desiredColumn;var l=e.getCursor("head"),f=e.getCursor("anchor"),h=$e(l,f)?0:-1,p=$e(l,f)?-1:0;l=ke(l,0,h),f=ke(f,0,p),e.state.vim.sel.head=l,e.state.vim.sel.anchor=f,r=Dt(e,t,n),a.$desiredColumn=-1==e.state.vim.lastHPos?null:e.state.vim.lastHPos,e.virtualSelectionMode()&&(e.state.vim=Rt(d))})),e.curOp.cursorActivity&&!r&&(e.curOp.cursorActivity=!1)}),!0)}else e.ace.exitMultiSelectMode();return!r||a.visualMode||a.insert||a.visualMode==e.somethingSelected()||Ot(e,a,!0),r}(f,w,"user");if(d=It(f),x&&null!=d.status?d.status+=w:null==d.status&&(d.status=""),f._signal("changeStatus"),!x&&(-1!=t||p))return;return{command:"null",passEvent:!x}}}},attach:function(e){e.state||(e.state={});var t=new S(e);function n(){var n=It(t).insertMode;t.ace.renderer.setStyle("normal-mode",!n),e.textInput.setCommandMode(!n),e.renderer.$keepTextAreaAtCursor=n,e.renderer.$blockCursor=!n}e.state.cm=t,e.$vimModeHandler=this,S.keyMap.vim.attach(t),It(t).status=null,t.on("vim-command-done",(function(){t.virtualSelectionMode()||(It(t).status=null,t.ace._signal("changeStatus"),t.ace.session.markUndoGroup())})),t.on("changeStatus",(function(){t.ace.renderer.updateCursor(),t.ace._signal("changeStatus")})),t.on("vim-mode-change",(function(){t.virtualSelectionMode()||(n(),t._signal("changeStatus"))})),n(),e.renderer.$cursorLayer.drawCursor=this.drawCursor.bind(t)},detach:function(e){var t=e.state.cm;S.keyMap.vim.detach(t),t.destroy(),e.state.cm=null,e.$vimModeHandler=null,e.renderer.$cursorLayer.drawCursor=null,e.renderer.setStyle("normal-mode",!1),e.textInput.setCommandMode(!1),e.renderer.$keepTextAreaAtCursor=!0},getStatusText:function(e){var t=e.state.cm,n=It(t);if(n.insertMode)return"INSERT";var r="";return n.visualMode&&(r+="VISUAL",n.visualLine&&(r+=" LINE"),n.visualBlock&&(r+=" BLOCK")),n.status&&(r+=(r?" ":"")+n.status),r}},A.defineOption({name:"wrap",set:function(e,t){t&&t.ace.setOption("wrap",e)},type:"boolean"},!1),A.defineEx("write","w",(function(){console.log(":write is not implemented")})),E.push({keys:"zc",type:"action",action:"fold",actionArgs:{open:!1}},{keys:"zC",type:"action",action:"fold",actionArgs:{open:!1,all:!0}},{keys:"zo",type:"action",action:"fold",actionArgs:{open:!0}},{keys:"zO",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"za",type:"action",action:"fold",actionArgs:{toggle:!0}},{keys:"zA",type:"action",action:"fold",actionArgs:{toggle:!0,all:!0}},{keys:"zf",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"zd",type:"action",action:"fold",actionArgs:{open:!0,all:!0}},{keys:"<C-A-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAbove"}},{keys:"<C-A-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelow"}},{keys:"<C-A-S-k>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorAboveSkipCurrent"}},{keys:"<C-A-S-j>",type:"action",action:"aceCommand",actionArgs:{name:"addCursorBelowSkipCurrent"}},{keys:"<C-A-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreBefore"}},{keys:"<C-A-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectMoreAfter"}},{keys:"<C-A-S-h>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextBefore"}},{keys:"<C-A-S-l>",type:"action",action:"aceCommand",actionArgs:{name:"selectNextAfter"}}),xe.aceCommand=function(e,t,n){e.vimCmd=t,e.ace.inVirtualSelectionMode?e.ace.on("beforeEndOperation",Mt):Mt(null,e.ace)},xe.fold=function(e,t,n){e.ace.execCommand(["toggleFoldWidget","toggleFoldWidget","foldOther","unfoldall"][(t.all?2:0)+(t.open?1:0)])},t.handler.defaultKeymap=E,t.handler.actions=xe,t.Vim=A})),ace.require(["ace/keyboard/vim"],(function(t){e&&(e.exports=t)}))},89315:function(e,t,n){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(72949)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var a=0,l=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(a++,"%c"===e&&(l=a))})),e.splice(l,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},72949:function(e,t,n){var r;function a(e){function n(){if(n.enabled){var e=n,a=+new Date,l=a-(r||a);e.diff=l,e.prev=r,e.curr=a,r=a;for(var f=new Array(arguments.length),d=0;d<f.length;d++)f[d]=arguments[d];f[0]=t.coerce(f[0]),"string"!=typeof f[0]&&f.unshift("%O");var h=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;h++;var a=t.formatters[r];if("function"==typeof a){var l=f[h];n=a.call(e,l),f.splice(h,1),h--}return n})),t.formatArgs.call(e,f),(n.log||t.log||console.log.bind(console)).apply(e,f)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=a.debug=a.default=a).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,a=0;a<r;a++)n[a]&&("-"===(e=n[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(2973),t.names=[],t.skips=[],t.formatters={}},2973:function(e){var t=1e3,n=60*t,r=60*n,a=24*r,l=365.25*a;function f(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,d){d=d||{};var h,p=typeof e;if("string"===p&&e.length>0)return function(e){if((e=String(e)).length>100)return;var f=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!f)return;var d=parseFloat(f[1]);switch((f[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return d*l;case"days":case"day":case"d":return d*a;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*n;case"seconds":case"second":case"secs":case"sec":case"s":return d*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}(e);if("number"===p&&!1===isNaN(e))return d.long?f(h=e,a,"day")||f(h,r,"hour")||f(h,n,"minute")||f(h,t,"second")||h+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},45014:function(e,t,n){e.exports=p;var r=n(11888),a=n(9224),l=n(82865),f=n(94869),d=n(91285),h=n(446);function p(){f.apply(this,arguments)}function y(){throw new h.AlgoliaSearchError("Not implemented in this environment.\nIf you feel this is a mistake, write to support@algolia.com")}d(p,f),p.prototype.deleteIndex=function(e,t){return this._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(e),hostType:"write",callback:t})},p.prototype.moveIndex=function(e,t,n){var r={operation:"move",destination:t};return this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:r,hostType:"write",callback:n})},p.prototype.copyIndex=function(e,t,n,r){var a={operation:"copy",destination:t},l=r;if("function"==typeof n)l=n;else if(Array.isArray(n)&&n.length>0)a.scope=n;else if(void 0!==n)throw new Error("the scope given to `copyIndex` was not an array with settings, synonyms or rules");return this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:a,hostType:"write",callback:l})},p.prototype.getLogs=function(e,t,r){var a=n(12479),l={};return"object"==typeof e?(l=a(e),r=t):0===arguments.length||"function"==typeof e?r=e:1===arguments.length||"function"==typeof t?(r=t,l.offset=e):(l.offset=e,l.length=t),void 0===l.offset&&(l.offset=0),void 0===l.length&&(l.length=10),this._jsonRequest({method:"GET",url:"/1/logs?"+this._getSearchParams(l,""),hostType:"read",callback:r})},p.prototype.listIndexes=function(e,t){var n="";return void 0===e||"function"==typeof e?t=e:n="?page="+e,this._jsonRequest({method:"GET",url:"/1/indexes"+n,hostType:"read",callback:t})},p.prototype.initIndex=function(e){return new r(this,e)},p.prototype.initAnalytics=function(e){return n(73867)(this.applicationID,this.apiKey,e)},p.prototype.listUserKeys=a((function(e){return this.listApiKeys(e)}),l("client.listUserKeys()","client.listApiKeys()")),p.prototype.listApiKeys=function(e){return this._jsonRequest({method:"GET",url:"/1/keys",hostType:"read",callback:e})},p.prototype.getUserKeyACL=a((function(e,t){return this.getApiKey(e,t)}),l("client.getUserKeyACL()","client.getApiKey()")),p.prototype.getApiKey=function(e,t){return this._jsonRequest({method:"GET",url:"/1/keys/"+e,hostType:"read",callback:t})},p.prototype.deleteUserKey=a((function(e,t){return this.deleteApiKey(e,t)}),l("client.deleteUserKey()","client.deleteApiKey()")),p.prototype.deleteApiKey=function(e,t){return this._jsonRequest({method:"DELETE",url:"/1/keys/"+e,hostType:"write",callback:t})},p.prototype.restoreApiKey=function(e,t){return this._jsonRequest({method:"POST",url:"/1/keys/"+e+"/restore",hostType:"write",callback:t})},p.prototype.addUserKey=a((function(e,t,n){return this.addApiKey(e,t,n)}),l("client.addUserKey()","client.addApiKey()")),p.prototype.addApiKey=function(e,t,r){if(!n(77906)(e))throw new Error("Usage: client.addApiKey(arrayOfAcls[, params, callback])");1!==arguments.length&&"function"!=typeof t||(r=t,t=null);var a={acl:e};return t&&(a.validity=t.validity,a.maxQueriesPerIPPerHour=t.maxQueriesPerIPPerHour,a.maxHitsPerQuery=t.maxHitsPerQuery,a.indexes=t.indexes,a.description=t.description,t.queryParameters&&(a.queryParameters=this._getSearchParams(t.queryParameters,"")),a.referers=t.referers),this._jsonRequest({method:"POST",url:"/1/keys",body:a,hostType:"write",callback:r})},p.prototype.addUserKeyWithValidity=a((function(e,t,n){return this.addApiKey(e,t,n)}),l("client.addUserKeyWithValidity()","client.addApiKey()")),p.prototype.updateUserKey=a((function(e,t,n,r){return this.updateApiKey(e,t,n,r)}),l("client.updateUserKey()","client.updateApiKey()")),p.prototype.updateApiKey=function(e,t,r,a){if(!n(77906)(t))throw new Error("Usage: client.updateApiKey(key, arrayOfAcls[, params, callback])");2!==arguments.length&&"function"!=typeof r||(a=r,r=null);var l={acl:t};return r&&(l.validity=r.validity,l.maxQueriesPerIPPerHour=r.maxQueriesPerIPPerHour,l.maxHitsPerQuery=r.maxHitsPerQuery,l.indexes=r.indexes,l.description=r.description,r.queryParameters&&(l.queryParameters=this._getSearchParams(r.queryParameters,"")),l.referers=r.referers),this._jsonRequest({method:"PUT",url:"/1/keys/"+e,body:l,hostType:"write",callback:a})},p.prototype.startQueriesBatch=a((function(){this._batch=[]}),l("client.startQueriesBatch()","client.search()")),p.prototype.addQueryInBatch=a((function(e,t,n){this._batch.push({indexName:e,query:t,params:n})}),l("client.addQueryInBatch()","client.search()")),p.prototype.sendQueriesBatch=a((function(e){return this.search(this._batch,e)}),l("client.sendQueriesBatch()","client.search()")),p.prototype.batch=function(e,t){if(!n(77906)(e))throw new Error("Usage: client.batch(operations[, callback])");return this._jsonRequest({method:"POST",url:"/1/indexes/*/batch",body:{requests:e},hostType:"write",callback:t})},p.prototype.assignUserID=function(e,t){if(!e.userID||!e.cluster)throw new h.AlgoliaSearchError("You have to provide both a userID and cluster",e);return this._jsonRequest({method:"POST",url:"/1/clusters/mapping",hostType:"write",body:{cluster:e.cluster},callback:t,headers:{"x-algolia-user-id":e.userID}})},p.prototype.assignUserIDs=function(e,t){if(!e.userIDs||!e.cluster)throw new h.AlgoliaSearchError("You have to provide both an array of userIDs and cluster",e);return this._jsonRequest({method:"POST",url:"/1/clusters/mapping/batch",hostType:"write",body:{cluster:e.cluster,users:e.userIDs},callback:t})},p.prototype.getTopUserID=function(e){return this._jsonRequest({method:"GET",url:"/1/clusters/mapping/top",hostType:"read",callback:e})},p.prototype.getUserID=function(e,t){if(!e.userID)throw new h.AlgoliaSearchError("You have to provide a userID",{debugData:e});return this._jsonRequest({method:"GET",url:"/1/clusters/mapping/"+e.userID,hostType:"read",callback:t})},p.prototype.listClusters=function(e){return this._jsonRequest({method:"GET",url:"/1/clusters",hostType:"read",callback:e})},p.prototype.listUserIDs=function(e,t){return this._jsonRequest({method:"GET",url:"/1/clusters/mapping",body:e,hostType:"read",callback:t})},p.prototype.removeUserID=function(e,t){if(!e.userID)throw new h.AlgoliaSearchError("You have to provide a userID",{debugData:e});return this._jsonRequest({method:"DELETE",url:"/1/clusters/mapping",hostType:"write",callback:t,headers:{"x-algolia-user-id":e.userID}})},p.prototype.searchUserIDs=function(e,t){return this._jsonRequest({method:"POST",url:"/1/clusters/mapping/search",body:e,hostType:"read",callback:t})},p.prototype.setPersonalizationStrategy=function(e,t){return this._jsonRequest({method:"POST",url:"/1/recommendation/personalization/strategy",body:e,hostType:"write",callback:t})},p.prototype.getPersonalizationStrategy=function(e){return this._jsonRequest({method:"GET",url:"/1/recommendation/personalization/strategy",hostType:"read",callback:e})},p.prototype.destroy=y,p.prototype.enableRateLimitForward=y,p.prototype.disableRateLimitForward=y,p.prototype.useSecuredAPIKey=y,p.prototype.disableSecuredAPIKey=y,p.prototype.generateSecuredApiKey=y,p.prototype.getSecuredApiKeyRemainingValidity=y},94869:function(e,t,n){e.exports=h;var r=n(446),a=n(16139),l=n(1562),f=n(65413),d=parseInt("120000",10)||12e4;function h(e,t,a){var l=n(89315)("algoliasearch"),f=n(12479),d=n(77906),h=n(19464),y="Usage: algoliasearch(applicationID, apiKey, opts)";if(!0!==a._allowEmptyCredentials&&!e)throw new r.AlgoliaSearchError("Please provide an application ID. "+y);if(!0!==a._allowEmptyCredentials&&!t)throw new r.AlgoliaSearchError("Please provide an API key. "+y);this.applicationID=e,this.apiKey=t,this.hosts={read:[],write:[]},a=a||{},this._timeouts=a.timeouts||{connect:1e3,read:2e3,write:3e4},a.timeout&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=a.timeout);var w=a.protocol||"https:";if(/:$/.test(w)||(w+=":"),"http:"!==w&&"https:"!==w)throw new r.AlgoliaSearchError("protocol must be `http:` or `https:` (was `"+a.protocol+"`)");if(this._checkAppIdData(),a.hosts)d(a.hosts)?(this.hosts.read=f(a.hosts),this.hosts.write=f(a.hosts)):(this.hosts.read=f(a.hosts.read),this.hosts.write=f(a.hosts.write));else{var x=h(this._shuffleResult,(function(t){return e+"-"+t+".algolianet.com"})),_=(!1===a.dsn?"":"-dsn")+".algolia.net";this.hosts.read=[this.applicationID+_].concat(x),this.hosts.write=[this.applicationID+".algolia.net"].concat(x)}this.hosts.read=h(this.hosts.read,p(w)),this.hosts.write=h(this.hosts.write,p(w)),this.extraHeaders={},this.cache=a._cache||{},this._ua=a._ua,this._useCache=!(void 0!==a._useCache&&!a._cache)||a._useCache,this._useRequestCache=this._useCache&&a._useRequestCache,this._useFallback=void 0===a.useFallback||a.useFallback,this._setTimeout=a._setTimeout,l("init done, %j",this)}function p(e){return function(t){return e+"//"+t.toLowerCase()}}function y(e){if(void 0===Array.prototype.toJSON)return JSON.stringify(e);var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e);return Array.prototype.toJSON=t,n}function w(e){var t={};for(var n in e){var r;if(Object.prototype.hasOwnProperty.call(e,n))r="x-algolia-api-key"===n||"x-algolia-application-id"===n?"**hidden for security purposes**":e[n],t[n]=r}return t}h.prototype.initIndex=function(e){return new l(this,e)},h.prototype.setExtraHeader=function(e,t){this.extraHeaders[e.toLowerCase()]=t},h.prototype.getExtraHeader=function(e){return this.extraHeaders[e.toLowerCase()]},h.prototype.unsetExtraHeader=function(e){delete this.extraHeaders[e.toLowerCase()]},h.prototype.addAlgoliaAgent=function(e){var t="; "+e;-1===this._ua.indexOf(t)&&(this._ua+=t)},h.prototype._jsonRequest=function(e){this._checkAppIdData();var t,l,f,d=n(89315)("algoliasearch:"+e.url),h=e.additionalUA||"",p=e.cache,x=this,_=0,S=!1,k=x._useFallback&&x._request.fallback&&e.fallback;this.apiKey.length>500&&void 0!==e.body&&(void 0!==e.body.params||void 0!==e.body.requests)?(e.body.apiKey=this.apiKey,f=this._computeRequestHeaders({additionalUA:h,withApiKey:!1,headers:e.headers})):f=this._computeRequestHeaders({additionalUA:h,headers:e.headers}),void 0!==e.body&&(t=y(e.body)),d("request start");var C=[];function E(e,t,n){return x._useCache&&e&&t&&void 0!==t[n]}function O(t,n){if(E(x._useRequestCache,p,l)&&t.catch((function(){delete p[l]})),"function"!=typeof e.callback)return t.then(n);t.then((function(t){a((function(){e.callback(null,n(t))}),x._setTimeout||setTimeout)}),(function(t){a((function(){e.callback(t)}),x._setTimeout||setTimeout)}))}if(x._useCache&&x._useRequestCache&&(l=e.url),x._useCache&&x._useRequestCache&&t&&(l+="_body_"+t),E(x._useRequestCache,p,l)){d("serving request from cache");var j=p[l];return O("function"!=typeof j.then?x._promise.resolve({responseText:j}):j,(function(e){return JSON.parse(e.responseText)}))}var T=function n(a,O){x._checkAppIdData();var j=new Date;if(x._useCache&&!x._useRequestCache&&(l=e.url),x._useCache&&!x._useRequestCache&&t&&(l+="_body_"+O.body),E(!x._useRequestCache,p,l)){d("serving response from cache");var T=p[l];return x._promise.resolve({body:JSON.parse(T),responseText:T})}if(_>=x.hosts[e.hostType].length)return!k||S?(d("could not get any response"),x._promise.reject(new r.AlgoliaSearchError("Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue. Application id was: "+x.applicationID,{debugData:C}))):(d("switching to fallback"),_=0,O.method=e.fallback.method,O.url=e.fallback.url,O.jsonBody=e.fallback.body,O.jsonBody&&(O.body=y(O.jsonBody)),f=x._computeRequestHeaders({additionalUA:h,headers:e.headers}),O.timeouts=x._getTimeoutsForRequest(e.hostType),x._setHostIndexByType(0,e.hostType),S=!0,n(x._request.fallback,O));var A=x._getHostByType(e.hostType),P=A+O.url,D={body:O.body,jsonBody:O.jsonBody,method:O.method,headers:f,timeouts:O.timeouts,debug:d,forceAuthHeaders:O.forceAuthHeaders};return d("method: %s, url: %s, headers: %j, timeouts: %d",D.method,P,D.headers,D.timeouts),a===x._request.fallback&&d("using fallback"),a.call(x,P,D).then((function(e){var n=e&&e.body&&e.body.message&&e.body.status||e.statusCode||e&&e.body&&200;d("received response: statusCode: %s, computed statusCode: %d, headers: %j",e.statusCode,n,e.headers);var a=2===Math.floor(n/100),h=new Date;if(C.push({currentHost:A,headers:w(f),content:t||null,contentLength:void 0!==t?t.length:null,method:O.method,timeouts:O.timeouts,url:O.url,startTime:j,endTime:h,duration:h-j,statusCode:n}),a)return x._useCache&&!x._useRequestCache&&p&&(p[l]=e.responseText),{responseText:e.responseText,body:e.body};if(4!==Math.floor(n/100))return _+=1,R();d("unrecoverable error");var y=new r.AlgoliaSearchError(e.body&&e.body.message,{debugData:C,statusCode:n});return x._promise.reject(y)}),(function(l){d("error: %s, stack: %s",l.message,l.stack);var h=new Date;C.push({currentHost:A,headers:w(f),content:t||null,contentLength:void 0!==t?t.length:null,method:O.method,timeouts:O.timeouts,url:O.url,startTime:j,endTime:h,duration:h-j}),l instanceof r.AlgoliaSearchError||(l=new r.Unknown(l&&l.message,l));if(_+=1,l instanceof r.Unknown||l instanceof r.UnparsableJSON||_>=x.hosts[e.hostType].length&&(S||!k))return l.debugData=C,x._promise.reject(l);if(l instanceof r.RequestTimeout)return d("retrying request with higher timeout"),x._incrementHostIndex(e.hostType),x._incrementTimeoutMultipler(),O.timeouts=x._getTimeoutsForRequest(e.hostType),n(a,O);return R()}));function R(){return d("retrying request"),x._incrementHostIndex(e.hostType),n(a,O)}}(x._request,{url:e.url,method:e.method,body:t,jsonBody:e.body,timeouts:x._getTimeoutsForRequest(e.hostType),forceAuthHeaders:e.forceAuthHeaders});return x._useCache&&x._useRequestCache&&p&&(p[l]=T),O(T,(function(e){return e.body}))},h.prototype._getSearchParams=function(e,t){if(null==e)return t;for(var n in e)null!==n&&void 0!==e[n]&&e.hasOwnProperty(n)&&(t+=""===t?"":"&",t+=n+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(e[n])?y(e[n]):e[n]));return t},h.prototype._computeRequestHeaders=function(e){var t=n(46388),r={"x-algolia-agent":e.additionalUA?this._ua+"; "+e.additionalUA:this._ua,"x-algolia-application-id":this.applicationID};return!1!==e.withApiKey&&(r["x-algolia-api-key"]=this.apiKey),this.userToken&&(r["x-algolia-usertoken"]=this.userToken),this.securityTags&&(r["x-algolia-tagfilters"]=this.securityTags),t(this.extraHeaders,(function(e,t){r[t]=e})),e.headers&&t(e.headers,(function(e,t){r[t]=e})),r},h.prototype.search=function(e,t,r){var a=n(77906),l=n(19464);if(!a(e))throw new Error("Usage: client.search(arrayOfQueries[, callback])");"function"==typeof t?(r=t,t={}):void 0===t&&(t={});var f=this,d={requests:l(e,(function(e){var t="";return void 0!==e.query&&(t+="query="+encodeURIComponent(e.query)),{indexName:e.indexName,params:f._getSearchParams(e.params,t)}}))},h=l(d.requests,(function(e,t){return t+"="+encodeURIComponent("/1/indexes/"+encodeURIComponent(e.indexName)+"?"+e.params)})).join("&");return void 0!==t.strategy&&(d.strategy=t.strategy),this._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/*/queries",body:d,hostType:"read",fallback:{method:"GET",url:"/1/indexes/*",body:{params:h}},callback:r})},h.prototype.searchForFacetValues=function(e){var t=n(77906),r=n(19464),a="Usage: client.searchForFacetValues([{indexName, params: {facetName, facetQuery, ...params}}, ...queries])";if(!t(e))throw new Error(a);var l=this;return l._promise.all(r(e,(function(e){if(!e||void 0===e.indexName||void 0===e.params.facetName||void 0===e.params.facetQuery)throw new Error(a);var t=n(12479),r=n(93037),f=e.indexName,d=e.params,h=d.facetName,p=r(t(d),(function(e){return"facetName"===e})),y=l._getSearchParams(p,"");return l._jsonRequest({cache:l.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(f)+"/facets/"+encodeURIComponent(h)+"/query",hostType:"read",body:{params:y}})})))},h.prototype.setSecurityTags=function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],n=0;n<e.length;++n)if("[object Array]"===Object.prototype.toString.call(e[n])){for(var r=[],a=0;a<e[n].length;++a)r.push(e[n][a]);t.push("("+r.join(",")+")")}else t.push(e[n]);e=t.join(",")}this.securityTags=e},h.prototype.setUserToken=function(e){this.userToken=e},h.prototype.clearCache=function(){this.cache={}},h.prototype.setRequestTimeout=function(e){e&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=e)},h.prototype.setTimeouts=function(e){this._timeouts=e},h.prototype.getTimeouts=function(){return this._timeouts},h.prototype._getAppIdData=function(){var e=f.get(this.applicationID);return null!==e&&this._cacheAppIdData(e),e},h.prototype._setAppIdData=function(e){return e.lastChange=(new Date).getTime(),this._cacheAppIdData(e),f.set(this.applicationID,e)},h.prototype._checkAppIdData=function(){var e=this._getAppIdData(),t=(new Date).getTime();return null===e||t-e.lastChange>d?this._resetInitialAppIdData(e):e},h.prototype._resetInitialAppIdData=function(e){var t=e||{};return t.hostIndexes={read:0,write:0},t.timeoutMultiplier=1,t.shuffleResult=t.shuffleResult||function(e){var t,n,r=e.length;for(;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e}([1,2,3]),this._setAppIdData(t)},h.prototype._cacheAppIdData=function(e){this._hostIndexes=e.hostIndexes,this._timeoutMultiplier=e.timeoutMultiplier,this._shuffleResult=e.shuffleResult},h.prototype._partialAppIdDataUpdate=function(e){var t=n(46388),r=this._getAppIdData();return t(e,(function(e,t){r[t]=e})),this._setAppIdData(r)},h.prototype._getHostByType=function(e){return this.hosts[e][this._getHostIndexByType(e)]},h.prototype._getTimeoutMultiplier=function(){return this._timeoutMultiplier},h.prototype._getHostIndexByType=function(e){return this._hostIndexes[e]},h.prototype._setHostIndexByType=function(e,t){var r=n(12479)(this._hostIndexes);return r[t]=e,this._partialAppIdDataUpdate({hostIndexes:r}),e},h.prototype._incrementHostIndex=function(e){return this._setHostIndexByType((this._getHostIndexByType(e)+1)%this.hosts[e].length,e)},h.prototype._incrementTimeoutMultipler=function(){var e=Math.max(this._timeoutMultiplier+1,4);return this._partialAppIdDataUpdate({timeoutMultiplier:e})},h.prototype._getTimeoutsForRequest=function(e){return{connect:this._timeouts.connect*this._timeoutMultiplier,complete:this._timeouts[e]*this._timeoutMultiplier}}},11888:function(e,t,n){var r=n(91285),a=n(1562),l=n(9224),f=n(82865),d=n(16139),h=n(446),p=l((function(){}),f("forwardToSlaves","forwardToReplicas"));function y(){a.apply(this,arguments)}function w(e,t,n){return function n(r,a){var l={page:r||0,hitsPerPage:t||100},f=a||[];return e(l).then((function(e){var t=e.hits,r=e.nbHits,a=t.map((function(e){return delete e._highlightResult,e})),d=f.concat(a);return d.length<r?n(l.page+1,d):d}))}().then((function(e){if("function"!=typeof n)return e;n(e)}))}e.exports=y,r(y,a),y.prototype.addObject=function(e,t,n){return 1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0),this.as._jsonRequest({method:void 0!==t?"PUT":"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+(void 0!==t?"/"+encodeURIComponent(t):""),body:e,hostType:"write",callback:n})},y.prototype.addObjects=function(e,t){if(!n(77906)(e))throw new Error("Usage: index.addObjects(arrayOfObjects[, callback])");for(var r={requests:[]},a=0;a<e.length;++a){var l={action:"addObject",body:e[a]};r.requests.push(l)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/batch",body:r,hostType:"write",callback:t})},y.prototype.partialUpdateObject=function(e,t,n){1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0);var r="/1/indexes/"+encodeURIComponent(this.indexName)+"/"+encodeURIComponent(e.objectID)+"/partial";return!1===t&&(r+="?createIfNotExists=false"),this.as._jsonRequest({method:"POST",url:r,body:e,hostType:"write",callback:n})},y.prototype.partialUpdateObjects=function(e,t,r){1!==arguments.length&&"function"!=typeof t||(r=t,t=!0);if(!n(77906)(e))throw new Error("Usage: index.partialUpdateObjects(arrayOfObjects[, callback])");for(var a={requests:[]},l=0;l<e.length;++l){var f={action:!0===t?"partialUpdateObject":"partialUpdateObjectNoCreate",objectID:e[l].objectID,body:e[l]};a.requests.push(f)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/batch",body:a,hostType:"write",callback:r})},y.prototype.saveObject=function(e,t){return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/"+encodeURIComponent(e.objectID),body:e,hostType:"write",callback:t})},y.prototype.saveObjects=function(e,t){if(!n(77906)(e))throw new Error("Usage: index.saveObjects(arrayOfObjects[, callback])");for(var r={requests:[]},a=0;a<e.length;++a){var l={action:"updateObject",objectID:e[a].objectID,body:e[a]};r.requests.push(l)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/batch",body:r,hostType:"write",callback:t})},y.prototype.deleteObject=function(e,t){if("function"==typeof e||"string"!=typeof e&&"number"!=typeof e){var n=new h.AlgoliaSearchError(e&&"function"!=typeof e?"ObjectID must be a string":"Cannot delete an object without an objectID");return"function"==typeof(t=e)?t(n):this.as._promise.reject(n)}return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/"+encodeURIComponent(e),hostType:"write",callback:t})},y.prototype.deleteObjects=function(e,t){var r=n(77906),a=n(19464);if(!r(e))throw new Error("Usage: index.deleteObjects(arrayOfObjectIDs[, callback])");var l={requests:a(e,(function(e){return{action:"deleteObject",objectID:e,body:{objectID:e}}}))};return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/batch",body:l,hostType:"write",callback:t})},y.prototype.deleteByQuery=l((function(e,t,r){var a=n(12479),l=n(19464),f=this,h=f.as;1===arguments.length||"function"==typeof t?(r=t,t={}):t=a(t),t.attributesToRetrieve="objectID",t.hitsPerPage=1e3,t.distinct=!1,this.clearCache();var p=this.search(e,t).then((function(e){if(0===e.nbHits)return e;var t=l(e.hits,(function(e){return e.objectID}));return f.deleteObjects(t).then(y).then(w)}));function y(e){return f.waitTask(e.taskID)}function w(){return f.deleteByQuery(e,t)}if(!r)return p;p.then((function(){d((function(){r(null)}),h._setTimeout||setTimeout)}),(function(e){d((function(){r(e)}),h._setTimeout||setTimeout)}))}),f("index.deleteByQuery()","index.deleteBy()")),y.prototype.deleteBy=function(e,t){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/deleteByQuery",body:{params:this.as._getSearchParams(e,"")},hostType:"write",callback:t})},y.prototype.browseAll=function(e,t){"object"==typeof e&&(t=e,e=void 0);var r=n(37985),a=new(n(46412)),l=this.as,f=this,d=l._getSearchParams(r({},t||{},{query:e}),"");function h(e){var t;a._stopped||(t=void 0!==e?{cursor:e}:{params:d},l._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(f.indexName)+"/browse",hostType:"read",body:t,callback:p}))}function p(e,t){a._stopped||(e?a._error(e):(a._result(t),void 0!==t.cursor?h(t.cursor):a._end()))}return h(),a},y.prototype.ttAdapter=l((function(e){var t=this;return function(n,r,a){var l;l="function"==typeof a?a:r,t.search(n,e,(function(e,t){l(e||t.hits)}))}}),"ttAdapter is not necessary anymore and will be removed in the next version,\nhave a look at autocomplete.js (https://github.com/algolia/autocomplete.js)"),y.prototype.waitTask=function(e,t){var n=0,r=this,a=r.as,l=function t(){return a._jsonRequest({method:"GET",hostType:"read",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/task/"+e}).then((function(e){var r=100*++n*n;return r>5e3&&(r=5e3),"published"!==e.status?a._promise.delay(r).then(t):e}))}();if(!t)return l;l.then((function(e){d((function(){t(null,e)}),a._setTimeout||setTimeout)}),(function(e){d((function(){t(e)}),a._setTimeout||setTimeout)}))},y.prototype.clearIndex=function(e){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/clear",hostType:"write",callback:e})},y.prototype.getSettings=function(e,t){1===arguments.length&&"function"==typeof e&&(t=e,e={}),e=e||{};var n=encodeURIComponent(this.indexName);return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+n+"/settings?getVersion=2"+(e.advanced?"&advanced="+e.advanced:""),hostType:"read",callback:t})},y.prototype.searchSynonyms=function(e,t){return"function"==typeof e?(t=e,e={}):void 0===e&&(e={}),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/search",body:e,hostType:"read",callback:t})},y.prototype.exportSynonyms=function(e,t){return w(this.searchSynonyms.bind(this),e,t)},y.prototype.saveSynonym=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={}),void 0!==t.forwardToSlaves&&p();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/"+encodeURIComponent(e.objectID)+"?forwardToReplicas="+r,body:e,hostType:"write",callback:n})},y.prototype.getSynonym=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/"+encodeURIComponent(e),hostType:"read",callback:t})},y.prototype.deleteSynonym=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={}),void 0!==t.forwardToSlaves&&p();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/"+encodeURIComponent(e)+"?forwardToReplicas="+r,hostType:"write",callback:n})},y.prototype.clearSynonyms=function(e,t){"function"==typeof e?(t=e,e={}):void 0===e&&(e={}),void 0!==e.forwardToSlaves&&p();var n=e.forwardToSlaves||e.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/clear?forwardToReplicas="+n,hostType:"write",callback:t})},y.prototype.batchSynonyms=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={}),void 0!==t.forwardToSlaves&&p();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/batch?forwardToReplicas="+r+"&replaceExistingSynonyms="+(t.replaceExistingSynonyms?"true":"false"),hostType:"write",body:e,callback:n})},y.prototype.searchRules=function(e,t){return"function"==typeof e?(t=e,e={}):void 0===e&&(e={}),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/search",body:e,hostType:"read",callback:t})},y.prototype.exportRules=function(e,t){return w(this.searchRules.bind(this),e,t)},y.prototype.saveRule=function(e,t,n){if("function"==typeof t?(n=t,t={}):void 0===t&&(t={}),!e.objectID)throw new h.AlgoliaSearchError("Missing or empty objectID field for rule");var r=!0===t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/"+encodeURIComponent(e.objectID)+"?forwardToReplicas="+r,body:e,hostType:"write",callback:n})},y.prototype.getRule=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/"+encodeURIComponent(e),hostType:"read",callback:t})},y.prototype.deleteRule=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={});var r=!0===t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/"+encodeURIComponent(e)+"?forwardToReplicas="+r,hostType:"write",callback:n})},y.prototype.clearRules=function(e,t){"function"==typeof e?(t=e,e={}):void 0===e&&(e={});var n=!0===e.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/clear?forwardToReplicas="+n,hostType:"write",callback:t})},y.prototype.batchRules=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={});var r=!0===t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/batch?forwardToReplicas="+r+"&clearExistingRules="+(!0===t.clearExistingRules?"true":"false"),hostType:"write",body:e,callback:n})},y.prototype.exists=function(e){var t=this.getSettings().then((function(){return!0})).catch((function(e){if(e instanceof h.AlgoliaSearchError&&404===e.statusCode)return!1;throw e}));if("function"!=typeof e)return t;t.then((function(t){e(null,t)})).catch((function(t){e(t)}))},y.prototype.findObject=function(e,t,n){var r=void 0===(t=void 0===t?{}:t).paginate||t.paginate,a=void 0!==t.query?t.query:"",l=this,f=0,d=function(){return t.page=f,l.search(a,t).then((function(t){for(var n=t.hits,a=0;a<n.length;a++){var l=n[a];if(e(l))return{object:l,position:a,page:f}}if(f+=1,!r||f>=t.nbPages)throw new h.ObjectNotFound("Object not found");return d()}))},p=d(f);if(void 0===n)return p;p.then((function(e){n(null,e)})).catch((function(e){n(e)}))},y.prototype.getObjectPosition=function(e,t){for(var n=e.hits,r=0;r<n.length;r++)if(n[r].objectID===t)return r;return-1},y.prototype.setSettings=function(e,t,n){1!==arguments.length&&"function"!=typeof t||(n=t,t={}),void 0!==t.forwardToSlaves&&p();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/settings?forwardToReplicas="+r,hostType:"write",body:e,callback:n})},y.prototype.listUserKeys=l((function(e){return this.listApiKeys(e)}),f("index.listUserKeys()","client.listApiKeys()")),y.prototype.listApiKeys=l((function(e){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys",hostType:"read",callback:e})}),f("index.listApiKeys()","client.listApiKeys()")),y.prototype.getUserKeyACL=l((function(e,t){return this.getApiKey(e,t)}),f("index.getUserKeyACL()","client.getApiKey()")),y.prototype.getApiKey=l((function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys/"+e,hostType:"read",callback:t})}),f("index.getApiKey()","client.getApiKey()")),y.prototype.deleteUserKey=l((function(e,t){return this.deleteApiKey(e,t)}),f("index.deleteUserKey()","client.deleteApiKey()")),y.prototype.deleteApiKey=l((function(e,t){return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys/"+e,hostType:"write",callback:t})}),f("index.deleteApiKey()","client.deleteApiKey()")),y.prototype.addUserKey=l((function(e,t,n){return this.addApiKey(e,t,n)}),f("index.addUserKey()","client.addApiKey()")),y.prototype.addApiKey=l((function(e,t,r){if(!n(77906)(e))throw new Error("Usage: index.addApiKey(arrayOfAcls[, params, callback])");1!==arguments.length&&"function"!=typeof t||(r=t,t=null);var a={acl:e};return t&&(a.validity=t.validity,a.maxQueriesPerIPPerHour=t.maxQueriesPerIPPerHour,a.maxHitsPerQuery=t.maxHitsPerQuery,a.description=t.description,t.queryParameters&&(a.queryParameters=this.as._getSearchParams(t.queryParameters,"")),a.referers=t.referers),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys",body:a,hostType:"write",callback:r})}),f("index.addApiKey()","client.addApiKey()")),y.prototype.addUserKeyWithValidity=l((function(e,t,n){return this.addApiKey(e,t,n)}),f("index.addUserKeyWithValidity()","client.addApiKey()")),y.prototype.updateUserKey=l((function(e,t,n,r){return this.updateApiKey(e,t,n,r)}),f("index.updateUserKey()","client.updateApiKey()")),y.prototype.updateApiKey=l((function(e,t,r,a){if(!n(77906)(t))throw new Error("Usage: index.updateApiKey(key, arrayOfAcls[, params, callback])");2!==arguments.length&&"function"!=typeof r||(a=r,r=null);var l={acl:t};return r&&(l.validity=r.validity,l.maxQueriesPerIPPerHour=r.maxQueriesPerIPPerHour,l.maxHitsPerQuery=r.maxHitsPerQuery,l.description=r.description,r.queryParameters&&(l.queryParameters=this.as._getSearchParams(r.queryParameters,"")),l.referers=r.referers),this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys/"+e,body:l,hostType:"write",callback:a})}),f("index.updateApiKey()","client.updateApiKey()"))},46412:function(e,t,n){"use strict";function r(){}e.exports=r,n(91285)(r,n(22699).EventEmitter),r.prototype.stop=function(){this._stopped=!0,this._clean()},r.prototype._end=function(){this.emit("end"),this._clean()},r.prototype._error=function(e){this.emit("error",e),this._clean()},r.prototype._result=function(e){this.emit("result",e)},r.prototype._clean=function(){this.removeAllListeners("stop"),this.removeAllListeners("end"),this.removeAllListeners("error"),this.removeAllListeners("result")}},1562:function(e,t,n){var r=n(36152),a=n(9224),l=n(82865);function f(e,t){this.indexName=t,this.as=e,this.typeAheadArgs=null,this.typeAheadValueOption=null,this.cache={}}e.exports=f,f.prototype.clearCache=function(){this.cache={}},f.prototype.search=r("query"),f.prototype.similarSearch=a(r("similarQuery"),l("index.similarSearch(query[, callback])","index.search({ similarQuery: query }[, callback])")),f.prototype.browse=function(e,t,r){var a,l,f=n(37985);0===arguments.length||1===arguments.length&&"function"==typeof arguments[0]?(a=0,r=arguments[0],e=void 0):"number"==typeof arguments[0]?(a=arguments[0],"number"==typeof arguments[1]?l=arguments[1]:"function"==typeof arguments[1]&&(r=arguments[1],l=void 0),e=void 0,t=void 0):"object"==typeof arguments[0]?("function"==typeof arguments[1]&&(r=arguments[1]),t=arguments[0],e=void 0):"string"==typeof arguments[0]&&"function"==typeof arguments[1]&&(r=arguments[1],t=void 0),t=f({},t||{},{page:a,hitsPerPage:l,query:e});var d=this.as._getSearchParams(t,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{params:d},hostType:"read",callback:r})},f.prototype.browseFrom=function(e,t){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{cursor:e},hostType:"read",callback:t})},f.prototype.searchForFacetValues=function(e,t){var r=n(12479),a=n(93037);if(void 0===e.facetName||void 0===e.facetQuery)throw new Error("Usage: index.searchForFacetValues({facetName, facetQuery, ...params}[, callback])");var l=e.facetName,f=a(r(e),(function(e){return"facetName"===e})),d=this.as._getSearchParams(f,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/facets/"+encodeURIComponent(l)+"/query",hostType:"read",body:{params:d},callback:t})},f.prototype.searchFacet=a((function(e,t){return this.searchForFacetValues(e,t)}),l("index.searchFacet(params[, callback])","index.searchForFacetValues(params[, callback])")),f.prototype._search=function(e,t,n,r){return this.as._jsonRequest({cache:this.cache,method:"POST",url:t||"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:e},hostType:"read",fallback:{method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName),body:{params:e}},callback:n,additionalUA:r})},f.prototype.getObject=function(e,t,n){1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0);var r="";if(void 0!==t){r="?attributes=";for(var a=0;a<t.length;++a)0!==a&&(r+=","),r+=t[a]}return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/"+encodeURIComponent(e)+r,hostType:"read",callback:n})},f.prototype.getObjects=function(e,t,r){var a=n(77906),l=n(19464);if(!a(e))throw new Error("Usage: index.getObjects(arrayOfObjectIDs[, callback])");var f=this;1!==arguments.length&&"function"!=typeof t||(r=t,t=void 0);var d={requests:l(e,(function(e){var n={indexName:f.indexName,objectID:e};return t&&(n.attributesToRetrieve=t.join(",")),n}))};return this.as._jsonRequest({method:"POST",url:"/1/indexes/*/objects",hostType:"read",body:d,callback:r})},f.prototype.as=null,f.prototype.indexName=null,f.prototype.typeAheadArgs=null,f.prototype.typeAheadValueOption=null},76213:function(e,t,n){"use strict";var r=n(45014),a=n(11717);e.exports=a(r,"Browser")},11717:function(e,t,n){"use strict";var r=n(35048),a=r.Promise||n(86139).Promise;e.exports=function(e,t){var l=n(91285),f=n(446),d=n(25902),h=n(42776),p=n(83242);function y(e,t,r){return(r=n(12479)(r||{}))._ua=r._ua||y.ua,new x(e,t,r)}t=t||"",y.version=n(44857),y.ua="Algolia for JavaScript ("+y.version+"); "+t,y.initPlaces=p(y),r.__algolia={debug:n(89315),algoliasearch:y};var w={hasXMLHttpRequest:"XMLHttpRequest"in r,hasXDomainRequest:"XDomainRequest"in r};function x(){e.apply(this,arguments)}return w.hasXMLHttpRequest&&(w.cors="withCredentials"in new XMLHttpRequest),l(x,e),x.prototype._request=function(e,t){return new a((function(n,r){if(w.cors||w.hasXDomainRequest){e=d(e,t.headers);var a,l,h=t.body,p=w.cors?new XMLHttpRequest:new XDomainRequest,y=!1;a=setTimeout(x,t.timeouts.connect),p.onprogress=function(){y||_()},"onreadystatechange"in p&&(p.onreadystatechange=function(){!y&&p.readyState>1&&_()}),p.onload=function(){if(l)return;var e;clearTimeout(a);try{e={body:JSON.parse(p.responseText),responseText:p.responseText,statusCode:p.status,headers:p.getAllResponseHeaders&&p.getAllResponseHeaders()||{}}}catch(t){e=new f.UnparsableJSON({more:p.responseText})}e instanceof f.UnparsableJSON?r(e):n(e)},p.onerror=function onError(e){if(l)return;clearTimeout(a),r(new f.Network({more:e}))},p instanceof XMLHttpRequest?(p.open(t.method,e,!0),t.forceAuthHeaders&&(p.setRequestHeader("x-algolia-application-id",t.headers["x-algolia-application-id"]),p.setRequestHeader("x-algolia-api-key",t.headers["x-algolia-api-key"]))):p.open(t.method,e),w.cors&&(h&&("POST"===t.method?p.setRequestHeader("content-type","application/x-www-form-urlencoded"):p.setRequestHeader("content-type","application/json")),p.setRequestHeader("accept","application/json")),h?p.send(h):p.send()}else r(new f.Network("CORS not supported"));function x(){l=!0,p.abort(),r(new f.RequestTimeout)}function _(){y=!0,clearTimeout(a),a=setTimeout(x,t.timeouts.complete)}}))},x.prototype._request.fallback=function(e,t){return e=d(e,t.headers),new a((function(n,r){h(e,t,(function(e,t){e?r(e):n(t)}))}))},x.prototype._promise={reject:function(e){return a.reject(e)},resolve:function(e){return a.resolve(e)},delay:function(e){return new a((function(t){setTimeout(t,e)}))},all:function(e){return a.all(e)}},y}},25902:function(e,t,n){"use strict";e.exports=function(e,t){/\?/.test(e)?e+="&":e+="?";return e+r(t)};var r=n(75396)},42776:function(e,t,n){"use strict";e.exports=function(e,t,n){if("GET"!==t.method)return void n(new Error("Method "+t.method+" "+e+" is not supported by JSONP."));t.debug("JSONP: start");var l=!1,f=!1;a+=1;var d=document.getElementsByTagName("head")[0],h=document.createElement("script"),p="algoliaJSONP_"+a,y=!1;window[p]=function(e){!function(){try{delete window[p],delete window[p+"_loaded"]}catch(e){window[p]=window[p+"_loaded"]=void 0}}(),f?t.debug("JSONP: Late answer, ignoring"):(l=!0,_(),n(null,{body:e,responseText:JSON.stringify(e)}))},e+="&callback="+p,t.jsonBody&&t.jsonBody.params&&(e+="&"+t.jsonBody.params);var w=setTimeout((function(){t.debug("JSONP: Script timeout"),f=!0,_(),n(new r.RequestTimeout)}),t.timeouts.complete);function x(){t.debug("JSONP: success"),y||f||(y=!0,l||(t.debug("JSONP: Fail. Script loaded but did not call the callback"),_(),n(new r.JSONPScriptFail)))}function _(){clearTimeout(w),h.onload=null,h.onreadystatechange=null,h.onerror=null,d.removeChild(h)}h.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||x()},h.onload=x,h.onerror=function(){t.debug("JSONP: Script error"),y||f||(_(),n(new r.JSONPScriptError))},h.async=!0,h.defer=!0,h.src=e,d.appendChild(h)};var r=n(446),a=0},36152:function(e,t,n){e.exports=function(e,t){return function(n,a,l){if("function"==typeof n&&"object"==typeof a||"object"==typeof l)throw new r.AlgoliaSearchError("index.search usage is index.search(query, params, cb)");0===arguments.length||"function"==typeof n?(l=n,n=""):1!==arguments.length&&"function"!=typeof a||(l=a,a=void 0),"object"==typeof n&&null!==n?(a=n,n=void 0):null==n&&(n="");var f,d="";return void 0!==n&&(d+=e+"="+encodeURIComponent(n)),void 0!==a&&(a.additionalUA&&(f=a.additionalUA,delete a.additionalUA),d=this.as._getSearchParams(a,d)),this._search(d,t,l,f)}};var r=n(446)},12479:function(e){e.exports=function(e){return JSON.parse(JSON.stringify(e))}},73867:function(e,t,n){e.exports=function(e,t,n){var a={};return(n=n||{}).hosts=n.hosts||["analytics.algolia.com","analytics.algolia.com","analytics.algolia.com","analytics.algolia.com"],n.protocol=n.protocol||"https:",a.as=r(e,t,n),a.getABTests=function(e,t){var n=n||{},r=n.offset||0,a=n.limit||10;return this.as._jsonRequest({method:"GET",url:"/2/abtests?offset="+encodeURIComponent(r)+"&limit="+encodeURIComponent(a),hostType:"read",forceAuthHeaders:!0,callback:t})},a.getABTest=function(e,t){return this.as._jsonRequest({method:"GET",url:"/2/abtests/"+encodeURIComponent(e),hostType:"read",forceAuthHeaders:!0,callback:t})},a.addABTest=function(e,t){return this.as._jsonRequest({method:"POST",url:"/2/abtests",body:e,hostType:"read",forceAuthHeaders:!0,callback:t})},a.stopABTest=function(e,t){return this.as._jsonRequest({method:"POST",url:"/2/abtests/"+encodeURIComponent(e)+"/stop",hostType:"read",forceAuthHeaders:!0,callback:t})},a.deleteABTest=function(e,t){return this.as._jsonRequest({method:"DELETE",url:"/2/abtests/"+encodeURIComponent(e),hostType:"write",forceAuthHeaders:!0,callback:t})},a.waitTask=function(e,t,n){return this.as.initIndex(e).waitTask(t,n)},a};var r=n(76213)},9224:function(e){e.exports=function(e,t){var n=!1;return function(){return n||(console.warn(t),n=!0),e.apply(this,arguments)}}},82865:function(e){e.exports=function(e,t){var n=e.toLowerCase().replace(/[\.\(\)]/g,"");return"algoliasearch: `"+e+"` was replaced by `"+t+"`. Please see https://github.com/algolia/algoliasearch-client-javascript/wiki/Deprecated#"+n}},446:function(e,t,n){"use strict";var r=n(91285);function AlgoliaSearchError(e,t){var r=n(46388),a=this;"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):a.stack=(new Error).stack||"Cannot get a stacktrace, browser is too old",this.name="AlgoliaSearchError",this.message=e||"Unknown error",t&&r(t,(function(e,t){a[t]=e}))}function createCustomError(e,t){function AlgoliaSearchCustomError(){var n=Array.prototype.slice.call(arguments,0);"string"!=typeof n[0]&&n.unshift(t),AlgoliaSearchError.apply(this,n),this.name="AlgoliaSearch"+e+"Error"}return r(AlgoliaSearchCustomError,AlgoliaSearchError),AlgoliaSearchCustomError}r(AlgoliaSearchError,Error),e.exports={AlgoliaSearchError:AlgoliaSearchError,UnparsableJSON:createCustomError("UnparsableJSON","Could not parse the incoming response as JSON, see err.more for details"),RequestTimeout:createCustomError("RequestTimeout","Request timed out before getting a response"),Network:createCustomError("Network","Network issue, see err.more for details"),JSONPScriptFail:createCustomError("JSONPScriptFail","<script> was loaded but did not call our provided callback"),ValidUntilNotFound:createCustomError("ValidUntilNotFound","The SecuredAPIKey does not have a validUntil parameter."),JSONPScriptError:createCustomError("JSONPScriptError","<script> unable to load due to an `error` event on it"),ObjectNotFound:createCustomError("ObjectNotFound","Object not found"),Unknown:createCustomError("Unknown","Unknown error occured")}},16139:function(e){e.exports=function(e,t){t(e,0)}},19464:function(e,t,n){var r=n(46388);e.exports=function(e,t){var n=[];return r(e,(function(r,a){n.push(t(r,a,e))})),n}},37985:function(e,t,n){var r=n(46388);e.exports=function e(t){var n=Array.prototype.slice.call(arguments);return r(n,(function(n){for(var r in n)n.hasOwnProperty(r)&&("object"==typeof t[r]&&"object"==typeof n[r]?t[r]=e({},t[r],n[r]):void 0!==n[r]&&(t[r]=n[r]))})),t}},93037:function(e,t,n){e.exports=function(e,t){var r=n(33464),a=n(46388),l={};return a(r(e),(function(n){!0!==t(n)&&(l[n]=e[n])})),l}},83242:function(e,t,n){e.exports=function(e){return function(t,l,f){var d=n(12479);(f=f&&d(f)||{}).hosts=f.hosts||["places-dsn.algolia.net","places-1.algolianet.com","places-2.algolianet.com","places-3.algolianet.com"],0!==arguments.length&&"object"!=typeof t&&void 0!==t||(t="",l="",f._allowEmptyCredentials=!0);var h=e(t,l,f).initIndex("places");return h.search=a("query","/1/places/query"),h.reverse=function(e,t){var n=r.encode(e);return this.as._jsonRequest({method:"GET",url:"/1/places/reverse?"+n,hostType:"read",callback:t})},h.getObject=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/places/"+encodeURIComponent(e),hostType:"read",callback:t})},h}};var r=n(74621),a=n(36152)},65413:function(e,t,n){var r,a=n(89315)("algoliasearch:src/hostIndexState.js"),l="algoliasearch-client-js",f={state:{},set:function(e,t){return this.state[e]=t,this.state[e]},get:function(e){return this.state[e]||null}},d={set:function(e,t){f.set(e,t);try{var r=JSON.parse(n.g.localStorage[l]);return r[e]=t,n.g.localStorage[l]=JSON.stringify(r),r[e]}catch(t){return h(e,t)}},get:function(e){try{return JSON.parse(n.g.localStorage[l])[e]||null}catch(t){return h(e,t)}}};function h(e,t){return a("localStorage failed with",t),function(){try{n.g.localStorage.removeItem(l)}catch(e){}}(),(r=f).get(e)}function p(e,t){return 1===arguments.length?r.get(e):r.set(e,t)}function y(){try{return"localStorage"in n.g&&null!==n.g.localStorage&&(n.g.localStorage[l]||n.g.localStorage.setItem(l,JSON.stringify({})),!0)}catch(e){return!1}}r=y()?d:f,e.exports={get:p,set:p,supportsLocalStorage:y}},44857:function(e){"use strict";e.exports="3.35.1"},58952:function(){!function(e,t){"use strict";var n,r,a,l,f,d,h,p,y,w,x=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",(function(){var _=!1,S=!1;this.$get=["$$sanitizeUri",function(e){return _=!0,S&&r(I,D),function(t){var n=[];return y(t,w(n,(function(t,n){return!/^unsafe:/.test(e(t,n))}))),n.join("")}}],this.enableSvg=function(e){return f(e)?(S=e,this):S},this.addValidElements=function(e){return _||(l(e)&&(e={htmlElements:e}),U(D,e.svgElements),U(E,e.htmlVoidElements),U(I,e.htmlVoidElements),U(I,e.htmlElements)),this},this.addValidAttrs=function(e){return _||r(F,B(e,!0)),this},n=t.bind,r=t.extend,a=t.forEach,l=t.isArray,f=t.isDefined,d=t.$$lowercase,h=t.noop,y=function(e,t){null==e?e="":"string"!=typeof e&&(e=""+e);var n=H(e);if(!n)return"";var r=5;do{if(0===r)throw x("uinput","Failed to sanitize html because the input is unstable");r--,e=n.innerHTML,n=H(e)}while(e!==n.innerHTML);var a=n.firstChild;for(;a;){switch(a.nodeType){case 1:t.start(a.nodeName.toLowerCase(),z(a.attributes));break;case 3:t.chars(a.textContent)}var l;if(!((l=a.firstChild)||(1===a.nodeType&&t.end(a.nodeName.toLowerCase()),l=Z("nextSibling",a))))for(;null==l&&(a=Z("parentNode",a))!==n;)l=Z("nextSibling",a),1===a.nodeType&&t.end(a.nodeName.toLowerCase());a=l}for(;a=n.firstChild;)n.removeChild(a)},w=function(e,t){var r=!1,l=n(e,e.push);return{start:function(e,n){e=d(e),!r&&R[e]&&(r=e),r||!0!==I[e]||(l("<"),l(e),a(n,(function(n,r){var a=d(r),f="img"===e&&"src"===a||"background"===a;!0!==F[a]||!0===M[a]&&!t(n,f)||(l(" "),l(r),l('="'),l(V(n)),l('"'))})),l(">"))},end:function(e){e=d(e),r||!0!==I[e]||!0===E[e]||(l("</"),l(e),l(">")),e==r&&(r=!1)},chars:function(e){r||l(V(e))}}},p=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var k=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C=/([^#-~ |!])/g,E=q("area,br,col,hr,img,wbr"),O=q("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),j=q("rp,rt"),T=r({},j,O),A=r({},O,q("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),P=r({},j,q("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),D=q("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),R=q("script,style"),I=r({},E,A,P,T),M=q("background,cite,href,longdesc,src,xlink:href,xml:base"),L=q("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),N=q("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),F=r({},M,N,L);function q(e,t){return B(e.split(","),t)}function B(e,t){var n,r={};for(n=0;n<e.length;n++)r[t?d(e[n]):e[n]]=!0;return r}function U(e,t){t&&t.length&&r(e,B(t))}var H=function(e,t){if(function(){try{return!!a("")}catch(e){return!1}}())return a;if(!t||!t.implementation)throw x("noinert","Can't create an inert html document");var n=t.implementation.createHTMLDocument("inert"),r=(n.documentElement||n.getDocumentElement()).querySelector("body");return function(e){r.innerHTML=e,t.documentMode&&W(r);return r};function a(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;return n.firstChild.remove(),n}catch(e){return}}}(e,e.document);function z(e){for(var t={},n=0,r=e.length;n<r;n++){var a=e[n];t[a.name]=a.value}return t}function V(e){return e.replace(/&/g,"&amp;").replace(k,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(C,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function W(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,a=n.length;r<a;r++){var l=n[r],f=l.name.toLowerCase();"xmlns:ns1"!==f&&0!==f.lastIndexOf("ns1:",0)||(t.removeAttributeNode(l),r--,a--)}var d=t.firstChild;d&&W(d),t=Z("nextSibling",t)}}function Z(e,t){var n=t[e];if(n&&p.call(t,n))throw x("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}})).info({angularVersion:"1.8.2"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,a=t.$$minErr("linky"),l=t.isDefined,f=t.isFunction,d=t.isObject,p=t.isString;return function(t,y,x){if(null==t||""===t)return t;if(!p(t))throw a("notstring","Expected string but received: {0}",t);for(var _,S,k,C=f(x)?x:d(x)?function(){return x}:function(){return{}},E=t,O=[];_=E.match(n);)S=_[0],_[2]||_[4]||(S=(_[3]?"http://":"mailto:")+S),k=_.index,j(E.substr(0,k)),T(S,_[0].replace(r,"")),E=E.substring(k+_[0].length);return j(E),e(O.join(""));function j(e){var t,n;e&&O.push((t=e,w(n=[],h).chars(t),n.join("")))}function T(e,t){var n,r=C(e);for(n in O.push("<a "),r)O.push(n+'="'+r[n]+'" ');l(y)&&!("target"in r)&&O.push('target="',y,'" '),O.push('href="',e.replace(/"/g,"&quot;"),'">'),j(t),O.push("</a>")}}}])}(window,window.angular)},9326:function(e,t,n){n(58952),e.exports="ngSanitize"},37808:function(){!function(e){"use strict";var t={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(e){if(!Y(e))return t;K(e.objectMaxDepth)&&(t.objectMaxDepth=r(e.objectMaxDepth)?e.objectMaxDepth:NaN),K(e.urlErrorParamsEnabled)&&se(e.urlErrorParamsEnabled)&&(t.urlErrorParamsEnabled=e.urlErrorParamsEnabled)}function r(e){return Q(e)&&e>0}function a(e,n){n=n||Error;var r="https://errors.angularjs.org/1.8.3/",a=r.replace(".","\\.")+"[\\s\\S]*",l=new RegExp(a,"g");return function(){var a,f,d=arguments[0],h=arguments[1],p="["+(e?e+":":"")+d+"] ",y=_e(arguments,2).map((function(e){return it(e,t.objectMaxDepth)}));if(p+=h.replace(/\{\d+\}/g,(function(e){var t=+e.slice(1,-1);return t<y.length?y[t].replace(l,""):e})),p+="\n"+r+(e?e+"/":"")+d,t.urlErrorParamsEnabled)for(f=0,a="?";f<y.length;f++,a="&")p+=a+"p"+f+"="+encodeURIComponent(y[f]);return new n(p)}}var l,f,d,h,p=/^\/(.+)\/([a-z]*)$/,y="validity",w=Object.prototype.hasOwnProperty,x=function(e){return J(e)?e.toLowerCase():e},_=function(e){return J(e)?e.toUpperCase():e},S=[].slice,k=[].splice,C=[].push,E=Object.prototype.toString,O=Object.getPrototypeOf,j=a("ng"),T=e.angular||(e.angular={}),A=0;function P(e){if(null==e||oe(e))return!1;if(te(e)||J(e)||f&&e instanceof f)return!0;var t="length"in Object(e)&&e.length;return Q(t)&&(t>=0&&t-1 in e||"function"==typeof e.item)}function D(e,t,n){var r,a;if(e)if(ne(e))for(r in e)"prototype"!==r&&"length"!==r&&"name"!==r&&e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else if(te(e)||P(e)){var l="object"!=typeof e;for(r=0,a=e.length;r<a;r++)(l||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==D)e.forEach(t,n,e);else if(X(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)w.call(e,r)&&t.call(n,e[r],r,e);return e}function R(e,t,n){for(var r=Object.keys(e).sort(),a=0;a<r.length;a++)t.call(n,e[r[a]],r[a]);return r}function I(e){return function(t,n){e(n,t)}}function M(){return++A}function L(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function N(e,t,n){for(var r=e.$$hashKey,a=0,l=t.length;a<l;++a){var f=t[a];if(Y(f)||ne(f))for(var d=Object.keys(f),h=0,p=d.length;h<p;h++){var y=d[h],w=f[y];n&&Y(w)?ee(w)?e[y]=new Date(w.valueOf()):re(w)?e[y]=new RegExp(w):w.nodeName?e[y]=w.cloneNode(!0):de(w)?e[y]=w.clone():"__proto__"!==y&&(Y(e[y])||(e[y]=te(w)?[]:{}),N(e[y],[w],!0)):e[y]=w}}return L(e,r),e}function F(e){return N(e,S.call(arguments,1),!1)}function q(e){return N(e,S.call(arguments,1),!0)}function B(e){return parseInt(e,10)}l=e.document.documentMode;var U=Number.isNaN||function(e){return e!=e};function H(e,t){return F(Object.create(e),t)}function z(){}function V(e){return e}function W(e){return function(){return e}}function Z(e){return ne(e.toString)&&e.toString!==E}function G(e){return void 0===e}function K(e){return void 0!==e}function Y(e){return null!==e&&"object"==typeof e}function X(e){return null!==e&&"object"==typeof e&&!O(e)}function J(e){return"string"==typeof e}function Q(e){return"number"==typeof e}function ee(e){return"[object Date]"===E.call(e)}function te(e){return Array.isArray(e)||e instanceof Array}function isError(e){switch(E.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function ne(e){return"function"==typeof e}function re(e){return"[object RegExp]"===E.call(e)}function oe(e){return e&&e.window===e}function ae(e){return e&&e.$evalAsync&&e.$watch}function se(e){return"boolean"==typeof e}function le(e){return e&&ne(e.then)}z.$inject=[],V.$inject=[];var ce=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var ue=function(e){return J(e)?e.trim():e},fe=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function de(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function he(e){return x(e.nodeName||e[0]&&e[0].nodeName)}function pe(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function me(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function ge(e,t,n){var a,l,f=[],d=[];if(n=r(n)?n:NaN,t){if((l=t)&&Q(l.length)&&ce.test(E.call(l))||(a=t,"[object ArrayBuffer]"===E.call(a)))throw j("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw j("cpi","Can't copy! Source and destination are identical.");return te(t)?t.length=0:D(t,(function(e,n){"$$hashKey"!==n&&delete t[n]})),f.push(e),d.push(t),h(e,t,n)}return p(e,n);function h(e,t,n){if(--n<0)return"...";var r,a=t.$$hashKey;if(te(e))for(var l=0,f=e.length;l<f;l++)t.push(p(e[l],n));else if(X(e))for(r in e)t[r]=p(e[r],n);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=p(e[r],n));else for(r in e)w.call(e,r)&&(t[r]=p(e[r],n));return L(t,a),t}function p(e,t){if(!Y(e))return e;var n=f.indexOf(e);if(-1!==n)return d[n];if(oe(e)||ae(e))throw j("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,a=function(e){switch(E.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(p(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(ne(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===a&&(a=te(e)?[]:Object.create(O(e)),r=!0),f.push(e),d.push(a),r?h(e,a,t):a}}function ve(e,t){return e===t||e!=e&&t!=t}function ye(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,r,a,l=typeof e;if(l===typeof t&&"object"===l){if(!te(e)){if(ee(e))return!!ee(t)&&ve(e.getTime(),t.getTime());if(re(e))return!!re(t)&&e.toString()===t.toString();if(ae(e)||ae(t)||oe(e)||oe(t)||te(t)||ee(t)||re(t))return!1;for(r in a=Ye(),e)if("$"!==r.charAt(0)&&!ne(e[r])){if(!ye(e[r],t[r]))return!1;a[r]=!0}for(r in t)if(!(r in a)&&"$"!==r.charAt(0)&&K(t[r])&&!ne(t[r]))return!1;return!0}if(!te(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!ye(e[r],t[r]))return!1;return!0}}return!1}var be=function(){if(!K(be.rules)){var t=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(t){var n=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp");be.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else be.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return be.rules},we=function(){if(K(we.name_))return we.name_;var t,n,r,a,l=Me.length;for(n=0;n<l;++n)if(r=Me[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){a=t.getAttribute(r+"jq");break}return we.name_=a};function xe(e,t,n){return e.concat(S.call(t,n))}function _e(e,t){return S.call(e,t||0)}function Se(e,t){var n=arguments.length>2?_e(arguments,2):[];return!ne(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,xe(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function ke(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:oe(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":ae(n)&&(r="$SCOPE"),r}function Ce(e,t){if(!G(e))return Q(t)||(t=t?2:null),JSON.stringify(e,ke,t)}function Ee(e){return J(e)?JSON.parse(e):e}var Oe=/:/g;function je(e,t){e=e.replace(Oe,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return U(n)?t:n}function $e(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function Te(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return $e(e,n*(je(t,r)-r))}function Ae(e){e=f(e).clone().empty();var t=f("<div></div>").append(e).html();try{return e[0].nodeType===Qe?x(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(e,t){return"<"+x(t)}))}catch(e){return x(t)}}function Pe(e){try{return decodeURIComponent(e)}catch(e){}}function De(e){var t={};return D((e||"").split("&"),(function(e){var n,r,a;e&&(r=e=e.replace(/\+/g,"%20"),-1!==(n=e.indexOf("="))&&(r=e.substring(0,n),a=e.substring(n+1)),K(r=Pe(r))&&(a=!K(a)||Pe(a),w.call(t,r)?te(t[r])?t[r].push(a):t[r]=[t[r],a]:t[r]=a))})),t}function Re(e){return Ie(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ie(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var Me=["ng-","data-ng-","ng:","x-ng-"];var Le=function(t){var n=t.currentScript;if(!n)return!0;if(!(n instanceof e.HTMLScriptElement||n instanceof e.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every((function(e){if(!e)return!0;if(!e.value)return!1;var n=t.createElement("a");if(n.href=e.value,t.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(e.document);function Ne(t,n){var r,a,l={};if(D(Me,(function(e){var n=e+"app";!r&&t.hasAttribute&&t.hasAttribute(n)&&(r=t,a=t.getAttribute(n))})),D(Me,(function(e){var n,l=e+"app";!r&&(n=t.querySelector("["+l.replace(":","\\:")+"]"))&&(r=n,a=n.getAttribute(l))})),r){if(!Le)return void e.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");l.strictDi=null!==function(e,t){var n,r,a=Me.length;for(r=0;r<a;++r)if(n=Me[r]+t,J(n=e.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,a?[a]:[],l)}}function Fe(t,n,r){Y(r)||(r={});r=F({strictDi:!1},r);var a=function(){if((t=f(t)).injector()){var a=t[0]===e.document?"document":Ae(t);throw j("btstrpd","App already bootstrapped with this element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(e){e.value("$rootElement",t)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var l=pn(n,r.strictDi);return l.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply((function(){t.data("$injector",r),n(t)(e)}))}]),l},l=/^NG_ENABLE_DEBUG_INFO!/,d=/^NG_DEFER_BOOTSTRAP!/;if(e&&l.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(l,"")),e&&!d.test(e.name))return a();e.name=e.name.replace(d,""),T.resumeBootstrap=function(e){return D(e,(function(e){n.push(e)})),a()},ne(T.resumeDeferredBootstrap)&&T.resumeDeferredBootstrap()}function qe(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function Be(e){var t=T.element(e).injector();if(!t)throw j("test","no injector found for element argument to getTestability");return t.get("$$testability")}var Ue=/[A-Z]/g;function He(e,t){return t=t||"_",e.replace(Ue,(function(e,n){return(n?t:"")+e.toLowerCase()}))}var ze=!1;function Ve(){Ot.legacyXHTMLReplacement=!0}function We(e,t,n){if(!e)throw j("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function Ze(e,t,n){return n&&te(e)&&(e=e[e.length-1]),We(ne(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function Ge(e,t){if("hasOwnProperty"===e)throw j("badname","hasOwnProperty is not a valid {0} name",t)}function Ke(e){for(var t,n=e[0],r=e[e.length-1],a=1;n!==r&&(n=n.nextSibling);a++)(t||e[a]!==n)&&(t||(t=f(S.call(e,0,a))),t.push(n));return t||e}function Ye(){return Object.create(null)}function Xe(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!Z(e)||te(e)||ee(e)?Ce(e):e.toString()}return e}var Je=1,Qe=3,et=8,tt=9,nt=11;function rt(e,t){if(te(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(Y(e))for(var a in t=t||{},e)"$"===a.charAt(0)&&"$"===a.charAt(1)||(t[a]=e[a]);return t||e}function it(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):G(e)?"undefined":"string"!=typeof e?function(e,t){var n=[];return r(t)&&(e=T.copy(e,null,t)),JSON.stringify(e,(function(e,t){if(Y(t=ke(e,t))){if(n.indexOf(t)>=0)return"...";n.push(t)}return t}))}(e,t):e}var ot={full:"1.8.3",major:1,minor:8,dot:3,codeName:"ultimate-farewell"};Ot.expando="ng339";var at=Ot.cache={},st=1;Ot._data=function(e){return this.cache[e[this.expando]]||{}};var lt=/-([a-z])/g,ct=/^-ms-/,ut={mouseleave:"mouseout",mouseenter:"mouseover"},ft=a("jqLite");function dt(e,t){return t.toUpperCase()}function ht(e){return e.replace(lt,dt)}var pt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,mt=/<|&#?\w+;/,gt=/<([\w:-]+)/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,yt={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td;var bt={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(var wt in yt){var xt=yt[wt],_t=xt.slice().reverse();bt[wt]=[_t.length,"<"+_t.join("><")+">","</"+xt.join("></")+">"]}function St(e){return!mt.test(e)}function kt(e){var t=e.nodeType;return t===Je||!t||t===tt}function Ct(t,n){var r,a,f,d,h,p=n.createDocumentFragment(),y=[];if(St(t))y.push(n.createTextNode(t));else{if(r=p.appendChild(n.createElement("div")),a=(gt.exec(t)||["",""])[1].toLowerCase(),d=Ot.legacyXHTMLReplacement?t.replace(vt,"<$1></$2>"):t,l<10)for(f=bt[a]||bt._default,r.innerHTML=f[1]+d+f[2],h=f[0];h--;)r=r.firstChild;else{for(h=(f=yt[a]||[]).length;--h>-1;)r.appendChild(e.document.createElement(f[h])),r=r.firstChild;r.innerHTML=d}y=xe(y,r.childNodes),(r=p.firstChild).textContent=""}return p.textContent="",p.innerHTML="",D(y,(function(e){p.appendChild(e)})),p}bt.optgroup=bt.option;var Et=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};function Ot(t){if(t instanceof Ot)return t;var n,r,a,l;if(J(t)&&(t=ue(t),n=!0),!(this instanceof Ot)){if(n&&"<"!==t.charAt(0))throw ft("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ot(t)}n?Ft(this,(r=t,a=a||e.document,(l=pt.exec(r))?[a.createElement(l[1])]:(l=Ct(r,a))?l.childNodes:[])):ne(t)?zt(t):Ft(this,t)}function jt(e){return e.cloneNode(!0)}function $t(e,t){!t&&kt(e)&&f.cleanData([e]),e.querySelectorAll&&f.cleanData(e.querySelectorAll("*"))}function Tt(e){var t;for(t in e)return!1;return!0}function At(e){var t=e.ng339,n=t&&at[t],r=n&&n.events,a=n&&n.data;a&&!Tt(a)||r&&!Tt(r)||(delete at[t],e.ng339=void 0)}function Pt(e,t,n,r){if(K(r))throw ft("offargs","jqLite#off() does not support the `selector` argument");var a=Rt(e),l=a&&a.events,f=a&&a.handle;if(f){if(t){var d=function(t){var r=l[t];K(n)&&me(r||[],n),K(n)&&r&&r.length>0||(e.removeEventListener(t,f),delete l[t])};D(t.split(" "),(function(e){d(e),ut[e]&&d(ut[e])}))}else for(t in l)"$destroy"!==t&&e.removeEventListener(t,f),delete l[t];At(e)}}function Dt(e,t){var n=e.ng339,r=n&&at[n];r&&(t?delete r.data[t]:r.data={},At(e))}function Rt(e,t){var n=e.ng339,r=n&&at[n];return t&&!r&&(e.ng339=n=++st,r=at[n]={events:{},data:{},handle:void 0}),r}function It(e,t,n){if(kt(e)){var r,a=K(n),l=!a&&t&&!Y(t),f=!t,d=Rt(e,!l),h=d&&d.data;if(a)h[ht(t)]=n;else{if(f)return h;if(l)return h&&h[ht(t)];for(r in t)h[ht(r)]=t[r]}}}function Mt(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function Lt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;D(t.split(" "),(function(e){e=ue(e),r=r.replace(" "+e+" "," ")})),r!==n&&e.setAttribute("class",ue(r))}}function Nt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;D(t.split(" "),(function(e){e=ue(e),-1===r.indexOf(" "+e+" ")&&(r+=e+" ")})),r!==n&&e.setAttribute("class",ue(r))}}function Ft(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function qt(e,t){return Bt(e,"$"+(t||"ngController")+"Controller")}function Bt(e,t,n){e.nodeType===tt&&(e=e.documentElement);for(var r=te(t)?t:[t];e;){for(var a=0,l=r.length;a<l;a++)if(K(n=f.data(e,r[a])))return n;e=e.parentNode||e.nodeType===nt&&e.host}}function Ut(e){for($t(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ht(e,t){t||$t(e);var n=e.parentNode;n&&n.removeChild(e)}function zt(t){function n(){e.document.removeEventListener("DOMContentLoaded",n),e.removeEventListener("load",n),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))}var Vt=Ot.prototype={ready:zt,toString:function(){var e=[];return D(this,(function(t){e.push(""+t)})),"["+e.join(", ")+"]"},eq:function(e){return f(e>=0?this[e]:this[this.length+e])},length:0,push:C,sort:[].sort,splice:[].splice},Wt={};D("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(e){Wt[x(e)]=e}));var Zt={};D("input,select,option,textarea,button,form,details".split(","),(function(e){Zt[e]=!0}));var Gt={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Kt(e,t){var n=Wt[t.toLowerCase()];return n&&Zt[he(e)]&&n}function Yt(e,t,n){n.call(e,t)}function Xt(e,t,n){var r=t.relatedTarget;r&&(r===e||Et.call(e,r))||n.call(e,t)}function Jt(){this.$get=function(){return F(Ot,{hasClass:function(e,t){return e.attr&&(e=e[0]),Mt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Nt(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Lt(e,t)}})}}function Qt(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||M)():r+":"+e}D({data:It,removeData:Dt,hasData:function(e){for(var t in at[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,n=e.length;t<n;t++)Dt(e[t]),Pt(e[t])}},(function(e,t){Ot[t]=e})),D({data:It,inheritedData:Bt,scope:function(e){return f.data(e,"$scope")||Bt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return f.data(e,"$isolateScope")||f.data(e,"$isolateScopeNoTemplate")},controller:qt,injector:function(e){return Bt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Mt,css:function(e,t,n){if(t=function(e){return ht(e.replace(ct,"ms-"))}(t),!K(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var r,a=e.nodeType;if(a!==Qe&&2!==a&&a!==et&&e.getAttribute){var l=x(t),f=Wt[l];if(!K(n))return r=e.getAttribute(t),f&&null!==r&&(r=l),null===r?void 0:r;null===n||!1===n&&f?e.removeAttribute(t):e.setAttribute(t,f?l:n)}},prop:function(e,t,n){if(!K(n))return e[t];e[t]=n},text:function(){return e.$dv="",e;function e(e,t){if(G(t)){var n=e.nodeType;return n===Je||n===Qe?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(G(t)){if(e.multiple&&"select"===he(e)){var n=[];return D(e.options,(function(e){e.selected&&n.push(e.value||e.text)})),n}return e.value}e.value=t},html:function(e,t){if(G(t))return e.innerHTML;$t(e,!0),e.innerHTML=t},empty:Ut},(function(e,t){Ot.prototype[t]=function(t,n){var r,a,l=this.length;if(e!==Ut&&G(2===e.length&&e!==Mt&&e!==qt?t:n)){if(Y(t)){for(r=0;r<l;r++)if(e===It)e(this[r],t);else for(a in t)e(this[r],a,t[a]);return this}for(var f=e.$dv,d=G(f)?Math.min(l,1):l,h=0;h<d;h++){var p=e(this[h],t,n);f=f?f+p:p}return f}for(r=0;r<l;r++)e(this[r],t,n);return this}})),D({removeData:Dt,on:function(e,t,n,r){if(K(r))throw ft("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(kt(e)){var a=Rt(e,!0),l=a.events,f=a.handle;f||(f=a.handle=function(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var a=t[r||n.type],l=a?a.length:0;if(l){if(G(n.immediatePropagationStopped)){var f=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),f&&f.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var d=a.specialHandlerWrapper||Yt;l>1&&(a=rt(a));for(var h=0;h<l;h++)n.isImmediatePropagationStopped()||d(e,n,a[h])}};return n.elem=e,n}(e,l));for(var d=t.indexOf(" ")>=0?t.split(" "):[t],h=d.length,p=function(t,r,a){var d=l[t];d||((d=l[t]=[]).specialHandlerWrapper=r,"$destroy"===t||a||e.addEventListener(t,f)),d.push(n)};h--;)t=d[h],ut[t]?(p(ut[t],Xt),p(t,void 0,!0)):p(t)}},off:Pt,one:function(e,t,n){(e=f(e)).on(t,(function r(){e.off(t,n),e.off(t,r)})),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;$t(e),D(new Ot(t),(function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t}))},children:function(e){var t=[];return D(e.childNodes,(function(e){e.nodeType===Je&&t.push(e)})),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Je||n===nt)for(var r=0,a=(t=new Ot(t)).length;r<a;r++){var l=t[r];e.appendChild(l)}},prepend:function(e,t){if(e.nodeType===Je){var n=e.firstChild;D(new Ot(t),(function(t){e.insertBefore(t,n)}))}},wrap:function(e,t){var n,r,a;n=e,r=f(t).eq(0).clone()[0],(a=n.parentNode)&&a.replaceChild(r,n),r.appendChild(n)},remove:Ht,detach:function(e){Ht(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r)for(var a=0,l=(t=new Ot(t)).length;a<l;a++){var f=t[a];r.insertBefore(f,n.nextSibling),n=f}},addClass:Nt,removeClass:Lt,toggleClass:function(e,t,n){t&&D(t.split(" "),(function(t){var r=n;G(r)&&(r=!Mt(e,t)),(r?Nt:Lt)(e,t)}))},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==nt?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:jt,triggerHandler:function(e,t,n){var r,a,l,f=t.type||t,d=Rt(e),h=d&&d.events,p=h&&h[f];p&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:z,type:f,target:e},t.type&&(r=F(r,t)),a=rt(p),l=n?[r].concat(n):[r],D(a,(function(t){r.isImmediatePropagationStopped()||t.apply(e,l)})))}},(function(e,t){Ot.prototype[t]=function(t,n,r){for(var a,l=0,d=this.length;l<d;l++)G(a)?K(a=e(this[l],t,n,r))&&(a=f(a)):Ft(a,e(this[l],t,n,r));return K(a)?a:this}})),Ot.prototype.bind=Ot.prototype.on,Ot.prototype.unbind=Ot.prototype.off;var en=Object.create(null);function tn(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}tn.prototype={_idx:function(e){return e!==this._lastKey&&(this._lastKey=e,this._lastIndex=this._keys.indexOf(e)),this._lastIndex},_transformKey:function(e){return U(e)?en:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},has:function(e){return e=this._transformKey(e),-1!==this._idx(e)},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var nn=tn,rn=[function(){this.$get=[function(){return nn}]}],on=/^([^(]+?)=>/,an=/^[^(]*\(\s*([^)]*)\)/m,sn=/,/,ln=/^\s*(_?)(\S+?)\1\s*$/,cn=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,un=a("$injector");function dn(e){return Function.prototype.toString.call(e)}function hn(e){var t=dn(e).replace(cn,"");return t.match(on)||t.match(an)}function pn(e,t){t=!0===t;var n={},r="Provider",a=[],f=new nn,d={$provide:{provider:S(k),factory:S(E),service:S((function(e,t){return E(e,["$injector",function(e){return e.instantiate(t)}])})),value:S((function(e,t){return E(e,W(t),!1)})),constant:S((function(e,t){Ge(e,"constant"),d[e]=t,y[e]=t})),decorator:function(e,t){var n=p.get(e+r),a=n.$get;n.$get=function(){var e=x.invoke(a,n);return x.invoke(t,null,{$delegate:e})}}}},p=d.$injector=j(d,(function(e,t){throw T.isString(t)&&a.push(t),un("unpr","Unknown provider: {0}",a.join(" <- "))})),y={},w=j(y,(function(e,t){var n=p.get(e+r,t);return x.invoke(n.$get,n,void 0,e)})),x=w;d["$injector"+r]={$get:W(w)},x.modules=p.modules=Ye();var _=O(e);return(x=w.get("$injector")).strictDi=t,D(_,(function(e){e&&x.invoke(e)})),x.loadNewModules=function(e){D(O(e),(function(e){e&&x.invoke(e)}))},x;function S(e){return function(t,n){if(!Y(t))return e(t,n);D(t,I(e))}}function k(e,t){if(Ge(e,"service"),(ne(t)||te(t))&&(t=p.instantiate(t)),!t.$get)throw un("pget","Provider '{0}' must define $get factory method.",e);return d[e+r]=t}function C(e,t){return function(){var n=x.invoke(t,this);if(G(n))throw un("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function E(e,t,n){return k(e,{$get:!1!==n?C(e,t):t})}function O(e){We(G(e)||te(e),"modulesToLoad","not an array");var t,n=[];return D(e,(function(e){if(!f.get(e)){f.set(e,!0);try{J(e)?(t=h(e),x.modules[e]=t,n=n.concat(O(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):ne(e)||te(e)?n.push(p.invoke(e)):Ze(e,"module")}catch(t){throw te(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),un("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],a=p.get(r[0]);a[r[1]].apply(a,r[2])}}})),n}function j(e,f){function h(t,r){if(e.hasOwnProperty(t)){if(e[t]===n)throw un("cdep","Circular dependency found: {0}",t+" <- "+a.join(" <- "));return e[t]}try{return a.unshift(t),e[t]=n,e[t]=f(t,r),e[t]}catch(r){throw e[t]===n&&delete e[t],r}finally{a.shift()}}function p(e,n,r){for(var a=[],l=pn.$$annotate(e,t,r),f=0,d=l.length;f<d;f++){var p=l[f];if("string"!=typeof p)throw un("itkn","Incorrect injection token! Expected service name as string, got {0}",p);a.push(n&&n.hasOwnProperty(p)?n[p]:h(p,r))}return a}return{invoke:function(e,t,n,r){"string"==typeof n&&(r=n,n=null);var a=p(e,n,r);return te(e)&&(e=e[e.length-1]),function(e){if(l||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return se(t)||(t=e.$$ngIsClass=/^class\b/.test(dn(e))),t}(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)},instantiate:function(e,t,n){var r=te(e)?e[e.length-1]:e,a=p(e,t,n);return a.unshift(null),new(Function.prototype.bind.apply(r,a))},get:h,annotate:pn.$$annotate,has:function(t){return d.hasOwnProperty(t+r)||e.hasOwnProperty(t)}}}}function mn(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(n,r,a){var l=n.document;function d(e){if(e){e.scrollIntoView();var t=function(){var e=h.yOffset;if(ne(e))e=e();else if(de(e)){var t=e[0];e="fixed"!==n.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom}else Q(e)||(e=0);return e}();if(t){var r=e.getBoundingClientRect().top;n.scrollBy(0,r-t)}}else n.scrollTo(0,0)}function h(e){var t,n,a;(e=J(e)?e:Q(e)?e.toString():r.hash())?(t=l.getElementById(e))?d(t):(n=l.getElementsByName(e),a=null,Array.prototype.some.call(n,(function(e){if("a"===he(e))return a=e,!0})),(t=a)?d(t):"top"===e&&d(null)):d(null)}return t&&a.$watch((function(){return r.hash()}),(function(t,n){var r,l;t===n&&""===t||(r=function(){a.$evalAsync(h)},"complete"===(l=l||e).document.readyState?l.setTimeout(r):f(l).on("load",r))})),h}]}pn.$$annotate=function(e,t,n){var r,a;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw J(n)&&n||(n=e.name||function(e){var t=hn(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(e)),un("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);D(hn(e)[1].split(sn),(function(e){e.replace(ln,(function(e,t,n){r.push(n)}))}))}e.$inject=r}}else te(e)?(Ze(e[a=e.length-1],"fn"),r=e.slice(0,a)):Ze(e,"fn",!0);return r};var gn=a("$animate"),vn="ng-animate";function yn(e,t){return e||t?e?t?(te(e)&&(e=e.join(" ")),te(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function bn(e){return Y(e)?e:{}}var wn=function(){this.$get=z},xn=function(){var e=new nn,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:z,on:z,off:z,pin:z,push:function(f,d,h,p){p&&p(),(h=h||{}).from&&f.css(h.from),h.to&&f.css(h.to),(h.addClass||h.removeClass)&&function(n,f,d){var h=e.get(n)||{},p=a(h,f,!0),y=a(h,d,!1);(p||y)&&(e.set(n,h),t.push(n),1===t.length&&r.$$postDigest(l))}(f,h.addClass,h.removeClass);var y=new n;return y.complete(),y}};function a(e,t,n){var r=!1;return t&&D(t=J(t)?t.split(" "):te(t)?t:[],(function(t){t&&(r=!0,e[t]=n)})),r}function l(){D(t,(function(t){var n=e.get(t);if(n){var r=function(e){J(e)&&(e=e.split(" "));var t=Ye();return D(e,(function(e){e.length&&(t[e]=!0)})),t}(t.attr("class")),a="",l="";D(n,(function(e,t){e!==!!r[t]&&(e?a+=(a.length?" ":"")+t:l+=(l.length?" ":"")+t)})),D(t,(function(e){a&&Nt(e,a),l&&Lt(e,l)})),e.delete(t)}})),t.length=0}}]},_n=["$provide",function(e){var t=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw gn("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var a=n+"-animation";t.$$registeredAnimations[n.substr(1)]=a,e.factory(a,r)},this.customFilter=function(e){return 1===arguments.length&&(r=ne(e)?e:null),r},this.classNameFilter=function(e){if(1===arguments.length&&((n=e instanceof RegExp?e:null)&&new RegExp("[(\\s|\\/)]"+vn+"[(\\s|\\/)]").test(n.toString())))throw n=null,gn("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',vn);return n},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(1===n.nodeType)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.cancel&&e.cancel()},enter:function(n,r,a,l){return r=r&&f(r),a=a&&f(a),t(n,r=r||a.parent(),a),e.push(n,"enter",bn(l))},move:function(n,r,a,l){return r=r&&f(r),a=a&&f(a),t(n,r=r||a.parent(),a),e.push(n,"move",bn(l))},leave:function(t,n){return e.push(t,"leave",bn(n),(function(){t.remove()}))},addClass:function(t,n,r){return(r=bn(r)).addClass=yn(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return(r=bn(r)).removeClass=yn(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,a){return(a=bn(a)).addClass=yn(a.addClass,n),a.removeClass=yn(a.removeClass,r),e.push(t,"setClass",a)},animate:function(t,n,r,a,l){return(l=bn(l)).from=l.from?F(l.from,n):n,l.to=l.to?F(l.to,r):r,a=a||"ng-inline-animate",l.tempClasses=yn(l.tempClasses,a),e.push(t,"animate",l)}}}]}],Sn=function(){this.$get=["$$rAF",function(e){var t=[];function n(n){t.push(n),t.length>1||e((function(){for(var e=0;e<t.length;e++)t[e]();t=[]}))}return function(){var e=!1;return n((function(){e=!0})),function(t){e?t():n(t)}}}]},kn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,r,a){function l(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){r()?function(e){a(e,0,!1)}(e):t(e)},this._state=0}return l.chain=function(e,t){var n=0;!function r(){if(n===e.length)return void t(!0);e[n]((function(e){!1!==e?(n++,r()):t(!1)}))}()},l.all=function(e,t){var n=0,r=!0;function a(a){r=r&&a,++n===e.length&&t(r)}D(e,(function(e){e.done(a)}))},l.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:z,getPromise:function(){if(!this.promise){var t=this;this.promise=e((function(e,n){t.done((function(t){!1===t?n():e()}))}))}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick((function(){t._resolve(e)})))},_resolve:function(e){2!==this._state&&(D(this._doneCallbacks,(function(t){t(e)})),this._doneCallbacks.length=0,this._state=2)}},l}]},Cn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){var a=r||{};a.$$prepared||(a=ge(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var l,f=new n;return{start:d,end:d};function d(){return e((function(){!function(){a.addClass&&(t.addClass(a.addClass),a.addClass=null);a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null);a.to&&(t.css(a.to),a.to=null)}(),l||f.complete(),l=!0})),f}}}]};function En(e,t,n,r,a){var l=this,d=e.location,h=e.history,p=e.setTimeout,y=e.clearTimeout,w={},x=a(n);l.isMock=!1,l.$$completeOutstandingRequest=x.completeTask,l.$$incOutstandingRequestCount=x.incTaskCount,l.notifyWhenNoOutstandingRequests=x.notifyWhenNoPendingTasks;var _,S,k=d.href,C=t.find("base"),E=null,O=r.history?function(){try{return h.state}catch(e){}}:z;R(),l.url=function(t,n,a){if(G(a)&&(a=null),d!==e.location&&(d=e.location),h!==e.history&&(h=e.history),t){var f=S===a;if(t=ji(t).href,k===t&&(!r.history||f))return l;var p=k&&Cr(k)===Cr(t);return k=t,S=a,!r.history||p&&f?(p||(E=t),n?d.replace(t):p?d.hash=function(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}(t):d.href=t,d.href!==t&&(E=t)):(h[n?"replaceState":"pushState"](a,"",t),R()),E&&(E=t),l}return function(e){return e.replace(/#$/,"")}(E||d.href)},l.state=function(){return _};var j=[],T=!1;function A(){E=null,I()}var P=null;function R(){ye(_=G(_=O())?null:_,P)&&(_=P),P=_,S=_}function I(){var e=S;R(),k===l.url()&&e===_||(k=l.url(),S=_,D(j,(function(e){e(l.url(),_)})))}l.onUrlChange=function(t){return T||(r.history&&f(e).on("popstate",A),f(e).on("hashchange",A),T=!0),j.push(t),t},l.$$applicationDestroyed=function(){f(e).off("hashchange popstate",A)},l.$$checkUrlChange=I,l.baseHref=function(){var e=C.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},l.defer=function(e,t,n){var r;return t=t||0,n=n||x.DEFAULT_TASK_TYPE,x.incTaskCount(n),r=p((function(){delete w[r],x.completeTask(e,n)}),t),w[r]=n,r},l.defer.cancel=function(e){if(w.hasOwnProperty(e)){var t=w[e];return delete w[e],y(e),x.completeTask(z,t),!0}return!1}}function On(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(e,t,n,r,a){return new En(e,r,t,n,a)}]}function jn(){this.$get=function(){var e={};function t(t,n){if(t in e)throw a("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var r=0,l=F({},n,{id:t}),f=Ye(),d=n&&n.capacity||Number.MAX_VALUE,h=Ye(),p=null,y=null;return e[t]={put:function(e,t){if(!G(t)){if(d<Number.MAX_VALUE)w(h[e]||(h[e]={key:e}));return e in f||r++,f[e]=t,r>d&&this.remove(y.key),t}},get:function(e){if(d<Number.MAX_VALUE){var t=h[e];if(!t)return;w(t)}return f[e]},remove:function(e){if(d<Number.MAX_VALUE){var t=h[e];if(!t)return;t===p&&(p=t.p),t===y&&(y=t.n),x(t.n,t.p),delete h[e]}e in f&&(delete f[e],r--)},removeAll:function(){f=Ye(),r=0,h=Ye(),p=y=null},destroy:function(){f=null,l=null,h=null,delete e[t]},info:function(){return F({},l,{size:r})}};function w(e){e!==p&&(y?y===e&&(y=e.n):y=e,x(e.n,e.p),x(e,p),(p=e).n=null)}function x(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}}return t.info=function(){var t={};return D(e,(function(e,n){t[n]=e.info()})),t},t.get=function(t){return e[t]},t}}function $n(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var Tn=a("$compile");var An=new function(){};function Pn(t,n){var r={},a="Directive",d=/^\s*directive:\s*([\w-]+)\s+(.*)$/,h=/(([\w-]+)(?::([^;]+))?;?)/,p=function(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),y=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,_=/^(on[a-z]+|formaction)$/,S=Ye();function k(e,t,n){var r=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,a=Ye();return D(e,(function(e,l){if((e=e.trim())in S)a[l]=S[e];else{var f=e.match(r);if(!f)throw Tn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,l,e,n?"controller bindings definition":"isolate scope definition");a[l]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||l},f[4]&&(S[e]=a[l])}})),a}function C(e,t){var n={isolateScope:null,bindToController:null};if(Y(e.scope)&&(!0===e.bindToController?(n.bindToController=k(e.scope,t,!0),n.isolateScope={}):n.isolateScope=k(e.scope,t,!1)),Y(e.bindToController)&&(n.bindToController=k(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw Tn("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}this.directive=function e(n,l){return We(n,"name"),Ge(n,"directive"),J(n)?(!function(e){var t=e.charAt(0);if(!t||t!==x(t))throw Tn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw Tn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}(n),We(l,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],t.factory(n+a,["$injector","$exceptionHandler",function(e,t){var a=[];return D(r[n],(function(r,l){try{var f=e.invoke(r);ne(f)?f={compile:W(f)}:!f.compile&&f.link&&(f.compile=W(f.link)),f.priority=f.priority||0,f.index=l,f.name=f.name||n,f.require=function(e){var t=e.require||e.controller&&e.name;return!te(t)&&Y(t)&&D(t,(function(e,n){var r=e.match(y);e.substring(r[0].length)||(t[n]=r[0]+n)})),t}(f),f.restrict=function(e,t){if(e&&(!J(e)||!/[EACM]/.test(e)))throw Tn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}(f.restrict,n),f.$$moduleName=r.$$moduleName,a.push(f)}catch(e){t(e)}})),a}])),r[n].push(l)):D(n,I(e)),this},this.component=function e(t,n){if(!J(t))return D(t,I(Se(this,e))),this;var r=n.controller||function(){};function a(e){function t(t){return ne(t)||te(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var a=n.template||n.templateUrl?n.template:"",l={controller:r,controllerAs:Bn(n.controller)||n.controllerAs||"$ctrl",template:t(a),templateUrl:t(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return D(n,(function(e,t){"$"===t.charAt(0)&&(l[t]=e)})),l}return D(n,(function(e,t){"$"===t.charAt(0)&&(a[t]=e,ne(r)&&(r[t]=e))})),a.$inject=["$injector"],this.directive(t,a)},this.aHrefSanitizationTrustedUrlList=function(e){return K(e)?(n.aHrefSanitizationTrustedUrlList(e),this):n.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(e){this.aHrefSanitizationTrustedUrlList=e}}),this.imgSrcSanitizationTrustedUrlList=function(e){return K(e)?(n.imgSrcSanitizationTrustedUrlList(e),this):n.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(e){this.imgSrcSanitizationTrustedUrlList=e}});var O=!0;this.debugInfoEnabled=function(e){return K(e)?(O=e,this):O};var j=!1;this.strictComponentBindingsEnabled=function(e){return K(e)?(j=e,this):j};var T=10;this.onChangesTtl=function(e){return arguments.length?(T=e,this):T};var A=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(A=e,this):A};var P=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(P=e,this):P};var R=Ye();this.addPropertySecurityContext=function(e,t,n){var r=e.toLowerCase()+"|"+t.toLowerCase();if(r in R&&R[r]!==n)throw Tn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",e,t,R[r],n);return R[r]=n,this},function(){function e(e,t){D(t,(function(t){R[t.toLowerCase()]=e}))}e(ui.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),e(ui.CSS,["*|style"]),e(ui.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),e(ui.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),e(ui.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(t,n,S,k,I,M,L,N,q){var B,U=/^\w/,W=e.document.createElement("div"),Z=A,K=P,X=T;function Q(){try{if(!--X)throw B=void 0,Tn("infchng","{0} $onChanges() iterations reached. Aborting!\n",T);L.$apply((function(){for(var e=0,t=B.length;e<t;++e)try{B[e]()}catch(e){S(e)}B=void 0}))}finally{X++}}function ee(e,t){if(!e)return e;if(!J(e))throw Tn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',t,e.toString());for(var n="",r=ue(e),a=/\s/.test(r)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,l=r.split(a),f=Math.floor(l.length/2),d=0;d<f;d++){var h=2*d;n+=N.getTrustedMediaUrl(ue(l[h])),n+=" "+ue(l[h+1])}var p=ue(l[2*d]).split(/\s/);return n+=N.getTrustedMediaUrl(ue(p[0])),2===p.length&&(n+=" "+ue(p[1])),n}function re(e,t){if(t){var n,r,a,l=Object.keys(t);for(n=0,r=l.length;n<r;n++)this[a=l[n]]=t[a]}else this.$attr={};this.$$element=e}function oe(e,t){try{e.addClass(t)}catch(e){}}re.prototype={$normalize:Mn,$addClass:function(e){e&&e.length>0&&q.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&q.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ln(e,t);n&&n.length&&q.addClass(this.$$element,n);var r=Ln(t,e);r&&r.length&&q.removeClass(this.$$element,r)},$set:function(e,t,n,r){var a=Kt(this.$$element[0],e),l=function(e){return Gt[e]}(e),f=e;a?(this.$$element.prop(e,t),r=a):l&&(this[l]=t,f=l),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e])||(this.$attr[e]=r=He(e,"-")),"img"===he(this.$$element)&&"srcset"===e&&(this[e]=t=ee(t,"$set('srcset', value)")),!1!==n&&(null===t||G(t)?this.$$element.removeAttr(r):U.test(r)?a&&!1===t?this.$$element.removeAttr(r):this.$$element.attr(r,t):function(e,t,n){W.innerHTML="<span "+t+">";var r=W.firstChild.attributes,a=r[0];r.removeNamedItem(a.name),a.value=n,e.attributes.setNamedItem(a)}(this.$$element[0],r,t));var d=this.$$observers;d&&D(d[f],(function(e){try{e(t)}catch(e){S(e)}}))},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=Ye()),a=r[e]||(r[e]=[]);return a.push(t),L.$evalAsync((function(){a.$$inter||!n.hasOwnProperty(e)||G(n[e])||t(n[e])})),function(){me(a,t)}}};var le=n.startSymbol(),ce=n.endSymbol(),fe="{{"===le&&"}}"===ce?V:function(e){return e.replace(/\{\{/g,le).replace(/}}/g,ce)},de=/^ng(Attr|Prop|On)([A-Z].*)$/,pe=/^(.+)Start$/;return ge.$$addBindingInfo=O?function(e,t){var n=e.data("$binding")||[];te(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:z,ge.$$addBindingClass=O?function(e){oe(e,"ng-binding")}:z,ge.$$addScopeInfo=O?function(e,t,n,r){var a=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(a,t)}:z,ge.$$addScopeClass=O?function(e,t){oe(e,t?"ng-isolate-scope":"ng-scope")}:z,ge.$$createComment=function(t,n){var r="";return O&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},ge;function ge(e,t,n,r,a){e instanceof f||(e=f(e));var l=be(e,t,e,n,r,a);ge.$$addScopeClass(e);var d=null;return function(t,n,r){if(!e)throw Tn("multilink","This element has already been linked.");We(t,"scope"),a&&a.needsNewScope&&(t=t.$parent.$new());var h,p,y,w=(r=r||{}).parentBoundTranscludeFn,x=r.transcludeControllers,_=r.futureParentElement;if(w&&w.$$boundTransclude&&(w=w.$$boundTransclude),d||(p=(h=_)&&h[0],d=p&&"foreignobject"!==he(p)&&E.call(p).match(/SVG/)?"svg":"html"),y="html"!==d?f(Ne(d,f("<div></div>").append(e).html())):n?Vt.clone.call(e):e,x)for(var S in x)y.data("$"+S+"Controller",x[S].instance);return ge.$$addScopeInfo(y,t),n&&n(y,t),l&&l(t,y,y,w),n||(e=l=null),y}}function be(e,t,n,r,a,d){for(var h,p,y,w,x,_,S,k=[],C=te(e)||e instanceof f,E=0;E<e.length;E++)h=new re,11===l&&we(e,E,C),(y=(p=ke(e[E],[],h,0===E?r:void 0,a)).length?je(p,e[E],h,t,n,null,[],[],d):null)&&y.scope&&ge.$$addScopeClass(h.$$element),x=y&&y.terminal||!(w=e[E].childNodes)||!w.length?null:be(w,y?(y.transcludeOnThisElement||!y.templateOnThisElement)&&y.transclude:t),(y||x)&&(k.push(E,y,x),_=!0,S=S||y),d=null;return _?function(e,n,r,a){var l,d,h,p,y,w,x,_;if(S){var C=n.length;for(_=new Array(C),y=0;y<k.length;y+=3)_[x=k[y]]=n[x]}else _=n;for(y=0,w=k.length;y<w;)h=_[k[y++]],l=k[y++],d=k[y++],l?(l.scope?(p=e.$new(),ge.$$addScopeInfo(f(h),p)):p=e,l(d,p,h,r,l.transcludeOnThisElement?xe(e,l.transclude,a):!l.templateOnThisElement&&a?a:!a&&t?xe(e,t):null)):d&&d(e,h.childNodes,void 0,a)}:null}function we(e,t,n){var r,a=e[t],l=a.parentNode;if(a.nodeType===Qe)for(;(r=l?a.nextSibling:e[t+1])&&r.nodeType===Qe;)a.nodeValue=a.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===e[t+1]&&e.splice(t+1,1)}function xe(e,t,n){function r(r,a,l,f,d){return r||((r=e.$new(!1,d)).$$transcluded=!0),t(r,a,{parentBoundTranscludeFn:n,transcludeControllers:l,futureParentElement:f})}var a=r.$$slots=Ye();for(var l in t.$$slots)t.$$slots[l]?a[l]=xe(e,t.$$slots[l],n):a[l]=null;return r}function ke(e,t,r,a,l){var f,p,y,w=e.nodeType,x=r.$attr;switch(w){case Je:Pe(t,Mn(p=he(e)),"E",a,l);for(var _,S,k,C,E,O=e.attributes,j=0,T=O&&O.length;j<T;j++){var A,P=!1,D=!1,R=!1,I=!1,M=!1;S=(_=O[j]).name,C=_.value,(E=(k=Mn(S.toLowerCase())).match(de))?(R="Attr"===E[1],I="Prop"===E[1],M="On"===E[1],S=S.replace(Rn,"").toLowerCase().substr(4+E[1].length).replace(/_(.)/g,(function(e,t){return t.toUpperCase()}))):(A=k.match(pe))&&De(A[1])&&(P=S,D=S.substr(0,S.length-5)+"end",S=S.substr(0,S.length-6)),I||M?(r[k]=C,x[k]=_.name,I?qe(e,t,k,S):Be(t,k,S)):(x[k=Mn(S.toLowerCase())]=S,!R&&r.hasOwnProperty(k)||(r[k]=C,Kt(e,k)&&(r[k]=!0)),Ue(e,t,C,k,R),Pe(t,k,"A",a,l,P,D))}if("input"===p&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!K)break;if(Y(y=e.className)&&(y=y.animVal),J(y)&&""!==y)for(;f=h.exec(y);)Pe(t,k=Mn(f[2]),"C",a,l)&&(r[k]=ue(f[3])),y=y.substr(f.index+f[0].length);break;case Qe:!function(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&ge.$$addBindingClass(t),function(e,t){var a=t.parent();n||ge.$$addBindingClass(a),ge.$$addBindingInfo(a,r.expressions),e.$watch(r,(function(e){t[0].nodeValue=e}))}}})}(t,e.nodeValue);break;case et:if(!Z)break;!function(e,t,n,r,a){try{var l=d.exec(e.nodeValue);if(l){var f=Mn(l[1]);Pe(t,f,"M",r,a)&&(n[f]=ue(l[2]))}}catch(e){}}(e,t,r,a,l)}return t.sort(Me),t}function Ce(e,t,n){var r=[],a=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw Tn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===Je&&(e.hasAttribute(t)&&a++,e.hasAttribute(n)&&a--),r.push(e),e=e.nextSibling}while(a>0);else r.push(e);return f(r)}function Ee(e,t,n){return function(r,a,l,f,d){return a=Ce(a[0],t,n),e(r,a,l,f,d)}}function Oe(e,t,n,r,a,l){var f;return e?ge(t,n,r,a,l):function(){return f||(f=ge(t,n,r,a,l),t=n=l=null),f.apply(this,arguments)}}function je(t,n,r,a,l,d,h,p,y){y=y||{};for(var w,x,_,k,C,E=-Number.MAX_VALUE,O=y.newScopeDirective,j=y.controllerDirectives,T=y.newIsolateScopeDirective,A=y.templateDirective,P=y.nonTlbTranscludeDirective,R=!1,I=!1,L=y.hasElementTranscludeDirective,N=r.$$element=f(n),q=d,B=a,U=!1,H=!1,z=0,V=t.length;z<V;z++){var W=(w=t[z]).$$start,Z=w.$$end;if(W&&(N=Ce(n,W,Z)),_=void 0,E>w.priority)break;if((C=w.scope)&&(w.templateUrl||(Y(C)?(Le("new/isolated scope",T||O,w,N),T=w):Le("new/isolated scope",T,w,N)),O=O||w),x=w.name,!U&&(w.replace&&(w.templateUrl||w.template)||w.transclude&&!w.$$tlb)){for(var K,X=z+1;K=t[X++];)if(K.transclude&&!K.$$tlb||K.replace&&(K.templateUrl||K.template)){H=!0;break}U=!0}if(!w.templateUrl&&w.controller&&(j=j||Ye(),Le("'"+x+"' controller",j[x],w,N),j[x]=w),C=w.transclude)if(R=!0,w.$$tlb||(Le("transclusion",P,w,N),P=w),"element"===C)L=!0,E=w.priority,_=N,N=r.$$element=f(ge.$$createComment(x,r[x])),n=N[0],ze(l,_e(_),n),B=Oe(H,_,a,E,q&&q.name,{nonTlbTranscludeDirective:P});else{var J=Ye();if(Y(C)){_=e.document.createDocumentFragment();var Q=Ye(),ee=Ye();for(var oe in D(C,(function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,Q[e]=t,J[t]=null,ee[t]=n})),D(N.contents(),(function(t){var n=Q[Mn(he(t))];n?(ee[n]=!0,J[n]=J[n]||e.document.createDocumentFragment(),J[n].appendChild(t)):_.appendChild(t)})),D(ee,(function(e,t){if(!e)throw Tn("reqslot","Required transclusion slot `{0}` was not filled.",t)})),J)if(J[oe]){var se=f(J[oe].childNodes);J[oe]=Oe(H,se,a)}_=f(_.childNodes)}else _=f(jt(n)).contents();N.empty(),(B=Oe(H,_,a,void 0,void 0,{needsNewScope:w.$$isolateScope||w.$$newScope})).$$slots=J}if(w.template)if(I=!0,Le("template",A,w,N),A=w,C=ne(w.template)?w.template(N,r):w.template,C=fe(C),w.replace){if(q=w,_=St(C)?[]:Nn(Ne(w.templateNamespace,ue(C))),n=_[0],1!==_.length||n.nodeType!==Je)throw Tn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",x,"");ze(l,N,n);var le={$attr:{}},ce=ke(n,[],le),de=t.splice(z+1,t.length-(z+1));(T||O)&&Te(ce,T,O),t=t.concat(ce).concat(de),Re(r,le),V=t.length}else N.html(C);if(w.templateUrl)I=!0,Le("template",A,w,N),A=w,w.replace&&(q=w),ve=Ie(t.splice(z,t.length-z),N,r,l,R&&B,h,p,{controllerDirectives:j,newScopeDirective:O!==w&&O,newIsolateScopeDirective:T,templateDirective:A,nonTlbTranscludeDirective:P}),V=t.length;else if(w.compile)try{k=w.compile(N,r,B);var pe=w.$$originalDirective||w;ne(k)?me(null,Se(pe,k),W,Z):k&&me(Se(pe,k.pre),Se(pe,k.post),W,Z)}catch(e){S(e,Ae(N))}w.terminal&&(ve.terminal=!0,E=Math.max(E,w.priority))}return ve.scope=O&&!0===O.scope,ve.transcludeOnThisElement=R,ve.templateOnThisElement=I,ve.transclude=B,y.hasElementTranscludeDirective=L,ve;function me(e,t,n,r){e&&(n&&(e=Ee(e,n,r)),e.require=w.require,e.directiveName=x,(T===w||w.$$isolateScope)&&(e=Ve(e,{isolateScope:!0})),h.push(e)),t&&(n&&(t=Ee(t,n,r)),t.require=w.require,t.directiveName=x,(T===w||w.$$isolateScope)&&(t=Ve(t,{isolateScope:!0})),p.push(t))}function ve(e,t,a,l,d){var y,w,x,_,k,C,E,P,R,I;for(var N in n===a?(R=r,P=r.$$element):R=new re(P=f(a),r),k=t,T?_=t.$new(!0):O&&(k=t.$parent),d&&(E=function(e,t,n,r){var a;ae(e)||(r=n,n=t,t=e,e=void 0);L&&(a=C);n||(n=L?P.parent():P);if(!r)return d(e,t,a,n,H);var l=d.$$slots[r];if(l)return l(e,t,a,n,H);if(G(l))throw Tn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,Ae(P))},E.$$boundTransclude=d,E.isSlotFilled=function(e){return!!d.$$slots[e]}),j&&(C=function(e,t,n,r,a,l,f){var d=Ye();for(var h in r){var p=r[h],y={$scope:p===f||p.$$isolateScope?a:l,$element:e,$attrs:t,$transclude:n},w=p.controller;"@"===w&&(w=t[p.name]);var x=M(w,y,!0,p.controllerAs);d[p.name]=x,e.data("$"+p.name+"Controller",x.instance)}return d}(P,R,E,j,_,t,T)),T&&(ge.$$addScopeInfo(P,_,!0,!(A&&(A===T||A===T.$$originalDirective))),ge.$$addScopeClass(P,!0),_.$$isolateBindings=T.$$isolateBindings,(I=Ke(t,R,_,_.$$isolateBindings,T)).removeWatches&&_.$on("$destroy",I.removeWatches)),C){var q=j[N],B=C[N],U=q.$$bindings.bindToController;B.instance=B(),P.data("$"+q.name+"Controller",B.instance),B.bindingInfo=Ke(k,R,B.instance,U,q)}for(D(j,(function(e,t){var n=e.require;e.bindToController&&!te(n)&&Y(n)&&F(C[t].instance,$e(t,n,P,C))})),D(C,(function(e){var t=e.instance;if(ne(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){S(e)}if(ne(t.$onInit))try{t.$onInit()}catch(e){S(e)}ne(t.$doCheck)&&(k.$watch((function(){t.$doCheck()})),t.$doCheck()),ne(t.$onDestroy)&&k.$on("$destroy",(function(){t.$onDestroy()}))})),y=0,w=h.length;y<w;y++)Ze(x=h[y],x.isolateScope?_:t,P,R,x.require&&$e(x.directiveName,x.require,P,C),E);var H=t;for(T&&(T.template||null===T.templateUrl)&&(H=_),e&&e(H,a.childNodes,void 0,d),y=p.length-1;y>=0;y--)Ze(x=p[y],x.isolateScope?_:t,P,R,x.require&&$e(x.directiveName,x.require,P,C),E);D(C,(function(e){var t=e.instance;ne(t.$postLink)&&t.$postLink()}))}}function $e(e,t,n,r){var a;if(J(t)){var l=t.match(y),f=t.substring(l[0].length),d=l[1]||l[3],h="?"===l[2];if("^^"===d?n=n.parent():a=(a=r&&r[f])&&a.instance,!a){var p="$"+f+"Controller";a="^^"===d&&n[0]&&n[0].nodeType===tt?null:d?n.inheritedData(p):n.data(p)}if(!a&&!h)throw Tn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",f,e)}else if(te(t)){a=[];for(var w=0,x=t.length;w<x;w++)a[w]=$e(e,t[w],n,r)}else Y(t)&&(a={},D(t,(function(t,l){a[l]=$e(e,t,n,r)})));return a||null}function Te(e,t,n){for(var r=0,a=e.length;r<a;r++)e[r]=H(e[r],{$$isolateScope:t,$$newScope:n})}function Pe(e,n,l,f,d,h,p){if(n===d)return null;var y=null;if(r.hasOwnProperty(n))for(var w,x=t.get(n+a),_=0,S=x.length;_<S;_++)if(w=x[_],(G(f)||f>w.priority)&&-1!==w.restrict.indexOf(l)){if(h&&(w=H(w,{$$start:h,$$end:p})),!w.$$bindings){var k=w.$$bindings=C(w,w.name);Y(k.isolateScope)&&(w.$$isolateBindings=k.isolateScope)}e.push(w),y=w}return y}function De(e){if(r.hasOwnProperty(e))for(var n=t.get(e+a),l=0,f=n.length;l<f;l++)if(n[l].multiElement)return!0;return!1}function Re(e,t){var n=t.$attr,r=e.$attr;D(e,(function(r,a){"$"!==a.charAt(0)&&(t[a]&&t[a]!==r&&(r.length?r+=("style"===a?";":" ")+t[a]:r=t[a]),e.$set(a,r,!0,n[a]))})),D(t,(function(t,a){e.hasOwnProperty(a)||"$"===a.charAt(0)||(e[a]=t,"class"!==a&&"style"!==a&&(r[a]=n[a]))}))}function Ie(e,t,n,r,a,l,d,h){var p,y,w=[],x=t[0],_=e.shift(),C=H(_,{templateUrl:null,transclude:null,replace:null,$$originalDirective:_}),E=ne(_.templateUrl)?_.templateUrl(t,n):_.templateUrl,O=_.templateNamespace;return t.empty(),k(E).then((function(S){var k,j,T,A;if(S=fe(S),_.replace){if(T=St(S)?[]:Nn(Ne(O,ue(S))),k=T[0],1!==T.length||k.nodeType!==Je)throw Tn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",_.name,E);j={$attr:{}},ze(r,t,k);var P=ke(k,[],j);Y(_.scope)&&Te(P,!0),e=P.concat(e),Re(n,j)}else k=x,t.html(S);for(e.unshift(C),p=je(e,k,n,a,t,_,l,d,h),D(r,(function(e,n){e===k&&(r[n]=t[0])})),y=be(t[0].childNodes,a);w.length;){var R=w.shift(),I=w.shift(),M=w.shift(),L=w.shift(),N=t[0];if(!R.$$destroyed){if(I!==x){var F=I.className;h.hasElementTranscludeDirective&&_.replace||(N=jt(k)),ze(M,f(I),N),oe(f(N),F)}A=p.transcludeOnThisElement?xe(R,p.transclude,L):L,p(y,R,N,r,A)}}w=null})).catch((function(e){isError(e)&&S(e)})),function(e,t,n,r,a){var l=a;t.$$destroyed||(w?w.push(t,n,r,l):(p.transcludeOnThisElement&&(l=xe(t,p.transclude,a)),p(y,t,n,r,l)))}}function Me(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function Le(e,t,n,r){function a(e){return e?" (module: "+e+")":""}if(t)throw Tn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,a(t.$$moduleName),n.name,a(n.$$moduleName),e,Ae(r))}function Ne(t,n){switch(t=x(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function Fe(e){return ee(N.valueOf(e),"ng-prop-srcset")}function qe(e,t,n,r){if(_.test(r))throw Tn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var a=he(e),l=function(e,t){var n=t.toLowerCase();return R[e+"|"+n]||R["*|"+n]}(a,r),f=V;"srcset"!==r||"img"!==a&&"source"!==a?l&&(f=N.getTrusted.bind(N,l)):f=Fe,t.push({priority:100,compile:function(e,t){var a=I(t[n]),l=I(t[n],(function(e){return N.valueOf(e)}));return{pre:function(e,t){function n(){var n=a(e);t[0][r]=f(n)}n(),e.$watch(l,n)}}}})}function Be(e,t,n){e.push(ia(I,L,S,t,n,!1))}function Ue(e,t,r,a,l){var f=he(e),d=function(e,t){return"srcdoc"===t?N.HTML:"src"===t||"ngSrc"===t?-1===["img","video","audio","source","track"].indexOf(e)?N.RESOURCE_URL:N.MEDIA_URL:"xlinkHref"===t?"image"===e?N.MEDIA_URL:"a"===e?N.URL:N.RESOURCE_URL:"form"===e&&"action"===t||"base"===e&&"href"===t||"link"===e&&"href"===t?N.RESOURCE_URL:"a"!==e||"href"!==t&&"ngHref"!==t?void 0:N.URL}(f,a),h=!l,y=p[a]||l,w=n(r,h,d,y);if(w){if("multiple"===a&&"select"===f)throw Tn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Ae(e));if(_.test(a))throw Tn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");t.push({priority:100,compile:function(){return{pre:function(e,t,l){var f=l.$$observers||(l.$$observers=Ye()),h=l[a];h!==r&&(w=h&&n(h,!0,d,y),r=h),w&&(l[a]=w(e),(f[a]||(f[a]=[])).$$inter=!0,(l.$$observers&&l.$$observers[a].$$scope||e).$watch(w,(function(e,t){"class"===a&&e!==t?l.$updateClass(e,t):l.$set(a,e)})))}}}})}}function ze(t,n,r){var a,l,d=n[0],h=n.length,p=d.parentNode;if(t)for(a=0,l=t.length;a<l;a++)if(t[a]===d){t[a++]=r;for(var y=a,w=y+h-1,x=t.length;y<x;y++,w++)w<x?t[y]=t[w]:delete t[y];t.length-=h-1,t.context===d&&(t.context=r);break}p&&p.replaceChild(r,d);var _=e.document.createDocumentFragment();for(a=0;a<h;a++)_.appendChild(n[a]);for(f.hasData(d)&&(f.data(r,f.data(d)),f(d).off("$destroy")),f.cleanData(_.querySelectorAll("*")),a=1;a<h;a++)delete n[a];n[0]=r,n.length=1}function Ve(e,t){return F((function(){return e.apply(null,arguments)}),e,t)}function Ze(e,t,n,r,a,l){try{e(t,n,r,a,l)}catch(e){S(e,Ae(n))}}function Ge(e,t){if(j)throw Tn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}function Ke(e,t,r,a,l){var f,d=[],h={};function p(t,n,a){ne(r.$onChanges)&&!ve(n,a)&&(B||(e.$$postDigest(Q),B=[]),f||(f={},B.push(y)),f[t]&&(a=f[t].previousValue),f[t]=new Dn(a,n))}function y(){r.$onChanges(f),f=void 0}return D(a,(function(a,f){var y,x,_,S,k,C=a.attrName,E=a.optional;switch(a.mode){case"@":E||w.call(t,C)||(Ge(C,l.name),r[f]=t[C]=void 0),k=t.$observe(C,(function(e){if(J(e)||se(e)){var t=r[f];p(f,e,t),r[f]=e}})),t.$$observers[C].$$scope=e,J(y=t[C])?r[f]=n(y)(e):se(y)&&(r[f]=y),h[f]=new Dn(An,r[f]),d.push(k);break;case"=":if(!w.call(t,C)){if(E)break;Ge(C,l.name),t[C]=void 0}if(E&&!t[C])break;x=I(t[C]),S=x.literal?ye:ve,_=x.assign||function(){throw y=r[f]=x(e),Tn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[C],C,l.name)},y=r[f]=x(e);var O=function(t){return S(t,r[f])||(S(t,y)?_(e,t=r[f]):r[f]=t),y=t};O.$stateful=!0,k=a.collection?e.$watchCollection(t[C],O):e.$watch(I(t[C],O),null,x.literal),d.push(k);break;case"<":if(!w.call(t,C)){if(E)break;Ge(C,l.name),t[C]=void 0}if(E&&!t[C])break;var j=(x=I(t[C])).literal,T=r[f]=x(e);h[f]=new Dn(An,r[f]),k=e[a.collection?"$watchCollection":"$watch"](x,(function(e,t){if(t===e){if(t===T||j&&ye(t,T))return;t=T}p(f,e,t),r[f]=e})),d.push(k);break;case"&":if(E||w.call(t,C)||Ge(C,l.name),(x=t.hasOwnProperty(C)?I(t[C]):z)===z&&E)break;r[f]=function(t){return x(e,t)}}})),{initialChanges:h,removeWatches:d.length&&function(){for(var e=0,t=d.length;e<t;++e)d[e]()}}}}]}function Dn(e,t){this.previousValue=e,this.currentValue=t}Pn.$inject=["$provide","$$sanitizeUriProvider"],Dn.prototype.isFirstChange=function(){return this.previousValue===An};var Rn=/^((?:x|data)[:\-_])/i,In=/[:\-_]+(.)/g;function Mn(e){return e.replace(Rn,"").replace(In,(function(e,t,n){return n?t.toUpperCase():t}))}function Ln(e,t){var n="",r=e.split(/\s+/),a=t.split(/\s+/);e:for(var l=0;l<r.length;l++){for(var f=r[l],d=0;d<a.length;d++)if(f===a[d])continue e;n+=(n.length>0?" ":"")+f}return n}function Nn(e){var t=(e=f(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===et||n.nodeType===Qe&&""===n.nodeValue.trim())&&k.call(e,t,1)}return e}var Fn=a("$controller"),qn=/^(\S+)(\s+as\s+([\w$]+))?$/;function Bn(e,t){if(t&&J(t))return t;if(J(e)){var n=qn.exec(e);if(n)return n[3]}}function Un(){var e={};this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){Ge(t,"controller"),Y(t)?F(e,t):e[t]=n},this.$get=["$injector",function(t){return function(r,a,l,f){var d,h,p,y;if(l=!0===l,f&&J(f)&&(y=f),J(r)){if(!(h=r.match(qn)))throw Fn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(p=h[1],y=y||h[3],r=e.hasOwnProperty(p)?e[p]:function(e,t,n){if(!t)return e;for(var r,a=t.split("."),l=e,f=a.length,d=0;d<f;d++)r=a[d],e&&(e=(l=e)[r]);return!n&&ne(e)?Se(l,e):e}(a.$scope,p,!0),!r)throw Fn("ctrlreg","The controller with the name '{0}' is not registered.",p);Ze(r,p,!0)}if(l){var w=(te(r)?r[r.length-1]:r).prototype;return d=Object.create(w||null),y&&n(a,y,d,p||r.name),F((function(){var e=t.invoke(r,d,a,p);return e!==d&&(Y(e)||ne(e))&&(d=e,y&&n(a,y,d,p||r.name)),d}),{instance:d,identifier:y})}return d=t.instantiate(r,a,p),y&&n(a,y,d,p||r.name),d};function n(e,t,n,r){if(!e||!Y(e.$scope))throw a("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);e.$scope[t]=n}}]}function Hn(){this.$get=["$window",function(e){return f(e.document)}]}function zn(){this.$get=["$document","$rootScope",function(e,t){var n=e[0],r=n&&n.hidden;function a(){r=n.hidden}return e.on("visibilitychange",a),t.$on("$destroy",(function(){e.off("visibilitychange",a)})),function(){return r}}]}function Vn(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}var Wn=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof f&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},Zn="application/json",Gn={"Content-Type":Zn+";charset=utf-8"},Kn=/^\[|^\{(?!\{)/,Yn={"[":/]$/,"{":/}$/},Xn=/^\)]\}',?\n/,Jn=a("$http");function Qn(e){return Y(e)?ee(e)?e.toISOString():Ce(e):e}function er(){this.$get=function(){return function(e){if(!e)return"";var t=[];return R(e,(function(e,n){null===e||G(e)||ne(e)||(te(e)?D(e,(function(e){t.push(Ie(n)+"="+Ie(Qn(e)))})):t.push(Ie(n)+"="+Ie(Qn(e))))})),t.join("&")}}}function tr(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function e(n,r,a){te(n)?D(n,(function(t,n){e(t,r+"["+(Y(t)?n:"")+"]")})):Y(n)&&!ee(n)?R(n,(function(t,n){e(t,r+(a?"":"[")+n+(a?"":"]"))})):(ne(n)&&(n=n()),t.push(Ie(r)+"="+(null==n?"":Ie(Qn(n)))))}(e,"",!0),t.join("&")}}}function nr(e,t){if(J(e)){var n=e.replace(Xn,"").trim();if(n){var r=t("Content-Type"),a=r&&0===r.indexOf(Zn);if(a||(f=(l=n).match(Kn))&&Yn[f[0]].test(l))try{e=Ee(n)}catch(t){if(!a)return e;throw Jn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',e,t)}}}var l,f;return e}function rr(e){var t,n=Ye();function r(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}return J(e)?D(e.split("\n"),(function(e){t=e.indexOf(":"),r(x(ue(e.substr(0,t))),ue(e.substr(t+1)))})):Y(e)&&D(e,(function(e,t){r(x(t),ue(e))})),n}function ir(e){var t;return function(n){if(t||(t=rr(e)),n){var r=t[x(n)];return void 0===r&&(r=null),r}return t}}function or(e,t,n,r){return ne(r)?r(e,t,n):(D(r,(function(r){e=r(e,t,n)})),e)}function ar(e){return 200<=e&&e<300}function sr(){var e=this.defaults={transformResponse:[nr],transformRequest:[function(e){return!Y(e)||(t=e,"[object File]"===E.call(t))||function(e){return"[object Blob]"===E.call(e)}(e)||function(e){return"[object FormData]"===E.call(e)}(e)?e:Ce(e);var t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:rt(Gn),put:rt(Gn),patch:rt(Gn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},t=!1;this.useApplyAsync=function(e){return K(e)?(t=!!e,this):t};var n=this.interceptors=[],r=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(e){this.xsrfTrustedOrigins=e}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(l,f,d,h,p,y,w,S){var k=h("$http");e.paramSerializer=J(e.paramSerializer)?w.get(e.paramSerializer):e.paramSerializer;var C=[];D(n,(function(e){C.unshift(J(e)?w.get(e):w.invoke(e))}));var E,O=(E=[Ei].concat(r.map(ji)),function(e){var t=ji(e);return E.some($i.bind(null,t))});function j(n){if(!Y(n))throw a("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!J(S.valueOf(n.url)))throw a("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var r=F({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},n);r.headers=function(t){var n,r,a,l=e.headers,f=F({},t.headers);l=F({},l.common,l[x(t.method)]);e:for(n in l){for(a in r=x(n),f)if(x(a)===r)continue e;f[n]=l[n]}return function(e,t){var n,r={};return D(e,(function(e,a){ne(e)?null!=(n=e(t))&&(r[a]=n):r[a]=e})),r}(f,rt(t))}(n),r.method=_(r.method),r.paramSerializer=J(r.paramSerializer)?w.get(r.paramSerializer):r.paramSerializer,l.$$incOutstandingRequestCount("$http");var h=[],E=[],T=y.resolve(r);return D(C,(function(e){(e.request||e.requestError)&&h.unshift(e.request,e.requestError),(e.response||e.responseError)&&E.push(e.response,e.responseError)})),T=(T=A(T,h)).then((function(n){var r=n.headers,a=or(n.data,ir(r),void 0,n.transformRequest);G(a)&&D(r,(function(e,t){"content-type"===x(t)&&delete r[t]}));G(n.withCredentials)&&!G(e.withCredentials)&&(n.withCredentials=e.withCredentials);return function(n,r){var a,l,h=y.defer(),w=h.promise,_=n.headers,C="jsonp"===x(n.method),E=n.url;C?E=S.getTrustedResourceUrl(E):J(E)||(E=S.valueOf(E));E=function(e,t){t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t);return e}(E,n.paramSerializer(n.params)),C&&(E=function(e,t){var n=e.split("?");if(n.length>2)throw Jn("badjsonp",'Illegal use more than one "?", in url, "{1}"',e);return D(De(n[1]),(function(n,r){if("JSON_CALLBACK"===n)throw Jn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);if(r===t)throw Jn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e)})),e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK",e}(E,n.jsonpCallbackParam));j.pendingRequests.push(n),w.then(M,M),!n.cache&&!e.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(a=Y(n.cache)?n.cache:Y(e.cache)?e.cache:k);a&&(K(l=a.get(E))?le(l)?l.then(I,I):te(l)?R(l[1],l[0],rt(l[2]),l[3],l[4]):R(l,200,{},"OK","complete"):a.put(E,w));if(G(l)){var T=O(n.url)?d()[n.xsrfCookieName||e.xsrfCookieName]:void 0;T&&(_[n.xsrfHeaderName||e.xsrfHeaderName]=T),f(n.method,E,r,P,_,n.timeout,n.withCredentials,n.responseType,A(n.eventHandlers),A(n.uploadEventHandlers))}return w;function A(e){if(e){var n={};return D(e,(function(e,r){n[r]=function(n){function r(){e(n)}t?p.$applyAsync(r):p.$$phase?r():p.$apply(r)}})),n}}function P(e,n,r,l,f){function d(){R(n,e,r,l,f)}a&&(ar(e)?a.put(E,[e,n,rr(r),l,f]):a.remove(E)),t?p.$applyAsync(d):(d(),p.$$phase||p.$apply())}function R(e,t,r,a,l){(ar(t=t>=-1?t:0)?h.resolve:h.reject)({data:e,status:t,headers:ir(r),config:n,statusText:a,xhrStatus:l})}function I(e){R(e.data,e.status,rt(e.headers()),e.statusText,e.xhrStatus)}function M(){var e=j.pendingRequests.indexOf(n);-1!==e&&j.pendingRequests.splice(e,1)}}(n,a).then(P,P)})),T=(T=A(T,E)).finally((function(){l.$$completeOutstandingRequest(z,"$http")}));function A(e,t){for(var n=0,r=t.length;n<r;){var a=t[n++],l=t[n++];e=e.then(a,l)}return t.length=0,e}function P(e){var t=F({},e);return t.data=or(e.data,e.headers,e.status,r.transformResponse),ar(e.status)?t:y.reject(t)}}return j.pendingRequests=[],function(e){D(arguments,(function(e){j[e]=function(t,n){return j(F({},n||{},{method:e,url:t}))}}))}("get","delete","head","jsonp"),function(e){D(arguments,(function(e){j[e]=function(t,n,r){return j(F({},r||{},{method:e,url:t,data:n}))}}))}("post","put","patch"),j.defaults=e,j}]}function lr(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function cr(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return function(e,t,n,r,a){return function(a,f,d,h,p,y,w,_,S,k){if(f=f||e.url(),"jsonp"===x(a))var C=r.createCallback(f),E=l(f,C,(function(e,t){var n=200===e&&r.getResponse(C);I(h,e,n,"",t,"complete"),r.removeCallback(C)}));else{var O=t(a,f),j=!1;O.open(a,f,!0),D(p,(function(e,t){K(e)&&O.setRequestHeader(t,e)})),O.onload=function(){var e=O.statusText||"",t="response"in O?O.response:O.responseText,n=1223===O.status?204:O.status;0===n&&(n=t?200:"file"===ji(f).protocol?404:0),I(h,n,t,O.getAllResponseHeaders(),e,"complete")};var requestError=function(){I(h,-1,null,null,"","error")},T=function(){I(h,-1,null,null,"",j?"timeout":"abort")},A=function(){I(h,-1,null,null,"","timeout")};if(O.onerror=requestError,O.ontimeout=A,O.onabort=T,D(S,(function(e,t){O.addEventListener(t,e)})),D(k,(function(e,t){O.upload.addEventListener(t,e)})),w&&(O.withCredentials=!0),_)try{O.responseType=_}catch(e){if("json"!==_)throw e}O.send(G(d)?null:d)}if(y>0)var P=n((function(){R("timeout")}),y);else le(y)&&y.then((function(){R(K(y.$$timeoutId)?"timeout":"abort")}));function R(e){j="timeout"===e,E&&E(),O&&O.abort()}function I(e,t,r,a,l,f){K(P)&&n.cancel(P),E=O=null,e(t,r,a,l,f)}};function l(e,t,n){e=e.replace("JSON_CALLBACK",t);var l=a.createElement("script"),f=null;return l.type="text/javascript",l.src=e,l.async=!0,f=function(e){l.removeEventListener("load",f),l.removeEventListener("error",f),a.body.removeChild(l),l=null;var d=-1,h="unknown";e&&("load"!==e.type||r.wasCalled(t)||(e={type:"error"}),h=e.type,d="error"===e.type?404:200),n&&n(d,h)},l.addEventListener("load",f),l.addEventListener("error",f),a.body.appendChild(l),f}}(e,r,e.defer,t,n[0])}]}var ur=T.$interpolateMinErr=a("$interpolate");function fr(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,a){var l=e.length,f=t.length,d=new RegExp(e.replace(/./g,p),"g"),h=new RegExp(t.replace(/./g,p),"g");function p(e){return"\\\\\\"+e}function y(n){return n.replace(d,e).replace(h,t)}function w(e,t,n,r){var a=e.$watch((function(e){return a(),r(e)}),t,n);return a}function x(d,h,p,x){var _=p===a.URL||p===a.MEDIA_URL;if(!d.length||-1===d.indexOf(e)){if(h)return;var S=y(d);_&&(S=a.getTrusted(p,S));var k=W(S);return k.exp=d,k.expressions=[],k.$$watchDelegate=w,k}x=!!x;for(var C,E,O,j,T,A=0,P=[],D=d.length,R=[],I=[];A<D;){if(-1===(C=d.indexOf(e,A))||-1===(E=d.indexOf(t,C+l))){A!==D&&R.push(y(d.substring(A)));break}A!==C&&R.push(y(d.substring(A,C))),j=d.substring(C+l,E),P.push(j),A=E+f,I.push(R.length),R.push("")}T=1===R.length&&1===I.length;var M=_&&T?void 0:function(e){try{return e=p&&!_?a.getTrusted(p,e):a.valueOf(e),x&&!K(e)?e:Xe(e)}catch(e){r(ur.interr(d,e))}};if(O=P.map((function(e){return n(e,M)})),!h||P.length){var L=function(e){for(var t=0,n=P.length;t<n;t++){if(x&&G(e[t]))return;R[I[t]]=e[t]}return _?a.getTrusted(p,T?R[0]:R.join("")):(p&&R.length>1&&ur.throwNoconcat(d),R.join(""))};return F((function(e){var t=0,n=P.length,a=new Array(n);try{for(;t<n;t++)a[t]=O[t](e);return L(a)}catch(e){r(ur.interr(d,e))}}),{exp:d,expressions:P,$$watchDelegate:function(e,t){var n;return e.$watchGroup(O,(function(r,a){var l=L(r);t.call(this,l,r!==a?n:l,e),n=l}))}})}}return x.startSymbol=function(){return e},x.endSymbol=function(){return t},x}]}ur.throwNoconcat=function(e){throw ur("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},ur.interr=function(e,t){return ur("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var dr=a("$interval");function hr(){this.$get=["$$intervalFactory","$window",function(e,t){var n={},r=function(e){t.clearInterval(e),delete n[e]},a=e((function(e,r,a){var l=t.setInterval(e,r);return n[l]=a,l}),r);return a.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$intervalId"))throw dr("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(e.$$intervalId))return!1;var t=e.$$intervalId,a=n[t];return oi(a.promise),a.reject("canceled"),r(t),!0},a}]}function pr(){this.$get=["$browser","$q","$$q","$rootScope",function(e,t,n,r){return function(a,l){return function(f,d,h,p){var y=arguments.length>4,w=y?_e(arguments,4):[],x=0,_=K(p)&&!p,S=(_?n:t).defer(),k=S.promise;function C(){y?f.apply(null,w):f(x)}return h=K(h)?h:0,k.$$intervalId=a((function(){_?e.defer(C):r.$evalAsync(C),S.notify(x++),h>0&&x>=h&&(S.resolve(x),l(k.$$intervalId)),_||r.$apply()}),d,S,_),k}}}]}var mr=function(){this.$get=function(){var e=T.callbacks,t={};return{createCallback:function(n){var r="_"+(e.$$counter++).toString(36),a="angular.callbacks."+r,l=function(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}(r);return t[a]=e[r]=l,a},wasCalled:function(e){return t[e].called},getResponse:function(e){return t[e].data},removeCallback:function(n){var r=t[n];delete e[r.id],delete t[n]}}}},gr=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,vr={http:80,https:443,ftp:21},yr=a("$location");function br(e,t,n){var r,a=(r=[],D(t,(function(e,t){te(e)?D(e,(function(e){r.push(Ie(t,!0)+(!0===e?"":"="+Ie(e,!0)))})):r.push(Ie(t,!0)+(!0===e?"":"="+Ie(e,!0)))})),r.length?r.join("&"):""),l=n?"#"+Re(n):"";return function(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=Re(t[n].replace(/%2F/g,"/"));return t.join("/")}(e)+(a?"?"+a:"")+l}function wr(e,t){var n=ji(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=B(n.port)||vr[n.protocol]||null}var xr=/^\s*[\\/]{2,}/;function _r(e,t,n){if(xr.test(e))throw yr("badpath",'Invalid url "{0}".',e);var r="/"!==e.charAt(0);r&&(e="/"+e);var a=ji(e),l=r&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname;t.$$path=function(e,t){for(var n=e.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),t&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(l,n),t.$$search=De(a.search),t.$$hash=decodeURIComponent(a.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Sr(e,t){return e.slice(0,t.length)===t}function kr(e,t){if(Sr(t,e))return t.substr(e.length)}function Cr(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function Er(e,t,n){this.$$html5=!0,n=n||"",wr(e,this),this.$$parse=function(e){var n=kr(t,e);if(!J(n))throw yr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);_r(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(e){return t+e.substr(1)},this.$$parseLinkUrl=function(r,a){return a&&"#"===a[0]?(this.hash(a.slice(1)),!0):(K(l=kr(e,r))?(f=l,d=n&&K(l=kr(n,l))?t+(kr("/",l)||l):e+f):K(l=kr(t,r))?d=t+l:t===r+"/"&&(d=t),d&&this.$$parse(d),!!d);var l,f,d}}function Or(e,t,n){wr(e,this),this.$$parse=function(r){var a,l=kr(e,r)||kr(t,r);G(l)||"#"!==l.charAt(0)?this.$$html5?a=l:(a="",G(l)&&(e=r,this.replace())):G(a=kr(n,l))&&(a=l),_r(a,this,!1),this.$$path=function(e,t,n){var r,a=/^\/[A-Z]:(\/.*)/;Sr(t,n)&&(t=t.replace(n,""));if(a.exec(t))return e;return(r=a.exec(e))?r[1]:e}(this.$$path,a,e),this.$$compose()},this.$$normalizeUrl=function(t){return e+(t?n+t:"")},this.$$parseLinkUrl=function(t,n){return Cr(e)===Cr(t)&&(this.$$parse(t),!0)}}function jr(e,t,n){this.$$html5=!0,Or.apply(this,arguments),this.$$parseLinkUrl=function(r,a){return a&&"#"===a[0]?(this.hash(a.slice(1)),!0):(e===Cr(r)?l=r:(f=kr(t,r))?l=e+n+f:t===r+"/"&&(l=t),l&&this.$$parse(l),!!l);var l,f},this.$$normalizeUrl=function(t){return e+n+t}}var $r={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=br(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:Tr("$$absUrl"),url:function(e){if(G(e))return this.$$url;var t=gr.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Tr("$$protocol"),host:Tr("$$host"),port:Tr("$$port"),path:Ar("$$path",(function(e){return"/"===(e=null!==e?e.toString():"").charAt(0)?e:"/"+e})),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(J(e)||Q(e))e=e.toString(),this.$$search=De(e);else{if(!Y(e))throw yr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");D(e=ge(e,{}),(function(t,n){null==t&&delete e[n]})),this.$$search=e}break;default:G(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Ar("$$hash",(function(e){return null!==e?e.toString():""})),replace:function(){return this.$$replace=!0,this}};function Tr(e){return function(){return this[e]}}function Ar(e,t){return function(n){return G(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Pr(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return K(t)?(e=t,this):e},this.html5Mode=function(e){return se(e)?(t.enabled=e,this):Y(e)?(se(e.enabled)&&(t.enabled=e.enabled),se(e.requireBase)&&(t.requireBase=e.requireBase),(se(e.rewriteLinks)||J(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,a,l,d){var h,p,y,w,x=r.baseHref(),_=r.url();if(t.enabled){if(!x&&t.requireBase)throw yr("nobase","$location in HTML5 mode requires a <base> tag to be present!");y=(w=_).substring(0,w.indexOf("/",w.indexOf("//")+2))+(x||"/"),p=a.history?Er:jr}else y=Cr(_),p=Or;var S=function(e){return e.substr(0,Cr(e).lastIndexOf("/")+1)}(y);(h=new p(y,S,"#"+e)).$$parseLinkUrl(_,_),h.$$state=r.state();var k=/^\s*(javascript|mailto):/i;function C(e,t,n){var a=h.url(),l=h.$$state;try{r.url(e,t,n),h.$$state=r.state()}catch(e){throw h.url(a),h.$$state=l,e}}l.on("click",(function(e){var a=t.rewriteLinks;if(a&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var d=f(e.target);"a"!==he(d[0]);)if(d[0]===l[0]||!(d=d.parent())[0])return;if(!J(a)||!G(d.attr(a))){var p=d.prop("href"),y=d.attr("href")||d.attr("xlink:href");Y(p)&&"[object SVGAnimatedString]"===p.toString()&&(p=ji(p.animVal).href),k.test(p)||!p||d.attr("target")||e.isDefaultPrevented()||h.$$parseLinkUrl(p,y)&&(e.preventDefault(),h.absUrl()!==r.url()&&n.$apply())}}})),h.absUrl()!==_&&r.url(h.absUrl(),!0);var E=!0;return r.onUrlChange((function(e,t){Sr(e,S)?(n.$evalAsync((function(){var r,a=h.absUrl(),l=h.$$state;h.$$parse(e),h.$$state=t,r=n.$broadcast("$locationChangeStart",e,a,t,l).defaultPrevented,h.absUrl()===e&&(r?(h.$$parse(a),h.$$state=l,C(a,!1,l)):(E=!1,O(a,l)))})),n.$$phase||n.$digest()):d.location.href=e})),n.$watch((function(){if(E||h.$$urlUpdatedByLocation){h.$$urlUpdatedByLocation=!1;var e=r.url(),t=h.absUrl(),l=r.state(),f=h.$$replace,d=!((p=e)===(y=t)||ji(p).href===ji(y).href)||h.$$html5&&a.history&&l!==h.$$state;(E||d)&&(E=!1,n.$evalAsync((function(){var t=h.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,h.$$state,l).defaultPrevented;h.absUrl()===t&&(r?(h.$$parse(e),h.$$state=l):(d&&C(t,f,l===h.$$state?null:h.$$state),O(e,l)))})))}var p,y;h.$$replace=!1})),h;function O(e,t){n.$broadcast("$locationChangeSuccess",h.absUrl(),e,h.$$state,t)}}]}function Dr(){var e=!0,t=this;this.debugEnabled=function(t){return K(t)?(e=t,this):e},this.$get=["$window",function(n){var r,a=l||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),debug:(r=f("debug"),function(){e&&r.apply(t,arguments)})};function f(e){var t=n.console||{},r=t[e]||t.log||z;return function(){var e=[];return D(arguments,(function(t){e.push(function formatError(e){return isError(e)&&(e.stack&&a?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}(t))})),Function.prototype.apply.call(r,t,e)}}}]}D([jr,Or,Er],(function(e){e.prototype=Object.create($r),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Er||!this.$$html5)throw yr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=G(t)?null:t,this.$$urlUpdatedByLocation=!0,this}}));var Rr=a("$parse"),Ir={}.constructor.prototype.valueOf;function Mr(e){return e+""}var Lr=Ye();D("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(e){Lr[e]=!0}));var Nr={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Fr=function(e){this.options=e};Fr.prototype={constructor:Fr,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),a=Lr[t],l=Lr[n],f=Lr[r];if(a||l||f){var d=f?r:l?n:t;this.tokens.push({index:this.index,text:d,operator:!0}),this.index+=d.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=K(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Rr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=x(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,a=!1;this.index<this.text.length;){var l=this.text.charAt(this.index);if(r+=l,a){if("u"===l){var f=this.text.substring(this.index+1,this.index+5);f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,n+=String.fromCharCode(parseInt(f,16))}else{n+=Nr[l]||l}a=!1}else if("\\"===l)a=!0;else{if(l===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=l}this.index++}this.throwError("Unterminated quote",t)}};var qr=function(e,t){this.lexer=e,this.options=t};function Br(e,t){return void 0!==e?e:t}function Ur(e,t){return void 0===e?t:void 0===t?e:e+t}qr.Program="Program",qr.ExpressionStatement="ExpressionStatement",qr.AssignmentExpression="AssignmentExpression",qr.ConditionalExpression="ConditionalExpression",qr.LogicalExpression="LogicalExpression",qr.BinaryExpression="BinaryExpression",qr.UnaryExpression="UnaryExpression",qr.CallExpression="CallExpression",qr.MemberExpression="MemberExpression",qr.Identifier="Identifier",qr.Literal="Literal",qr.ArrayExpression="ArrayExpression",qr.Property="Property",qr.ObjectExpression="ObjectExpression",qr.ThisExpression="ThisExpression",qr.LocalsExpression="LocalsExpression",qr.NGValueParameter="NGValueParameter",qr.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:qr.Program,body:e}},expressionStatement:function(){return{type:qr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!Zr(e))throw Rr("lval","Trying to assign a value to a non l-value");e={type:qr.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:qr.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:qr.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:qr.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:qr.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:qr.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:qr.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:qr.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:qr.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=ge(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:qr.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:qr.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:qr.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:qr.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:qr.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:qr.Identifier,name:e.text}},constant:function(){return{type:qr.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:qr.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:qr.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:qr.ObjectExpression,properties:t}},throwError:function(e,t){throw Rr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Rr("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Rr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,a){if(this.tokens.length>e){var l=this.tokens[e],f=l.text;if(f===t||f===n||f===r||f===a||!t&&!n&&!r&&!a)return l}return!1},expect:function(e,t,n,r){var a=this.peek(e,t,n,r);return!!a&&(this.tokens.shift(),a)},selfReferential:{this:{type:qr.ThisExpression},$locals:{type:qr.LocalsExpression}}};var Hr=1,zr=2;function Vr(e,t,n){var r,a,l,f=e.isPure=function(e,t){switch(e.type){case qr.MemberExpression:if(e.computed)return!1;break;case qr.UnaryExpression:return Hr;case qr.BinaryExpression:return"+"!==e.operator&&Hr;case qr.CallExpression:return!1}return void 0===t?zr:t}(e,n);switch(e.type){case qr.Program:r=!0,D(e.body,(function(e){Vr(e.expression,t,f),r=r&&e.expression.constant})),e.constant=r;break;case qr.Literal:e.constant=!0,e.toWatch=[];break;case qr.UnaryExpression:Vr(e.argument,t,f),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case qr.BinaryExpression:Vr(e.left,t,f),Vr(e.right,t,f),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case qr.LogicalExpression:Vr(e.left,t,f),Vr(e.right,t,f),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case qr.ConditionalExpression:Vr(e.test,t,f),Vr(e.alternate,t,f),Vr(e.consequent,t,f),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case qr.Identifier:e.constant=!1,e.toWatch=[e];break;case qr.MemberExpression:Vr(e.object,t,f),e.computed&&Vr(e.property,t,f),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=e.constant?[]:[e];break;case qr.CallExpression:l=!!e.filter&&function(e,t){return!e(t).$stateful}(t,e.callee.name),r=l,a=[],D(e.arguments,(function(e){Vr(e,t,f),r=r&&e.constant,a.push.apply(a,e.toWatch)})),e.constant=r,e.toWatch=l?a:[e];break;case qr.AssignmentExpression:Vr(e.left,t,f),Vr(e.right,t,f),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case qr.ArrayExpression:r=!0,a=[],D(e.elements,(function(e){Vr(e,t,f),r=r&&e.constant,a.push.apply(a,e.toWatch)})),e.constant=r,e.toWatch=a;break;case qr.ObjectExpression:r=!0,a=[],D(e.properties,(function(e){Vr(e.value,t,f),r=r&&e.value.constant,a.push.apply(a,e.value.toWatch),e.computed&&(Vr(e.key,t,!1),r=r&&e.key.constant,a.push.apply(a,e.key.toWatch))})),e.constant=r,e.toWatch=a;break;case qr.ThisExpression:case qr.LocalsExpression:e.constant=!1,e.toWatch=[]}}function Wr(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length||n[0]!==t?n:void 0}}function Zr(e){return e.type===qr.Identifier||e.type===qr.MemberExpression}function Gr(e){if(1===e.body.length&&Zr(e.body[0].expression))return{type:qr.AssignmentExpression,left:e.body[0].expression,right:{type:qr.NGValueParameter},operator:"="}}function Kr(e){this.$filter=e}function Yr(e){this.$filter=e}function Xr(e,t,n){this.ast=new qr(e,n),this.astCompiler=n.csp?new Yr(t):new Kr(t)}function Jr(e){return ne(e.valueOf)?e.valueOf():Ir.call(e)}function Qr(){var e,t,n=Ye(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){r[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(a){var l={csp:be().noUnsafeEval,literals:ge(r),isIdentifierStart:ne(e)&&e,isIdentifierContinue:ne(t)&&t};return f.$$getAst=function(e){return new Xr(new Fr(l),a,l).getAst(e).ast},f;function f(e,t){var r,f;switch(typeof e){case"string":if(e=e.trim(),!(r=n[f=e]))r=new Xr(new Fr(l),a,l).parse(e),n[f]=x(r);return _(r,t);case"function":return _(e,t);default:return _(z,t)}}function d(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=Jr(e))&&!n)&&(e===t||e!=e&&t!=t)}function h(e,t,n,r,a){var l,f=r.inputs;if(1===f.length){var h=d;return f=f[0],e.$watch((function(e){var t=f(e);return d(t,h,f.isPure)||(l=r(e,void 0,void 0,[t]),h=t&&Jr(t)),l}),t,n,a)}for(var p=[],y=[],w=0,x=f.length;w<x;w++)p[w]=d,y[w]=null;return e.$watch((function(e){for(var t=!1,n=0,a=f.length;n<a;n++){var h=f[n](e);(t||(t=!d(h,p[n],f[n].isPure)))&&(y[n]=h,p[n]=h&&Jr(h))}return t&&(l=r(e,void 0,void 0,y)),l}),t,n,a)}function p(e,t,n,r,a){var l,f,d=r.literal?y:K,h=r.$$intercepted||r,p=r.$$interceptor||V,w=r.inputs&&!h.inputs;return S.literal=r.literal,S.constant=r.constant,S.inputs=r.inputs,x(S),l=e.$watch(S,t,n,a);function _(){d(f)&&l()}function S(e,t,n,r){return f=w&&r?r[0]:h(e,t,n,r),d(f)&&e.$$postDigest(_),p(f)}}function y(e){var t=!0;return D(e,(function(e){K(e)||(t=!1)})),t}function w(e,t,n,r){var a=e.$watch((function(e){return a(),r(e)}),t,n);return a}function x(e){return e.constant?e.$$watchDelegate=w:e.oneTime?e.$$watchDelegate=p:e.inputs&&(e.$$watchDelegate=h),e}function _(e,t){if(!t)return e;e.$$interceptor&&(t=function(e,t){function n(n){return t(e(n))}return n.$stateful=e.$stateful||t.$stateful,n.$$pure=e.$$pure&&t.$$pure,n}(e.$$interceptor,t),e=e.$$intercepted);var n=!1,r=function(r,a,l,f){var d=n&&f?f[0]:e(r,a,l,f);return t(d)};return r.$$intercepted=e,r.$$interceptor=t,r.literal=e.literal,r.oneTime=e.oneTime,r.constant=e.constant,t.$stateful||(n=!e.inputs,r.inputs=e.inputs?e.inputs:[e],t.$$pure||(r.inputs=r.inputs.map((function(e){return e.isPure===zr?function(t){return e(t)}:e})))),x(r)}}]}function ei(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return ni((function(e){t.$evalAsync(e)}),n,e)}],this.errorOnUnhandledRejections=function(t){return K(t)?(e=t,this):e}}function ti(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return ni((function(e){t.defer(e)}),n,e)}],this.errorOnUnhandledRejections=function(t){return K(t)?(e=t,this):e}}function ni(e,t,n){var r=a("$q",TypeError),l=0,f=[];function d(){return new h}function h(){var e=this.promise=new p;this.resolve=function(t){x(e,t)},this.reject=function(t){S(e,t)},this.notify=function(t){C(e,t)}}function p(){this.$$state={status:0}}function y(){for(;!l&&f.length;){var e=f.shift();if(!ri(e)){ii(e);var n="Possibly unhandled rejection: "+it(e.value);isError(e.value)?t(e.value,n):t(n)}}}function w(r){!n||r.pending||2!==r.status||ri(r)||(0===l&&0===f.length&&e(y),f.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++l,e((function(){!function(r){var a,f,d;d=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var h=0,p=d.length;h<p;++h){ii(r),f=d[h][0],a=d[h][r.status];try{ne(a)?x(f,a(r.value)):1===r.status?x(f,r.value):S(f,r.value)}catch(e){S(f,e),e&&!0===e.$$passToExceptionHandler&&t(e)}}}finally{--l,n&&0===l&&e(y)}}(r)})))}function x(e,t){e.$$state.status||(t===e?k(e,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):_(e,t))}function _(e,t){var n,r=!1;try{(Y(t)||ne(t))&&(n=t.then),ne(n)?(e.$$state.status=-1,n.call(t,(function(t){if(r)return;r=!0,_(e,t)}),a,(function(t){C(e,t)}))):(e.$$state.value=t,e.$$state.status=1,w(e.$$state))}catch(e){a(e)}function a(t){r||(r=!0,k(e,t))}}function S(e,t){e.$$state.status||k(e,t)}function k(e,t){e.$$state.value=t,e.$$state.status=2,w(e.$$state)}function C(n,r){var a=n.$$state.pending;n.$$state.status<=0&&a&&a.length&&e((function(){for(var e,n,l=0,f=a.length;l<f;l++){n=a[l][0],e=a[l][3];try{C(n,ne(e)?e(r):r)}catch(e){t(e)}}}))}function E(e){var t=new p;return S(t,e),t}function O(e,t,n){var r=null;try{ne(n)&&(r=n())}catch(e){return E(e)}return le(r)?r.then((function(){return t(e)}),E):t(e)}function j(e,t,n,r){var a=new p;return x(a,e),a.then(t,n,r)}F(p.prototype,{then:function(e,t,n){if(G(e)&&G(t)&&G(n))return this;var r=new p;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&w(this.$$state),r},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then((function(t){return O(t,T,e)}),(function(t){return O(t,E,e)}),t)}});var T=j;function A(e){if(!ne(e))throw r("norslvr","Expected resolverFn, got '{0}'",e);var t=new p;return e((function(e){x(t,e)}),(function(e){S(t,e)})),t}return A.prototype=p.prototype,A.defer=d,A.reject=E,A.when=j,A.resolve=T,A.all=function(e){var t=new p,n=0,r=te(e)?[]:{};return D(e,(function(e,a){n++,j(e).then((function(e){r[a]=e,--n||x(t,r)}),(function(e){S(t,e)}))})),0===n&&x(t,r),t},A.race=function(e){var t=d();return D(e,(function(e){j(e).then(t.resolve,t.reject)})),t.promise},A}function ri(e){return!!e.pur}function ii(e){e.pur=!0}function oi(e){e.$$state&&ii(e.$$state)}function ai(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,a=!!n,l=a?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return l.supported=a,l}]}function si(){var e=10,t=a("$rootScope"),n=null,r=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$exceptionHandler","$parse","$browser",function(a,f,d){function h(e){e.currentScope.$$destroyed=!0}function p(e){9===l&&(e.$$childHead&&p(e.$$childHead),e.$$nextSibling&&p(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function y(){this.$id=M(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}y.prototype={constructor:y,$new:function(e,t){var n;return t=t||this,e?(n=new y).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=M(),this.$$ChildScope=null,this.$$suspended=!1}return t.prototype=e,t}(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!==this)&&n.$on("$destroy",h),n},$watch:function(e,t,r,a){var l=f(e),d=ne(t)?t:z;if(l.$$watchDelegate)return l.$$watchDelegate(this,d,r,l,e);var h=this,p=h.$$watchers,y={fn:d,last:A,get:l,exp:a||e,eq:!!r};return n=null,p||((p=h.$$watchers=[]).$$digestWatchIndex=-1),p.unshift(y),p.$$digestWatchIndex++,j(this,1),function(){var e=me(p,y);e>=0&&(j(h,-1),e<p.$$digestWatchIndex&&p.$$digestWatchIndex--),n=null}},$watchGroup:function(e,t){var n=new Array(e.length),r=new Array(e.length),a=[],l=this,f=!1,d=!0;if(!e.length){var h=!0;return l.$evalAsync((function(){h&&t(r,r,l)})),function(){h=!1}}if(1===e.length)return this.$watch(e[0],(function(e,a,l){r[0]=e,n[0]=a,t(r,e===a?r:n,l)}));function p(){f=!1;try{d?(d=!1,t(r,r,l)):t(r,n,l)}finally{for(var a=0;a<e.length;a++)n[a]=r[a]}}return D(e,(function(e,t){var n=l.$watch(e,(function(e){r[t]=e,f||(f=!0,l.$evalAsync(p))}));a.push(n)})),function(){for(;a.length;)a.shift()()}},$watchCollection:function(e,t){k.$$pure=f(e).literal,k.$stateful=!k.$$pure;var n,r,a,l=this,d=t.length>1,h=0,p=f(e,k),y=[],x={},_=!0,S=0;function k(e){var t,a,l,f;if(!G(n=e)){if(Y(n))if(P(n)){r!==y&&(S=(r=y).length=0,h++),t=n.length,S!==t&&(h++,r.length=S=t);for(var d=0;d<t;d++)f=r[d],l=n[d],f!=f&&l!=l||f===l||(h++,r[d]=l)}else{for(a in r!==x&&(r=x={},S=0,h++),t=0,n)w.call(n,a)&&(t++,l=n[a],f=r[a],a in r?f!=f&&l!=l||f===l||(h++,r[a]=l):(S++,r[a]=l,h++));if(S>t)for(a in h++,r)w.call(n,a)||(S--,delete r[a])}else r!==n&&(r=n,h++);return h}}return this.$watch(p,(function(){if(_?(_=!1,t(n,n,l)):t(n,a,l),d)if(Y(n))if(P(n)){a=new Array(n.length);for(var e=0;e<n.length;e++)a[e]=n[e]}else for(var r in a={},n)w.call(n,r)&&(a[r]=n[r]);else a=n}))},$digest:function(){var l,f,h,p,y,w,k,j,T,P=e,D=_.length?x:this,I=[];E("$digest"),d.$$checkUrlChange(),this===x&&null!==r&&(d.defer.cancel(r),R()),n=null;do{y=!1,k=D;for(var M=0;M<_.length;M++){try{(0,(T=_[M]).fn)(T.scope,T.locals)}catch(e){a(e)}n=null}_.length=0;e:do{if(p=!k.$$suspended&&k.$$watchers)for(p.$$digestWatchIndex=p.length;p.$$digestWatchIndex--;)try{if(l=p[p.$$digestWatchIndex])if((f=(0,l.get)(k))===(h=l.last)||(l.eq?ye(f,h):U(f)&&U(h))){if(l===n){y=!1;break e}}else y=!0,n=l,l.last=l.eq?ge(f,null):f,(0,l.fn)(f,h===A?f:h,k),P<5&&(I[j=4-P]||(I[j]=[]),I[j].push({msg:ne(l.exp)?"fn: "+(l.exp.name||l.exp.toString()):l.exp,newVal:f,oldVal:h}))}catch(e){a(e)}if(!(w=!k.$$suspended&&k.$$watchersCount&&k.$$childHead||k!==D&&k.$$nextSibling))for(;k!==D&&!(w=k.$$nextSibling);)k=k.$parent}while(k=w);if((y||_.length)&&!P--)throw O(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,I)}while(y||_.length);for(O();C<S.length;)try{S[C++]()}catch(e){a(e)}S.length=C=0,d.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;for(var t in this.$broadcast("$destroy"),this.$$destroyed=!0,this===x&&d.$$applicationDestroyed(),j(this,-this.$$watchersCount),this.$$listenerCount)T(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=z,this.$on=this.$watch=this.$watchGroup=function(){return z},this.$$listeners={},this.$$nextSibling=null,p(this)}},$eval:function(e,t){return f(e)(this,t)},$evalAsync:function(e,t){x.$$phase||_.length||d.defer((function(){_.length&&x.$digest()}),null,"$evalAsync"),_.push({scope:this,fn:f(e),locals:t})},$$postDigest:function(e){S.push(e)},$apply:function(e){try{E("$apply");try{return this.$eval(e)}finally{O()}}catch(e){a(e)}finally{try{x.$digest()}catch(e){throw a(e),e}}},$applyAsync:function(e){var t=this;e&&k.push((function(){t.$eval(e)})),e=f(e),null===r&&(r=d.defer((function(){x.$apply(R)}),null,"$applyAsync"))},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do{r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++}while(r=r.$parent);var a=this;return function(){var r=n.indexOf(t);-1!==r&&(delete n[r],T(a,1,e))}},$emit:function(e,t){var n,r,l,f=[],d=this,h=!1,p={name:e,targetScope:d,stopPropagation:function(){h=!0},preventDefault:function(){p.defaultPrevented=!0},defaultPrevented:!1},y=xe([p],arguments,1);do{for(n=d.$$listeners[e]||f,p.currentScope=d,r=0,l=n.length;r<l;r++)if(n[r])try{n[r].apply(null,y)}catch(e){a(e)}else n.splice(r,1),r--,l--;if(h)break;d=d.$parent}while(d);return p.currentScope=null,p},$broadcast:function(e,t){var n=this,r=n,l=n,f={name:e,targetScope:n,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return f;for(var d,h,p,y=xe([f],arguments,1);r=l;){for(f.currentScope=r,h=0,p=(d=r.$$listeners[e]||[]).length;h<p;h++)if(d[h])try{d[h].apply(null,y)}catch(e){a(e)}else d.splice(h,1),h--,p--;if(!(l=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(l=r.$$nextSibling);)r=r.$parent}return f.currentScope=null,f}};var x=new y,_=x.$$asyncQueue=[],S=x.$$postDigestQueue=[],k=x.$$applyAsyncQueue=[],C=0;return x;function E(e){if(x.$$phase)throw t("inprog","{0} already in progress",x.$$phase);x.$$phase=e}function O(){x.$$phase=null}function j(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function T(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function A(){}function R(){for(;k.length;)try{k.shift()()}catch(e){a(e)}r=null}}]}function li(){var e=/^\s*(https?|s?ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(t){return K(t)?(e=t,this):e},this.imgSrcSanitizationTrustedUrlList=function(e){return K(e)?(t=e,this):t},this.$get=function(){return function(n,r){var a=r?t:e,l=ji(n&&n.trim()).href;return""===l||l.match(a)?n:"unsafe:"+l}}}Kr.prototype={compile:function(e){var t=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Vr(e,t.$filter);var n,r="";if(this.stage="assign",n=Gr(e)){this.state.computing="assign";var a=this.nextId();this.recurse(n,a),this.return_(a),r="fn.assign="+this.generateFunction("assign","s,v,l")}var l=Wr(e.body);t.stage="inputs",D(l,(function(e,n){var r="fn"+n;t.state[r]={vars:[],body:[],own:{}},t.state.computing=r;var a=t.nextId();t.recurse(e,a),t.return_(a),t.state.inputs.push({name:r,isPure:e.isPure}),e.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(e);var f='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",d=new Function("$filter","getStringValue","ifDefined","plus",f)(this.$filter,Mr,Br,Ur);return this.state=this.stage=void 0,d},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return D(t,(function(t){e.push("var "+t.name+"="+n.generateFunction(t.name,"s")),t.isPure&&e.push(t.name,".isPure="+JSON.stringify(t.isPure)+";")})),t.length&&e.push("fn.inputs=["+t.map((function(e){return e.name})).join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return D(this.state.filters,(function(n,r){e.push(n+"=$filter("+t.escape(r)+")")})),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,r,a,l){var f,d,h,p,y,w=this;if(r=r||z,!l&&K(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,r,a,!0));switch(e.type){case qr.Program:D(e.body,(function(t,n){w.recurse(t.expression,void 0,void 0,(function(e){d=e})),n!==e.body.length-1?w.current().body.push(d,";"):w.return_(d)}));break;case qr.Literal:p=this.escape(e.value),this.assign(t,p),r(t||p);break;case qr.UnaryExpression:this.recurse(e.argument,void 0,void 0,(function(e){d=e})),p=e.operator+"("+this.ifDefined(d,0)+")",this.assign(t,p),r(p);break;case qr.BinaryExpression:this.recurse(e.left,void 0,void 0,(function(e){f=e})),this.recurse(e.right,void 0,void 0,(function(e){d=e})),p="+"===e.operator?this.plus(f,d):"-"===e.operator?this.ifDefined(f,0)+e.operator+this.ifDefined(d,0):"("+f+")"+e.operator+"("+d+")",this.assign(t,p),r(p);break;case qr.LogicalExpression:t=t||this.nextId(),w.recurse(e.left,t),w.if_("&&"===e.operator?t:w.not(t),w.lazyRecurse(e.right,t)),r(t);break;case qr.ConditionalExpression:t=t||this.nextId(),w.recurse(e.test,t),w.if_(t,w.lazyRecurse(e.alternate,t),w.lazyRecurse(e.consequent,t)),r(t);break;case qr.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===w.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),w.if_("inputs"===w.stage||w.not(w.getHasOwnProperty("l",e.name)),(function(){w.if_("inputs"===w.stage||"s",(function(){a&&1!==a&&w.if_(w.isNull(w.nonComputedMember("s",e.name)),w.lazyAssign(w.nonComputedMember("s",e.name),"{}")),w.assign(t,w.nonComputedMember("s",e.name))}))}),t&&w.lazyAssign(t,w.nonComputedMember("l",e.name))),r(t);break;case qr.MemberExpression:f=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),w.recurse(e.object,f,void 0,(function(){w.if_(w.notNull(f),(function(){e.computed?(d=w.nextId(),w.recurse(e.property,d),w.getStringValue(d),a&&1!==a&&w.if_(w.not(w.computedMember(f,d)),w.lazyAssign(w.computedMember(f,d),"{}")),p=w.computedMember(f,d),w.assign(t,p),n&&(n.computed=!0,n.name=d)):(a&&1!==a&&w.if_(w.isNull(w.nonComputedMember(f,e.property.name)),w.lazyAssign(w.nonComputedMember(f,e.property.name),"{}")),p=w.nonComputedMember(f,e.property.name),w.assign(t,p),n&&(n.computed=!1,n.name=e.property.name))}),(function(){w.assign(t,"undefined")})),r(t)}),!!a);break;case qr.CallExpression:t=t||this.nextId(),e.filter?(d=w.filter(e.callee.name),h=[],D(e.arguments,(function(e){var t=w.nextId();w.recurse(e,t),h.push(t)})),p=d+"("+h.join(",")+")",w.assign(t,p),r(t)):(d=w.nextId(),f={},h=[],w.recurse(e.callee,d,f,(function(){w.if_(w.notNull(d),(function(){D(e.arguments,(function(t){w.recurse(t,e.constant?void 0:w.nextId(),void 0,(function(e){h.push(e)}))})),p=f.name?w.member(f.context,f.name,f.computed)+"("+h.join(",")+")":d+"("+h.join(",")+")",w.assign(t,p)}),(function(){w.assign(t,"undefined")})),r(t)})));break;case qr.AssignmentExpression:d=this.nextId(),f={},this.recurse(e.left,void 0,f,(function(){w.if_(w.notNull(f.context),(function(){w.recurse(e.right,d),p=w.member(f.context,f.name,f.computed)+e.operator+d,w.assign(t,p),r(t||p)}))}),1);break;case qr.ArrayExpression:h=[],D(e.elements,(function(t){w.recurse(t,e.constant?void 0:w.nextId(),void 0,(function(e){h.push(e)}))})),p="["+h.join(",")+"]",this.assign(t,p),r(t||p);break;case qr.ObjectExpression:h=[],y=!1,D(e.properties,(function(e){e.computed&&(y=!0)})),y?(t=t||this.nextId(),this.assign(t,"{}"),D(e.properties,(function(e){e.computed?(f=w.nextId(),w.recurse(e.key,f)):f=e.key.type===qr.Identifier?e.key.name:""+e.key.value,d=w.nextId(),w.recurse(e.value,d),w.assign(w.member(t,f,e.computed),d)}))):(D(e.properties,(function(t){w.recurse(t.value,e.constant?void 0:w.nextId(),void 0,(function(e){h.push(w.escape(t.key.type===qr.Identifier?t.key.name:""+t.key.value)+":"+e)}))})),p="{"+h.join(",")+"}",this.assign(t,p)),r(t||p);break;case qr.ThisExpression:this.assign(t,"s"),r(t||"s");break;case qr.LocalsExpression:this.assign(t,"l"),r(t||"l");break;case qr.NGValueParameter:this.assign(t,"v"),r(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,a,l){var f=this;return function(){f.recurse(e,t,n,r,a,l)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(J(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(Q(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw Rr("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Yr.prototype={compile:function(e){var t,n,r=this;Vr(e,r.$filter),(t=Gr(e))&&(n=this.recurse(t));var a,l=Wr(e.body);l&&(a=[],D(l,(function(e,t){var n=r.recurse(e);n.isPure=e.isPure,e.input=n,a.push(n),e.watchId=t})));var f=[];D(e.body,(function(e){f.push(r.recurse(e.expression))}));var d=0===e.body.length?z:1===e.body.length?f[0]:function(e,t){var n;return D(f,(function(r){n=r(e,t)})),n};return n&&(d.assign=function(e,t,r){return n(e,r,t)}),a&&(d.inputs=a),d},recurse:function(e,t,n){var r,a,l,f=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case qr.Literal:return this.value(e.value,t);case qr.UnaryExpression:return a=this.recurse(e.argument),this["unary"+e.operator](a,t);case qr.BinaryExpression:case qr.LogicalExpression:return r=this.recurse(e.left),a=this.recurse(e.right),this["binary"+e.operator](r,a,t);case qr.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case qr.Identifier:return f.identifier(e.name,t,n);case qr.MemberExpression:return r=this.recurse(e.object,!1,!!n),e.computed||(a=e.property.name),e.computed&&(a=this.recurse(e.property)),e.computed?this.computedMember(r,a,t,n):this.nonComputedMember(r,a,t,n);case qr.CallExpression:return l=[],D(e.arguments,(function(e){l.push(f.recurse(e))})),e.filter&&(a=this.$filter(e.callee.name)),e.filter||(a=this.recurse(e.callee,!0)),e.filter?function(e,n,r,f){for(var d=[],h=0;h<l.length;++h)d.push(l[h](e,n,r,f));var p=a.apply(void 0,d,f);return t?{context:void 0,name:void 0,value:p}:p}:function(e,n,r,f){var d,h=a(e,n,r,f);if(null!=h.value){for(var p=[],y=0;y<l.length;++y)p.push(l[y](e,n,r,f));d=h.value.apply(h.context,p)}return t?{value:d}:d};case qr.AssignmentExpression:return r=this.recurse(e.left,!0,1),a=this.recurse(e.right),function(e,n,l,f){var d=r(e,n,l,f),h=a(e,n,l,f);return d.context[d.name]=h,t?{value:h}:h};case qr.ArrayExpression:return l=[],D(e.elements,(function(e){l.push(f.recurse(e))})),function(e,n,r,a){for(var f=[],d=0;d<l.length;++d)f.push(l[d](e,n,r,a));return t?{value:f}:f};case qr.ObjectExpression:return l=[],D(e.properties,(function(e){e.computed?l.push({key:f.recurse(e.key),computed:!0,value:f.recurse(e.value)}):l.push({key:e.key.type===qr.Identifier?e.key.name:""+e.key.value,computed:!1,value:f.recurse(e.value)})})),function(e,n,r,a){for(var f={},d=0;d<l.length;++d)l[d].computed?f[l[d].key(e,n,r,a)]=l[d].value(e,n,r,a):f[l[d].key]=l[d].value(e,n,r,a);return t?{value:f}:f};case qr.ThisExpression:return function(e){return t?{value:e}:e};case qr.LocalsExpression:return function(e,n){return t?{value:n}:n};case qr.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,a,l){var f=e(n,r,a,l);return f=K(f)?+f:0,t?{value:f}:f}},"unary-":function(e,t){return function(n,r,a,l){var f=e(n,r,a,l);return f=K(f)?-f:-0,t?{value:f}:f}},"unary!":function(e,t){return function(n,r,a,l){var f=!e(n,r,a,l);return t?{value:f}:f}},"binary+":function(e,t,n){return function(r,a,l,f){var d=Ur(e(r,a,l,f),t(r,a,l,f));return n?{value:d}:d}},"binary-":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f),h=t(r,a,l,f),p=(K(d)?d:0)-(K(h)?h:0);return n?{value:p}:p}},"binary*":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)*t(r,a,l,f);return n?{value:d}:d}},"binary/":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)/t(r,a,l,f);return n?{value:d}:d}},"binary%":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)%t(r,a,l,f);return n?{value:d}:d}},"binary===":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)===t(r,a,l,f);return n?{value:d}:d}},"binary!==":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)!==t(r,a,l,f);return n?{value:d}:d}},"binary==":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)==t(r,a,l,f);return n?{value:d}:d}},"binary!=":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)!=t(r,a,l,f);return n?{value:d}:d}},"binary<":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)<t(r,a,l,f);return n?{value:d}:d}},"binary>":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)>t(r,a,l,f);return n?{value:d}:d}},"binary<=":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)<=t(r,a,l,f);return n?{value:d}:d}},"binary>=":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)>=t(r,a,l,f);return n?{value:d}:d}},"binary&&":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)&&t(r,a,l,f);return n?{value:d}:d}},"binary||":function(e,t,n){return function(r,a,l,f){var d=e(r,a,l,f)||t(r,a,l,f);return n?{value:d}:d}},"ternary?:":function(e,t,n,r){return function(a,l,f,d){var h=e(a,l,f,d)?t(a,l,f,d):n(a,l,f,d);return r?{value:h}:h}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(r,a,l,f){var d=a&&e in a?a:r;n&&1!==n&&d&&null==d[e]&&(d[e]={});var h=d?d[e]:void 0;return t?{context:d,name:e,value:h}:h}},computedMember:function(e,t,n,r){return function(a,l,f,d){var h,p,y=e(a,l,f,d);return null!=y&&(h=Mr(h=t(a,l,f,d)),r&&1!==r&&y&&!y[h]&&(y[h]={}),p=y[h]),n?{context:y,name:h,value:p}:p}},nonComputedMember:function(e,t,n,r){return function(a,l,f,d){var h=e(a,l,f,d);r&&1!==r&&h&&null==h[t]&&(h[t]={});var p=null!=h?h[t]:void 0;return n?{context:h,name:t,value:p}:p}},inputs:function(e,t){return function(n,r,a,l){return l?l[t]:e(n,r,a)}}},Xr.prototype={constructor:Xr,parse:function(e){var t=this.getAst(e),n=this.astCompiler.compile(t.ast);return n.literal=function(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===qr.Literal||e.body[0].expression.type===qr.ArrayExpression||e.body[0].expression.type===qr.ObjectExpression)}(t.ast),n.constant=function(e){return e.constant}(t.ast),n.oneTime=t.oneTime,n},getAst:function(e){var t=!1;return":"===(e=e.trim()).charAt(0)&&":"===e.charAt(1)&&(t=!0,e=e.substring(2)),{ast:this.ast.ast(e),oneTime:t}}};var ci=a("$sce"),ui={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},fi=/_([a-z])/g;function di(e){return e.replace(fi,dt)}function hi(e){var t=[];return K(e)&&D(e,(function(e){t.push(function(e){if("self"===e)return e;if(J(e)){if(e.indexOf("***")>-1)throw ci("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=fe(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(re(e))return new RegExp("^"+e.source+"$");throw ci("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))})),t}function pi(){this.SCE_CONTEXTS=ui;var t=["self"],n=[];this.trustedResourceUrlList=function(e){return arguments.length&&(t=hi(e)),t},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(e){this.trustedResourceUrlList=e}}),this.bannedResourceUrlList=function(e){return arguments.length&&(n=hi(e)),n},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(e){this.bannedResourceUrlList=e}}),this.$get=["$injector","$$sanitizeUri",function(r,a){var l=function(e){throw ci("unsafe","Attempting to use an unsafe value in a safe context.")};function f(t,n){return"self"===t?$i(n,Ei)||function(t){return $i(t,function(){if(e.document.baseURI)return e.document.baseURI;ki||((ki=e.document.createElement("a")).href=".",ki=ki.cloneNode(!1));return ki.href}())}(n):!!t.exec(n.href)}function d(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}r.has("$sanitize")&&(l=r.get("$sanitize"));var h=d(),p={};return p[ui.HTML]=d(h),p[ui.CSS]=d(h),p[ui.MEDIA_URL]=d(h),p[ui.URL]=d(p[ui.MEDIA_URL]),p[ui.JS]=d(h),p[ui.RESOURCE_URL]=d(p[ui.URL]),{trustAs:function(e,t){var n=p.hasOwnProperty(e)?p[e]:null;if(!n)throw ci("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||G(t)||""===t)return t;if("string"!=typeof t)throw ci("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(e,r){if(null===r||G(r)||""===r)return r;var d=p.hasOwnProperty(e)?p[e]:null;if(d&&r instanceof d)return r.$$unwrapTrustedValue();if(ne(r.$$unwrapTrustedValue)&&(r=r.$$unwrapTrustedValue()),e===ui.MEDIA_URL||e===ui.URL)return a(r.toString(),e===ui.MEDIA_URL);if(e===ui.RESOURCE_URL){if(function(e){var r,a,l=ji(e.toString()),d=!1;for(r=0,a=t.length;r<a;r++)if(f(t[r],l)){d=!0;break}if(d)for(r=0,a=n.length;r<a;r++)if(f(n[r],l)){d=!1;break}return d}(r))return r;throw ci("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",r.toString())}if(e===ui.HTML)return l(r);throw ci("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof h?e.$$unwrapTrustedValue():e}}}]}function mi(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&l<8)throw ci("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=rt(ui);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=V),r.parseAs=function(e,n){var a=t(n);return a.literal&&a.constant?a:t(n,(function(t){return r.getTrusted(e,t)}))};var a=r.parseAs,f=r.getTrusted,d=r.trustAs;return D(ui,(function(e,t){var n=x(t);r[di("parse_as_"+n)]=function(t){return a(e,t)},r[di("get_trusted_"+n)]=function(t){return f(e,t)},r[di("trust_as_"+n)]=function(t){return d(e,t)}})),r}]}function gi(){this.$get=["$window","$document",function(e,t){var n={},r=!(!(e.nw&&e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,a=B((/android (\d+)/.exec(x((e.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((e.navigator||{}).userAgent),d=t[0]||{},h=d.body&&d.body.style,p=!1,y=!1;return h&&(p=!(!("transition"in h)&&!("webkitTransition"in h)),y=!(!("animation"in h)&&!("webkitAnimation"in h))),{history:!(!r||a<4||f),hasEvent:function(e){if("input"===e&&l)return!1;if(G(n[e])){var t=d.createElement("div");n[e]="on"+e in t}return n[e]},csp:be(),transitions:p,animations:y,android:a}}]}function vi(){this.$get=W((function(e){return new yi(e)}))}function yi(e){var t=this,n={},r=[],a=t.ALL_TASKS_TYPE="$$all$$",l=t.DEFAULT_TASK_TYPE="$$default$$";function f(){var e=r.pop();return e&&e.cb}function d(e){for(var t=r.length-1;t>=0;--t){var n=r[t];if(n.type===e)return r.splice(t,1),n.cb}}t.completeTask=function(t,r){r=r||l;try{t()}finally{!function(e){e=e||l,n[e]&&(n[e]--,n[a]--)}(r);var h=n[r],p=n[a];if(!p||!h)for(var y,w=p?d:f;y=w(r);)try{y()}catch(t){e.error(t)}}},t.incTaskCount=function(e){n[e=e||l]=(n[e]||0)+1,n[a]=(n[a]||0)+1},t.notifyWhenNoPendingTasks=function(e,t){n[t=t||a]?r.push({type:t,cb:e}):e()}}var bi=a("$templateRequest");function wi(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,r,a,l){function f(d,h){f.totalPendingRequests++,J(d)&&!G(n.get(d))||(d=l.getTrustedResourceUrl(d));var p=r.defaults&&r.defaults.transformResponse;return te(p)?p=p.filter((function(e){return e!==nr})):p===nr&&(p=null),r.get(d,F({cache:n,transformResponse:p},e)).finally((function(){f.totalPendingRequests--})).then((function(e){return n.put(d,e.data)}),(function handleError(e){h||(e=bi("tpload","Failed to load template: {0} (HTTP status: {1} {2})",d,e.status,e.statusText),t(e));return a.reject(e)}))}return f.totalPendingRequests=0,f}]}function xi(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={findBindings:function(e,t,n){var r=e.getElementsByClassName("ng-binding"),a=[];return D(r,(function(e){var r=T.element(e).data("$binding");r&&D(r,(function(r){n?new RegExp("(^|\\s)"+fe(t)+"(\\s|\\||$)").test(r)&&a.push(e):-1!==r.indexOf(t)&&a.push(e)}))})),a},findModels:function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],a=0;a<r.length;++a){var l="["+r[a]+"model"+(n?"=":"*=")+'"'+t+'"]',f=e.querySelectorAll(l);if(f.length)return f}},getLocation:function(){return n.url()},setLocation:function(t){t!==n.url()&&(n.url(t),e.$digest())},whenStable:function(e){t.notifyWhenNoOutstandingRequests(e)}};return r}]}var _i=a("$timeout");function Si(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,a){var l={};function f(f,d,h){ne(f)||(h=d,d=f,f=z);var p,y=_e(arguments,3),w=K(h)&&!h,x=(w?r:n).defer(),_=x.promise;return p=t.defer((function(){try{x.resolve(f.apply(null,y))}catch(e){x.reject(e),a(e)}finally{delete l[_.$$timeoutId]}w||e.$apply()}),d,"$timeout"),_.$$timeoutId=p,l[p]=x,_}return f.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$timeoutId"))throw _i("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!l.hasOwnProperty(e.$$timeoutId))return!1;var n=e.$$timeoutId,r=l[n];return oi(r.promise),r.reject("canceled"),delete l[n],t.defer.cancel(n)},f}]}var ki,Ci=e.document.createElement("a"),Ei=ji(e.location.href);Ci.href="http://[::1]";var Oi="[::1]"===Ci.hostname;function ji(e){if(!J(e))return e;var t=e;l&&(Ci.setAttribute("href",t),t=Ci.href),Ci.setAttribute("href",t);var n=Ci.hostname;return!Oi&&n.indexOf(":")>-1&&(n="["+n+"]"),{href:Ci.href,protocol:Ci.protocol?Ci.protocol.replace(/:$/,""):"",host:Ci.host,search:Ci.search?Ci.search.replace(/^\?/,""):"",hash:Ci.hash?Ci.hash.replace(/^#/,""):"",hostname:n,port:Ci.port,pathname:"/"===Ci.pathname.charAt(0)?Ci.pathname:"/"+Ci.pathname}}function $i(e,t){return e=ji(e),t=ji(t),e.protocol===t.protocol&&e.host===t.host}function Ti(){this.$get=W(e)}function Ai(e){var t=e[0]||{},n={},r="";function a(e){try{return decodeURIComponent(e)}catch(t){return e}}return function(){var e,l,f,d,h,p=function(e){try{return e.cookie||""}catch(e){return""}}(t);if(p!==r)for(e=(r=p).split("; "),n={},f=0;f<e.length;f++)(d=(l=e[f]).indexOf("="))>0&&(h=a(l.substring(0,d)),G(n[h])&&(n[h]=a(l.substring(d+1))));return n}}function Pi(){this.$get=Ai}function Di(e){var t="Filter";function n(r,a){if(Y(r)){var l={};return D(r,(function(e,t){l[t]=n(t,e)})),l}return e.factory(r+t,a)}this.register=n,this.$get=["$injector",function(e){return function(n){return e.get(n+t)}}],n("currency",qi),n("date",Ji),n("filter",Ri),n("json",Qi),n("limitTo",no),n("lowercase",eo),n("number",Bi),n("orderBy",io),n("uppercase",to)}function Ri(){return function(e,t,n,r){if(!P(e)){if(null==e)return e;throw a("filter")("notarray","Expected array but received: {0}",e)}var l,f;switch(r=r||"$",Mi(t)){case"function":l=t;break;case"boolean":case"null":case"number":case"string":f=!0;case"object":l=function(e,t,n,r){var a,l=Y(e)&&n in e;!0===t?t=ye:ne(t)||(t=function(e,t){return!G(e)&&(null===e||null===t?e===t:!(Y(t)||Y(e)&&!Z(e))&&(e=x(""+e),t=x(""+t),-1!==e.indexOf(t)))});return a=function(a){return l&&!Y(a)?Ii(a,e[n],t,n,!1):Ii(a,e,t,n,r)},a}(t,n,r,f);break;default:return e}return Array.prototype.filter.call(e,l)}}function Ii(e,t,n,r,a,l){var f=Mi(e),d=Mi(t);if("string"===d&&"!"===t.charAt(0))return!Ii(e,t.substring(1),n,r,a);if(te(e))return e.some((function(e){return Ii(e,t,n,r,a)}));switch(f){case"object":var h;if(a){for(h in e)if(h.charAt&&"$"!==h.charAt(0)&&Ii(e[h],t,n,r,!0))return!0;return!l&&Ii(e,t,n,r,!1)}if("object"===d){for(h in t){var p=t[h];if(!ne(p)&&!G(p)){var y=h===r;if(!Ii(y?e:e[h],p,n,r,y,y))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Mi(e){return null===e?"null":typeof e}Ai.$inject=["$document"],Di.$inject=["$provide"];var Li=22,Ni=".",Fi="0";function qi(e){var t=e.NUMBER_FORMATS;return function(e,n,r){G(n)&&(n=t.CURRENCY_SYM),G(r)&&(r=t.PATTERNS[1].maxFrac);var a=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==e?e:Ui(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(a,n)}}function Bi(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Ui(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Ui(e,t,n,r,a){if(!J(e)&&!Q(e)||isNaN(e))return"";var l,f=!isFinite(e),d=!1,h=Math.abs(e)+"",p="";if(f)p="∞";else{l=function(e){var t,n,r,a,l,f=0;for((n=e.indexOf(Ni))>-1&&(e=e.replace(Ni,"")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charAt(r)===Fi;r++);if(r===(l=e.length))t=[0],n=1;else{for(l--;e.charAt(l)===Fi;)l--;for(n-=r,t=[],a=0;r<=l;r++,a++)t[a]=+e.charAt(r)}return n>Li&&(t=t.splice(0,Li-1),f=n-1,n=1),{d:t,e:f,i:n}}(h),function(e,t,n,r){var a=e.d,l=a.length-e.i,f=(t=G(t)?Math.min(Math.max(n,l),r):+t)+e.i,d=a[f];if(f>0){a.splice(Math.max(e.i,f));for(var h=f;h<a.length;h++)a[h]=0}else{l=Math.max(0,l),e.i=1,a.length=Math.max(1,f=t+1),a[0]=0;for(var p=1;p<f;p++)a[p]=0}if(d>=5)if(f-1<0){for(var y=0;y>f;y--)a.unshift(0),e.i++;a.unshift(1),e.i++}else a[f-1]++;for(;l<Math.max(0,t);l++)a.push(0);var w=a.reduceRight((function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)}),0);w&&(a.unshift(w),e.i++)}(l,a,t.minFrac,t.maxFrac);var y=l.d,w=l.i,x=l.e,_=[];for(d=y.reduce((function(e,t){return e&&!t}),!0);w<0;)y.unshift(0),w++;w>0?_=y.splice(w,y.length):(_=y,y=[0]);var S=[];for(y.length>=t.lgSize&&S.unshift(y.splice(-t.lgSize,y.length).join(""));y.length>t.gSize;)S.unshift(y.splice(-t.gSize,y.length).join(""));y.length&&S.unshift(y.join("")),p=S.join(n),_.length&&(p+=r+_.join("")),x&&(p+="e+"+x)}return e<0&&!d?t.negPre+p+t.negSuf:t.posPre+p+t.posSuf}function Hi(e,t,n,r){var a="";for((e<0||r&&e<=0)&&(r?e=1-e:(e=-e,a="-")),e=""+e;e.length<t;)e=Fi+e;return n&&(e=e.substr(e.length-t)),a+e}function zi(e,t,n,r,a){return n=n||0,function(l){var f=l["get"+e]();return(n>0||f>-n)&&(f+=n),0===f&&-12===n&&(f=12),Hi(f,t,r,a)}}function Vi(e,t,n){return function(r,a){var l=r["get"+e]();return a[_((n?"STANDALONE":"")+(t?"SHORT":"")+e)][l]}}function Wi(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function Zi(e){return function(t){var n,r=Wi(t.getFullYear()),a=+(n=t,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+r;return Hi(1+Math.round(a/6048e5),e)}}function Gi(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}qi.$inject=["$locale"],Bi.$inject=["$locale"];var Ki={yyyy:zi("FullYear",4,0,!1,!0),yy:zi("FullYear",2,0,!0,!0),y:zi("FullYear",1,0,!1,!0),MMMM:Vi("Month"),MMM:Vi("Month",!0),MM:zi("Month",2,1),M:zi("Month",1,1),LLLL:Vi("Month",!1,!0),dd:zi("Date",2),d:zi("Date",1),HH:zi("Hours",2),H:zi("Hours",1),hh:zi("Hours",2,-12),h:zi("Hours",1,-12),mm:zi("Minutes",2),m:zi("Minutes",1),ss:zi("Seconds",2),s:zi("Seconds",1),sss:zi("Milliseconds",3),EEEE:Vi("Day"),EEE:Vi("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){var r=-1*n,a=r>=0?"+":"";return a+=Hi(Math[r>0?"floor":"ceil"](r/60),2)+Hi(Math.abs(r%60),2)},ww:Zi(2),w:Zi(1),G:Gi,GG:Gi,GGG:Gi,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},Yi=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Xi=/^-?\d+$/;function Ji(e){var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,a){var l,f,d="",h=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,J(n)&&(n=Xi.test(n)?B(n):function(e){var n;if(n=e.match(t)){var r=new Date(0),a=0,l=0,f=n[8]?r.setUTCFullYear:r.setFullYear,d=n[8]?r.setUTCHours:r.setHours;n[9]&&(a=B(n[9]+n[10]),l=B(n[9]+n[11])),f.call(r,B(n[1]),B(n[2])-1,B(n[3]));var h=B(n[4]||0)-a,p=B(n[5]||0)-l,y=B(n[6]||0),w=Math.round(1e3*parseFloat("0."+(n[7]||0)));return d.call(r,h,p,y,w),r}return e}(n)),Q(n)&&(n=new Date(n)),!ee(n)||!isFinite(n.getTime()))return n;for(;r;)(f=Yi.exec(r))?r=(h=xe(h,f,1)).pop():(h.push(r),r=null);var p=n.getTimezoneOffset();return a&&(p=je(a,p),n=Te(n,a,!0)),D(h,(function(t){l=Ki[t],d+=l?l(n,e.DATETIME_FORMATS,p):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),d}}function Qi(){return function(e,t){return G(t)&&(t=2),Ce(e,t)}}Ji.$inject=["$locale"];var eo=W(x),to=W(_);function no(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):B(t),U(t)?e:(Q(e)&&(e=e.toString()),P(e)?(n=(n=!n||isNaN(n)?0:B(n))<0?Math.max(0,e.length+n):n,t>=0?ro(e,n,n+t):0===n?ro(e,t,e.length):ro(e,Math.max(0,n+t),n)):e)}}function ro(e,t,n){return J(e)?e.slice(t,n):S.call(e,t,n)}function io(e){return function(r,l,f,d){if(null==r)return r;if(!P(r))throw a("orderBy")("notarray","Expected array but received: {0}",r);te(l)||(l=[l]),0===l.length&&(l=["+"]);var h=l.map((function(t){var n=1,r=V;if(ne(t))r=t;else if(J(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t)).constant)){var a=r();r=function(e){return e[a]}}return{get:r,descending:n}})),p=f?-1:1,y=ne(d)?d:n,w=Array.prototype.map.call(r,(function(e,n){return{value:e,tieBreaker:{value:n,type:"number",index:n},predicateValues:h.map((function(r){return function(e,n){var r=typeof e;null===e?r="null":"object"===r&&(e=function(e){if(ne(e.valueOf)&&t(e=e.valueOf()))return e;if(Z(e)&&t(e=e.toString()))return e;return e}(e));return{value:e,type:r,index:n}}(r.get(e),n)}))}}));return w.sort((function(e,t){for(var r=0,a=h.length;r<a;r++){var l=y(e.predicateValues[r],t.predicateValues[r]);if(l)return l*h[r].descending*p}return(y(e.tieBreaker,t.tieBreaker)||n(e.tieBreaker,t.tieBreaker))*p})),r=w.map((function(e){return e.value}))};function t(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function n(e,t){var n=0,r=e.type,a=t.type;if(r===a){var l=e.value,f=t.value;"string"===r?(l=l.toLowerCase(),f=f.toLowerCase()):"object"===r&&(Y(l)&&(l=e.index),Y(f)&&(f=t.index)),l!==f&&(n=l<f?-1:1)}else n="undefined"===r?1:"undefined"===a?-1:"null"===r?1:"null"===a||r<a?-1:1;return n}}function oo(e){return ne(e)&&(e={link:e}),e.restrict=e.restrict||"AC",W(e)}io.$inject=["$parse"];var ao=W({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===E.call(t.prop("href"))?"xlink:href":"href";t.on("click",(function(e){t.attr(n)||e.preventDefault()}))}}}}),so={};D(Wt,(function(e,t){if("multiple"!==e){var n=Mn("ng-"+t),r=a;"checked"===e&&(r=function(e,t,r){r.ngModel!==r[n]&&a(e,0,r)}),so[n]=function(){return{restrict:"A",priority:100,link:r}}}function a(e,r,a){e.$watch(a[n],(function(e){a.$set(t,!!e)}))}})),D(Gt,(function(e,t){so[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var a=r.ngPattern.match(p);if(a)return void r.$set("ngPattern",new RegExp(a[1],a[2]))}e.$watch(r[t],(function(e){r.$set(t,e)}))}}}})),D(["src","srcset","href"],(function(e){var t=Mn("ng-"+e);so[t]=["$sce",function(n){return{priority:99,link:function(r,a,f){var d=e,h=e;"href"===e&&"[object SVGAnimatedString]"===E.call(a.prop("href"))&&(h="xlinkHref",f.$attr[h]="xlink:href",d=null),f.$set(t,n.getTrustedMediaUrl(f[t])),f.$observe(t,(function(t){t?(f.$set(h,t),l&&d&&a.prop(d,f[h])):"href"===e&&f.$set(h,null)}))}}}]}));var lo={$addControl:z,$getControls:W([]),$$renameControl:function(e,t){e.$name=t},$removeControl:z,$setValidity:z,$setDirty:z,$setPristine:z,$setSubmitted:z,$$setSubmitted:z},co="ng-pending",uo="ng-submitted";function fo(e,t,n,r,a){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=a(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=lo,this.$$element=e,this.$$animate=r,go(this)}fo.$inject=["$element","$attrs","$scope","$animate","$interpolate"],fo.prototype={$rollbackViewValue:function(){D(this.$$controls,(function(e){e.$rollbackViewValue()}))},$commitViewValue:function(){D(this.$$controls,(function(e){e.$commitViewValue()}))},$addControl:function(e){Ge(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$getControls:function(){return rt(this.$$controls)},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],D(this.$pending,(function(t,n){this.$setValidity(n,null,e)}),this),D(this.$error,(function(t,n){this.$setValidity(n,null,e)}),this),D(this.$$success,(function(t,n){this.$setValidity(n,null,e)}),this),me(this.$$controls,e),e.$$parentForm=lo},$setDirty:function(){this.$$animate.removeClass(this.$$element,da),this.$$animate.addClass(this.$$element,ha),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,da,ha+" "+uo),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,D(this.$$controls,(function(e){e.$setPristine()}))},$setUntouched:function(){D(this.$$controls,(function(e){e.$setUntouched()}))},$setSubmitted:function(){for(var e=this;e.$$parentForm&&e.$$parentForm!==lo;)e=e.$$parentForm;e.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,uo),this.$submitted=!0,D(this.$$controls,(function(e){e.$$setSubmitted&&e.$$setSubmitted()}))}},vo({clazz:fo,set:function(e,t,n){var r=e[t];r?-1===r.indexOf(n)&&r.push(n):e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(me(r,n),0===r.length&&delete e[t])}});var ho=function(e){return["$timeout","$parse",function(t,n){return{name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:fo,compile:function(n,a){n.addClass(da).addClass(ua);var l=a.name?"name":!(!e||!a.ngForm)&&"ngForm";return{pre:function(e,n,a,f){var d=f[0];if(!("action"in a)){var h=function(t){e.$apply((function(){d.$commitViewValue(),d.$setSubmitted()})),t.preventDefault()};n[0].addEventListener("submit",h),n.on("$destroy",(function(){t((function(){n[0].removeEventListener("submit",h)}),0,!1)}))}(f[1]||d.$$parentForm).$addControl(d);var p=l?r(d.$name):z;l&&(p(e,d),a.$observe(l,(function(t){d.$name!==t&&(p(e,void 0),d.$$parentForm.$$renameControl(d,t),(p=r(d.$name))(e,d))}))),n.on("$destroy",(function(){d.$$parentForm.$removeControl(d),p(e,void 0),F(d,lo)}))}}}};function r(e){return""===e?n('this[""]').assign:n(e).assign||z}}]},po=ho(),mo=ho(!0);function go(e){e.$$classCache={},e.$$classCache[fa]=!(e.$$classCache[ua]=e.$$element.hasClass(ua))}function vo(e){var t=e.clazz,n=e.set,r=e.unset;function a(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function l(e,t,n){t=t?"-"+He(t,"-"):"",a(e,ua+t,!0===n),a(e,fa+t,!1===n)}t.prototype.$setValidity=function(e,t,f){var d;G(t)?function(e,t,r,a){e[t]||(e[t]={});n(e[t],r,a)}(this,"$pending",e,f):function(e,t,n,a){e[t]&&r(e[t],n,a);yo(e[t])&&(e[t]=void 0)}(this,"$pending",e,f),se(t)?t?(r(this.$error,e,f),n(this.$$success,e,f)):(n(this.$error,e,f),r(this.$$success,e,f)):(r(this.$error,e,f),r(this.$$success,e,f)),this.$pending?(a(this,co,!0),this.$valid=this.$invalid=void 0,l(this,"",null)):(a(this,co,!1),this.$valid=yo(this.$error),this.$invalid=!this.$valid,l(this,"",this.$valid)),l(this,e,d=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,d,this)}}function yo(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var bo=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,wo=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,xo=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,_o=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,So=/^(\d{4,})-(\d{2})-(\d{2})$/,ko=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Co=/^(\d{4,})-W(\d\d)$/,Eo=/^(\d{4,})-(\d\d)$/,Oo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,jo="keydown wheel mousedown",$o=Ye();D("date,datetime-local,month,time,week".split(","),(function(e){$o[e]=!0}));var To={text:function(e,t,n,r,a,l){Po(e,t,n,r,a,l),Ao(r)},date:Ro("date",So,Do(So,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Ro("datetimelocal",ko,Do(ko,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Ro("time",Oo,Do(Oo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Ro("week",Co,(function(e,t){if(ee(e))return e;if(J(e)){Co.lastIndex=0;var n=Co.exec(e);if(n){var r=+n[1],a=+n[2],l=0,f=0,d=0,h=0,p=Wi(r),y=7*(a-1);return t&&(l=t.getHours(),f=t.getMinutes(),d=t.getSeconds(),h=t.getMilliseconds()),new Date(r,0,p.getDate()+y,l,f,d,h)}}return NaN}),"yyyy-Www"),month:Ro("month",Eo,Do(Eo,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,r,a,l,f,d){var h;if(Io(e,t,n,r,"number"),Mo(r),Po(e,t,n,r,a,l),K(n.min)||n.ngMin){var p=n.min||d(n.ngMin)(e);h=Lo(p),r.$validators.min=function(e,t){return r.$isEmpty(t)||G(h)||t>=h},n.$observe("min",(function(e){e!==p&&(h=Lo(e),p=e,r.$validate())}))}if(K(n.max)||n.ngMax){var y=n.max||d(n.ngMax)(e),w=Lo(y);r.$validators.max=function(e,t){return r.$isEmpty(t)||G(w)||t<=w},n.$observe("max",(function(e){e!==y&&(w=Lo(e),y=e,r.$validate())}))}if(K(n.step)||n.ngStep){var x=n.step||d(n.ngStep)(e),_=Lo(x);r.$validators.step=function(e,t){return r.$isEmpty(t)||G(_)||qo(t,h||0,_)},n.$observe("step",(function(e){e!==x&&(_=Lo(e),x=e,r.$validate())}))}},url:function(e,t,n,r,a,l){Po(e,t,n,r,a,l),Ao(r),r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||wo.test(n)}},email:function(e,t,n,r,a,l){Po(e,t,n,r,a,l),Ao(r),r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||xo.test(n)}},radio:function(e,t,n,r){var a=!n.ngTrim||"false"!==ue(n.ngTrim);G(n.name)&&t.attr("name",M());t.on("change",(function(e){var l;t[0].checked&&(l=n.value,a&&(l=ue(l)),r.$setViewValue(l,e&&e.type))})),r.$render=function(){var e=n.value;a&&(e=ue(e)),t[0].checked=e===r.$viewValue},n.$observe("value",r.$render)},range:function(e,t,n,r,a,l){Io(e,t,n,r,"range"),Mo(r),Po(e,t,n,r,a,l);var f=r.$$hasNativeValidators&&"range"===t[0].type,d=f?0:void 0,h=f?100:void 0,p=f?1:void 0,y=t[0].validity,w=K(n.min),x=K(n.max),_=K(n.step),S=r.$render;r.$render=f&&K(y.rangeUnderflow)&&K(y.rangeOverflow)?function(){S(),r.$setViewValue(t.val())}:S,w&&(d=Lo(n.min),r.$validators.min=f?function(){return!0}:function(e,t){return r.$isEmpty(t)||G(d)||t>=d},k("min",(function(e){if(d=Lo(e),U(r.$modelValue))return;if(f){var n=t.val();d>n&&(n=d,t.val(n)),r.$setViewValue(n)}else r.$validate()})));x&&(h=Lo(n.max),r.$validators.max=f?function(){return!0}:function(e,t){return r.$isEmpty(t)||G(h)||t<=h},k("max",(function(e){if(h=Lo(e),U(r.$modelValue))return;if(f){var n=t.val();h<n&&(t.val(h),n=h<d?d:h),r.$setViewValue(n)}else r.$validate()})));_&&(p=Lo(n.step),r.$validators.step=f?function(){return!y.stepMismatch}:function(e,t){return r.$isEmpty(t)||G(p)||qo(t,d||0,p)},k("step",(function(e){if(p=Lo(e),U(r.$modelValue))return;f?r.$viewValue!==t.val()&&r.$setViewValue(t.val()):r.$validate()})));function k(e,r){t.attr(e,n[e]);var a=n[e];n.$observe(e,(function(e){e!==a&&(a=e,r(e))}))}},checkbox:function(e,t,n,r,a,l,f,d){var h=Bo(d,e,"ngTrueValue",n.ngTrueValue,!0),p=Bo(d,e,"ngFalseValue",n.ngFalseValue,!1);t.on("change",(function(e){r.$setViewValue(t[0].checked,e&&e.type)})),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return!1===e},r.$formatters.push((function(e){return ye(e,h)})),r.$parsers.push((function(e){return e?h:p}))},hidden:z,button:z,submit:z,reset:z,file:z};function Ao(e){e.$formatters.push((function(t){return e.$isEmpty(t)?t:t.toString()}))}function Po(e,t,n,r,a,l){var f,d=x(t[0].type);if(!a.android){var h=!1;t.on("compositionstart",(function(){h=!0})),t.on("compositionupdate",(function(e){(G(e.data)||""===e.data)&&(h=!1)})),t.on("compositionend",(function(){h=!1,p()}))}var p=function(e){if(f&&(l.defer.cancel(f),f=null),!h){var a=t.val(),p=e&&e.type;"password"===d||n.ngTrim&&"false"===n.ngTrim||(a=ue(a)),(r.$viewValue!==a||""===a&&r.$$hasNativeValidators)&&r.$setViewValue(a,p)}};if(a.hasEvent("input"))t.on("input",p);else{var w=function(e,t,n){f||(f=l.defer((function(){f=null,t&&t.value===n||p(e)})))};t.on("keydown",(function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||w(e,this,this.value)})),a.hasEvent("paste")&&t.on("paste cut drop",w)}t.on("change",p),$o[d]&&r.$$hasNativeValidators&&d===n.type&&t.on(jo,(function(e){if(!f){var t=this[y],n=t.badInput,r=t.typeMismatch;f=l.defer((function(){f=null,t.badInput===n&&t.typeMismatch===r||p(e)}))}})),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function Do(e,t){return function(n,r){var a,l;if(ee(n))return n;if(J(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),bo.test(n))return new Date(n);if(e.lastIndex=0,a=e.exec(n)){a.shift(),l=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},D(a,(function(e,n){n<t.length&&(l[t[n]]=+e)}));var f=new Date(l.yyyy,l.MM-1,l.dd,l.HH,l.mm,l.ss||0,1e3*l.sss||0);return l.yyyy<100&&f.setFullYear(l.yyyy),f}}return NaN}}function Ro(e,t,n,r){return function(a,l,f,d,h,p,y,w){Io(a,l,f,d,e),Po(0,l,f,d,h,p);var x,_,S="time"===e||"datetimelocal"===e;if(d.$parsers.push((function(n){return d.$isEmpty(n)?null:t.test(n)?A(n,x):void(d.$$parserName=e)})),d.$formatters.push((function(e){if(e&&!ee(e))throw ya("datefmt","Expected `{0}` to be a date",e);if(j(e)){x=e;var t=d.$options.getOption("timezone");return t&&(_=t,x=Te(x,t,!0)),function(e,t){var n=r;S&&J(d.$options.getOption("timeSecondsFormat"))&&(n=r.replace("ss.sss",d.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var a=y("date")(e,n,t);S&&d.$options.getOption("timeStripZeroSeconds")&&(a=a.replace(/(?::00)?(?:\.000)?$/,""));return a}(e,t)}return x=null,_=null,""})),K(f.min)||f.ngMin){var k=f.min||w(f.ngMin)(a),C=T(k);d.$validators.min=function(e){return!j(e)||G(C)||n(e)>=C},f.$observe("min",(function(e){e!==k&&(C=T(e),k=e,d.$validate())}))}if(K(f.max)||f.ngMax){var E=f.max||w(f.ngMax)(a),O=T(E);d.$validators.max=function(e){return!j(e)||G(O)||n(e)<=O},f.$observe("max",(function(e){e!==E&&(O=T(e),E=e,d.$validate())}))}function j(e){return e&&!(e.getTime&&e.getTime()!=e.getTime())}function T(e){return K(e)&&!ee(e)?A(e)||void 0:e}function A(e,t){var r=d.$options.getOption("timezone");_&&_!==r&&(t=$e(t,je(_)));var a=n(e,t);return!isNaN(a)&&r&&(a=Te(a,r)),a}}}function Io(e,t,n,r,a){var l=t[0];(r.$$hasNativeValidators=Y(l.validity))&&r.$parsers.push((function(e){var n=t.prop(y)||{};if(!n.badInput&&!n.typeMismatch)return e;r.$$parserName=a}))}function Mo(e){e.$parsers.push((function(t){return e.$isEmpty(t)?null:_o.test(t)?parseFloat(t):void(e.$$parserName="number")})),e.$formatters.push((function(t){if(!e.$isEmpty(t)){if(!Q(t))throw ya("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}))}function Lo(e){return K(e)&&!Q(e)&&(e=parseFloat(e)),U(e)?void 0:e}function No(e){return(0|e)===e}function Fo(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function qo(e,t,n){var r=Number(e),a=!No(r),l=!No(t),f=!No(n);if(a||l||f){var d=a?Fo(r):0,h=l?Fo(t):0,p=f?Fo(n):0,y=Math.max(d,h,p),w=Math.pow(10,y);r*=w,t*=w,n*=w,a&&(r=Math.round(r)),l&&(t=Math.round(t)),f&&(n=Math.round(n))}return(r-t)%n==0}function Bo(e,t,n,r,a){var l;if(K(r)){if(!(l=e(r)).constant)throw ya("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return l(t)}return a}var Uo=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(a,l,f,d){d[0]&&(To[x(f.type)]||To.text)(a,l,f,d[0],t,e,n,r)}}}}],Ho=function(){var e={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(e){this.setAttribute("value",e)}};return{restrict:"E",priority:200,compile:function(t,n){if("hidden"===x(n.type))return{pre:function(t,n,r,a){var l=n[0];l.parentNode&&l.parentNode.insertBefore(l,l.nextSibling),Object.defineProperty&&Object.defineProperty(l,"value",e)}}}}},zo=/^(true|false|\d+)$/,Vo=function(){function e(e,t,n){var r=K(n)?n:9===l?"":null;e.prop("value",r),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,n){return zo.test(n.ngValue)?function(t,n,r){e(n,r,t.$eval(r.ngValue))}:function(t,n,r){t.$watch(r.ngValue,(function(t){e(n,r,t)}))}}}},Wo=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,(function(e){n.textContent=Xe(e)}))}}}}],Zo=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,a){var l=e(r.attr(a.$attr.ngBindTemplate));t.$$addBindingInfo(r,l.expressions),r=r[0],a.$observe("ngBindTemplate",(function(e){r.textContent=G(e)?"":e}))}}}}],Go=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,a){var l=t(a.ngBindHtml),f=t(a.ngBindHtml,(function(t){return e.valueOf(t)}));return n.$$addBindingClass(r),function(t,r,a){n.$$addBindingInfo(r,a.ngBindHtml),t.$watch(f,(function(){var n=l(t);r.html(e.getTrustedHtml(n)||"")}))}}}}],Ko=W({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push((function(){e.$eval(n.ngChange)}))}});function Yo(e,t){var n;return e="ngClass"+e,["$parse",function(f){return{restrict:"AC",link:function(d,h,p){var y,w=h.data("$classCounts"),x=!0;function _(e,t){var n=[];return D(e,(function(e){(t>0||w[e])&&(w[e]=(w[e]||0)+t,w[e]===+(t>0)&&n.push(e))})),n.join(" ")}w||(w=Ye(),h.data("$classCounts",w)),"ngClass"!==e&&(n||(n=f("$index",(function(e){return 1&e}))),d.$watch(n,(function(e){e===t?(n=_(a(n=y),1),p.$addClass(n)):function(e){e=_(a(e),-1),p.$removeClass(e)}(y);var n;x=e}))),d.$watch(f(p[e],l),(function(e){x===t&&function(e,t){var n=a(e),l=a(t),f=r(n,l),d=r(l,n),h=_(f,-1),y=_(d,1);p.$addClass(y),p.$removeClass(h)}(y,e);y=e}))}}}];function r(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var r=0;r<e.length;r++){for(var a=e[r],l=0;l<t.length;l++)if(a===t[l])continue e;n.push(a)}return n}function a(e){return e&&e.split(" ")}function l(e){if(!e)return e;var t=e;return te(e)?t=e.map(l).join(" "):Y(e)?t=Object.keys(e).filter((function(t){return e[t]})).join(" "):J(e)||(t=e+""),t}}var Xo=Yo("",!0),Jo=Yo("Odd",0),Qo=Yo("Even",1),ea=oo({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),ta=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],na={},ra={blur:!0,focus:!0};function ia(e,t,n,r,a,l){return{restrict:"A",compile:function(f,d){var h=e(d[r]);return function(e,r){r.on(a,(function(r){var a=function(){h(e,{$event:r})};if(t.$$phase)if(l)e.$evalAsync(a);else try{a()}catch(e){n(e)}else e.$apply(a)}))}}}}D("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(e){var t=Mn("ng-"+e);na[t]=["$parse","$rootScope","$exceptionHandler",function(n,r,a){return ia(n,r,a,t,e,ra[e])}]}));var oa=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,a,l,f){var d,h,p;n.$watch(a.ngIf,(function(n){n?h||f((function(n,l){h=l,n[n.length++]=t.$$createComment("end ngIf",a.ngIf),d={clone:n},e.enter(n,r.parent(),r)})):(p&&(p.remove(),p=null),h&&(h.$destroy(),h=null),d&&(p=Ke(d.clone),e.leave(p).done((function(e){!1!==e&&(p=null)})),d=null))}))}}}],aa=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:T.noop,compile:function(r,a){var l=a.ngInclude||a.src,f=a.onload||"",d=a.autoscroll;return function(r,a,h,p,y){var w,x,_,S=0,k=function(){x&&(x.remove(),x=null),w&&(w.$destroy(),w=null),_&&(n.leave(_).done((function(e){!1!==e&&(x=null)})),x=_,_=null)};r.$watch(l,(function(l){var h=function(e){!1===e||!K(d)||d&&!r.$eval(d)||t()},x=++S;l?(e(l,!0).then((function(e){if(!r.$$destroyed&&x===S){var t=r.$new();p.template=e;var d=y(t,(function(e){k(),n.enter(e,null,a).done(h)}));_=d,(w=t).$emit("$includeContentLoaded",l),r.$eval(f)}}),(function(){r.$$destroyed||x===S&&(k(),r.$emit("$includeContentError",l))})),r.$emit("$includeContentRequested",l)):(k(),p.template=null)}))}}}}],sa=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,a,l){if(E.call(r[0]).match(/SVG/))return r.empty(),void t(Ct(l.template,e.document).childNodes)(n,(function(e){r.append(e)}),{futureParentElement:r});r.html(l.template),t(r.contents())(n)}}}],la=oo({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),ca=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var a=n.ngList||", ",l="false"!==n.ngTrim,f=l?ue(a):a;r.$parsers.push((function(e){if(!G(e)){var t=[];return e&&D(e.split(f),(function(e){e&&t.push(l?ue(e):e)})),t}})),r.$formatters.push((function(e){if(te(e))return e.join(a)})),r.$isEmpty=function(e){return!e||!e.length}}}},ua="ng-valid",fa="ng-invalid",da="ng-pristine",ha="ng-dirty",pa="ng-untouched",ma="ng-touched",ga="ng-empty",va="ng-not-empty",ya=a("ngModel");function ba(e,t,n,r,a,l,f,d,h){var p;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=h(n.name||"",!1)(e),this.$$parentForm=lo,this.$options=wa,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=a(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=e,this.$$rootScope=e.$root,this.$$attr=n,this.$$element=r,this.$$animate=l,this.$$timeout=f,this.$$parse=a,this.$$q=d,this.$$exceptionHandler=t,go(this),(p=this).$$scope.$watch((function(e){var t=p.$$ngModelGet(e);return t===p.$modelValue||p.$modelValue!=p.$modelValue&&t!=t||p.$$setModelValue(t),t}))}ba.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],ba.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return ne(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){ne(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw ya("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Ae(this.$$element))},$render:z,$isEmpty:function(e){return G(e)||""===e||null===e||e!=e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,va),this.$$animate.addClass(this.$$element,ga)):(this.$$animate.removeClass(this.$$element,ga),this.$$animate.addClass(this.$$element,va))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,ha),this.$$animate.addClass(this.$$element,da)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,da),this.$$animate.addClass(this.$$element,ha),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,pa,ma)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,ma,pa)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!U(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,a=this.$options.getOption("allowInvalid"),l=this;this.$$runValidators(t,e,(function(e){a||n===e||(l.$modelValue=e?t:void 0,l.$modelValue!==r&&l.$$writeModelToScope())}))}},$$runValidators:function(e,t,n){this.$$currentValidationRunId++;var r,a,l=this.$$currentValidationRunId,f=this;(function(){var e=f.$$parserName;if(!G(f.$$parserValid))return f.$$parserValid||(D(f.$validators,(function(e,t){d(t,null)})),D(f.$asyncValidators,(function(e,t){d(t,null)}))),d(e,f.$$parserValid),f.$$parserValid;d(e,null);return!0})()?!function(){var n=!0;if(D(f.$validators,(function(r,a){var l=Boolean(r(e,t));n=n&&l,d(a,l)})),!n)return D(f.$asyncValidators,(function(e,t){d(t,null)})),!1;return!0}()?h(!1):(r=[],a=!0,D(f.$asyncValidators,(function(n,l){var f=n(e,t);if(!le(f))throw ya("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",f);d(l,void 0),r.push(f.then((function(){d(l,!0)}),(function(){a=!1,d(l,!1)})))})),r.length?f.$$q.all(r).then((function(){h(a)}),z):h(!0)):h(!1);function d(e,t){l===f.$$currentValidationRunId&&f.$setValidity(e,t)}function h(e){l===f.$$currentValidationRunId&&n(e)}},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var e=this.$$lastCommittedViewValue,t=this;if(this.$$parserValid=!G(e)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(G(e=this.$parsers[n](e))){this.$$parserValid=!1;break}U(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,a=this.$options.getOption("allowInvalid");function l(){t.$modelValue!==r&&t.$$writeModelToScope()}this.$$rawModelValue=e,a&&(this.$modelValue=e,l()),this.$$runValidators(e,this.$$lastCommittedViewValue,(function(n){a||(t.$modelValue=n?e:void 0,l())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),D(this.$viewChangeListeners,(function(e){try{e()}catch(e){this.$$exceptionHandler(e)}}),this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");Q(t[e])?t=t[e]:Q(t.default)&&-1===this.$options.getOption("updateOn").indexOf(e)?t=t.default:Q(t["*"])&&(t=t["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),t):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e),this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();this.$viewValue!==e&&(this.$$updateEmptyClasses(e),this.$viewValue=this.$$lastCommittedViewValue=e,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,z))},$$format:function(){for(var e=this.$formatters,t=e.length,n=this.$modelValue;t--;)n=e[t](n);return n},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}},vo({clazz:ba,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var wa,xa=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ba,priority:1,compile:function(t){return t.addClass(da).addClass(pa).addClass(ua),{pre:function(e,t,n,r){var a=r[0],l=r[1]||a.$$parentForm,f=r[2];f&&(a.$options=f.$options),a.$$initGetterSetters(),l.$addControl(a),n.$observe("name",(function(e){a.$name!==e&&a.$$parentForm.$$renameControl(a,e)})),e.$on("$destroy",(function(){a.$$parentForm.$removeControl(a)}))},post:function(t,n,r,a){var l=a[0];function f(){l.$setTouched()}l.$$setUpdateOnEvents(),n.on("blur",(function(){l.$touched||(e.$$phase?t.$evalAsync(f):t.$apply(f))}))}}}}}],_a=/(\s+|^)default(\s+|$)/;function Sa(e){this.$$options=e}Sa.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return D(e=F({},e),(function(n,r){"$inherit"===n?"*"===r?t=!0:(e[r]=this.$$options[r],"updateOn"===r&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(e.updateOnDefault=!1,e[r]=ue(n.replace(_a,(function(){return e.updateOnDefault=!0," "}))))}),this),t&&(delete e["*"],Ca(e,this.$$options)),Ca(e,wa.$$options),new Sa(e)}},wa=new Sa({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var ka=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:wa,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}};function Ca(e,t){D(t,(function(t,n){K(e[n])||(e[n]=t)}))}var Ea=oo({terminal:!0,priority:1e3}),Oa=a("ngOptions"),ja=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,$a=["$compile","$document","$parse",function(t,n,r){var a=e.document.createElement("option"),l=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=z},post:function(e,d,h,p){for(var y=p[0],w=p[1],x=h.multiple,_=0,S=d.children(),k=S.length;_<k;_++)if(""===S[_].value){y.hasEmptyOption=!0,y.emptyOption=S.eq(_);break}d.empty();var C,E=!!y.emptyOption;f(a.cloneNode(!1)).val("?");var O=function(e,t,n){var a=e.match(ja);if(!a)throw Oa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Ae(t));var l=a[5]||a[7],f=a[6],d=/ as /.test(a[0])&&a[1],h=a[9],p=r(a[2]?a[1]:l),y=d&&r(d)||p,w=h&&r(h),x=h?function(e,t){return w(n,t)}:function(e){return Qt(e)},_=function(e,t){return x(e,j(e,t))},S=r(a[2]||a[1]),k=r(a[3]||""),C=r(a[4]||""),E=r(a[8]),O={},j=f?function(e,t){return O[f]=t,O[l]=e,O}:function(e){return O[l]=e,O};function T(e,t,n,r,a){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=a}function A(e){var t;if(!f&&P(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}return{trackBy:h,getTrackByValue:_,getWatchables:r(E,(function(e){for(var t=[],r=A(e=e||[]),l=r.length,f=0;f<l;f++){var d=e===r?f:r[f],h=e[d],p=j(h,d),y=x(h,p);if(t.push(y),a[2]||a[1]){var w=S(n,p);t.push(w)}if(a[4]){var _=C(n,p);t.push(_)}}return t})),getOptions:function(){for(var e=[],t={},r=E(n)||[],a=A(r),l=a.length,f=0;f<l;f++){var d=r===a?f:a[f],p=r[d],w=j(p,d),O=y(n,w),P=x(O,w),D=new T(P,O,S(n,w),k(n,w),C(n,w));e.push(D),t[P]=D}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[_(e)]},getViewValueFromOption:function(e){return h?ge(e.viewValue):e.viewValue}}}}}(h.ngOptions,d,e),j=n[0].createDocumentFragment();function T(e,t){var n=a.cloneNode(!1);t.appendChild(n),function(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label);t.value=e.selectValue}(e,n)}function A(e){var t=C.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}y.generateUnknownOptionValue=function(e){return"?"},x?(y.writeValue=function(e){if(C){var t=e&&e.map(A)||[];C.items.forEach((function(e){e.element.selected&&!pe(t,e)&&(e.element.selected=!1)}))}},y.readValue=function(){var e=d.val()||[],t=[];return D(e,(function(e){var n=C.selectValueMap[e];n&&!n.disabled&&t.push(C.getViewValueFromOption(n))})),t},O.trackBy&&e.$watchCollection((function(){if(te(w.$viewValue))return w.$viewValue.map((function(e){return O.getTrackByValue(e)}))}),(function(){w.$render()}))):(y.writeValue=function(e){if(C){var t=d[0].options[d[0].selectedIndex],n=C.getOptionFromViewValue(e);t&&t.removeAttribute("selected"),n?(d[0].value!==n.selectValue&&(y.removeUnknownOption(),d[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):y.selectUnknownOrEmptyOption(e)}},y.readValue=function(){var e=C.selectValueMap[d.val()];return e&&!e.disabled?(y.unselectEmptyOption(),y.removeUnknownOption(),C.getViewValueFromOption(e)):null},O.trackBy&&e.$watch((function(){return O.getTrackByValue(w.$viewValue)}),(function(){w.$render()}))),E&&(t(y.emptyOption)(e),d.prepend(y.emptyOption),y.emptyOption[0].nodeType===et?(y.hasEmptyOption=!1,y.registerOption=function(e,t){""===t.val()&&(y.hasEmptyOption=!0,y.emptyOption=t,y.emptyOption.removeClass("ng-scope"),w.$render(),t.on("$destroy",(function(){var e=y.$isEmptyOptionSelected();y.hasEmptyOption=!1,y.emptyOption=void 0,e&&w.$render()})))}):y.emptyOption.removeClass("ng-scope")),e.$watchCollection(O.getWatchables,(function(){var e=C&&y.readValue();if(C)for(var t=C.items.length-1;t>=0;t--){var n=C.items[t];K(n.group)?Ht(n.element.parentNode):Ht(n.element)}C=O.getOptions();var r={};if(C.items.forEach((function(e){var t;K(e.group)?((t=r[e.group])||(t=l.cloneNode(!1),j.appendChild(t),t.label=null===e.group?"null":e.group,r[e.group]=t),T(e,t)):T(e,j)})),d[0].appendChild(j),w.$render(),!w.$isEmpty(e)){var a=y.readValue();(O.trackBy||x?ye(e,a):e===a)||(w.$setViewValue(a),w.$render())}}))}}}}],Ta=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,a=/^when(Minus)?(.+)$/;return{link:function(l,f,d){var h,p=d.count,y=d.$attr.when&&f.attr(d.$attr.when),w=d.offset||0,_=l.$eval(y)||{},S={},k=t.startSymbol(),C=t.endSymbol(),E=k+p+"-"+w+C,O=T.noop;function j(e){f.text(e||"")}D(d,(function(e,t){var n=a.exec(t);if(n){var r=(n[1]?"-":"")+x(n[2]);_[r]=f.attr(d.$attr[t])}})),D(_,(function(e,n){S[n]=t(e.replace(r,E))})),l.$watch(p,(function(t){var r=parseFloat(t),a=U(r);if(a||r in _||(r=e.pluralCat(r-w)),!(r===h||a&&U(h))){O();var f=S[r];G(f)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+y),O=z,j()):O=l.$watch(f,j),h=r}}))}}}],Aa=a("ngRef"),Pa=["$parse",function(e){return{priority:-1,restrict:"A",compile:function(t,n){var r=Mn(he(t)),a=e(n.ngRef),l=a.assign||function(){throw Aa("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(e,t,f){var d;if(f.hasOwnProperty("ngRefRead")){if("$element"===f.ngRefRead)d=t;else if(!(d=t.data("$"+f.ngRefRead+"Controller")))throw Aa("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',f.ngRefRead,n.ngRef)}else d=t.data("$"+r+"Controller");l(e,d=d||t),t.on("$destroy",(function(){a(e)===d&&l(e,null)}))}}}}],Da=["$parse","$animate","$compile",function(e,t,n){var r="$$NG_REMOVED",l=a("ngRepeat"),f=function(e,t,n,r,a,l,f){e[n]=r,a&&(e[a]=l),e.$index=t,e.$first=0===t,e.$last=t===f-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},d=function(e){return e.clone[0]},h=function(e){return e.clone[e.clone.length-1]},p=function(e,t,n){return Qt(n)},y=function(e,t){return t};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(a,x){var _=x.ngRepeat,S=n.$$createComment("end ngRepeat",_),k=_.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!k)throw l("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",_);var C=k[1],E=k[2],O=k[3],j=k[4];if(!(k=C.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw l("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",C);var T,A=k[3]||k[1],R=k[2];if(O&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(O)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(O)))throw l("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",O);if(j){var I={$id:Qt},M=e(j);T=function(e,t,n,r){return R&&(I[R]=t),I[A]=n,I.$index=r,M(e,I)}}return function(e,n,a,x,k){var C=Ye();e.$watchCollection(E,(function(a){var x,E,j,M,L,N,F,q,B,U,H,z,V=n[0],W=Ye();if(O&&(e[O]=a),P(a))B=a,q=T||p;else for(var Z in q=T||y,B=[],a)w.call(a,Z)&&"$"!==Z.charAt(0)&&B.push(Z);for(M=B.length,H=new Array(M),x=0;x<M;x++)if(L=a===B?x:B[x],N=a[L],F=q(e,L,N,x),C[F])U=C[F],delete C[F],W[F]=U,H[x]=U;else{if(W[F])throw D(H,(function(e){e&&e.scope&&(C[e.id]=e)})),l("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",_,F,N);H[x]={id:F,scope:void 0,clone:void 0},W[F]=!0}for(var G in I&&(I[A]=void 0),C){if(z=Ke((U=C[G]).clone),t.leave(z),z[0].parentNode)for(x=0,E=z.length;x<E;x++)z[x][r]=!0;U.scope.$destroy()}for(x=0;x<M;x++)if(L=a===B?x:B[x],N=a[L],(U=H[x]).scope){j=V;do{j=j.nextSibling}while(j&&j[r]);d(U)!==j&&t.move(Ke(U.clone),null,V),V=h(U),f(U.scope,x,A,N,R,L,M)}else k((function(e,n){U.scope=n;var r=S.cloneNode(!1);e[e.length++]=r,t.enter(e,null,V),V=r,U.clone=e,W[U.id]=U,f(U.scope,x,A,N,R,L,M)}));C=W}))}}}}],Ra="ng-hide",Ia="ng-hide-animate",Ma=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,(function(t){e[t?"removeClass":"addClass"](n,Ra,{tempClasses:Ia})}))}}}],La=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,(function(t){e[t?"addClass":"removeClass"](n,Ra,{tempClasses:Ia})}))}}}],Na=oo((function(e,t,n){e.$watchCollection(n.ngStyle,(function(e,n){n&&e!==n&&D(n,(function(e,n){t.css(n,"")})),e&&t.css(e)}))})),Fa=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,a,l){var f=a.ngSwitch||a.on,d=[],h=[],p=[],y=[],w=function(e,t){return function(n){!1!==n&&e.splice(t,1)}};n.$watch(f,(function(n){for(var r,a;p.length;)e.cancel(p.pop());for(r=0,a=y.length;r<a;++r){var f=Ke(h[r].clone);y[r].$destroy(),(p[r]=e.leave(f)).done(w(p,r))}h.length=0,y.length=0,(d=l.cases["!"+n]||l.cases["?"])&&D(d,(function(n){n.transclude((function(r,a){y.push(a);var l=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var f={clone:r};h.push(f),e.enter(r,l.parent(),l)}))}))}))}}}],qa=oo({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,a){var l=n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(e,t,n){return n[t-1]!==e}));D(l,(function(e){r.cases["!"+e]=r.cases["!"+e]||[],r.cases["!"+e].push({transclude:a,element:t})}))}}),Ba=oo({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,a){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:a,element:t})}}),Ua=a("ngTransclude"),Ha=["$compile",function(e){return{restrict:"EAC",compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,a,l){if(!l)throw Ua("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Ae(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var f=r.ngTransclude||r.ngTranscludeSlot;function d(){n(e,(function(e){t.append(e)}))}l((function(e,n){e.length&&function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.nodeType!==Qe||r.nodeValue.trim())return!0}}(e)?t.append(e):(d(),n.$destroy())}),null,f),f&&!l.isSlotFilled(f)&&d()}}}}],za=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,a=t[0].text;e.put(r,a)}}}}],Va={$setViewValue:z,$render:z};function Wa(e,t){e.prop("selected",t),e.attr("selected",t)}var Za=["$element","$scope",function(t,n){var r=this,a=new nn;r.selectValueMap={},r.ngModelCtrl=Va,r.multiple=!1,r.unknownOption=f(e.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(e){var n=r.generateUnknownOptionValue(e);r.unknownOption.val(n),t.prepend(r.unknownOption),Wa(r.unknownOption,!0),t.val(n)},r.updateUnknownOption=function(e){var n=r.generateUnknownOptionValue(e);r.unknownOption.val(n),Wa(r.unknownOption,!0),t.val(n)},r.generateUnknownOptionValue=function(e){return"? "+Qt(e)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(t.val(""),Wa(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&Wa(r.emptyOption,!1)},n.$on("$destroy",(function(){r.renderUnknownOption=z})),r.readValue=function(){var e=t.val(),n=e in r.selectValueMap?r.selectValueMap[e]:e;return r.hasOption(n)?n:null},r.writeValue=function(e){var n=t[0].options[t[0].selectedIndex];if(n&&Wa(f(n),!1),r.hasOption(e)){r.removeUnknownOption();var a=Qt(e);t.val(a in r.selectValueMap?a:e);var l=t[0].options[t[0].selectedIndex];Wa(f(l),!0)}else r.selectUnknownOrEmptyOption(e)},r.addOption=function(e,t){if(t[0].nodeType!==et){Ge(e,'"option value"'),""===e&&(r.hasEmptyOption=!0,r.emptyOption=t);var n=a.get(e)||0;a.set(e,n+1),d()}},r.removeOption=function(e){var t=a.get(e);t&&(1===t?(a.delete(e),""===e&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):a.set(e,t-1))},r.hasOption=function(e){return!!a.get(e)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return t[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&t[0].options[t[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(e){null==e&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(e):r.renderUnknownOption(e)};var l=!1;function d(){l||(l=!0,n.$$postDigest((function(){l=!1,r.ngModelCtrl.$render()})))}var h=!1;function p(e){h||(h=!0,n.$$postDigest((function(){n.$$destroyed||(h=!1,r.ngModelCtrl.$setViewValue(r.readValue()),e&&r.ngModelCtrl.$render())})))}r.registerOption=function(e,t,n,a,l){var f,h;n.$attr.ngValue?n.$observe("value",(function(e){var n,a=t.prop("selected");K(h)&&(r.removeOption(f),delete r.selectValueMap[h],n=!0),h=Qt(e),f=e,r.selectValueMap[h]=e,r.addOption(e,t),t.attr("value",h),n&&a&&p()})):a?n.$observe("value",(function(e){var n;r.readValue();var a=t.prop("selected");K(f)&&(r.removeOption(f),n=!0),f=e,r.addOption(e,t),n&&a&&p()})):l?e.$watch(l,(function(e,a){n.$set("value",e);var l=t.prop("selected");a!==e&&r.removeOption(a),r.addOption(e,t),a&&l&&p()})):r.addOption(n.value,t);n.$observe("disabled",(function(e){("true"===e||e&&t.prop("selected"))&&(r.multiple?p(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))})),t.on("$destroy",(function(){var e=r.readValue(),t=n.value;r.removeOption(t),d(),(r.multiple&&e&&-1!==e.indexOf(t)||e===t)&&p(!0)}))}}],Ga=function(){return{restrict:"E",require:["select","?ngModel"],controller:Za,priority:1,link:{pre:function(e,t,n,r){var a=r[0],l=r[1];if(!l)return void(a.registerOption=z);if(a.ngModelCtrl=l,t.on("change",(function(){a.removeUnknownOption(),e.$apply((function(){l.$setViewValue(a.readValue())}))})),n.multiple){a.multiple=!0,a.readValue=function(){var e=[];return D(t.find("option"),(function(t){if(t.selected&&!t.disabled){var n=t.value;e.push(n in a.selectValueMap?a.selectValueMap[n]:n)}})),e},a.writeValue=function(e){D(t.find("option"),(function(t){var n=!!e&&(pe(e,t.value)||pe(e,a.selectValueMap[t.value]));n!==t.selected&&Wa(f(t),n)}))};var d,h=NaN;e.$watch((function(){h!==l.$viewValue||ye(d,l.$viewValue)||(d=rt(l.$viewValue),l.$render()),h=l.$viewValue})),l.$isEmpty=function(e){return!e||0===e.length}}},post:function(e,t,n,r){var a=r[1];if(!a)return;var l=r[0];a.$render=function(){l.writeValue(a.$viewValue)}}}}},Ka=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,a;return K(n.ngValue)||(K(n.value)?r=e(n.value,!0):(a=e(t.text(),!0))||n.$set("value",t.text())),function(e,t,n){var l="$selectController",f=t.parent(),d=f.data(l)||f.parent().data(l);d&&d.registerOption(e,t,n,r,a)}}}}],Ya=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,a){if(a){var l=r.hasOwnProperty("required")||e(r.ngRequired)(t);r.ngRequired||(r.required=!0),a.$validators.required=function(e,t){return!l||!a.$isEmpty(t)},r.$observe("required",(function(e){l!==e&&(l=e,a.$validate())}))}}}}],Xa=["$parse",function(e){return{restrict:"A",require:"?ngModel",compile:function(t,n){var r,a;return n.ngPattern&&(r=n.ngPattern,a="/"===n.ngPattern.charAt(0)&&p.test(n.ngPattern)?function(){return n.ngPattern}:e(n.ngPattern)),function(e,t,n,l){if(l){var f=n.pattern;n.ngPattern?f=a(e):r=n.pattern;var d=es(f,r,t);n.$observe("pattern",(function(e){var n=d;d=es(e,r,t),(n&&n.toString())!==(d&&d.toString())&&l.$validate()})),l.$validators.pattern=function(e,t){return l.$isEmpty(t)||G(d)||d.test(t)}}}}}}],Ja=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,a){if(a){var l=r.maxlength||e(r.ngMaxlength)(t),f=ts(l);r.$observe("maxlength",(function(e){l!==e&&(f=ts(e),l=e,a.$validate())})),a.$validators.maxlength=function(e,t){return f<0||a.$isEmpty(t)||t.length<=f}}}}}],Qa=["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n,r,a){if(a){var l=r.minlength||e(r.ngMinlength)(t),f=ts(l)||-1;r.$observe("minlength",(function(e){l!==e&&(f=ts(e)||-1,l=e,a.$validate())})),a.$validators.minlength=function(e,t){return a.$isEmpty(t)||t.length>=f}}}}}];function es(e,t,n){if(e){if(J(e)&&(e=new RegExp("^"+e+"$")),!e.test)throw a("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",t,e,Ae(n));return e}}function ts(e){var t=B(e);return U(t)?-1:t}e.angular.bootstrap?e.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var t;if(!ze){var n=we();(d=G(n)?e.jQuery:n?e[n]:void 0)&&d.fn.on?(f=d,F(d.fn,{scope:Vt.scope,isolateScope:Vt.isolateScope,controller:Vt.controller,injector:Vt.injector,inheritedData:Vt.inheritedData})):f=Ot,t=f.cleanData,f.cleanData=function(e){for(var n,r,a=0;null!=(r=e[a]);a++)(n=(f._data(r)||{}).events)&&n.$destroy&&f(r).triggerHandler("$destroy");t(e)},T.element=f,ze=!0}}(),function(t){F(t,{errorHandlingConfig:n,bootstrap:Fe,copy:ge,extend:F,merge:q,equals:ye,element:f,forEach:D,injector:pn,noop:z,bind:Se,toJson:Ce,fromJson:Ee,identity:V,isUndefined:G,isDefined:K,isString:J,isFunction:ne,isObject:Y,isNumber:Q,isElement:de,isArray:te,version:ot,isDate:ee,callbacks:{$$counter:0},getTestability:Be,reloadWithDebugInfo:qe,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:Ve,$$minErr:a,$$csp:be,$$encodeUriSegment:Re,$$encodeUriQuery:Ie,$$lowercase:x,$$stringify:Xe,$$uppercase:_}),h=function(e){var t=a("$injector"),n=a("ng");function r(e,t,n){return e[t]||(e[t]=n())}var l=r(e,"angular",Object);return l.$$minErr=l.$$minErr||a,r(l,"module",(function(){var e={};return function(a,l,f){var d={};return function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name","module")}(a),l&&e.hasOwnProperty(a)&&(e[a]=null),r(e,a,(function(){if(!l)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",a);var e=[],r=[],h=[],p=w("$injector","invoke","push",r),y={_invokeQueue:e,_configBlocks:r,_runBlocks:h,info:function(e){if(K(e)){if(!Y(e))throw n("aobj","Argument '{0}' must be an object","value");return d=e,this}return d},requires:l,name:a,provider:x("$provide","provider"),factory:x("$provide","factory"),service:x("$provide","service"),value:w("$provide","value"),constant:w("$provide","constant","unshift"),decorator:x("$provide","decorator",r),animation:x("$animateProvider","register"),filter:x("$filterProvider","register"),controller:x("$controllerProvider","register"),directive:x("$compileProvider","directive"),component:x("$compileProvider","component"),config:p,run:function(e){return h.push(e),this}};return f&&p(f),y;function w(t,n,r,a){return a||(a=e),function(){return a[r||"push"]([t,n,arguments]),y}}function x(t,n,r){return r||(r=e),function(e,l){return l&&ne(l)&&(l.$$moduleName=a),r.push([t,n,arguments]),y}}}))}}))}(e),h("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:li}),e.provider("$compile",Pn).directive({a:ao,input:Uo,textarea:Uo,form:po,script:za,select:Ga,option:Ka,ngBind:Wo,ngBindHtml:Go,ngBindTemplate:Zo,ngClass:Xo,ngClassEven:Qo,ngClassOdd:Jo,ngCloak:ea,ngController:ta,ngForm:mo,ngHide:La,ngIf:oa,ngInclude:aa,ngInit:la,ngNonBindable:Ea,ngPluralize:Ta,ngRef:Pa,ngRepeat:Da,ngShow:Ma,ngStyle:Na,ngSwitch:Fa,ngSwitchWhen:qa,ngSwitchDefault:Ba,ngOptions:$a,ngTransclude:Ha,ngModel:xa,ngList:ca,ngChange:Ko,pattern:Xa,ngPattern:Xa,required:Ya,ngRequired:Ya,minlength:Qa,ngMinlength:Qa,maxlength:Ja,ngMaxlength:Ja,ngValue:Vo,ngModelOptions:ka}).directive({ngInclude:sa,input:Ho}).directive(so).directive(na),e.provider({$anchorScroll:mn,$animate:_n,$animateCss:Cn,$$animateJs:wn,$$animateQueue:xn,$$AnimateRunner:kn,$$animateAsyncRun:Sn,$browser:On,$cacheFactory:jn,$controller:Un,$document:Hn,$$isDocumentHidden:zn,$exceptionHandler:Vn,$filter:Di,$$forceReflow:Wn,$interpolate:fr,$interval:hr,$$intervalFactory:pr,$http:sr,$httpParamSerializer:er,$httpParamSerializerJQLike:tr,$httpBackend:cr,$xhrFactory:lr,$jsonpCallbacks:mr,$location:Pr,$log:Dr,$parse:Qr,$rootScope:si,$q:ei,$$q:ti,$sce:mi,$sceDelegate:pi,$sniffer:gi,$$taskTrackerFactory:vi,$templateCache:$n,$templateRequest:wi,$$testability:xi,$timeout:Si,$window:Ti,$$rAF:ai,$$jqLite:Jt,$$Map:rn,$$cookieReader:Pi})}]).info({angularVersion:"1.8.3"})}(T),T.module("ngLocale",[],["$provide",function(e){var t="one",n="other";e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,r){var a=0|e,l=function(e,t){var n=t;void 0===n&&(n=Math.min(function(e){var t=(e+="").indexOf(".");return-1==t?0:e.length-t-1}(e),3));var r=Math.pow(10,n);return{v:n,f:(e*r|0)%r}}(e,r);return 1==a&&0==l.v?t:n}})}]),f((function(){Ne(e.document,Fe)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'))},64027:function(e,t,n){n(37808),e.exports=angular},91601:function(e,t,n){function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,d=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,f=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw f}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,f=void 0,f=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===l(f)?f:String(f)),r)}var a,f}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function y(e){var t=_();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function w(e){var t="function"==typeof Map?new Map:void 0;return w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return x(e,arguments,k(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),S(r,e)},w(e)}function x(e,t,n){return x=_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&S(a,n.prototype),a},x.apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}n(26936),n(71372),n(99805),n(36728),n(43105),n(16781),n(43450),n(96928),n(77950),n(85940),n(58188),n(88233),n(92215),n(61229),n(15735),n(79321),n(28673),n(6886),n(9575),n(96264),n(34115),n(634),n(71245),n(20796),n(32501),n(27233),n(21850);var C=function(e){"use strict";p(OError,e);var t=y(OError);function OError(e,n,r){var a;return f(this,OError),(a=t.call(this,e)).name=a.constructor.name,n&&(a.info=n),r&&(a.cause=r),a._oErrorTags,a}return h(OError,[{key:"withInfo",value:function(e){return this.info=e,this}},{key:"withCause",value:function(e){return this.cause=e,this}}],[{key:"tag",value:function(e,t,n){var r,a=e;return a._oErrorTags||(a._oErrorTags=[]),Error.captureStackTrace?(r={name:"TaggedError",message:t,info:n},Error.captureStackTrace(r,OError.tag)):r=new E(t||"",n),a._oErrorTags.length>=OError.maxTags&&(a._oErrorTags[1]===O?a._oErrorTags.splice(2,1):a._oErrorTags[1]=O),a._oErrorTags.push(r),e}},{key:"getFullInfo",value:function(e){var t={};if(!e)return t;var n=e;if(n.cause&&Object.assign(t,OError.getFullInfo(n.cause)),"object"===l(n.info)&&Object.assign(t,n.info),n._oErrorTags){var a,f=r(n._oErrorTags);try{for(f.s();!(a=f.n()).done;){var d=a.value;Object.assign(t,d.info)}}catch(e){f.e(e)}finally{f.f()}}return t}},{key:"getFullStack",value:function(e){if(!e)return"";var t=e,n=t.stack||t.message||"(no stack)";Array.isArray(t._oErrorTags)&&t._oErrorTags.length&&(n+="\n".concat(t._oErrorTags.map((function(e){return e.stack})).join("\n")));var r=t.cause&&OError.getFullStack(t.cause);return r&&(n+="\ncaused by:\n"+r.replace(/^/gm,"    ")),n}}]),OError}(w(Error));C.maxTags=100;var E=function(e){"use strict";p(TaggedError,e);var t=y(TaggedError);function TaggedError(){return f(this,TaggedError),t.apply(this,arguments)}return h(TaggedError)}(C),O={name:"TaggedError",message:"... dropped tags",stack:"TaggedError: ... dropped tags"};e.exports=C},54411:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,d=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,f=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw f}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(l=a.key,f=void 0,f=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(l,"string"),"symbol"===r(f)?f:String(f)),a)}var l,f}n(58188),n(88233),n(95342),n(36728),n(32501),n(71372),n(18178),n(6710),n(43430),n(9575),n(96264),n(34115),n(634),n(71245),n(26936),n(27233),n(28673),n(77950),n(21850),n(20796),n(15735),n(6886);var d=function(){"use strict";function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==t&&(t=[]),this.changes=t,null==n&&(n=[]),this.comments=n,this.setIdSeed(e.generateIdSeed()),this.resetDirtyState()}var t,n,r;return t=e,r=[{key:"generateIdSeed",value:function(){var e=Math.floor(32767*Math.random()).toString(16),t=Math.floor(16777216*Math.random()).toString(16),n=Math.floor((new Date).valueOf()/1e3).toString(16);return"00000000".substr(0,8-n.length)+n+"000000".substr(0,6-t.length)+t+"0000".substr(0,4-e.length)+e}},{key:"generateId",value:function(){return this.generateIdSeed()+"000001"}}],(n=[{key:"getIdSeed",value:function(){return this.id_seed}},{key:"setIdSeed",value:function(e){this.id_seed=e,this.id_increment=0}},{key:"newId",value:function(){this.id_increment++;var e=this.id_increment.toString(16);return this.id_seed+"000000".substr(0,6-e.length)+e}},{key:"getComment",value:function(e){var t,n=null,r=a(this.comments);try{for(r.s();!(t=r.n()).done;){var l=t.value;if(l.id===e){n=l;break}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"removeCommentId",value:function(e){var t=this.getComment(e);null!=t&&(this.comments=this.comments.filter((function(t){return t.id!==e})),this._markAsDirty(t,"comment","removed"))}},{key:"moveCommentId",value:function(e,t,n){var r,l=a(this.comments);try{for(l.s();!(r=l.n()).done;){var f=r.value;f.id===e&&(f.op.p=t,f.op.c=n,this._markAsDirty(f,"comment","moved"))}}catch(e){l.e(e)}finally{l.f()}}},{key:"getChange",value:function(e){var t,n=null,r=a(this.changes);try{for(r.s();!(t=r.n()).done;){var l=t.value;if(l.id===e){n=l;break}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"getChanges",value:function(e){var t,n=[],r={},l=a(e);try{for(l.s();!(t=l.n()).done;)r[t.value]=!0}catch(e){l.e(e)}finally{l.f()}var f,d=a(this.changes);try{for(d.s();!(f=d.n()).done;){var h=f.value;r[h.id]&&(delete r[h.id],n.push(h))}}catch(e){d.e(e)}finally{d.f()}return n}},{key:"removeChangeId",value:function(e){var t=this.getChange(e);null!=t&&this._removeChange(t)}},{key:"removeChangeIds",value:function(e){if(null!=e&&0!==e.length){var t,n={},r=a(e);try{for(r.s();!(t=r.n()).done;)n[t.value]=!0}catch(e){r.e(e)}finally{r.f()}var l,f=[],d=a(this.changes);try{for(d.s();!(l=d.n()).done;){var h=l.value;n[h.id]?(delete n[h.id],this._markAsDirty(h,"change","removed")):f.push(h)}}catch(e){d.e(e)}finally{d.f()}this.changes=f}}},{key:"validate",value:function(e){var t,n,r=a(this.changes);try{for(r.s();!(n=r.n()).done;){var l=n.value;if(null!=l.op.i&&(t=e.slice(l.op.p,l.op.p+l.op.i.length))!==l.op.i)throw new Error("Change (".concat(JSON.stringify(l),") doesn't match text (").concat(JSON.stringify(t),")"))}}catch(e){r.e(e)}finally{r.f()}var f,d=a(this.comments);try{for(d.s();!(f=d.n()).done;){var h=f.value;if((t=e.slice(h.op.p,h.op.p+h.op.c.length))!==h.op.c)throw new Error("Comment (".concat(JSON.stringify(h),") doesn't match text (").concat(JSON.stringify(t),")"))}}catch(e){d.e(e)}finally{d.f()}}},{key:"applyOp",value:function(e,t){if(null==t&&(t={}),null==t.ts&&(t.ts=new Date),null!=e.i)this.applyInsertToChanges(e,t),this.applyInsertToComments(e);else if(null!=e.d)this.applyDeleteToChanges(e,t),this.applyDeleteToComments(e);else{if(null==e.c)throw new Error("unknown op type");this.addComment(e,t)}}},{key:"applyOps",value:function(e,t){null==t&&(t={});var n,r=a(e);try{for(r.s();!(n=r.n()).done;){var l=n.value;this.applyOp(l,t)}}catch(e){r.e(e)}finally{r.f()}}},{key:"addComment",value:function(e,t){var n;null!=this.getComment(e.t)?this.moveCommentId(e.t,e.p,e.c):(this.comments.push(n={id:e.t||this.newId(),op:{c:e.c,p:e.p,t:e.t},metadata:t}),this._markAsDirty(n,"comment","added"))}},{key:"applyInsertToComments",value:function(e){var t,n=a(this.comments);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.p<=r.op.p)r.op.p+=e.i.length,this._markAsDirty(r,"comment","moved");else if(e.p<r.op.p+r.op.c.length){var l=e.p-r.op.p;r.op.c=r.op.c.slice(0,+(l-1)+1||void 0)+e.i+r.op.c.slice(l),this._markAsDirty(r,"comment","moved")}}}catch(e){n.e(e)}finally{n.f()}}},{key:"applyDeleteToComments",value:function(e){var t,n=e.p,r=e.d.length,l=e.p+r,f=a(this.comments);try{for(f.s();!(t=f.n()).done;){var d=t.value,h=d.op.p,p=d.op.p+d.op.c.length,y=p-h;if(l<=h)d.op.p-=r,this._markAsDirty(d,"comment","moved");else if(n>=p);else{var w=void 0,x=void 0;x=n<=h?"":d.op.c.slice(0,n-h),w=l>=p?"":d.op.c.slice(l-h);var _=d.op.c.slice(x.length,y-w.length),S=Math.max(0,h-n);if(_!==e.d.slice(S).slice(0,_.length))throw new Error("deleted content does not match comment content");d.op.p=Math.min(h,n),d.op.c=x+w,this._markAsDirty(d,"comment","moved")}}}catch(e){f.e(e)}finally{f.f()}}},{key:"applyInsertToChanges",value:function(e,t){for(var n,r=e.p,a=e.i.length,l=e.p+a,f=!!e.u,d=!1,h=null,p=[],y=[],w=[],x=0;x<this.changes.length;x++){var _=(n=this.changes[x]).op.p;if(null!=n.op.d)r<_?(n.op.p+=a,p.push(n)):r===_&&(f&&n.op.d.length>=e.i.length&&n.op.d.slice(0,e.i.length)===e.i?(n.op.d=n.op.d.slice(e.i.length),n.op.p+=e.i.length,""===n.op.d?y.push(n):p.push(n),d=!0):(n.op.p+=a,p.push(n)));else if(null!=n.op.i){var S=void 0,k=_+n.op.i.length,C=r>=_&&r<=k,E=t.user_id===n.metadata.user_id,O=this.changes[x+1],j=null!=O&&null!=O.op.d&&e.p===k&&O.op.p===e.p,T=f&&j&&O.op.d.slice(0,e.i.length)===e.i,A=null!=h&&null!=h.op.d&&h.op.p===l;if(this.track_changes&&C&&!A&&!d&&!T&&E)S=r-_,n.op.i=n.op.i.slice(0,S)+e.i+n.op.i.slice(S),n.metadata.ts=t.ts,d=!0,p.push(n);else if(r<=_)n.op.p+=a,p.push(n);else if((!E||!this.track_changes)&&_<r&&r<k){S=r-_;var P=n.op.i.slice(0,S),D=n.op.i.slice(S);n.op.i=P,p.push(n);var R={op:{i:D,p:_+S+a},metadata:{}};for(var I in n.metadata){var M=n.metadata[I];R.metadata[I]=M}w.push(R)}}h=n}this.track_changes&&!d&&this._addOp(e,t);for(var L=0,N=w;L<N.length;L++){var F=N[L];e=F.op,t=F.metadata,this._addOp(e,t)}for(var q=0,B=y;q<B.length;q++)n=B[q],this._removeChange(n);for(var U=0,H=p;U<H.length;U++)n=H[U],this._markAsDirty(n,"change","moved")}},{key:"applyDeleteToChanges",value:function(e,t){var n,r=this,l=e.p,f=e.d.length,d=e.p+f,h=[],p=[],y=[],w=a(this.changes);try{for(w.s();!(n=w.n()).done;){var x=n.value,_=void 0;if(null!=x.op.i){var S=(_=x.op.p)+x.op.i.length;if(d<=_)x.op.p-=f,p.push(x);else if(l>=S);else{var k=void 0,C=void 0,E=void 0,O=void 0;l>=_?(C="",O=x.op.i.slice(0,l-_)):(C=e.d.slice(0,_-l),O=""),d<=S?(k="",E=x.op.i.slice(d-_)):(k=e.d.slice(S-l),E="");var j=O+E;j.length>0?(x.op.i=j,x.op.p=Math.min(_,l),p.push(x)):h.push(x);var T=e.d.length-C.length-k.length,A=C.length,P={d:e.d.slice(A,A+T),p:A};P.d.length>0&&y.push(P)}}else if(null!=x.op.d)if(d<(_=x.op.p)||!this.track_changes&&d===_)x.op.p-=f,p.push(x);else if(l<=_&&_<=d)if(this.track_changes){var D=_-l;y.push({i:x.op.d,p:D}),h.push(x)}else x.op.p=l,p.push(x)}}catch(e){w.e(e)}finally{w.f()}e={p:e.p,d:this._applyOpModifications(e.d,y)};for(var R=0,I=h;R<I.length;R++){var M=I[R];e.d.length>0&&null!=M.op.d&&e.p<=M.op.p&&M.op.p<=e.p+e.d.length?(M.op.p=e.p,M.op.d=e.d,M.metadata=t,p.push(M),e.d=""):this._removeChange(M)}if(this.track_changes&&e.d.length>0)this._addOp(e,t);else{var L=this._scanAndMergeAdjacentUpdates();p=p.concat(L.movedChanges);var N,F=a(L.removeChanges);try{var q=function(){var e=N.value;r._removeChange(e),p=p.filter((function(t){return t!==e}))};for(F.s();!(N=F.n()).done;)q()}catch(e){F.e(e)}finally{F.f()}}var B,U=a(p);try{for(U.s();!(B=U.n()).done;){var H=B.value;this._markAsDirty(H,"change","moved")}}catch(e){U.e(e)}finally{U.f()}}},{key:"_addOp",value:function(e,t){var n={id:this.newId(),op:this._clone(e),metadata:this._clone(t)};this.changes.push(n),this.changes.sort((function(e,t){var n=e.op.p-t.op.p;return 0!==n?n:null!=e.op.i&&null!=t.op.d?1:null!=e.op.d&&null!=t.op.i?-1:0})),this._markAsDirty(n,"change","added")}},{key:"_removeChange",value:function(e){this.changes=this.changes.filter((function(t){return t.id!==e.id})),this._markAsDirty(e,"change","removed")}},{key:"_applyOpModifications",value:function(e,t){t.sort((function(e,t){var n=t.p-e.p;return 0!==n?n:null!=e.i&&null!=t.d?1:null!=e.d&&null!=t.i?-1:0}));var n,r=a(t);try{for(r.s();!(n=r.n()).done;){var l=n.value;if(null!=l.i)e=e.slice(0,l.p)+l.i+e.slice(l.p);else if(null!=l.d){if(e.slice(l.p,l.p+l.d.length)!==l.d)throw new Error("deleted content does not match. content: ".concat(JSON.stringify(e),"; modification: ").concat(JSON.stringify(l)));e=e.slice(0,l.p)+e.slice(l.p+l.d.length)}}}catch(e){r.e(e)}finally{r.f()}return e}},{key:"_scanAndMergeAdjacentUpdates",value:function(){var e,t=null,n=[],r=[],l=a(this.changes);try{for(l.s();!(e=l.n()).done;){var f,d,h,p=e.value;if(null!=(null===(f=t)||void 0===f?void 0:f.op.i)&&null!=p.op.i){var y=t.op.p+t.op.i.length,w=t.metadata.user_id,x=p.op.p,_=p.metadata.user_id;y===x&&w===_&&(n.push(p),t.op.i+=p.op.i,r.push(t))}else null!=(null===(d=t)||void 0===d?void 0:d.op.d)&&null!=p.op.d&&(null===(h=t)||void 0===h?void 0:h.op.p)===p.op.p?(t.op.d+=p.op.d,n.push(p),r.push(t)):t=p}}catch(e){l.e(e)}finally{l.f()}return{movedChanges:r,removeChanges:n}}},{key:"resetDirtyState",value:function(){this._dirtyState={comment:{moved:{},removed:{},added:{}},change:{moved:{},removed:{},added:{}}}}},{key:"getDirtyState",value:function(){return this._dirtyState}},{key:"_markAsDirty",value:function(e,t,n){this._dirtyState[t][n][e.id]=e}},{key:"_clone",value:function(e){var t={};for(var n in e){var r=e[n];t[n]=r}return t}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=d},27481:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});n(77950),n(74069),n(94908);var r=n(99618);n.p=(0,r.Z)("ol-baseAssetPath");n(49798),n(64027),n(9326),n(76635),n(7445),n(63733),n(81154),n(94432),n(5852),n(42070),n(78262),n(12405);var a=n(46181),l=(n(93994),n(39529),n(36728),angular.module("ErrorCatcher",[]));l.config(["$provide",function(e){return e.decorator("$exceptionHandler",["$log","$delegate",function(e,t){return function(e,n){if("Possibly unhandled rejection: canceled"!==e||void 0!==n)return(0,a.T)(e,{tags:{handler:"angular-exception-handler"}}),t(e,n)}}])}]),l.factory("unAuthHttpResponseInterceptor",["$q","$location",function(e,t){return{responseError:function responseError(t){return[401,403].includes(t.status)&&!(null!=t.config?t.config.disableAutoLoginRedirect:void 0)&&(window.location.pathname.match(/^\/project/)?window.location="/login?redir=".concat(encodeURI(window.location.pathname)):window.location="/login"),e.reject(t)}}}]),l.config(["$httpProvider",function(e){return e.interceptors.push("unAuthHttpResponseInterceptor")}]);n(2018);function f(){try{var e;return(e=$).sessionStorage.apply(e,arguments)}catch(e){return console.error("sessionStorage exception",e),null}}angular.module("sessionStorage",[]).value("sessionStorage",f);var d=n(81407),h=angular.module("SharelatexApp",["ui.bootstrap","autocomplete","RecursionHelper","ng-context-menu","ngSanitize","ipCookie","ErrorCatcher","localStorage","sessionStorage","ui.select"]).config(["$qProvider","$httpProvider","uiSelectConfig",function(e,t,n){e.errorOnUnhandledRejections(!1),n.spinnerClass="fa fa-refresh ui-select-spin",(0,d.p)()}]);h.run(["$rootScope","$templateCache",function(e,t){e.usersEmail=(0,r.Z)("ol-usersEmail"),t.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="fa fa-times" aria-hidden="true"></i></a></span></div>')}]);var p=window.location.search.match(/debug=true/);window.sl_debugging=p,window.sl_console=p?console:{log:function(){}};var y=h},3690:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});n(15735),n(58188),n(93244),n(28673),n(6886),n(9575),n(96264),n(34115),n(634),n(71372),n(71245),n(20796);var r=n(99618),a=["Overleaf","overleaf","ShareLaTeX","sharelatex","LaTeX","TeX","BibTeX","BibLaTeX","XeTeX","XeLaTeX","LuaTeX","LuaLaTeX","http","https","www","COVID","Lockdown","lockdown","Coronavirus","coronavirus"];function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,f=void 0,f=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===l(f)?f:String(f)),r)}var a,f}var d=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset(),this.ignoredMisspellings=new Set(a),window.addEventListener("learnedWords:doreset",(function(){return t.reset()}))}var t,n,l;return t=e,(n=[{key:"reset",value:function(){this.learnedWords=new Set((0,r.Z)("ol-learnedWords")),window.dispatchEvent(new CustomEvent("learnedWords:reset"))}},{key:"add",value:function(e){this.learnedWords.add(e),window.dispatchEvent(new CustomEvent("learnedWords:add",{detail:e}))}},{key:"remove",value:function(e){this.learnedWords.delete(e),window.dispatchEvent(new CustomEvent("learnedWords:remove",{detail:e}))}},{key:"has",value:function(e){return this.ignoredMisspellings.has(e)||this.learnedWords.has(e)}}])&&f(t.prototype,n),l&&f(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}())},15270:function(e,t,n){"use strict";n.d(t,{t:function(){return y}});n(58188),n(73439),n(21515),n(43430),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784),a=n(28684),l=n(50325),f=n(30286);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e,t){return l.W.compare(e.path,t.path)};function y(e){var t=d((0,r.useState)(!1),2),n=t[0],l=t[1],h=d((0,r.useState)(null),2),y=h[0],w=h[1],x=d((0,r.useState)(!1),2),_=x[0],S=x[1],k=(0,f.Z)().signal;return(0,r.useEffect)((function(){e&&(l(!0),S(!1),w(null),(0,a.xA)("/project/".concat(e,"/entities"),{signal:k}).then((function(e){w(e.entities.sort(p))})).catch((function(e){return S(e)})).finally((function(){return l(!1)})))}),[e,k]),{loading:n,data:y,error:_}}},25137:function(e,t,n){"use strict";n.d(t,{h:function(){return y}});n(58188),n(73439),n(21515),n(95342),n(77950),n(74069),n(1939),n(43430),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(21850),n(71372);var r=n(2784),a=n(28684),l=n(50325),f=n(30286);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e,t){return l.W.compare(e.path,t.path)};function y(e){var t=d((0,r.useState)(!1),2),n=t[0],l=t[1],h=d((0,r.useState)(null),2),y=h[0],w=h[1],x=d((0,r.useState)(!1),2),_=x[0],S=x[1],k=(0,f.Z)().signal;return(0,r.useEffect)((function(){e&&(l(!0),S(!1),w(null),(0,a.ty)("/project/".concat(e,"/compile"),{body:{check:"silent",draft:!1,incrementalCompilesEnabled:!1},signal:k}).then((function(e){if("success"===e.status){var t=e.outputFiles.filter((function(e){return e.path.match(/.*\.(pdf|png|jpeg|jpg|gif)/)}));e.outputFiles.forEach((function(t){t.clsiServerId=e.clsiServerId,t.compileGroup=e.compileGroup})),w(t.sort(p))}else S("linked-project-compile-error")})).catch((function(e){return S(e)})).finally((function(){return l(!1)})))}),[e,k]),{loading:n,data:y,error:_}}},87983:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});n(26936),n(58188),n(73439),n(21515),n(43430),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(27233),n(77950),n(21850),n(71372);var r=n(2784),a=n(28684),l=n(50325),f=n(30286);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e,t){return l.W.compare(e.name,t.name)};function y(){var e=d((0,r.useState)(!0),2),t=e[0],n=e[1],l=d((0,r.useState)(null),2),h=l[0],y=l[1],w=d((0,r.useState)(!1),2),x=w[0],_=w[1],S=(0,f.Z)().signal;return(0,r.useEffect)((function(){(0,a.xA)("/user/projects",{signal:S}).then((function(e){y(e.projects.sort(p))})).catch((function(e){return _(e)})).finally((function(){return n(!1)}))}),[S]),{loading:t,data:h,error:x}}},45445:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});n(18178);var r=n(28684),a=function(e,t){return(0,r.ty)("/project/".concat(e,"/doc/").concat(t,"/metadata"))}},53687:function(e,t,n){"use strict";n.d(t,{y:function(){return l}});n(32501),n(58188),n(26936),n(27233),n(28673),n(77950),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372);function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,d=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,f=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw f}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){if(!e)return 0;var t=function(e){function t(e){if(null==e)return 0;var n=0;if(e.folders){n+=e.folders.length;var a,l=r(e.folders);try{for(l.s();!(a=l.n()).done;){n+=t(a.value)}}catch(e){l.e(e)}finally{l.f()}}return e.docs&&(n+=e.docs.length),e.fileRefs&&(n+=e.fileRefs.length),n}return t(e)}(e),n=window.ExposedSettings.maxEntitiesPerProject,a=function(e,t,n){if(e>=t)return"error";if(e>=t-n)return"warning";return"success"}(t,n,Math.ceil(n/20));return{value:t,status:a,limit:n}}},50325:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var r=new Intl.Collator("en",{numeric:!0,sensitivity:"variant",caseFirst:"upper"})},38113:function(e,t,n){"use strict";n.d(t,{Z7:function(){return p},gl:function(){return f},mz:function(){return h},we:function(){return l}});n(15735),n(58188),n(93244),n(28673),n(6886),n(1939),n(18178);var r=n(91601),a=n.n(r);function l(e,t){var n=p(e,t);if(n)return n;throw new(a())("Entity not found in tree",{entityId:t})}function f(e,t){var n=new Set;return t.forEach((function(t){n.add(l(e,t))})),n}function d(e){var t=new Set([e._id]);for(var n in e.folders){d(e.folders[n]).forEach((function(e){t.add(e)}))}return t}function h(e){var t=new Set;return e.forEach((function(e){d(e).forEach((function(e){t.add(e)}))})),t}function p(e,t,n){for(var r in n||(n=[e._id]),e.docs){var a=e.docs[r];if(a._id===t)return{entity:a,type:"doc",parent:e.docs,parentFolderId:e._id,path:n,index:r}}for(var l in e.fileRefs){var f=e.fileRefs[l];if(f._id===t)return{entity:f,type:"fileRef",parent:e.fileRefs,parentFolderId:e._id,path:n,index:l}}for(var d in e.folders){var h=e.folders[d];if(h._id===t)return{entity:h,type:"folder",parent:e.folders,parentFolderId:e._id,path:n,index:d};var y=p(h,t,n.concat(h._id));if(y)return y}return null}},20681:function(e,t,n){"use strict";n.d(t,{$O:function(){return E},Gd:function(){return S},RB:function(){return C},xv:function(){return k}});n(43105),n(18178),n(32501),n(71372),n(43450),n(9575),n(96264),n(34115),n(634),n(58188),n(71245),n(34769),n(95342),n(68625),n(36728),n(1939),n(62775),n(20796),n(15735),n(28673),n(6886),n(27233),n(26936),n(77950),n(21850);var r=n(38113);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var l=["type"];function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function h(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t,n){var r=n.newName;return O(e,t,(function(e,t,n){var a=Object.assign([],e),l=x(x({},t),{},{name:r});return a[n]=l,a}))}function k(e,t){return O(e,t,(function(e,t,n){return[].concat(h(e.slice(0,n)),h(e.slice(n+1)))}))}function C(e,t,n){var a=(0,r.we)(e,t);return a.parentFolderId===n?e:E(k(e,t),n,x(x({},a.entity),{},{type:a.type}))}function E(e,t,n){var r=n.type,a=d(n,l);if(!r)throw new Error("Entity has no type");var f="".concat(r,"s");return O(e,t,(function(e,t,n){return e[n]=x(x({},t),{},_({},f,[].concat(h(t[f]),[a]))),e}))}function O(e,t,n){if(e._id===t)return f(n([],e,0),1)[0];for(var r=0,a=["docs","fileRefs","folders"];r<a.length;r++)for(var l=a[r],d=0;d<e[l].length;d++){var h=e[l][d];if(h._id===t)return x(x({},e),{},_({},l,n(e[l],h,d)))}var p=e.folders.map((function(e){return O(e,t,n)}));return x(x({},e),{},{folders:p})}},81407:function(e,t,n){"use strict";n.d(t,{p:function(){return f}});n(36728);var r=n(64600),a=n(99618),l=!1;function f(){if(!l&&!(0,a.Z)("ol-mathJax3Path")&&(0,r.a)()){var e=[["\\(","\\)"]];(0,a.Z)("ol-no-single-dollar")||e.push(["$","$"]),MathJax.Hub.Config({messageStyle:"none",imageFont:null,"fast-preview":{disabled:!0},"HTML-CSS":{availableFonts:["TeX"],scale:110,matchFontHeight:!1},TeX:{equationNumbers:{autoNumber:"AMS"},useLabelIDs:!1},skipStartupTypeset:!0,tex2jax:{processEscapes:!0,inlineMath:e,displayMath:[["$$","$$"],["\\[","\\]"]]}}),l=!0}}},80486:function(e,t,n){"use strict";n.d(t,{T:function(){return p}});n(58188),n(73439),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(96882),n(38859),n(17525),n(18275),n(96928),n(71372),n(36728),n(1939),n(26936),n(32501);var r,a=n(99618);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},d=a.iterator||"@@iterator",h=a.asyncIterator||"@@asyncIterator",p=a.toStringTag||"@@toStringTag";function y(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{y({},"")}catch(e){y=function(e,t,n){return e[t]=n}}function w(e,t,n,a){var l=t&&t.prototype instanceof S?t:S,f=Object.create(l.prototype),d=new L(a||[]);return r(f,"_invoke",{value:D(e,n,d)}),f}function x(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=w;var _={};function S(){}function k(){}function C(){}var E={};y(E,d,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(N([])));j&&j!==t&&n.call(j,d)&&(E=j);var T=C.prototype=S.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){y(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function a(r,f,d,h){var p=x(e[r],e,f);if("throw"!==p.type){var y=p.arg,w=y.value;return w&&"object"==l(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,d,h)}),(function(e){a("throw",e,d,h)})):t.resolve(w).then((function(e){y.value=e,d(y)}),(function(e){return a("throw",e,d,h)}))}h(p.arg)}var f;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return f=f?f.then(r,r):r()}})}function D(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return F()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=R(f,n);if(d){if(d===_)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=x(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===_)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function R(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=x(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,_;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var t=e[d];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return k.prototype=C,r(T,"constructor",{value:C,configurable:!0}),r(C,"constructor",{value:k,configurable:!0}),k.displayName=y(C,p,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,y(e,p,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},A(P.prototype),y(P.prototype,h,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new P(w(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},A(T),y(T,p,"Generator"),y(T,d,(function(){return this})),y(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,_):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),_}},e}function d(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){d(l,r,a,f,h,"next",e)}function h(e){d(l,r,a,f,h,"throw",e)}f(void 0)}))}}var p=function(){var e=h(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r=new Promise((function(e,t){window.MathJax={tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]],packages:{"[-]":["html","require"]},processEscapes:!0,processEnvironments:!0},loader:{load:["ui/safe"]},options:{enableMenu:!1},startup:{typeset:!1}};var n=document.createElement("script");n.src=(0,a.Z)("ol-mathJax3Path"),n.addEventListener("load",h(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.MathJax.startup.promise;case 2:document.head.appendChild(window.MathJax.svgStylesheet()),e(window.MathJax);case 4:case"end":return t.stop()}}),t)})))),n.addEventListener("error",t),document.head.append(n)}))),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},64600:function(e,t,n){"use strict";function r(){return!("undefined"==typeof MathJax||!MathJax||!MathJax.Hub)}n.d(t,{a:function(){return r}})},26501:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784),a=n(13980),l=n.n(a),f=n(72779),d=n.n(f),h=n(76699),p=(n(27072),n(67694),n(43450),n(18178),n(39529),n(31235),n(93057)),y=n(10280),w=n(52322);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,r.memo)((function(e){var t=e.outlineItem,n=e.jumpToLine,a=e.highlightedLine,l=e.matchesHighlightedLine,f=e.containsHighlightedLine,_=(0,h.$)().t,S=x((0,r.useState)(!0),2),k=S[0],C=S[1],E=(0,r.useRef)(),j=(0,r.useRef)(!1),T=d()("outline-item",{"outline-item-no-children":!t.children}),A=l||!k&&f,P=d()("outline-item-link",{"outline-item-link-highlight":A});(0,r.useEffect)((function(){var e=j.current;j.current=A,!e&&A&&(0,p.Z)(E.current,{scrollMode:"if-needed",block:"center"})}),[A,E,j]);var D=t.children?k:void 0;return(0,w.jsxs)("li",{className:T,"aria-expanded":D,role:"treeitem","aria-current":A,"aria-label":t.title,children:[(0,w.jsxs)("div",{className:"outline-item-row",children:[t.children?(0,w.jsx)("button",{className:"outline-item-expand-collapse-btn",onClick:function(){C(!k)},"aria-label":_(k?"collapse":"expand"),children:(0,w.jsx)(y.Z,{type:k?"angle-down":"angle-right",className:"outline-caret-icon"})}):null,(0,w.jsx)("button",{className:P,onClick:function(e){var r=2===e.detail;n(t.line,r)},ref:E,children:t.title})]}),k&&t.children?(0,w.jsx)(O,{outline:t.children,jumpToLine:n,isRoot:!1,highlightedLine:f?a:null,containsHighlightedLine:f}):null]})}));S.propTypes={outlineItem:l().exact({line:l().number.isRequired,title:l().string.isRequired,level:l().number,children:l().array,from:l().number,to:l().number}).isRequired,jumpToLine:l().func.isRequired,highlightedLine:l().number,matchesHighlightedLine:l().bool,containsHighlightedLine:l().bool};var k=S;function C(e){return(e||[]).map((function(e){return C(e.children).concat(e.line)})).flat()}var E=(0,r.memo)((function(e){var t=e.outline,n=e.jumpToLine,r=e.isRoot,a=e.highlightedLine,l=e.containsHighlightedLine,f=d()("outline-item-list",{"outline-item-list-root":r});return(0,w.jsx)("ul",{className:f,role:r?"tree":"group",children:t.map((function(e,t){var r=l&&a===e.line,f=l&&C(e.children).includes(a);return(0,w.jsx)(k,{outlineItem:e,jumpToLine:n,highlightedLine:r||f?a:null,matchesHighlightedLine:r,containsHighlightedLine:f},"".concat(e.level,"-").concat(t))}))})}));E.propTypes={outline:l().array.isRequired,jumpToLine:l().func.isRequired,isRoot:l().bool,highlightedLine:l().number,containsHighlightedLine:l().bool};var O=E;function j(e){var t=e.outline,n=e.jumpToLine,r=e.highlightedLine,a=(0,h.$)().t;return(0,w.jsx)("div",{children:t.length?(0,w.jsx)(O,{outline:t,jumpToLine:n,isRoot:!0,highlightedLine:r,containsHighlightedLine:!0}):(0,w.jsxs)("div",{className:"outline-body-no-elements",children:[a("we_cant_find_any_sections_or_subsections_in_this_file"),"."," ",(0,w.jsx)("a",{href:"/learn/how-to/Using_the_File_Outline_feature",className:"outline-body-link",target:"_blank",rel:"noopener noreferrer",children:a("find_out_more_about_the_file_outline")})]})})}j.propTypes={outline:l().array.isRequired,jumpToLine:l().func.isRequired,highlightedLine:l().number};var T=j,A=n(76066),P=n(1281),D=n(14951),R=n(24958);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=r.memo((function(e){var t=e.isTexFile,n=e.outline,a=e.jumpToLine,f=e.onToggle,p=e.eventTracking,x=e.highlightedLine,_=e.show,S=e.isPartial,k=void 0!==S&&S,C=(0,h.$)().t,E=(0,D.d2)({_id:l().string.isRequired})._id,O="file_outline.expanded.".concat(E),j=I((0,r.useState)((function(){return!1!==A.Z.getItem(O)})),2),P=j[0],M=j[1],L=t&&P;(0,r.useEffect)((function(){f(L)}),[L,f]);var N=d()("outline-pane",{"outline-pane-disabled":!t});return _?(0,w.jsxs)("div",{className:N,children:[(0,w.jsx)("header",{className:"outline-header",children:(0,w.jsxs)("button",{className:"outline-header-expand-collapse-btn",disabled:!t,onClick:function(){t&&(A.Z.setItem(O,!P),p.sendMB(P?"outline-collapse":"outline-expand"),M(!P))},"aria-label":C(P?"hide_outline":"show_outline"),children:[(0,w.jsx)(y.Z,{type:L?"angle-down":"angle-right",className:"outline-caret-icon"}),(0,w.jsx)("h4",{className:"outline-header-name",children:C("file_outline")}),k&&(0,w.jsx)(R.Z,{id:"partial-outline",description:C("partial_outline_warning"),overlayProps:{placement:"top"},children:(0,w.jsx)("span",{role:"status",children:(0,w.jsx)(y.Z,{type:"exclamation-triangle","aria-label":C("partial_outline_warning")})})})]})}),P&&t?(0,w.jsx)("div",{className:"outline-body",children:(0,w.jsx)(T,{outline:n,jumpToLine:a,highlightedLine:x})}):null]}):null}));L.propTypes={isTexFile:l().bool.isRequired,outline:l().array.isRequired,jumpToLine:l().func.isRequired,onToggle:l().func.isRequired,eventTracking:l().object.isRequired,highlightedLine:l().number,show:l().bool.isRequired,isPartial:l().bool};var N=(0,P.Z)(L)},30647:function(e,t,n){"use strict";var r=n(13980),a=n.n(r),l=n(76699),f=n(86814),d=n(27529),h=n(52322);function p(e){var t=e.type,n=(0,l.$)().t,r=(0,h.jsx)(f.c,{i18nKey:"try_recompile_project_or_troubleshoot",components:[(0,h.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link")]});switch(t){case"pdf":return(0,h.jsxs)(d.l,{children:[(0,h.jsx)("p",{children:n("pdf_viewer_error")}),(0,h.jsx)("p",{children:r})]});case"logs":return(0,h.jsxs)(d.l,{children:[(0,h.jsx)("p",{children:n("log_viewer_error")}),(0,h.jsx)("p",{children:r})]});default:return(0,h.jsxs)(d.l,{children:[(0,h.jsx)("p",{children:n("pdf_preview_error")}),(0,h.jsx)("p",{children:r})]})}}p.propTypes={type:a().oneOf(["preview","pdf","logs"]).isRequired},t.Z=p},17626:function(e,t,n){"use strict";n.d(t,{w:function(){return S},z:function(){return _}});n(6710),n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(34769),n(95342),n(68625),n(36728),n(1939),n(62775),n(20796),n(15735),n(28673),n(6886);var r=n(98022),a=n(96227),l=n(24452);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=9,w=(0,r.v4)(),x={viewerId:w};function _(){return x}function S(e,t,n){var r=e.timings,f=e.pdfCachingMinChunkSize,d={compileTimeClientE2E:t,compileTimeServerE2E:null==r?void 0:r.compileE2E},p=!0;return{deliveryLatencies:d,firstRenderDone:function(e){var t,r,x=e.latencyFetch,_=e.latencyRender,S=e.pdfCachingMetrics;p&&(p=!1,d.totalDeliveryTime=Math.ceil(performance.now()-n),d.latencyFetch=x,_&&(d.latencyRender=_),l.bO&&(t=h(h({pdfCachingMinChunkSize:f},d),S),r=h(h({version:y},t),{},{id:w}),sl_console.log("/event/compile-metrics",JSON.stringify(r)),(0,a.sendMB)("compile-metrics-v6",r)))}}}},24452:function(e,t,n){"use strict";n.d(t,{PY:function(){return h},bO:function(){return x},kk:function(){return y},ns:function(){return w},yl:function(){return p}});n(58188);var r,a=n(99618),l="undefined"!=typeof TextEncoder;l||console.warn("TextEncoder is not available. Disabling pdf-caching.");var f=Array.isArray(null===(r=navigator.userAgentData)||void 0===r?void 0:r.brands)&&navigator.userAgentData.brands.some((function(e){return"Opera"===e.brand}));function d(e){var t;return!!l&&(!f&&"enabled"===(null===(t=(0,a.Z)("ol-splitTestVariants"))||void 0===t?void 0:t[e]))}f&&console.warn("Browser cache is limited in Opera. Disabling pdf-caching.");var h=d("pdf-caching-cached-url-lookup"),p=d("pdf-caching-prefetching"),y=d("pdf-caching-prefetch-large"),w=d("pdf-caching-mode"),x=d("track-pdf-download")},57029:function(e,t,n){"use strict";n.d(t,{E5:function(){return h},Um:function(){return d},tx:function(){return p},uz:function(){return E}});n(41549),n(43450),n(18178),n(36728),n(32501),n(39529),n(26936),n(71372),n(31235);var r=n(1727),a=n(77120),l=n(66144),f=n(47037),d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;return function(l){return!l.state.readOnly&&(l.dispatch(l.state.changeByRange((function(f){var d={prefix:e,suffix:t};if(n){var h=l.state.doc.lineAt(f.anchor);f.empty&&(f=r.jT.range(h.from,h.to)),f.from!==h.from&&(d.prefix="\n".concat(e)),f.to!==h.to&&(d.suffix="".concat(t,"\n"))}var p=l.state.sliceDoc(f.from,f.to),y=f.map(l.state.changes([{from:f.from,insert:"".concat(d.prefix)}]),1);return{range:a?a(y):y,changes:[{from:f.from,to:f.to,insert:"".concat(d.prefix).concat(p).concat(d.suffix)}]}})),{scrollIntoView:!0}),!0)}},h=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return!t.state.readOnly&&(t.dispatch(t.state.changeByRange((function(n){if(n.empty)return{range:n};var r=t.state.doc.sliceString(n.from,n.to);return{range:n,changes:[{from:n.from,to:n.to,insert:e?r.toUpperCase():r.toLowerCase()}]}}))),!0)}},p=function(e){if(e.state.readOnly)return!1;var t=(0,a.q2)(e.state);return e.dispatch(e.state.changeByRange((function(n){var l=[];if(n.empty){var f,d=e.state.doc.lineAt(n.from),h=d.from,p=d.to;do{f=!1,t.between(h,p,(function(t,n){var r=Math.min(e.state.doc.lineAt(t).from,h),a=Math.max(e.state.doc.lineAt(n).to,p);r===h&&a===p||(f=!0,h=r,p=a)}))}while(f);return t.between(h,p,(function(t,n){l.push({offset:t-h,base:p+e.state.lineBreak.length,length:n-t})})),{range:n,changes:[{from:p,insert:e.state.lineBreak+e.state.doc.slice(h,p)}],effects:l.map((function(e){return a.SW.of({from:e.base+e.offset,to:e.base+e.offset+e.length})}))}}var y=n;return n.head>n.anchor&&(y=r.jT.range(n.head,n.head+(n.to-n.from))),{range:y,changes:[{from:n.head,insert:e.state.doc.slice(n.from,n.to)}]}}))),!0};function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=(0,a.l)(t,1e3),l=null;if("number"==typeof e){var d;l=null==r||null===(d=r.resolveInner(e,n))||void 0===d?void 0:d.parent;var h=(0,f.Fd)(l,e);null!=h&&h.parent&&(l=h.parent)}else l=null==e?void 0:e.parent;for(;["LongArg","TextArgument","OpenBrace","CloseBrace"].includes((null===(p=l)||void 0===p?void 0:p.type.name)||"");){var p;l=l.parent}return l||void 0}function w(e,t,n){var r=e.sliceDoc(t.from,t.to);return{changes:e.changes([{from:t.from,to:t.to,insert:"".concat(n,"{").concat(r,"}")}]),range:x(t,t.from+n.length+1,t.from+n.length+r.length+1)}}function x(e,t,n){return e.from===e.anchor?r.jT.range(t,n):r.jT.range(n,t)}function _(e,t){if(e!==t)throw new Error("Replacement in toggleRange failed validation. Expected ".concat(e," got ").concat(t))}function S(e,t,n){for(var r=e;r;r=r.parent){if((0,l.DC)(r,t,n))return r;if(r.type.is("UnknownCommand"))return null}return null}function k(e,t){var n,r=null==e||null===(n=e.getChild("TextArgument"))||void 0===n?void 0:n.getChild("LongArg");return Boolean(r&&r.from===t.from&&r.to===t.to)}function C(e,t,n,r){for(var a=n,f=(0,l.dw)(t,"UnknownCommand");k(f,a)&&f;f=(0,l.dw)(f.parent,"UnknownCommand"))if(a=x(a,f.from,f.to),(0,l.DC)(f,e,r)){var d,h=null===(d=f.getChild("TextArgument"))||void 0===d?void 0:d.getChild("LongArg");return h?x(n,h.from,h.to):n}return n}function E(e){return function(t){return!t.state.readOnly&&(t.dispatch(t.state.changeByRange((function(n){var f,d=function(e,t,n){var f=(0,a.qz)(n);if(f.length<t.to)return t;var d=f.resolveInner(t.from,1),h=f.resolveInner(t.to,-1),p=S(d,e,n),w=S(h,e,n),_=y(d,n);if(null!=_&&_.type.is("UnknownCommand")&&k(_,t))return C(e,(0,l.dw)(d,"UnknownCommand"),t,n);if(!p)return C(e,(0,l.dw)(d,"UnknownCommand"),t,n);if(d.type.is("CtrlSeq")&&t.from===t.to){var E,O=null===(E=d.parent)||void 0===E?void 0:E.parent;return O?r.jT.cursor(O.from):t}var j=t.from,T=t.to;return d.type.is("CtrlSeq")&&(j=d.to+1),d.type.is("OpenBrace")&&(j=d.to),p===w&&h.type.is("CloseBrace")&&(T=h.from),C(e,p,x(t,j,T),n)}(e,n,t.state),h=t.state.sliceDoc(d.from,d.to),p=y(d.from,t.state,0===d.from?1:-1),E=d.empty?p:y(d.to,t.state,d.to===t.state.doc.length?-1:1);if(p!==E){var O,j,T,A,P=p&&(0,l.DC)(p,e,t.state),D=E&&(0,l.DC)(E,e,t.state);if(P&&D&&null!=p&&null!==(O=p.parent)&&void 0!==O&&O.parent&&null!=E&&null!==(j=E.parent)&&void 0!==j&&j.parent)if(p.parent.parent===E.parent.parent){var R,I,M=t.state.sliceDoc(p.to,E.from),L=null===(R=p.lastChild)||void 0===R?void 0:R.getChild("LongArg"),N=null===(I=E.lastChild)||void 0===I?void 0:I.getChild("LongArg");if(!L||!N)throw new Error("Can't find argument node");var F=t.state.sliceDoc(p.from,E.to),q=t.state.sliceDoc(L.from,L.to),B=t.state.sliceDoc(N.from,N.to);return _("".concat(e,"{").concat(q,"}").concat(M).concat(e,"{").concat(B,"}"),F),{changes:t.state.changes([{from:p.from,to:E.to,insert:"".concat(e,"{").concat(q).concat(M).concat(B,"}")}]),range:x(d,d.from,d.to-e.length-1-1)}}if(D&&(null===(T=E.parent)||void 0===T?void 0:T.parent)===p){var U,H=t.state.sliceDoc(d.from,E.from),z=null===(U=E.lastChild)||void 0===U?void 0:U.getChild("LongArg");if(!z)throw new Error("Can't find argument node");var V=t.state.sliceDoc(z.from,z.to),W=t.state.sliceDoc(d.from,E.to);return _("".concat(H).concat(e,"{").concat(V,"}"),W),{changes:t.state.changes([{from:d.from,to:E.to,insert:"".concat(e,"{").concat(H).concat(V,"}")}]),range:x(d,d.from+e.length+1,d.to)}}if(P&&(null===(A=p.parent)||void 0===A?void 0:A.parent)===E){var Z,G=t.state.sliceDoc(p.to,d.to),K=null===(Z=p.lastChild)||void 0===Z?void 0:Z.getChild("LongArg");if(!K)throw new Error("Can't find argument node");var Y=t.state.sliceDoc(K.from,K.to),X=t.state.sliceDoc(p.from,d.to);return _("".concat(e,"{").concat(Y,"}").concat(G),X),{changes:t.state.changes([{from:p.from,to:d.to,insert:"".concat(e,"{").concat(Y).concat(G,"}")}]),range:x(d,d.from,d.to-1)}}return{range:d}}var J=p;if(h.includes("\n\n"))return{range:d};if(d.empty&&J&&d.from===J.from&&(0,l.DC)(J,e,t.state)||!J||!(0,l.DC)(J,e,t.state))return w(t.state,d,e);var Q=null===(f=J.lastChild)||void 0===f?void 0:f.getChild("LongArg");if(!Q)throw new Error("Can't find argument node");if(d.from===Q.from&&d.to!==Q.to){var ee=t.state.sliceDoc(d.to,Q.to),te=t.state.sliceDoc(J.from,J.to);_("".concat(e,"{").concat(h).concat(ee,"}"),te);var ne=t.state.changes([{from:J.from,to:J.to,insert:"".concat(h).concat(e,"{").concat(ee,"}")}]);return{range:x(d,d.from-e.length-1,d.to-e.length-1),changes:ne}}if(d.to===Q.to&&d.from!==Q.from){var re=t.state.sliceDoc(J.from,d.from),oe=t.state.sliceDoc(J.from,J.to);_("".concat(re).concat(h,"}"),oe);var ae=t.state.changes([{from:J.from,to:J.to,insert:"".concat(re,"}").concat(h)}]);return{range:x(d,d.from+1,d.to+1),changes:ae}}if(d.from!==Q.from&&d.to!==Q.to){var se=t.state.sliceDoc(J.from,d.from),le=t.state.sliceDoc(d.to,J.to),ce=t.state.sliceDoc(J.from,J.to);_("".concat(se).concat(h).concat(le),ce);var ue=t.state.changes([{from:J.from,to:J.to,insert:"".concat(se,"}").concat(h).concat(e,"{").concat(le)}]);return{range:x(d,d.from+1,d.to+1),changes:ue}}if(k(J,d)){var fe=t.state.sliceDoc(Q.from,Q.to),de=t.state.sliceDoc(J.from,J.to);_("".concat(e,"{").concat(h,"}"),de);var he=t.state.changes([{from:J.from,to:J.to,insert:fe}]);return{range:x(d,d.from-e.length-1,d.to-e.length-1),changes:he}}return w(t.state,d,e)})),{scrollIntoView:!0}),!0)}}},17317:function(e,t,n){"use strict";n.d(t,{LK:function(){return h},UD:function(){return y},mB:function(){return w}});n(36728),n(95342),n(58188),n(99805),n(32501),n(26936),n(27233),n(28673),n(77950),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372);var r=n(1727);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,d=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,f=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw f}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=r.Py.define(),d=r.Py.define(),h=function(){return[p]},p=r.QQ.define({create:function(){return[]},update:function(e,t){var n,r=a(t.effects);try{var l=function(){var t=n.value;t.is(f)&&e.push(t.value),t.is(d)&&(e=e.filter((function(e){return!(e.effect===t.value.effect&&e.callback===t.value.callback)})));for(var r=function(n){var r,l=e[n];t.is(l.effect)&&(setTimeout((function(){return l.callback(t.value)})),null!==(r=l.options)&&void 0!==r&&r.once&&(e.splice(n,1),--n));a=n},a=0;a<e.length;++a)r(a)};for(r.s();!(n=r.n()).done;)l()}catch(e){r.e(e)}finally{r.f()}return e}}),y=function(e,t,n,r){e.dispatch({effects:f.of({effect:t,callback:n,options:r})})},w=function(e,t,n){e.dispatch({effects:d.of({effect:t,callback:n})})}},78014:function(e,t,n){"use strict";n.d(t,{HY:function(){return A},Hs:function(){return E},J$:function(){return O},Z0:function(){return j},jv:function(){return T},op:function(){return D}});n(43450),n(58188),n(73439),n(15735),n(93244),n(28673),n(6886),n(26936),n(9575),n(96264),n(34115),n(634),n(71372),n(71245),n(34769),n(95342),n(68625),n(36728),n(1939),n(62775),n(32501),n(27233),n(77950),n(21850),n(20796);var r=n(1727),a=n(11445),l=n(17317),f=n(6956),d=n(99618);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function C(e,t){return e?_(_({},e),{},{from:t.mapPos(e.from),to:t.mapPos(e.to)}):e}var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t}var t,n,r;return t=e,(n=[{key:"from",get:function(){return this.props.from}},{key:"to",get:function(){return this.props.to}},{key:"caption",get:function(){return this.props.caption}},{key:"label",get:function(){return this.props.label}},{key:"width",get:function(){return this.props.width}},{key:"unknownGraphicsArguments",get:function(){return this.props.unknownGraphicsArguments}},{key:"graphicsCommandArguments",get:function(){return this.props.graphicsCommandArguments}},{key:"graphicsCommand",get:function(){return this.props.graphicsCommand}},{key:"file",get:function(){return this.props.file}},{key:"map",value:function(t){return new e({from:t.mapPos(this.from),to:t.mapPos(this.to),caption:C(this.caption,t),label:C(this.label,t),graphicsCommand:C(this.graphicsCommand,t),width:this.width,file:C(this.file,t),graphicsCommandArguments:C(this.graphicsCommandArguments,t),unknownGraphicsArguments:this.unknownGraphicsArguments})}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),O=r.Py.define(),j=r.QQ.define({create:function(){return null},update:function(e,t){var n,r,a=p(t.effects);try{for(a.s();!(r=a.n()).done;){var l=r.value;l.is(O)&&(n=l.value)}}catch(e){a.e(e)}finally{a.f()}return void 0!==n?n:e?e.map(t.changes):e}}),T=function(){return[j]};function A(e){var t=new AbortController,n=new Promise((function(n){var r=function(){console.warn("Aborting wait for file tree update"),(0,l.mB)(e,f.tw,a),n()};function a(){t.signal.aborted||(t.signal.removeEventListener("abort",r),n())}t.signal.addEventListener("abort",r,{once:!0}),(0,l.UD)(e,f.tw,a,{once:!0})}));return{withTimeout:function(){return setTimeout((function(){return t.abort()}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:500),n},promise:n}}var P=new Set(["image/jpeg","image/png","application/pdf"]),D=function(){return"enabled"===(0,d.Z)("ol-splitTestVariants",{})["figure-modal"]?a.tk.domEventHandlers({drop:function(e){if(e.dataTransfer&&0!==e.dataTransfer.files.length){var t=e.dataTransfer.files[0];P.has(t.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:t.name,type:t.type,data:t}}))}},paste:function(e){if(e.clipboardData&&0!==e.clipboardData.files.length){var t=e.clipboardData.files[0];P.has(t.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:t.name,type:t.type,data:t}}))}}}):[]}},8224:function(e,t,n){"use strict";n.d(t,{K:function(){return T}});n(77950),n(58188),n(32501),n(26936),n(27233),n(28673),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372);var r=n(1727),a=n(11445),l=n(44907),f=n(5138),d=n(76635),h=n(6956),p=n(31931),y=r.Py.define(),w=(0,p.V9)(y),x=a.lg.define((function(e){function t(t){e.dispatch({effects:y.of(t.fontfaces)})}var n="fonts"in document;return n&&document.fonts.addEventListener("loadingdone",t),{destroy:function(){n&&document.fonts.removeEventListener("loadingdone",t)}}}));function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=new r.F6,C=r.q6.define();function E(e){var t=function(e){var t,n=_(e.visibleRanges);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=/\S/.exec(e.state.sliceDoc(r.from,r.to));if(a)return r.from+a.index}}catch(e){n.e(e)}finally{n.f()}return null}(e);if(null===t)return 0;var n=e.coordsAtPos(t);if(!n)return 0;var r=n.bottom-n.top;return(0,d.round)((e.defaultLineHeight-r)/2,2)}function O(e){return a.tk.theme({".cm-content":{"--half-leading":e+"px"}})}var j=a.lg.define((function(e){var t=0,n={read:function(){return E(e)},write:function(n){n!==t&&(t=n,window.setTimeout((function(){return e.dispatch({effects:k.reconfigure(O(n)),annotations:C.of(!0)})})))}};return{update:function(t){t.transactions.some((function(e){return e.annotation(C)}))||(w(t)||t.geometryChanged&&!t.docChanged||t.transactions.some((function(e){return e.annotation(l.ND)}))||(0,h.uk)(t))&&e.requestMeasure(n)}}}),{provide:function(){return[k.of(O(0))]}}),T=function(e){return(0,f.NO)(e,[x,j])}},6956:function(e,t,n){"use strict";n.d(t,{DN:function(){return E},L3:function(){return _},S3:function(){return O},dK:function(){return S},tw:function(){return k},uk:function(){return w},yC:function(){return C}});n(32501),n(58188),n(26936),n(27233),n(28673),n(77950),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372);var r=n(1727),a=n(9685),l=n(11445),f=n(77120),d=n(31931);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=r.Py.define(),w=(0,d.V9)(y),x=new r.F6,_=r.QQ.define({create:function(){},update:function(e,t){var n,r=h(t.effects);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.is(k))return a.value}}catch(e){r.e(e)}finally{r.f()}return e}}),S=function(e,t,n){var r=n.syntaxValidation,d=f.c6.matchFilename(a.M,e.docName);return d?[x.of(f.c.of("    ")),_,l.lg.define((function(e){return d.load().then((function(n){e.dispatch({effects:[x.reconfigure(n),y.of(null)]}),e.dispatch({effects:[k.of(t),E.of(r)]})})),{}})),_]:[]},k=r.Py.define(),C=function(e){return{effects:k.of(e)}},E=r.Py.define(),O=function(e){return{effects:E.of(e)}}},41518:function(e,t,n){"use strict";n.d(t,{L:function(){return E},o:function(){return k}});n(32501),n(58188),n(26936),n(27233),n(28673),n(77950),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372),n(9575),n(96264),n(71245),n(34769),n(95342),n(68625),n(36728),n(1939),n(62775);var r=n(11445),a=n(76635),l=n(76066),f=n(1727),d=n(5138);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){return"doc.position.".concat(e)},k=function(e){var t,n=e.currentDoc.doc_id,l=(0,a.throttle)((function(e,n){e.target===n.scrollDOM&&(t=O(n),j(t,n))}),120,{trailing:!0});return[r.lg.define((function(e){var r=function(){t&&T(t,e,n)};return window.addEventListener("unload",r),{update:function(r){var a,l=x(r.transactions);try{var f=function(){var r,l=a.value,f=x(l.effects);try{for(f.s();!(r=f.n()).done;){var h=r.value;h.is(d.wR)?t&&T(t,e,n):h.is(C)&&window.setTimeout((function(){e.dispatch(A(l.state.doc,n)),window.dispatchEvent(new Event("editor:scroll-position-restored"))}))}}catch(e){f.e(e)}finally{f.f()}};for(l.s();!(a=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}},destroy:function(){l.cancel(),window.removeEventListener("unload",r),r()}}}),{eventHandlers:{scroll:l}})]},C=f.Py.define(),E=function(){return{effects:C.of(null)}},O=function(e){var t=e.scrollDOM.getBoundingClientRect(),n=t.top,r=t.height,a=n-e.documentTop;return{first:e.lineBlockAtHeight(a),middle:e.lineBlockAtHeight(a+r/2)}},j=function(e,t){var n=t.state.doc.lineAt(e.middle.from).number;window.dispatchEvent(new CustomEvent("scroll:editor:update",{detail:n}))},T=function(e,t,n){var r=S(n),a=l.Z.getItem(r),f=t.state.doc.lineAt(e.first.from).number;l.Z.setItem(r,y(y({},a),{},{firstVisibleLine:f}))},A=function(e,t){try{var n,a=S(t),d=l.Z.getItem(a),h=Math.min(null!==(n=null==d?void 0:d.firstVisibleLine)&&void 0!==n?n:1,e.lines),p=e.line(h),y=f.jT.cursor(p.from);return{effects:r.tk.scrollIntoView(y,{y:"start",yMargin:0})}}catch(e){return console.error(e),{}}}},44907:function(e,t,n){"use strict";n.d(t,{tO:function(){return j},U6:function(){return E},sp:function(){return C},rS:function(){return k},ND:function(){return S}});n(16781),n(15735),n(58188),n(73439),n(28673),n(6886),n(34115),n(634),n(20796),n(96882),n(38859),n(17525),n(18275),n(96928),n(71372),n(36728),n(1939),n(26936),n(32501);var r=n(11445),a=n(1727),l=n(77120),f=(n(72508),n(86253)),d=(0,f.QR)([{tag:f.pJ.link,class:"tok-link"},{tag:f.pJ.heading,class:"tok-heading"},{tag:f.pJ.emphasis,class:"tok-emphasis"},{tag:f.pJ.strong,class:"tok-strong"},{tag:f.pJ.keyword,class:"tok-keyword"},{tag:f.pJ.atom,class:"tok-atom"},{tag:f.pJ.bool,class:"tok-bool"},{tag:f.pJ.url,class:"tok-url"},{tag:f.pJ.labelName,class:"tok-labelName"},{tag:f.pJ.inserted,class:"tok-inserted"},{tag:f.pJ.deleted,class:"tok-deleted"},{tag:f.pJ.literal,class:"tok-literal"},{tag:f.pJ.string,class:"tok-string"},{tag:f.pJ.number,class:"tok-number"},{tag:[f.pJ.regexp,f.pJ.escape,f.pJ.special(f.pJ.string)],class:"tok-string2"},{tag:f.pJ.variableName,class:"tok-variableName"},{tag:f.pJ.local(f.pJ.variableName),class:"tok-variableName tok-local"},{tag:f.pJ.definition(f.pJ.variableName),class:"tok-variableName tok-definition"},{tag:f.pJ.special(f.pJ.variableName),class:"tok-variableName2"},{tag:f.pJ.definition(f.pJ.propertyName),class:"tok-propertyName tok-definition"},{tag:f.pJ.typeName,class:"tok-typeName"},{tag:f.pJ.namespace,class:"tok-namespace"},{tag:f.pJ.className,class:"tok-className"},{tag:f.pJ.macroName,class:"tok-macroName"},{tag:f.pJ.propertyName,class:"tok-propertyName"},{tag:f.pJ.operator,class:"tok-operator"},{tag:f.pJ.comment,class:"tok-comment"},{tag:f.pJ.meta,class:"tok-meta"},{tag:f.pJ.invalid,class:"tok-invalid"},{tag:f.pJ.punctuation,class:"tok-punctuation"},{tag:f.pJ.attributeValue,class:"tok-attributeValue"}]);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(){p=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function y(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{y({},"")}catch(e){y=function(e,t,n){return e[t]=n}}function w(e,t,n,a){var l=t&&t.prototype instanceof S?t:S,f=Object.create(l.prototype),d=new L(a||[]);return r(f,"_invoke",{value:D(e,n,d)}),f}function x(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=w;var _={};function S(){}function k(){}function C(){}var E={};y(E,l,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(N([])));j&&j!==t&&n.call(j,l)&&(E=j);var T=C.prototype=S.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){y(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function a(r,l,f,d){var p=x(e[r],e,l);if("throw"!==p.type){var y=p.arg,w=y.value;return w&&"object"==h(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){y.value=e,f(y)}),(function(e){return a("throw",e,f,d)}))}d(p.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function D(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return F()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=R(f,n);if(d){if(d===_)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=x(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===_)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function R(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=x(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,_;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return k.prototype=C,r(T,"constructor",{value:C,configurable:!0}),r(C,"constructor",{value:k,configurable:!0}),k.displayName=y(C,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,y(e,d,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},A(P.prototype),y(P.prototype,f,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new P(w(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},A(T),y(T,d,"Generator"),y(T,l,(function(){return this})),y(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,_):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),_}},e}function y(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){y(l,r,a,f,d,"next",e)}function d(e){y(l,r,a,f,d,"throw",e)}f(void 0)}))}}var x=new a.F6,_=new a.F6,S=a.q6.define(),k=function(e){return[P,D,(0,l.nF)(d),x.of(A(e)),_.of([])]},C=function(e){return{effects:x.reconfigure(A(e)),annotations:S.of(!0)}},E=function(){var e=w(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:return n=e.sent,e.abrupt("return",{effects:_.reconfigure(n)});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return"url('data:image/svg+xml,".concat(encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40">'.concat(e,"</svg>")),"')")},j={compact:1.33,normal:1.6,wide:2},T={monaco:["Monaco","Menlo","Ubuntu Mono","Consolas","monospace"],lucida:["Lucida Console","Source Code Pro","monospace"]},A=function(e){var t,n,a=e.fontSize,l=void 0===a?12:a,f=e.fontFamily,d=void 0===f?"monaco":f,h=e.lineHeight,p=void 0===h?"normal":h,y=e.overallTheme,w=void 0===y?"":y;return[r.tk.editorAttributes.of({class:""===w?"overall-theme-dark":"overall-theme-light"}),r.tk.theme({"&.cm-editor":{"--font-size":"".concat(l,"px"),"--source-font-family":null===(t=T[d])||void 0===t?void 0:t.join(", "),"--line-height":j[p]},".cm-content":{fontSize:"var(--font-size)",fontFamily:"var(--source-font-family)",lineHeight:"var(--line-height)"},".cm-cursor-primary":{fontSize:"var(--font-size)",fontFamily:"var(--source-font-family)",lineHeight:"var(--line-height)"},".cm-gutters":{fontSize:"var(--font-size)",lineHeight:"var(--line-height)"},".cm-tooltip":{"--font-size":"".concat(l,"px"),"--source-font-family":null===(n=T[d])||void 0===n?void 0:n.join(", "),"--line-height":j[p],fontSize:"var(--font-size)"},".cm-panel":{fontSize:"var(--font-size)"},".cm-foldGutter .cm-gutterElement > span":{height:"calc(var(--font-size) * var(--line-height))"},".cm-lineNumbers":{fontFamily:"var(--source-font-family)"}})]},P=r.tk.baseTheme({".cm-lintRange-error":{padding:"var(--half-leading, 0) 0",background:"rgba(255, 0, 0, 0.2)","& .cm-lintRange-error":{background:"none"}},".cm-specialChar":{color:"red",backgroundColor:"rgba(255, 0, 0, 0.1)"},".cm-widgetBuffer":{height:"1.3em"},".cm-snippetFieldPosition":{display:"inline-block",height:"1.3em"},"&dark .cm-foldGutter .cm-gutterElement > span:hover":{boxShadow:"0 1px 1px rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.1)"},"&light .cm-foldGutter .cm-gutterElement > span:hover":{borderColor:"rgba(0, 0, 0, 0.3)",boxShadow:"0 1px 1px rgba(255, 255, 255, 0.7)",backgroundColor:"rgba(255, 255, 255, 0.2)"}}),D=r.tk.theme({"&":{height:"100%",textRendering:"optimizeSpeed"},"&.cm-editor.cm-focused:not(:focus-visible)":{outline:"none"},".cm-panel.cm-search label":{display:"inline-flex",alignItems:"center",fontWeight:"normal"},".cm-selectionLayer":{zIndex:-10},".cm-gutters":{borderRight:"none",flexShrink:0},".cm-foldGutter .cm-gutterElement > span":{border:"1px solid transparent",borderRadius:"3px",display:"inline-flex",flexDirection:"column",justifyContent:"center",color:"rgba(109, 109, 109, 0.7)"},".cm-lineNumbers .cm-gutterElement":{padding:"0",userSelect:"none"},"&:not(.cm-focused) > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block",opacity:.2},".cm-cursor, .cm-dropCursor":{borderWidth:"2px",marginLeft:"-1px",borderLeftColor:"inherit"},".cm-tooltip-hover":{border:"none"},".cm-snippetField":{background:"rgba(194, 193, 208, 0.09)",border:"1px dotted rgba(211, 208, 235, 0.62)"},".cm-foldPlaceholder":{boxSizing:"border-box",display:"inline-block",height:"11px",width:"1.8em",marginTop:"-2px",verticalAlign:"middle",backgroundImage:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=")',backgroundRepeat:"no-repeat, repeat-x",backgroundPosition:"center center, top left",color:"transparent",border:"1px solid black",borderRadius:"2px"},".cm-gutter-lint .cm-gutterElement":{padding:"0.3em"},".cm-lint-marker-error:before":{content:"normal"},".cm-lint-marker-error":{content:O('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')},".cm-lint-marker-warning":{content:O('<path fill="#FCC483" stroke="#DE8014" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')}}),R=function(){var e=w(p().mark((function e(t){var a,l,f,d;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t="textmate"),e.next=3,n(91956)("./".concat(t,".json"));case 3:return a=e.sent,l=a.theme,f=a.highlightStyle,d=a.dark,e.abrupt("return",[r.tk.theme(l,{dark:d}),r.tk.theme(f,{dark:d})]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},22195:function(e,t,n){"use strict";n.d(t,{Gg:function(){return G},tV:function(){return U},MX:function(){return Z},hG:function(){return K},C4:function(){return V},Ag:function(){return H},vA:function(){return W},Mw:function(){return z},vv:function(){return I},_X:function(){return N},PU:function(){return M},dl:function(){return F},j2:function(){return Y},wo:function(){return B},od:function(){return L},Jw:function(){return q}});n(41549),n(45794),n(18178),n(58188),n(77950),n(21850);var r=n(1727),a=n(8580),l=n(57029),f=(n(36728),n(16781),n(43450),n(96708),n(95342),n(32501),n(26936),n(27233),n(28673),n(34115),n(634),n(20796),n(15735),n(6886),n(71372),n(77120)),d=n(47037),h=n(77904),p=n(49272);function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=function(e){var t=(0,d.iG)(e,p.ListEnvironment);return t?(0,h.dr)(t,e):null},_=function(e,t,n){var a,l,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",h=new f.Gn(e),p=null!==(a=(0,f.K0)(h,t.from))&&void 0!==a?a:0,w=(0,f.y1)(e),x=(0,f.SS)(e,p),_=(0,f.SS)(e,p+w),S=e.doc.lineAt(t.from),k=e.doc.lineAt(t.to),C=["".concat(x,"\\begin{").concat(n,"}")],E=y(e.doc.iterLines(S.number,k.number+1));try{for(E.s();!(l=E.n()).done;){var O=l.value.trim();O.endsWith("\\item")&&(O+=" "),C.push("".concat(_).concat(d).concat(O))}}catch(e){E.e(e)}finally{E.f()}1===C.length&&C.push("".concat(_).concat(d));var j=[{from:S.from,to:k.to,insert:C.join("\n")}];return t=r.jT.cursor(t.to).map(e.changes(j),1),j.push({from:k.to,to:k.to,insert:"\n".concat(x,"\\end{").concat(n,"}")}),{range:t,changes:j}},S=function(e){return function(t){return t.dispatch(t.state.changeByRange((function(n){return _(t.state,n,e)})),{scrollIntoView:!0}),!0}},k=function(e){return function(t){return t.dispatch(t.state.changeByRange((function(n){return function(e,t,n){var r,a=(0,f.qz)(e).resolveInner(t.from),l=(0,d.dw)(a,p.ListEnvironment);if(!l)return{range:t};var h=e.doc.lineAt(t.from),y=e.doc.lineAt(t.to),w=e.doc.lineAt(l.from),x=e.doc.lineAt(l.to),_=new f.Gn(e),S=null!==(r=(0,f.K0)(_,t.from))&&void 0!==r?r:0,k=(0,f.y1)(e),C=(0,f.SS)(e,S-k),E=[];w.number===h.number-1?E.push({from:w.from,to:w.to+1,insert:""}):E.push({from:h.from,insert:"".concat(C,"\\end{").concat(n,"}\n")});for(var O=function(e,t,n){return/^\s*$/.test(e.doc.sliceString(t,n))},j=h.number;j<=y.number;j++){var T=e.doc.line(j),A=T.from+k;A<=T.to&&O(e,T.from,A)&&E.push({from:T.from,to:A,insert:""})}return x.number===y.number+1?E.push({from:x.from,to:x.to+1,insert:""}):E.push({from:y.to,insert:"\n".concat(C,"\\begin{").concat(n,"}")}),{range:t=t.map(e.changes(E),-1),changes:E}}(t.state,n,e)})),{scrollIntoView:!0}),!0}},C=function(e){return function(t){t.dispatch(t.state.changeByRange((function(n){return function(e,t,n){var r=(0,d.F0)(e.state,t.head,p.ListEnvironment);if(!r)return _(e.state,t,n,"\\item ");var a=r.getChild("BeginEnv"),l=r.getChild("EndEnv");if(a&&l){var h,w,x=null==a||null===(h=a.getChild("EnvNameGroup"))||void 0===h?void 0:h.getChild("ListEnvName"),S=null==l||null===(w=l.getChild("EnvNameGroup"))||void 0===w?void 0:w.getChild("ListEnvName");if(x&&S){if(e.state.sliceDoc(x.from,x.to).trim()===n){var k=e.state.doc.lineAt(a.from),C=e.state.doc.lineAt(l.from),E=/^\s*\\begin\{[^}]*}\s*$/.test(k.text),O=/^\s*\\end\{[^}]*}\s*$/.test(C.text),j=[{from:E?k.from-1:a.from,to:E?k.to:a.to,insert:""},{from:O?C.from:l.from,to:O?C.to+1:l.to,insert:""}],T=(0,d.kG)(r,"Item").filter((function(t){return"\\item"===e.state.sliceDoc(t.from,t.to)}));if(T.length>0){var A,P=/^\s*\\item\{/.test(k.text)?(0,f.y1)(e.state):0,D=y(T);try{for(D.s();!(A=D.n()).done;){var R=A.value;j.push({from:R.from-P,to:R.to+1,insert:""})}}catch(e){D.e(e)}finally{D.f()}}var I=e.state.changes(j);return{range:t.map(I),changes:I}}var M=[{from:x.from,to:x.to,insert:n},{from:S.from,to:S.to,insert:n}],L=e.state.changes(M);return{range:t.map(L),changes:L}}}return{range:t}}(t,n,e)})),{scrollIntoView:!0})}},E=S("itemize"),O=S("enumerate"),j=k("itemize"),T=k("enumerate"),A=n(64100),P=n(61591),D=n(21296),R={figure:(0,D.n)(P.Ty.get("figure")),table:(0,D.n)(P.Ty.get("table")),cite:(0,D.n)("\\cite{${}}"),ref:(0,D.n)("\\ref{${}}")},I=(0,l.uz)("\\textbf"),M=(0,l.uz)("\\textit"),L=(0,l.Um)("\\href{}{","}",!1,(function(e){return r.jT.cursor(e.from-2)})),N=C("itemize"),F=C("enumerate"),q=(0,l.Um)("\\(","\\)"),B=(0,l.Um)("\n\\[","\\]\n"),U=function(e,t){var n=t.anchor,r="",a=e.doc.lineAt(n);a.text.trim().length&&(n=Math.min(a.to+1,e.doc.length),e.doc.lineAt(n).length&&(r="\n"));return{pos:n,suffix:r}},H=function(e){var t=e.state,n=e.dispatch,r=U(t,t.selection.main),a=r.pos,l=r.suffix,f="\n".concat(R.figure,"\n").concat(l);return(0,A.DB)(f)({state:t,dispatch:n},{label:"Figure"},a,a),!0},z=function(e){var t=e.state,n=e.dispatch,r=U(t,t.selection.main),a=r.pos,l=r.suffix,f="\n".concat(R.table,"\n").concat(l);return(0,A.DB)(f)({state:t,dispatch:n},{label:"Table"},a,a),!0},V=function(e){var t=e.state,n=e.dispatch,r=t.selection.main.anchor,a=R.cite;return(0,A.DB)(a)({state:t,dispatch:n},{label:"Cite"},r,r),!0},W=function(e){var t=e.state,n=e.dispatch,r=t.selection.main.anchor,a=R.ref;return(0,A.DB)(a)({state:t,dispatch:n},{label:"Ref"},r,r),!0},Z=function(e){if((0,d.uM)(e.state)<2)return!1;switch(x(e.state)){case"itemize":return j(e);case"enumerate":return T(e);default:return!1}},G=function(e){return e.selection.ranges.every((function(t){var n=e.doc.lineAt(t.from),r=e.sliceDoc(n.from,t.from);return/\\item\s*$/.test(r)}))},K=function(e){if((0,d.uM)(e.state)<1)return!1;switch(x(e.state)){case"itemize":return E(e);case"enumerate":return O(e);default:return!1}},Y=function(e){return(0,a.Ep)(e.state)?(0,a.N$)(e):(0,a.nx)(e),!0}},33237:function(e,t,n){"use strict";n.d(t,{C:function(){return y},a:function(){return p}});n(32501),n(58188),n(26936),n(27233),n(28673),n(77950),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372);var r=n(1727),a=n(11445);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=r.Py.define(),h=r.QQ.define({create:function(){return!0},update:function(e,t){if(t.state.readOnly)return!1;var n,r=l(t.effects);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.is(d)&&(e=a.value)}}catch(e){r.e(e)}finally{r.f()}return e},provide:function(e){return a.mH.from(e,(function(e){return e?p:null}))}});function p(){var e=document.createElement("div");return e.classList.add("ol-cm-toolbar-portal"),{dom:e,top:!0}}var y=function(){return[h,a.tk.theme({".ol-cm-toolbar":{backgroundColor:"var(--editor-toolbar-bg)",color:"var(--toolbar-btn-color)",flex:1,display:"flex",overflowX:"hidden"},"&.overall-theme-dark .ol-cm-toolbar":{"& img":{filter:"invert(1)"}},".ol-cm-toolbar-overflow":{display:"flex",flexWrap:"wrap"},"#popover-toolbar-overflow":{padding:0,borderColor:"rgba(125, 125, 125, 0.2)",backgroundColor:"var(--editor-toolbar-bg)",color:"var(--toolbar-btn-color)","& .popover-content":{padding:0},"& .arrow":{borderBottomColor:"rgba(125, 125, 125, 0.2)","&:after":{borderBottomColor:"var(--editor-toolbar-bg)"}}},".ol-cm-toolbar-button-menu-popover":{"& > .popover-content":{padding:0},"& .arrow":{display:"none"},"& .list-group":{marginBottom:0},"& .list-group-item":{width:"100%",textAlign:"start"}},".ol-cm-toolbar-button-group":{display:"flex",alignItems:"center",whiteSpace:"nowrap",flexWrap:"nowrap",padding:"0 4px",margin:"4px 0",lineHeight:"1","&:not(:first-of-type)":{borderLeft:"1px solid rgba(125, 125, 125, 0.3)","&.ol-cm-toolbar-end":{borderLeft:"none"},"&.overflow-hidden":{borderLeft:"none"}},"&.overflow-hidden":{width:0,padding:0}},".ol-cm-toolbar-button":{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0",margin:"0 1px",backgroundColor:"transparent",border:"none",borderRadius:"1px",lineHeight:"1",width:"24px",height:"24px",overflow:"hidden","&:hover, &:focus, &:active, &.active":{backgroundColor:"rgba(125, 125, 125, 0.1)",color:"inherit",boxShadow:"none","&[disabled]":{opacity:"0.2"}},"&.active, &:active":{backgroundColor:"rgba(125, 125, 125, 0.2)"},"&[disabled]":{opacity:"0.2"},".overflow-hidden &":{display:"none"},"&.ol-cm-toolbar-button-math":{fontFamily:'"Noto Serif", serif',fontSize:"16px",fontWeight:700}},"&.overall-theme-dark .ol-cm-toolbar-button":{opacity:.8,"&:hover, &:focus, &:active, &.active":{backgroundColor:"rgba(125, 125, 125, 0.2)"},"&.active, &:active":{backgroundColor:"rgba(125, 125, 125, 0.4)"},"&[disabled]":{opacity:.2}},".ol-cm-toolbar-end":{flex:1,justifyContent:"flex-end"},".ol-cm-toolbar-overflow-toggle":{display:"none","&.ol-cm-toolbar-overflow-toggle-visible":{display:"flex"}},".ol-cm-toolbar-menu-toggle":{background:"transparent",boxShadow:"none !important",border:"none",whiteSpace:"nowrap",color:"inherit",borderRadius:"0",opacity:.8,width:"120px",fontSize:"13px",fontFamily:"Lato",fontWeight:"700",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 6px","&:hover, &:focus, &.active":{backgroundColor:"rgba(125, 125, 125, 0.1)",opacity:"1",color:"inherit"},"& .caret":{marginTop:"0"}},".ol-cm-toolbar-menu-popover":{border:"none",borderRadius:"0",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",boxShadow:"0 2px 5px rgb(0 0 0 / 20%)",backgroundColor:"var(--editor-toolbar-bg)",color:"var(--toolbar-btn-color)",padding:"0","&.bottom":{marginTop:"1px"},"&.top":{marginBottom:"1px"},"& .arrow":{display:"none"},"& .popover-content":{padding:"0"},"& .ol-cm-toolbar-menu":{width:"120px",display:"flex",flexDirection:"column",boxSizing:"border-box",fontSize:"14px"},"& .ol-cm-toolbar-menu-item":{border:"none",background:"none",padding:"4px 12px",height:"40px",display:"flex",alignItems:"center",fontWeight:"bold","&.ol-cm-toolbar-menu-item-active":{backgroundColor:"rgba(125, 125, 125, 0.1)"},"&:hover":{backgroundColor:"rgba(125, 125, 125, 0.2)",color:"inherit"},"&.section-level-section":{fontSize:"1.44em"},"&.section-level-subsection":{fontSize:"1.2em"},"&.section-level-body":{fontWeight:"normal"}}}})]}},87546:function(e,t,n){"use strict";n.d(t,{K:function(){return l}});var r=n(96227),a=n(5138);function l(e,t){var n=(0,a.Pn)(e)?"visual":"source";(0,r.sendMB)("codemirror-toolbar-event",{command:t,mode:n})}},72192:function(e,t,n){"use strict";n.d(t,{ER:function(){return _},RM:function(){return f},Xb:function(){return x},be:function(){return d},hV:function(){return h},kE:function(){return y},lJ:function(){return w},n3:function(){return p}});n(58188),n(45794);var r=n(1727),a=n(11445),l=n(31931),f=function(e,t){return e.ranges.some((function(e){return t.from<=e.from&&t.to>=e.from||t.from<=e.to&&t.to>=e.to}))},d=function(e,t){var n=e.lineBlockAtHeight(t.pageY-e.documentTop),l=r.jT.cursor(n.to);return{selection:t.ctrlKey?e.state.selection.addRange(l):l,effects:a.tk.scrollIntoView(n.to)}},h=function(e,t){for(var n=t.number,r=t.from,a=n-1;a>0;a--){var l=e.line(a);if(l.text.trim().length>0)break;r=l.from}return r},p=function(e,t){for(var n=t.number,r=t.to,a=n+1;a<=e.lines;a++){var l=e.line(a);if(l.text.trim().length>0)break;r=l.to}return r},y=r.Py.define(),w=(0,l.B)(y),x=(0,l.V9)(y),_=a.tk.domEventHandlers({mousedown:function(e,t){t.dispatch({effects:y.of(!0)})},mouseup:function(e,t){window.setTimeout((function(){t.dispatch({effects:y.of(!1)})}))}})},5138:function(e,t,n){"use strict";n.d(t,{Pn:function(){return Gn},p5:function(){return Kn},NO:function(){return Yn},wR:function(){return Hn},Hg:function(){return Zn}});n(58188),n(73439),n(32501),n(26936),n(27233),n(28673),n(77950),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372);var r=n(1727),a=(n(72508),n(11445)),l=n(77120),f=n(86253),d=(0,l.nF)(l.Qf.define([{tag:f.pJ.link,class:"ol-cm-link-text"},{tag:f.pJ.url,class:"ol-cm-url"},{tag:f.pJ.typeName,class:"ol-cm-monospace"},{tag:f.pJ.attributeValue,class:"ol-cm-monospace"},{tag:f.pJ.keyword,class:"ol-cm-monospace"},{tag:f.pJ.string,class:"ol-cm-monospace"},{tag:f.pJ.punctuation,class:"ol-cm-punctuation"},{tag:f.pJ.literal,class:"ol-cm-monospace"},{tag:f.pJ.monospace,fontFamily:"var(--source-font-family)",lineHeight:1,overflowWrap:"break-word"}])),h=a.tk.theme({"&.cm-editor":{"--visual-font-family":"'Noto Serif', 'Palatino Linotype', 'Book Antiqua', Palatino, serif !important","--visual-font-size":"calc(var(--font-size) * 1.15)","& .cm-content":{opacity:0},"&.ol-cm-parsed .cm-content":{opacity:1,transition:"opacity 0.1s ease-out"}},".cm-content.cm-content":{overflowX:"hidden",padding:"0 max(calc((100% - 100ch) / 2), 8%)",fontFamily:"var(--visual-font-family)",fontSize:"var(--visual-font-size)"},".cm-cursor-primary.cm-cursor-primary":{fontFamily:"var(--visual-font-family)",fontSize:"var(--visual-font-size)"},".cm-line":{overflowX:"visible"},".cm-gutter":{opacity:"0.5"},".cm-tooltip":{fontSize:"calc(var(--font-size) * 1.15) !important"},".ol-cm-link-text":{textDecoration:"underline",fontFamily:"inherit"},".ol-cm-monospace":{fontFamily:"var(--source-font-family)",lineHeight:1,fontWeight:"normal",fontStyle:"normal",fontVariant:"normal",textDecoration:"none"},".ol-cm-punctuation":{fontFamily:"var(--source-font-family)",lineHeight:1},".ol-cm-brace":{opacity:"0.5"},".ol-cm-math":{overflow:"hidden"},".ol-cm-maketitle":{textAlign:"center",paddingBottom:"2em"},".ol-cm-title":{fontSize:"1.7em",cursor:"pointer",padding:"0.5em",lineHeight:"calc(var(--line-height) * 5/6)"},".ol-cm-author":{display:"inline-block",maxWidth:"45%",minWidth:"200px",verticalAlign:"top",cursor:"pointer"},".ol-cm-author:not(:first-child)":{display:"inline-block",marginLeft:"5%",maxWidth:"45%"},".ol-cm-icon-brace":{filter:"grayscale(1)",marginRight:"2px"},".ol-cm-begin":{fontFamily:"var(--source-font-family)",minHeight:"1em",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},".ol-cm-end":{fontFamily:"var(--source-font-family)",padding:"0.5em 0 1.5em",minHeight:"1em",textAlign:"center",justifyContent:"center",background:"linear-gradient(180deg, rgba(0,0,0,0) calc(50% - 1px), rgba(192,192,192,1) calc(50%), rgba(0,0,0,0) calc(50% + 1px))"},".ol-cm-environment-top":{paddingTop:"1em"},".ol-cm-environment-bottom":{paddingBottom:"1em"},".ol-cm-environment-first-line":{paddingTop:"0.5em !important",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},".ol-cm-environment-last-line":{paddingBottom:"1em !important",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},".ol-cm-environment-figure.ol-cm-environment-line, .ol-cm-environment-table.ol-cm-environment-line":{backgroundColor:"rgba(125, 125, 125, 0.05)",padding:"0 12px"},".ol-cm-environment-figure.ol-cm-environment-last-line, .ol-cm-environment-table.ol-cm-environment-last-line, .ol-cm-preamble-line.ol-cm-environment-last-line":{boxShadow:"0 2px 5px -3px rgb(125, 125, 125, 0.5)"},".ol-cm-environment-padding":{flex:1,height:"1px",background:"linear-gradient(180deg, rgba(0,0,0,0) calc(50% - 1px), rgba(192,192,192,1) calc(50%), rgba(0,0,0,0) calc(50% + 1px))"},".ol-cm-environment-name":{padding:"0 1em"},".ol-cm-environment-name-abstract":{fontFamily:"var(--visual-font-family)",fontSize:"1.2em",fontWeight:550},".ol-cm-environment-name-abstract:first-letter":{textTransform:"uppercase"},".ol-cm-item":{paddingInlineStart:"calc(var(--list-depth) * 2ch)"},".ol-cm-item::before":{counterReset:"list-item var(--list-ordinal)",content:"counter(list-item, var(--list-type)) var(--list-suffix)"},".ol-cm-heading":{fontWeight:550,lineHeight:"1.35",color:"inherit !important",background:"inherit !important"},".ol-cm-command-part":{fontSize:"2em"},".ol-cm-command-chapter":{fontSize:"1.6em"},".ol-cm-command-section":{fontSize:"1.44em"},".ol-cm-command-subsection":{fontSize:"1.2em"},".ol-cm-command-subsubsection":{fontSize:"1em"},".ol-cm-command-paragraph":{fontSize:"1em"},".ol-cm-command-subparagraph":{fontSize:"1em"},".ol-cm-frame-title":{fontSize:"1.44em"},".ol-cm-frame-subtitle":{fontSize:"1em"},".ol-cm-divider":{borderBottom:"1px solid rgba(125, 125, 125, 0.1)",padding:"0.5em 6px","&.ol-cm-frame-widget":{borderBottom:"none",borderTop:"1px solid rgba(125, 125, 125, 0.1)"}},".ol-cm-command-textbf":{fontWeight:700},".ol-cm-command-textit":{fontStyle:"italic"},".ol-cm-command-textsc":{fontVariant:"small-caps"},".ol-cm-command-texttt":{fontFamily:"monospace"},".ol-cm-command-underline":{textDecoration:"underline"},".ol-cm-command-sout":{textDecoration:"line-through"},".ol-cm-command-emph":{fontStyle:"italic","& .ol-cm-command-textit":{fontStyle:"normal"},".ol-cm-command-textit &":{fontStyle:"normal"}},".ol-cm-command-url":{textDecoration:"underline",fontFamily:"var(--source-font-family)",lineHeight:1,overflowWrap:"break-word",hyphens:"auto"},".ol-cm-environment-centered":{"&.ol-cm-label-line, &.ol-cm-caption-line":{textAlign:"center"},"&.ol-cm-caption-line":{padding:"0 10%"}},".ol-cm-caption-line .ol-cm-label":{marginRight:"1ch"},".ol-cm-tex":{textTransform:"uppercase","& sup":{position:"inherit",fontSize:"0.85em",verticalAlign:"0.15em",marginLeft:"-0.36em",marginRight:"-0.15em"},"& sub":{position:"inherit",fontSize:"1em",verticalAlign:"-0.5ex",marginLeft:"-0.1667em",marginRight:"-0.125em"}},".ol-cm-graphics":{display:"block",maxWidth:"min(300px, 100%)",paddingTop:"1em",paddingBottom:"1em",cursor:"pointer",".ol-cm-graphics-inline &":{display:"inline"}},".ol-cm-graphics-inline-edit-wrapper":{display:"inline-block",position:"relative",verticalAlign:"middle","& .ol-cm-graphics":{paddingTop:0,paddingBottom:0}},".ol-cm-graphics-loading":{height:"300px"},".ol-cm-graphics-error":{border:"1px solid red",padding:"8px"},".ol-cm-environment-centered .ol-cm-graphics":{margin:"0 auto"},".ol-cm-command-verb .ol-cm-monospace":{color:"inherit"},".ol-cm-preamble-wrapper":{padding:"0.5em 0","&.ol-cm-preamble-expanded":{paddingBottom:"0"}},".ol-cm-preamble-widget, .ol-cm-end-document-widget":{padding:"0.25em 1em",borderRadius:"8px",fontFamily:'"Lato", sans-serif',fontSize:"14px",".ol-cm-preamble-expanded &":{borderBottomLeftRadius:"0",borderBottomRightRadius:"0",borderBottom:"1px solid rgba(125, 125, 125, 0.2)"}},".ol-cm-preamble-widget":{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},".ol-cm-preamble-expand-icon":{width:"32px",lineHeight:"32px",textAlign:"center",transition:"0.2s ease-out",opacity:"0.5",".ol-cm-preamble-widget:hover &":{opacity:"1"},".ol-cm-preamble-expanded &":{transform:"rotate(180deg)"}},".ol-cm-preamble-line, .ol-cm-end-document-widget, .ol-cm-preamble-widget":{backgroundColor:"rgba(125, 125, 125, 0.05)"},".ol-cm-preamble-line":{padding:"0 12px","&.ol-cm-environment-first-line":{borderRadius:"0"}},".ol-cm-end-document-widget":{textAlign:"center"},".ol-cm-environment-figure":{position:"relative"},".ol-cm-graphics-edit-button":{position:"absolute",top:"18px",right:"18px"}}),p=(n(85940),n(36728),n(16781),n(39529),n(45794),n(43450),n(72192));n(9575),n(96264),n(71245),n(96928),n(92215),n(61229);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(this,n)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function C(e,t,n){return(t=E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(l,e);var t,n,r,a=_(l);function l(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),C(S(r=a.call(this)),"bullets",["disc","circle","square"]),C(S(r),"numbers",["decimal","lower-alpha","lower-roman","upper-alpha"]),r.currentEnvironment=e,r.ordinal=t,r.listDepth=n,"itemize"===e?(r.listType=r.bullets[(n-1)%r.bullets.length],r.suffix="' '"):(r.listType=r.numbers[(n-1)%r.numbers.length],r.suffix="'. '"),r}return t=l,(n=[{key:"toDOM",value:function(){var e=document.createElement("span");return e.classList.add("ol-cm-item"),e.textContent=" ",this.setProperties(e),e}},{key:"eq",value:function(e){return e.currentEnvironment===this.currentEnvironment&&e.ordinal===this.ordinal&&e.listDepth===this.listDepth}},{key:"updateDOM",value:function(e){return this.setProperties(e),!0}},{key:"ignoreEvent",value:function(e){return"mousedown"!==e.type&&"mouseup"!==e.type}},{key:"setProperties",value:function(e){e.style.setProperty("--list-depth",String(this.listDepth)),e.style.setProperty("--list-ordinal",String(this.ordinal)),e.style.setProperty("--list-type",this.listType),e.style.setProperty("--list-suffix",this.suffix)}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==j(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===j(l)?l:String(l)),r)}var a,l}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var a=D(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(l,e);var t,n,r,a=P(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"toDOM",value:function(){var e=document.createElement("span");return e.classList.add("ol-cm-tex"),e.innerHTML="L<sup>a</sup>T<sub>e</sub>X",e}},{key:"eq",value:function(){return!0}},{key:"ignoreEvent",value:function(e){return"mousedown"!==e.type&&"mouseup"!==e.type}}])&&T(t.prototype,n),r&&T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===I(l)?l:String(l)),r)}var a,l}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var a=F(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(l,e);var t,n,r,a=N(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this)).content=e,t}return t=l,(n=[{key:"toDOM",value:function(){var e=document.createElement("span");return e.classList.add("ol-cm-brace"),void 0!==this.content&&(e.textContent=this.content),e}},{key:"ignoreEvent",value:function(e){return"mousedown"!==e.type&&"mouseup"!==e.type}},{key:"eq",value:function(e){return e.content===this.content}}])&&M(t.prototype,n),r&&M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9),B=n(66144),U=(n(71639),n(96882),n(38859),n(17525),n(18275),n(1939),n(80486)),H=function(e,t){e.dispatch({selection:r.jT.single(t.from+1,t.to-1),scrollIntoView:!0})};function z(e,t,n){var r=e.getChild("LongArg");r&&(e=r);var a=[t],l=function(){return a[a.length-1]},f=[],d=e.from;return e.cursor().iterate((function(e){var t,r=e.node;if(d<r.from&&(l().append(document.createTextNode(n.sliceDoc(d,r.from))),d=f.some((function(e){return e.from<=r.from&&e.to>=r.from}))?r.to:r.from),(0,B.DC)(r,"\\textit",n)){var h,p;t=document.createElement("i"),a.push(t);var y=r.getChild("TextArgument");d=null!==(h=null==y||null===(p=y.getChild("LongArg"))||void 0===p?void 0:p.from)&&void 0!==h?h:r.to;var w=null==y?void 0:y.getChild("CloseBrace");w&&f.push(w)}else(function(e,t){return!!e.type.is("CtrlSym")&&"\\\\"===t.sliceDoc(e.from,e.to)})(r,n)&&(l().appendChild(document.createElement("br")),d=r.to)}),(function(e){var t=e.node;if((0,B.DC)(t,"\\textit",n)){var r=a.pop();l().appendChild(r)}})),d<e.to&&l().append(document.createTextNode(n.sliceDoc(d,e.to))),t}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function W(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(){G=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==V(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function K(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,te(r.key),r)}}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ee(e);if(t){var a=ee(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}(this,n)}}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(e){var t=function(e,t){if("object"!==V(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===V(t)?t:String(t)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(l,e);var t,n,r,a=J(l);function l(e){var t,n,r,f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=a.call(this),n=Q(t),f=!1,(r=te(r="destroyed"))in n?Object.defineProperty(n,r,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[r]=f,t.preamble=e,t}return t=l,n=[{key:"toDOM",value:function(e){this.destroyed=!1;var t=document.createElement("div");return t.classList.add("ol-cm-maketitle"),this.buildContent(e,t),t}},{key:"eq",value:function(e){return re(e.preamble,this.preamble,["title","author"])}},{key:"ignoreEvent",value:function(e){return"mouseup"!==e.type}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"buildContent",value:function(e,t){var n=this;if(this.preamble.title){var r=function(e,t){var n=document.createElement("div");return n.classList.add("ol-cm-title"),z(t,n,e),n}(e.state,this.preamble.title.node);r.addEventListener("mouseup",(function(){n.preamble.title&&H(e,n.preamble.title.node)})),t.append(r),(0,U.T)().then(function(){var r,a=(r=G().mark((function r(a){return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.destroyed){r.next=4;break}return r.next=3,a.typesetPromise([t]);case 3:e.requestMeasure();case 4:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var l=r.apply(e,t);function f(e){K(l,n,a,f,d,"next",e)}function d(e){K(l,n,a,f,d,"throw",e)}f(void 0)}))});return function(e){return a.apply(this,arguments)}}()).catch((function(){t.classList.add("ol-cm-error")}))}if(this.preamble.author){var a=function(e,t){var n=document.createElement("div");n.classList.add("ol-cm-authors");var r,a=W(e.sliceDoc(t.from+1,t.to-1).replaceAll(/\s+/g," ").split("\\and"));try{for(a.s();!(r=a.n()).done;){var l=r.value,f=document.createElement("div");f.classList.add("ol-cm-author");var d,h=W(l.split("\\\\"));try{for(h.s();!(d=h.n()).done;){var p=d.value,y=document.createElement("div");y.classList.add("ol-cm-author-line"),y.textContent=p.trim(),f.appendChild(y)}}catch(e){h.e(e)}finally{h.f()}n.append(f)}}catch(e){a.e(e)}finally{a.f()}return n}(e.state,this.preamble.author.node);a.addEventListener("mouseup",(function(){n.preamble.author&&H(e,n.preamble.author.node)})),t.append(a)}}}],n&&Y(t.prototype,n),r&&Y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9),re=function(e,t,n){return n.every((function(n){var r,a;return(null===(r=e[n])||void 0===r?void 0:r.content)===(null===(a=t[n])||void 0===a?void 0:a.content)}))};function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==oe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===oe(l)?l:String(l)),r)}var a,l}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var a=ce(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(l,e);var t,n,r,a=le(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this)).environment=e,t}return t=l,(n=[{key:"toDOM",value:function(e){var t=document.createElement("div");t.classList.add("ol-cm-begin"),t.classList.add("ol-cm-begin-".concat(this.environment));var n=document.createElement("span");n.classList.add("ol-cm-environment-padding"),t.appendChild(n);var r=document.createElement("span");r.textContent=this.environment,r.classList.add("ol-cm-environment-name"),r.classList.add("ol-cm-environment-name-".concat(this.environment)),t.appendChild(r);var a=document.createElement("span");return a.classList.add("ol-cm-environment-padding"),t.appendChild(a),t.addEventListener("mouseup",(function(t){t.preventDefault(),e.dispatch((0,p.be)(e,t))})),t}},{key:"eq",value:function(e){return e.environment===this.environment}},{key:"updateDOM",value:function(e){return e.querySelector(".ol-cm-environment-name").textContent=this.environment,!0}},{key:"ignoreEvent",value:function(e){return"mouseup"!==e.type}}])&&ae(t.prototype,n),r&&ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==fe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===fe(l)?l:String(l)),r)}var a,l}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var a=me(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(l,e);var t,n,r,a=pe(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"toDOM",value:function(){var e=document.createElement("div");return e.classList.add("ol-cm-end"),e}},{key:"eq",value:function(e){return!0}}])&&de(t.prototype,n),r&&de(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9),ve=n(77904);n(34769),n(95342),n(68625),n(62775);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function be(){be=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==ye(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$e(r.key),r)}}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ke(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var a=Oe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}(this,n)}}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function je(e,t,n){return(t=$e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e){var t=function(e,t){if("object"!==ye(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ye(t)?t:String(t)}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(d,e);var t,n,r,a,l,f=Ce(d);function d(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),je(Ee(n=f.call(this)),"destroyed",!1),n.math=e,n.displayMode=t,n}return t=d,n=[{key:"toDOM",value:function(e){this.destroyed=!1;var t=document.createElement(this.displayMode?"div":"span");return t.classList.add("ol-cm-math"),this.displayMode&&t.addEventListener("mouseup",(function(t){t.preventDefault(),e.dispatch((0,p.be)(e,t))})),this.renderMath(t).catch((function(){t.classList.add("ol-cm-math-error")})),t}},{key:"eq",value:function(e){return e.math===this.math&&e.displayMode===this.displayMode}},{key:"updateDOM",value:function(e){return this.destroyed=!1,this.renderMath(e).catch((function(){e.classList.add("ol-cm-math-error")})),!0}},{key:"ignoreEvent",value:function(e){return"mouseup"!==e.type&&!(!this.displayMode&&"mousedown"===e.type)}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"renderMath",value:(a=be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.T)();case 2:if(n=e.sent,this.destroyed){e.next=10;break}return n.texReset([0]),e.next=7,n.tex2svgPromise(this.math,xe(xe({},n.getMetricsFor(t)),{},{display:this.displayMode}));case 7:r=e.sent,t.textContent="",t.append(r);case 10:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(n,r){var l=a.apply(e,t);function f(e){_e(l,n,r,f,d,"next",e)}function d(e){_e(l,n,r,f,d,"throw",e)}f(void 0)}))},function(e){return l.apply(this,arguments)})}],n&&Se(t.prototype,n),r&&Se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.l9),Ae=(n(88233),n(76635));function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function De(){De=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==Pe(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function Re(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function Ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){Re(l,r,a,f,d,"next",e)}function d(e){Re(l,r,a,f,d,"throw",e)}f(void 0)}))}}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ue(r.key),r)}}function Le(e,t){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Le(e,t)}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qe(e);if(t){var a=qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fe(e)}(this,n)}}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}function Be(e,t,n){return(t=Ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e){var t=function(e,t){if("object"!==Pe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pe(t)?t:String(t)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(h,e);var t,r,a,l,f,d=Ne(h);function h(e,t,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),Be(Fe(a=d.call(this)),"destroyed",!1),Be(Fe(a),"height",300),a.filePath=e,a.getPreviewByPath=t,a.centered=n,a.figureData=r,a}return t=h,r=[{key:"toDOM",value:function(e){this.destroyed=!1;var t=document.createElement("div");return t.classList.add("ol-cm-environment-figure"),t.classList.add("ol-cm-environment-line"),t.classList.toggle("ol-cm-environment-centered",this.centered),this.renderGraphic(t,e),t.addEventListener("mouseup",(function(t){t.preventDefault(),e.dispatch((0,p.be)(e,t))})),t}},{key:"eq",value:function(e){return e.filePath===this.filePath&&e.centered===this.centered&&(0,Ae.isEqual)(this.figureData,e.figureData)}},{key:"updateDOM",value:function(e,t){var n,r;return this.destroyed=!1,e.classList.toggle("ol-cm-environment-centered",this.centered),this.filePath===e.dataset.filepath&&e.dataset.width===String(null===(n=this.figureData)||void 0===n||null===(r=n.width)||void 0===r?void 0:r.toString())||this.renderGraphic(e,t),!0}},{key:"ignoreEvent",value:function(e){return"mouseup"!==e.type&&!(e.target instanceof HTMLElement&&e.target.closest(".ol-cm-graphics-edit-button"))}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"estimatedHeight",get:function(){return this.height}},{key:"renderGraphic",value:function(e,t){var n,r;e.textContent="";var a=this.getPreviewByPath(this.filePath);if(e.dataset.filepath=this.filePath,e.dataset.width=null===(n=this.figureData)||void 0===n||null===(r=n.width)||void 0===r?void 0:r.toString(),!a){var l=document.createElement("div");return l.classList.add("ol-cm-graphics-error"),l.classList.add("ol-cm-monospace"),l.textContent=this.filePath,void e.append(l)}if("pdf"===a.extension){var f=document.createElement("canvas");f.classList.add("ol-cm-graphics"),this.renderPDF(t,f,a.url).catch((function(e){console.error(e)})),e.append(f)}else e.append(this.createImage(t,a.url))}},{key:"getFigureWidth",value:function(){var e;return null!==(e=this.figureData)&&void 0!==e&&e.width?"min(100%, ".concat(100*this.figureData.width,"%)"):""}},{key:"createImage",value:function(e,t){var n=this,r=document.createElement("img");r.classList.add("ol-cm-graphics"),r.classList.add("ol-cm-graphics-loading");var a=this.getFigureWidth();return r.style.width=a,r.style.maxWidth=a,r.src=t,r.addEventListener("load",(function(){r.classList.remove("ol-cm-graphics-loading"),n.height=r.height,e.requestMeasure()})),r}},{key:"renderPDF",value:(f=Ie(De().mark((function e(t,n,r){var a,l,f,d,h,p;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.importPDFJS();case 2:if(a=e.sent,l=a.PDFJS,!this.destroyed){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,l.getDocument(r).promise;case 8:return f=e.sent,e.next=11,f.getPage(1);case 11:if(d=e.sent,!this.destroyed){e.next=14;break}return e.abrupt("return");case 14:h=d.getViewport({scale:1}),n.width=h.width,n.height=h.height,p=this.getFigureWidth(),n.style.width=p,n.style.maxWidth=p,d.render({canvasContext:n.getContext("2d"),viewport:h}),this.height=h.height,t.requestMeasure();case 23:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return f.apply(this,arguments)})},{key:"importPDFJS",value:(l=Ie(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.e(7960).then(n.bind(n,17960)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})}],r&&Me(t.prototype,r),a&&Me(t,a),Object.defineProperty(t,"prototype",{writable:!1}),h}(a.l9);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==ze(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===ze(l)?l:String(l)),r)}var a,l}function We(e,t){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},We(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}(l,e);var t,n,r,a=Ze(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this)).content=e,t}return t=l,(n=[{key:"toDOM",value:function(){var e=document.createElement("span");return e.classList.add("ol-cm-brace"),e.classList.add("ol-cm-icon-brace"),void 0!==this.content&&(e.textContent=this.content),e}},{key:"ignoreEvent",value:function(e){return"mousedown"!==e.type&&"mouseup"!==e.type}},{key:"eq",value:function(e){return e.content===this.content}},{key:"updateDOM",value:function(e){var t;return e.textContent=null!==(t=this.content)&&void 0!==t?t:"",!0}}])&&Ve(t.prototype,n),r&&Ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9);function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Ye(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Ye(l)?l:String(l)),r)}var a,l}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=et(e);if(t){var a=et(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}var tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(l,e);var t,n,r,a=Qe(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"toDOM",value:function(){var e=document.createElement("span");return e.classList.add("ol-cm-tex"),e.innerHTML="T<sub>e</sub>X",e}},{key:"eq",value:function(){return!0}},{key:"ignoreEvent",value:function(e){return"mousedown"!==e.type&&"mouseup"!==e.type}}])&&Xe(t.prototype,n),r&&Xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9);n(79321);function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==nt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===nt(l)?l:String(l)),r)}var a,l}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=at(e);if(t){var a=at(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(l,e);var t,n,r,a=ot(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this)).content=e,t}return t=l,(n=[{key:"toDOM",value:function(){var e=document.createElement("span");return e.classList.add("ol-cm-character"),e.textContent=this.content,e}},{key:"eq",value:function(e){return e.content===this.content}},{key:"updateDOM",value:function(e){return e.textContent=this.content,!0}},{key:"ignoreEvent",value:function(e){return"mousedown"!==e.type&&"mouseup"!==e.type}}])&&rt(t.prototype,n),r&&rt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9),lt=new Map([["\\"," "],["\\%","%"],["\\_","_"],["\\}","}"],["\\&","&"],["\\#","#"],["\\{","{"],["\\textasciicircum","^"],["\\textless","<"],["\\textasciitilde","~"],["\\textordfeminine","ª"],["\\textasteriskcentered","⁎"],["\\textordmasculine","º"],["\\textbackslash","\\"],["\\textparagraph","¶"],["\\textbar","|"],["\\textperiodcentered","·"],["\\textbardbl","‖"],["\\textpertenthousand","‱"],["\\textperthousand","‰"],["\\textbraceleft","{"],["\\textquestiondown","¿"],["\\textbraceright","}"],["\\textquotedblleft","“"],["\\textbullet","•"],["\\textquotedblright","”"],["\\textcopyright","©"],["\\textquoteleft","‘"],["\\textdagger","†"],["\\textquoteright","’"],["\\textdaggerdbl","‡"],["\\textregistered","®"],["\\textdollar","$"],["\\textsection","§"],["\\textellipsis","…"],["\\textsterling","£"],["\\textemdash","—"],["\\texttrademark","™"],["\\textendash","–"],["\\textunderscore","_"],["\\textexclamdown","¡"],["\\textvisiblespace","␣"],["\\textgreater",">"],["\\ddag","‡"],["\\pounds","£"],["\\copyright","©"],["\\dots","…"],["\\S","§"],["\\dag","†"],["\\P","¶"],["\\aa","å"],["\\DH","Ð"],["\\L","Ł"],["\\o","ø"],["\\th","þ"],["\\AA","Å"],["\\DJ","Đ"],["\\l","ł"],["\\oe","œ"],["\\TH","Þ"],["\\AE","Æ"],["\\dj","đ"],["\\NG","Ŋ"],["\\OE","Œ"],["\\ae","æ"],["\\IJ","Ĳ"],["\\ng","ŋ"],["\\ss","ß"],["\\dh","ð"],["\\ij","ĳ"],["\\O","Ø"],["\\SS","ẞ"],["\\guillemetleft","«"],["\\guilsinglleft","‹"],["\\quotedblbase","„"],["\\textquotedbl",'"'],["\\guillemetright","»"],["\\guilsinglright","›"],["\\quotesinglbase","‚"],["\\textbaht","฿"],["\\textdollar","$"],["\\textwon","₩"],["\\textcent","¢"],["\\textlira","₤"],["\\textyen","¥"],["\\textcentoldstyle","¢"],["\\textdong","₫"],["\\textnaira","₦"],["\\textcolonmonetary","₡"],["\\texteuro","€"],["\\textpeso","₱"],["\\textcurrency","¤"],["\\textflorin","ƒ"],["\\textsterling","£"],["\\textcircledP","℗"],["\\textcopyright","©"],["\\textservicemark","℠"],["\\textregistered","®"],["\\texttrademark","™"],["\\textblank","␢"],["\\textpilcrow","¶"],["\\textbrokenbar","¦"],["\\textquotesingle","'"],["\\textdblhyphen","⹀"],["\\textdblhyphenchar","⹀"],["\\textdiscount","⁒"],["\\textrecipe","℞"],["\\textestimated","℮"],["\\textreferencemark","※"],["\\textinterrobang","‽"],["\\textthreequartersemdash","—"],["\\textinterrobangdown","⸘"],["\\texttildelow","˷"],["\\textnumero","№"],["\\texttwelveudash","—"],["\\textopenbullet","◦"],["\\ldots","…"]]);var ct=n(49272);function ut(e){var t=null,n=e.node.cursor();return n.next(),n.iterate((function(n){return!t&&(!(n.from>e.to)&&(n.type.is(ct.CenteringCtrlSeq)?(t=n.node,!1):!n.type.is("$Environment")&&void 0))})),t}function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function dt(){dt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==ft(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function ht(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bt(r.key),r)}}function mt(e,t){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mt(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yt(e);if(t){var a=yt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)}(this,n)}}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yt(e)}function bt(e){var t=function(e,t){if("object"!==ft(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ft(t)?t:String(t)}var wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(l,e);var t,n,r,a=gt(l);function l(e){var t,n,r,f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=a.call(this),n=vt(t),f=!1,(r=bt(r="destroyed"))in n?Object.defineProperty(n,r,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[r]=f,t.frame=e,t}return t=l,n=[{key:"toDOM",value:function(e){var t=this;this.destroyed=!1;var n=document.createElement("div");n.classList.add("ol-cm-frame-widget","ol-cm-divider");var r=document.createElement("div");if(r.classList.add("ol-cm-frame-title","ol-cm-heading"),r.addEventListener("mouseup",(function(){return H(e,t.frame.title.node)})),z(this.frame.title.node,r,e.state),n.appendChild(r),this.frame.subtitle){var a=document.createElement("div");a.classList.add("ol-cm-frame-subtitle","ol-cm-heading"),z(this.frame.subtitle.node,a,e.state),a.addEventListener("mouseup",(function(){return H(e,t.frame.subtitle.node)})),n.appendChild(a)}return(0,U.T)().then(function(){var r,a=(r=dt().mark((function r(a){return dt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.destroyed){r.next=4;break}return r.next=3,a.typesetPromise([n]);case 3:e.requestMeasure();case 4:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var l=r.apply(e,t);function f(e){ht(l,n,a,f,d,"next",e)}function d(e){ht(l,n,a,f,d,"throw",e)}f(void 0)}))});return function(e){return a.apply(this,arguments)}}()).catch((function(){n.classList.add("ol-cm-error")})),n}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"eq",value:function(e){var t,n;return e.frame.title.content===this.frame.title.content&&(null===(t=e.frame.subtitle)||void 0===t?void 0:t.content)===(null===(n=this.frame.subtitle)||void 0===n?void 0:n.content)}},{key:"ignoreEvent",value:function(e){return"mouseup"!==e.type}}],n&&pt(t.prototype,n),r&&pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9);function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==xt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===xt(l)?l:String(l)),r)}var a,l}function St(e,t){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},St(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ct(e);if(t){var a=Ct(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}var Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&St(e,t)}(l,e);var t,n,r,a=kt(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"toDOM",value:function(){var e=document.createElement("div");return e.classList.add("ol-cm-divider"),e}},{key:"eq",value:function(){return!0}},{key:"updateDOM",value:function(){return!0}}])&&_t(t.prototype,n),r&&_t(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9);function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Ot(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Ot(l)?l:String(l)),r)}var a,l}function $t(e,t){return $t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$t(e,t)}function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=At(e);if(t){var a=At(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function At(e){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},At(e)}var Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$t(e,t)}(f,e);var t,n,a,l=Tt(f);function f(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=l.call(this)).length=e,n.expanded=t,n}return t=f,(n=[{key:"toDOM",value:function(e){var t=this,n=document.createElement("div");n.classList.add("ol-cm-preamble-wrapper"),n.classList.toggle("ol-cm-preamble-expanded",this.expanded);var a=document.createElement("div");n.appendChild(a),a.classList.add("ol-cm-preamble-widget");var l=document.createElement("i");l.classList.add("ol-cm-preamble-expand-icon","fa","fa-chevron-down");var f=document.createElement("div"),d=document.createElement("a");d.href="/learn/latex/Learn_LaTeX_in_30_minutes#The_preamble_of_a_document",d.target="_blank";var h=document.createElement("i");h.classList.add("fa","fa-question-circle"),h.title=e.state.phrase("learn_more"),d.appendChild(h);var p=document.createElement("span");return p.classList.add("ol-cm-preamble-text"),p.textContent=this.getToggleText(e),f.appendChild(p),this.expanded&&f.append(document.createTextNode(" "),d),a.append(f,l),a.addEventListener("mouseup",(function(n){if(0!==n.button)return!0;if(d.contains(n.target))return!0;if(n.preventDefault(),t.expanded){var a=Math.min(t.length+1,e.state.doc.length);e.dispatch({selection:r.jT.single(a),scrollIntoView:!0})}else e.dispatch({selection:r.jT.single(0),scrollIntoView:!0})})),n}},{key:"ignoreEvent",value:function(e){return"mouseup"!==e.type}},{key:"eq",value:function(e){return this.expanded===e.expanded}},{key:"getToggleText",value:function(e){return this.expanded?e.state.phrase("hide_document_preamble"):e.state.phrase("show_document_preamble")}}])&&jt(t.prototype,n),a&&jt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.l9);function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Dt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Dt(l)?l:String(l)),r)}var a,l}function It(e,t){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},It(e,t)}function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lt(e);if(t){var a=Lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}var Nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&It(e,t)}(l,e);var t,n,r,a=Mt(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"toDOM",value:function(e){var t=document.createElement("div");return t.classList.add("ol-cm-end-document-widget"),t.textContent=e.state.phrase("end_of_document"),t.addEventListener("mouseup",(function(t){t.preventDefault(),e.dispatch((0,p.be)(e,t))})),t}},{key:"ignoreEvent",value:function(e){return"mouseup"!==e.type}},{key:"eq",value:function(){return!0}},{key:"updateDOM",value:function(){return!0}}])&&Rt(t.prototype,n),r&&Rt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9);function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Ft(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Ft(l)?l:String(l)),r)}var a,l}function Bt(e,t){return Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bt(e,t)}function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ht(e);if(t){var a=Ht(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ht(e){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(e)}var zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bt(e,t)}(l,e);var t,n,r,a=Ut(l);function l(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=a.call(this)).environment=e,n.line=t,n}return t=l,(n=[{key:"toDOM",value:function(e){var t=document.createElement("div");t.classList.add("ol-cm-environment-".concat(this.environment)),t.classList.add("ol-cm-environment-edge");var n=document.createElement("div");switch(t.append(n),n.classList.add("ol-cm-environment-line"),n.classList.add("ol-cm-environment-".concat(this.environment)),this.line){case"begin":t.classList.add("ol-cm-environment-top"),n.classList.add("ol-cm-environment-first-line");break;case"end":t.classList.add("ol-cm-environment-bottom"),n.classList.add("ol-cm-environment-last-line")}return t}},{key:"eq",value:function(e){return e.environment===this.environment&&e.line===this.line}},{key:"ignoreEvent",value:function(e){return"mousedown"!==e.type&&"mouseup"!==e.type}}])&&qt(t.prototype,n),r&&qt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.l9);function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Vt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Vt(l)?l:String(l)),r)}var a,l}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);if(t){var a=Kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Kt(e){return Kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kt(e)}var Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(l,e);var t,n,r,a=Gt(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"toDOM",value:function(e){this.destroyed=!1;var t=document.createElement("span");return t.classList.add("ol-cm-graphics-inline"),this.renderGraphic(t,e),t}},{key:"ignoreEvent",value:function(e){return"mousedown"!==e.type&&"mouseup"!==e.type}}])&&Wt(t.prototype,n),r&&Wt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(He),Xt=n(99618),Jt=(n(54565),n(78014)),Qt=n(87546);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==en(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==en(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===en(l)?l:String(l)),r)}var a,l}function nn(){return nn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=an(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},nn.apply(this,arguments)}function rn(e,t){return rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rn(e,t)}function on(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=an(e);if(t){var a=an(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function an(e){return an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},an(e)}var sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rn(e,t)}(l,e);var t,n,r,a=on(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"setEditDispatcher",value:function(e,t){var n=this;e.classList.toggle("hidden",!this.figureData),this.figureData?e.onmousedown=function(e){return e.preventDefault(),e.stopImmediatePropagation(),t.dispatch({effects:Jt.J$.of(n.figureData)}),window.dispatchEvent(new CustomEvent("figure-modal:open-modal")),(0,Qt.K)(t,"toolbar-figure-modal-edit"),!1}:e.onmousedown=null}},{key:"updateDOM",value:function(e,t){var n,r;if(this.destroyed=!1,e.classList.toggle("ol-cm-environment-centered",this.centered),this.filePath===e.dataset.filepath&&e.dataset.width===String(null===(n=this.figureData)||void 0===n||null===(r=n.width)||void 0===r?void 0:r.toString())){var a=e.querySelector(".ol-cm-graphics-edit-button");return a&&this.setEditDispatcher(a,t),!0}return this.renderGraphic(e,t),!0}},{key:"createEditButton",value:function(e){var t=document.createElement("button");t.setAttribute("aria-label",e.state.phrase("edit_figure")),this.setEditDispatcher(t,e),t.classList.add("btn","btn-secondary","ol-cm-graphics-edit-button");var n=document.createElement("span");return n.classList.add("fa","fa-pencil"),t.append(n),t}},{key:"renderGraphic",value:function(e,t){if(nn(an(l.prototype),"renderGraphic",this).call(this,e,t),this.figureData){var n=this.createEditButton(t);e.prepend(n)}}}])&&tn(t.prototype,n),r&&tn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(He);function ln(e){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(e)}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==ln(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===ln(l)?l:String(l)),r)}var a,l}function un(){return un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pn(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},un.apply(this,arguments)}function dn(e,t){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dn(e,t)}function hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pn(e);if(t){var a=pn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ln(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pn(e){return pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pn(e)}var mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dn(e,t)}(l,e);var t,n,r,a=hn(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"updateElementData",value:function(e){var t,n,r;e.dataset.filepath=this.filePath,e.dataset.width=null===(t=this.figureData)||void 0===t||null===(n=t.width)||void 0===n?void 0:n.toString(),null!==(r=this.figureData)&&void 0!==r&&r.width?e.style.width="min(100%, ".concat(100*this.figureData.width,"%)"):e.style.width=""}},{key:"toDOM",value:function(e){this.destroyed=!1;var t=document.createElement("span");t.classList.add("ol-cm-graphics-inline-edit-wrapper"),this.updateElementData(t);var n=document.createElement("span");return n.classList.add("ol-cm-graphics-inline"),this.renderGraphic(n,e),t.append(n),t}},{key:"updateDOM",value:function(e,t){return!!un(pn(l.prototype),"updateDOM",this).call(this,e,t)&&(this.updateElementData(e),!0)}},{key:"ignoreEvent",value:function(e){return"mousedown"!==e.type&&"mouseup"!==e.type}},{key:"getFigureWidth",value:function(){return"100%"}}])&&cn(t.prototype,n),r&&cn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(sn);function gn(e){return function(e){if(Array.isArray(e))return yn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e,t){if(e){if("string"==typeof e)return yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yn(e,t):void 0}}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bn(e,t){return e.readOnly||!(0,p.RM)(e.selection,t)}function wn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4?arguments[4]:void 0;if(!t)return[];var f=t.getChild("OpenBrace"),d=t.getChild("CloseBrace");return f&&d&&f.to>n&&(r||t.to-t.from>2)?[a.p.replace({widget:e}).range(n,f.to),a.p.replace({widget:l}).range(d.from,d.to)]:[]}var xn=function(e){var t;return null===(t=e.getChild("EnvNameGroup"))||void 0===t?void 0:t.getChild("CloseBrace")},_n=function(e){var t,n="enabled"===(0,Xt.Z)("ol-splitTestVariants",{})["figure-modal"],f=function(t){return e.fileTreeManager.getPreviewByPath(t)},d=function(e,t){var r,l=[],d=[],h=[],y=0,w=0,x={from:0,to:0};if(t.iterate({enter:function(t){var n,r;if(t.type.is("DocumentEnvironment"))return x.to=null!==(n=null===(r=t.node.getChild("Content"))||void 0===r?void 0:r.from)&&void 0!==n?n:t.from,!1;if(t.type.is("Title")){var a=t.node.getChild("TextArgument");if(a){var l=e.sliceDoc(a.from,a.to);x.title={node:a,content:l}}}else if(t.type.is("Author")){var f=t.node.getChild("TextArgument");if(f){var d=e.sliceDoc(f.from,f.to);x.author={node:f,content:d}}}}}),x.to>0){for(var _=e.doc.lineAt(x.to).number,S=1;S<=_;++S){var k=e.doc.line(S),C=["ol-cm-preamble-line"];1===S&&C.push("ol-cm-environment-first-line"),S===_&&C.push("ol-cm-environment-last-line"),l.push(a.p.line({class:C.join(" ")}).range(k.from))}var E=(0,p.RM)(e.selection,x);E?l.push(a.p.widget({widget:new Pt(x.to,E),block:!0,side:-1}).range(0)):l.push(a.p.replace({widget:new Pt(x.to,E),block:!0}).range(0,x.to))}return t.iterate({enter:function(t){if(t.type.is("$Environment")){if(bn(e,t)){var _=(0,ve.dr)(t.node,e);if(_&&["figure","table"].includes(_)){var S=t.node.getChild("BeginEnv"),k=t.node.getChild("EndEnv");if(S&&k&&xn(S)&&xn(k)){var C=e.doc.lineAt(S.from),E=e.doc.lineAt(k.from),j={from:C.from,to:(0,p.n3)(e.doc,C)},T={from:(0,p.hV)(e.doc,E),to:E.to};if(bn(e,{from:j.from,to:T.to})){l.push(a.p.replace({widget:new zt(_,"begin"),block:!0}).range(j.from,j.to),a.p.replace({widget:new zt(_,"end"),block:!0}).range(T.from,T.to));var A=ut(t);if(A){var P=e.doc.lineAt(A.from),D=(0,p.hV)(e.doc,P),I=(0,p.n3)(e.doc,P);l.push(a.p.replace({block:!0}).range(D,I))}}}}else if(t.type.is("ListEnvironment")){var M=t.node.getChild("BeginEnv"),L=t.node.getChild("EndEnv");if(M&&L&&xn(M)&&xn(L)){var N=e.doc.lineAt(M.from),F=e.doc.lineAt(L.from),U={from:N.from,to:(0,p.n3)(e.doc,N)},H={from:(0,p.hV)(e.doc,F),to:F.to};(0,p.RM)(e.selection,U)||(0,p.RM)(e.selection,H)||l.push(a.p.replace({block:!0}).range(U.from,U.to),a.p.replace({block:!0}).range(H.from,H.to))}}}}else if(t.type.is("BeginEnv")){var z=(0,ve.dr)(t.node,e);if(z)switch(z){case"itemize":case"enumerate":!function(e){r&&(d.push(r),h.push(y)),r=e,y=0}(z),w++;break;case"abstract":bn(e,t)&&l.push(a.p.replace({widget:new ue(z),block:!0}).range(t.from,t.to));break;case"frame":if(bn(e,t)){var V=t.node.parent;if(null!=V&&V.type.is("Environment")){var W=(0,ve.M2)(V);if(!W)break;if(W.length>0){var Z=W[0];if(!Z)break;var G=Z.to,K=Z.getChild("LongArg");if(!K)break;var Y={title:{node:Z,content:e.sliceDoc(K.from,K.to)}};if(W.length>1){var X=W[1];if(X){var J=X.getChild("LongArg");J&&(G=X.to,Y.subtitle={node:X,content:e.sliceDoc(J.from,J.to)})}}l.push(a.p.replace({widget:new wt(Y),block:!0}).range(t.from,G))}}}}}else if(t.type.is("EndEnv")){var Q=(0,ve.dr)(t.node,e);if(Q)switch(Q){case"itemize":case"enumerate":r===Q&&(r=d.pop(),y=null!==(nt=h.pop())&&void 0!==nt?nt:0),w--;break;case"abstract":bn(e,t)&&l.push(a.p.replace({widget:new ge,block:!0}).range(t.from,t.to));break;case"document":bn(e,t)&&l.push(a.p.replace({widget:new Nt,block:!0}).range(t.from,t.to));break;case"frame":bn(e,t)&&l.push(a.p.replace({widget:new Et,block:!0}).range(t.from,t.to))}}else if(t.type.is("$SectioningCommand")){var ee=(0,B.F0)(e,t.to,"SectioningCommand");if(ee){var te=!bn(e,ee),re=ee.getChild("SectioningArgument");if(re){var oe=re.getChildren("$Brace");if(2!==oe.length)return!1;var ae=re.getChild("LongArg");return!!ae&&(!!e.sliceDoc(ae.from,ae.to).trim()&&(l.push(a.p.replace({widget:new q(te?"}":"")}).range(oe[1].from,oe[1].to)),l.push(a.p.replace({widget:new q(te?"{":"")}).range(t.from,ae.from)),!1))}}}else{if(t.type.is("VerbCommand")){if(bn(e,t)){var se=t.node.getChild("VerbContent");se&&se.to-se.from>2&&(l.push(a.p.replace({}).range(t.from,se.from+1)),l.push(a.p.replace({}).range(t.to-1,t.to)))}return!1}if(t.type.is("Cite")){if(bn(e,t)){var le,ce=null===(le=t.node.getChild("BibKeyArgument"))||void 0===le?void 0:le.getChild("ShortTextArgument");l.push.apply(l,gn(wn(new Ke("📚"),ce,t.from)))}return!1}if(t.type.is("Ref")){if(bn(e,t)){var fe,de=null===(fe=t.node.getChild("RefArgument"))||void 0===fe?void 0:fe.getChild("ShortTextArgument");l.push.apply(l,gn(wn(new Ke("🏷"),de,t.from)))}return!1}if(t.type.is("Label")){if(bn(e,t)){var he,pe=null===(he=t.node.getChild("LabelArgument"))||void 0===he?void 0:he.getChild("ShortTextArgument");l.push.apply(l,gn(wn(new Ke("🏷"),pe,t.from)))}return!1}if(t.type.is("Include")){if(bn(e,t)){var me,ye=null===(me=t.node.getChild("IncludeArgument"))||void 0===me?void 0:me.getChild("FilePathArgument");l.push.apply(l,gn(wn(new Ke("🔗"),ye,t.from)))}return!1}if(t.type.is("Input")){if(bn(e,t)){var be=t.node.getChild("InputArgument");be&&be.to-be.from>2&&(l.push(a.p.replace({widget:new Ke("🔗")}).range(t.from,be.from+1)),l.push(a.p.replace({widget:new q}).range(t.to-1,t.to)))}return!1}if(t.type.is("Math")){var we=(0,B.F0)(e,t.from,"$MathContainer")||(0,B.F0)(e,t.from,"EquationEnvironment")||(0,B.F0)(e,t.from,"EquationArrayEnvironment");if(we&&(we.type.is("$Environment")?function(e,t){return bn(e,{from:e.doc.lineAt(t.from).from,to:e.doc.lineAt(t.to).to})}(e,we):bn(e,we))){var xe=e.doc.sliceString(t.from,t.to).trim();if(xe.length){var _e=xe,Se=!1;if(we.type.is("$Environment")){var ke=(0,ve.dr)(we,e);ke&&("math"!==ke&&"displaymath"!==ke&&(_e=e.doc.sliceString(we.from,we.to).trim()),"math"!==ke&&(Se=!0))}else(we.type.is("BracketMath")||Boolean(we.getChild("DisplayMath")))&&(Se=!0);return l.push(a.p.replace({widget:new Te(_e,Se),block:Se}).range(we.from,we.to)),!1}}}else if(t.type.is("HrefCommand")){if(bn(e,t)){var Ce=t.node.getChild("UrlArgument"),Ee=t.node.getChild("ShortTextArgument");Ce&&l.push.apply(l,gn(wn(new q,Ee,t.from)))}}else if(t.type.is("Caption")){if(bn(e,t)){var Oe=t.node.getChild("TextArgument");l.push.apply(l,gn(wn(new q,Oe,t.from)))}}else if(t.type.is("IncludeGraphics")){if(bn(e,t)){var je,$e,Ae=null===(je=t.node.getChild("IncludeGraphicsArgument"))||void 0===je||null===($e=je.getChild("FilePathArgument"))||void 0===$e?void 0:$e.getChild("LiteralArgContent");if(Ae){var Pe=e.doc.sliceString(Ae.from,Ae.to);if(Pe){var De=(0,B.F0)(e,t.from,"FigureEnvironment"),Re=Boolean(De&&ut(De)),Ie=De?(0,ve.Oh)(De,e):null,Me=e.doc.lineAt(t.from),Le=Me.text.trim().length===t.to-t.from,Ne=n?sn:He,Fe=n?mn:Yt;Le?l.push(a.p.replace({widget:new Ne(Pe,f,Re,Ie),block:!0}).range(Me.from,Me.to)):l.push(a.p.replace({widget:new Fe(Pe,f,Re,Ie)}).range(t.from,t.to))}return!1}}}else if(t.type.is("Maketitle")){if(bn(e,t)){var qe=e.doc.lineAt(t.from),Be=(0,p.hV)(e.doc,qe),Ue=(0,p.n3)(e.doc,qe);return bn(e,{from:Be,to:Ue})&&l.push(a.p.replace({widget:new ne(x),block:!0}).range(Be,Ue)),!1}}else if(t.type.is("Item")){if(r){y++;var ze=e.doc.lineAt(t.from),Ve=/^\s*$/.test(e.sliceDoc(ze.from,t.from))?ze.from:t.from;return l.push(a.p.replace({widget:new O(r||"document",y,w)}).range(Ve,t.to)),!1}}else if(t.type.is("UnknownCommand")){var We=t.node,Ze=We.getChild("$CtrlSeq"),Ge=We.getChild("TextArgument");if(Ze){var Ye=e.doc.sliceString(Ze.from,Ze.to).trim();if(Ye.length>0)if(["\\textbf","\\textit","\\underline"].includes(Ye)){var Xe=null==Ge?void 0:Ge.getChild("LongArg"),Je=!bn(e,t)||(null==Xe?void 0:Xe.from)===(null==Xe?void 0:Xe.to);l.push.apply(l,gn(wn(new q(Je?"{":""),Ge,t.from,!0,new q(Je?"}":""))))}else if(["\\textsc","\\texttt","\\sout","\\emph"].includes(Ye))bn(e,t)&&l.push.apply(l,gn(wn(new q,Ge,t.from)));else if("\\url"===Ye){if(bn(e,t))return l.push.apply(l,gn(wn(new q,Ge,t.from))),!1}else if("\\LaTeX"===Ye){if(bn(e,t))return l.push(a.p.replace({widget:new R}).range(t.from,t.to)),!1}else if("\\TeX"===Ye){if(bn(e,t))return l.push(a.p.replace({widget:new tt}).range(t.from,t.to)),!1}else if(et=Ye,lt.has(et)&&bn(e,t)){var Qe=function(e){var t=lt.get(e);if(void 0!==t)return new st(t)}(Ye);if(Qe)return l.push(a.p.replace({widget:Qe}).range(t.from,t.to)),!1}}}}var et,nt}}),a.p.set(l,!0)};return[r.QQ.define({create:function(e){return t=(0,l.qz)(e),{mousedown:!1,decorations:d(e,t)}},update:function(e,n){var r,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=vn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}(n.effects);try{for(a.s();!(r=a.n()).done;){var f=r.value;f.is(p.kE)&&(e={mousedown:f.value,decorations:e.decorations})}}catch(e){a.e(e)}finally{a.f()}var h=(0,l.qz)(n.state);return h.type===t.type&&h.length<n.state.doc.length?e={mousedown:e.mousedown,decorations:e.decorations.map(n.changes)}:e.mousedown||h===t&&!n.selection&&!(0,p.lJ)(n)||(t=h,e={mousedown:e.mousedown,decorations:d(n.state,h)}),e},provide:function(e){return[a.tk.decorations.from(e,(function(e){return e.decorations})),a.tk.atomicRanges.from(e,(function(e){return function(){return e.decorations}}))]}})]};function Sn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cn=a.lg.define((function(e){var t=function(t,n){var r,l=[],f=Sn(e.visibleRanges);try{for(f.s();!(r=f.n()).done;){var d=r.value,h=d.from,p=d.to;null==n||n.iterate({from:h,to:p,enter:function(e){if(e.type.is("KnownCommand")||e.type.is("UnknownCommand")){var n,r,f=null!==(n=e.node.getChild("$CtrlSeq"))&&void 0!==n?n:null===(r=e.node.firstChild)||void 0===r?void 0:r.getChild("$CtrlSeq");if(f){var d=t.doc.sliceString(f.from+1,f.to);if("label"===d){var h=e.from,p=e.to;p>h&&l.push(a.p.mark({class:"ol-cm-".concat(d),inclusive:!0}).range(h,p))}else{var y=f.to+1,w=e.to-1;w>y&&l.push(a.p.mark({class:"ol-cm-command-".concat(d),inclusive:!0}).range(y,w))}}}else if(e.type.is("SectioningCommand")){var x=e.node.getChild("$CtrlSeq");if(x){var _=t.doc.sliceString(x.from+1,x.to);l.push(a.p.mark({class:"ol-cm-heading ol-cm-command-".concat(_)}).range(e.from,e.to))}}else if(e.type.is("Caption")||e.type.is("Label")){var S=e.type.is("Caption")?"caption":"label";if(e.node.getChild("$Argument"))for(var k={start:t.doc.lineAt(e.from),end:t.doc.lineAt(e.to)},C=k.start.number;C<=k.end.number;C++){var E=t.doc.line(C);l.push(a.p.line({class:"ol-cm-".concat(S,"-line")}).range(E.from))}}else if(e.type.is("$Environment")){var O=(0,ve.dr)(e.node,t);switch(O){case"abstract":case"figure":case"table":for(var j=Boolean(ut(e)),T={start:t.doc.lineAt(e.from),end:t.doc.lineAt(e.to)},A=T.start.number;A<=T.end.number;A++){var P=t.doc.line(A),D=["ol-cm-environment-".concat(O),"ol-cm-environment-line"];j&&D.push("ol-cm-environment-centered"),l.push(a.p.line({class:D.join(" ")}).range(P.from))}}}}})}}catch(e){f.e(e)}finally{f.f()}return a.p.set(l,!0)},n=(0,l.qz)(e.state);return{decorations:t(e.state,n),update:function(e){var r=(0,l.qz)(e.state);r.type===n.type&&r.length<e.view.viewport.to?this.decorations=this.decorations.map(e.changes):(r!==n||e.viewportChanged)&&(n=r,this.decorations=t(e.state,r))}}}),{decorations:function(e){return e.decorations}}),En=n(57029),On=n(22195),jn=r.Wl.highest(a.$f.of([{key:"Enter",run:function(e){var t=e.state,n=!1,a=t.changeByRange((function(e){if(e.empty){var a=e.from,f=(0,B.F0)(t,a,"ListEnvironment");if(f){var d,h=t.doc.lineAt(e.from),p=t.doc.lineAt(f.to);if(h.number===p.number-1&&"\\item"===h.text.trim()){var y=t.changes({from:h.from,to:h.to+1,insert:""}),w=r.jT.cursor(p.to+1).map(y);return n=!0,{changes:y,range:w}}var x=new l.Gn(t),_=null!==(d=(0,l.K0)(x,a))&&void 0!==d?d:0,S=(0,l.SS)(t,_),k="\n".concat(S,"\\item ");return n=!0,{changes:{from:a,insert:k},range:r.jT.cursor(a+k.length)}}if((0,B.F0)(t,a,"SectioningCommand")){var C=t.doc.lineAt(a).number+1;if(C<=t.doc.lines){var E=t.doc.line(C);return n=!0,{range:r.jT.cursor(E.from)}}}}return{range:e}}));return n&&e.dispatch(a,{scrollIntoView:!0,userEvent:"input"}),n}},{key:"Mod-]",preventDefault:!0,run:On.hG},{key:"Mod-[",preventDefault:!0,run:On.MX},{key:"Tab",preventDefault:!0,run:function(e){return(0,On.Gg)(e.state)&&(0,On.hG)(e)}},{key:"Shift-Tab",preventDefault:!0,run:On.MX},{key:"Ctrl-b",mac:"Mod-b",preventDefault:!0,run:(0,En.uz)("\\textbf")},{key:"Ctrl-i",mac:"Mod-i",preventDefault:!0,run:(0,En.uz)("\\textit")}])),$n=a.lg.define((function(e){var t=!1;return{update:function(n){t||(0,l.qz)(n.state).length!==n.state.doc.length||(t=!0,n.view.state.selection.eq(r.jT.create([r.jT.cursor(0)]))&&setTimeout((function(){var t,a=(0,p.n3)(n.state.doc,n.state.doc.lineAt(null!==(t=(0,ve.lX)(n.state))&&void 0!==t?t:0))+1;e.dispatch({selection:r.jT.cursor(Math.min(a,n.state.doc.length))})}),0))}}})),Tn=n(31931),An=n(6956),Pn=n(41518),Dn=n(33237),Rn=n(79477);n(41549);function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||Mn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(e,t){if(e){if("string"==typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nn=r.yy.transactionFilter.of((function(e){if(e.selection){var t,n=e.selection,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Mn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}(e.selection.ranges.entries());try{for(a.s();!(t=a.n()).done;){var f=In(t.value,2),d=f[0],h=f[1];if(h.empty){var p,y=(0,l.qz)(e.state).resolveInner(h.anchor,1),w=Fn(y,e,h);if(null!==w)n=n.replaceRange(r.jT.cursor(w,h.assoc,null!==(p=h.bidiLevel)&&void 0!==p?p:void 0,h.goalColumn),d)}}}catch(e){a.e(e)}finally{a.f()}if(n!==e.selection)return[e,{selection:n}]}return e})),Fn=function(e,t,n){var r,a;if(e.type.is("Item"))a=e;else if(e.type.is("ItemCtrlSeq"))a=e.parent;else if(e.type.is("Whitespace")){var l,f;a=null===(l=e.nextSibling)||void 0===l||null===(f=l.firstChild)||void 0===f?void 0:f.firstChild}return null!==(r=a)&&void 0!==r&&r.type.is("Item")?t.isUserEvent("select.pointer")||1!==n.assoc||n.goalColumn?a.to:Math.max(t.state.doc.lineAt(n.anchor).from-1,1):null};function qn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=new r.F6,Hn=r.Py.define(),zn=(0,Tn.Bn)(Hn),Vn=r.QQ.define({create:function(){return!1},update:function(e,t){var n,r;return null!==(n=null===(r=zn(t))||void 0===r?void 0:r.value)&&void 0!==n?n:e}}),Wn=function(e){return e.visual?er(e):[]},Zn=function(e,t){return(0,Rn.Z)(e.docName)?[Vn.init((function(){return t.visual})),Un.of(Wn(t))]:[]},Gn=function(e){return e.state.field(Vn,!1)||!1},Kn=function(e){return{effects:[Hn.of(e.visual),Un.reconfigure(Wn(e))]}},Yn=function(e,t){var n=new r.F6,l=function(e){return e?[]:t};return[n.of(l(e)),r.yy.transactionExtender.of((function(e){var t=zn(e);return t?{effects:n.reconfigure(l(t.value))}:null})),a.tk.updateListener.of((function(e){var t,n=qn(e.transactions);try{for(n.s();!(t=n.n()).done;){var r,a=qn(t.value.effects);try{for(a.s();!(r=a.n()).done;){var l=r.value;l.is(Hn)&&(l.value||window.setTimeout((function(){e.view.dispatch((0,Pn.L)()),e.view.focus()})))}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}}))]},Xn=new r.F6,Jn=[Xn.of([a.tk.editable.of(!1)]),a.lg.define((function(e){var t=function(){e.dispatch({effects:Xn.reconfigure([a.tk.editorAttributes.of({class:"ol-cm-parsed"}),a.tk.editable.of(!0)])},(0,Pn.L)()),e.focus()};if((0,l.qz)(e.state).length===e.state.doc.length)return window.setTimeout(t),{};var n=window.setTimeout(t,5e3),r=!1;return{update:function(a){!r&&(0,An.uk)(a)&&(r=!0,window.setTimeout((function(){new Promise((function(){(0,l.DB)(e,e.state.doc.length,1/0),window.clearTimeout(n),window.setTimeout(t)})).catch((function(e){console.error(e)}))})))}}}))],Qn=r.yy.transactionExtender.of((function(e){if(!e.scrollIntoView){var t,n=qn(e.effects);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.is(p.kE)&&!1===r.value)return{effects:a.tk.scrollIntoView(e.newSelection.main.head)}}}catch(e){n.e(e)}finally{n.f()}}return{}})),er=function(e){return[h,d,p.ER,Nn,Cn,_n(e),$n,jn,(0,Dn.C)(),Qn,Jn,(0,Jt.op)()]}},9685:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});n(15735),n(58188),n(73439),n(28673),n(6886);var r=n(77120),a=[r.c6.of({name:"latex",extensions:["tex","bib","sty","cls","clo","bst","bbl","pdf_tex","pdf_t","map","fd","enc","def","mf","pgf","tikz","bbx","cbx","dbx","lbx","lco","ldf","xmpdata","Rnw","lyx","inc","dtx","hak","eps_tex","brf","ins","hva","Rtex","rtex","pstex","pstex_t","gin","fontspec","pygstyle","pygtex","ps_tex"],load:function(){return Promise.all([n.e(1392),n.e(2878),n.e(4383)]).then(n.bind(n,54383)).then((function(e){return e.latex()}))}}),r.c6.of({name:"markdown",extensions:["md","markdown"],load:function(){return Promise.all([n.e(1392),n.e(1215),n.e(7544)]).then(n.bind(n,7544)).then((function(e){return e.markdown()}))}})]},61591:function(e,t,n){"use strict";n.d(t,{DB:function(){return r},Ty:function(){return a}});n(18178),n(15735),n(79321),n(58188),n(28673),n(6886);var r=function(e){return"\\begin{".concat(e,"}\n\t$1\n\\end{").concat(e,"}")},a=new Map([["abstract",r("abstract")],["align",r("align")],["align*",r("align*")],["array","\\begin{array}{${1:cc}}\n\t$2 & $3 \\\\\n\t$4 & $5\n\\end{array}"],["center",r("center")],["document",function(e){return"\\begin{".concat(e,"}\n$1\n\\end{").concat(e,"}")}("document")],["equation",r("equation")],["equation*",r("equation*")],["enumerate","\\begin{enumerate}\n\t\\item $1\n\\end{enumerate}"],["figure","\\begin{figure}\n\t\\centering\n\t\\includegraphics{$1}\n\t\\caption{${2:Caption}}\n\t\\label{${3:fig:enter-label}}\n\\end{figure}"],["frame","\\begin{frame}{${1:Frame Title}}\n\t$2\n\\end{frame}"],["gather",r("gather")],["gather*",r("gather*")],["itemize","\\begin{itemize}\n\t\\item $1\n\\end{itemize}"],["multline",r("multline")],["multline*",r("multline*")],["quote",r("quote")],["split",r("split")],["table","\\begin{table}[$1]\n\t\\centering\n\t\\begin{tabular}{${2:c|c}}\n\t\t$3 & $4 \\\\\n\t\t$5 & $6\n\t\\end{tabular}\n\t\\caption{${7:Caption}}\n\t\\label{${8:tab:my_label}}\n\\end{table}"],["tabular","\\begin{tabular}{${1:c|c}}\n\t$2 & $3 \\\\\n\t$4 & $5\n\\end{tabular}"],["verbatim",r("verbatim")]])},21296:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});n(77950),n(85940);var r=function(e){return e.replace(/\$(\d+)/g,"#{$1}")+"${}"}},49272:function(e,t,n){"use strict";n.r(t),n.d(t,{Ampersand:function(){return nt},AuthorCtrlSeq:function(){return se},BareFilePathArgument:function(){return it},Begin:function(){return x},BibKeyArgument:function(){return Ze},BibliographyCtrlSeq:function(){return oe},BibliographyStyleCtrlSeq:function(){return ae},BlankLine:function(){return ke},Book:function(){return Rt},BookCtrlSeq:function(){return W},BracketMath:function(){return wt},CaptionCtrlSeq:function(){return N},CenteringCtrlSeq:function(){return re},Chapter:function(){return Mt},ChapterCtrlSeq:function(){return G},CiteCtrlSeq:function(){return C},CiteStarrableCtrlSeq:function(){return E},CloseBrace:function(){return je},CloseBracket:function(){return Le},CloseBracketCtrlSym:function(){return we},CloseBracketMath:function(){return _t},CloseParenCtrlSym:function(){return ye},CloseParenMath:function(){return Ct},Command:function(){return Pe},Comment:function(){return xe},Csname:function(){return p},CtrlSeq:function(){return Qe},CtrlSym:function(){return Ge},DefCtrlSeq:function(){return F},DefinitionArgument:function(){return Ye},DefinitionFragment:function(){return Je},DisplayMath:function(){return bt},DocumentClassCtrlSeq:function(){return P},DocumentEnvName:function(){return ce},DocumentEnvironment:function(){return Ee},Dollar:function(){return et},DollarMath:function(){return at},End:function(){return _},EnvName:function(){return Fe},Environment:function(){return Ne},EquationArrayEnvName:function(){return de},EquationArrayEnvironment:function(){return jt},EquationEnvName:function(){return fe},EquationEnvironment:function(){return Ot},FigureEnvName:function(){return me},FigureEnvironment:function(){return Pt},FilePathArgument:function(){return ze},HboxCtrlSeq:function(){return T},HrefCtrlSeq:function(){return R},IncludeCtrlSeq:function(){return te},IncludeGraphicsCtrlSeq:function(){return L},InlineMath:function(){return st},InputCtrlSeq:function(){return ee},ItemCtrlSeq:function(){return ne},KnownCommand:function(){return De},KnownEnvironment:function(){return Ce},LaTeX:function(){return _e},LabelArgument:function(){return Ve},LabelCtrlSeq:function(){return O},LeftCtrlSeq:function(){return q},ListEnvName:function(){return ge},ListEnvironment:function(){return Dt},LiteralArgContent:function(){return l},LongArg:function(){return Me},LstInlineContent:function(){return a},LstInlineCtrlSeq:function(){return M},MacroParameter:function(){return Ke},MaketitleCtrlSeq:function(){return le},Math:function(){return lt},MathChar:function(){return yt},MathClosing:function(){return mt},MathCommand:function(){return ut},MathCtrlSym:function(){return ft},MathDelimitedGroup:function(){return ht},MathDelimiter:function(){return h},MathGroup:function(){return dt},MathOpening:function(){return pt},MathSpecialChar:function(){return gt},MathTextCommand:function(){return ct},MathTextCtrlSeq:function(){return j},NewCommandCtrlSeq:function(){return U},NewEnvironmentCtrlSeq:function(){return z},NewLine:function(){return Xe},Normal:function(){return tt},Number:function(){return vt},OpenBrace:function(){return Oe},OpenBracket:function(){return Te},OpenBracketCtrlSym:function(){return be},OpenBracketMath:function(){return xt},OpenParenCtrlSym:function(){return ve},OpenParenMath:function(){return kt},OptionalArgument:function(){return $e},PackageArgument:function(){return Ue},Paragraph:function(){return qt},ParagraphCtrlSeq:function(){return J},ParenMath:function(){return St},Part:function(){return It},PartCtrlSeq:function(){return Z},RefArgument:function(){return We},RefCtrlSeq:function(){return S},RefStarrableCtrlSeq:function(){return k},RenewCommandCtrlSeq:function(){return H},RenewEnvironmentCtrlSeq:function(){return V},RightCtrlSeq:function(){return B},Section:function(){return Lt},SectionCtrlSeq:function(){return K},SectioningArgument:function(){return rt},ShortArg:function(){return Be},ShortOptionalArg:function(){return Ae},ShortTextArgument:function(){return qe},SpaceDelimitedLiteralArgContent:function(){return f},SubParagraph:function(){return Bt},SubParagraphCtrlSeq:function(){return Q},SubSection:function(){return Nt},SubSectionCtrlSeq:function(){return Y},SubSubSection:function(){return Ft},SubSubSectionCtrlSeq:function(){return X},TabularEnvName:function(){return ue},TabularEnvironment:function(){return Et},Text:function(){return Se},TextArgument:function(){return Ie},TikzPictureContent:function(){return At},TikzPictureEnvName:function(){return pe},TikzPictureEnvironment:function(){return Tt},TitleCtrlSeq:function(){return A},TrailingContent:function(){return w},TrailingWhitespaceOnly:function(){return y},UnknownCommand:function(){return ot},UrlArgument:function(){return He},UsePackageCtrlSeq:function(){return D},VerbContent:function(){return r},VerbCtrlSeq:function(){return I},VerbatimContent:function(){return d},VerbatimEnvName:function(){return he},VerbatimEnvironment:function(){return $t},Whitespace:function(){return Re}});var r=1,a=2,l=3,f=4,d=5,h=6,p=7,y=8,w=9,x=10,_=11,S=12,k=13,C=14,E=15,O=16,j=17,T=18,A=19,P=20,D=21,R=22,I=23,M=24,L=25,N=26,F=27,q=28,B=29,U=30,H=31,z=32,V=33,W=34,Z=35,G=36,K=37,Y=38,X=39,J=40,Q=41,ee=42,te=43,ne=44,re=45,oe=46,ae=47,se=48,le=49,ce=50,ue=51,fe=52,de=53,he=54,pe=55,me=56,ge=57,ve=58,ye=59,be=60,we=61,xe=62,_e=63,Se=64,ke=65,Ce=66,Ee=67,Oe=70,je=71,$e=72,Te=73,Ae=74,Pe=75,De=76,Re=78,Ie=79,Me=80,Le=81,Ne=83,Fe=86,qe=92,Be=93,Ue=100,He=102,ze=107,Ve=110,We=112,Ze=114,Ge=116,Ke=117,Ye=118,Xe=119,Je=120,Qe=121,et=123,tt=124,nt=125,rt=127,it=137,ot=143,at=144,st=145,lt=146,ct=147,ut=148,ft=149,dt=150,ht=151,pt=152,mt=153,gt=154,vt=155,yt=156,bt=159,wt=160,xt=161,_t=162,St=163,kt=164,Ct=165,Et=168,Ot=174,jt=179,$t=183,Tt=188,At=192,Pt=195,Dt=199,Rt=204,It=207,Mt=210,Lt=213,Nt=216,Ft=219,qt=222,Bt=225},31931:function(e,t,n){"use strict";n.d(t,{B:function(){return r},Bn:function(){return l},V9:function(){return a}});n(58188),n(49228);var r=function(e){return function(t){return t.effects.some((function(t){return t.is(e)}))}},a=function(e){return function(t){return t.transactions.some((function(t){return t.effects.some((function(t){return t.is(e)}))}))}},l=function(e){return function(t){return t.effects.find((function(t){return t.is(e)}))}}},47037:function(e,t,n){"use strict";n.d(t,{F0:function(){return x},Fd:function(){return k},SP:function(){return _},c_:function(){return E},dw:function(){return S},iG:function(){return T},kA:function(){return A},kG:function(){return C},uM:function(){return D}});n(26936),n(36728),n(41549),n(58188),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(96882),n(38859),n(17525),n(18275),n(96928),n(71372),n(1939),n(73439),n(32501),n(27233),n(77950),n(21850);var r=n(77120),a=n(30864),l=n(49272);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(){p=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",d=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function y(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{y({},"")}catch(e){y=function(e,t,n){return e[t]=n}}function w(e,t,n,a){var l=t&&t.prototype instanceof S?t:S,f=Object.create(l.prototype),d=new L(a||[]);return r(f,"_invoke",{value:D(e,n,d)}),f}function x(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=w;var _={};function S(){}function k(){}function C(){}var E={};y(E,l,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(N([])));j&&j!==t&&n.call(j,l)&&(E=j);var T=C.prototype=S.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){y(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function a(r,l,d,h){var p=x(e[r],e,l);if("throw"!==p.type){var y=p.arg,w=y.value;return w&&"object"==f(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,d,h)}),(function(e){a("throw",e,d,h)})):t.resolve(w).then((function(e){y.value=e,d(y)}),(function(e){return a("throw",e,d,h)}))}h(p.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function D(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return F()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=R(f,n);if(d){if(d===_)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=x(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===_)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function R(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=x(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,_;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return k.prototype=C,r(T,"constructor",{value:C,configurable:!0}),r(C,"constructor",{value:k,configurable:!0}),k.displayName=y(C,h,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,y(e,h,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},A(P.prototype),y(P.prototype,d,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new P(w(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},A(T),y(T,h,"Generator"),y(T,l,(function(){return this})),y(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,_):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),_}},e}var y=p().mark(_),w=p().mark(O);var x=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=(0,r.qz)(e).resolveInner(t,a);return S(l,n)};function _(e,t){var n;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=e;case 1:if(!n){r.next=8;break}if(!n.type.is(t)){r.next=5;break}return r.next=5,n;case 5:n=n.parent,r.next=1;break;case 8:case"end":return r.stop()}}),y)}var S=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=e;a;a=a.parent){var l,f=d(n);try{for(f.s();!(l=f.n()).done;){var h=l.value;if(a.type.is(h))return a}}catch(e){f.e(e)}finally{f.f()}}return null},k=function(e,t){for(var n=e;n;n=n.parent){var r;if((null===(r=n.parent)||void 0===r?void 0:r.to)!==t&&n.to===t)return n}return null},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];return e.cursor().iterate((function(e){if(e.type.is(t)&&(r.push(e.node),!n))return!1})),r},E=function(e,t){var n;return null!==(n=x(e,t,"BibKeyArgument",-1))&&void 0!==n?n:x(e,t,"BibKeyArgument")};function O(e,t,n){var r,a,l,f,h,y,x;return p().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:r=d(t.ranges),p.prev=1,r.s();case 3:if((a=r.n()).done){p.next=26;break}l=a.value,f=e.resolveInner(l.anchor),h=d(_(f,n)),p.prev=7,h.s();case 9:if((y=h.n()).done){p.next=16;break}if(!(x=y.value)){p.next=14;break}return p.next=14,x;case 14:p.next=9;break;case 16:p.next=21;break;case 18:p.prev=18,p.t0=p.catch(7),h.e(p.t0);case 21:return p.prev=21,h.f(),p.finish(21);case 24:p.next=3;break;case 26:p.next=31;break;case 28:p.prev=28,p.t1=p.catch(1),r.e(p.t1);case 31:return p.prev=31,r.f(),p.finish(31);case 34:case"end":return p.stop()}}),w,null,[[1,28,31,34],[7,18,21,24]])}var j=function(e,t){for(var n=e;n;n=n.parent)if(t(n))return n;return null},T=function(e,t){return O((0,r.qz)(e),e.selection,t).next().value},A=function(e){var t=(0,r.qz)(e);return function(n){return e.selection.ranges.every((function(r){var l=t.resolveInner(r.from,-1),f=j(l,(function(t){return(0,a.DC)(t,n,e)}));if(!f)return!1;var d=function(e,t){for(var n=e,r=t;n&&r;){if(n===r)return n;n.from<r.from?r=r.parent:n=n.parent}return null}(f,t.resolveInner(r.to,1));if(!d)return!1;var h=j(d,(function(t){return(0,a.DC)(t,n,e)}));return Boolean(h)}))}},P=function(e){var t,n=0,r=d(_(e,l.ListEnvironment));try{for(r.s();!(t=r.n()).done;){t.value&&n++}}catch(e){r.e(e)}finally{r.f()}return n},D=function(e){var t,n=[],a=d(e.selection.ranges);try{for(a.s();!(t=a.n()).done;){var l=t.value,f=(0,r.qz)(e).resolveInner(l.anchor);n.push(P(f))}}catch(e){a.e(e)}finally{a.f()}return Math.min.apply(Math,n)}},30864:function(e,t,n){"use strict";n.d(t,{DC:function(){return f},Mt:function(){return l},rG:function(){return a}});n(58188),n(26936),n(9575),n(96264),n(34115),n(634),n(71372),n(71245),n(34769),n(95342),n(68625),n(36728),n(1939),n(62775),n(20796),n(15735),n(28673),n(6886);var r=n(77120);var a=function(e,t,n){var a=(0,r.l)(e,t,100);if(!a)return null;var l=a.resolve(t),f=null==l?void 0:l.prevSibling;return(null==f?void 0:f.type.name)===n},l=function(e,t){var n=t.getChild("ShortOptionalArg");if(n)return e.doc.sliceString(n.from,n.to)},f=function(e,t,n){if(!e.type.is("UnknownCommand"))return!1;var r=e.getChild("CtrlSeq");return!!r&&n.doc.sliceString(r.from,r.to)===t}},77904:function(e,t,n){"use strict";n.d(t,{M2:function(){return x},Oh:function(){return _},XP:function(){return f},a5:function(){return h},dr:function(){return w},lX:function(){return y},y4:function(){return d}});n(18178),n(36728),n(77950),n(74069),n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(96928),n(92215),n(61229),n(20796),n(15735),n(28673),n(6886);var r=n(77120),a=n(30864),l=(n(759),n(78014));var f=function(e,t,n,r){if(t.type.is("EnvNameGroup")){var a;if(!r(t.node))return!1;if(null===(a=t.node.prevSibling)||void 0===a||!a.type.is("Begin"))return!1;var l=t.node.getChild("OpenBrace");if(!l)return!1;var f=l.node.nextSibling;if(!f)return!1;var d=e.doc.sliceString(f.from,f.to);if(d.length<1)return!1;var h={title:d,from:f.from,to:f.to,line:e.doc.lineAt(f.from).number};n.push(h)}else if(t.type.is("NewEnvironment")||t.type.is("RenewEnvironment")){if(!r(t.node))return!1;var p=t.node.getChild("LiteralArgContent");if(!p)return;var y=e.doc.sliceString(p.from,p.to);if(!y)return;var w={title:y,from:p.from,to:p.to,line:e.doc.lineAt(p.from).number};n.push(w)}},d=function(e,t){var n=(0,r.l)(e,t,100);if(n){var l=n.resolve(t);if(l){if(l.type.is("EnvNameGroup")&&(0,a.rG)(e,t,"Begin"))return!0;if(l.type.is("$Environment")||l.type.is("LaTeX")&&t===e.doc.length){if(!(l=n.resolve(t,-1)))return;if(l.type.is("OpenBrace")||l.type.is("$EnvName"))return!0}}}},h=function(e,t){var n=(0,r.l)(e,t,100);if(n){var l=n.resolve(t);if(l){if(l.type.is("EnvNameGroup")&&(0,a.rG)(e,t,"End"))return!0;if(l.type.is("$Environment")||l.type.is("Content")){if(!(l=n.resolve(t,-1)))return;if(l.type.is("OpenBrace")||l.type.is("EnvName"))return!0}}}},p=function(e,t){var n=null,r="function"!=typeof t?function(e){return e.type.is(t)}:t;return null==e||e.iterate({enter:function(e){return null===n&&(r(e)?(n=e.node,!1):void 0)}}),n},y=function(e){var t,n,a=(0,r.l)(e,e.doc.length,100);return a?null!==(t=null!==(n=function(e,t){var n,r=p(e,(function(e){return Boolean(e.type.is("$Environment")&&"abstract"===w(e.node,t))}));return(null==r||null===(n=r.getChild("Content"))||void 0===n?void 0:n.from)||null}(a,e))&&void 0!==n?n:function(e){var t,n=p(e,"Maketitle");return null!==(t=null==n?void 0:n.to)&&void 0!==t?t:null}(a))&&void 0!==t?t:function(e){var t,n=p(e,"DocumentEnvironment");return(null==n||null===(t=n.getChild("Content"))||void 0===t?void 0:t.from)||null}(a):null};function w(e,t){var n,r,a,l,f,d;if(null!==(n=e)&&void 0!==n&&n.type.is("$Environment")&&(e=e.getChild("BeginEnv")),!(null!==(r=e)&&void 0!==r&&r.type.is("BeginEnv")||null!==(a=e)&&void 0!==a&&a.type.is("EndEnv")))return null;var h=null===(l=e)||void 0===l||null===(f=l.getChild("EnvNameGroup"))||void 0===f||null===(d=f.getChild("OpenBrace"))||void 0===d?void 0:d.nextSibling;return h?h.type.is("CloseBrace")?null:t.sliceDoc(h.from,h.to):null}function x(e){var t;return null===(t=e.getChild("BeginEnv"))||void 0===t?void 0:t.getChildren("TextArgument")}function _(e,t){var n,r,a,f,d=null,h=null,p=null,y=e.from,w=e.to,x=!1;return e.cursor().iterate((function(e){if(x)return!1;if(e.type.is("Caption")){if(d)return x=!0,!1;d={from:e.from,to:e.to}}if(e.type.is("Label")){if(h)return x=!0,!1;h={from:e.from,to:e.to}}if(e.type.is("IncludeGraphics")){var l,y,w;if(n)return x=!0,!1;f={from:e.from,to:e.to};var _=null===(l=e.node.getChild("IncludeGraphicsArgument"))||void 0===l||null===(y=l.getChild("FilePathArgument"))||void 0===y?void 0:y.getChild("LiteralArgContent");if(!_)return x=!0,!1;n={from:_.from,to:_.to,path:t.sliceDoc(_.from,_.to)};var S=null===(w=e.node.getChild("OptionalArgument"))||void 0===w?void 0:w.getChild("ShortOptionalArg");if(!S)return r=void 0,!1;p={from:S.from,to:S.to};var k=t.sliceDoc(S.from,S.to),C=k.match(/^width=([0-9]|(?:[0-9]*\.[0-9]+)|(?:[0-9]+\.))\\(linewidth|pagewidth|textwidth|hsize|columnwidth)$/);C?(r=parseFloat(C[1]),"linewidth"!==C[2]&&(a=k)):a=k}})),x||void 0===f||void 0===n?null:new l.Hs({caption:d,label:h,file:n,from:y,to:w,width:r,unknownGraphicsArguments:a,graphicsCommand:f,graphicsCommandArguments:p})}},85209:function(e,t,n){"use strict";n.d(t,{XP:function(){return w},zz:function(){return _}});n(18178),n(36728),n(16781),n(43450),n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(96928),n(92215),n(61229),n(32501),n(26936),n(27233),n(28673),n(77950),n(21850),n(20796),n(15735),n(6886),n(759);var r=n(49272),a=n(77904);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,l=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw l}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){return e[e.Book=1]="Book",e[e.Part=2]="Part",e[e.Chapter=3]="Chapter",e[e.Section=4]="Section",e[e.SubSection=5]="SubSection",e[e.SubSubSection=6]="SubSubSection",e[e.Paragraph=7]="Paragraph",e[e.SubParagraph=8]="SubParagraph",e[e.Frame=9]="Frame",e[e.Invalid=-1]="Invalid",e}(d||{}),h={book:d.Book,part:d.Part,chapter:d.Part,section:d.Section,subsection:d.SubSection,subsubsection:d.SubSubSection,paragraph:d.Paragraph,subparagraph:d.SubParagraph,frame:d.Frame},p=function(e){var t;if("string"==typeof e)return null!==(t=h[e])&&void 0!==t?t:d.Invalid;switch(e){case r.Book:return d.Book;case r.Part:return d.Part;case r.Chapter:return d.Chapter;case r.Section:return d.Section;case r.SubSection:return d.SubSection;case r.SubSubSection:return d.SubSubSection;case r.Paragraph:return d.Paragraph;case r.SubParagraph:return d.SubParagraph;default:return d.Invalid}},y=function(e,t){var n=[];return t.node.cursor().iterate((function(r){return!(r.from>=t.to)&&(!r.type.is("Label")&&(!!r.node.firstChild||void n.push(e.doc.sliceString(r.from,r.to))))})),n.join("")},w=function(e,t,n,r){if(t.type.is("SectioningCommand")){var l,f,h,w=t.node,x=w.parent;if(!r(w))return;var _=null!==(l=null===(f=w.getChild("OptionalArgument"))||void 0===f?void 0:f.getChild("ShortOptionalArg"))&&void 0!==l?l:null===(h=w.getChild("SectioningArgument"))||void 0===h?void 0:h.getChild("LongArg");if(null==_||null==w)return;for(var S=x;S;S=S.parent)if(S.type.is("NewCommand")||S.type.is("RenewCommand"))return!1;var k=null!=x&&x.type.is("$SectioningCommand")?p(x.type.id):p((E=w.firstChild)?e.doc.sliceString(E.from+1,E.to):""),C={line:e.doc.lineAt(w.from).number,title:y(e,_),from:w.from,to:w.to,level:k};n.push(C)}var E;if(t.type.is("$Environment")){var O=t.node;if("frame"===(0,a.dr)(O,e)){var j,T=O.getChild("BeginEnv");if(!r(T))return;var A=null===(j=(0,a.M2)(O))||void 0===j?void 0:j.map((function(e){return e.getChild("LongArg")}));if(null!=A&&A.length){var P=A[0],D=P?e.sliceDoc(P.from,P.to):"",R={line:e.doc.lineAt(T.from).number,title:D,from:T.from,to:T.to,level:d.Frame};n.push(R)}}}},x=function(e){return{title:e.title,line:e.line,level:e.level}},_=function(e){var t,n=[],r=[],a=l(e);try{for(a.s();!(t=a.n()).done;){for(var f=t.value,d=x(f);n.length&&n[n.length-1].level>=d.level;)n.pop();if(n.length){var h=n[n.length-1];h.children?h.children.push(d):h.children=[d],n.push(d)}else n.push(d),r.push(d)}}catch(e){a.e(e)}finally{a.f()}return r}},759:function(e,t,n){"use strict";n.d(t,{vt:function(){return x},y0:function(){return S}});n(43450),n(95342),n(58188),n(43430),n(9575),n(96264),n(34115),n(634),n(71372),n(71245),n(34769),n(68625),n(36728),n(1939),n(62775),n(20796),n(15735),n(28673),n(6886);var r=n(77120),a=n(21649);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}var y=20,w=500,x=function(e){return e[e.Pending=0]="Pending",e[e.Partial=1]="Partial",e[e.Complete=2]="Complete",e}({}),_=function(e,t,n,r){return!(t<n||e>r)};function S(e,t,n,l,f){var h=arguments.length>5&&void 0!==arguments[5]&&arguments[5],p=arguments.length>6?arguments[6]:void 0,S=arguments.length>7?arguments[7]:void 0,k=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{items:[],status:x.Pending},C=k.status===x.Complete?k.items.filter((function(e){return!_(e.from,e.to,t,n)})).map((function(e){return function(e,t){if(!t)return e;var n=e.from,r=e.to,a=t.changes.mapPos(n);return d(d({},e),{},{from:a,to:t.changes.mapPos(r),line:t.state.doc.lineAt(a).number})}(e,S)})):[];k.status!==x.Complete&&(f=e.doc.length,l=0);var E=(0,r.l)(e,f,h?w:y);return E?(E.iterate({from:l,to:f,enter:function(t){return p(e,t,C,(function(e){return _(e.from,e.to,l,f)}))},mode:a.vj.IgnoreMounts|a.vj.IgnoreOverlays}),{status:x.Complete,items:C.sort((function(e,t){return e.from-t.from}))}):k.status!==x.Pending?{status:x.Partial,items:k.items}:{items:[],status:x.Pending}}},66144:function(e,t,n){"use strict";n.d(t,{nk:function(){return T},F0:function(){return f.F0},dw:function(){return f.dw},OJ:function(){return A},y4:function(){return l.y4},a5:function(){return l.a5},QT:function(){return P},c_:function(){return f.c_},kH:function(){return D},cM:function(){return k},WU:function(){return C},q5:function(){return E},DC:function(){return a.DC},zz:function(){return r.zz}});var r=n(85209),a=n(30864),l=n(77904),f=n(47037),d=(n(39529),n(26936),n(36728),n(71372),n(9575),n(96264),n(34115),n(634),n(58188),n(71245),n(20796),n(15735),n(28673),n(6886),n(77120)),h=n(91601),p=n.n(h);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===y(l)?l:String(l)),r)}var a,l}function x(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var _=x((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.from,r=t.to,a=t.lineNumber,l=t.text,f=t.node;if(null==l||null==n||null==r||null==a||null==f)throw new(p())("TreeQuery: invalid NormalTextSpan").withInfo({options:t});this.from=n,this.to=r,this.text=l,this.node=f,this.lineNumber=a})),S=["Include","Input","IncludeGraphics","Cite","LabelArgument","UsePackage","PackageArgument","EnvNameGroup","RefArgument"],k=function(e,t){var n=t.number,r=t.from,a=t.to,l=(0,d.qz)(e.state),f=[];return null==l||l.iterate({from:r,to:a,enter:function(t){return!S.includes(t.type.name)&&("Normal"!==t.type.name||(f.push(new _({from:t.from,to:t.to,text:e.state.doc.sliceString(t.from,t.to),lineNumber:n,node:t})),!1))}}),f},C=(n(41549),function(e,t){return function(n){for(var r=(0,d.qz)(n.state).resolveInner(n.pos,-1);r;){if(r.type.is(e))return t(n);r=r.parent}return null}});function E(e){var t=e.selection.main;if(!t.empty)return!1;var n=t.anchor,r=(0,d.qz)(e);if(r.length<n)return!1;var a=r.resolveInner(n,-1);if(!a.type.is("OpenBrace"))return!1;var l=r.resolveInner(n,1);if(!l.type.is("CloseBrace"))return!1;var h=(0,f.dw)(a,"EnvNameGroup","BibliographyStyleArgument","BibliographyArgument","BibKeyArgument","DocumentClassArgument","FilePathArgument","RefArgument","PackageArgument");return!!h&&(h.from===a.from&&h.to===l.to)}n(34769),n(95342),n(77950),n(74069);var O=n(49272),j=Object.keys(O),T={ctrlSeq:j.filter((function(e){return e.match(/^(Begin|End|.*CtrlSeq)$/)})),ctrlSym:j.filter((function(e){return e.match(/^.*CtrlSym$/)})),envName:j.filter((function(e){return e.match(/^.*EnvName$/)}))},A=function(e,t){return!!t.doc.sliceString(e.from,e.to).match(/%\s*\{\s*/)},P=function(e,t){var n=e.to+1,r=Math.min(n+6e3,t.doc.length),a=(0,d.l)(t,r,100);if(a){var l,f=0;return a.iterate({from:n,to:r,enter:function(e){if(l)return!1;if(e.node.type.is("Comment"))if(A(e.node,t))f++;else if(function(e,t){return!!t.doc.sliceString(e.from,e.to).match(/%\s*\}\s*/)}(e.node,t)){if(!(f>0))return l=e.node,!1;f--}}}),l}},D=function(e,t,n){var r=n.doc.sliceString(e.from,e.to),a=n.doc.sliceString(t.from,t.to),l=r.indexOf("{"),f=a.indexOf("}");return l<0||f<0?null:{from:e.from+l+1,to:t.from+f}}},7585:function(e,t,n){"use strict";n.d(t,{K8:function(){return f},mr:function(){return l},oT:function(){return d}});var r=n(19034),a=n.n(r);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm a";return a()(e).format(t)}function f(e){return a()(e).calendar()}function d(e){return Date.parse(e)/1e3}a().updateLocale("en",{calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"ddd, Do MMM YY",nextWeek:"ddd, Do MMM YY",sameElse:"ddd, Do MMM YY"}})},56377:function(e,t,n){"use strict";n(15735),n(79321),n(58188),n(28673),n(6886);t.Z=new Map([["\\includegraphics",{name:"graphicx",command:"\\usepackage{graphicx}"}]])},43363:function(e,t,n){"use strict";n.d(t,{A:function(){return I},N:function(){return F}});n(39529),n(31235),n(36728),n(58188),n(95342),n(43430),n(43450),n(32501),n(26936),n(27233),n(28673),n(77950),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372);var r=n(1727),a=n(76635),l=n(34097),f=n(99618);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p="CM6-BeforeUpdate",y="CM6-AfterUpdate",w="CM6-DomUpdate",x="CM6-Update",_="CM6-Keypress-Measure",S=0,k=Date.now(),C=!1;try{var E="featureTestMark";performance.mark(E,{startTime:performance.now(),detail:{test:1}}),performance.clearMarks(E);var O="featureTestMeasure";performance.measure(O,{start:performance.now(),detail:{test:1}}),performance.clearMeasures(O),C=!0}catch(e){}var j=!1;function T(){return performance.memory.usedJSHeapSize}try{"memory"in window.performance&&(T(),j=!0)}catch(e){}var A=!1,P=0;try{if(PerformanceObserver.supportedEntryTypes.includes("longtask"))A=!0,new PerformanceObserver((function(e){P+=e.getEntries().length})).observe({entryTypes:["longtask"]})}catch(e){}function D(e){return!!e&&["input","delete"].includes(e.split(".")[0])}function R(e){return!!e&&["input.type","delete.forward","delete.backward"].includes(e)}function I(){if(!C)return{start:function(){},end:function(){}};var e=0,t=0,n=[];return{start:function(e){R(e.annotation(r.YW.userEvent))&&n.push(performance.now()),performance.mark(p)},end:function(a,l){performance.mark(y);var f=a.annotation(r.YW.userEvent);D(f)&&(++e,R(f)&&++t,performance.measure(x,{start:p,end:y,detail:{userEventType:f,userEventsSinceDomUpdateCount:e}}),l.requestMeasure({key:"inputEventCounter",read:function(){performance.mark(w,{detail:{keypressesSinceDomUpdateCount:t}}),e=0,t=0;for(var r=performance.now(),a=0,l=n;a<l.length;a++){var f=l[a];performance.measure(_,{start:f,end:r})}n.length=0}})),S=a.state.doc.length}}}function M(e){return 0===e.length?0:e.reduce((function(e,t){return e+t}),0)/e.length}function L(e){return e.reduce((function(e,t){return Math.max(e,t)}),0)}function N(e){switch(e){case"measure":performance.clearMeasures(x),performance.clearMarks(p),performance.clearMarks(y);break;case"dom":performance.clearMarks(w);break;case"keypress":performance.clearMeasures(_)}}function F(){var e,t=performance.getEntriesByName(x,"measure");N("measure");var n,r=t.filter((function(e){return D(e.detail.userEventType)})),h=r.map((function(e){return e.duration})).sort((function(e,t){return e-t})),p=(0,a.round)(L(h),2),y=(0,a.round)(M(h),2),C=(0,a.round)(function(e){if(0===e.length)return 0;var t=Math.floor(e.length/2);return e.length%2==0?(e[t-1]+e[t])/2:e[t]}(h),2),E=(0,a.round)(0===(n=h).length?0:n[Math.round(.95*(n.length-1))],2),O=L(r.map((function(e){return e.detail.userEventsSinceDomUpdateCount}))),R=(0,l.Z)(),I=Math.floor((Date.now()-k)/1e3),F=j?T():null,q=performance.getEntriesByName(w,"mark");N("dom");var B,U=0,H=0,z=0,V=0,W=d(q);try{for(W.s();!(B=W.n()).done;){var Z=B.value.detail.keypressesSinceDomUpdateCount;1===Z?++H:Z>1&&++U,Z>z&&(z=Z),V+=Z}}catch(e){W.e(e)}finally{W.f()}var G=(0,a.round)(U/(U+H),4),K=(0,a.round)(V/(U+H),4),Y=performance.getEntriesByName(_,"measure").map((function(e){return e.duration})),X=(0,a.round)(M(Y),2);N("keypress");var J=null;A&&(J=P,P=0);var Q=(null===(e=(0,f.Z)("ol-ExposedSettings"))||void 0===e?void 0:e.sentryRelease)||null;return{max:p,mean:y,median:C,ninetyFifthPercentile:E,maxUserEventsBetweenDomUpdates:O,docLength:S,numberOfEntries:h.length,grammarly:R,sessionLength:I,memory:F,lags:U,nonLags:H,longestLag:z,meanLagsPerMeasure:G,meanKeypressesPerMeasure:K,meanKeypressPaint:X,longTasks:J,release:Q}}window.addEventListener("editor:visual-switch",(function(){N("measure"),N("dom"),N("keypress")})),window._reportCM6Perf=function(){console.log(F())}},1281:function(e,t,n){"use strict";n(26936),n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(34769),n(95342),n(68625),n(36728),n(1939),n(62775),n(20796),n(15735),n(28673),n(6886);var r=n(46181),a=n(80589),l=n(52322);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){(0,r.T)(e,{extra:{componentStack:t},tags:{handler:"react-error-boundary"}})}function w(){return(0,l.jsx)(l.Fragment,{})}t.Z=function(e,t){function n(n){return(0,l.jsx)(a.ErrorBoundary,{FallbackComponent:t||w,onError:y,children:(0,l.jsx)(e,h({},n))})}return n.propTypes=e.propTypes,n.displayName="WithErrorBoundaryWrapper".concat(e.displayName||e.name||"Component"),n}},46181:function(e,t,n){"use strict";n.d(t,{T:function(){return captureException}});n(34115),n(634),n(20796),n(36728),n(26936),n(27233),n(21850),n(71372),n(9575),n(96264),n(71245),n(34769),n(95342),n(68625),n(1939),n(62775),n(15735),n(58188),n(73439),n(28673),n(6886),n(17368),n(24471),n(77950),n(51172),n(88233),n(35883),n(32501),n(43105);var r,a=n(99618),l=n(91601),f=n.n(l);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=null!==(r=window.ExposedSettings)&&void 0!==r&&r.sentryDsn?Promise.resolve().then(n.bind(n,44763)).then((function(e){var t=0;e.init({dsn:window.ExposedSettings.sentryDsn,environment:window.ExposedSettings.sentryEnvironment,release:window.ExposedSettings.sentryRelease,autoSessionTracking:!1,allowUrls:[new RegExp(window.ExposedSettings.sentryAllowedOriginRegex)],ignoreErrors:['SecurityError: Permission denied to access property "pathname" on cross-origin object',/^Missing PDF/,/^pdfng error Error: MissingPDFException/,/^AbortError/,"ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications.",/Non-Error promise rejection captured with value: Object Not Found Matching Id/,"Cannot read properties of undefined (reading 'length')"],denyUrls:[/extensions\//i,/^chrome:\/\//i],beforeSend:function(e){var n,r,a;return++t>100||"UNSTABLE_editor:extensions"===(null===(n=e.extra)||void 0===n||null===(r=n.arguments)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.type)?null:e}}),e.setUser({id:window.user_id});var n=(0,a.Z)("ol-splitTestVariants");if(n)for(var r=0,l=Object.entries(n);r<l.length;r++){var f=w(l[r],2),d=f[0],h=f[1];e.setTag("ol.".concat(d).slice(0,32),h.toString())}return e})).catch((function(e){return console.error(e),S()})):S();function S(){return Promise.resolve({captureException:console.error,captureMessage:console.error})}function captureException(e,t){t=t||{};var n=Object.assign(f().getFullInfo(e),t.extra||{}),r=f().getFullStack(e);e.stack!==r&&(n.fullStack=r),_.then((function(r){return r.captureException(e,p(p({},t),{},{extra:n}))}))}},96227:function(e,t,n){"use strict";n.r(t),n.d(t,{send:function(){return d},sendMB:function(){return p},sendMBOnce:function(){return y},sendMBSampled:function(){return w},sendOnce:function(){return h}});n(39529),n(6710);var r=n(93782),a="mbEvents";function l(e){return!!(r.Z.getItem(a)||{})[e]}function f(e){var t=r.Z.getItem(a)||{};t[e]=!0,r.Z.setItem(a,t)}function d(e,t,n,r){"function"==typeof window.ga&&window.ga("send","event",e,t,n,r)}function h(e,t,n,r){l(e)||"function"==typeof window.ga&&(window.ga("send","event",e,t,n,r),f(e))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.page||(t.page=window.location.pathname),function(e,t){if(!navigator||!navigator.sendBeacon)return;t._csrf=window.csrfToken;var n=new Blob([JSON.stringify(t)],{type:"application/json; charset=UTF-8"});try{navigator.sendBeacon("/event/".concat(e),n)}catch(e){}}(e,t),"function"==typeof window.gtag&&["paywall-click","paywall-prompt","plans-page-click"].includes(e)&&window.gtag("event",e,t)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(e)||(p(e,t),f(e))}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;Math.random()<n&&p(e,t)}},28684:function(e,t,n){"use strict";n.d(t,{BS:function(){return j},K$:function(){return T},kp:function(){return P},ty:function(){return O},xA:function(){return E}});n(34769),n(95342),n(68625),n(36728),n(1939),n(62775),n(96928),n(92215),n(61229),n(20796),n(15735),n(28673),n(6886),n(96882),n(38859),n(17525),n(18275),n(32501),n(6710),n(58188),n(73439),n(26936),n(9575),n(96264),n(34115),n(634),n(71372),n(71245),n(77950),n(21850);var r=n(91601),a=["body","headers","method","credentials","swallowAbortError"];function l(){l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},d=a.iterator||"@@iterator",h=a.asyncIterator||"@@asyncIterator",p=a.toStringTag||"@@toStringTag";function y(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{y({},"")}catch(e){y=function(e,t,n){return e[t]=n}}function w(e,t,n,a){var l=t&&t.prototype instanceof S?t:S,f=Object.create(l.prototype),d=new L(a||[]);return r(f,"_invoke",{value:D(e,n,d)}),f}function x(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=w;var _={};function S(){}function k(){}function C(){}var E={};y(E,d,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(N([])));j&&j!==t&&n.call(j,d)&&(E=j);var T=C.prototype=S.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){y(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function a(r,l,d,h){var p=x(e[r],e,l);if("throw"!==p.type){var y=p.arg,w=y.value;return w&&"object"==f(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,d,h)}),(function(e){a("throw",e,d,h)})):t.resolve(w).then((function(e){y.value=e,d(y)}),(function(e){return a("throw",e,d,h)}))}h(p.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function D(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return F()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=R(f,n);if(d){if(d===_)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=x(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===_)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function R(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var a=x(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,_;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var t=e[d];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return k.prototype=C,r(T,"constructor",{value:C,configurable:!0}),r(C,"constructor",{value:k,configurable:!0}),k.displayName=y(C,p,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,y(e,p,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},A(P.prototype),y(P.prototype,h,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new P(w(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},A(T),y(T,p,"Generator"),y(T,d,(function(){return this})),y(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,_):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),_}},e}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function E(e,t){return D(e,S(S({},t),{},{method:"GET"}))}function O(e,t){return D(e,S(S({},t),{},{method:"POST"}))}function j(e,t){return D(e,S(S({},t),{},{method:"PUT"}))}function T(e,t){return D(e,S(S({},t),{},{method:"DELETE"}))}function A(e){var t;if(!e)return"Unknown Error";return null!==(t={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"}[e])&&void 0!==t?t:"Unexpected Error: ".concat(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(FetchError,e);var t,n,r,a=w(FetchError);function FetchError(e,t,n,r,l){var f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FetchError),e||(e=A(null==r?void 0:r.status)),(f=a.call(this,e,{statusCode:r?r.status:void 0})).url=t,f.options=n,f.response=r,f.data=l,f}return t=FetchError,(n=[{key:"getErrorMessageKey",value:function(){var e,t;return null===(e=this.data)||void 0===e||null===(t=e.message)||void 0===t?void 0:t.key}},{key:"getUserFacingMessage",value:function(){var e,t,n,r,a=null===(e=this.response)||void 0===e?void 0:e.status,l=A(a),f=(null===(t=this.data)||void 0===t||null===(n=t.message)||void 0===n?void 0:n.text)||(null===(r=this.data)||void 0===r?void 0:r.message);if(f&&f!==l)return f;var d={400:"Invalid Request. Please correct the data and try again.",403:"Session error. Please check you have cookies enabled. If the problem persists, try clearing your cache and cookies.",429:"Too many attempts. Please wait for a while and try again."};return a&&d[a]?d[a]:"Something went wrong. Please try again."}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),FetchError}(n.n(r)());function D(e,t){var n=t.body,r=void 0===n?{}:n,l=t.headers,f=void 0===l?{}:l,d=t.method,p=void 0===d?"GET":d,y=t.credentials,w=void 0===y?"same-origin":y,x=t.swallowAbortError,_=void 0===x||x,k=S(S({},h(t,a)),{},{headers:S(S({},f),{},{"Content-Type":"application/json","X-Csrf-Token":window.csrfToken,Accept:"application/json"}),credentials:w,method:p});return"GET"!==p&&"HEAD"!==p&&(k.body=JSON.stringify(r)),new Promise((function(t,n){fetch(e,k).then((function(r){return function(e){return R.apply(this,arguments)}(r).then((function(a){r.ok?t(a):n(new P(r.statusText,e,k,r,a))}),(function(t){n(new P("There was an error parsing the response body",e,k,r).withCause(t))}))}),(function(t){_&&"AbortError"===t.name||n(new P("There was an error fetching the JSON",e,k).withCause(t))}))}))}function R(){var e;return e=l().mark((function e(t){var n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.headers.get("Content-Type")){e.next=3;break}return e.abrupt("return",{});case 3:if(!/application\/json/.test(n)){e.next=5;break}return e.abrupt("return",t.json());case 5:if(!/text\/plain/.test(n)){e.next=10;break}return e.next=8,t.text();case 8:return r=e.sent,e.abrupt("return",{message:r});case 10:if(!/text\/html/.test(n)){e.next=16;break}return e.next=13,t.text();case 13:if(a=e.sent,/^\s*</.test(a)){e.next=16;break}return e.abrupt("return",{message:a});case 16:return e.abrupt("return",{});case 17:case"end":return e.stop()}}),e)})),R=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){d(l,r,a,f,h,"next",e)}function h(e){d(l,r,a,f,h,"throw",e)}f(void 0)}))},R.apply(this,arguments)}},76066:function(e,t,n){"use strict";n(6710);var r=function(e,t,n){try{return e(t,n)}catch(e){return console.error("localStorage exception",e),null}},a=function(e){return JSON.parse(localStorage.getItem(e))},l=function(e,t){localStorage.setItem(e,JSON.stringify(t))},f=function(){localStorage.clear()},d=function(e){return localStorage.removeItem(e)},h={getItem:function(e){return r(a,e)},setItem:function(e,t){return r(l,e,t)},clear:function(){return r(f)},removeItem:function(e){return r(d,e)}};t.Z=h},93782:function(e,t,n){"use strict";n(6710);var r=function(e,t,n){try{return e(t,n)}catch(e){return console.error("sessionStorage exception",e),null}},a=function(e){return JSON.parse(sessionStorage.getItem(e))},l=function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},f=function(){sessionStorage.clear()},d=function(e){return sessionStorage.removeItem(e)},h={getItem:function(e){return r(a,e)},setItem:function(e,t){return r(l,e,t)},clear:function(){return r(f)},removeItem:function(e){return r(d,e)}};t.Z=h},45643:function(e,t,n){"use strict";n.d(t,{Vs:function(){return a},eR:function(){return l},xG:function(){return f}});n(15735),n(58188),n(28673),n(6886),n(60523),n(88233);var r=n(96227);function a(e,t,n){r.send("subscription-funnel","upgraded-free-trial",e),r.sendMB("paywall-click",{"paywall-type":e});var a=new URLSearchParams({itm_campaign:e});t&&a.set("itm_content",t),n&&(n.startedFreeTrial=!0),window.open("/user/subscription/choose-your-plan?".concat(a.toString()))}function l(e,t){var n=window.open();!function(){"function"==typeof ga&&ga("send","event","subscription-funnel","upgraded-plan",e);t&&(t.startedFreeTrial=!0),n.location="/user/subscription"}()}function f(e){r.sendMB("paywall-prompt",{"paywall-type":e})}},79477:function(e,t,n){"use strict";n(17368),n(24471),n(77950),n(51172),n(88233),n(16781),n(21850);t.Z=function(e){return new RegExp("\\.(".concat(window.ExposedSettings.validRootDocExtensions.join("|"),")$"),"i").test(e)}},2018:function(){"use strict";function e(){try{var e;return(e=$).localStorage.apply(e,arguments)}catch(e){return console.error("localStorage exception",e),null}}angular.module("localStorage",[]).value("localStorage",e)},93994:function(){angular.module("RecursionHelper",[]).factory("RecursionHelper",["$compile",function(e){return{compile:function(t,n){angular.isFunction(n)&&(n={post:n});var r,a=t.contents().remove();return{pre:n&&n.pre?n.pre:null,post:function(t,l){r||(r=e(a)),r(t,(function(e){l.append(e)})),n&&n.post&&n.post.apply(null,arguments)}}}}}])},28939:function(e,t,n){"use strict";n(77950),n(94908);var r=n(76635),a=n.n(r),l=n(27481),f=n(76213),d=n.n(f),h=n(99618);l.Z.factory("algoliaSearch",(function(){var e,t=(0,h.Z)("ol-algolia"),n=a().get(t,"indexes.wiki");n&&(e=d()(t.appId,t.apiKey).initIndex(n));return{searchWiki:e?e.search.bind(e):null}}))},11685:function(e,t,n){"use strict";n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(34769),n(95342),n(68625),n(36728),n(1939),n(62775),n(20796),n(15735),n(28673),n(6886);var r=n(2784),a=n(24578),l=n(52322);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){var t=(0,r.useCallback)((function(t){var n,r=null==t||null===(n=t._modal)||void 0===n?void 0:n.modalNode;r&&(e.show?(r.removeAttribute("role"),r.removeAttribute("aria-hidden")):r.setAttribute("aria-hidden","true"))}),[e.show]);return(0,l.jsx)(a.Z,h(h({},e),{},{ref:t}))}},27529:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var r=n(86186),a=n(76699),l=n(52322);function f(e){var t=e.className,n=e.style,r=(0,a.$)().t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{style:n,children:"".concat(r("generic_something_went_wrong"),". ")}),(0,l.jsx)("span",{className:t,children:"".concat(r("please_refresh"))})]})}var d=function(e){var t=e.children,n=e.modal;return(0,l.jsxs)("div",{className:"error-boundary-alert",children:[(0,l.jsx)(r.Z,{bsStyle:"danger",children:t||(0,l.jsx)(f,{})}),n]})}},10280:function(e,t,n){"use strict";n(34769),n(34115),n(9575),n(96264),n(634),n(58188),n(71372),n(71245),n(95342),n(68625),n(36728),n(1939),n(62775),n(20796),n(15735),n(28673),n(6886);var r=n(72779),a=n.n(r),l=n(52322);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var d=["type","spin","fw","modifier","className","accessibilityLabel"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.Z=function(e){var t=e.type,n=e.spin,r=e.fw,f=e.modifier,h=e.className,x=void 0===h?"":h,_=e.accessibilityLabel,S=w(e,d),k=a()("fa","fa-".concat(t),y({"fa-spin":n,"fa-fw":r},"fa-".concat(f),f),x);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("i",p({className:k,"aria-hidden":"true"},S)),_&&(0,l.jsx)("span",{className:"sr-only",children:_})]})}},4790:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});n(39529),n(31235);var r=n(40687),a=n(72779),l=n.n(a),f=n(24958),d=n(52322),h=function(e){var t,n=e.tooltip,r=e.url,a=void 0===r?"/beta/participate":r,h=e.phase;switch(void 0===h?"beta":h){case"release":t="info-badge";break;case"alpha":t="alpha-badge";break;default:t="beta-badge"}return(0,d.jsx)(f.Z,{id:n.id,description:n.text,tooltipProps:{className:n.className},overlayProps:{placement:n.placement||"bottom",delayHide:100},children:(0,d.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:l()("badge",t),children:(0,d.jsx)("span",{className:"sr-only",children:n.text})})})};function p(e){var t,n,a,l,f=e.splitTestName,p=e.displayOnVariants,y=e.tooltip,w=void 0===y?{}:y,x=(0,r.yW)(),_=x.splitTestVariants,S=x.splitTestInfo[f];if(!S)return null;var k=_[f];return k&&p.includes(k)?(0,d.jsx)(h,{tooltip:{id:w.id||"".concat(f,"-badge-tooltip"),className:"split-test-badge-tooltip ".concat(w.className),text:(null===(t=S.badgeInfo)||void 0===t?void 0:t.tooltipText)||(0,d.jsxs)(d.Fragment,{children:["We are testing this new feature.",(0,d.jsx)("br",{}),"Click to give feedback"]})},phase:S.phase,url:null!==(n=S.badgeInfo)&&void 0!==n&&null!==(a=n.url)&&void 0!==a&&a.length?null===(l=S.badgeInfo)||void 0===l?void 0:l.url:void 0}):null}},92910:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});n(9575),n(96264),n(34115),n(634),n(58188),n(71372),n(71245),n(34769),n(95342),n(68625),n(36728),n(1939),n(62775),n(20796),n(15735),n(28673),n(6886);var r=n(2784),a=n(76699),l=n(63584),f=n(45643),d=n(96227),h=n(52322);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=e.buttonProps,n=void 0===t?{bsStyle:"info"}:t,p=e.children,y=e.handleClick,x=e.source,_=(0,a.$)().t;(0,r.useEffect)((function(){d.sendMB("paywall-prompt",{"paywall-type":x})}),[x]);var S=(0,r.useCallback)((function(e){e.preventDefault(),y&&y(e),(0,f.Vs)(x)}),[y,x]);return(0,h.jsx)(l.Z,w(w({},n),{},{onClick:S,children:p||_("start_free_trial")}))}},24958:function(e,t,n){"use strict";n(34115),n(634),n(9575),n(96264),n(58188),n(71372),n(71245),n(34769),n(95342),n(68625),n(36728),n(1939),n(62775),n(20796),n(15735),n(28673),n(6886);var r=n(2784),a=n(185),l=n(42042),f=n(8846),d=n(52322);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Z=function(e){var t=e.id,n=e.description,h=e.children,p=e.tooltipProps,w=e.overlayProps,x=e.hidden;return(0,d.jsx)(a.Z,y(y({overlay:(0,d.jsx)(l.Z,y(y({id:"".concat(t,"-tooltip")},p),{},{style:{display:x?"none":"block"},children:n}))},w),{},{placement:(null==w?void 0:w.placement)||"top",children:(0,r.cloneElement)(h,{onClick:(0,f.w)(h.props.onClick,(function(e){e.currentTarget instanceof HTMLElement&&e.currentTarget.blur()}))})}))}},11302:function(e,t,n){"use strict";var r=n(10280),a=n(76699),l=n(2784),f=n(52322);function d(){var e=(0,a.$)().t;return(0,f.jsxs)("ul",{className:"list-unstyled upgrade-benefits",children:[(0,f.jsxs)("li",{children:[(0,f.jsx)(r.Z,{type:"check"})," ",e("unlimited_projects")]}),(0,f.jsxs)("li",{children:[(0,f.jsx)(r.Z,{type:"check"})," ",e("collabs_per_proj",{collabcount:"Multiple"})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)(r.Z,{type:"check"})," ",e("full_doc_history")]}),(0,f.jsxs)("li",{children:[(0,f.jsx)(r.Z,{type:"check"})," ",e("sync_to_dropbox")]}),(0,f.jsxs)("li",{children:[(0,f.jsx)(r.Z,{type:"check"})," ",e("sync_to_github")]}),(0,f.jsxs)("li",{children:[(0,f.jsx)(r.Z,{type:"check"})," ",e("compile_larger_projects")]})]})}t.Z=(0,l.memo)(d)},76621:function(e,t,n){"use strict";n.d(t,{in:function(){return O},Im:function(){return j}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850);var r=n(2784),a=n(13980),l=n.n(a),f=n(76725),d=n(69565);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e,t,n,a){var l=h((0,d.Z)(e,t,n,a),2),f=l[0],p=l[1];return(0,r.useEffect)((function(){p(t)}),[p,t]),[f,p]},w=n(83976),x=n(32687),_=function(e){if(e.shiftKey||e.altKey)return!1;if(e.ctrlKey){if("s"===e.key||"Enter"===e.key||"."===e.key)return!0}else if(e.metaKey&&("s"===e.key||"Enter"===e.key))return!0};var S=n(52322);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=(0,r.createContext)();function O(e){var t=e.children,n=(0,f.A3)();if(!n)throw new Error("DetachCompileProvider is only available inside LocalCompileProvider");var a=n.animateCompileDropdownArrow,l=n.autoCompile,d=n.clearingCache,h=n.clsiServerId,p=n.codeCheckFailed,C=n.compiling,O=n.deliveryLatencies,j=n.draft,T=n.editedSinceCompileStarted,A=n.error,P=n.fileList,D=n.hasChanges,R=n.highlights,I=n.lastCompileOptions,M=n.logEntries,L=n.logEntryAnnotations,N=n.pdfFile,F=n.pdfViewer,q=n.position,B=n.rawLog,U=n.setAnimateCompileDropdownArrow,H=n.setAutoCompile,z=n.setDraft,V=n.setError,W=n.setHasLintingError,Z=n.setHighlights,G=n.setPosition,K=n.setShowCompileTimeWarning,Y=n.setShowLogs,X=n.toggleLogs,J=n.setStopOnFirstError,Q=n.setStopOnValidationError,ee=n.showLogs,te=n.showCompileTimeWarning,ne=n.showFasterCompilesFeedbackUI,re=n.stopOnFirstError,oe=n.stopOnValidationError,ae=n.stoppedOnFirstError,se=n.uncompiled,le=n.validationIssues,ce=n.firstRenderDone,ue=n.cleanupCompileResult,fe=n.recompileFromScratch,de=n.setCompiling,he=n.startCompile,pe=n.stopCompile,me=n.setChangedAt,ge=n.setSavedAt,ve=n.clearCache,ye=n.syncToEntry,be=k(y("animateCompileDropdownArrow",a,"detacher","detached"),1)[0],we=k(y("autoCompile",l,"detacher","detached"),1)[0],xe=k(y("clearingCache",d,"detacher","detached"),1)[0],_e=k(y("clsiServerId",h,"detacher","detached"),1)[0],Se=k(y("codeCheckFailed",p,"detacher","detached"),1)[0],ke=k(y("compiling",C,"detacher","detached"),1)[0],Ce=k(y("deliveryLatencies",O,"detacher","detached"),1)[0],Ee=k(y("draft",j,"detacher","detached"),1)[0],Oe=k(y("error",A,"detacher","detached"),1)[0],je=k(y("fileList",P,"detacher","detached"),1)[0],$e=k(y("hasChanges",D,"detacher","detached"),1)[0],Te=k(y("highlights",R,"detacher","detached"),1)[0],Ae=k(y("lastCompileOptions",I,"detacher","detached"),1)[0],Pe=k(y("logEntries",M,"detacher","detached"),1)[0],De=k(y("logEntryAnnotations",L,"detacher","detached"),1)[0],Re=k(y("pdfFile",N,"detacher","detached"),1)[0],Ie=k(y("pdfViewer",F,"detacher","detached"),1)[0],Me=k(y("position",q,"detacher","detached"),1)[0],Le=k(y("rawLog",B,"detacher","detached"),1)[0],Ne=k(y("showCompileTimeWarning",te,"detacher","detached"),1)[0],Fe=k(y("showLogs",ee,"detacher","detached"),1)[0],qe=k(y("showFasterCompilesFeedbackUI",ne,"detacher","detached"),1)[0],Be=k(y("stopOnFirstError",re,"detacher","detached"),1)[0],Ue=k(y("stopOnValidationError",oe,"detacher","detached"),1)[0],He=k(y("stoppedOnFirstError",ae,"detacher","detached"),1)[0],ze=k(y("uncompiled",se,"detacher","detached"),1)[0],Ve=k(y("editedSinceCompileStarted",T,"detacher","detached"),1)[0],We=k(y("validationIssues",le,"detacher","detached"),1)[0],Ze=(0,w.Z)("setAnimateCompileDropdownArrow",U,"detached","detacher"),Ge=(0,w.Z)("setAutoCompile",H,"detached","detacher"),Ke=(0,w.Z)("setDraft",z,"detached","detacher"),Ye=(0,w.Z)("setError",V,"detacher","detached"),Xe=(0,w.Z)("setPosition",G,"detached","detacher"),Je=(0,w.Z)("firstRenderDone",ce,"detached","detacher"),Qe=(0,w.Z)("setHasLintingError",W,"detacher","detached"),et=(0,w.Z)("setHighlights",Z,"detacher","detached"),tt=(0,w.Z)("setShowCompileTimeWarning",K,"detached","detacher"),nt=(0,w.Z)("setShowLogs",Y,"detached","detacher"),rt=(0,w.Z)("toggleLogs",X,"detached","detacher"),it=(0,w.Z)("setStopOnFirstError",J,"detached","detacher"),ot=(0,w.Z)("setStopOnValidationError",Q,"detached","detacher"),at=(0,w.Z)("cleanupCompileResult",ue,"detached","detacher"),st=(0,w.Z)("recompileFromScratch",fe,"detached","detacher"),lt=(0,w.Z)("setCompiling",de,"detacher","detached"),ct=(0,w.Z)("startCompile",he,"detached","detacher"),ut=(0,w.Z)("stopCompile",pe,"detached","detacher"),ft=(0,w.Z)("setChangedAt",me,"detached","detacher"),dt=(0,w.Z)("setSavedAt",ge,"detached","detacher"),ht=(0,w.Z)("clearCache",ve,"detached","detacher"),pt=(0,w.Z)("sync-to-entry",ye,"detached","detacher");!function(e,t,n){var a=(0,r.useCallback)((function(t){_(t)&&(t.preventDefault(),e())}),[e]),l=(0,r.useCallback)((function(){e()}),[e]);(0,x.Z)("pdf:recompile",l),(0,r.useEffect)((function(){return document.body.addEventListener("keydown",a),function(){document.body.removeEventListener("keydown",a)}}),[a]);var f=(0,w.Z)("set-changed-at",t,"detacher","detached"),d=(0,r.useCallback)((function(){f(Date.now())}),[f]);(0,x.Z)("doc:changed",d);var h=(0,w.Z)("set-saved-at",n,"detacher","detached"),p=(0,r.useCallback)((function(){h(Date.now())}),[h]);(0,x.Z)("doc:saved",p)}(ct,ft,dt);var mt=(0,r.useMemo)((function(){return{animateCompileDropdownArrow:be,autoCompile:we,clearCache:ht,clearingCache:xe,clsiServerId:_e,codeCheckFailed:Se,compiling:ke,deliveryLatencies:Ce,draft:Ee,editedSinceCompileStarted:Ve,error:Oe,fileList:je,hasChanges:$e,highlights:Te,lastCompileOptions:Ae,logEntryAnnotations:De,logEntries:Pe,pdfDownloadUrl:null==Re?void 0:Re.pdfDownloadUrl,pdfFile:Re,pdfUrl:null==Re?void 0:Re.pdfUrl,pdfViewer:Ie,position:Me,rawLog:Le,recompileFromScratch:st,setAnimateCompileDropdownArrow:Ze,setAutoCompile:Ge,setCompiling:lt,setDraft:Ke,setError:Ye,setHasLintingError:Qe,setHighlights:et,setPosition:Xe,setShowCompileTimeWarning:tt,setShowLogs:nt,toggleLogs:rt,setStopOnFirstError:it,setStopOnValidationError:ot,showLogs:Fe,showCompileTimeWarning:Ne,showFasterCompilesFeedbackUI:qe,startCompile:ct,stopCompile:ut,stopOnFirstError:Be,stopOnValidationError:Ue,stoppedOnFirstError:He,uncompiled:ze,validationIssues:We,firstRenderDone:Je,setChangedAt:ft,cleanupCompileResult:at,syncToEntry:pt}}),[be,we,ht,xe,_e,Se,ke,Ce,Ee,Oe,Ve,je,$e,Te,Ae,De,Pe,Re,Ie,Me,Le,st,Ze,Ge,lt,Ke,Ye,Qe,et,Xe,tt,nt,rt,it,ot,Ne,Fe,qe,ct,ut,Be,Ue,He,ze,We,Je,ft,at,pt]);return(0,S.jsx)(E.Provider,{value:mt,children:t})}function j(e){var t=(0,r.useContext)(E);return l().checkPropTypes(e,t,"data","DetachCompileContext.Provider"),t}E.Provider.propTypes=f.HP,O.propTypes={children:l().any}},11528:function(e,t,n){"use strict";n.d(t,{dn:function(){return O},JY:function(){return j}});n(58188),n(88233),n(71372),n(34115),n(634),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850);var r=n(2784),a=n(13980),l=n.n(a),f=n(99618),d=n(79862);n(93244);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=n(52322);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=(0,r.createContext)();_.Provider.propTypes={value:l().shape({role:l().oneOf(["detacher","detached",null]),setRole:l().func.isRequired,broadcastEvent:l().func.isRequired,addEventHandler:l().func.isRequired,deleteEventHandler:l().func.isRequired}).isRequired};var S=(0,f.Z)("ol-debugPdfDetach"),k=(0,f.Z)("ol-project_id"),C="detach-".concat(k),E="BroadcastChannel"in window?new BroadcastChannel(C):void 0;function O(e){var t,n,a,l,p=e.children,x=w((0,r.useState)(),2),k=x[0],C=x[1],O=w((0,r.useState)((function(){return(0,f.Z)("ol-detachRole")||null})),2),j=O[0],T=O[1],A=(t=(0,r.useRef)(new Set),n=(0,r.useCallback)((function(e){t.current.add(e)}),[]),a=(0,r.useCallback)((function(e){t.current.delete(e)}),[]),l=(0,r.useCallback)((function(){var e,n=h(t.current);try{for(n.s();!(e=n.n()).done;)e.value.apply(void 0,arguments)}catch(e){n.e(e)}finally{n.f()}}),[]),{addHandler:n,deleteHandler:a,callHandlers:l}),P=A.addHandler,D=A.deleteHandler,R=A.callHandlers;(0,r.useEffect)((function(){S&&console.log("Effect",{role:j}),window.history.replaceState({},"",(0,d.g)(j).toString())}),[j]),(0,r.useEffect)((function(){if(E){var e=function(e){S&&console.log("Receiving:",e.data),R(e.data)};return E.addEventListener("message",e),function(){E.removeEventListener("message",e)}}}),[R]);var I=(0,r.useCallback)((function(e,t){if(j){S&&console.log("Broadcasting",{role:j,event:e,data:t});var n={role:j,event:e};t&&(n.data=t),null==E||E.postMessage(n)}else S&&console.log("Not Broadcasting (no role)",{role:j,event:e,data:t})}),[j]);(0,r.useEffect)((function(){I("connected")}),[I]),(0,r.useEffect)((function(){var e=function(){return I("closed")};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[I]),(0,r.useEffect)((function(){var e=function(e){"detached"===e.role&&"connected"===e.event&&C(new Date)};return P(e),function(){return D(e)}}),[P,D]);var M=(0,r.useMemo)((function(){return{role:j,setRole:T,broadcastEvent:I,lastDetachedConnectedAt:k,addEventHandler:P,deleteEventHandler:D}}),[j,T,I,k,P,D]);return(0,y.jsx)(_.Provider,{value:M,children:p})}function j(e){var t=(0,r.useContext)(_);if(!t)throw new Error("useDetachContext is only available inside DetachProvider");return l().checkPropTypes(e,t,"data","DetachContext.Provider"),t}O.propTypes={children:l().any}},32025:function(e,t,n){"use strict";n.d(t,{KU:function(){return E},_i:function(){return O}});n(26936),n(36728),n(16781),n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(32501),n(27233),n(77950),n(21850);var r=n(2784),a=n(13980),l=n.n(a),f=n(37246),d=n(73091),h=n(61917),p=n(14951),y=n(11528),w=n(99618),x=n(33592),_=n(52322);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=(0,r.createContext)();function E(e){var t=e.children,n=e.settings,a=(0,h.I)(),k=(0,x.SE)().id,E=(0,y.JY)().role,O=(0,p.d2)({owner:l().shape({_id:l().string.isRequired}),features:l().shape({compileGroup:l().string})}),j=O.owner,T=O.features,A=(0,r.useMemo)((function(){return window.brandVariation?{logoImgUrl:window.brandVariation.logo_url,brandVariationName:window.brandVariation.name,brandVariationId:window.brandVariation.id,brandId:window.brandVariation.brand_id,brandVariationHomeUrl:window.brandVariation.home_url,publishGuideHtml:window.brandVariation.publish_guide_html,partner:window.brandVariation.partner,brandedMenu:window.brandVariation.branded_menu,submitBtnHtml:window.brandVariation.submit_button_html}:void 0}),[]),P=S((0,f.Z)("state.loading"),1)[0],D=S((0,f.Z)("project.name"),2),R=D[0],I=D[1],M=S((0,f.Z)("permissionsLevel"),1)[0],L=S((0,f.Z)("editor.showSymbolPalette"),1)[0],N=S((0,f.Z)("editor.toggleSymbolPalette"),1)[0],F=S((0,f.Z)("editor.showGalileo"),1)[0],q=S((0,f.Z)("editor.galileoActivated"),1)[0],B=S((0,f.Z)("editor.toggleGalileoPanel"),1)[0],U=S((0,f.Z)("editor.toggleGalileo"),1)[0];(0,r.useEffect)((function(){if(null!=a&&a.socket)return a.socket.on("projectNameUpdated",I),function(){return a.socket.removeListener("projectNameUpdated",I)}}),[null==a?void 0:a.socket,I]);var H=(0,r.useCallback)((function(e){I((function(t){return t!==e&&n.saveProjectSettings({name:e}).catch((function(e){I(t);var n=e.data;return 400===e.status?a.showGenericMessageModal("Error renaming project",n):a.showGenericMessageModal("Error renaming project","Please try again in a moment")})),e}))}),[n,a,I]),z=(0,d.Z)().setTitle;(0,r.useEffect)((function(){var e=[];"detached"===E&&e.push("[PDF]"),R&&(e.push(R),e.push("-")),e.push("Online LaTeX Editor"),e.push(window.ExposedSettings.appName);var t=e.join(" ");z(t)}),[R,z,E]);var V=(0,r.useCallback)((function(e){window.dispatchEvent(new CustomEvent("editor:insert-symbol",{detail:e}))}),[]),W=(0,r.useCallback)((function(e){window.dispatchEvent(new CustomEvent("editor:insert-galileo-completion",{detail:e}))}),[]),Z=(0,r.useCallback)((function(e,t){window.dispatchEvent(new CustomEvent("editor:galileo-request-save-reference-in-project",{detail:{citationKey:e,bibtex:t}}))}),[]),G=(0,r.useMemo)((function(){return{cobranding:A,hasPremiumCompile:"priority"===(null==T?void 0:T.compileGroup),loading:P,renameProject:H,permissionsLevel:M,isProjectOwner:(null==j?void 0:j._id)===k,isRestrictedTokenMember:(0,w.Z)("ol-isRestrictedTokenMember"),showSymbolPalette:L,toggleSymbolPalette:N,insertSymbol:V,showGalileo:F,galileoActivated:q,toggleGalileoPanel:B,toggleGalileo:U,insertGalileoAutocomplete:W,addGalileoReferenceToProject:Z}}),[A,null==T?void 0:T.compileGroup,j,k,P,H,M,L,N,V,F,q,B,U,W,Z]);return(0,_.jsx)(C.Provider,{value:G,children:t})}function O(e){var t=(0,r.useContext)(C);if(!t)throw new Error("useEditorContext is only available inside EditorProvider");return l().checkPropTypes(e,t,"data","EditorContext.Provider"),t}C.Provider.propTypes={value:l().shape({cobranding:l().shape({logoImgUrl:l().string.isRequired,brandVariationName:l().string.isRequired,brandVariationId:l().number.isRequired,brandId:l().number.isRequired,brandVariationHomeUrl:l().string.isRequired,publishGuideHtml:l().string,partner:l().string,brandedMenu:l().bool,submitBtnHtml:l().string}),hasPremiumCompile:l().bool,loading:l().bool,renameProject:l().func.isRequired,showSymbolPalette:l().bool,toggleSymbolPalette:l().func,insertSymbol:l().func,showGalileo:l().bool,galileoActivated:l().bool,toggleGalileoPanel:l().func,toggleGalileo:l().func,insertGalileoAutocomplete:l().func,addGalileoReferenceToProject:l().func,isProjectOwner:l().bool,isRestrictedTokenMember:l().bool,permissionsLevel:l().oneOf(["readOnly","readAndWrite","owner"])})},E.propTypes={children:l().any,settings:l().object}},47204:function(e,t,n){"use strict";n.d(t,{O:function(){return O},T:function(){return j}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850);var r=n(2784),a=n(13980),l=n.n(a),f=n(37246),d=n(20681),h=n(53687),p=n(92242),y=n(52322);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=(0,r.createContext)(),S=l().shape({_id:l().string.isRequired,name:l().string.isRequired,docs:l().array.isRequired,fileRefs:l().array.isRequired,folders:l().array.isRequired});_.Provider.propTypes={value:l().shape({fileTreeData:S,hasFolders:l().bool})};var k={RENAME:"RENAME",RESET:"RESET",DELETE:"DELETE",MOVE:"MOVE",CREATE:"CREATE"};function C(e,t){var n=e.fileTreeData;switch(t.type){case k.RESET:var r=t.fileTreeData;return{fileTreeData:r,fileCount:(0,h.y)(r)};case k.RENAME:var a=(0,d.Gd)(n,t.id,{newName:t.newName});return{fileTreeData:a,fileCount:(0,h.y)(a)};case k.DELETE:var l=(0,d.xv)(n,t.id);return{fileTreeData:l,fileCount:(0,h.y)(l)};case k.MOVE:var f=(0,d.RB)(n,t.entityId,t.toFolderId);return{fileTreeData:f,fileCount:(0,h.y)(f)};case k.CREATE:var p=(0,d.$O)(n,t.parentFolderId,t.entity);return{fileTreeData:p,fileCount:(0,h.y)(p)};default:throw new Error("Unknown mutable file tree action type: ".concat(t.type))}}var E=function(e){var t=null==e?void 0:e[0];return{fileTreeData:t,fileCount:(0,h.y)(t)}};function O(e){var t=(0,r.useContext)(_);if(!t)throw new Error("useFileTreeData is only available inside FileTreeDataProvider");return l().checkPropTypes(e,t,"data","FileTreeDataContext.Provider"),t}function j(e){var t=e.children,n=(w((0,f.Z)("project"),1)[0]||{}).rootFolder,a=w((0,r.useReducer)(C,n,E),2),l=a[0],d=l.fileTreeData,h=l.fileCount,x=a[1],S=w((0,r.useState)([]),2),O=S[0],j=S[1];(0,p.Z)((function(){x({type:k.RESET,fileTreeData:null==n?void 0:n[0]})}),[n]);var T=(0,r.useCallback)((function(e,t){t.type="folder",x({type:k.CREATE,parentFolderId:e,entity:t})}),[]),A=(0,r.useCallback)((function(e,t){t.type="doc",x({type:k.CREATE,parentFolderId:e,entity:t})}),[]),P=(0,r.useCallback)((function(e,t){t.type="fileRef",x({type:k.CREATE,parentFolderId:e,entity:t})}),[]),D=(0,r.useCallback)((function(e,t){x({type:k.RENAME,newName:t,id:e})}),[]),R=(0,r.useCallback)((function(e){x({type:k.DELETE,id:e})}),[]),I=(0,r.useCallback)((function(e,t){x({type:k.MOVE,entityId:e,toFolderId:t})}),[]),M=(0,r.useMemo)((function(){return{dispatchCreateDoc:A,dispatchCreateFile:P,dispatchCreateFolder:T,dispatchDelete:R,dispatchMove:I,dispatchRename:D,fileCount:h,fileTreeData:d,hasFolders:(null==d?void 0:d.folders.length)>0,selectedEntities:O,setSelectedEntities:j}}),[A,P,T,R,I,D,h,d,O,j]);return(0,y.jsx)(_.Provider,{value:M,children:t})}j.propTypes={children:l().any}},61917:function(e,t,n){"use strict";n.d(t,{P:function(){return p},I:function(){return y}});n(71372),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850);var r=n(2784),a=n(99618),l=n(52322);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=(0,r.createContext)(null),p=function(e){var t=e.ide,n=e.children,d=f((0,r.useState)((function(){return t||{_id:(0,a.Z)("ol-project_id"),$scope:{$on:function(){},$watch:function(){},$applyAsync:function(){},user:{},project:{_id:(0,a.Z)("ol-project_id"),name:(0,a.Z)("ol-projectName"),rootDocId:"",members:[],invites:[],features:{collaborators:0,compileGroup:"standard",trackChangesVisible:!1,references:!1,mendeley:!1,zotero:!1},publicAccessLevel:"",tokens:{readOnly:"",readAndWrite:""},owner:{_id:"",email:""}},state:{loading:!1},permissionsLevel:"readOnly",editor:{sharejs_doc:null,showSymbolPalette:!1,toggleSymbolPalette:function(){}},ui:{view:"pdf",chatOpen:!1,reviewPanelOpen:!1,leftMenuShown:!1,pdfLayout:"flat"},pdf:{uncompiled:!0,logEntryAnnotations:{}},settings:{syntaxValidation:!1,pdfViewer:"pdfjs"},hasLintingError:!1},editorManager:{openDoc:function(){},getCurrentDocId:function(){}}}})),1)[0];return(0,l.jsx)(h.Provider,{value:d,children:n})};function y(){var e=(0,r.useContext)(h);if(!e)throw new Error("useIdeContext is only available inside IdeProvider");return e}},86701:function(e,t,n){"use strict";n.d(t,{aM:function(){return I},l5:function(){return M}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784),a=n(13980),l=n.n(a),f=n(37246),d=(n(88233),n(11528)),h=n(99618),p=n(79862),y=n(96227),w=n(44694);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,h.Z)("ol-debugPdfDetach"),k=6e4,C=1e4;var E=n(61917),O=n(76066),j=n(52322);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=(0,h.Z)("ol-debugPdfDetach"),D=(0,r.createContext)();function R(e){O.Z.setItem("pdf.layout","sideBySide"===e?"split":"flat")}function I(e){var t=e.children,n=(0,E.I)().$scope,a=T((0,f.Z)("ui.view"),2),l=a[0],h=a[1],_=(0,r.useCallback)((function(e){h((function(t){return"history"!==e&&"history"!==t||n.toggleHistory(),"editor"===e&&n.openFile?"file":e}))}),[n,h]),O=T((0,f.Z)("ui.chatOpen"),2),A=O[0],I=O[1],M=T((0,f.Z)("ui.reviewPanelOpen"),2),L=M[0],N=M[1],F=T((0,f.Z)("ui.leftMenuShown"),2),q=F[0],B=F[1],U=T((0,f.Z)("ui.pdfLayout"),2),H=U[0],z=U[1],V=T((0,f.Z)("ui.loadingStyleSheet"),2),W=V[0],Z=V[1],G=(0,r.useCallback)((function(){z((function(e){var t="sideBySide"===e?"flat":"sideBySide";_("sideBySide"===t?"editor":"pdf"),z(t),R(t)}))}),[z,_]),K=(0,r.useCallback)((function(e,t){z(e),_("sideBySide"===e?"editor":t),R(e)}),[z,_]),Y=function(){var e=(0,d.JY)(),t=e.role,n=e.setRole,a=e.broadcastEvent,l=e.addEventHandler,f=e.deleteEventHandler,h=x((0,r.useState)(!1),2),_=h[0],E=h[1],O=x((0,r.useState)(!1),2),j=O[0],T=O[1],A=x((0,r.useState)(!1),2),P=A[0],D=A[1],R=(0,r.useRef)();(0,r.useEffect)((function(){S&&console.log("Effect",{isLinked:j}),E(!1)}),[j,E]),(0,r.useEffect)((function(){S&&console.log("Effect",{role:t,isLinked:j}),"detached"===t&&j&&y.sendMB("project-layout-detached")}),[t,j]),(0,r.useEffect)((function(){R.current&&clearTimeout(R.current),"detacher"===t&&!1===j&&(R.current=setTimeout((function(){n(null)}),_?k:C))}),[t,_,j,n]),(0,r.useEffect)((function(){S&&console.log("Effect",{isLinking:_})}),[_]);var I=(0,w.Z)(t);(0,r.useEffect)((function(){I&&!t&&y.sendMB("project-layout-reattached")}),[I,t]);var M=(0,r.useCallback)((function(){a("reattach"),n(null),T(!1)}),[n,T,a]),L=(0,r.useCallback)((function(){D(!1),n("detacher"),E(!0),window.open((0,p.g)("detached").toString(),"_blank")}),[n,E]),N=(0,r.useCallback)((function(){S&&console.log("Duplicate detacher detected, turning into a regular editor again"),D(!0),T(!1),n(null)}),[n,T]),F=(0,r.useCallback)((function(e){switch(e.event){case"connected":a("up"),T(!0);break;case"up":T(!0);break;case"closed":T(!1)}}),[T,a]),q=(0,r.useCallback)((function(e){switch(e.event){case"connected":a("up"),T(!0);break;case"up":T(!0);break;case"closed":T(!1);break;case"reattach":T(!1),window.close()}}),[T,a]),B=(0,r.useCallback)((function(e){"closed"===e.event&&a("up")}),[a]),U=(0,r.useCallback)((function(e){"detacher"===t?"detacher"===e.role?N():"detached"===e.role&&F(e):"detached"===t&&("detacher"===e.role?q(e):"detached"===e.role&&B(e))}),[t,N,F,q,B]);return(0,r.useEffect)((function(){return l(U),function(){return f(U)}}),[l,f,U]),{reattach:M,detach:L,isLinked:j,isLinking:_,role:t,isRedundant:P}}(),X=Y.reattach,J=Y.detach,Q=Y.isLinking,ee=Y.isLinked,te=Y.role,ne=Y.isRedundant,re="sideBySide"===H||"pdf"===l||"detacher"===te;(0,r.useEffect)((function(){P&&console.log("Layout Effect",{detachIsRedundant:ne,detachRole:te,detachIsLinking:Q,detachIsLinked:ee}),"detacher"===te&&(ne?K("sideBySide"):(Q||ee)&&K("flat","editor"))}),[ne,te,Q,ee,K]);var oe=(0,r.useMemo)((function(){return{reattach:X,detach:J,detachIsLinked:ee,detachRole:te,changeLayout:K,chatIsOpen:A,leftMenuShown:q,pdfLayout:H,pdfPreviewOpen:re,reviewPanelOpen:L,loadingStyleSheet:W,setChatIsOpen:I,setLeftMenuShown:B,setPdfLayout:z,setReviewPanelOpen:N,setLoadingStyleSheet:Z,setView:_,switchLayout:G,view:l}}),[X,J,ee,te,K,A,q,H,re,L,W,I,B,z,N,Z,_,G,l]);return(0,j.jsx)(D.Provider,{value:oe,children:t})}function M(e){var t=(0,r.useContext)(D);return l().checkPropTypes(e,t,"data","LayoutContext.Provider"),t}D.Provider.propTypes={value:l().shape({reattach:l().func.isRequired,detach:l().func.isRequired,detachIsLinked:l().bool,detachRole:l().string,changeLayout:l().func.isRequired,view:l().oneOf(["editor","file","pdf","history"]),setView:l().func.isRequired,chatIsOpen:l().bool,setChatIsOpen:l().func.isRequired,reviewPanelOpen:l().bool,setReviewPanelOpen:l().func.isRequired,leftMenuShown:l().bool,setLeftMenuShown:l().func.isRequired,pdfLayout:l().oneOf(["sideBySide","flat"]).isRequired,pdfPreviewOpen:l().bool}).isRequired},I.propTypes={children:l().any}},76725:function(e,t,n){"use strict";n.d(t,{HP:function(){return Qe},gy:function(){return et},A3:function(){return tt}});n(15735),n(79321),n(58188),n(28673),n(6886),n(39529),n(73439),n(21515),n(34115),n(634),n(20796),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784),a=n(13980),l=n.n(a),f=n(37246),d=n(61917),h=n(76635),p=n.n(h);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){var n=(0,d.I)().$scope,a=y((0,r.useState)(t),2),l=a[0],f=a[1];return[l,(0,r.useCallback)((function(t){f((function(r){var a=p().isFunction(t)?t(r):t;return n.$applyAsync((function(){return p().set(n,e,a)})),a}))}),[e,n])]}var _=n(18977),S=n(30286),k=(n(60523),n(94908),n(18178),n(9575),n(96264),n(71245),n(34769),n(95342),n(68625),n(1939),n(62775),n(96882),n(38859),n(17525),n(18275),n(96928),/^[^%]*\\documentclass/),C=n(99618),E=n(28684),O=n(17626),j=n(24452);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(){A=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new L(a||[]);return r(f,"_invoke",{value:D(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(N([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==T(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function D(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return F()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=R(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function R(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(P.prototype),h(P.prototype,f,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new P(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}var N=new URLSearchParams(window.location.search),F=function(){function e(t){var n=this,r=t.compilingRef,a=t.projectId,l=t.rootDocId,f=t.setChangedAt,d=t.setSavedAt,p=t.setCompiling,y=t.setData,w=t.setFirstRenderDone,x=t.setDeliveryLatencies,_=t.setError,S=t.cleanupCompileResult,k=t.signal;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.compilingRef=r,this.projectId=a,this.rootDocId=l,this.setChangedAt=f,this.setSavedAt=d,this.setCompiling=p,this.setData=y,this.setFirstRenderDone=w,this.setDeliveryLatencies=x,this.setError=_,this.cleanupCompileResult=S,this.signal=k,this.clsiServerId=null,this.currentDoc=null,this.error=void 0,this.timer=0,this.defaultOptions={draft:!1,stopOnFirstError:!1},this.debouncedAutoCompile=(0,h.debounce)((function(){n.compile({isAutoCompileOnChange:!0})}),2500,{maxWait:5e3})}var t,n,r,a,l;return t=e,n=[{key:"compile",value:(a=A().mark((function e(){var t,n,r,a,l,f,d,h,p,y,w,x=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x.length>0&&void 0!==x[0]?x[0]:{},!(t=D(D({},this.defaultOptions),t)).isAutoCompileOnLoad||!(0,C.Z)("ol-preventCompileOnLoad")){e.next=4;break}return e.abrupt("return");case 4:if(n=this.compilingRef.current,this.setCompiling(!0),!n){e.next=9;break}return t.isAutoCompileOnChange&&this.debouncedAutoCompile(),e.abrupt("return");case 9:return e.prev=9,this.setChangedAt(0),this.setSavedAt(0),this.validationIssues=void 0,window.dispatchEvent(new CustomEvent("flush-changes")),r=this.buildCompileParams(t),a=performance.now(),l={rootDoc_id:this.getRootDocOverrideId(),draft:t.draft,check:"silent",incrementalCompilesEnabled:!this.error,stopOnFirstError:t.stopOnFirstError},e.next=19,(0,E.ty)("/project/".concat(this.projectId,"/compile?").concat(r),{body:l,signal:this.signal});case 19:f=e.sent,d=Math.ceil(performance.now()-a),h=(0,O.w)(f,d,a),p=h.deliveryLatencies,y=h.firstRenderDone,this.setDeliveryLatencies((function(){return p})),this.setFirstRenderDone((function(){return y})),this.setError(void 0),f.options=t,f.clsiServerId&&(this.clsiServerId=f.clsiServerId),this.setData(f),e.next=35;break;case 30:e.prev=30,e.t0=e.catch(9),console.error(e.t0),this.cleanupCompileResult(),this.setError(429===(null===(w=e.t0.info)||void 0===w?void 0:w.statusCode)?"rate-limited":"error");case 35:return e.prev=35,this.setCompiling(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,this,[[9,30,35,38]])})),l=function(){var e=this,t=arguments;return new Promise((function(n,r){var l=a.apply(e,t);function f(e){I(l,n,r,f,d,"next",e)}function d(e){I(l,n,r,f,d,"throw",e)}f(void 0)}))},function(){return l.apply(this,arguments)})},{key:"getRootDocOverrideId",value:function(){if(this.currentDoc.doc_id!==this.rootDocId){var e=this.currentDoc.getSnapshot();if(e&&e.split("\n").some((function(e){return k.test(e)})))return this.currentDoc.doc_id}return null}},{key:"buildPostCompileParams",value:function(){var e=new URLSearchParams;return this.clsiServerId&&e.set("clsiserverid",this.clsiServerId),e}},{key:"buildCompileParams",value:function(e){var t=new URLSearchParams;return(e.isAutoCompileOnLoad||e.isAutoCompileOnChange)&&t.set("auto_compile","true"),j.ns&&t.set("enable_pdf_caching","true"),"true"===N.get("file_line_errors")&&(t.file_line_errors="true"),t}},{key:"stopCompile",value:function(){var e=this,t=this.buildPostCompileParams();return(0,E.ty)("/project/".concat(this.projectId,"/compile/stop?").concat(t),{signal:this.signal}).catch((function(t){console.error(t),e.setError("error")})).finally((function(){e.setCompiling(!1)}))}},{key:"clearCache",value:function(){var e=this,t=this.buildPostCompileParams();return(0,E.K$)("/project/".concat(this.projectId,"/output?").concat(t),{signal:this.signal}).catch((function(t){console.error(t),e.setError("clear-cache")}))}},{key:"setOption",value:function(e,t){this.defaultOptions[e]=t}}],n&&M(t.prototype,n),r&&M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),q=n(96227);n(96708),n(85940),n(74069),n(16781),n(17368),n(24471),n(51172),n(88233),n(93244);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===B(l)?l:String(l)),r)}var a,l}function z(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var V=/^LaTeX(?:3| Font)? Warning: (.*)$/,W=/^(Over|Under)full \\(v|h)box/,Z=/^((?:Package|Class|Module) \b.+\b Warning:.*)$/,G=/lines? ([0-9]+)/,K=/^(?:Package|Class|Module) (\b.+\b) Warning/,Y=/^([./].*):(\d+): (.*)/,X=/^LaTeX Warning: (.*)$/,J=/^(Package \b.+\b Warning:.*)$/,Q=/^Package (\b.+\b) Warning/,ee=0,te=1,ne=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};U(this,e),this.state=ee,this.fileBaseNames=n.fileBaseNames||[/compiles/,/\/usr\/local/],this.ignoreDuplicates=n.ignoreDuplicates,this.data=[],this.fileStack=[],this.currentFileList=this.rootFileList=[],this.openParens=0,n.oldRegexes?(this.latexWarningRegex=X,this.packageWarningRegex=J,this.packageRegex=Q):(this.latexWarningRegex=V,this.packageWarningRegex=Z,this.packageRegex=K),this.log=new re(t)}return z(e,[{key:"parse",value:function(){for(;!1!==(this.currentLine=this.log.nextLine());)if(this.state===ee&&(this.currentLineIsError()?(this.state=te,this.currentError={line:null,file:this.currentFilePath,level:"error",message:this.currentLine.slice(2),content:"",raw:this.currentLine+"\n"}):this.currentLineIsFileLineError()?(this.state=te,this.parseFileLineError()):this.currentLineIsRunawayArgument()?this.parseRunawayArgumentError():this.currentLineIsWarning()?this.parseSingleWarningLine(this.latexWarningRegex):this.currentLineIsHboxWarning()?this.parseHboxLine():this.currentLineIsPackageWarning()?this.parseMultipleWarningLine():this.parseParensForFilenames()),this.state===te){this.currentError.content+=this.log.linesUpToNextMatchingLine(/^l\.[0-9]+/).join("\n"),this.currentError.content+="\n",this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.content+="\n",this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.raw+=this.currentError.content;var e=this.currentError.raw.match(/l\.([0-9]+)/);e&&null===this.currentError.line&&(this.currentError.line=parseInt(e[1],10)),this.data.push(this.currentError),this.state=ee}return this.postProcess(this.data)}},{key:"currentLineIsError",value:function currentLineIsError(){return"!"===this.currentLine[0]&&"!  ==> Fatal error occurred, no output PDF file produced!"!==this.currentLine}},{key:"currentLineIsFileLineError",value:function currentLineIsFileLineError(){return Y.test(this.currentLine)}},{key:"currentLineIsRunawayArgument",value:function(){return this.currentLine.match(/^Runaway argument/)}},{key:"currentLineIsWarning",value:function(){return!!this.currentLine.match(this.latexWarningRegex)}},{key:"currentLineIsPackageWarning",value:function(){return!!this.currentLine.match(this.packageWarningRegex)}},{key:"currentLineIsHboxWarning",value:function(){return!!this.currentLine.match(W)}},{key:"parseFileLineError",value:function parseFileLineError(){var e=this.currentLine.match(Y);this.currentError={line:e[2],file:e[1],level:"error",message:e[3],content:"",raw:this.currentLine+"\n"}}},{key:"parseRunawayArgumentError",value:function parseRunawayArgumentError(){this.currentError={line:null,file:this.currentFilePath,level:"error",message:this.currentLine,content:"",raw:this.currentLine+"\n"},this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.content+="\n",this.currentError.content+=this.log.linesUpToNextWhitespaceLine().join("\n"),this.currentError.raw+=this.currentError.content;var e=this.currentError.raw.match(/l\.([0-9]+)/);return e&&(this.currentError.line=parseInt(e[1],10)),this.data.push(this.currentError)}},{key:"parseSingleWarningLine",value:function(e){var t=this.currentLine.match(e);if(t){var n=t[1],r=n.match(G),a=r?parseInt(r[1],10):null;this.data.push({line:a,file:this.currentFilePath,level:"warning",message:n,raw:n})}}},{key:"parseMultipleWarningLine",value:function(){var e=this.currentLine.match(this.packageWarningRegex);if(e){for(var t=[e[1]],n=this.currentLine.match(G),r=n?parseInt(n[1],10):null,a=this.currentLine.match(this.packageRegex)[1],l=new RegExp("(?:\\("+a+"\\))*[\\s]*(.*)","i");this.currentLine=this.log.nextLine();)r=(n=this.currentLine.match(G))?parseInt(n[1],10):r,e=this.currentLine.match(l),t.push(e[1]);var f=t.join(" ");this.data.push({line:r,file:this.currentFilePath,level:"warning",message:f,raw:f})}}},{key:"parseHboxLine",value:function(){var e=this.currentLine.match(G),t=e?parseInt(e[1],10):null;this.data.push({line:t,file:this.currentFilePath,level:"typesetting",message:this.currentLine,raw:this.currentLine})}},{key:"parseParensForFilenames",value:function(){var e=this.currentLine.search(/\(|\)/);if(-1!==e){var t=this.currentLine[e];if(this.currentLine=this.currentLine.slice(e+1),"("===t){var n=this.consumeFilePath();if(n){this.currentFilePath=n;var r={path:n,files:[]};this.fileStack.push(r),this.currentFileList.push(r),this.currentFileList=r.files}else this.openParens++}else if(")"===t)if(this.openParens>0)this.openParens--;else if(this.fileStack.length>1){this.fileStack.pop();var a=this.fileStack[this.fileStack.length-1];this.currentFilePath=a.path,this.currentFileList=a.files}this.parseParensForFilenames()}}},{key:"consumeFilePath",value:function(){if(!this.currentLine.match(/^\/?([^ )]+\/)+/))return!1;for(var e,t=this.currentLine.search(/ |\)/);-1!==t&&" "===this.currentLine[t];){var n=this.currentLine.slice(0,t);if(/\.\w+$/.test(n))break;var r=this.currentLine.slice(t+1);if(/^\s*["()[\]]/.test(r))break;var a=r.search(/[ "()[\]]/);-1===a?t=-1:t+=a+1}return-1===t?(e=this.currentLine,this.currentLine=""):(e=this.currentLine.slice(0,t),this.currentLine=this.currentLine.slice(t)),e}},{key:"postProcess",value:function(e){var t=this,n=[],r={error:[],warning:[],typesetting:[]},a=new Set;return e.forEach((function(e){var l,f=e.raw;t.ignoreDuplicates&&a.has(f)||(null===(l=r[e.level])||void 0===l||l.push(e),n.push(e),a.add(f))})),{errors:r.error,warnings:r.warning,typesetting:r.typesetting,all:n,files:this.rootFileList}}}]),e}(),re=function(){function e(t){U(this,e),this.text=t.replace(/(\r\n)|\r/g,"\n");var n=this.text.split("\n");this.lines=[n[0]];for(var r=1;r<n.length;r++){var a=n[r-1],l=n[r];79===a.length&&"..."!==a.slice(-3)?this.lines[this.lines.length-1]+=l:this.lines.push(l)}this.row=0}return z(e,[{key:"nextLine",value:function(){return this.row++,!(this.row>=this.lines.length)&&this.lines[this.row]}},{key:"rewindLine",value:function(){this.row--}},{key:"linesUpToNextWhitespaceLine",value:function(){return this.linesUpToNextMatchingLine(/^ *$/)}},{key:"linesUpToNextMatchingLine",value:function(e){for(var t=[];;){var n=this.nextLine();if(!1===n)break;if(t.push(n),n.match(e))break}return t}}]),e}(),oe=n(56377),ae=[{ruleId:"hint_misplaced_alignment_tab_character",regexToMatch:/Misplaced alignment tab character \&/},{ruleId:"hint_extra_alignment_tab_has_been_changed",regexToMatch:/Extra alignment tab has been changed to \\cr/},{ruleId:"hint_display_math_should_end_with",regexToMatch:/Display math should end with \$\$/},{ruleId:"hint_missing_inserted",regexToMatch:/Missing [{$] inserted./},{ruleId:"hint_reference_undefined",regexToMatch:/Reference.+undefined/},{ruleId:"hint_there_were_undefined_references",regexToMatch:/There were undefined references/},{ruleId:"hint_citation_on_page_undefined_on_input_line",regexToMatch:/Citation .+ on page .+ undefined on input line .+/},{ruleId:"hint_label_multiply_defined_labels",regexToMatch:/(Label .+)? multiply[ -]defined( labels)?/},{ruleId:"hint_float_specifier_changed",regexToMatch:/`!?h' float specifier changed to `!?ht'/},{ruleId:"hint_no_positions_in_optional_float_specifier",regexToMatch:/No positions in optional float specifier/},{ruleId:"hint_undefined_control_sequence",regexToMatch:/Undefined control sequence/,contentRegex:/^(?:l\.[0-9]+|<(?:recently read|inserted text|to be read again)>)\s*(\\\S+)/,improvedTitle:function(e,t){if(null!=t&&t.length&&oe.Z.has(t[0])){var n=t[0],r=oe.Z.get(n);return"".concat(r.command," is missing.")}return e}},{ruleId:"hint_file_not_found",regexToMatch:/File .+ not found/},{ruleId:"hint_unknown_graphics_extension",regexToMatch:/LaTeX Error: Unknown graphics extension: \..+/},{ruleId:"hint_unknown_float_option_h",regexToMatch:/LaTeX Error: Unknown float option `H'/},{ruleId:"hint_unknown_float_option_q",regexToMatch:/LaTeX Error: Unknown float option `q'/},{ruleId:"hint_math_allowed_only_in_math_mode",regexToMatch:/LaTeX Error: \\math.+ allowed only in math mode/},{ruleId:"hint_mismatched_environment",types:["environment"],regexToMatch:/Error: `([^']{2,})' expected, found `([^']{2,})'.*/,newMessage:"Error: environment does not match \\begin{$1} ... \\end{$2}"},{ruleId:"hint_mismatched_brackets",types:["environment"],regexToMatch:/Error: `([^a-zA-Z0-9])' expected, found `([^a-zA-Z0-9])'.*/,newMessage:"Error: brackets do not match, found '$2' instead of '$1'"},{ruleId:"hint_can_be_used_only_in_preamble",regexToMatch:/LaTeX Error: Can be used only in preamble/},{ruleId:"hint_missing_right_inserted",regexToMatch:/Missing \\right inserted/},{ruleId:"hint_double_superscript",regexToMatch:/Double superscript/},{ruleId:"hint_double_subscript",regexToMatch:/Double subscript/},{ruleId:"hint_no_author_given",regexToMatch:/No \\author given/},{ruleId:"hint_environment_undefined",regexToMatch:/LaTeX Error: Environment .+ undefined/},{ruleId:"hint_somethings_wrong_perhaps_a_missing_item",regexToMatch:/LaTeX Error: Something's wrong--perhaps a missing \\item/},{ruleId:"hint_misplaced_noalign",regexToMatch:/Misplaced \\noalign/},{ruleId:"hint_no_line_here_to_end",regexToMatch:/LaTeX Error: There's no line here to end/},{ruleId:"hint_verb_ended_by_end_of_line",regexToMatch:/LaTeX Error: \\verb ended by end of line/},{ruleId:"hint_illegal_unit_of_measure_pt_inserted",regexToMatch:/Illegal unit of measure (pt inserted)/},{ruleId:"hint_extra_right",regexToMatch:/Extra \\right/},{ruleId:"hint_missing_begin_document_",regexToMatch:/Missing \\begin{document}/},{ruleId:"hint_mismatched_environment2",types:["environment"],cascadesFrom:["environment"],regexToMatch:/Error: `\\end\{([^\}]+)\}' expected but found `\\end\{([^\}]+)\}'.*/,newMessage:"Error: environments do not match: \\begin{$1} ... \\end{$2}"},{ruleId:"hint_mismatched_environment3",types:["environment"],cascadesFrom:["environment"],regexToMatch:/Warning: No matching \\end found for `\\begin\{([^\}]+)\}'.*/,newMessage:"Warning: No matching \\end found for \\begin{$1}"},{ruleId:"hint_mismatched_environment4",types:["environment"],cascadesFrom:["environment"],regexToMatch:/Error: Found `\\end\{([^\}]+)\}' without corresponding \\begin.*/,newMessage:"Error: found \\end{$1} without a corresponding \\begin{$1}"}];function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function le(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e,t){var n;"string"==typeof e?n=new ne(e,t).parse():n=e;var r,a=function(e){var t,n=le(ae);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.regexToMatch.test(e))return r}}catch(e){n.e(e)}finally{n.f()}},l={},f=le(n.all);try{for(f.s();!(r=f.n()).done;){var d=r.value,h=a(d.message);if(null!=h){if(null!=h.ruleId&&(d.ruleId=h.ruleId),null!=h.newMessage&&(d.message=d.message.replace(h.regexToMatch,h.newMessage)),h.contentRegex){var p=d.content.match(h.contentRegex);p&&(d.contentDetails=p.slice(1))}if(d.contentDetails&&h.improvedTitle&&(d.message=h.improvedTitle(d.message,d.contentDetails)),null!=h.cascadesFrom){var y,w=le(h.cascadesFrom);try{for(w.s();!(y=w.n()).done;)l[y.value]&&(d.suppressed=!0)}catch(e){w.e(e)}finally{w.f()}}if(null!=h.types){var x,_=le(h.types);try{for(_.s();!(x=_.n()).done;)l[x.value]=!0}catch(e){_.e(e)}finally{_.f()}}}}}catch(e){f.e(e)}finally{f.f()}for(var S in n){var k=n[S];"object"===se(k)&&k.length>0&&(n[S]=Array.from(k).filter((function(e){return!e.suppressed})))}return n};function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==fe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===fe(l)?l:String(l)),r)}var a,l}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me=/^\[(\d+)].*>\s(INFO|WARN|ERROR)\s-\s(.*)$/,ge=/^Warning--(.+)\n--line (\d+) of file (.+)$/m,ve=/^Warning--(.+)$/m,ye=/^(.*)---line (\d+) of file (.*)\n([^]+?)\nI'm skipping whatever remains of this entry$/m,be=/^(A bad cross reference---entry ".+?"\nrefers to entry.+?, which doesn't exist)$/m,we=/^(.*)\n?---line (\d+) of file (.*)\n([^]+?)\nI'm skipping whatever remains of this command$/m,xe=/^(.*?)\nwhile executing---line (\d+) of file (.*)/m,_e={INFO:"info",WARN:"warning",ERROR:"error"},Se=function(e){return function(t,n){var r=he(t,2),a=r[0],l=r[1],f=he(n,2),d=function(t,n,r){for(var a,l=t,f=[],d=0;a=n.exec(l);){d++;var h=r(a);if(null!=e&&d>=e)return[f,""];f.push(h),l=a.input.slice(0,a.index)+a.input.slice(a.index+a[0].length+1,a.input.length)}return[f,l]}(l,f[0],f[1]),h=he(d,2),p=h[0],y=h[1];return[a.concat(p),y]}},ke=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t)throw new Error("BibLogParser Error: text parameter must be a string");this.text=t.replace(/(\r\n)|\r/g,"\n"),this.options=n,this.lines=t.split("\n"),this.warningParsers=[[ge,function(e){var t=he(e,4),n=t[0],r=t[1],a=t[2];return{file:t[3],level:"warning",message:r,line:a,raw:n}}],[ve,function(e){var t=he(e,2),n=t[0];return{file:"",level:"warning",message:t[1],line:"",raw:n}}]],this.errorParsers=[[ye,function(e){var t=he(e,5),n=t[0],r=t[1],a=t[2];return{file:t[3],level:"error",message:r+"\n"+t[4],line:a,raw:n}}],[be,function(e){var t=he(e,2),n=t[0];return{file:"",level:"error",message:t[1],line:"",raw:n}}],[we,function(e){var t=he(e,5),n=t[0],r=t[1],a=t[2];return{file:t[3],level:"error",message:r+"\n"+t[4],line:a,raw:n}}],[xe,function(e){var t=he(e,4),n=t[0],r=t[1],a=t[2];return{file:t[3],level:"error",message:r,line:a,raw:n}}]]}var t,n,r;return t=e,(n=[{key:"parseBibtex",value:function(){var e=he(this.warningParsers.reduce(Se(this.options.maxErrors),[[],this.text]),2),t=e[0],n=e[1],r=he(this.errorParsers.reduce(Se(this.options.maxErrors),[[],n]),1)[0];return{all:t.concat(r),errors:r,warnings:t,files:[],typesetting:[]}}},{key:"parseBiber",value:function(){var e={all:[],errors:[],warnings:[],files:[],typesetting:[]};return this.lines.forEach((function(t){var n=t.match(me);if(n){var r=he(n,4),a=r[0],l=r[2],f=r[3],d={file:"",level:_e[l]||"INFO",message:f,line:"",raw:a},h=d.message.match(/^BibTeX subsystem: \/.+\/(\w+\.\w+)_.+, line (\d+), (.+)$/);if(h){var p=he(h,4),y=p[1],w=p[2],x=p[3];d.file=y,d.line=w,d.message=x}switch(e.all.push(d),d.level){case"error":return e.errors.push(d);case"warning":return e.warnings.push(d)}}})),e}},{key:"parse",value:function(){var e=this.lines[0];if(e.match(/^.*INFO - This is Biber.*$/))return this.parseBiber();if(e.match(/^This is BibTeX, Version.+$/))return this.parseBibtex();throw new Error("BibLogParser Error: cannot determine whether text is biber or bibtex output")}}])&&de(t.prototype,n),r&&de(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ce=n(98022);function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Oe(){Oe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==Ee(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||Ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ae(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function Ae(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}var Re=/^(Reference|Citation).+undefined on input line/;var Ie=function(){var e,t=(e=Oe().mark((function e(t,n,r){var a,l,f,d,h,p,y,w,x,_,S,k,E,O,j,T,A,P,D,R,I,M,L;return Oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(e,t){for(var n in a.logEntries)if(e[n]){var r,l,f=Te(e[n]);try{for(f.s();!(l=f.n()).done;){var d=l.value;t&&(d.type=e.type),d.file&&(d.file=Le(d.file)),d.key=(0,Ce.v4)()}}catch(e){f.e(e)}finally{f.f()}(r=a.logEntries[n]).push.apply(r,$e(e[n]))}},a={log:null,logEntries:{errors:[],warnings:[],typesetting:[]}},!(f=t.get("output.log"))){e.next=19;break}return e.prev=4,e.next=7,fetch(Me(f,n.pdfDownloadDomain),{signal:r});case 7:return h=e.sent,e.next=10,h.text();case 10:a.log=e.sent,p=ue(a.log,{ignoreDuplicates:!0,oldRegexes:"new"!==(null===(d=(0,C.Z)("ol-splitTestVariants"))||void 0===d?void 0:d["latex-log-parser"])}),y=p.errors,w=p.warnings,x=p.typesetting,"stopped-on-first-error"===n.status&&(w=w.filter((function(e){return!Ne(e)}))),l({errors:y,warnings:w,typesetting:x}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.warn(e.t0);case 19:_=[],S=Te(t);try{for(S.s();!(k=S.n()).done;)E=je(k.value,2),O=E[0],j=E[1],O.endsWith(".blg")&&_.push(j)}catch(e){S.e(e)}finally{S.f()}T=0,A=_;case 23:if(!(T<A.length)){e.next=41;break}return P=A[T],e.prev=25,e.next=28,fetch(Me(P,n.pdfDownloadDomain),{signal:r});case 28:return D=e.sent,e.next=31,D.text();case 31:R=e.sent;try{I=new ke(R,{maxErrors:100}).parse(),M=I.errors,L=I.warnings,l({errors:M,warnings:L},"BibTeX:")}catch(e){}e.next=38;break;case 35:e.prev=35,e.t1=e.catch(25),console.warn(e.t1);case 38:T++,e.next=23;break;case 41:return a.logEntries.all=[].concat($e(a.logEntries.errors),$e(a.logEntries.warnings),$e(a.logEntries.typesetting)),e.abrupt("return",a);case 43:case"end":return e.stop()}}),e,null,[[4,16],[25,35]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){De(l,r,a,f,d,"next",e)}function d(e){De(l,r,a,f,d,"throw",e)}f(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();function Me(e,t){return e.build&&t?"".concat(t).concat(e.url):"".concat(window.origin).concat(e.url)}function Le(e,t){return e=(e=(e=e.replace(/\/\//g,"/")).replace(/^.*\/compiles\/[0-9a-f]{24}(-[0-9a-f]{24})?\/(\.\/)?/,"")).replace(/^\/compile\//,""),t&&(e=e.replace(/^\.\//,t+"/")),e}function Ne(e){return Re.test(e.message)}var Fe=n(14951),qe=n(32025);n(43430),n(44112);function Be(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var He=["bbl","gls","ind"],ze=["output.fls","output.fdb_latexmk"],Ve=function(e,t,n){var r={top:[],other:[]};if(e){var a=new URLSearchParams;t&&a.set("clsiserverid",t),n&&a.set("compileGroup",n);var l,f=a.toString(),d=[],h=Be(e.values());try{for(h.s();!(l=h.n()).done;){var p=l.value;ze.includes(p.path)||(p.main=p.path.startsWith("output."),f.length&&(p.url+="?".concat(f)),d.push(p))}}catch(e){h.e(e)}finally{h.f()}d.sort((function(e,t){return e.main&&!t.main?-1:t.main&&!e.main?1:e.path.localeCompare(t.path,void 0,{numeric:!0})}));for(var y=0,w=d;y<w.length;y++){var x=w[y];He.includes(x.type)?r.top.push(x):"pdf"===x.type&&!0===x.main||r.other.push(x)}}return r},We=n(86701),Ze=n(33592),Ge=n(52322);function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||Ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){if(e){if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(e,t):void 0}}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Je=(0,r.createContext)(),Qe={value:l().shape({autoCompile:l().bool.isRequired,clearingCache:l().bool.isRequired,clsiServerId:l().string,codeCheckFailed:l().bool.isRequired,compiling:l().bool.isRequired,deliveryLatencies:l().object.isRequired,draft:l().bool.isRequired,error:l().string,fileList:l().object,hasChanges:l().bool.isRequired,highlights:l().arrayOf(l().object),logEntries:l().object,logEntryAnnotations:l().object,pdfDownloadUrl:l().string,pdfFile:l().object,pdfUrl:l().string,pdfViewer:l().string,position:l().object,rawLog:l().string,setAutoCompile:l().func.isRequired,setDraft:l().func.isRequired,setError:l().func.isRequired,setHasLintingError:l().func.isRequired,setHighlights:l().func.isRequired,setPosition:l().func.isRequired,setShowCompileTimeWarning:l().func.isRequired,setShowLogs:l().func.isRequired,toggleLogs:l().func.isRequired,setStopOnFirstError:l().func.isRequired,setStopOnValidationError:l().func.isRequired,showCompileTimeWarning:l().bool.isRequired,showLogs:l().bool.isRequired,showFasterCompilesFeedbackUI:l().bool.isRequired,stopOnFirstError:l().bool.isRequired,stopOnValidationError:l().bool.isRequired,stoppedOnFirstError:l().bool.isRequired,uncompiled:l().bool,validationIssues:l().object,firstRenderDone:l().func.isRequired,cleanupCompileResult:l().func})};function et(e){var t=e.children,n=(0,d.I)(),a=(0,qe._i)(),l=a.hasPremiumCompile,h=a.isProjectOwner,p=(0,Fe.d2)(),y=p._id,w=p.rootDocId,k=(0,We.l5)().pdfPreviewOpen,C=(0,Ze.SE)().features,E=Ke((0,r.useState)(!1),2),O=E[0],T=E[1],A=Ke((0,r.useState)(!1),2),P=A[0],D=A[1],R=Ke(x("pdf.logEntries"),2),I=R[0],M=R[1],L=Ke((0,f.Z)("pdf.logEntryAnnotations"),2),N=L[0],B=L[1],U=Ke((0,f.Z)("settings.pdfViewer"),1)[0],H=Ke(x("pdf.downloadUrl"),2)[1],z=Ke(x("pdf.url"),2)[1],V=Ke((0,r.useState)(),2),W=V[0],Z=V[1];(0,r.useEffect)((function(){H(null==W?void 0:W.pdfDownloadUrl),z(null==W?void 0:W.pdfUrl)}),[W,H,z]);var G=Ke((0,f.Z)("pdf.uncompiled"),2),K=G[0],Y=G[1],X=Ke((0,r.useState)(!1),2),J=X[0],Q=X[1],ee=Ke((0,r.useState)(),2),te=ee[0],ne=ee[1],re=Ke((0,r.useState)(),2),oe=re[0],ae=re[1],se=Ke((0,r.useState)((function(){return function(){}})),2),le=se[0],ce=se[1],ue=Ke((0,r.useState)({}),2),fe=ue[0],de=ue[1],he=Ke((0,r.useState)(!1),2),pe=he[0],me=he[1],ge=Ke((0,r.useState)(!1),2),ve=ge[0],ye=ge[1],be=Ke((0,r.useState)(!1),2),we=be[0],xe=be[1],_e=Ke((0,r.useState)(!1),2),Se=_e[0],ke=_e[1],Ce=Ke((0,r.useState)(!1),2),Ee=Ce[0],Oe=Ce[1],je=(0,r.useCallback)((function(){xe((function(e){return e||(0,q.sendMBOnce)("ide-open-logs-once"),!e}))}),[xe]),$e=Ke((0,r.useState)(),2),Ae=$e[0],Pe=$e[1],De=Ke((0,r.useState)(),2),Re=De[0],Ne=De[1],Be=Ke((0,r.useState)(),2),Ue=Be[0],He=Be[1],ze=Ke((0,r.useState)(),2),Xe=ze[0],Qe=ze[1],et=Ke((0,r.useState)(),2),tt=et[0],nt=et[1],rt=Ke((0,_.Z)("pdf.position.".concat(y)),2),it=rt[0],ot=rt[1],at=Ke((0,_.Z)("autocompile_enabled:".concat(y),!1,!0),2),st=at[0],lt=at[1],ct=Ke((0,_.Z)("draft:".concat(y),!1,!0),2),ut=ct[0],ft=ct[1],dt=Ke((0,_.Z)("stop_on_first_error:".concat(y),!1,!0),2),ht=dt[0],pt=dt[1],mt=Ke((0,r.useState)(!1),2),gt=mt[0],vt=mt[1],yt=Ke((0,_.Z)("stop_on_validation_error:".concat(y),!0,!0),2),bt=yt[0],wt=yt[1],xt=Ke((0,f.Z)("editor.sharejs_doc"),1)[0],_t=Ke((0,f.Z)("hasLintingError"),2),St=_t[0],kt=_t[1],Ct=Ke((0,f.Z)("settings.syntaxValidation"),1)[0],Et=Ke((0,r.useState)(0),2),Ot=Et[0],jt=Et[1],$t=Ke((0,r.useState)(0),2),Tt=$t[0],At=$t[1],Pt=(0,S.Z)().signal,Dt=(0,r.useCallback)((function(){Z(null),M(null),B({})}),[Z,M,B]),Rt=(0,r.useRef)(!1);(0,r.useEffect)((function(){Rt.current=O}),[O]);var It=Ke((0,r.useState)((function(){return new F({projectId:y,rootDocId:w,setChangedAt:jt,setSavedAt:At,setCompiling:T,setData:ae,setFirstRenderDone:ce,setDeliveryLatencies:de,setError:Pe,cleanupCompileResult:Dt,compilingRef:Rt,signal:Pt})})),1)[0];(0,r.useEffect)((function(){It.currentDoc=xt}),[It,xt]),(0,r.useEffect)((function(){It.setOption("draft",ut)}),[It,ut]),(0,r.useEffect)((function(){It.setOption("stopOnFirstError",ht)}),[It,ht]),(0,r.useEffect)((function(){Y(Ot>0||Tt>0)}),[Y,Ot,Tt]),(0,r.useEffect)((function(){Q(Ot>0)}),[Q,Ot]),(0,r.useEffect)((function(){!pe&&xt&&(me(!0),It.compile({isAutoCompileOnLoad:!0}))}),[pe,xt,It]),(0,r.useEffect)((function(){if((null==C?void 0:C.compileTimeout)<=60&&O&&h){var e=window.setTimeout((function(){D(!0)}),3e4);return function(){window.clearTimeout(e)}}}),[O,h,C]),(0,r.useEffect)((function(){var e=new AbortController;if(oe){if(oe.clsiServerId&&ne(oe.clsiServerId),ke(Boolean(oe.showFasterCompilesFeedbackUI)),oe.outputFiles){var t,r=new Map,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ye(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}(oe.outputFiles);try{for(a.s();!(t=a.n()).done;){var f=t.value;r.set(f.path,f)}}catch(e){a.e(e)}finally{a.f()}"success"===oe.status&&Z(function(e,t,n){var r=e.get("output.pdf");if(!r)return null;var a=new URLSearchParams({compileGroup:n.compileGroup});return n.clsiServerId&&a.set("clsiserverid",n.clsiServerId),j.ns&&a.set("enable_pdf_caching","true"),r.pdfUrl="".concat(Me(r,n.pdfDownloadDomain),"?").concat(a),a.set("popupDownload","true"),r.pdfDownloadUrl="/download/project/".concat(t,"/build/").concat(r.build,"/output/output.pdf?").concat(a),r}(r,y,oe)),Ne(Ve(r,oe.clsiServerId,oe.compileGroup)),B(null),M(null),He(null),Ie(r,oe,e.signal).then((function(e){He(e.log),M(e.logEntries),B(function(e,t){var n,r=t.getRootDocDirname(),a={},l=Te(e);try{for(l.s();!(n=l.n()).done;){var f=n.value;if(f.file){f.file=Le(f.file,r);var d=t.findEntityByPath(f.file);d&&(d.id in a||(a[d.id]=[]),a[d.id].push({row:f.line-1,type:"error"===f.level?"error":"warning",text:f.message,source:"compile"}))}}}catch(e){l.e(e)}finally{l.f()}return a}(e.logEntries.all,n.fileTreeManager)),!window.user.alphaProgram&&["success","stopped-on-first-error"].includes(oe.status)&&(0,q.sendMBSampled)("compile-result",{errors:e.logEntries.errors.length,warnings:e.logEntries.warnings.length,typesetting:e.logEntries.typesetting.length,newPdfPreview:!0,stopOnFirstError:oe.options.stopOnFirstError},.01)}))}switch(oe.status){case"success":Pe(void 0),xe(!1);break;case"stopped-on-first-error":Pe(void 0),xe(!0);break;case"clsi-maintenance":case"compile-in-progress":case"exited":case"failure":case"project-too-large":case"rate-limited":case"terminated":case"too-recently-compiled":Pe(oe.status);break;case"timedout":Pe("timedout"),!l&&h&&(0,q.send)("subscription-funnel","editor-click-feature","compile-timeout");break;case"autocompile-backoff":oe.options.isAutoCompileOnLoad||(Pe("autocompile-disabled"),lt(!1));break;case"unavailable":Pe("clsi-unavailable");break;case"validation-problems":Pe("validation-problems"),Qe(oe.validationProblems);break;default:Pe("error")}vt("stopped-on-first-error"===oe.status)}return function(){e.abort()}}),[oe,n,l,h,y,lt,ne,M,B,Z]),(0,r.useEffect)((function(){Ae&&xe(!0)}),[Ae]);var Mt=Boolean(st&&Ct&&St),Lt=bt&&Mt,Nt=Boolean(st&&k&&!Lt),Ft=Boolean(Nt&&K&&pe);(0,r.useEffect)((function(){Nt?(Ot>0||Tt>0)&&It.debouncedAutoCompile():It.debouncedAutoCompile.cancel()}),[It,Nt,Ot,Tt]),(0,r.useEffect)((function(){return function(){It.debouncedAutoCompile.cancel()}}),[It]);var qt=(0,r.useCallback)((function(e){It.compile(e)}),[It]),Bt=(0,r.useCallback)((function(){It.stopCompile()}),[It]),Ut=(0,r.useCallback)((function(){return ye(!0),It.clearCache().then((function(){Ne(void 0),Z(void 0)})).finally((function(){ye(!1)}))}),[It]),Ht=(0,r.useCallback)((function(e){var t,r,a=n.fileTreeManager.findEntityByPath(e.file);a&&"doc"===a.type&&n.editorManager.openDoc(a,{gotoLine:null!==(t=e.line)&&void 0!==t?t:void 0,gotoColumn:null!==(r=e.column)&&void 0!==r?r:void 0})}),[n]),zt=(0,r.useCallback)((function(){Ut().then((function(){It.compile()}))}),[Ut,It]),Vt=(0,r.useMemo)((function(){return(null==oe?void 0:oe.options)||{}}),[oe]),Wt=(0,r.useMemo)((function(){return{animateCompileDropdownArrow:Ee,autoCompile:st,clearCache:Ut,clearingCache:ve,clsiServerId:te,codeCheckFailed:Lt,compiling:O,deliveryLatencies:fe,draft:ut,editedSinceCompileStarted:J,error:Ae,fileList:Re,hasChanges:Ft,highlights:tt,lastCompileOptions:Vt,logEntryAnnotations:N,logEntries:I,pdfDownloadUrl:null==W?void 0:W.pdfDownloadUrl,pdfFile:W,pdfUrl:null==W?void 0:W.pdfUrl,pdfViewer:U,position:it,rawLog:Ue,recompileFromScratch:zt,setAnimateCompileDropdownArrow:Oe,setAutoCompile:lt,setCompiling:T,setDraft:ft,setError:Pe,setHasLintingError:kt,setHighlights:nt,setPosition:ot,showCompileTimeWarning:P,setShowCompileTimeWarning:D,setShowLogs:xe,toggleLogs:je,setStopOnFirstError:pt,setStopOnValidationError:wt,showLogs:we,showFasterCompilesFeedbackUI:Se,startCompile:qt,stopCompile:Bt,stopOnFirstError:ht,stopOnValidationError:bt,stoppedOnFirstError:gt,uncompiled:K,validationIssues:Xe,firstRenderDone:le,setChangedAt:jt,setSavedAt:At,cleanupCompileResult:Dt,syncToEntry:Ht}}),[Ee,st,Ut,ve,te,Lt,O,fe,ut,J,Ae,Re,Ft,tt,Vt,I,N,it,W,U,Ue,zt,Oe,lt,ft,Pe,kt,nt,ot,D,pt,wt,P,we,Se,qt,Bt,ht,bt,gt,K,Xe,le,jt,At,Dt,xe,je,Ht]);return(0,Ge.jsx)(Je.Provider,{value:Wt,children:t})}function tt(e){var t=(0,r.useContext)(Je);return l().checkPropTypes(e,t,"data","LocalCompileContext.Provider"),t}Je.Provider.propTypes=Qe,et.propTypes={children:l().any}},14951:function(e,t,n){"use strict";n.d(t,{E_:function(){return w},d2:function(){return x},jI:function(){return S}});n(71372),n(26936),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(27233),n(77950),n(21850);var r=n(2784),a=n(13980),l=n.n(a),f=n(37246),d=n(52322);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=(0,r.createContext)(),w={_id:l().string.isRequired,name:l().string.isRequired,rootDocId:l().string,members:l().arrayOf(l().shape({_id:l().string.isRequired})),invites:l().arrayOf(l().shape({_id:l().string.isRequired})),features:l().shape({collaborators:l().number,compileGroup:l().oneOf(["alpha","standard","priority"]),trackChangesVisible:l().bool,references:l().bool,mendeley:l().bool,zotero:l().bool,versioning:l().bool}),publicAccessLevel:l().string,tokens:l().shape({readOnly:l().string,readAndWrite:l().string}),owner:l().shape({_id:l().string.isRequired,email:l().string.isRequired})};function x(e){var t=(0,r.useContext)(y);if(!t)throw new Error("useProjectContext is only available inside ProjectProvider");return l().checkPropTypes(e,t,"data","ProjectContext.Provider"),t}y.Provider.propTypes={value:l().shape(w)};var _={_id:window.project_id,name:"",features:{}};function S(e){var t=e.children,n=h((0,f.Z)("project",!0),1)[0]||_,a=n._id,l=n.name,p=n.rootDoc_id,w=n.members,x=n.invites,S=n.features,k=n.publicAccesLevel,C=n.tokens,E=n.owner,O=(0,r.useMemo)((function(){return{_id:a,name:l,rootDocId:p,members:w,invites:x,features:S,publicAccessLevel:k,tokens:C,owner:E}}),[a,l,p,w,x,S,k,C,E]);return(0,d.jsx)(y.Provider,{value:O,children:t})}S.propTypes={children:l().any}},40687:function(e,t,n){"use strict";n.d(t,{_8:function(){return p},yW:function(){return y}});var r=n(2784),a=n(13980),l=n.n(a),f=n(99618),d=n(52322),h=(0,r.createContext)();function p(e){var t=e.children,n=(0,r.useMemo)((function(){return{splitTestVariants:(0,f.Z)("ol-splitTestVariants")||{},splitTestInfo:(0,f.Z)("ol-splitTestInfo")||{}}}),[]);return(0,d.jsx)(h.Provider,{value:n,children:t})}function y(e){var t=(0,r.useContext)(h);return l().checkPropTypes(e,t,"data","SplitTestContext.Provider"),t}h.Provider.propTypes={value:l().shape({splitTestVariants:l().object.isRequired,splitTestInfo:l().object.isRequired})},p.propTypes={children:l().any}},33592:function(e,t,n){"use strict";n.d(t,{SE:function(){return y},dr:function(){return p}});n(71372);var r=n(2784),a=n(13980),l=n.n(a),f=n(99618),d=n(52322),h=(0,r.createContext)();function p(e){var t=e.children,n=(0,f.Z)("ol-user");return(0,d.jsx)(h.Provider,{value:n,children:t})}function y(e){var t=(0,r.useContext)(h);if(!t)throw new Error("useUserContext is only available inside UserContext, or `ol-user` meta is not defined");return l().checkPropTypes(e,t,"data","UserContext.Provider"),t}h.Provider.propTypes={value:l().shape({user:l().shape({id:l().string,isAdmin:l().boolean,email:l().string,allowedFreeTrial:l().boolean,first_name:l().string,last_name:l().string,alphaProgram:l().boolean,betaProgram:l().boolean,labsProgram:l().boolean,features:l().shape({dropbox:l().boolean,github:l().boolean,mendeley:l().boolean,zotero:l().boolean,references:l().boolean,compileTimeout:l().number}),refProviders:l().shape({mendeley:l().any,zotero:l().any})})})},p.propTypes={children:l().any}},30286:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372),n(46533);var r=n(2784);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){var e=a((0,r.useState)((function(){return new AbortController})),1)[0];return(0,r.useEffect)((function(){return function(){e.abort()}}),[e]),e}},73091:function(e,t,n){"use strict";n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f,d=!1,h="";function p(e){document.hasFocus()||d||(h=window.document.title,window.document.title=e,d=!0,f=setInterval((function(){window.document.title===h?window.document.title=e:window.document.title=h}),800))}function y(){d&&(clearInterval(f),window.document.title=h,h="",d=!1)}function w(e){d?h=e:window.document.title=e}t.Z=function(){var e=a((0,r.useState)(document.hasFocus()),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){function e(){n(!0)}function t(){n(!1)}return window.addEventListener("focus",e),window.addEventListener("blur",t),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}),[]),{hasFocus:t,flashTitle:p,stopFlashingTitle:y,setTitle:w}}},65073:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=a((0,r.useState)(e),2),l=n[0],f=n[1];return(0,r.useEffect)((function(){var n=window.setTimeout((function(){f(e)}),t);return function(){window.clearTimeout(n)}}),[e,t]),l}},92242:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(2784),a=n(76635),l=n.n(a);function f(e,t){var n=(0,r.useRef)();return(0,r.useEffect)((function(){l().isEqual(t,n.current)||(n.current=t,e())}),t)}},83976:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});n(18178),n(26936),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(27233),n(32501),n(77950),n(21850),n(71372);var r=n(2784),a=n(11528);function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,n(99618).Z)("ol-debugPdfDetach");function h(e,t,n,f){var h=(0,a.JY)(),p=h.role,y=h.broadcastEvent,w=h.addEventHandler,x=h.deleteEventHandler,_="action-".concat(e),S=(0,r.useCallback)((function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];p===n?y(_,{args:r}):t.apply(void 0,r)}),[p,n,_,t,y]),k=(0,r.useCallback)((function(e){e.event===_&&p===f&&(d&&console.log("Do ".concat(t.name," on event ").concat(_)),t.apply(void 0,l(e.data.args)))}),[p,f,_,t]);return(0,r.useEffect)((function(){return w(k),function(){return x(k)}}),[w,x,k]),S}},69565:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});n(18178),n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784),a=n(11528);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,n(99618).Z)("ol-debugPdfDetach");function h(e,t,n,f){var h=l((0,r.useState)(t),2),p=h[0],y=h[1],w=(0,a.JY)(),x=w.role,_=w.broadcastEvent,S=w.lastDetachedConnectedAt,k=w.addEventHandler,C=w.deleteEventHandler,E="state-".concat(e);(0,r.useEffect)((function(){x===n&&_(E,{value:p})}),[x,n,E,p,_,S]);var O=(0,r.useCallback)((function(e){e.event===E&&x===f&&(d&&console.log("Set ".concat(e.data.value," for ").concat(E)),y(e.data.value))}),[x,f,E,y]);return(0,r.useEffect)((function(){return k(O),function(){return C(O)}}),[k,C,O]),[p,y]}},47417:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784),a=n(28316);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=l((0,r.useState)(e),2),n=t[0],f=t[1],d=(0,r.useRef)(null),h=(0,r.useCallback)((function(e){e&&(d.current=(0,a.findDOMNode)(e))}),[d]),p=(0,r.useCallback)((function(e){e.stopPropagation()}),[]),y=(0,r.useCallback)((function(e){f(e)}),[]),w=(0,r.useCallback)((function(e){d.current&&!d.current.contains(e.target)&&f(!1)}),[d]);return(0,r.useEffect)((function(){return n&&document.addEventListener("mousedown",w),function(){document.removeEventListener("mousedown",w)}}),[n,w]),{ref:h,onClick:p,onToggle:y,open:n}}},32687:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2784);function a(e,t){(0,r.useEffect)((function(){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}}),[e,t])}},49169:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2784);function a(){var e=(0,r.useRef)(!1);return(0,r.useLayoutEffect)((function(){return e.current=!0,function(){e.current=!1}}),[e]),e}},18977:function(e,t,n){"use strict";n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784),a=n(76635),l=n.n(a),f=n(76066);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=d((0,r.useState)((function(){var n;return null!==(n=f.Z.getItem(e))&&void 0!==n?n:t})),2),h=a[0],p=a[1],y=(0,r.useCallback)((function(n){p((function(r){var a=l().isFunction(n)?n(r):n;return a===t?f.Z.removeItem(e):f.Z.setItem(e,a),a}))}),[e,t]);return(0,r.useEffect)((function(){if(n){var r=function(n){var r;n.key===e&&p(null!==(r=f.Z.getItem(e))&&void 0!==r?r:t)};return window.addEventListener("storage",r),function(){window.removeEventListener("storage",r)}}}),[e,n,t]),[h,y]}},44694:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2784);function a(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e})),t.current}},25897:function(e,t,n){"use strict";n.d(t,{y:function(){return f}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=(0,r.useRef)(null),n=(0,r.useCallback)((function(n){if(n&&"ResizeObserver"in window){t.current&&t.current.observer.unobserve(t.current.element);var r=new ResizeObserver((function(t){var n=a(t,1)[0];e(n.target)}));t.current={element:n,observer:r},r.observe(n),e(n)}}),[e]);return(0,r.useEffect)((function(){return function(){t.current&&t.current.observer.unobserve(t.current.element)}}),[]),n}},51294:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(2784),a=n(61917);function l(e,t){var n=(0,a.I)().$scope;(0,r.useEffect)((function(){return n.$on(e,t)}),[n,e,t])}},37246:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(36728),n(32501),n(26936),n(27233),n(77950),n(21850),n(71372);var r=n(2784),a=n(76635),l=n.n(a),f=n(61917);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,f.I)().$scope,a=d((0,r.useState)((function(){return l().get(n,e)})),2),h=a[0],p=a[1];return(0,r.useEffect)((function(){return n.$watch(e,(function(e){p((function(){return t?l().cloneDeep(e):e}))}),t)}),[e,n,t]),[h,(0,r.useCallback)((function(t){p((function(r){var a=l().isFunction(t)?t(r):t;return n.$applyAsync((function(){return l().set(n,e,a)})),a}))}),[e,n])]}},34097:function(e,t,n){"use strict";function r(){return!!document.querySelector("grammarly-desktop-integration")}n.d(t,{Z:function(){return r}})},79862:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});n(15735),n(58188),n(28673),n(6886),n(14121),n(60523),n(77950),n(85940);function r(e){var t=new URL(window.location),n=t.pathname.replace(/\/(detached|detacher)\/?$/,"").replace(/\/$/,"");return e&&(n+="/".concat(e)),t.pathname=n,t}},8846:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});n(58188),n(1939);function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){return null==e?void 0:e.apply(void 0,n)}))}}},99618:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});n(15735),n(79321),n(58188),n(28673),n(6886),n(1939),n(43430),n(43450),n(27233),n(26936),n(32501);var r=n(76635),a=n.n(r);function l(e,t){if(window.metaAttributesCache.has(e))return window.metaAttributesCache.get(e);var n=document.head.querySelector('meta[name="'.concat(e,'"]'));if(!n)return t;var r,a=n.content;switch(n.dataset.type){case"boolean":r=n.hasAttribute("content");break;case"json":r=a?JSON.parse(a):void 0;break;default:r=a}return window.metaAttributesCache.set(e,r),r}window.metaAttributesCache=window.metaAttributesCache||new Map,window.data=window.data||{},Array.from(document.querySelectorAll('meta[name^="ol-"]')).map((function(e){return e.name})).sort().forEach((function(e){var t=e.slice("ol-".length);a().set(window,t,l(e)),a().set(window.data,t,l(e))}))},8140:function(e,t,n){n(31766)},31766:function(e,t,n){"use strict";n.r(t);n(77950),n(85940),n(36728),n(18178),n(32501),n(58188),n(26936),n(27233),n(28673),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372);var r=n(27481);n(28939);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,d=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return d=e.done,e},e:function(e){h=!0,f=e},f:function(){try{d||null==n.return||n.return()}finally{if(h)throw f}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}r.Z.controller("ContactModal",["$scope","$modal","sessionStorage",function(e,t,n){n("contact-form.user-input",null),e.contactUsModal=function(){t.open({templateUrl:"contactModalTemplate",controller:"ContactModalController",scope:e})}}]),r.Z.controller("ContactGeneralModal",["$scope","$modal","sessionStorage",function(e,t,n){n("contact-form.user-input",null),e.openModal=function(){t.open({templateUrl:"contactGeneralModalTemplate",controller:"ContactGeneralModalController"})}}]),r.Z.controller("ContactModalController",["$scope","$modalInstance",function(e,t){return e.close=function(){return t.close()}}]),r.Z.controller("ContactGeneralModalController",["$scope","$modalInstance",function(e,t){return e.close=function(){return t.close()}}]),t.default=r.Z.controller("ContactFormController",["$scope","algoliaSearch","eventTracking","$http","sessionStorage",function(e,t,n,r,l){var f=l("contact-form.user-input");f?e.form=f:(e.form={email:""},window.project_id&&(e.form.project_url=window.location.href)),e.sent=!1,e.sending=!1,e.suggestions=[],e.form.important_message="",e.$on("modal.closing",(function(){e.sent?l("contact-form.user-input",null):l("contact-form.user-input",{subject:e.form.subject,message:e.form.message,project_url:e.form.project_url})}));var d=function(t,r){var l=function(){var e,t=[],n=a(r.hits);try{for(n.s();!(e=n.n()).done;){var l=e.value,f=l&&l.pageName?l.pageName.replace(/\s/g,"_"):void 0,d=encodeURIComponent(f),h=l.kb?"how-to":"latex",p=l.sectionName&&""!==l.sectionName,y=p?"#".concat(l.sectionName.replace(/\s/g,"_")):"",w=l._highlightResult.pageName.value;p&&(w+=" - "+l.sectionName),t.push({url:"/learn/".concat(h,"/").concat(d).concat(y),name:w})}}catch(e){n.e(e)}finally{n.f()}return t}();r.hits.length&&n.sendMB("contact-form-suggestions-shown"),e.$applyAsync((function(){return e.suggestions=l}))};e.contactUs=function(){if(e.form.email){e.sending=!0;var t={_csrf:window.csrfToken,email:e.form.email,message:e.form.message,projectUrl:e.form.project_url,subject:e.form.subject,inbox:e.inbox||"support",important_message:e.form.important_message},n=r.post("/support",t);n.then((function(t){return e.sent=!0})),n.catch((function(){e.error=!0,e.sending=!1,console.log("the request failed")}))}else console.log("email not set")},e.$watch("inbox",(function(t){return e.inbox}))();var h=e.$watch("showContactFormSuggestions",(function(e){null!=e&&(!0===e&&p(),h())})),p=function(){return e.$watch("form.subject",(function(n,r){n&&n!==r&&n.length>3?t.searchWiki(n,{hitsPerPage:3,typoTolerance:"strict"},d):e.suggestions=[]}))};e.clickSuggestionLink=function(e){n.sendMB("contact-form-suggestions-clicked",{url:e})}}])},61572:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});var r=[{category:"Greek",command:"\\alpha",codepoint:"U+1D6FC",description:"Lowercase Greek letter alpha",aliases:["a","α"],notes:""},{category:"Greek",command:"\\beta",codepoint:"U+1D6FD",description:"Lowercase Greek letter beta",aliases:["b","β"],notes:""},{category:"Greek",command:"\\gamma",codepoint:"U+1D6FE",description:"Lowercase Greek letter gamma",aliases:["γ"],notes:""},{category:"Greek",command:"\\delta",codepoint:"U+1D6FF",description:"Lowercase Greek letter delta",aliases:["δ"],notes:""},{category:"Greek",command:"\\varepsilon",codepoint:"U+1D700",description:"Lowercase Greek letter epsilon, varepsilon",aliases:["ε"],notes:""},{category:"Greek",command:"\\epsilon",codepoint:"U+1D716",description:"Lowercase Greek letter epsilon lunate",aliases:["ε"],notes:""},{category:"Greek",command:"\\zeta",codepoint:"U+1D701",description:"Lowercase Greek letter zeta",aliases:["ζ"],notes:""},{category:"Greek",command:"\\eta",codepoint:"U+1D702",description:"Lowercase Greek letter eta",aliases:["η"],notes:""},{category:"Greek",command:"\\vartheta",codepoint:"U+1D717",description:"Lowercase Greek letter curly theta, vartheta",aliases:["θ"],notes:""},{category:"Greek",command:"\\theta",codepoint:"U+1D703",description:"Lowercase Greek letter theta",aliases:["θ"],notes:""},{category:"Greek",command:"\\iota",codepoint:"U+1D704",description:"Lowercase Greek letter iota",aliases:["ι"],notes:""},{category:"Greek",command:"\\kappa",codepoint:"U+1D705",description:"Lowercase Greek letter kappa",aliases:["κ"],notes:""},{category:"Greek",command:"\\lambda",codepoint:"U+1D706",description:"Lowercase Greek letter lambda",aliases:["λ"],notes:""},{category:"Greek",command:"\\mu",codepoint:"U+1D707",description:"Lowercase Greek letter mu",aliases:["μ"],notes:""},{category:"Greek",command:"\\nu",codepoint:"U+1D708",description:"Lowercase Greek letter nu",aliases:["ν"],notes:""},{category:"Greek",command:"\\xi",codepoint:"U+1D709",description:"Lowercase Greek letter xi",aliases:["ξ"],notes:""},{category:"Greek",command:"\\pi",codepoint:"U+1D70B",description:"Lowercase Greek letter pi",aliases:["π"],notes:""},{category:"Greek",command:"\\varrho",codepoint:"U+1D71A",description:"Lowercase Greek letter rho, varrho",aliases:["ρ"],notes:""},{category:"Greek",command:"\\rho",codepoint:"U+1D70C",description:"Lowercase Greek letter rho",aliases:["ρ"],notes:""},{category:"Greek",command:"\\sigma",codepoint:"U+1D70E",description:"Lowercase Greek letter sigma",aliases:["σ"],notes:""},{category:"Greek",command:"\\varsigma",codepoint:"U+1D70D",description:"Lowercase Greek letter final sigma, varsigma",aliases:["ς"],notes:""},{category:"Greek",command:"\\tau",codepoint:"U+1D70F",description:"Lowercase Greek letter tau",aliases:["τ"],notes:""},{category:"Greek",command:"\\upsilon",codepoint:"U+1D710",description:"Lowercase Greek letter upsilon",aliases:["υ"],notes:""},{category:"Greek",command:"\\phi",codepoint:"U+1D719",description:"Lowercase Greek letter phi",aliases:["φ"],notes:""},{category:"Greek",command:"\\varphi",codepoint:"U+1D711",description:"Lowercase Greek letter phi, varphi",aliases:["φ"],notes:""},{category:"Greek",command:"\\chi",codepoint:"U+1D712",description:"Lowercase Greek letter chi",aliases:["χ"],notes:""},{category:"Greek",command:"\\psi",codepoint:"U+1D713",description:"Lowercase Greek letter psi",aliases:["ψ"],notes:""},{category:"Greek",command:"\\omega",codepoint:"U+1D714",description:"Lowercase Greek letter omega",aliases:["ω"],notes:""},{category:"Greek",command:"\\Gamma",codepoint:"U+00393",description:"Uppercase Greek letter Gamma",aliases:["Γ"],notes:""},{category:"Greek",command:"\\Delta",codepoint:"U+00394",description:"Uppercase Greek letter Delta",aliases:["Δ"],notes:""},{category:"Greek",command:"\\Theta",codepoint:"U+00398",description:"Uppercase Greek letter Theta",aliases:["Θ"],notes:""},{category:"Greek",command:"\\Lambda",codepoint:"U+0039B",description:"Uppercase Greek letter Lambda",aliases:["Λ"],notes:""},{category:"Greek",command:"\\Xi",codepoint:"U+0039E",description:"Uppercase Greek letter Xi",aliases:["Ξ"],notes:""},{category:"Greek",command:"\\Pi",codepoint:"U+003A0",description:"Uppercase Greek letter Pi",aliases:["Π"],notes:"Use \\prod for the product."},{category:"Greek",command:"\\Sigma",codepoint:"U+003A3",description:"Uppercase Greek letter Sigma",aliases:["Σ"],notes:"Use \\sum for the sum."},{category:"Greek",command:"\\Upsilon",codepoint:"U+003A5",description:"Uppercase Greek letter Upsilon",aliases:["Υ"],notes:""},{category:"Greek",command:"\\Phi",codepoint:"U+003A6",description:"Uppercase Greek letter Phi",aliases:["Φ"],notes:""},{category:"Greek",command:"\\Psi",codepoint:"U+003A8",description:"Uppercase Greek letter Psi",aliases:["Ψ"],notes:""},{category:"Greek",command:"\\Omega",codepoint:"U+003A9",description:"Uppercase Greek letter Omega",aliases:["Ω"],notes:""},{category:"Relations",command:"\\neq",codepoint:"U+02260",description:"Not equal",aliases:["!="],notes:""},{category:"Relations",command:"\\leq",codepoint:"U+02264",description:"Less than or equal",aliases:["<="],notes:""},{category:"Relations",command:"\\geq",codepoint:"U+02265",description:"Greater than or equal",aliases:[">="],notes:""},{category:"Relations",command:"\\ll",codepoint:"U+0226A",description:"Much less than",aliases:["<<"],notes:""},{category:"Relations",command:"\\gg",codepoint:"U+0226B",description:"Much greater than",aliases:[">>"],notes:""},{category:"Relations",command:"\\prec",codepoint:"U+0227A",description:"Precedes",notes:""},{category:"Relations",command:"\\succ",codepoint:"U+0227B",description:"Succeeds",notes:""},{category:"Relations",command:"\\in",codepoint:"U+02208",description:"Set membership",notes:""},{category:"Relations",command:"\\notin",codepoint:"U+02209",description:"Negated set membership",notes:""},{category:"Relations",command:"\\ni",codepoint:"U+0220B",description:"Contains",notes:""},{category:"Relations",command:"\\subset",codepoint:"U+02282",description:"Subset",notes:""},{category:"Relations",command:"\\subseteq",codepoint:"U+02286",description:"Subset or equals",notes:""},{category:"Relations",command:"\\supset",codepoint:"U+02283",description:"Superset",notes:""},{category:"Relations",command:"\\simeq",codepoint:"U+02243",description:"Similar",notes:""},{category:"Relations",command:"\\approx",codepoint:"U+02248",description:"Approximate",notes:""},{category:"Relations",command:"\\equiv",codepoint:"U+02261",description:"Identical with",notes:""},{category:"Relations",command:"\\cong",codepoint:"U+02245",description:"Congruent with",notes:""},{category:"Relations",command:"\\mid",codepoint:"U+02223",description:"Mid, divides, vertical bar, modulus, absolute value",notes:"Use \\lvert...\\rvert for the absolute value."},{category:"Relations",command:"\\nmid",codepoint:"U+02224",description:"Negated mid, not divides",notes:"Requires \\usepackage{amssymb}."},{category:"Relations",command:"\\parallel",codepoint:"U+02225",description:"Parallel, double vertical bar, norm",notes:"Use \\lVert...\\rVert for the norm."},{category:"Relations",command:"\\perp",codepoint:"U+027C2",description:"Perpendicular",notes:""},{category:"Operators",command:"\\times",codepoint:"U+000D7",description:"Cross product, multiplication",aliases:["x"],notes:""},{category:"Operators",command:"\\div",codepoint:"U+000F7",description:"Division",notes:""},{category:"Operators",command:"\\cap",codepoint:"U+02229",description:"Intersection",notes:""},{category:"Operators",command:"\\cup",codepoint:"U+0222A",description:"Union",notes:""},{category:"Operators",command:"\\cdot",codepoint:"U+022C5",description:"Dot product, multiplication",notes:""},{category:"Operators",command:"\\cdots",codepoint:"U+022EF",description:"Centered dots",notes:""},{category:"Operators",command:"\\bullet",codepoint:"U+02219",description:"Bullet",notes:""},{category:"Operators",command:"\\circ",codepoint:"U+025E6",description:"Circle",notes:""},{category:"Operators",command:"\\wedge",codepoint:"U+02227",description:"Wedge, logical and",notes:""},{category:"Operators",command:"\\vee",codepoint:"U+02228",description:"Vee, logical or",notes:""},{category:"Operators",command:"\\setminus",codepoint:"U+0005C",description:"Set minus, backslash",notes:"Use \\backslash for a backslash."},{category:"Operators",command:"\\oplus",codepoint:"U+02295",description:"Plus sign in circle",notes:""},{category:"Operators",command:"\\otimes",codepoint:"U+02297",description:"Multiply sign in circle",notes:""},{category:"Operators",command:"\\sum",codepoint:"U+02211",description:"Summation operator",notes:"Use \\Sigma for the letter Sigma."},{category:"Operators",command:"\\prod",codepoint:"U+0220F",description:"Product operator",notes:"Use \\Pi for the letter Pi."},{category:"Operators",command:"\\bigcap",codepoint:"U+022C2",description:"Intersection operator",notes:""},{category:"Operators",command:"\\bigcup",codepoint:"U+022C3",description:"Union operator",notes:""},{category:"Operators",command:"\\int",codepoint:"U+0222B",description:"Integral operator",notes:""},{category:"Operators",command:"\\iint",codepoint:"U+0222C",description:"Double integral operator",notes:"Requires \\usepackage{amsmath}."},{category:"Operators",command:"\\iiint",codepoint:"U+0222D",description:"Triple integral operator",notes:"Requires \\usepackage{amsmath}."},{category:"Arrows",command:"\\leftarrow",codepoint:"U+02190",description:"Leftward arrow",aliases:["<-"],notes:""},{category:"Arrows",command:"\\rightarrow",codepoint:"U+02192",description:"Rightward arrow",aliases:["->"],notes:""},{category:"Arrows",command:"\\leftrightarrow",codepoint:"U+02194",description:"Left and right arrow",aliases:["<->"],notes:""},{category:"Arrows",command:"\\uparrow",codepoint:"U+02191",description:"Upward arrow",notes:""},{category:"Arrows",command:"\\downarrow",codepoint:"U+02193",description:"Downward arrow",notes:""},{category:"Arrows",command:"\\Leftarrow",codepoint:"U+021D0",description:"Is implied by",aliases:["<="],notes:""},{category:"Arrows",command:"\\Rightarrow",codepoint:"U+021D2",description:"Implies",aliases:["=>"],notes:""},{category:"Arrows",command:"\\Leftrightarrow",codepoint:"U+021D4",description:"Left and right double arrow",aliases:["<=>"],notes:""},{category:"Arrows",command:"\\mapsto",codepoint:"U+021A6",description:"Maps to, rightward",notes:""},{category:"Arrows",command:"\\nearrow",codepoint:"U+02197",description:"NE pointing arrow",notes:""},{category:"Arrows",command:"\\searrow",codepoint:"U+02198",description:"SE pointing arrow",notes:""},{category:"Arrows",command:"\\rightleftharpoons",codepoint:"U+021CC",description:"Right harpoon over left",notes:""},{category:"Arrows",command:"\\leftharpoonup",codepoint:"U+021BC",description:"Left harpoon up",notes:""},{category:"Arrows",command:"\\rightharpoonup",codepoint:"U+021C0",description:"Right harpoon up",notes:""},{category:"Arrows",command:"\\leftharpoondown",codepoint:"U+021BD",description:"Left harpoon down",notes:""},{category:"Arrows",command:"\\rightharpoondown",codepoint:"U+021C1",description:"Right harpoon down",notes:""},{category:"Misc",command:"\\infty",codepoint:"U+0221E",description:"Infinity",notes:""},{category:"Misc",command:"\\partial",codepoint:"U+1D715",description:"Partial differential",notes:""},{category:"Misc",command:"\\nabla",codepoint:"U+02207",description:"Nabla, del, hamilton operator",notes:""},{category:"Misc",command:"\\varnothing",codepoint:"U+02300",description:"Empty set",notes:"Requires \\usepackage{amssymb}."},{category:"Misc",command:"\\forall",codepoint:"U+02200",description:"For all",notes:""},{category:"Misc",command:"\\exists",codepoint:"U+02203",description:"There exists",notes:""},{category:"Misc",command:"\\neg",codepoint:"U+000AC",description:"Not sign",notes:""},{category:"Misc",command:"\\Re",codepoint:"U+0211C",description:"Real part",notes:""},{category:"Misc",command:"\\Im",codepoint:"U+02111",description:"Imaginary part",notes:""},{category:"Misc",command:"\\Box",codepoint:"U+025A1",description:"Square",notes:"Requires \\usepackage{amssymb}."},{category:"Misc",command:"\\triangle",codepoint:"U+025B3",description:"Triangle",notes:""},{category:"Misc",command:"\\aleph",codepoint:"U+02135",description:"Hebrew letter aleph",notes:""},{category:"Misc",command:"\\wp",codepoint:"U+02118",description:"Weierstrass letter p",notes:""},{category:"Misc",command:"\\#",codepoint:"U+00023",description:"Number sign, hashtag",notes:""},{category:"Misc",command:"\\$",codepoint:"U+00024",description:"Dollar sign",notes:""},{category:"Misc",command:"\\%",codepoint:"U+00025",description:"Percent sign",notes:""},{category:"Misc",command:"\\&",codepoint:"U+00026",description:"Et sign, and, ampersand",notes:""},{category:"Misc",command:"\\{",codepoint:"U+0007B",description:"Left curly brace",notes:""},{category:"Misc",command:"\\}",codepoint:"U+0007D",description:"Right curly brace",notes:""},{category:"Misc",command:"\\langle",codepoint:"U+027E8",description:"Left angle bracket, bra",notes:""},{category:"Misc",command:"\\rangle",codepoint:"U+027E9",description:"Right angle bracket, ket",notes:""}]},72779:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var l=typeof n;if("string"===l||"number"===l)e.push(n);else if(Array.isArray(n)){if(n.length){var f=a.apply(null,n);f&&e.push(f)}}else if("object"===l)if(n.toString===Object.prototype.toString)for(var d in n)r.call(n,d)&&n[d]&&e.push(d);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},20569:function(e,t,n){"use strict";function r(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function a(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function l(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return a(n.overflowY,t)||a(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function f(e,t,n,r,a,l,f,d){return l<e&&f>t||l>e&&f<t?0:l<=e&&d<=n||f>=t&&d>=n?l-e-r:f>t&&d<n||l<e&&d>n?f-t+a:0}function d(e,t){var n=window,a=t.scrollMode,d=t.block,h=t.inline,p=t.boundary,y=t.skipOverflowHiddenElements,w="function"==typeof p?p:function(e){return e!==p};if(!r(e))throw new TypeError("Invalid target");for(var x=document.scrollingElement||document.documentElement,_=[],S=e;r(S)&&w(S);){if((S=S.parentElement)===x){_.push(S);break}null!=S&&S===document.body&&l(S)&&!l(document.documentElement)||null!=S&&l(S,y)&&_.push(S)}for(var k=n.visualViewport?n.visualViewport.width:innerWidth,C=n.visualViewport?n.visualViewport.height:innerHeight,E=window.scrollX||pageXOffset,O=window.scrollY||pageYOffset,j=e.getBoundingClientRect(),T=j.height,A=j.width,P=j.top,D=j.right,R=j.bottom,I=j.left,M="start"===d||"nearest"===d?P:"end"===d?R:P+T/2,L="center"===h?I+A/2:"end"===h?D:I,N=[],F=0;F<_.length;F++){var q=_[F],B=q.getBoundingClientRect(),U=B.height,H=B.width,z=B.top,V=B.right,W=B.bottom,Z=B.left;if("if-needed"===a&&P>=0&&I>=0&&R<=C&&D<=k&&P>=z&&R<=W&&I>=Z&&D<=V)return N;var G=getComputedStyle(q),K=parseInt(G.borderLeftWidth,10),Y=parseInt(G.borderTopWidth,10),X=parseInt(G.borderRightWidth,10),J=parseInt(G.borderBottomWidth,10),Q=0,ee=0,te="offsetWidth"in q?q.offsetWidth-q.clientWidth-K-X:0,ne="offsetHeight"in q?q.offsetHeight-q.clientHeight-Y-J:0;if(x===q)Q="start"===d?M:"end"===d?M-C:"nearest"===d?f(O,O+C,C,Y,J,O+M,O+M+T,T):M-C/2,ee="start"===h?L:"center"===h?L-k/2:"end"===h?L-k:f(E,E+k,k,K,X,E+L,E+L+A,A),Q=Math.max(0,Q+O),ee=Math.max(0,ee+E);else{Q="start"===d?M-z-Y:"end"===d?M-W+J+ne:"nearest"===d?f(z,W,U,Y,J+ne,M,M+T,T):M-(z+U/2)+ne/2,ee="start"===h?L-Z-K:"center"===h?L-(Z+H/2)+te/2:"end"===h?L-V+X+te:f(Z,V,H,K,X+te,L,L+A,A);var re=q.scrollLeft,oe=q.scrollTop;M+=oe-(Q=Math.max(0,Math.min(oe+Q,q.scrollHeight-U+ne))),L+=re-(ee=Math.max(0,Math.min(re+ee,q.scrollWidth-H+te)))}N.push({el:q,top:Q,left:ee})}return N}n.d(t,{Z:function(){return d}})},77111:function(e,t,n){var r=n(26733),a=n(59821),l=TypeError;e.exports=function(e){if(r(e))return e;throw l(a(e)+" is not a function")}},57988:function(e,t,n){var r=n(82359),a=n(59821),l=TypeError;e.exports=function(e){if(r(e))return e;throw l(a(e)+" is not a constructor")}},88505:function(e,t,n){var r=n(26733),a=String,l=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw l("Can't set "+a(e)+" as a prototype")}},9736:function(e,t,n){var r=n(70095),a=n(22391),l=n(31787).f,f=r("unscopables"),d=Array.prototype;null==d[f]&&l(d,f,{configurable:!0,value:a(null)}),e.exports=function(e){d[f][e]=!0}},36637:function(e,t,n){"use strict";var r=n(30966).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},57728:function(e,t,n){var r=n(91321),a=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw a("Incorrect invocation")}},21176:function(e,t,n){var r=n(85052),a=String,l=TypeError;e.exports=function(e){if(r(e))return e;throw l(a(e)+" is not an object")}},92460:function(e,t,n){var r=n(24229);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},97065:function(e,t,n){"use strict";var r=n(92991),a=n(43231),l=n(39646);e.exports=function(e){for(var t=r(this),n=l(t),f=arguments.length,d=a(f>1?arguments[1]:void 0,n),h=f>2?arguments[2]:void 0,p=void 0===h?n:a(h,n);p>d;)t[d++]=e;return t}},86570:function(e,t,n){"use strict";var r=n(89996).forEach,a=n(96038)("forEach");e.exports=a?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},10507:function(e,t,n){"use strict";var r=n(97636),a=n(20266),l=n(92991),f=n(64960),d=n(91943),h=n(82359),p=n(39646),y=n(62324),w=n(28403),x=n(78830),_=Array;e.exports=function(e){var t=l(e),n=h(this),S=arguments.length,k=S>1?arguments[1]:void 0,C=void 0!==k;C&&(k=r(k,S>2?arguments[2]:void 0));var E,O,j,T,A,P,D=x(t),R=0;if(!D||this===_&&d(D))for(E=p(t),O=n?new this(E):_(E);E>R;R++)P=C?k(t[R],R):t[R],y(O,R,P);else for(A=(T=w(t,D)).next,O=n?new this:[];!(j=a(A,T)).done;R++)P=C?f(T,k,[j.value,R],!0):j.value,y(O,R,P);return O.length=R,O}},19540:function(e,t,n){var r=n(10905),a=n(43231),l=n(39646),f=function(e){return function(t,n,f){var d,h=r(t),p=l(h),y=a(f,p);if(e&&n!=n){for(;p>y;)if((d=h[y++])!=d)return!0}else for(;p>y;y++)if((e||y in h)&&h[y]===n)return e||y||0;return!e&&-1}};e.exports={includes:f(!0),indexOf:f(!1)}},89996:function(e,t,n){var r=n(97636),a=n(65968),l=n(9337),f=n(92991),d=n(39646),h=n(87501),p=a([].push),y=function(e){var t=1==e,n=2==e,a=3==e,y=4==e,w=6==e,x=7==e,_=5==e||w;return function(S,k,C,E){for(var O,j,T=f(S),A=l(T),P=r(k,C),D=d(A),R=0,I=E||h,M=t?I(S,D):n||x?I(S,0):void 0;D>R;R++)if((_||R in A)&&(j=P(O=A[R],R,T),e))if(t)M[R]=j;else if(j)switch(e){case 3:return!0;case 5:return O;case 6:return R;case 2:p(M,O)}else switch(e){case 4:return!1;case 7:p(M,O)}return w?-1:a||y?y:M}};e.exports={forEach:y(0),map:y(1),filter:y(2),some:y(3),every:y(4),find:y(5),findIndex:y(6),filterReject:y(7)}},31460:function(e,t,n){var r=n(24229),a=n(70095),l=n(6358),f=a("species");e.exports=function(e){return l>=51||!r((function(){var t=[];return(t.constructor={})[f]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},96038:function(e,t,n){"use strict";var r=n(24229);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},36554:function(e,t,n){"use strict";var r=n(7400),a=n(33718),l=TypeError,f=Object.getOwnPropertyDescriptor,d=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=d?function(e,t){if(a(e)&&!f(e,"length").writable)throw l("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},69794:function(e,t,n){var r=n(43231),a=n(39646),l=n(62324),f=Array,d=Math.max;e.exports=function(e,t,n){for(var h=a(e),p=r(t,h),y=r(void 0===n?h:n,h),w=f(d(y-p,0)),x=0;p<y;p++,x++)l(w,x,e[p]);return w.length=x,w}},1909:function(e,t,n){var r=n(65968);e.exports=r([].slice)},33867:function(e,t,n){var r=n(69794),a=Math.floor,l=function(e,t){var n=e.length,h=a(n/2);return n<8?f(e,t):d(e,l(r(e,0,h),t),l(r(e,h),t),t)},f=function(e,t){for(var n,r,a=e.length,l=1;l<a;){for(r=l,n=e[l];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==l++&&(e[r]=n)}return e},d=function(e,t,n,r){for(var a=t.length,l=n.length,f=0,d=0;f<a||d<l;)e[f+d]=f<a&&d<l?r(t[f],n[d])<=0?t[f++]:n[d++]:f<a?t[f++]:n[d++];return e};e.exports=l},18760:function(e,t,n){var r=n(33718),a=n(82359),l=n(85052),f=n(70095)("species"),d=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(a(t)&&(t===d||r(t.prototype))||l(t)&&null===(t=t[f]))&&(t=void 0)),void 0===t?d:t}},87501:function(e,t,n){var r=n(18760);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},64960:function(e,t,n){var r=n(21176),a=n(57281);e.exports=function(e,t,n,l){try{return l?t(r(n)[0],n[1]):t(n)}catch(t){a(e,"throw",t)}}},74575:function(e,t,n){var r=n(70095)("iterator"),a=!1;try{var l=0,f={next:function(){return{done:!!l++}},return:function(){a=!0}};f[r]=function(){return this},Array.from(f,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var l={};l[r]=function(){return{next:function(){return{done:n=!0}}}},e(l)}catch(e){}return n}},27079:function(e,t,n){var r=n(65968),a=r({}.toString),l=r("".slice);e.exports=function(e){return l(a(e),8,-1)}},81589:function(e,t,n){var r=n(71601),a=n(26733),l=n(27079),f=n(70095)("toStringTag"),d=Object,h="Arguments"==l(function(){return arguments}());e.exports=r?l:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=d(e),f))?n:h?l(t):"Object"==(r=l(t))&&a(t.callee)?"Arguments":r}},98081:function(e,t,n){"use strict";var r=n(22391),a=n(96616),l=n(8312),f=n(97636),d=n(57728),h=n(9650),p=n(89003),y=n(12707),w=n(33684),x=n(71832),_=n(7400),S=n(95926).fastKey,k=n(56407),C=k.set,E=k.getterFor;e.exports={getConstructor:function(e,t,n,y){var w=e((function(e,a){d(e,x),C(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),_||(e.size=0),h(a)||p(a,e[y],{that:e,AS_ENTRIES:n})})),x=w.prototype,k=E(t),O=function(e,t,n){var r,a,l=k(e),f=j(e,t);return f?f.value=n:(l.last=f={index:a=S(t,!0),key:t,value:n,previous:r=l.last,next:void 0,removed:!1},l.first||(l.first=f),r&&(r.next=f),_?l.size++:e.size++,"F"!==a&&(l.index[a]=f)),e},j=function(e,t){var n,r=k(e),a=S(t);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==t)return n};return l(x,{clear:function(){for(var e=k(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,_?e.size=0:this.size=0},delete:function(e){var t=this,n=k(t),r=j(t,e);if(r){var a=r.next,l=r.previous;delete n.index[r.index],r.removed=!0,l&&(l.next=a),a&&(a.previous=l),n.first==r&&(n.first=a),n.last==r&&(n.last=l),_?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=k(this),r=f(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!j(this,e)}}),l(x,n?{get:function(e){var t=j(this,e);return t&&t.value},set:function(e,t){return O(this,0===e?0:e,t)}}:{add:function(e){return O(this,e=0===e?0:e,e)}}),_&&a(x,"size",{configurable:!0,get:function(){return k(this).size}}),w},setStrong:function(e,t,n){var r=t+" Iterator",a=E(t),l=E(r);y(e,t,(function(e,t){C(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=l(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?w("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,w(void 0,!0))}),n?"entries":"values",!n,!0),x(t)}}},69789:function(e,t,n){"use strict";var r=n(23103),a=n(9859),l=n(65968),f=n(46541),d=n(14768),h=n(95926),p=n(89003),y=n(57728),w=n(26733),x=n(9650),_=n(85052),S=n(24229),k=n(74575),C=n(54555),E=n(20835);e.exports=function(e,t,n){var O=-1!==e.indexOf("Map"),j=-1!==e.indexOf("Weak"),T=O?"set":"add",A=a[e],P=A&&A.prototype,D=A,R={},I=function(e){var t=l(P[e]);d(P,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(j&&!_(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return j&&!_(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(j&&!_(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(f(e,!w(A)||!(j||P.forEach&&!S((function(){(new A).entries().next()})))))D=n.getConstructor(t,e,O,T),h.enable();else if(f(e,!0)){var M=new D,L=M[T](j?{}:-0,1)!=M,N=S((function(){M.has(1)})),F=k((function(e){new A(e)})),q=!j&&S((function(){for(var e=new A,t=5;t--;)e[T](t,t);return!e.has(-0)}));F||((D=t((function(e,t){y(e,P);var n=E(new A,e,D);return x(t)||p(t,n[T],{that:n,AS_ENTRIES:O}),n}))).prototype=P,P.constructor=D),(N||q)&&(I("delete"),I("has"),O&&I("get")),(q||L)&&I(T),j&&P.clear&&delete P.clear}return R[e]=D,r({global:!0,constructor:!0,forced:D!=A},R),C(D,e),j||n.setStrong(D,e,O),D}},77081:function(e,t,n){var r=n(98270),a=n(4826),l=n(97933),f=n(31787);e.exports=function(e,t,n){for(var d=a(t),h=f.f,p=l.f,y=0;y<d.length;y++){var w=d[y];r(e,w)||n&&r(n,w)||h(e,w,p(t,w))}}},48127:function(e,t,n){var r=n(70095)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},27528:function(e,t,n){var r=n(24229);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},81720:function(e,t,n){var r=n(65968),a=n(58885),l=n(83326),f=/"/g,d=r("".replace);e.exports=function(e,t,n,r){var h=l(a(e)),p="<"+t;return""!==n&&(p+=" "+n+'="'+d(l(r),f,"&quot;")+'"'),p+">"+h+"</"+t+">"}},33684:function(e){e.exports=function(e,t){return{value:e,done:t}}},75762:function(e,t,n){var r=n(7400),a=n(31787),l=n(65358);e.exports=r?function(e,t,n){return a.f(e,t,l(1,n))}:function(e,t,n){return e[t]=n,e}},65358:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},62324:function(e,t,n){"use strict";var r=n(39310),a=n(31787),l=n(65358);e.exports=function(e,t,n){var f=r(t);f in e?a.f(e,f,l(0,n)):e[f]=n}},19778:function(e,t,n){"use strict";var r=n(21176),a=n(32914),l=TypeError;e.exports=function(e){if(r(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw l("Incorrect hint");return a(this,e)}},96616:function(e,t,n){var r=n(16039),a=n(31787);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),a.f(e,t,n)}},14768:function(e,t,n){var r=n(26733),a=n(31787),l=n(16039),f=n(18400);e.exports=function(e,t,n,d){d||(d={});var h=d.enumerable,p=void 0!==d.name?d.name:t;if(r(n)&&l(n,p,d),d.global)h?e[t]=n:f(t,n);else{try{d.unsafe?e[t]&&(h=!0):delete e[t]}catch(e){}h?e[t]=n:a.f(e,t,{value:n,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return e}},8312:function(e,t,n){var r=n(14768);e.exports=function(e,t,n){for(var a in t)r(e,a,t[a],n);return e}},18400:function(e,t,n){var r=n(9859),a=Object.defineProperty;e.exports=function(e,t){try{a(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},79563:function(e,t,n){"use strict";var r=n(59821),a=TypeError;e.exports=function(e,t){if(!delete e[t])throw a("Cannot delete property "+r(t)+" of "+r(e))}},7400:function(e,t,n){var r=n(24229);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},63777:function(e){var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},22635:function(e,t,n){var r=n(9859),a=n(85052),l=r.document,f=a(l)&&a(l.createElement);e.exports=function(e){return f?l.createElement(e):{}}},13064:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},95694:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},18865:function(e,t,n){var r=n(22635)("span").classList,a=r&&r.constructor&&r.constructor.prototype;e.exports=a===Object.prototype?void 0:a},22671:function(e,t,n){var r=n(80598).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},48639:function(e,t,n){var r=n(95189),a=n(28801);e.exports=!r&&!a&&"object"==typeof window&&"object"==typeof document},95189:function(e){e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},48506:function(e,t,n){var r=n(80598);e.exports=/MSIE|Trident/.test(r)},8983:function(e,t,n){var r=n(80598);e.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},32023:function(e,t,n){var r=n(80598);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},28801:function(e,t,n){var r=n(27079);e.exports="undefined"!=typeof process&&"process"==r(process)},10263:function(e,t,n){var r=n(80598);e.exports=/web0s(?!.*chrome)/i.test(r)},80598:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},6358:function(e,t,n){var r,a,l=n(9859),f=n(80598),d=l.process,h=l.Deno,p=d&&d.versions||h&&h.version,y=p&&p.v8;y&&(a=(r=y.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&f&&(!(r=f.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=f.match(/Chrome\/(\d+)/))&&(a=+r[1]),e.exports=a},49811:function(e,t,n){var r=n(80598).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},13837:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},65299:function(e,t,n){var r=n(65968),a=Error,l=r("".replace),f=String(a("zxcasd").stack),d=/\n\s*at [^:]*:[^\n]*/,h=d.test(f);e.exports=function(e,t){if(h&&"string"==typeof e&&!a.prepareStackTrace)for(;t--;)e=l(e,d,"");return e}},29166:function(e,t,n){var r=n(75762),a=n(65299),l=n(20373),f=Error.captureStackTrace;e.exports=function(e,t,n,d){l&&(f?f(e,t):r(e,"stack",a(n,d)))}},20373:function(e,t,n){var r=n(24229),a=n(65358);e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)}))},23103:function(e,t,n){var r=n(9859),a=n(97933).f,l=n(75762),f=n(14768),d=n(18400),h=n(77081),p=n(46541);e.exports=function(e,t){var n,y,w,x,_,S=e.target,k=e.global,C=e.stat;if(n=k?r:C?r[S]||d(S,{}):(r[S]||{}).prototype)for(y in t){if(x=t[y],w=e.dontCallGetSet?(_=a(n,y))&&_.value:n[y],!p(k?y:S+(C?".":"#")+y,e.forced)&&void 0!==w){if(typeof x==typeof w)continue;h(x,w)}(e.sham||w&&w.sham)&&l(x,"sham",!0),f(n,y,x,e)}}},24229:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},94954:function(e,t,n){"use strict";n(77950);var r=n(44745),a=n(14768),l=n(63466),f=n(24229),d=n(70095),h=n(75762),p=d("species"),y=RegExp.prototype;e.exports=function(e,t,n,w){var x=d(e),_=!f((function(){var t={};return t[x]=function(){return 7},7!=""[e](t)})),S=_&&!f((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[p]=function(){return n},n.flags="",n[x]=/./[x]),n.exec=function(){return t=!0,null},n[x](""),!t}));if(!_||!S||n){var k=r(/./[x]),C=t(x,""[e],(function(e,t,n,a,f){var d=r(e),h=t.exec;return h===l||h===y.exec?_&&!f?{done:!0,value:k(t,n,a)}:{done:!0,value:d(n,t,a)}:{done:!1}}));a(String.prototype,e,C[0]),a(y,x,C[1])}w&&h(y[x],"sham",!0)}},34990:function(e,t,n){"use strict";var r=n(33718),a=n(39646),l=n(13064),f=n(97636),d=function(e,t,n,h,p,y,w,x){for(var _,S,k=p,C=0,E=!!w&&f(w,x);C<h;)C in n&&(_=E?E(n[C],C,t):n[C],y>0&&r(_)?(S=a(_),k=d(e,t,_,S,k,y-1)-1):(l(k+1),e[k]=_),k++),C++;return k};e.exports=d},68476:function(e,t,n){var r=n(24229);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},53171:function(e,t,n){var r=n(57188),a=Function.prototype,l=a.apply,f=a.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?f.bind(l):function(){return f.apply(l,arguments)})},97636:function(e,t,n){var r=n(44745),a=n(77111),l=n(57188),f=r(r.bind);e.exports=function(e,t){return a(e),void 0===t?e:l?f(e,t):function(){return e.apply(t,arguments)}}},57188:function(e,t,n){var r=n(24229);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},94128:function(e,t,n){"use strict";var r=n(65968),a=n(77111),l=n(85052),f=n(98270),d=n(1909),h=n(57188),p=Function,y=r([].concat),w=r([].join),x={};e.exports=h?p.bind:function(e){var t=a(this),n=t.prototype,r=d(arguments,1),h=function(){var n=y(r,d(arguments));return this instanceof h?function(e,t,n){if(!f(x,t)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";x[t]=p("C,a","return new C("+w(r,",")+")")}return x[t](e,n)}(t,n.length,n):t.apply(e,n)};return l(n)&&(h.prototype=n),h}},20266:function(e,t,n){var r=n(57188),a=Function.prototype.call;e.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},51805:function(e,t,n){var r=n(7400),a=n(98270),l=Function.prototype,f=r&&Object.getOwnPropertyDescriptor,d=a(l,"name"),h=d&&"something"===function(){}.name,p=d&&(!r||r&&f(l,"name").configurable);e.exports={EXISTS:d,PROPER:h,CONFIGURABLE:p}},63411:function(e,t,n){var r=n(65968),a=n(77111);e.exports=function(e,t,n){try{return r(a(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},44745:function(e,t,n){var r=n(27079),a=n(65968);e.exports=function(e){if("Function"===r(e))return a(e)}},65968:function(e,t,n){var r=n(57188),a=Function.prototype,l=a.call,f=r&&a.bind.bind(l,l);e.exports=r?f:function(e){return function(){return l.apply(e,arguments)}}},31333:function(e,t,n){var r=n(9859),a=n(26733);e.exports=function(e,t){return arguments.length<2?(n=r[e],a(n)?n:void 0):r[e]&&r[e][t];var n}},78830:function(e,t,n){var r=n(81589),a=n(55300),l=n(9650),f=n(45495),d=n(70095)("iterator");e.exports=function(e){if(!l(e))return a(e,d)||a(e,"@@iterator")||f[r(e)]}},28403:function(e,t,n){var r=n(20266),a=n(77111),l=n(21176),f=n(59821),d=n(78830),h=TypeError;e.exports=function(e,t){var n=arguments.length<2?d(e):t;if(a(n))return l(r(n,e));throw h(f(e)+" is not iterable")}},44231:function(e,t,n){var r=n(65968),a=n(33718),l=n(26733),f=n(27079),d=n(83326),h=r([].push);e.exports=function(e){if(l(e))return e;if(a(e)){for(var t=e.length,n=[],r=0;r<t;r++){var p=e[r];"string"==typeof p?h(n,p):"number"!=typeof p&&"Number"!=f(p)&&"String"!=f(p)||h(n,d(p))}var y=n.length,w=!0;return function(e,t){if(w)return w=!1,t;if(a(this))return t;for(var r=0;r<y;r++)if(n[r]===e)return t}}}},55300:function(e,t,n){var r=n(77111),a=n(9650);e.exports=function(e,t){var n=e[t];return a(n)?void 0:r(n)}},70017:function(e,t,n){var r=n(65968),a=n(92991),l=Math.floor,f=r("".charAt),d=r("".replace),h=r("".slice),p=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,y=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,w,x){var _=n+e.length,S=r.length,k=y;return void 0!==w&&(w=a(w),k=p),d(x,k,(function(a,d){var p;switch(f(d,0)){case"$":return"$";case"&":return e;case"`":return h(t,0,n);case"'":return h(t,_);case"<":p=w[h(d,1,-1)];break;default:var y=+d;if(0===y)return a;if(y>S){var x=l(y/10);return 0===x?a:x<=S?void 0===r[x-1]?f(d,1):r[x-1]+f(d,1):a}p=r[y-1]}return void 0===p?"":p}))}},9859:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},98270:function(e,t,n){var r=n(65968),a=n(92991),l=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return l(a(e),t)}},95977:function(e){e.exports={}},14665:function(e){e.exports=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}},53777:function(e,t,n){var r=n(31333);e.exports=r("document","documentElement")},64394:function(e,t,n){var r=n(7400),a=n(24229),l=n(22635);e.exports=!r&&!a((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}))},9337:function(e,t,n){var r=n(65968),a=n(24229),l=n(27079),f=Object,d=r("".split);e.exports=a((function(){return!f("z").propertyIsEnumerable(0)}))?function(e){return"String"==l(e)?d(e,""):f(e)}:f},20835:function(e,t,n){var r=n(26733),a=n(85052),l=n(56540);e.exports=function(e,t,n){var f,d;return l&&r(f=t.constructor)&&f!==n&&a(d=f.prototype)&&d!==n.prototype&&l(e,d),e}},8511:function(e,t,n){var r=n(65968),a=n(26733),l=n(85353),f=r(Function.toString);a(l.inspectSource)||(l.inspectSource=function(e){return f(e)}),e.exports=l.inspectSource},79679:function(e,t,n){var r=n(85052),a=n(75762);e.exports=function(e,t){r(t)&&"cause"in t&&a(e,"cause",t.cause)}},95926:function(e,t,n){var r=n(23103),a=n(65968),l=n(95977),f=n(85052),d=n(98270),h=n(31787).f,p=n(78151),y=n(10166),w=n(35343),x=n(81441),_=n(68476),S=!1,k=x("meta"),C=0,E=function(e){h(e,k,{value:{objectID:"O"+C++,weakData:{}}})},O=e.exports={enable:function(){O.enable=function(){},S=!0;var e=p.f,t=a([].splice),n={};n[k]=1,e(n).length&&(p.f=function(n){for(var r=e(n),a=0,l=r.length;a<l;a++)if(r[a]===k){t(r,a,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:y.f}))},fastKey:function(e,t){if(!f(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!d(e,k)){if(!w(e))return"F";if(!t)return"E";E(e)}return e[k].objectID},getWeakData:function(e,t){if(!d(e,k)){if(!w(e))return!0;if(!t)return!1;E(e)}return e[k].weakData},onFreeze:function(e){return _&&S&&w(e)&&!d(e,k)&&E(e),e}};l[k]=!0},56407:function(e,t,n){var r,a,l,f=n(51180),d=n(9859),h=n(85052),p=n(75762),y=n(98270),w=n(85353),x=n(44399),_=n(95977),S="Object already initialized",k=d.TypeError,C=d.WeakMap;if(f||w.state){var E=w.state||(w.state=new C);E.get=E.get,E.has=E.has,E.set=E.set,r=function(e,t){if(E.has(e))throw k(S);return t.facade=e,E.set(e,t),t},a=function(e){return E.get(e)||{}},l=function(e){return E.has(e)}}else{var O=x("state");_[O]=!0,r=function(e,t){if(y(e,O))throw k(S);return t.facade=e,p(e,O,t),t},a=function(e){return y(e,O)?e[O]:{}},l=function(e){return y(e,O)}}e.exports={set:r,get:a,has:l,enforce:function(e){return l(e)?a(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!h(t)||(n=a(t)).type!==e)throw k("Incompatible receiver, "+e+" required");return n}}}},91943:function(e,t,n){var r=n(70095),a=n(45495),l=r("iterator"),f=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||f[l]===e)}},33718:function(e,t,n){var r=n(27079);e.exports=Array.isArray||function(e){return"Array"==r(e)}},26733:function(e,t,n){var r=n(63777),a=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===a}:function(e){return"function"==typeof e}},82359:function(e,t,n){var r=n(65968),a=n(24229),l=n(26733),f=n(81589),d=n(31333),h=n(8511),p=function(){},y=[],w=d("Reflect","construct"),x=/^\s*(?:class|function)\b/,_=r(x.exec),S=!x.exec(p),k=function(e){if(!l(e))return!1;try{return w(p,y,e),!0}catch(e){return!1}},C=function(e){if(!l(e))return!1;switch(f(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return S||!!_(x,h(e))}catch(e){return!0}};C.sham=!0,e.exports=!w||a((function(){var e;return k(k.call)||!k(Object)||!k((function(){e=!0}))||e}))?C:k},90193:function(e,t,n){var r=n(98270);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},46541:function(e,t,n){var r=n(24229),a=n(26733),l=/#|\.prototype\./,f=function(e,t){var n=h[d(e)];return n==y||n!=p&&(a(t)?r(t):!!t)},d=f.normalize=function(e){return String(e).replace(l,".").toLowerCase()},h=f.data={},p=f.NATIVE="N",y=f.POLYFILL="P";e.exports=f},9650:function(e){e.exports=function(e){return null==e}},85052:function(e,t,n){var r=n(26733),a=n(63777),l=a.all;e.exports=a.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===l}:function(e){return"object"==typeof e?null!==e:r(e)}},24231:function(e){e.exports=!1},48311:function(e,t,n){var r=n(85052),a=n(27079),l=n(70095)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==a(e))}},49395:function(e,t,n){var r=n(31333),a=n(26733),l=n(91321),f=n(66969),d=Object;e.exports=f?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return a(t)&&l(t.prototype,d(e))}},89003:function(e,t,n){var r=n(97636),a=n(20266),l=n(21176),f=n(59821),d=n(91943),h=n(39646),p=n(91321),y=n(28403),w=n(78830),x=n(57281),_=TypeError,S=function(e,t){this.stopped=e,this.result=t},k=S.prototype;e.exports=function(e,t,n){var C,E,O,j,T,A,P,D=n&&n.that,R=!(!n||!n.AS_ENTRIES),I=!(!n||!n.IS_RECORD),M=!(!n||!n.IS_ITERATOR),L=!(!n||!n.INTERRUPTED),N=r(t,D),F=function(e){return C&&x(C,"normal",e),new S(!0,e)},q=function(e){return R?(l(e),L?N(e[0],e[1],F):N(e[0],e[1])):L?N(e,F):N(e)};if(I)C=e.iterator;else if(M)C=e;else{if(!(E=w(e)))throw _(f(e)+" is not iterable");if(d(E)){for(O=0,j=h(e);j>O;O++)if((T=q(e[O]))&&p(k,T))return T;return new S(!1)}C=y(e,E)}for(A=I?e.next:C.next;!(P=a(A,C)).done;){try{T=q(P.value)}catch(e){x(C,"throw",e)}if("object"==typeof T&&T&&p(k,T))return T}return new S(!1)}},57281:function(e,t,n){var r=n(20266),a=n(21176),l=n(55300);e.exports=function(e,t,n){var f,d;a(e);try{if(!(f=l(e,"return"))){if("throw"===t)throw n;return n}f=r(f,e)}catch(e){d=!0,f=e}if("throw"===t)throw n;if(d)throw f;return a(f),n}},42247:function(e,t,n){"use strict";var r=n(60693).IteratorPrototype,a=n(22391),l=n(65358),f=n(54555),d=n(45495),h=function(){return this};e.exports=function(e,t,n,p){var y=t+" Iterator";return e.prototype=a(r,{next:l(+!p,n)}),f(e,y,!1,!0),d[y]=h,e}},12707:function(e,t,n){"use strict";var r=n(23103),a=n(20266),l=n(24231),f=n(51805),d=n(26733),h=n(42247),p=n(67567),y=n(56540),w=n(54555),x=n(75762),_=n(14768),S=n(70095),k=n(45495),C=n(60693),E=f.PROPER,O=f.CONFIGURABLE,j=C.IteratorPrototype,T=C.BUGGY_SAFARI_ITERATORS,A=S("iterator"),P="keys",D="values",R="entries",I=function(){return this};e.exports=function(e,t,n,f,S,C,M){h(n,t,f);var L,N,F,q=function(e){if(e===S&&V)return V;if(!T&&e in H)return H[e];switch(e){case P:case D:case R:return function(){return new n(this,e)}}return function(){return new n(this)}},B=t+" Iterator",U=!1,H=e.prototype,z=H[A]||H["@@iterator"]||S&&H[S],V=!T&&z||q(S),W="Array"==t&&H.entries||z;if(W&&(L=p(W.call(new e)))!==Object.prototype&&L.next&&(l||p(L)===j||(y?y(L,j):d(L[A])||_(L,A,I)),w(L,B,!0,!0),l&&(k[B]=I)),E&&S==D&&z&&z.name!==D&&(!l&&O?x(H,"name",D):(U=!0,V=function(){return a(z,this)})),S)if(N={values:q(D),keys:C?V:q(P),entries:q(R)},M)for(F in N)(T||U||!(F in H))&&_(H,F,N[F]);else r({target:t,proto:!0,forced:T||U},N);return l&&!M||H[A]===V||_(H,A,V,{name:S}),k[t]=V,N}},60693:function(e,t,n){"use strict";var r,a,l,f=n(24229),d=n(26733),h=n(85052),p=n(22391),y=n(67567),w=n(14768),x=n(70095),_=n(24231),S=x("iterator"),k=!1;[].keys&&("next"in(l=[].keys())?(a=y(y(l)))!==Object.prototype&&(r=a):k=!0),!h(r)||f((function(){var e={};return r[S].call(e)!==e}))?r={}:_&&(r=p(r)),d(r[S])||w(r,S,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:k}},45495:function(e){e.exports={}},39646:function(e,t,n){var r=n(34237);e.exports=function(e){return r(e.length)}},16039:function(e,t,n){var r=n(65968),a=n(24229),l=n(26733),f=n(98270),d=n(7400),h=n(51805).CONFIGURABLE,p=n(8511),y=n(56407),w=y.enforce,x=y.get,_=String,S=Object.defineProperty,k=r("".slice),C=r("".replace),E=r([].join),O=d&&!a((function(){return 8!==S((function(){}),"length",{value:8}).length})),j=String(String).split("String"),T=e.exports=function(e,t,n){"Symbol("===k(_(t),0,7)&&(t="["+C(_(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!f(e,"name")||h&&e.name!==t)&&(d?S(e,"name",{value:t,configurable:!0}):e.name=t),O&&n&&f(n,"arity")&&e.length!==n.arity&&S(e,"length",{value:n.arity});try{n&&f(n,"constructor")&&n.constructor?d&&S(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=w(e);return f(r,"source")||(r.source=E(j,"string"==typeof t?t:"")),e};Function.prototype.toString=T((function(){return l(this)&&x(this).source||p(this)}),"toString")},50917:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},24794:function(e,t,n){var r,a,l,f,d,h=n(9859),p=n(97636),y=n(97933).f,w=n(55795).set,x=n(93358),_=n(32023),S=n(8983),k=n(10263),C=n(28801),E=h.MutationObserver||h.WebKitMutationObserver,O=h.document,j=h.process,T=h.Promise,A=y(h,"queueMicrotask"),P=A&&A.value;if(!P){var D=new x,R=function(){var e,t;for(C&&(e=j.domain)&&e.exit();t=D.get();)try{t()}catch(e){throw D.head&&r(),e}e&&e.enter()};_||C||k||!E||!O?!S&&T&&T.resolve?((f=T.resolve(void 0)).constructor=T,d=p(f.then,f),r=function(){d(R)}):C?r=function(){j.nextTick(R)}:(w=p(w,h),r=function(){w(R)}):(a=!0,l=O.createTextNode(""),new E(R).observe(l,{characterData:!0}),r=function(){l.data=a=!a}),P=function(e){D.head||r(),D.add(e)}}e.exports=P},16485:function(e,t,n){"use strict";var r=n(77111),a=TypeError,l=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw a("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new l(e)}},40635:function(e,t,n){var r=n(83326);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},47272:function(e,t,n){var r=n(48311),a=TypeError;e.exports=function(e){if(r(e))throw a("The method doesn't accept regular expressions");return e}},47:function(e,t,n){"use strict";var r=n(7400),a=n(65968),l=n(20266),f=n(24229),d=n(65632),h=n(10894),p=n(19195),y=n(92991),w=n(9337),x=Object.assign,_=Object.defineProperty,S=a([].concat);e.exports=!x||f((function(){if(r&&1!==x({b:1},x(_({},"a",{enumerable:!0,get:function(){_(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach((function(e){t[e]=e})),7!=x({},e)[n]||d(x({},t)).join("")!=a}))?function(e,t){for(var n=y(e),a=arguments.length,f=1,x=h.f,_=p.f;a>f;)for(var k,C=w(arguments[f++]),E=x?S(d(C),x(C)):d(C),O=E.length,j=0;O>j;)k=E[j++],r&&!l(_,C,k)||(n[k]=C[k]);return n}:x},22391:function(e,t,n){var r,a=n(21176),l=n(90219),f=n(13837),d=n(95977),h=n(53777),p=n(22635),y=n(44399),w="prototype",x="script",_=y("IE_PROTO"),S=function(){},k=function(e){return"<"+x+">"+e+"</"+x+">"},C=function(e){e.write(k("")),e.close();var t=e.parentWindow.Object;return e=null,t},E=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;E="undefined"!=typeof document?document.domain&&r?C(r):(t=p("iframe"),n="java"+x+":",t.style.display="none",h.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(k("document.F=Object")),e.close(),e.F):C(r);for(var a=f.length;a--;)delete E[w][f[a]];return E()};d[_]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(S[w]=a(e),n=new S,S[w]=null,n[_]=e):n=E(),void 0===t?n:l.f(n,t)}},90219:function(e,t,n){var r=n(7400),a=n(17137),l=n(31787),f=n(21176),d=n(10905),h=n(65632);t.f=r&&!a?Object.defineProperties:function(e,t){f(e);for(var n,r=d(t),a=h(t),p=a.length,y=0;p>y;)l.f(e,n=a[y++],r[n]);return e}},31787:function(e,t,n){var r=n(7400),a=n(64394),l=n(17137),f=n(21176),d=n(39310),h=TypeError,p=Object.defineProperty,y=Object.getOwnPropertyDescriptor,w="enumerable",x="configurable",_="writable";t.f=r?l?function(e,t,n){if(f(e),t=d(t),f(n),"function"==typeof e&&"prototype"===t&&"value"in n&&_ in n&&!n[_]){var r=y(e,t);r&&r[_]&&(e[t]=n.value,n={configurable:x in n?n[x]:r[x],enumerable:w in n?n[w]:r[w],writable:!1})}return p(e,t,n)}:p:function(e,t,n){if(f(e),t=d(t),f(n),a)try{return p(e,t,n)}catch(e){}if("get"in n||"set"in n)throw h("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},97933:function(e,t,n){var r=n(7400),a=n(20266),l=n(19195),f=n(65358),d=n(10905),h=n(39310),p=n(98270),y=n(64394),w=Object.getOwnPropertyDescriptor;t.f=r?w:function(e,t){if(e=d(e),t=h(t),y)try{return w(e,t)}catch(e){}if(p(e,t))return f(!a(l.f,e,t),e[t])}},10166:function(e,t,n){var r=n(27079),a=n(10905),l=n(78151).f,f=n(69794),d="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return d&&"Window"==r(e)?function(e){try{return l(e)}catch(e){return f(d)}}(e):l(a(e))}},78151:function(e,t,n){var r=n(90140),a=n(13837).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},10894:function(e,t){t.f=Object.getOwnPropertySymbols},67567:function(e,t,n){var r=n(98270),a=n(26733),l=n(92991),f=n(44399),d=n(27528),h=f("IE_PROTO"),p=Object,y=p.prototype;e.exports=d?p.getPrototypeOf:function(e){var t=l(e);if(r(t,h))return t[h];var n=t.constructor;return a(n)&&t instanceof n?n.prototype:t instanceof p?y:null}},35343:function(e,t,n){var r=n(24229),a=n(85052),l=n(27079),f=n(92460),d=Object.isExtensible,h=r((function(){d(1)}));e.exports=h||f?function(e){return!!a(e)&&((!f||"ArrayBuffer"!=l(e))&&(!d||d(e)))}:d},91321:function(e,t,n){var r=n(65968);e.exports=r({}.isPrototypeOf)},90140:function(e,t,n){var r=n(65968),a=n(98270),l=n(10905),f=n(19540).indexOf,d=n(95977),h=r([].push);e.exports=function(e,t){var n,r=l(e),p=0,y=[];for(n in r)!a(d,n)&&a(r,n)&&h(y,n);for(;t.length>p;)a(r,n=t[p++])&&(~f(y,n)||h(y,n));return y}},65632:function(e,t,n){var r=n(90140),a=n(13837);e.exports=Object.keys||function(e){return r(e,a)}},19195:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},56540:function(e,t,n){var r=n(63411),a=n(21176),l=n(88505);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return a(n),l(r),t?e(n,r):n.__proto__=r,n}}():void 0)},87664:function(e,t,n){var r=n(7400),a=n(65968),l=n(65632),f=n(10905),d=a(n(19195).f),h=a([].push),p=function(e){return function(t){for(var n,a=f(t),p=l(a),y=p.length,w=0,x=[];y>w;)n=p[w++],r&&!d(a,n)||h(x,e?[n,a[n]]:a[n]);return x}};e.exports={entries:p(!0),values:p(!1)}},44059:function(e,t,n){"use strict";var r=n(71601),a=n(81589);e.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},32914:function(e,t,n){var r=n(20266),a=n(26733),l=n(85052),f=TypeError;e.exports=function(e,t){var n,d;if("string"===t&&a(n=e.toString)&&!l(d=r(n,e)))return d;if(a(n=e.valueOf)&&!l(d=r(n,e)))return d;if("string"!==t&&a(n=e.toString)&&!l(d=r(n,e)))return d;throw f("Can't convert object to primitive value")}},4826:function(e,t,n){var r=n(31333),a=n(65968),l=n(78151),f=n(10894),d=n(21176),h=a([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=l.f(d(e)),n=f.f;return n?h(t,n(e)):t}},49276:function(e,t,n){var r=n(9859);e.exports=r},64624:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},38321:function(e,t,n){var r=n(9859),a=n(74473),l=n(26733),f=n(46541),d=n(8511),h=n(70095),p=n(48639),y=n(95189),w=n(24231),x=n(6358),_=a&&a.prototype,S=h("species"),k=!1,C=l(r.PromiseRejectionEvent),E=f("Promise",(function(){var e=d(a),t=e!==String(a);if(!t&&66===x)return!0;if(w&&(!_.catch||!_.finally))return!0;if(!x||x<51||!/native code/.test(e)){var n=new a((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[S]=r,!(k=n.then((function(){}))instanceof r))return!0}return!t&&(p||y)&&!C}));e.exports={CONSTRUCTOR:E,REJECTION_EVENT:C,SUBCLASSING:k}},74473:function(e,t,n){var r=n(9859);e.exports=r.Promise},62391:function(e,t,n){var r=n(21176),a=n(85052),l=n(16485);e.exports=function(e,t){if(r(e),a(t)&&t.constructor===e)return t;var n=l.f(e);return(0,n.resolve)(t),n.promise}},96866:function(e,t,n){var r=n(74473),a=n(74575),l=n(38321).CONSTRUCTOR;e.exports=l||!a((function(e){r.all(e).then(void 0,(function(){}))}))},26060:function(e,t,n){var r=n(31787).f;e.exports=function(e,t,n){n in e||r(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},93358:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},98115:function(e,t,n){var r=n(20266),a=n(21176),l=n(26733),f=n(27079),d=n(63466),h=TypeError;e.exports=function(e,t){var n=e.exec;if(l(n)){var p=r(n,e,t);return null!==p&&a(p),p}if("RegExp"===f(e))return r(d,e,t);throw h("RegExp#exec called on incompatible receiver")}},63466:function(e,t,n){"use strict";var r,a,l=n(20266),f=n(65968),d=n(83326),h=n(30895),p=n(25650),y=n(33036),w=n(22391),x=n(56407).get,_=n(42926),S=n(10461),k=y("native-string-replace",String.prototype.replace),C=RegExp.prototype.exec,E=C,O=f("".charAt),j=f("".indexOf),T=f("".replace),A=f("".slice),P=(a=/b*/g,l(C,r=/a/,"a"),l(C,a,"a"),0!==r.lastIndex||0!==a.lastIndex),D=p.BROKEN_CARET,R=void 0!==/()??/.exec("")[1];(P||R||D||_||S)&&(E=function(e){var t,n,r,a,f,p,y,_=this,S=x(_),I=d(e),M=S.raw;if(M)return M.lastIndex=_.lastIndex,t=l(E,M,I),_.lastIndex=M.lastIndex,t;var L=S.groups,N=D&&_.sticky,F=l(h,_),q=_.source,B=0,U=I;if(N&&(F=T(F,"y",""),-1===j(F,"g")&&(F+="g"),U=A(I,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==O(I,_.lastIndex-1))&&(q="(?: "+q+")",U=" "+U,B++),n=new RegExp("^(?:"+q+")",F)),R&&(n=new RegExp("^"+q+"$(?!\\s)",F)),P&&(r=_.lastIndex),a=l(C,N?n:_,U),N?a?(a.input=A(a.input,B),a[0]=A(a[0],B),a.index=_.lastIndex,_.lastIndex+=a[0].length):_.lastIndex=0:P&&a&&(_.lastIndex=_.global?a.index+a[0].length:r),R&&a&&a.length>1&&l(k,a[0],n,(function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(a[f]=void 0)})),a&&L)for(a.groups=p=w(null),f=0;f<L.length;f++)p[(y=L[f])[0]]=a[y[1]];return a}),e.exports=E},30895:function(e,t,n){"use strict";var r=n(21176);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},83349:function(e,t,n){var r=n(20266),a=n(98270),l=n(91321),f=n(30895),d=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in d||a(e,"flags")||!l(d,e)?t:r(f,e)}},25650:function(e,t,n){var r=n(24229),a=n(9859).RegExp,l=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),f=l||r((function(){return!a("a","y").sticky})),d=l||r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:d,MISSED_STICKY:f,UNSUPPORTED_Y:l}},42926:function(e,t,n){var r=n(24229),a=n(9859).RegExp;e.exports=r((function(){var e=a(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},10461:function(e,t,n){var r=n(24229),a=n(9859).RegExp;e.exports=r((function(){var e=a("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},58885:function(e,t,n){var r=n(9650),a=TypeError;e.exports=function(e){if(r(e))throw a("Can't call method on "+e);return e}},72101:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},71832:function(e,t,n){"use strict";var r=n(31333),a=n(96616),l=n(70095),f=n(7400),d=l("species");e.exports=function(e){var t=r(e);f&&t&&!t[d]&&a(t,d,{configurable:!0,get:function(){return this}})}},54555:function(e,t,n){var r=n(31787).f,a=n(98270),l=n(70095)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!a(e,l)&&r(e,l,{configurable:!0,value:t})}},44399:function(e,t,n){var r=n(33036),a=n(81441),l=r("keys");e.exports=function(e){return l[e]||(l[e]=a(e))}},85353:function(e,t,n){var r=n(9859),a=n(18400),l="__core-js_shared__",f=r[l]||a(l,{});e.exports=f},33036:function(e,t,n){var r=n(24231),a=n(85353);(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.2",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},37942:function(e,t,n){var r=n(21176),a=n(57988),l=n(9650),f=n(70095)("species");e.exports=function(e,t){var n,d=r(e).constructor;return void 0===d||l(n=r(d)[f])?t:a(n)}},59540:function(e,t,n){var r=n(24229);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},30966:function(e,t,n){var r=n(65968),a=n(43329),l=n(83326),f=n(58885),d=r("".charAt),h=r("".charCodeAt),p=r("".slice),y=function(e){return function(t,n){var r,y,w=l(f(t)),x=a(n),_=w.length;return x<0||x>=_?e?"":void 0:(r=h(w,x))<55296||r>56319||x+1===_||(y=h(w,x+1))<56320||y>57343?e?d(w,x):r:e?p(w,x,x+2):y-56320+(r-55296<<10)+65536}};e.exports={codeAt:y(!1),charAt:y(!0)}},77321:function(e,t,n){var r=n(65968),a=2147483647,l=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",h=RangeError,p=r(f.exec),y=Math.floor,w=String.fromCharCode,x=r("".charCodeAt),_=r([].join),S=r([].push),k=r("".replace),C=r("".split),E=r("".toLowerCase),O=function(e){return e+22+75*(e<26)},j=function(e,t,n){var r=0;for(e=n?y(e/700):e>>1,e+=y(e/t);e>455;)e=y(e/35),r+=36;return y(r+36*e/(e+38))},T=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=x(e,n++);if(a>=55296&&a<=56319&&n<r){var l=x(e,n++);56320==(64512&l)?S(t,((1023&a)<<10)+(1023&l)+65536):(S(t,a),n--)}else S(t,a)}return t}(e);var n,r,l=e.length,f=128,p=0,k=72;for(n=0;n<e.length;n++)(r=e[n])<128&&S(t,w(r));var C=t.length,E=C;for(C&&S(t,"-");E<l;){var T=a;for(n=0;n<e.length;n++)(r=e[n])>=f&&r<T&&(T=r);var A=E+1;if(T-f>y((a-p)/A))throw h(d);for(p+=(T-f)*A,f=T,n=0;n<e.length;n++){if((r=e[n])<f&&++p>a)throw h(d);if(r==f){for(var P=p,D=36;;){var R=D<=k?1:D>=k+26?26:D-k;if(P<R)break;var I=P-R,M=36-R;S(t,w(O(R+I%M))),P=y(I/M),D+=36}S(t,w(O(P))),k=j(p,A,E==C),p=0,E++}}p++,f++}return _(t,"")};e.exports=function(e){var t,n,r=[],a=C(k(E(e),f,"."),".");for(t=0;t<a.length;t++)n=a[t],S(r,p(l,n)?"xn--"+T(n):n);return _(r,".")}},93124:function(e,t,n){"use strict";var r=n(43329),a=n(83326),l=n(58885),f=RangeError;e.exports=function(e){var t=a(l(this)),n="",d=r(e);if(d<0||d==1/0)throw f("Wrong number of repetitions");for(;d>0;(d>>>=1)&&(t+=t))1&d&&(n+=t);return n}},9445:function(e,t,n){var r=n(51805).PROPER,a=n(24229),l=n(41647);e.exports=function(e){return a((function(){return!!l[e]()||"​᠎"!=="​᠎"[e]()||r&&l[e].name!==e}))}},1017:function(e,t,n){var r=n(65968),a=n(58885),l=n(83326),f=n(41647),d=r("".replace),h=RegExp("^["+f+"]+"),p=RegExp("(^|[^"+f+"])["+f+"]+$"),y=function(e){return function(t){var n=l(a(t));return 1&e&&(n=d(n,h,"")),2&e&&(n=d(n,p,"$1")),n}};e.exports={start:y(1),end:y(2),trim:y(3)}},44860:function(e,t,n){var r=n(6358),a=n(24229),l=n(9859).String;e.exports=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol();return!l(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},66481:function(e,t,n){var r=n(20266),a=n(31333),l=n(70095),f=n(14768);e.exports=function(){var e=a("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,d=l("toPrimitive");t&&!t[d]&&f(t,d,(function(e){return r(n,this)}),{arity:1})}},55957:function(e,t,n){var r=n(44860);e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},55795:function(e,t,n){var r,a,l,f,d=n(9859),h=n(53171),p=n(97636),y=n(26733),w=n(98270),x=n(24229),_=n(53777),S=n(1909),k=n(22635),C=n(77579),E=n(32023),O=n(28801),j=d.setImmediate,T=d.clearImmediate,A=d.process,P=d.Dispatch,D=d.Function,R=d.MessageChannel,I=d.String,M=0,L={},N="onreadystatechange";x((function(){r=d.location}));var F=function(e){if(w(L,e)){var t=L[e];delete L[e],t()}},q=function(e){return function(){F(e)}},B=function(e){F(e.data)},U=function(e){d.postMessage(I(e),r.protocol+"//"+r.host)};j&&T||(j=function(e){C(arguments.length,1);var t=y(e)?e:D(e),n=S(arguments,1);return L[++M]=function(){h(t,void 0,n)},a(M),M},T=function(e){delete L[e]},O?a=function(e){A.nextTick(q(e))}:P&&P.now?a=function(e){P.now(q(e))}:R&&!E?(f=(l=new R).port2,l.port1.onmessage=B,a=p(f.postMessage,f)):d.addEventListener&&y(d.postMessage)&&!d.importScripts&&r&&"file:"!==r.protocol&&!x(U)?(a=U,d.addEventListener("message",B,!1)):a=N in k("script")?function(e){_.appendChild(k("script"))[N]=function(){_.removeChild(this),F(e)}}:function(e){setTimeout(q(e),0)}),e.exports={set:j,clear:T}},90143:function(e,t,n){var r=n(65968);e.exports=r(1..valueOf)},43231:function(e,t,n){var r=n(43329),a=Math.max,l=Math.min;e.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):l(n,t)}},10905:function(e,t,n){var r=n(9337),a=n(58885);e.exports=function(e){return r(a(e))}},43329:function(e,t,n){var r=n(50917);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},34237:function(e,t,n){var r=n(43329),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},92991:function(e,t,n){var r=n(58885),a=Object;e.exports=function(e){return a(r(e))}},92066:function(e,t,n){var r=n(20266),a=n(85052),l=n(49395),f=n(55300),d=n(32914),h=n(70095),p=TypeError,y=h("toPrimitive");e.exports=function(e,t){if(!a(e)||l(e))return e;var n,h=f(e,y);if(h){if(void 0===t&&(t="default"),n=r(h,e,t),!a(n)||l(n))return n;throw p("Can't convert object to primitive value")}return void 0===t&&(t="number"),d(e,t)}},39310:function(e,t,n){var r=n(92066),a=n(49395);e.exports=function(e){var t=r(e,"string");return a(t)?t:t+""}},71601:function(e,t,n){var r={};r[n(70095)("toStringTag")]="z",e.exports="[object z]"===String(r)},83326:function(e,t,n){var r=n(81589),a=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return a(e)}},59821:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},81441:function(e,t,n){var r=n(65968),a=0,l=Math.random(),f=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+f(++a+l,36)}},34144:function(e,t,n){var r=n(24229),a=n(70095),l=n(7400),f=n(24231),d=a("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),f&&!e.toJSON||!t.size&&(f||!l)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[d]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},66969:function(e,t,n){var r=n(44860);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},17137:function(e,t,n){var r=n(7400),a=n(24229);e.exports=r&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},77579:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},51180:function(e,t,n){var r=n(9859),a=n(26733),l=r.WeakMap;e.exports=a(l)&&/native code/.test(String(l))},63524:function(e,t,n){var r=n(49276),a=n(98270),l=n(55391),f=n(31787).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});a(t,e)||f(t,e,{value:l.f(e)})}},55391:function(e,t,n){var r=n(70095);t.f=r},70095:function(e,t,n){var r=n(9859),a=n(33036),l=n(98270),f=n(81441),d=n(44860),h=n(66969),p=r.Symbol,y=a("wks"),w=h?p.for||p:p&&p.withoutSetter||f;e.exports=function(e){return l(y,e)||(y[e]=d&&l(p,e)?p[e]:w("Symbol."+e)),y[e]}},41647:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},93949:function(e,t,n){"use strict";var r=n(31333),a=n(98270),l=n(75762),f=n(91321),d=n(56540),h=n(77081),p=n(26060),y=n(20835),w=n(40635),x=n(79679),_=n(29166),S=n(7400),k=n(24231);e.exports=function(e,t,n,C){var E="stackTraceLimit",O=C?2:1,j=e.split("."),T=j[j.length-1],A=r.apply(null,j);if(A){var P=A.prototype;if(!k&&a(P,"cause")&&delete P.cause,!n)return A;var D=r("Error"),R=t((function(e,t){var n=w(C?t:e,void 0),r=C?new A(e):new A;return void 0!==n&&l(r,"message",n),_(r,R,r.stack,2),this&&f(P,this)&&y(r,this,R),arguments.length>O&&x(r,arguments[O]),r}));if(R.prototype=P,"Error"!==T?d?d(R,D):h(R,D,{name:!0}):S&&E in A&&(p(R,A,E),p(R,A,"prepareStackTrace")),h(R,A),!k)try{P.name!==T&&l(P,"name",T),P.constructor=R}catch(e){}return R}}},18178:function(e,t,n){"use strict";var r=n(23103),a=n(24229),l=n(33718),f=n(85052),d=n(92991),h=n(39646),p=n(13064),y=n(62324),w=n(87501),x=n(31460),_=n(70095),S=n(6358),k=_("isConcatSpreadable"),C=S>=51||!a((function(){var e=[];return e[k]=!1,e.concat()[0]!==e})),E=function(e){if(!f(e))return!1;var t=e[k];return void 0!==t?!!t:l(e)};r({target:"Array",proto:!0,arity:1,forced:!C||!x("concat")},{concat:function(e){var t,n,r,a,l,f=d(this),x=w(f,0),_=0;for(t=-1,r=arguments.length;t<r;t++)if(E(l=-1===t?f:arguments[t]))for(a=h(l),p(_+a),n=0;n<a;n++,_++)n in l&&y(x,_,l[n]);else p(_+1),y(x,_++,l);return x.length=_,x}})},92656:function(e,t,n){var r=n(23103),a=n(97065),l=n(9736);r({target:"Array",proto:!0},{fill:a}),l("fill")},95342:function(e,t,n){"use strict";var r=n(23103),a=n(89996).filter;r({target:"Array",proto:!0,forced:!n(31460)("filter")},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},49228:function(e,t,n){"use strict";var r=n(23103),a=n(89996).find,l=n(9736),f="find",d=!0;f in[]&&Array(1)[f]((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),l(f)},27072:function(e,t,n){"use strict";var r=n(23103),a=n(34990),l=n(92991),f=n(39646),d=n(43329),h=n(87501);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=l(this),n=f(t),r=h(t,0);return r.length=a(r,t,t,n,0,void 0===e?1:d(e)),r}})},27233:function(e,t,n){var r=n(23103),a=n(10507);r({target:"Array",stat:!0,forced:!n(74575)((function(e){Array.from(e)}))},{from:a})},39529:function(e,t,n){"use strict";var r=n(23103),a=n(19540).includes,l=n(24229),f=n(9736);r({target:"Array",proto:!0,forced:l((function(){return!Array(1).includes()}))},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),f("includes")},15735:function(e,t,n){"use strict";var r=n(10905),a=n(9736),l=n(45495),f=n(56407),d=n(31787).f,h=n(12707),p=n(33684),y=n(24231),w=n(7400),x="Array Iterator",_=f.set,S=f.getterFor(x);e.exports=h(Array,"Array",(function(e,t){_(this,{type:x,target:r(e),index:0,kind:t})}),(function(){var e=S(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,p(void 0,!0)):p("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values");var k=l.Arguments=l.Array;if(a("keys"),a("values"),a("entries"),!y&&w&&"values"!==k.name)try{d(k,"name",{value:"values"})}catch(e){}},16781:function(e,t,n){"use strict";var r=n(23103),a=n(65968),l=n(9337),f=n(10905),d=n(96038),h=a([].join);r({target:"Array",proto:!0,forced:l!=Object||!d("join",",")},{join:function(e){return h(f(this),void 0===e?",":e)}})},43450:function(e,t,n){"use strict";var r=n(23103),a=n(89996).map;r({target:"Array",proto:!0,forced:!n(31460)("map")},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},36728:function(e,t,n){"use strict";var r=n(23103),a=n(92991),l=n(39646),f=n(36554),d=n(13064);r({target:"Array",proto:!0,arity:1,forced:n(24229)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=a(this),n=l(t),r=arguments.length;d(n+r);for(var h=0;h<r;h++)t[n]=arguments[h],n++;return f(t,n),n}})},32501:function(e,t,n){"use strict";var r=n(23103),a=n(33718),l=n(82359),f=n(85052),d=n(43231),h=n(39646),p=n(10905),y=n(62324),w=n(70095),x=n(31460),_=n(1909),S=x("slice"),k=w("species"),C=Array,E=Math.max;r({target:"Array",proto:!0,forced:!S},{slice:function(e,t){var n,r,w,x=p(this),S=h(x),O=d(e,S),j=d(void 0===t?S:t,S);if(a(x)&&(n=x.constructor,(l(n)&&(n===C||a(n.prototype))||f(n)&&null===(n=n[k]))&&(n=void 0),n===C||void 0===n))return _(x,O,j);for(r=new(void 0===n?C:n)(E(j-O,0)),w=0;O<j;O++,w++)O in x&&y(r,w,x[O]);return r.length=w,r}})},43430:function(e,t,n){"use strict";var r=n(23103),a=n(65968),l=n(77111),f=n(92991),d=n(39646),h=n(79563),p=n(83326),y=n(24229),w=n(33867),x=n(96038),_=n(22671),S=n(48506),k=n(6358),C=n(49811),E=[],O=a(E.sort),j=a(E.push),T=y((function(){E.sort(void 0)})),A=y((function(){E.sort(null)})),P=x("sort"),D=!y((function(){if(k)return k<70;if(!(_&&_>3)){if(S)return!0;if(C)return C<603;var e,t,n,r,a="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)E.push({k:t+r,v:n})}for(E.sort((function(e,t){return t.v-e.v})),r=0;r<E.length;r++)t=E[r].k.charAt(0),a.charAt(a.length-1)!==t&&(a+=t);return"DGBEFHACIJK"!==a}}));r({target:"Array",proto:!0,forced:T||!A||!P||!D},{sort:function(e){void 0!==e&&l(e);var t=f(this);if(D)return void 0===e?O(t):O(t,e);var n,r,a=[],y=d(t);for(r=0;r<y;r++)r in t&&j(a,t[r]);for(w(a,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:p(t)>p(n)?1:-1}}(e)),n=d(a),r=0;r<n;)t[r]=a[r++];for(;r<y;)h(t,r++);return t}})},99805:function(e,t,n){"use strict";var r=n(23103),a=n(92991),l=n(43231),f=n(43329),d=n(39646),h=n(36554),p=n(13064),y=n(87501),w=n(62324),x=n(79563),_=n(31460)("splice"),S=Math.max,k=Math.min;r({target:"Array",proto:!0,forced:!_},{splice:function(e,t){var n,r,_,C,E,O,j=a(this),T=d(j),A=l(e,T),P=arguments.length;for(0===P?n=r=0:1===P?(n=0,r=T-A):(n=P-2,r=k(S(f(t),0),T-A)),p(T+n-r),_=y(j,r),C=0;C<r;C++)(E=A+C)in j&&w(_,C,j[E]);if(_.length=r,n<r){for(C=A;C<T-r;C++)O=C+n,(E=C+r)in j?j[O]=j[E]:x(j,O);for(C=T;C>T-r+n;C--)x(j,C-1)}else if(n>r)for(C=T-r;C>A;C--)O=C+n-1,(E=C+r-1)in j?j[O]=j[E]:x(j,O);for(C=0;C<n;C++)j[C+A]=arguments[C+2];return h(j,T-r+n),_}})},67694:function(e,t,n){n(9736)("flat")},1951:function(e,t,n){"use strict";var r=n(23103),a=n(92991),l=n(39646),f=n(36554),d=n(79563),h=n(13064);r({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=a(this),n=l(t),r=arguments.length;if(r){h(n+r);for(var p=n;p--;){var y=p+r;p in t?t[y]=t[p]:d(t,y)}for(var w=0;w<r;w++)t[w]=arguments[w]}return f(t,n+r)}})},96264:function(e,t,n){var r=n(98270),a=n(14768),l=n(19778),f=n(70095)("toPrimitive"),d=Date.prototype;r(d,f)||a(d,f,l)},71372:function(e,t,n){var r=n(23103),a=n(9859),l=n(53171),f=n(93949),d="WebAssembly",h=a[d],p=7!==Error("e",{cause:7}).cause,y=function(e,t){var n={};n[e]=f(e,t,p),r({global:!0,constructor:!0,arity:1,forced:p},n)},w=function(e,t){if(h&&h[e]){var n={};n[e]=f(d+"."+e,t,p),r({target:d,stat:!0,constructor:!0,arity:1,forced:p},n)}};y("Error",(function(e){return function Error(t){return l(e,this,arguments)}})),y("EvalError",(function(e){return function EvalError(t){return l(e,this,arguments)}})),y("RangeError",(function(e){return function RangeError(t){return l(e,this,arguments)}})),y("ReferenceError",(function(e){return function ReferenceError(t){return l(e,this,arguments)}})),y("SyntaxError",(function(e){return function SyntaxError(t){return l(e,this,arguments)}})),y("TypeError",(function(e){return function TypeError(t){return l(e,this,arguments)}})),y("URIError",(function(e){return function URIError(t){return l(e,this,arguments)}})),w("CompileError",(function(e){return function CompileError(t){return l(e,this,arguments)}})),w("LinkError",(function(e){return function LinkError(t){return l(e,this,arguments)}})),w("RuntimeError",(function(e){return function RuntimeError(t){return l(e,this,arguments)}}))},26936:function(e,t,n){var r=n(7400),a=n(51805).EXISTS,l=n(65968),f=n(96616),d=Function.prototype,h=l(d.toString),p=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,y=l(p.exec);r&&!a&&f(d,"name",{configurable:!0,get:function(){try{return y(p,h(this))[1]}catch(e){return""}}})},6710:function(e,t,n){var r=n(23103),a=n(31333),l=n(53171),f=n(20266),d=n(65968),h=n(24229),p=n(26733),y=n(49395),w=n(1909),x=n(44231),_=n(44860),S=String,k=a("JSON","stringify"),C=d(/./.exec),E=d("".charAt),O=d("".charCodeAt),j=d("".replace),T=d(1..toString),A=/[\uD800-\uDFFF]/g,P=/^[\uD800-\uDBFF]$/,D=/^[\uDC00-\uDFFF]$/,R=!_||h((function(){var e=a("Symbol")();return"[null]"!=k([e])||"{}"!=k({a:e})||"{}"!=k(Object(e))})),I=h((function(){return'"\\udf06\\ud834"'!==k("\udf06\ud834")||'"\\udead"'!==k("\udead")})),M=function(e,t){var n=w(arguments),r=x(t);if(p(r)||void 0!==e&&!y(e))return n[1]=function(e,t){if(p(r)&&(t=f(r,this,S(e),t)),!y(t))return t},l(k,null,n)},L=function(e,t,n){var r=E(n,t-1),a=E(n,t+1);return C(P,e)&&!C(D,a)||C(D,e)&&!C(P,r)?"\\u"+T(O(e,0),16):e};k&&r({target:"JSON",stat:!0,arity:3,forced:R||I},{stringify:function(e,t,n){var r=w(arguments),a=l(R?M:k,null,r);return I&&"string"==typeof a?j(a,A,L):a}})},17525:function(e,t,n){var r=n(9859);n(54555)(r.JSON,"JSON",!0)},19294:function(e,t,n){"use strict";n(69789)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(98081))},79321:function(e,t,n){n(19294)},18275:function(e,t,n){n(54555)(Math,"Math",!0)},71245:function(e,t,n){"use strict";var r=n(23103),a=n(24231),l=n(7400),f=n(9859),d=n(49276),h=n(65968),p=n(46541),y=n(98270),w=n(20835),x=n(91321),_=n(49395),S=n(92066),k=n(24229),C=n(78151).f,E=n(97933).f,O=n(31787).f,j=n(90143),T=n(1017).trim,A="Number",P=f[A],D=d[A],R=P.prototype,I=f.TypeError,M=h("".slice),L=h("".charCodeAt),N=function(e){var t,n,r,a,l,f,d,h,p=S(e,"number");if(_(p))throw I("Cannot convert a Symbol value to a number");if("string"==typeof p&&p.length>2)if(p=T(p),43===(t=L(p,0))||45===t){if(88===(n=L(p,2))||120===n)return NaN}else if(48===t){switch(L(p,1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+p}for(f=(l=M(p,2)).length,d=0;d<f;d++)if((h=L(l,d))<48||h>a)return NaN;return parseInt(l,r)}return+p},F=p(A,!P(" 0o1")||!P("0b1")||P("+0x1")),q=function(e){var t,n=arguments.length<1?0:P(function(e){var t=S(e,"number");return"bigint"==typeof t?t:N(t)}(e));return x(R,t=this)&&k((function(){j(t)}))?w(Object(n),this,q):n};q.prototype=R,F&&!a&&(R.constructor=q),r({global:!0,constructor:!0,wrap:!0,forced:F},{Number:q});var B=function(e,t){for(var n,r=l?C(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),a=0;r.length>a;a++)y(t,n=r[a])&&!y(e,n)&&O(e,n,E(t,n))};a&&D&&B(d[A],D),(F||a)&&B(d[A],P)},61657:function(e,t,n){"use strict";var r=n(23103),a=n(65968),l=n(43329),f=n(90143),d=n(93124),h=n(24229),p=RangeError,y=String,w=Math.floor,x=a(d),_=a("".slice),S=a(1..toFixed),k=function(e,t,n){return 0===t?n:t%2==1?k(e,t-1,n*e):k(e*e,t/2,n)},C=function(e,t,n){for(var r=-1,a=n;++r<6;)a+=t*e[r],e[r]=a%1e7,a=w(a/1e7)},E=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=w(r/t),r=r%t*1e7},O=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=y(e[t]);n=""===n?r:n+x("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:h((function(){return"0.000"!==S(8e-5,3)||"1"!==S(.9,0)||"1.25"!==S(1.255,2)||"1000000000000000128"!==S(0xde0b6b3a7640080,0)}))||!h((function(){S({})}))},{toFixed:function(e){var t,n,r,a,d=f(this),h=l(e),w=[0,0,0,0,0,0],S="",j="0";if(h<0||h>20)throw p("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return y(d);if(d<0&&(S="-",d=-d),d>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(d*k(2,69,1))-69)<0?d*k(2,-t,1):d/k(2,t,1),n*=4503599627370496,(t=52-t)>0){for(C(w,0,n),r=h;r>=7;)C(w,1e7,0),r-=7;for(C(w,k(10,r,1),0),r=t-1;r>=23;)E(w,1<<23),r-=23;E(w,1<<r),C(w,1,1),E(w,2),j=O(w)}else C(w,0,n),C(w,1<<-t,0),j=O(w)+x("0",h);return j=h>0?S+((a=j.length)<=h?"0."+x("0",h-a)+j:_(j,0,a-h)+"."+_(j,a-h)):S+j}})},43105:function(e,t,n){var r=n(23103),a=n(47);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==a},{assign:a})},35883:function(e,t,n){var r=n(23103),a=n(87664).entries;r({target:"Object",stat:!0},{entries:function(e){return a(e)}})},68625:function(e,t,n){var r=n(23103),a=n(24229),l=n(10905),f=n(97933).f,d=n(7400);r({target:"Object",stat:!0,forced:!d||a((function(){f(1)})),sham:!d},{getOwnPropertyDescriptor:function(e,t){return f(l(e),t)}})},62775:function(e,t,n){var r=n(23103),a=n(7400),l=n(4826),f=n(10905),d=n(97933),h=n(62324);r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){for(var t,n,r=f(e),a=d.f,p=l(r),y={},w=0;p.length>w;)void 0!==(n=a(r,t=p[w++]))&&h(y,t,n);return y}})},24905:function(e,t,n){var r=n(23103),a=n(24229),l=n(10166).f;r({target:"Object",stat:!0,forced:a((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:l})},82067:function(e,t,n){var r=n(23103),a=n(44860),l=n(24229),f=n(10894),d=n(92991);r({target:"Object",stat:!0,forced:!a||l((function(){f.f(1)}))},{getOwnPropertySymbols:function(e){var t=f.f;return t?t(d(e)):[]}})},96928:function(e,t,n){var r=n(23103),a=n(24229),l=n(92991),f=n(67567),d=n(27528);r({target:"Object",stat:!0,forced:a((function(){f(1)})),sham:!d},{getPrototypeOf:function(e){return f(l(e))}})},34769:function(e,t,n){var r=n(23103),a=n(92991),l=n(65632);r({target:"Object",stat:!0,forced:n(24229)((function(){l(1)}))},{keys:function(e){return l(a(e))}})},58188:function(e,t,n){var r=n(71601),a=n(14768),l=n(44059);r||a(Object.prototype,"toString",l,{unsafe:!0})},67890:function(e,t,n){var r=n(23103),a=n(87664).values;r({target:"Object",stat:!0},{values:function(e){return a(e)}})},56032:function(e,t,n){"use strict";var r=n(23103),a=n(20266),l=n(77111),f=n(16485),d=n(64624),h=n(89003);r({target:"Promise",stat:!0,forced:n(96866)},{all:function(e){var t=this,n=f.f(t),r=n.resolve,p=n.reject,y=d((function(){var n=l(t.resolve),f=[],d=0,y=1;h(e,(function(e){var l=d++,h=!1;y++,a(n,t,e).then((function(e){h||(h=!0,f[l]=e,--y||r(f))}),p)})),--y||r(f)}));return y.error&&p(y.value),n.promise}})},6135:function(e,t,n){"use strict";var r=n(23103),a=n(24231),l=n(38321).CONSTRUCTOR,f=n(74473),d=n(31333),h=n(26733),p=n(14768),y=f&&f.prototype;if(r({target:"Promise",proto:!0,forced:l,real:!0},{catch:function(e){return this.then(void 0,e)}}),!a&&h(f)){var w=d("Promise").prototype.catch;y.catch!==w&&p(y,"catch",w,{unsafe:!0})}},86087:function(e,t,n){"use strict";var r,a,l,f=n(23103),d=n(24231),h=n(28801),p=n(9859),y=n(20266),w=n(14768),x=n(56540),_=n(54555),S=n(71832),k=n(77111),C=n(26733),E=n(85052),O=n(57728),j=n(37942),T=n(55795).set,A=n(24794),P=n(14665),D=n(64624),R=n(93358),I=n(56407),M=n(74473),L=n(38321),N=n(16485),F="Promise",q=L.CONSTRUCTOR,B=L.REJECTION_EVENT,U=L.SUBCLASSING,H=I.getterFor(F),z=I.set,V=M&&M.prototype,W=M,Z=V,G=p.TypeError,K=p.document,Y=p.process,X=N.f,J=X,Q=!!(K&&K.createEvent&&p.dispatchEvent),ee="unhandledrejection",te=function(e){var t;return!(!E(e)||!C(t=e.then))&&t},ne=function(e,t){var n,r,a,l=t.value,f=1==t.state,d=f?e.ok:e.fail,h=e.resolve,p=e.reject,w=e.domain;try{d?(f||(2===t.rejection&&le(t),t.rejection=1),!0===d?n=l:(w&&w.enter(),n=d(l),w&&(w.exit(),a=!0)),n===e.promise?p(G("Promise-chain cycle")):(r=te(n))?y(r,n,h,p):h(n)):p(l)}catch(e){w&&!a&&w.exit(),p(e)}},re=function(e,t){e.notified||(e.notified=!0,A((function(){for(var n,r=e.reactions;n=r.get();)ne(n,e);e.notified=!1,t&&!e.rejection&&ae(e)})))},oe=function(e,t,n){var r,a;Q?((r=K.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),p.dispatchEvent(r)):r={promise:t,reason:n},!B&&(a=p["on"+e])?a(r):e===ee&&P("Unhandled promise rejection",n)},ae=function(e){y(T,p,(function(){var t,n=e.facade,r=e.value;if(se(e)&&(t=D((function(){h?Y.emit("unhandledRejection",r,n):oe(ee,n,r)})),e.rejection=h||se(e)?2:1,t.error))throw t.value}))},se=function(e){return 1!==e.rejection&&!e.parent},le=function(e){y(T,p,(function(){var t=e.facade;h?Y.emit("rejectionHandled",t):oe("rejectionhandled",t,e.value)}))},ce=function(e,t,n){return function(r){e(t,r,n)}},ue=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,re(e,!0))},fe=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw G("Promise can't be resolved itself");var r=te(t);r?A((function(){var n={done:!1};try{y(r,t,ce(fe,n,e),ce(ue,n,e))}catch(t){ue(n,t,e)}})):(e.value=t,e.state=1,re(e,!1))}catch(t){ue({done:!1},t,e)}}};if(q&&(Z=(W=function(e){O(this,Z),k(e),y(r,this);var t=H(this);try{e(ce(fe,t),ce(ue,t))}catch(e){ue(t,e)}}).prototype,(r=function(e){z(this,{type:F,done:!1,notified:!1,parent:!1,reactions:new R,rejection:!1,state:0,value:void 0})}).prototype=w(Z,"then",(function(e,t){var n=H(this),r=X(j(this,W));return n.parent=!0,r.ok=!C(e)||e,r.fail=C(t)&&t,r.domain=h?Y.domain:void 0,0==n.state?n.reactions.add(r):A((function(){ne(r,n)})),r.promise})),a=function(){var e=new r,t=H(e);this.promise=e,this.resolve=ce(fe,t),this.reject=ce(ue,t)},N.f=X=function(e){return e===W||undefined===e?new a(e):J(e)},!d&&C(M)&&V!==Object.prototype)){l=V.then,U||w(V,"then",(function(e,t){var n=this;return new W((function(e,t){y(l,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete V.constructor}catch(e){}x&&x(V,Z)}f({global:!0,constructor:!0,wrap:!0,forced:q},{Promise:W}),_(W,F,!1,!0),S(F)},21515:function(e,t,n){"use strict";var r=n(23103),a=n(24231),l=n(74473),f=n(24229),d=n(31333),h=n(26733),p=n(37942),y=n(62391),w=n(14768),x=l&&l.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!l&&f((function(){x.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=p(this,d("Promise")),n=h(e);return this.then(n?function(n){return y(t,e()).then((function(){return n}))}:e,n?function(n){return y(t,e()).then((function(){throw n}))}:e)}}),!a&&h(l)){var _=d("Promise").prototype.finally;x.finally!==_&&w(x,"finally",_,{unsafe:!0})}},73439:function(e,t,n){n(86087),n(56032),n(6135),n(26767),n(39320),n(52047)},26767:function(e,t,n){"use strict";var r=n(23103),a=n(20266),l=n(77111),f=n(16485),d=n(64624),h=n(89003);r({target:"Promise",stat:!0,forced:n(96866)},{race:function(e){var t=this,n=f.f(t),r=n.reject,p=d((function(){var f=l(t.resolve);h(e,(function(e){a(f,t,e).then(n.resolve,r)}))}));return p.error&&r(p.value),n.promise}})},39320:function(e,t,n){"use strict";var r=n(23103),a=n(20266),l=n(16485);r({target:"Promise",stat:!0,forced:n(38321).CONSTRUCTOR},{reject:function(e){var t=l.f(this);return a(t.reject,void 0,e),t.promise}})},52047:function(e,t,n){"use strict";var r=n(23103),a=n(31333),l=n(24231),f=n(74473),d=n(38321).CONSTRUCTOR,h=n(62391),p=a("Promise"),y=l&&!d;r({target:"Promise",stat:!0,forced:l||d},{resolve:function(e){return h(y&&this===p?f:this,e)}})},61229:function(e,t,n){var r=n(23103),a=n(31333),l=n(53171),f=n(94128),d=n(57988),h=n(21176),p=n(85052),y=n(22391),w=n(24229),x=a("Reflect","construct"),_=Object.prototype,S=[].push,k=w((function(){function e(){}return!(x((function(){}),[],e)instanceof e)})),C=!w((function(){x((function(){}))})),E=k||C;r({target:"Reflect",stat:!0,forced:E,sham:E},{construct:function(e,t){d(e),h(t);var n=arguments.length<3?e:d(arguments[2]);if(C&&!k)return x(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return l(S,r,t),new(l(f,e,r))}var a=n.prototype,w=y(p(a)?a:_),E=l(e,w,t);return p(E)?E:w}})},54565:function(e,t,n){var r=n(23103),a=n(20266),l=n(85052),f=n(21176),d=n(90193),h=n(97933),p=n(67567);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,y,w=arguments.length<3?t:arguments[2];return f(t)===w?t[n]:(r=h.f(t,n))?d(r)?r.value:void 0===r.get?void 0:a(r.get,w):l(y=p(t))?e(y,n,w):void 0}})},92215:function(e,t,n){var r=n(23103),a=n(9859),l=n(54555);r({global:!0},{Reflect:{}}),l(a.Reflect,"Reflect",!0)},17368:function(e,t,n){var r=n(7400),a=n(9859),l=n(65968),f=n(46541),d=n(20835),h=n(75762),p=n(78151).f,y=n(91321),w=n(48311),x=n(83326),_=n(83349),S=n(25650),k=n(26060),C=n(14768),E=n(24229),O=n(98270),j=n(56407).enforce,T=n(71832),A=n(70095),P=n(42926),D=n(10461),R=A("match"),I=a.RegExp,M=I.prototype,L=a.SyntaxError,N=l(M.exec),F=l("".charAt),q=l("".replace),B=l("".indexOf),U=l("".slice),H=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,z=/a/g,V=/a/g,W=new I(z)!==z,Z=S.MISSED_STICKY,G=S.UNSUPPORTED_Y,K=r&&(!W||Z||P||D||E((function(){return V[R]=!1,I(z)!=z||I(V)==V||"/a/i"!=I(z,"i")})));if(f("RegExp",K)){for(var Y=function(e,t){var n,r,a,l,f,p,S=y(M,this),k=w(e),C=void 0===t,E=[],T=e;if(!S&&k&&C&&e.constructor===Y)return e;if((k||y(M,e))&&(e=e.source,C&&(t=_(T))),e=void 0===e?"":x(e),t=void 0===t?"":x(t),T=e,P&&"dotAll"in z&&(r=!!t&&B(t,"s")>-1)&&(t=q(t,/s/g,"")),n=t,Z&&"sticky"in z&&(a=!!t&&B(t,"y")>-1)&&G&&(t=q(t,/y/g,"")),D&&(l=function(e){for(var t,n=e.length,r=0,a="",l=[],f={},d=!1,h=!1,p=0,y="";r<=n;r++){if("\\"===(t=F(e,r)))t+=F(e,++r);else if("]"===t)d=!1;else if(!d)switch(!0){case"["===t:d=!0;break;case"("===t:N(H,U(e,r+1))&&(r+=2,h=!0),a+=t,p++;continue;case">"===t&&h:if(""===y||O(f,y))throw new L("Invalid capture group name");f[y]=!0,l[l.length]=[y,p],h=!1,y="";continue}h?y+=t:a+=t}return[a,l]}(e),e=l[0],E=l[1]),f=d(I(e,t),S?this:M,Y),(r||a||E.length)&&(p=j(f),r&&(p.dotAll=!0,p.raw=Y(function(e){for(var t,n=e.length,r=0,a="",l=!1;r<=n;r++)"\\"!==(t=F(e,r))?l||"."!==t?("["===t?l=!0:"]"===t&&(l=!1),a+=t):a+="[\\s\\S]":a+=t+F(e,++r);return a}(e),n)),a&&(p.sticky=!0),E.length&&(p.groups=E)),e!==T)try{h(f,"source",""===T?"(?:)":T)}catch(e){}return f},X=p(I),J=0;X.length>J;)k(Y,I,X[J++]);M.constructor=Y,Y.prototype=M,C(a,"RegExp",Y,{constructor:!0})}T("RegExp")},24471:function(e,t,n){var r=n(7400),a=n(42926),l=n(27079),f=n(96616),d=n(56407).get,h=RegExp.prototype,p=TypeError;r&&a&&f(h,"dotAll",{configurable:!0,get:function(){if(this!==h){if("RegExp"===l(this))return!!d(this).dotAll;throw p("Incompatible receiver, RegExp required")}}})},77950:function(e,t,n){"use strict";var r=n(23103),a=n(63466);r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},51172:function(e,t,n){var r=n(7400),a=n(25650).MISSED_STICKY,l=n(27079),f=n(96616),d=n(56407).get,h=RegExp.prototype,p=TypeError;r&&a&&f(h,"sticky",{configurable:!0,get:function(){if(this!==h){if("RegExp"===l(this))return!!d(this).sticky;throw p("Incompatible receiver, RegExp required")}}})},21850:function(e,t,n){"use strict";n(77950);var r,a,l=n(23103),f=n(20266),d=n(26733),h=n(21176),p=n(83326),y=(r=!1,(a=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===a.test("abc")&&r),w=/./.test;l({target:"RegExp",proto:!0,forced:!y},{test:function(e){var t=h(this),n=p(e),r=t.exec;if(!d(r))return f(w,t,n);var a=f(r,t,n);return null!==a&&(h(a),!0)}})},88233:function(e,t,n){"use strict";var r=n(51805).PROPER,a=n(14768),l=n(21176),f=n(83326),d=n(24229),h=n(83349),p="toString",y=RegExp.prototype[p],w=d((function(){return"/a/b"!=y.call({source:"a",flags:"b"})})),x=r&&y.name!=p;(w||x)&&a(RegExp.prototype,p,(function(){var e=l(this);return"/"+f(e.source)+"/"+f(h(e))}),{unsafe:!0})},72560:function(e,t,n){"use strict";n(69789)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(98081))},93244:function(e,t,n){n(72560)},41549:function(e,t,n){"use strict";var r=n(23103),a=n(81720);r({target:"String",proto:!0,forced:n(59540)("anchor")},{anchor:function(e){return a(this,"a","name",e)}})},96708:function(e,t,n){"use strict";var r,a=n(23103),l=n(44745),f=n(97933).f,d=n(34237),h=n(83326),p=n(47272),y=n(58885),w=n(48127),x=n(24231),_=l("".endsWith),S=l("".slice),k=Math.min,C=w("endsWith");a({target:"String",proto:!0,forced:!!(x||C||(r=f(String.prototype,"endsWith"),!r||r.writable))&&!C},{endsWith:function(e){var t=h(y(this));p(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,a=void 0===n?r:k(d(n),r),l=h(e);return _?_(t,l,a):S(t,a-l.length,a)===l}})},84605:function(e,t,n){var r=n(23103),a=n(65968),l=n(43231),f=RangeError,d=String.fromCharCode,h=String.fromCodePoint,p=a([].join);r({target:"String",stat:!0,arity:1,forced:!!h&&1!=h.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],l(t,1114111)!==t)throw f(t+" is not a valid code point");n[a]=t<65536?d(t):d(55296+((t-=65536)>>10),t%1024+56320)}return p(n,"")}})},31235:function(e,t,n){"use strict";var r=n(23103),a=n(65968),l=n(47272),f=n(58885),d=n(83326),h=n(48127),p=a("".indexOf);r({target:"String",proto:!0,forced:!h("includes")},{includes:function(e){return!!~p(d(f(this)),d(l(e)),arguments.length>1?arguments[1]:void 0)}})},28673:function(e,t,n){"use strict";var r=n(30966).charAt,a=n(83326),l=n(56407),f=n(12707),d=n(33684),h="String Iterator",p=l.set,y=l.getterFor(h);f(String,"String",(function(e){p(this,{type:h,string:a(e),index:0})}),(function(){var e,t=y(this),n=t.string,a=t.index;return a>=n.length?d(void 0,!0):(e=r(n,a),t.index+=e.length,d(e,!1))}))},72508:function(e,t,n){"use strict";var r=n(23103),a=n(81720);r({target:"String",proto:!0,forced:n(59540)("link")},{link:function(e){return a(this,"a","href",e)}})},74069:function(e,t,n){"use strict";var r=n(20266),a=n(94954),l=n(21176),f=n(9650),d=n(34237),h=n(83326),p=n(58885),y=n(55300),w=n(36637),x=n(98115);a("match",(function(e,t,n){return[function(t){var n=p(this),a=f(t)?void 0:y(t,e);return a?r(a,t,n):new RegExp(t)[e](h(n))},function(e){var r=l(this),a=h(e),f=n(t,r,a);if(f.done)return f.value;if(!r.global)return x(r,a);var p=r.unicode;r.lastIndex=0;for(var y,_=[],S=0;null!==(y=x(r,a));){var k=h(y[0]);_[S]=k,""===k&&(r.lastIndex=w(a,d(r.lastIndex),p)),S++}return 0===S?null:_}]}))},71639:function(e,t,n){"use strict";var r=n(23103),a=n(20266),l=n(65968),f=n(58885),d=n(26733),h=n(9650),p=n(48311),y=n(83326),w=n(55300),x=n(83349),_=n(70017),S=n(70095),k=n(24231),C=S("replace"),E=TypeError,O=l("".indexOf),j=l("".replace),T=l("".slice),A=Math.max,P=function(e,t,n){return n>e.length?-1:""===t?n:O(e,t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,l,S,D,R,I,M,L,N=f(this),F=0,q=0,B="";if(!h(e)){if((n=p(e))&&(r=y(f(x(e))),!~O(r,"g")))throw E("`.replaceAll` does not allow non-global regexes");if(l=w(e,C))return a(l,e,N,t);if(k&&n)return j(y(N),e,t)}for(S=y(N),D=y(e),(R=d(t))||(t=y(t)),I=D.length,M=A(1,I),F=P(S,D,0);-1!==F;)L=R?y(t(D,F,S)):_(D,S,F,[],void 0,t),B+=T(S,q,F)+L,q=F+I,F=P(S,D,F+M);return q<S.length&&(B+=T(S,q)),B}})},85940:function(e,t,n){"use strict";var r=n(53171),a=n(20266),l=n(65968),f=n(94954),d=n(24229),h=n(21176),p=n(26733),y=n(9650),w=n(43329),x=n(34237),_=n(83326),S=n(58885),k=n(36637),C=n(55300),E=n(70017),O=n(98115),j=n(70095)("replace"),T=Math.max,A=Math.min,P=l([].concat),D=l([].push),R=l("".indexOf),I=l("".slice),M="$0"==="a".replace(/./,"$0"),L=!!/./[j]&&""===/./[j]("a","$0");f("replace",(function(e,t,n){var l=L?"$":"$0";return[function(e,n){var r=S(this),l=y(e)?void 0:C(e,j);return l?a(l,e,r,n):a(t,_(r),e,n)},function(e,a){var f=h(this),d=_(e);if("string"==typeof a&&-1===R(a,l)&&-1===R(a,"$<")){var y=n(t,f,d,a);if(y.done)return y.value}var S=p(a);S||(a=_(a));var C=f.global;if(C){var j=f.unicode;f.lastIndex=0}for(var M=[];;){var L=O(f,d);if(null===L)break;if(D(M,L),!C)break;""===_(L[0])&&(f.lastIndex=k(d,x(f.lastIndex),j))}for(var N,F="",q=0,B=0;B<M.length;B++){for(var U=_((L=M[B])[0]),H=T(A(w(L.index),d.length),0),z=[],V=1;V<L.length;V++)D(z,void 0===(N=L[V])?N:String(N));var W=L.groups;if(S){var Z=P([U],z,H,d);void 0!==W&&D(Z,W);var G=_(r(a,void 0,Z))}else G=E(U,d,H,z,W,a);H>=q&&(F+=I(d,q,H)+G,q=H+U.length)}return F+I(d,q)}]}),!!d((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!M||L)},94908:function(e,t,n){"use strict";var r=n(20266),a=n(94954),l=n(21176),f=n(9650),d=n(58885),h=n(72101),p=n(83326),y=n(55300),w=n(98115);a("search",(function(e,t,n){return[function(t){var n=d(this),a=f(t)?void 0:y(t,e);return a?r(a,t,n):new RegExp(t)[e](p(n))},function(e){var r=l(this),a=p(e),f=n(t,r,a);if(f.done)return f.value;var d=r.lastIndex;h(d,0)||(r.lastIndex=0);var y=w(r,a);return h(r.lastIndex,d)||(r.lastIndex=d),null===y?-1:y.index}]}))},48319:function(e,t,n){"use strict";var r=n(53171),a=n(20266),l=n(65968),f=n(94954),d=n(21176),h=n(9650),p=n(48311),y=n(58885),w=n(37942),x=n(36637),_=n(34237),S=n(83326),k=n(55300),C=n(69794),E=n(98115),O=n(63466),j=n(25650),T=n(24229),A=j.UNSUPPORTED_Y,P=4294967295,D=Math.min,R=[].push,I=l(/./.exec),M=l(R),L=l("".slice),N=!T((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));f("split",(function(e,t,n){var l;return l="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var l=S(y(this)),f=void 0===n?P:n>>>0;if(0===f)return[];if(void 0===e)return[l];if(!p(e))return a(t,l,e,f);for(var d,h,w,x=[],_=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),k=0,E=new RegExp(e.source,_+"g");(d=a(O,E,l))&&!((h=E.lastIndex)>k&&(M(x,L(l,k,d.index)),d.length>1&&d.index<l.length&&r(R,x,C(d,1)),w=d[0].length,k=h,x.length>=f));)E.lastIndex===d.index&&E.lastIndex++;return k===l.length?!w&&I(E,"")||M(x,""):M(x,L(l,k)),x.length>f?C(x,0,f):x}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:a(t,this,e,n)}:t,[function(t,n){var r=y(this),f=h(t)?void 0:k(t,e);return f?a(f,t,r,n):a(l,S(r),t,n)},function(e,r){var a=d(this),f=S(e),h=n(l,a,f,r,l!==t);if(h.done)return h.value;var p=w(a,RegExp),y=a.unicode,k=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(A?"g":"y"),C=new p(A?"^(?:"+a.source+")":a,k),O=void 0===r?P:r>>>0;if(0===O)return[];if(0===f.length)return null===E(C,f)?[f]:[];for(var j=0,T=0,R=[];T<f.length;){C.lastIndex=A?0:T;var I,N=E(C,A?L(f,T):f);if(null===N||(I=D(_(C.lastIndex+(A?T:0)),f.length))===j)T=x(f,T,y);else{if(M(R,L(f,j,T)),R.length===O)return R;for(var F=1;F<=N.length-1;F++)if(M(R,N[F]),R.length===O)return R;T=j=I}}return M(R,L(f,j)),R}]}),!N,A)},44112:function(e,t,n){"use strict";var r,a=n(23103),l=n(44745),f=n(97933).f,d=n(34237),h=n(83326),p=n(47272),y=n(58885),w=n(48127),x=n(24231),_=l("".startsWith),S=l("".slice),k=Math.min,C=w("startsWith");a({target:"String",proto:!0,forced:!!(x||C||(r=f(String.prototype,"startsWith"),!r||r.writable))&&!C},{startsWith:function(e){var t=h(y(this));p(e);var n=d(k(arguments.length>1?arguments[1]:void 0,t.length)),r=h(e);return _?_(t,r,n):S(t,n,n+r.length)===r}})},45794:function(e,t,n){"use strict";var r=n(23103),a=n(1017).trim;r({target:"String",proto:!0,forced:n(9445)("trim")},{trim:function(){return a(this)}})},96882:function(e,t,n){n(63524)("asyncIterator")},39956:function(e,t,n){"use strict";var r=n(23103),a=n(9859),l=n(20266),f=n(65968),d=n(24231),h=n(7400),p=n(44860),y=n(24229),w=n(98270),x=n(91321),_=n(21176),S=n(10905),k=n(39310),C=n(83326),E=n(65358),O=n(22391),j=n(65632),T=n(78151),A=n(10166),P=n(10894),D=n(97933),R=n(31787),I=n(90219),M=n(19195),L=n(14768),N=n(96616),F=n(33036),q=n(44399),B=n(95977),U=n(81441),H=n(70095),z=n(55391),V=n(63524),W=n(66481),Z=n(54555),G=n(56407),K=n(89996).forEach,Y=q("hidden"),X="Symbol",J="prototype",Q=G.set,ee=G.getterFor(X),te=Object[J],ne=a.Symbol,re=ne&&ne[J],oe=a.TypeError,ae=a.QObject,se=D.f,le=R.f,ce=A.f,ue=M.f,fe=f([].push),de=F("symbols"),he=F("op-symbols"),pe=F("wks"),me=!ae||!ae[J]||!ae[J].findChild,ge=h&&y((function(){return 7!=O(le({},"a",{get:function(){return le(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=se(te,t);r&&delete te[t],le(e,t,n),r&&e!==te&&le(te,t,r)}:le,ve=function(e,t){var n=de[e]=O(re);return Q(n,{type:X,tag:e,description:t}),h||(n.description=t),n},ye=function(e,t,n){e===te&&ye(he,t,n),_(e);var r=k(t);return _(n),w(de,r)?(n.enumerable?(w(e,Y)&&e[Y][r]&&(e[Y][r]=!1),n=O(n,{enumerable:E(0,!1)})):(w(e,Y)||le(e,Y,E(1,{})),e[Y][r]=!0),ge(e,r,n)):le(e,r,n)},be=function(e,t){_(e);var n=S(t),r=j(n).concat(Se(n));return K(r,(function(t){h&&!l(we,n,t)||ye(e,t,n[t])})),e},we=function(e){var t=k(e),n=l(ue,this,t);return!(this===te&&w(de,t)&&!w(he,t))&&(!(n||!w(this,t)||!w(de,t)||w(this,Y)&&this[Y][t])||n)},xe=function(e,t){var n=S(e),r=k(t);if(n!==te||!w(de,r)||w(he,r)){var a=se(n,r);return!a||!w(de,r)||w(n,Y)&&n[Y][r]||(a.enumerable=!0),a}},_e=function(e){var t=ce(S(e)),n=[];return K(t,(function(e){w(de,e)||w(B,e)||fe(n,e)})),n},Se=function(e){var t=e===te,n=ce(t?he:S(e)),r=[];return K(n,(function(e){!w(de,e)||t&&!w(te,e)||fe(r,de[e])})),r};p||(ne=function(){if(x(re,this))throw oe("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?C(arguments[0]):void 0,t=U(e),n=function(e){this===te&&l(n,he,e),w(this,Y)&&w(this[Y],t)&&(this[Y][t]=!1),ge(this,t,E(1,e))};return h&&me&&ge(te,t,{configurable:!0,set:n}),ve(t,e)},L(re=ne[J],"toString",(function(){return ee(this).tag})),L(ne,"withoutSetter",(function(e){return ve(U(e),e)})),M.f=we,R.f=ye,I.f=be,D.f=xe,T.f=A.f=_e,P.f=Se,z.f=function(e){return ve(H(e),e)},h&&(N(re,"description",{configurable:!0,get:function(){return ee(this).description}}),d||L(te,"propertyIsEnumerable",we,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!p,sham:!p},{Symbol:ne}),K(j(pe),(function(e){V(e)})),r({target:X,stat:!0,forced:!p},{useSetter:function(){me=!0},useSimple:function(){me=!1}}),r({target:"Object",stat:!0,forced:!p,sham:!h},{create:function(e,t){return void 0===t?O(e):be(O(e),t)},defineProperty:ye,defineProperties:be,getOwnPropertyDescriptor:xe}),r({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:_e}),W(),Z(ne,X),B[Y]=!0},634:function(e,t,n){"use strict";var r=n(23103),a=n(7400),l=n(9859),f=n(65968),d=n(98270),h=n(26733),p=n(91321),y=n(83326),w=n(96616),x=n(77081),_=l.Symbol,S=_&&_.prototype;if(a&&h(_)&&(!("description"in S)||void 0!==_().description)){var k={},C=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:y(arguments[0]),t=p(S,this)?new _(e):void 0===e?_():_(e);return""===e&&(k[t]=!0),t};x(C,_),C.prototype=S,S.constructor=C;var E="Symbol(test)"==String(_("test")),O=f(S.valueOf),j=f(S.toString),T=/^Symbol\((.*)\)[^)]+$/,A=f("".replace),P=f("".slice);w(S,"description",{configurable:!0,get:function(){var e=O(this);if(d(k,e))return"";var t=j(e),n=E?P(t,7,-1):A(t,T,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:C})}},23352:function(e,t,n){var r=n(23103),a=n(31333),l=n(98270),f=n(83326),d=n(33036),h=n(55957),p=d("string-to-symbol-registry"),y=d("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!h},{for:function(e){var t=f(e);if(l(p,t))return p[t];var n=a("Symbol")(t);return p[t]=n,y[n]=t,n}})},20796:function(e,t,n){n(63524)("iterator")},34115:function(e,t,n){n(39956),n(23352),n(49717),n(6710),n(82067)},49717:function(e,t,n){var r=n(23103),a=n(98270),l=n(49395),f=n(59821),d=n(33036),h=n(55957),p=d("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!h},{keyFor:function(e){if(!l(e))throw TypeError(f(e)+" is not a symbol");if(a(p,e))return p[e]}})},9575:function(e,t,n){var r=n(63524),a=n(66481);r("toPrimitive"),a()},38859:function(e,t,n){var r=n(31333),a=n(63524),l=n(54555);a("toStringTag"),l(r("Symbol"),"Symbol")},1939:function(e,t,n){var r=n(9859),a=n(95694),l=n(18865),f=n(86570),d=n(75762),h=function(e){if(e&&e.forEach!==f)try{d(e,"forEach",f)}catch(t){e.forEach=f}};for(var p in a)a[p]&&h(r[p]&&r[p].prototype);h(l)},6886:function(e,t,n){var r=n(9859),a=n(95694),l=n(18865),f=n(15735),d=n(75762),h=n(70095),p=h("iterator"),y=h("toStringTag"),w=f.values,x=function(e,t){if(e){if(e[p]!==w)try{d(e,p,w)}catch(t){e[p]=w}if(e[y]||d(e,y,t),a[t])for(var n in f)if(e[n]!==f[n])try{d(e,n,f[n])}catch(t){e[n]=f[n]}}};for(var _ in a)x(r[_]&&r[_].prototype,_);x(l,"DOMTokenList")},62653:function(e,t,n){"use strict";n(15735);var r=n(23103),a=n(9859),l=n(20266),f=n(65968),d=n(7400),h=n(34144),p=n(14768),y=n(96616),w=n(8312),x=n(54555),_=n(42247),S=n(56407),k=n(57728),C=n(26733),E=n(98270),O=n(97636),j=n(81589),T=n(21176),A=n(85052),P=n(83326),D=n(22391),R=n(65358),I=n(28403),M=n(78830),L=n(77579),N=n(70095),F=n(33867),q=N("iterator"),B="URLSearchParams",U=B+"Iterator",H=S.set,z=S.getterFor(B),V=S.getterFor(U),W=Object.getOwnPropertyDescriptor,Z=function(e){if(!d)return a[e];var t=W(a,e);return t&&t.value},G=Z("fetch"),K=Z("Request"),Y=Z("Headers"),X=K&&K.prototype,J=Y&&Y.prototype,Q=a.RegExp,ee=a.TypeError,te=a.decodeURIComponent,ne=a.encodeURIComponent,re=f("".charAt),oe=f([].join),ae=f([].push),se=f("".replace),le=f([].shift),ce=f([].splice),ue=f("".split),fe=f("".slice),de=/\+/g,he=Array(4),pe=function(e){return he[e-1]||(he[e-1]=Q("((?:%[\\da-f]{2}){"+e+"})","gi"))},me=function(e){try{return te(e)}catch(t){return e}},ge=function(e){var t=se(e,de," "),n=4;try{return te(t)}catch(e){for(;n;)t=se(t,pe(n--),me);return t}},ve=/[!'()~]|%20/g,ye={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},be=function(e){return ye[e]},we=function(e){return se(ne(e),ve,be)},xe=_((function(e,t){H(this,{type:U,iterator:I(z(e).entries),kind:t})}),"Iterator",(function(){var e=V(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),_e=function(e){this.entries=[],this.url=null,void 0!==e&&(A(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===re(e,0)?fe(e,1):e:P(e)))};_e.prototype={type:B,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,a,f,d,h,p=M(e);if(p)for(n=(t=I(e,p)).next;!(r=l(n,t)).done;){if(f=(a=I(T(r.value))).next,(d=l(f,a)).done||(h=l(f,a)).done||!l(f,a).done)throw ee("Expected sequence with length 2");ae(this.entries,{key:P(d.value),value:P(h.value)})}else for(var y in e)E(e,y)&&ae(this.entries,{key:y,value:P(e[y])})},parseQuery:function(e){if(e)for(var t,n,r=ue(e,"&"),a=0;a<r.length;)(t=r[a++]).length&&(n=ue(t,"="),ae(this.entries,{key:ge(le(n)),value:ge(oe(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],ae(n,we(e.key)+"="+we(e.value));return oe(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Se=function(){k(this,ke);var e=H(this,new _e(arguments.length>0?arguments[0]:void 0));d||(this.length=e.entries.length)},ke=Se.prototype;if(w(ke,{append:function(e,t){L(arguments.length,2);var n=z(this);ae(n.entries,{key:P(e),value:P(t)}),d||this.length++,n.updateURL()},delete:function(e){L(arguments.length,1);for(var t=z(this),n=t.entries,r=P(e),a=0;a<n.length;)n[a].key===r?ce(n,a,1):a++;d||(this.length=n.length),t.updateURL()},get:function(e){L(arguments.length,1);for(var t=z(this).entries,n=P(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){L(arguments.length,1);for(var t=z(this).entries,n=P(e),r=[],a=0;a<t.length;a++)t[a].key===n&&ae(r,t[a].value);return r},has:function(e){L(arguments.length,1);for(var t=z(this).entries,n=P(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){L(arguments.length,1);for(var n,r=z(this),a=r.entries,l=!1,f=P(e),h=P(t),p=0;p<a.length;p++)(n=a[p]).key===f&&(l?ce(a,p--,1):(l=!0,n.value=h));l||ae(a,{key:f,value:h}),d||(this.length=a.length),r.updateURL()},sort:function(){var e=z(this);F(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=z(this).entries,r=O(e,arguments.length>1?arguments[1]:void 0),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new xe(this,"keys")},values:function(){return new xe(this,"values")},entries:function(){return new xe(this,"entries")}},{enumerable:!0}),p(ke,q,ke.entries,{name:"entries"}),p(ke,"toString",(function(){return z(this).serialize()}),{enumerable:!0}),d&&y(ke,"size",{get:function(){return z(this).entries.length},configurable:!0,enumerable:!0}),x(Se,B),r({global:!0,constructor:!0,forced:!h},{URLSearchParams:Se}),!h&&C(Y)){var Ce=f(J.has),Ee=f(J.set),Oe=function(e){if(A(e)){var t,n=e.body;if(j(n)===B)return t=e.headers?new Y(e.headers):new Y,Ce(t,"content-type")||Ee(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),D(e,{body:R(0,P(n)),headers:R(0,t)})}return e};if(C(G)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return G(e,arguments.length>1?Oe(arguments[1]):{})}}),C(K)){var je=function(e){return k(this,X),new K(e,arguments.length>1?Oe(arguments[1]):{})};X.constructor=je,je.prototype=X,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:je})}}e.exports={URLSearchParams:Se,getState:z}},60523:function(e,t,n){n(62653)},95340:function(e,t,n){"use strict";n(28673);var r,a=n(23103),l=n(7400),f=n(34144),d=n(9859),h=n(97636),p=n(65968),y=n(14768),w=n(96616),x=n(57728),_=n(98270),S=n(47),k=n(10507),C=n(69794),E=n(30966).codeAt,O=n(77321),j=n(83326),T=n(54555),A=n(77579),P=n(62653),D=n(56407),R=D.set,I=D.getterFor("URL"),M=P.URLSearchParams,L=P.getState,N=d.URL,F=d.TypeError,q=d.parseInt,B=Math.floor,U=Math.pow,H=p("".charAt),z=p(/./.exec),V=p([].join),W=p(1..toString),Z=p([].pop),G=p([].push),K=p("".replace),Y=p([].shift),X=p("".split),J=p("".slice),Q=p("".toLowerCase),ee=p([].unshift),te="Invalid scheme",ne="Invalid host",re="Invalid port",oe=/[a-z]/i,ae=/[\d+-.a-z]/i,se=/\d/,le=/^0x/i,ce=/^[0-7]+$/,ue=/^\d+$/,fe=/^[\da-f]+$/i,de=/[\0\t\n\r #%/:<>?@[\\\]^|]/,he=/[\0\t\n\r #/:<>?@[\\\]^|]/,pe=/^[\u0000-\u0020]+/,me=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ge=/[\t\n\r]/g,ve=function(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)ee(t,e%256),e=B(e/256);return V(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,a=0,l=0;l<8;l++)0!==e[l]?(a>n&&(t=r,n=a),r=null,a=0):(null===r&&(r=l),++a);return a>n&&(t=r,n=a),t}(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),r===n?(t+=n?":":"::",a=!0):(t+=W(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ye={},be=S({},ye,{" ":1,'"':1,"<":1,">":1,"`":1}),we=S({},be,{"#":1,"?":1,"{":1,"}":1}),xe=S({},we,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),_e=function(e,t){var n=E(e,0);return n>32&&n<127&&!_(t,e)?e:encodeURIComponent(e)},Se={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ke=function(e,t){var n;return 2==e.length&&z(oe,H(e,0))&&(":"==(n=H(e,1))||!t&&"|"==n)},Ce=function(e){var t;return e.length>1&&ke(J(e,0,2))&&(2==e.length||"/"===(t=H(e,2))||"\\"===t||"?"===t||"#"===t)},Ee=function(e){return"."===e||"%2e"===Q(e)},Oe={},je={},$e={},Te={},Ae={},Pe={},De={},Re={},Ie={},Me={},Le={},Ne={},Fe={},qe={},Be={},Ue={},He={},ze={},Ve={},We={},Ze={},Ge=function(e,t,n){var r,a,l,f=j(e);if(t){if(a=this.parse(f))throw F(a);this.searchParams=null}else{if(void 0!==n&&(r=new Ge(n,!0)),a=this.parse(f,null,r))throw F(a);(l=L(new M)).bindURL(this),this.searchParams=l}};Ge.prototype={type:"URL",parse:function(e,t,n){var a,l,f,d,h,p=this,y=t||Oe,w=0,x="",S=!1,E=!1,O=!1;for(e=j(e),t||(p.scheme="",p.username="",p.password="",p.host=null,p.port=null,p.path=[],p.query=null,p.fragment=null,p.cannotBeABaseURL=!1,e=K(e,pe,""),e=K(e,me,"$1")),e=K(e,ge,""),a=k(e);w<=a.length;){switch(l=a[w],y){case Oe:if(!l||!z(oe,l)){if(t)return te;y=$e;continue}x+=Q(l),y=je;break;case je:if(l&&(z(ae,l)||"+"==l||"-"==l||"."==l))x+=Q(l);else{if(":"!=l){if(t)return te;x="",y=$e,w=0;continue}if(t&&(p.isSpecial()!=_(Se,x)||"file"==x&&(p.includesCredentials()||null!==p.port)||"file"==p.scheme&&!p.host))return;if(p.scheme=x,t)return void(p.isSpecial()&&Se[p.scheme]==p.port&&(p.port=null));x="","file"==p.scheme?y=qe:p.isSpecial()&&n&&n.scheme==p.scheme?y=Te:p.isSpecial()?y=Re:"/"==a[w+1]?(y=Ae,w++):(p.cannotBeABaseURL=!0,G(p.path,""),y=Ve)}break;case $e:if(!n||n.cannotBeABaseURL&&"#"!=l)return te;if(n.cannotBeABaseURL&&"#"==l){p.scheme=n.scheme,p.path=C(n.path),p.query=n.query,p.fragment="",p.cannotBeABaseURL=!0,y=Ze;break}y="file"==n.scheme?qe:Pe;continue;case Te:if("/"!=l||"/"!=a[w+1]){y=Pe;continue}y=Ie,w++;break;case Ae:if("/"==l){y=Me;break}y=ze;continue;case Pe:if(p.scheme=n.scheme,l==r)p.username=n.username,p.password=n.password,p.host=n.host,p.port=n.port,p.path=C(n.path),p.query=n.query;else if("/"==l||"\\"==l&&p.isSpecial())y=De;else if("?"==l)p.username=n.username,p.password=n.password,p.host=n.host,p.port=n.port,p.path=C(n.path),p.query="",y=We;else{if("#"!=l){p.username=n.username,p.password=n.password,p.host=n.host,p.port=n.port,p.path=C(n.path),p.path.length--,y=ze;continue}p.username=n.username,p.password=n.password,p.host=n.host,p.port=n.port,p.path=C(n.path),p.query=n.query,p.fragment="",y=Ze}break;case De:if(!p.isSpecial()||"/"!=l&&"\\"!=l){if("/"!=l){p.username=n.username,p.password=n.password,p.host=n.host,p.port=n.port,y=ze;continue}y=Me}else y=Ie;break;case Re:if(y=Ie,"/"!=l||"/"!=H(x,w+1))continue;w++;break;case Ie:if("/"!=l&&"\\"!=l){y=Me;continue}break;case Me:if("@"==l){S&&(x="%40"+x),S=!0,f=k(x);for(var T=0;T<f.length;T++){var A=f[T];if(":"!=A||O){var P=_e(A,xe);O?p.password+=P:p.username+=P}else O=!0}x=""}else if(l==r||"/"==l||"?"==l||"#"==l||"\\"==l&&p.isSpecial()){if(S&&""==x)return"Invalid authority";w-=k(x).length+1,x="",y=Le}else x+=l;break;case Le:case Ne:if(t&&"file"==p.scheme){y=Ue;continue}if(":"!=l||E){if(l==r||"/"==l||"?"==l||"#"==l||"\\"==l&&p.isSpecial()){if(p.isSpecial()&&""==x)return ne;if(t&&""==x&&(p.includesCredentials()||null!==p.port))return;if(d=p.parseHost(x))return d;if(x="",y=He,t)return;continue}"["==l?E=!0:"]"==l&&(E=!1),x+=l}else{if(""==x)return ne;if(d=p.parseHost(x))return d;if(x="",y=Fe,t==Ne)return}break;case Fe:if(!z(se,l)){if(l==r||"/"==l||"?"==l||"#"==l||"\\"==l&&p.isSpecial()||t){if(""!=x){var D=q(x,10);if(D>65535)return re;p.port=p.isSpecial()&&D===Se[p.scheme]?null:D,x=""}if(t)return;y=He;continue}return re}x+=l;break;case qe:if(p.scheme="file","/"==l||"\\"==l)y=Be;else{if(!n||"file"!=n.scheme){y=ze;continue}if(l==r)p.host=n.host,p.path=C(n.path),p.query=n.query;else if("?"==l)p.host=n.host,p.path=C(n.path),p.query="",y=We;else{if("#"!=l){Ce(V(C(a,w),""))||(p.host=n.host,p.path=C(n.path),p.shortenPath()),y=ze;continue}p.host=n.host,p.path=C(n.path),p.query=n.query,p.fragment="",y=Ze}}break;case Be:if("/"==l||"\\"==l){y=Ue;break}n&&"file"==n.scheme&&!Ce(V(C(a,w),""))&&(ke(n.path[0],!0)?G(p.path,n.path[0]):p.host=n.host),y=ze;continue;case Ue:if(l==r||"/"==l||"\\"==l||"?"==l||"#"==l){if(!t&&ke(x))y=ze;else if(""==x){if(p.host="",t)return;y=He}else{if(d=p.parseHost(x))return d;if("localhost"==p.host&&(p.host=""),t)return;x="",y=He}continue}x+=l;break;case He:if(p.isSpecial()){if(y=ze,"/"!=l&&"\\"!=l)continue}else if(t||"?"!=l)if(t||"#"!=l){if(l!=r&&(y=ze,"/"!=l))continue}else p.fragment="",y=Ze;else p.query="",y=We;break;case ze:if(l==r||"/"==l||"\\"==l&&p.isSpecial()||!t&&("?"==l||"#"==l)){if(".."===(h=Q(h=x))||"%2e."===h||".%2e"===h||"%2e%2e"===h?(p.shortenPath(),"/"==l||"\\"==l&&p.isSpecial()||G(p.path,"")):Ee(x)?"/"==l||"\\"==l&&p.isSpecial()||G(p.path,""):("file"==p.scheme&&!p.path.length&&ke(x)&&(p.host&&(p.host=""),x=H(x,0)+":"),G(p.path,x)),x="","file"==p.scheme&&(l==r||"?"==l||"#"==l))for(;p.path.length>1&&""===p.path[0];)Y(p.path);"?"==l?(p.query="",y=We):"#"==l&&(p.fragment="",y=Ze)}else x+=_e(l,we);break;case Ve:"?"==l?(p.query="",y=We):"#"==l?(p.fragment="",y=Ze):l!=r&&(p.path[0]+=_e(l,ye));break;case We:t||"#"!=l?l!=r&&("'"==l&&p.isSpecial()?p.query+="%27":p.query+="#"==l?"%23":_e(l,ye)):(p.fragment="",y=Ze);break;case Ze:l!=r&&(p.fragment+=_e(l,be))}w++}},parseHost:function(e){var t,n,r;if("["==H(e,0)){if("]"!=H(e,e.length-1))return ne;if(t=function(e){var t,n,r,a,l,f,d,h=[0,0,0,0,0,0,0,0],p=0,y=null,w=0,x=function(){return H(e,w)};if(":"==x()){if(":"!=H(e,1))return;w+=2,y=++p}for(;x();){if(8==p)return;if(":"!=x()){for(t=n=0;n<4&&z(fe,x());)t=16*t+q(x(),16),w++,n++;if("."==x()){if(0==n)return;if(w-=n,p>6)return;for(r=0;x();){if(a=null,r>0){if(!("."==x()&&r<4))return;w++}if(!z(se,x()))return;for(;z(se,x());){if(l=q(x(),10),null===a)a=l;else{if(0==a)return;a=10*a+l}if(a>255)return;w++}h[p]=256*h[p]+a,2!=++r&&4!=r||p++}if(4!=r)return;break}if(":"==x()){if(w++,!x())return}else if(x())return;h[p++]=t}else{if(null!==y)return;w++,y=++p}}if(null!==y)for(f=p-y,p=7;0!=p&&f>0;)d=h[p],h[p--]=h[y+f-1],h[y+--f]=d;else if(8!=p)return;return h}(J(e,1,-1)),!t)return ne;this.host=t}else if(this.isSpecial()){if(e=O(e),z(de,e))return ne;if(t=function(e){var t,n,r,a,l,f,d,h=X(e,".");if(h.length&&""==h[h.length-1]&&h.length--,(t=h.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(a=h[r]))return e;if(l=10,a.length>1&&"0"==H(a,0)&&(l=z(le,a)?16:8,a=J(a,8==l?1:2)),""===a)f=0;else{if(!z(10==l?ue:8==l?ce:fe,a))return e;f=q(a,l)}G(n,f)}for(r=0;r<t;r++)if(f=n[r],r==t-1){if(f>=U(256,5-t))return null}else if(f>255)return null;for(d=Z(n),r=0;r<n.length;r++)d+=n[r]*U(256,3-r);return d}(e),null===t)return ne;this.host=t}else{if(z(he,e))return ne;for(t="",n=k(e),r=0;r<n.length;r++)t+=_e(n[r],ye);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return _(Se,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&ke(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,a=e.host,l=e.port,f=e.path,d=e.query,h=e.fragment,p=t+":";return null!==a?(p+="//",e.includesCredentials()&&(p+=n+(r?":"+r:"")+"@"),p+=ve(a),null!==l&&(p+=":"+l)):"file"==t&&(p+="//"),p+=e.cannotBeABaseURL?f[0]:f.length?"/"+V(f,"/"):"",null!==d&&(p+="?"+d),null!==h&&(p+="#"+h),p},setHref:function(e){var t=this.parse(e);if(t)throw F(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Ke(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+ve(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(j(e)+":",Oe)},getUsername:function(){return this.username},setUsername:function(e){var t=k(j(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=_e(t[n],xe)}},getPassword:function(){return this.password},setPassword:function(e){var t=k(j(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=_e(t[n],xe)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?ve(e):ve(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Le)},getHostname:function(){var e=this.host;return null===e?"":ve(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Ne)},getPort:function(){var e=this.port;return null===e?"":j(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=j(e))?this.port=null:this.parse(e,Fe))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+V(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,He))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=j(e))?this.query=null:("?"==H(e,0)&&(e=J(e,1)),this.query="",this.parse(e,We)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=j(e))?("#"==H(e,0)&&(e=J(e,1)),this.fragment="",this.parse(e,Ze)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ke=function(e){var t=x(this,Ye),n=A(arguments.length,1)>1?arguments[1]:void 0,r=R(t,new Ge(e,!1,n));l||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Ye=Ke.prototype,Xe=function(e,t){return{get:function(){return I(this)[e]()},set:t&&function(e){return I(this)[t](e)},configurable:!0,enumerable:!0}};if(l&&(w(Ye,"href",Xe("serialize","setHref")),w(Ye,"origin",Xe("getOrigin")),w(Ye,"protocol",Xe("getProtocol","setProtocol")),w(Ye,"username",Xe("getUsername","setUsername")),w(Ye,"password",Xe("getPassword","setPassword")),w(Ye,"host",Xe("getHost","setHost")),w(Ye,"hostname",Xe("getHostname","setHostname")),w(Ye,"port",Xe("getPort","setPort")),w(Ye,"pathname",Xe("getPathname","setPathname")),w(Ye,"search",Xe("getSearch","setSearch")),w(Ye,"searchParams",Xe("getSearchParams")),w(Ye,"hash",Xe("getHash","setHash"))),y(Ye,"toJSON",(function(){return I(this).serialize()}),{enumerable:!0}),y(Ye,"toString",(function(){return I(this).serialize()}),{enumerable:!0}),N){var Je=N.createObjectURL,Qe=N.revokeObjectURL;Je&&y(Ke,"createObjectURL",h(Je,N)),Qe&&y(Ke,"revokeObjectURL",h(Qe,N))}T(Ke,"URL"),a({global:!0,constructor:!0,forced:!f,sham:!l},{URL:Ke})},14121:function(e,t,n){n(95340)},57359:function(e,t){var n;e.exports=(n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},a=r.lib={},l=a.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},f=a.WordArray=l.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,a=e.sigBytes;if(this.clamp(),r%4)for(var l=0;l<a;l++){var f=n[l>>>2]>>>24-l%4*8&255;t[r+l>>>2]|=f<<24-(r+l)%4*8}else for(l=0;l<a;l+=4)t[r+l>>>2]=n[l>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],a=function(t){var n=987654321,r=4294967295;return function(){var a=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},l=0;l<t;l+=4){var d=a(4294967296*(n||e.random()));n=987654071*d(),r.push(4294967296*d()|0)}return new f.init(r,t)}}),d=r.enc={},h=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var l=t[a>>>2]>>>24-a%4*8&255;r.push((l>>>4).toString(16)),r.push((15&l).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new f.init(n,t/2)}},p=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var l=t[a>>>2]>>>24-a%4*8&255;r.push(String.fromCharCode(l))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new f.init(n,t)}},y=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},w=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=y.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,l=this.blockSize,d=a/(4*l),h=(d=t?e.ceil(d):e.max((0|d)-this._minBufferSize,0))*l,p=e.min(4*h,a);if(h){for(var y=0;y<h;y+=l)this._doProcessBlock(r,y);var w=r.splice(0,h);n.sigBytes-=p}return new f.init(w,p)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),x=(a.Hasher=w.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new x.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math),n)},79174:function(e,t,n){var r;e.exports=(r=n(57359),function(e){var t=r,n=t.lib,a=n.WordArray,l=n.Hasher,f=t.algo,d=[];!function(){for(var t=0;t<64;t++)d[t]=4294967296*e.abs(e.sin(t+1))|0}();var h=f.MD5=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,a=e[r];e[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var l=this._hash.words,f=e[t+0],h=e[t+1],_=e[t+2],S=e[t+3],k=e[t+4],C=e[t+5],E=e[t+6],O=e[t+7],j=e[t+8],T=e[t+9],A=e[t+10],P=e[t+11],D=e[t+12],R=e[t+13],I=e[t+14],M=e[t+15],L=l[0],N=l[1],F=l[2],q=l[3];L=p(L,N,F,q,f,7,d[0]),q=p(q,L,N,F,h,12,d[1]),F=p(F,q,L,N,_,17,d[2]),N=p(N,F,q,L,S,22,d[3]),L=p(L,N,F,q,k,7,d[4]),q=p(q,L,N,F,C,12,d[5]),F=p(F,q,L,N,E,17,d[6]),N=p(N,F,q,L,O,22,d[7]),L=p(L,N,F,q,j,7,d[8]),q=p(q,L,N,F,T,12,d[9]),F=p(F,q,L,N,A,17,d[10]),N=p(N,F,q,L,P,22,d[11]),L=p(L,N,F,q,D,7,d[12]),q=p(q,L,N,F,R,12,d[13]),F=p(F,q,L,N,I,17,d[14]),L=y(L,N=p(N,F,q,L,M,22,d[15]),F,q,h,5,d[16]),q=y(q,L,N,F,E,9,d[17]),F=y(F,q,L,N,P,14,d[18]),N=y(N,F,q,L,f,20,d[19]),L=y(L,N,F,q,C,5,d[20]),q=y(q,L,N,F,A,9,d[21]),F=y(F,q,L,N,M,14,d[22]),N=y(N,F,q,L,k,20,d[23]),L=y(L,N,F,q,T,5,d[24]),q=y(q,L,N,F,I,9,d[25]),F=y(F,q,L,N,S,14,d[26]),N=y(N,F,q,L,j,20,d[27]),L=y(L,N,F,q,R,5,d[28]),q=y(q,L,N,F,_,9,d[29]),F=y(F,q,L,N,O,14,d[30]),L=w(L,N=y(N,F,q,L,D,20,d[31]),F,q,C,4,d[32]),q=w(q,L,N,F,j,11,d[33]),F=w(F,q,L,N,P,16,d[34]),N=w(N,F,q,L,I,23,d[35]),L=w(L,N,F,q,h,4,d[36]),q=w(q,L,N,F,k,11,d[37]),F=w(F,q,L,N,O,16,d[38]),N=w(N,F,q,L,A,23,d[39]),L=w(L,N,F,q,R,4,d[40]),q=w(q,L,N,F,f,11,d[41]),F=w(F,q,L,N,S,16,d[42]),N=w(N,F,q,L,E,23,d[43]),L=w(L,N,F,q,T,4,d[44]),q=w(q,L,N,F,D,11,d[45]),F=w(F,q,L,N,M,16,d[46]),L=x(L,N=w(N,F,q,L,_,23,d[47]),F,q,f,6,d[48]),q=x(q,L,N,F,O,10,d[49]),F=x(F,q,L,N,I,15,d[50]),N=x(N,F,q,L,C,21,d[51]),L=x(L,N,F,q,D,6,d[52]),q=x(q,L,N,F,S,10,d[53]),F=x(F,q,L,N,A,15,d[54]),N=x(N,F,q,L,h,21,d[55]),L=x(L,N,F,q,j,6,d[56]),q=x(q,L,N,F,M,10,d[57]),F=x(F,q,L,N,E,15,d[58]),N=x(N,F,q,L,R,21,d[59]),L=x(L,N,F,q,k,6,d[60]),q=x(q,L,N,F,P,10,d[61]),F=x(F,q,L,N,_,15,d[62]),N=x(N,F,q,L,T,21,d[63]),l[0]=l[0]+L|0,l[1]=l[1]+N|0,l[2]=l[2]+F|0,l[3]=l[3]+q|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var l=e.floor(r/4294967296),f=r;n[15+(a+64>>>9<<4)]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),n[14+(a+64>>>9<<4)]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),t.sigBytes=4*(n.length+1),this._process();for(var d=this._hash,h=d.words,p=0;p<4;p++){var y=h[p];h[p]=16711935&(y<<8|y>>>24)|4278255360&(y<<24|y>>>8)}return d},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n,r,a,l,f){var d=e+(t&n|~t&r)+a+f;return(d<<l|d>>>32-l)+t}function y(e,t,n,r,a,l,f){var d=e+(t&r|n&~r)+a+f;return(d<<l|d>>>32-l)+t}function w(e,t,n,r,a,l,f){var d=e+(t^n^r)+a+f;return(d<<l|d>>>32-l)+t}function x(e,t,n,r,a,l,f){var d=e+(n^(t|~r))+a+f;return(d<<l|d>>>32-l)+t}t.MD5=l._createHelper(h),t.HmacMD5=l._createHmacHelper(h)}(Math),r.MD5)},81637:function(e,t,n){var r,a,l,f,d,h,p,y;e.exports=(y=n(57359),a=(r=y).lib,l=a.WordArray,f=a.Hasher,d=r.algo,h=[],p=d.SHA1=f.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],l=n[2],f=n[3],d=n[4],p=0;p<80;p++){if(p<16)h[p]=0|e[t+p];else{var y=h[p-3]^h[p-8]^h[p-14]^h[p-16];h[p]=y<<1|y>>>31}var w=(r<<5|r>>>27)+d+h[p];w+=p<20?1518500249+(a&l|~a&f):p<40?1859775393+(a^l^f):p<60?(a&l|a&f|l&f)-1894007588:(a^l^f)-899497514,d=f,f=l,l=a<<30|a>>>2,a=r,r=w}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+l|0,n[3]=n[3]+f|0,n[4]=n[4]+d|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=f.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=f._createHelper(p),r.HmacSHA1=f._createHmacHelper(p),y.SHA1)},6676:function(e,t,n){var r=n(92368),a=n(36658),l=n(68289),f=0,d=4,h=36,p=Math.pow(h,d);function y(){return a((l()*p<<0).toString(h),d)}function w(){return f=f<p?f:0,++f-1}function x(){return"c"+(new Date).getTime().toString(h)+a(w().toString(h),d)+r()+(y()+y())}x.slug=function(){var e=(new Date).getTime().toString(36),t=w().toString(36).slice(-4),n=r().slice(0,1)+r().slice(-1),a=y().slice(-2);return e.slice(-2)+t+n+a},x.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},x.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},x.fingerprint=r,e.exports=x},92368:function(e,t,n){var r=n(36658),a="object"==typeof window?window:self,l=Object.keys(a).length,f=r(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+l.toString(36),4);e.exports=function(){return f}},68289:function(e){var t,n="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(n){var r=Math.pow(2,32)-1;t=function(){return Math.abs(n.getRandomValues(new Uint32Array(1))[0]/r)}}else t=Math.random;e.exports=t},36658:function(e){e.exports=function(e,t){var n="000000000"+e;return n.substr(n.length-t)}},47718:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e){void 0===e&&(e=(0,a.default)());try{return e.activeElement}catch(e){}};var a=r(n(55759));e.exports=t.default},2196:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,a.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var a=r(n(57218));e.exports=t.default},57218:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},33589:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=void 0;var a=r(n(2196));t.addClass=a.default;var l=r(n(24812));t.removeClass=l.default;var f=r(n(57218));t.hasClass=f.default;var d={addClass:a.default,removeClass:l.default,hasClass:f.default};t.default=d},24812:function(e){"use strict";function t(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,n){e.classList?e.classList.remove(n):"string"==typeof e.className?e.className=t(e.className,n):e.setAttribute("class",t(e.className&&e.className.baseVal||"",n))}},96540:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e,t){return function(n){var r=n.currentTarget,f=n.target;(0,l.default)(r,e).some((function(e){return(0,a.default)(e,f)}))&&t.call(this,n)}};var a=r(n(71009)),l=r(n(60351));e.exports=t.default},81836:function(e,t,n){"use strict";var r=n(71600);t.ZP=void 0;var a=r(n(8331));a.default;var l=r(n(70863));l.default;var f=r(n(96540));f.default;var d=r(n(12777));d.default;var h={on:a.default,off:l.default,filter:f.default,listen:d.default};t.ZP=h},12777:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=void 0;var a=r(n(96892)),l=r(n(8331)),f=r(n(70863)),d=function(){};a.default&&(d=function(e,t,n,r){return(0,l.default)(e,t,n,r),function(){(0,f.default)(e,t,n,r)}});var h=d;t.default=h,e.exports=t.default},70863:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=void 0;var a=function(){};r(n(96892)).default&&(a=document.addEventListener?function(e,t,n,r){return e.removeEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0);var l=a;t.default=l,e.exports=t.default},8331:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=void 0;var a=function(){};r(n(96892)).default&&(a=document.addEventListener?function(e,t,n,r){return e.addEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,(function(t){(t=t||window.event).target=t.target||t.srcElement,t.currentTarget=e,n.call(e,t)}))}:void 0);var l=a;t.default=l,e.exports=t.default},55759:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){return e&&e.ownerDocument||document},e.exports=t.default},71009:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=void 0;var a=r(n(96892)).default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):l(e,t)}:l;function l(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}t.default=a,e.exports=t.default},54615:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)},e.exports=t.default},62271:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e){var t=(0,f.default)(e),n=(0,l.default)(t),r=t&&t.documentElement,d={top:0,left:0,height:0,width:0};if(!t)return;if(!(0,a.default)(r,e))return d;void 0!==e.getBoundingClientRect&&(d=e.getBoundingClientRect());return d={top:d.top+(n.pageYOffset||r.scrollTop)-(r.clientTop||0),left:d.left+(n.pageXOffset||r.scrollLeft)-(r.clientLeft||0),width:(null==d.width?e.offsetWidth:d.width)||0,height:(null==d.height?e.offsetHeight:d.height)||0}};var a=r(n(71009)),l=r(n(54615)),f=r(n(55759));e.exports=t.default},47047:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e){var t=(0,a.default)(e),n=e&&e.offsetParent;for(;n&&"html"!==f(e)&&"static"===(0,l.default)(n,"position");)n=n.offsetParent;return n||t.documentElement};var a=r(n(55759)),l=r(n(49182));function f(e){return e.nodeName&&e.nodeName.toLowerCase()}e.exports=t.default},78878:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e,t){var n,r={top:0,left:0};"fixed"===(0,p.default)(e,"position")?n=e.getBoundingClientRect():(t=t||(0,f.default)(e),n=(0,l.default)(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(t)&&(r=(0,l.default)(t)),r.top+=parseInt((0,p.default)(t,"borderTopWidth"),10)-(0,d.default)(t)||0,r.left+=parseInt((0,p.default)(t,"borderLeftWidth"),10)-(0,h.default)(t)||0);return(0,a.default)({},n,{top:n.top-r.top-(parseInt((0,p.default)(e,"marginTop"),10)||0),left:n.left-r.left-(parseInt((0,p.default)(e,"marginLeft"),10)||0)})};var a=r(n(77028)),l=r(n(62271)),f=r(n(47047)),d=r(n(71992)),h=r(n(9884)),p=r(n(49182));e.exports=t.default},60351:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){var a,l="#"===t[0],f="."===t[0],d=l||f?t.slice(1):t;if(n.test(d))return l?(a=(e=e.getElementById?e:document).getElementById(d))?[a]:[]:e.getElementsByClassName&&f?r(e.getElementsByClassName(d)):r(e.getElementsByTagName(t));return r(e.querySelectorAll(t))};var n=/^[\w-]*$/,r=Function.prototype.bind.call(Function.prototype.call,[].slice);e.exports=t.default},9884:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e,t){var n=(0,a.default)(e);if(void 0===t)return n?"pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft:e.scrollLeft;n?n.scrollTo(t,"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop):e.scrollLeft=t};var a=r(n(54615));e.exports=t.default},71992:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e,t){var n=(0,a.default)(e);if(void 0===t)return n?"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop:e.scrollTop;n?n.scrollTo("pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft,t):e.scrollTop=t};var a=r(n(54615));e.exports=t.default},88196:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;"float"==(t=(0,a.default)(t))&&(t="styleFloat");var r=e.currentStyle[t]||null;if(null==r&&n&&n[t]&&(r=n[t]),f.test(r)&&!l.test(t)){var d=n.left,h=e.runtimeStyle,p=h&&h.left;p&&(h.left=e.currentStyle.left),n.left="fontSize"===t?"1em":r,r=n.pixelLeft+"px",n.left=d,p&&(h.left=p)}return r}}};var a=r(n(15165)),l=/^(top|right|bottom|left)$/,f=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default},49182:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e,t,n){var r="",y="",w=t;if("string"==typeof t){if(void 0===n)return e.style[(0,a.default)(t)]||(0,f.default)(e).getPropertyValue((0,l.default)(t));(w={})[t]=n}Object.keys(w).forEach((function(t){var n=w[t];n||0===n?(0,p.default)(t)?y+=t+"("+n+") ":r+=(0,l.default)(t)+": "+n+";":(0,d.default)(e,(0,l.default)(t))})),y&&(r+=h.transform+": "+y+";");e.style.cssText+=";"+r};var a=r(n(15165)),l=r(n(45273)),f=r(n(88196)),d=r(n(9087)),h=n(64596),p=r(n(73107));e.exports=t.default},9087:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)},e.exports=t.default},73107:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){return!(!e||!n.test(e))};var n=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default},64596:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var a,l,f,d,h,p,y,w,x,_,S,k=r(n(96892)),C="transform";if(t.transform=C,t.animationEnd=f,t.transitionEnd=l,t.transitionDelay=y,t.transitionTiming=p,t.transitionDuration=h,t.transitionProperty=d,t.animationDelay=S,t.animationTiming=_,t.animationDuration=x,t.animationName=w,k.default){var E=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},a=Object.keys(r),l="",f=0;f<a.length;f++){var d=a[f];if(d+"TransitionProperty"in n){l="-"+d.toLowerCase(),e=r[d]("TransitionEnd"),t=r[d]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:l}}();a=E.prefix,t.transitionEnd=l=E.transitionEnd,t.animationEnd=f=E.animationEnd,t.transform=C=a+"-"+C,t.transitionProperty=d=a+"-transition-property",t.transitionDuration=h=a+"-transition-duration",t.transitionDelay=y=a+"-transition-delay",t.transitionTiming=p=a+"-transition-timing-function",t.animationName=w=a+"-animation-name",t.animationDuration=x=a+"-animation-duration",t.animationTiming=_=a+"-animation-delay",t.animationDelay=S=a+"-animation-timing-function"}var O={transform:C,end:l,property:d,timing:p,delay:y,duration:h};t.default=O},41124:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){return e.replace(n,(function(e,t){return t.toUpperCase()}))};var n=/-(.)/g;e.exports=t.default},15165:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e){return(0,a.default)(e.replace(l,"ms-"))};var a=r(n(41124)),l=/^-ms-/;e.exports=t.default},53994:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){return e.replace(n,"-$1").toLowerCase()};var n=/([A-Z])/g;e.exports=t.default},45273:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e){return(0,a.default)(e).replace(l,"-ms-")};var a=r(n(53994)),l=/^ms-/;e.exports=t.default},96892:function(e,t){"use strict";t.__esModule=!0,t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n,e.exports=t.default},58616:function(e,t,n){"use strict";var r=n(71600);t.__esModule=!0,t.default=function(e){if((!a&&0!==a||e)&&l.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),a=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return a};var a,l=r(n(96892));e.exports=t.default},40558:function(e,t,n){"use strict";n.d(t,{Kb:function(){return mt},L7:function(){return Fe},M$:function(){return Ft}});var r=n(31461),a=n(7896),l=n(13980),f=n.n(l),d=n(2784),h=(n(48570),n(20569)),p=n(5163),y=0;function w(){}function x(e,t){e&&(0,h.Z)(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach((function(e){var t=e.el,n=e.top,r=e.left;t.scrollTop=n,t.scrollLeft=r}))}function _(e,t,n){return e===t||t instanceof n.Node&&e.contains&&e.contains(t)}function S(e,t){var n;function r(){n&&clearTimeout(n)}function a(){for(var a=arguments.length,l=new Array(a),f=0;f<a;f++)l[f]=arguments[f];r(),n=setTimeout((function(){n=null,e.apply(void 0,l)}),t)}return a.cancel=r,a}function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.some((function(t){return t&&t.apply(void 0,[e].concat(r)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault}))}}function C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function E(){return String(y++)}function O(e){var t=e.isOpen,n=e.resultCount,r=e.previousResultCount;return t?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function j(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=T(t,r)?t[r]:e[r],n}),{})}function T(e,t){return void 0!==e[t]}function A(e){var t=e.key,n=e.keyCode;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function P(e,t,n,r,a){if(void 0===a&&(a=!0),0===n)return-1;var l=n-1;("number"!=typeof t||t<0||t>=n)&&(t=e>0?-1:l+1);var f=t+e;f<0?f=a?l:0:f>l&&(f=a?0:l);var d=D(e,f,n,r,a);return-1===d?t>=n?-1:t:d}function D(e,t,n,r,a){var l=r(t);if(!l||!l.hasAttribute("disabled"))return t;if(e>0){for(var f=t+1;f<n;f++)if(!r(f).hasAttribute("disabled"))return f}else for(var d=t-1;d>=0;d--)if(!r(d).hasAttribute("disabled"))return d;return a?e>0?D(1,0,n,r,!1):D(-1,n-1,n,r,!1):-1}function R(e,t,n,r){return void 0===r&&(r=!0),t.some((function(t){return t&&(_(t,e,n)||r&&_(t,n.document.activeElement,n))}))}var I=S((function(e){L(e).textContent=""}),500);function M(e,t){var n=L(t);e&&(n.textContent=e,I(t))}function L(e){void 0===e&&(e=document);var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var N=["isInitialMount","highlightedIndex","items","environment"],F={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function q(e,t,n){var r=e.props,l=e.type,f={};Object.keys(t).forEach((function(r){!function(e,t,n,r){var l=t.props,f=t.type,d="on"+W(e)+"Change";l[d]&&void 0!==r[e]&&r[e]!==n[e]&&l[d]((0,a.Z)({type:f},r))}(r,e,t,n),n[r]!==t[r]&&(f[r]=n[r])})),r.onStateChange&&Object.keys(f).length&&r.onStateChange((0,a.Z)({type:l},f))}var B=S((function(e,t){M(e(),t)}),200),U="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?d.useLayoutEffect:d.useEffect;function H(e){var t=e.id,n=void 0===t?"downshift-"+E():t,r=e.labelId,a=e.menuId,l=e.getItemId,f=e.toggleButtonId,h=e.inputId;return(0,d.useRef)({labelId:r||n+"-label",menuId:a||n+"-menu",getItemId:l||function(e){return n+"-item-"+e},toggleButtonId:f||n+"-toggle-button",inputId:h||n+"-input"}).current}function z(e,t,n){return void 0!==e?e:0===n.length?-1:n.indexOf(t)}function V(e){return/^\S{1}$/.test(e)}function W(e){return""+e.slice(0,1).toUpperCase()+e.slice(1)}function Z(e){var t=(0,d.useRef)(e);return t.current=e,t}function G(e,t,n){var r=(0,d.useRef)(),l=(0,d.useRef)(),f=(0,d.useCallback)((function(t,n){l.current=n,t=j(t,n.props);var r=e(t,n);return n.props.stateReducer(t,(0,a.Z)({},n,{changes:r}))}),[e]),h=(0,d.useReducer)(f,t),p=h[0],y=h[1],w=Z(n),x=(0,d.useCallback)((function(e){return y((0,a.Z)({props:w.current},e))}),[w]),_=l.current;return(0,d.useEffect)((function(){_&&r.current&&r.current!==p&&q(_,j(r.current,_.props),p),r.current=p}),[p,n,_]),[p,x]}function K(e,t,n){var r=G(e,t,n),a=r[0],l=r[1];return[j(a,n),l]}var Y={itemToString:function(e){return e?String(e):""},stateReducer:function(e,t){return t.changes},getA11ySelectionMessage:function(e){var t=e.selectedItem,n=e.itemToString;return t?n(t)+" has been selected.":""},scrollIntoView:x,circularNavigation:!1,environment:"undefined"==typeof window?{}:window};function X(e,t,n){void 0===n&&(n=F);var r="default"+W(t);return r in e?e[r]:n[t]}function J(e,t,n){if(void 0===n&&(n=F),t in e)return e[t];var r="initial"+W(t);return r in e?e[r]:X(e,t,n)}function Q(e){var t=J(e,"selectedItem"),n=J(e,"isOpen"),r=J(e,"highlightedIndex"),a=J(e,"inputValue");return{highlightedIndex:r<0&&t&&n?e.items.indexOf(t):r,isOpen:n,selectedItem:t,inputValue:a}}function ee(e,t,n,r){var a=e.items,l=e.initialHighlightedIndex,f=e.defaultHighlightedIndex,d=t.selectedItem,h=t.highlightedIndex;return 0===a.length?-1:void 0!==l&&h===l?l:void 0!==f?f:d?0===n?a.indexOf(d):P(n,a.indexOf(d),a.length,r,!1):0===n?-1:n<0?a.length-1:0}function te(e,t,n,r){var a=(0,d.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,d.useEffect)((function(){var l=function(){a.current.isMouseDown=!0},f=function(l){a.current.isMouseDown=!1,e&&!R(l.target,t.map((function(e){return e.current})),n)&&r()},d=function(){a.current.isTouchMove=!1},h=function(){a.current.isTouchMove=!0},p=function(l){!e||a.current.isTouchMove||R(l.target,t.map((function(e){return e.current})),n,!1)||r()};return n.addEventListener("mousedown",l),n.addEventListener("mouseup",f),n.addEventListener("touchstart",d),n.addEventListener("touchmove",h),n.addEventListener("touchend",p),function(){n.removeEventListener("mousedown",l),n.removeEventListener("mouseup",f),n.removeEventListener("touchstart",d),n.removeEventListener("touchmove",h),n.removeEventListener("touchend",p)}}),[e,n]),a}var ne=function(){return w};function re(e,t,n){var l=n.isInitialMount,f=n.highlightedIndex,h=n.items,p=n.environment,y=(0,r.Z)(n,N);(0,d.useEffect)((function(){l||B((function(){return e((0,a.Z)({highlightedIndex:f,highlightedItem:h[f],resultCount:h.length},y))}),p.document)}),t)}function oe(e){var t=e.highlightedIndex,n=e.isOpen,r=e.itemRefs,a=e.getItemNodeFromIndex,l=e.menuElement,f=e.scrollIntoView,h=(0,d.useRef)(!0);return U((function(){t<0||!n||!Object.keys(r.current).length||(!1===h.current?h.current=!0:f(a(t),l))}),[t]),h}var ae=w;function se(e,t,n){var r,l=t.type,f=t.props;switch(l){case n.ItemMouseMove:r={highlightedIndex:t.index};break;case n.MenuMouseLeave:r={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:r={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:ee(f,e,0)};break;case n.FunctionOpenMenu:r={isOpen:!0,highlightedIndex:ee(f,e,0)};break;case n.FunctionCloseMenu:r={isOpen:!1};break;case n.FunctionSetHighlightedIndex:r={highlightedIndex:t.highlightedIndex};break;case n.FunctionSetInputValue:r={inputValue:t.inputValue};break;case n.FunctionReset:r={highlightedIndex:X(f,"highlightedIndex"),isOpen:X(f,"isOpen"),selectedItem:X(f,"selectedItem"),inputValue:X(f,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return(0,a.Z)({},e,r)}function le(e){for(var t=e.keysSoFar,n=e.highlightedIndex,r=e.items,a=e.itemToString,l=e.getItemNodeFromIndex,f=t.toLowerCase(),d=0;d<r.length;d++){var h=(d+n+1)%r.length,p=r[h];if(void 0!==p&&a(p).toLowerCase().startsWith(f)){var y=l(h);if(!(null==y?void 0:y.hasAttribute("disabled")))return h}}return n}f().array.isRequired,f().func,f().func,f().func,f().bool,f().number,f().number,f().number,f().bool,f().bool,f().bool,f().any,f().any,f().any,f().string,f().string,f().string,f().func,f().string,f().func,f().func,f().func,f().func,f().func,f().shape({addEventListener:f().func,removeEventListener:f().func,document:f().shape({getElementById:f().func,activeElement:f().any,body:f().any})});var ce=(0,p.pi)((0,p.pi)({},Y),{getA11yStatusMessage:function(e){var t=e.isOpen,n=e.resultCount,r=e.previousResultCount;return t?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.":"":"No results are available.":""}}),ue=w;var fe=0,de=1,he=2,pe=3,me=4,ge=5,ve=6,ye=7,be=8,we=9,xe=10,_e=11,Se=12,ke=13,Ce=14,Ee=15,Oe=16,je=17,$e=18,Te=19,Ae=20,Pe=21,De=22,Re=Object.freeze({__proto__:null,MenuKeyDownArrowDown:fe,MenuKeyDownArrowUp:de,MenuKeyDownEscape:he,MenuKeyDownHome:pe,MenuKeyDownEnd:me,MenuKeyDownEnter:ge,MenuKeyDownSpaceButton:ve,MenuKeyDownCharacter:ye,MenuBlur:be,MenuMouseLeave:we,ItemMouseMove:xe,ItemClick:_e,ToggleButtonClick:Se,ToggleButtonKeyDownArrowDown:ke,ToggleButtonKeyDownArrowUp:Ce,ToggleButtonKeyDownCharacter:Ee,FunctionToggleMenu:Oe,FunctionOpenMenu:je,FunctionCloseMenu:$e,FunctionSetHighlightedIndex:Te,FunctionSelectItem:Ae,FunctionSetInputValue:Pe,FunctionReset:De});function Ie(e,t){var n,r=t.type,l=t.props,f=t.shiftKey;switch(r){case _e:n={isOpen:X(l,"isOpen"),highlightedIndex:X(l,"highlightedIndex"),selectedItem:l.items[t.index]};break;case Ee:var d=t.key,h=""+e.inputValue+d,p=le({keysSoFar:h,highlightedIndex:e.selectedItem?l.items.indexOf(e.selectedItem):-1,items:l.items,itemToString:l.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});n=(0,a.Z)({inputValue:h},p>=0&&{selectedItem:l.items[p]});break;case ke:n={highlightedIndex:ee(l,e,1,t.getItemNodeFromIndex),isOpen:!0};break;case Ce:n={highlightedIndex:ee(l,e,-1,t.getItemNodeFromIndex),isOpen:!0};break;case ge:case ve:n=(0,a.Z)({isOpen:X(l,"isOpen"),highlightedIndex:X(l,"highlightedIndex")},e.highlightedIndex>=0&&{selectedItem:l.items[e.highlightedIndex]});break;case pe:n={highlightedIndex:D(1,0,l.items.length,t.getItemNodeFromIndex,!1)};break;case me:n={highlightedIndex:D(-1,l.items.length-1,l.items.length,t.getItemNodeFromIndex,!1)};break;case he:case be:n={isOpen:!1,highlightedIndex:-1};break;case ye:var y=t.key,w=""+e.inputValue+y,x=le({keysSoFar:w,highlightedIndex:e.highlightedIndex,items:l.items,itemToString:l.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});n=(0,a.Z)({inputValue:w},x>=0&&{highlightedIndex:x});break;case fe:n={highlightedIndex:P(f?5:1,e.highlightedIndex,l.items.length,t.getItemNodeFromIndex,l.circularNavigation)};break;case de:n={highlightedIndex:P(f?-5:-1,e.highlightedIndex,l.items.length,t.getItemNodeFromIndex,l.circularNavigation)};break;case Ae:n={selectedItem:t.selectedItem};break;default:return se(e,t,Re)}return(0,a.Z)({},e,n)}var Me=["onMouseLeave","refKey","onKeyDown","onBlur","ref"],Le=["onClick","onKeyDown","refKey","ref"],Ne=["item","index","onMouseMove","onClick","refKey","ref"];function Fe(e){void 0===e&&(e={}),ue(e,Fe);var t=(0,a.Z)({},ce,e),n=t.items,l=t.scrollIntoView,f=t.environment,h=t.initialIsOpen,p=t.defaultIsOpen,y=t.itemToString,w=t.getA11ySelectionMessage,x=t.getA11yStatusMessage,_=K(Ie,Q(t),t),E=_[0],O=_[1],j=E.isOpen,T=E.highlightedIndex,P=E.selectedItem,D=E.inputValue,R=(0,d.useRef)(null),I=(0,d.useRef)(null),M=(0,d.useRef)({}),L=(0,d.useRef)(!0),N=(0,d.useRef)(null),F=H(t),q=(0,d.useRef)(),B=(0,d.useRef)(!0),U=Z({state:E,props:t}),W=(0,d.useCallback)((function(e){return M.current[F.getItemId(e)]}),[F]);re(x,[j,T,D,n],(0,a.Z)({isInitialMount:B.current,previousResultCount:q.current,items:n,environment:f,itemToString:y},E)),re(w,[P],(0,a.Z)({isInitialMount:B.current,previousResultCount:q.current,items:n,environment:f,itemToString:y},E));var G=oe({menuElement:I.current,highlightedIndex:T,isOpen:j,itemRefs:M,scrollIntoView:l,getItemNodeFromIndex:W});(0,d.useEffect)((function(){return N.current=S((function(e){e({type:Pe,inputValue:""})}),500),function(){N.current.cancel()}}),[]),(0,d.useEffect)((function(){D&&N.current(O)}),[O,D]),ae({isInitialMount:B.current,props:t,state:E}),(0,d.useEffect)((function(){B.current?(h||p||j)&&I.current&&I.current.focus():j?I.current&&I.current.focus():f.document.activeElement===I.current&&R.current&&(L.current=!1,R.current.focus())}),[j]),(0,d.useEffect)((function(){B.current||(q.current=n.length)}));var Y=te(j,[I,R],f,(function(){O({type:be})})),X=ne("getMenuProps","getToggleButtonProps");(0,d.useEffect)((function(){B.current=!1}),[]),(0,d.useEffect)((function(){j||(M.current={})}),[j]);var J=(0,d.useMemo)((function(){return{ArrowDown:function(e){e.preventDefault(),O({type:ke,getItemNodeFromIndex:W,shiftKey:e.shiftKey})},ArrowUp:function(e){e.preventDefault(),O({type:Ce,getItemNodeFromIndex:W,shiftKey:e.shiftKey})}}}),[O,W]),ee=(0,d.useMemo)((function(){return{ArrowDown:function(e){e.preventDefault(),O({type:fe,getItemNodeFromIndex:W,shiftKey:e.shiftKey})},ArrowUp:function(e){e.preventDefault(),O({type:de,getItemNodeFromIndex:W,shiftKey:e.shiftKey})},Home:function(e){e.preventDefault(),O({type:pe,getItemNodeFromIndex:W})},End:function(e){e.preventDefault(),O({type:me,getItemNodeFromIndex:W})},Escape:function(){O({type:he})},Enter:function(e){e.preventDefault(),O({type:ge})}," ":function(e){e.preventDefault(),O({type:ve})}}}),[O,W]),se=(0,d.useCallback)((function(){O({type:Oe})}),[O]),le=(0,d.useCallback)((function(){O({type:$e})}),[O]),Re=(0,d.useCallback)((function(){O({type:je})}),[O]),qe=(0,d.useCallback)((function(e){O({type:Te,highlightedIndex:e})}),[O]),Be=(0,d.useCallback)((function(e){O({type:Ae,selectedItem:e})}),[O]),Ue=(0,d.useCallback)((function(){O({type:De})}),[O]),He=(0,d.useCallback)((function(e){O({type:Pe,inputValue:e})}),[O]),ze=(0,d.useCallback)((function(e){return(0,a.Z)({id:F.labelId,htmlFor:F.toggleButtonId},e)}),[F]),Ve=(0,d.useCallback)((function(e,t){var n,l=void 0===e?{}:e,f=l.onMouseLeave,d=l.refKey,h=void 0===d?"ref":d,p=l.onKeyDown,y=l.onBlur,w=l.ref,x=(0,r.Z)(l,Me),_=(void 0===t?{}:t).suppressRefError,S=void 0!==_&&_,E=U.current.state;return X("getMenuProps",S,h,I),(0,a.Z)(((n={})[h]=C(w,(function(e){I.current=e})),n.id=F.menuId,n.role="listbox",n["aria-labelledby"]=F.labelId,n.tabIndex=-1,n),E.isOpen&&E.highlightedIndex>-1&&{"aria-activedescendant":F.getItemId(E.highlightedIndex)},{onMouseLeave:k(f,(function(){O({type:we})})),onKeyDown:k(p,(function(e){var t=A(e);t&&ee[t]?ee[t](e):V(t)&&O({type:ye,key:t,getItemNodeFromIndex:W})})),onBlur:k(y,(function(){!1!==L.current?!Y.current.isMouseDown&&O({type:be}):L.current=!0}))},x)}),[O,U,ee,Y,X,F,W]);return{getToggleButtonProps:(0,d.useCallback)((function(e,t){var n,l=void 0===e?{}:e,f=l.onClick,d=l.onKeyDown,h=l.refKey,p=void 0===h?"ref":h,y=l.ref,w=(0,r.Z)(l,Le),x=(void 0===t?{}:t).suppressRefError,_=void 0!==x&&x,S=(0,a.Z)(((n={})[p]=C(y,(function(e){R.current=e})),n.id=F.toggleButtonId,n["aria-haspopup"]="listbox",n["aria-expanded"]=U.current.state.isOpen,n["aria-labelledby"]=F.labelId+" "+F.toggleButtonId,n),w);return w.disabled||(S.onClick=k(f,(function(){O({type:Se})})),S.onKeyDown=k(d,(function(e){var t=A(e);t&&J[t]?J[t](e):V(t)&&O({type:Ee,key:t,getItemNodeFromIndex:W})}))),X("getToggleButtonProps",_,p,R),S}),[O,U,J,X,F,W]),getLabelProps:ze,getMenuProps:Ve,getItemProps:(0,d.useCallback)((function(e){var t,n=void 0===e?{}:e,l=n.item,f=n.index,d=n.onMouseMove,h=n.onClick,p=n.refKey,y=void 0===p?"ref":p,w=n.ref,x=(0,r.Z)(n,Ne),_=U.current,S=_.state,E=_.props,j=z(f,l,E.items);if(j<0)throw new Error("Pass either item or item index in getItemProps!");var T=(0,a.Z)(((t={role:"option","aria-selected":""+(j===S.highlightedIndex),id:F.getItemId(j)})[y]=C(w,(function(e){e&&(M.current[F.getItemId(j)]=e)})),t),x);return x.disabled||(T.onMouseMove=k(d,(function(){f!==S.highlightedIndex&&(G.current=!1,O({type:xe,index:f}))})),T.onClick=k(h,(function(){O({type:_e,index:f})}))),T}),[O,U,G,F]),toggleMenu:se,openMenu:Re,closeMenu:le,setHighlightedIndex:qe,selectItem:Be,reset:Ue,setInputValue:He,highlightedIndex:T,isOpen:j,selectedItem:P,inputValue:D}}Fe.stateChangeTypes=Re;var qe=0,Be=1,Ue=2,He=3,ze=4,Ve=5,We=6,Ze=7,Ge=8,Ke=9,Ye=10,Xe=11,Je=12,Qe=13,et=14,tt=15,nt=16,rt=17,it=18,ot=19,at=Object.freeze({__proto__:null,InputKeyDownArrowDown:qe,InputKeyDownArrowUp:Be,InputKeyDownEscape:Ue,InputKeyDownHome:He,InputKeyDownEnd:ze,InputKeyDownEnter:Ve,InputChange:We,InputBlur:Ze,MenuMouseLeave:Ge,ItemMouseMove:Ke,ItemClick:Ye,ToggleButtonClick:Xe,FunctionToggleMenu:Je,FunctionOpenMenu:Qe,FunctionCloseMenu:et,FunctionSetHighlightedIndex:tt,FunctionSelectItem:nt,FunctionSetInputValue:rt,FunctionReset:it,ControlledPropUpdatedSelectedItem:ot});f().array.isRequired,f().func,f().func,f().func,f().bool,f().number,f().number,f().number,f().bool,f().bool,f().bool,f().any,f().any,f().any,f().string,f().string,f().string,f().string,f().string,f().string,f().func,f().string,f().string,f().func,f().func,f().func,f().func,f().func,f().func,f().shape({addEventListener:f().func,removeEventListener:f().func,document:f().shape({getElementById:f().func,activeElement:f().any,body:f().any})});var st=w;var lt=(0,a.Z)({},Y,{getA11yStatusMessage:O,circularNavigation:!0});function ct(e,t){var n,r=t.type,l=t.props,f=t.shiftKey;switch(r){case Ye:n={isOpen:X(l,"isOpen"),highlightedIndex:X(l,"highlightedIndex"),selectedItem:l.items[t.index],inputValue:l.itemToString(l.items[t.index])};break;case qe:n=e.isOpen?{highlightedIndex:P(f?5:1,e.highlightedIndex,l.items.length,t.getItemNodeFromIndex,l.circularNavigation)}:{highlightedIndex:ee(l,e,1,t.getItemNodeFromIndex),isOpen:l.items.length>=0};break;case Be:n=e.isOpen?{highlightedIndex:P(f?-5:-1,e.highlightedIndex,l.items.length,t.getItemNodeFromIndex,l.circularNavigation)}:{highlightedIndex:ee(l,e,-1,t.getItemNodeFromIndex),isOpen:l.items.length>=0};break;case Ve:n=(0,a.Z)({},e.isOpen&&e.highlightedIndex>=0&&{selectedItem:l.items[e.highlightedIndex],isOpen:X(l,"isOpen"),highlightedIndex:X(l,"highlightedIndex"),inputValue:l.itemToString(l.items[e.highlightedIndex])});break;case Ue:n=(0,a.Z)({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case He:n={highlightedIndex:D(1,0,l.items.length,t.getItemNodeFromIndex,!1)};break;case ze:n={highlightedIndex:D(-1,l.items.length-1,l.items.length,t.getItemNodeFromIndex,!1)};break;case Ze:n=(0,a.Z)({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&t.selectItem&&{selectedItem:l.items[e.highlightedIndex],inputValue:l.itemToString(l.items[e.highlightedIndex])});break;case We:n={isOpen:!0,highlightedIndex:X(l,"highlightedIndex"),inputValue:t.inputValue};break;case nt:n={selectedItem:t.selectedItem,inputValue:l.itemToString(t.selectedItem)};break;case ot:n={inputValue:t.inputValue};break;default:return se(e,t,at)}return(0,a.Z)({},e,n)}var ut=["onMouseLeave","refKey","ref"],ft=["item","index","refKey","ref","onMouseMove","onClick","onPress"],dt=["onClick","onPress","refKey","ref"],ht=["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"],pt=["refKey","ref"];function mt(e){void 0===e&&(e={}),st(e,mt);var t=(0,a.Z)({},lt,e),n=t.initialIsOpen,l=t.defaultIsOpen,f=t.items,h=t.scrollIntoView,p=t.environment,y=t.getA11yStatusMessage,w=t.getA11ySelectionMessage,x=t.itemToString,_=function(e){var t=Q(e),n=t.selectedItem,r=t.inputValue;return""===r&&n&&void 0===e.defaultInputValue&&void 0===e.initialInputValue&&void 0===e.inputValue&&(r=e.itemToString(n)),(0,a.Z)({},t,{inputValue:r})}(t),S=function(e,t,n){var r=(0,d.useRef)(),a=G(e,t,n),l=a[0],f=a[1];return(0,d.useEffect)((function(){T(n,"selectedItem")&&(r.current!==n.selectedItem&&f({type:ot,inputValue:n.itemToString(n.selectedItem)}),r.current=l.selectedItem===r.current?n.selectedItem:l.selectedItem)})),[j(l,n),f]}(ct,_,t),E=S[0],O=S[1],P=E.isOpen,D=E.highlightedIndex,R=E.selectedItem,I=E.inputValue,M=(0,d.useRef)(null),L=(0,d.useRef)({}),N=(0,d.useRef)(null),F=(0,d.useRef)(null),q=(0,d.useRef)(null),B=(0,d.useRef)(!0),U=H(t),V=(0,d.useRef)(),W=Z({state:E,props:t}),K=(0,d.useCallback)((function(e){return L.current[U.getItemId(e)]}),[U]);re(y,[P,D,I,f],(0,a.Z)({isInitialMount:B.current,previousResultCount:V.current,items:f,environment:p,itemToString:x},E)),re(w,[R],(0,a.Z)({isInitialMount:B.current,previousResultCount:V.current,items:f,environment:p,itemToString:x},E));var Y=oe({menuElement:M.current,highlightedIndex:D,isOpen:P,itemRefs:L,scrollIntoView:h,getItemNodeFromIndex:K});ae({isInitialMount:B.current,props:t,state:E}),(0,d.useEffect)((function(){(n||l||P)&&N.current&&N.current.focus()}),[]),(0,d.useEffect)((function(){B.current||(V.current=f.length)}));var X=te(P,[q,M,F],p,(function(){O({type:Ze,selectItem:!1})})),J=ne("getInputProps","getComboboxProps","getMenuProps");(0,d.useEffect)((function(){B.current=!1}),[]),(0,d.useEffect)((function(){P||(L.current={})}),[P]);var ee=(0,d.useMemo)((function(){return{ArrowDown:function(e){e.preventDefault(),O({type:qe,shiftKey:e.shiftKey,getItemNodeFromIndex:K})},ArrowUp:function(e){e.preventDefault(),O({type:Be,shiftKey:e.shiftKey,getItemNodeFromIndex:K})},Home:function(e){W.current.state.isOpen&&(e.preventDefault(),O({type:He,getItemNodeFromIndex:K}))},End:function(e){W.current.state.isOpen&&(e.preventDefault(),O({type:ze,getItemNodeFromIndex:K}))},Escape:function(){var e=W.current.state;(e.isOpen||e.inputValue||e.selectedItem||e.highlightedIndex>-1)&&O({type:Ue})},Enter:function(e){var t=W.current.state;!t.isOpen||t.highlightedIndex<0||229===e.which||(e.preventDefault(),O({type:Ve,getItemNodeFromIndex:K}))}}}),[O,W,K]),se=(0,d.useCallback)((function(e){return(0,a.Z)({id:U.labelId,htmlFor:U.inputId},e)}),[U]),le=(0,d.useCallback)((function(e,t){var n,l=void 0===e?{}:e,f=l.onMouseLeave,d=l.refKey,h=void 0===d?"ref":d,p=l.ref,y=(0,r.Z)(l,ut),w=(void 0===t?{}:t).suppressRefError;return J("getMenuProps",void 0!==w&&w,h,M),(0,a.Z)(((n={})[h]=C(p,(function(e){M.current=e})),n.id=U.menuId,n.role="listbox",n["aria-labelledby"]=U.labelId,n.onMouseLeave=k(f,(function(){O({type:Ge})})),n),y)}),[O,J,U]),ce=(0,d.useCallback)((function(e){var t,n,l=void 0===e?{}:e,f=l.item,d=l.index,h=l.refKey,p=void 0===h?"ref":h,y=l.ref,w=l.onMouseMove,x=l.onClick;l.onPress;var _=(0,r.Z)(l,ft),S=W.current,E=S.props,j=S.state,T=z(d,f,E.items);if(T<0)throw new Error("Pass either item or item index in getItemProps!");var A=x;return(0,a.Z)(((t={})[p]=C(y,(function(e){e&&(L.current[U.getItemId(T)]=e)})),t.role="option",t["aria-selected"]=""+(T===j.highlightedIndex),t.id=U.getItemId(T),t),!_.disabled&&((n={onMouseMove:k(w,(function(){d!==j.highlightedIndex&&(Y.current=!1,O({type:Ke,index:d}))}))}).onClick=k(A,(function(){O({type:Ye,index:d}),N.current&&N.current.focus()})),n),_)}),[O,W,Y,U]),ue=(0,d.useCallback)((function(e){var t,n=void 0===e?{}:e,l=n.onClick;n.onPress;var f=n.refKey,d=void 0===f?"ref":f,h=n.ref,p=(0,r.Z)(n,dt);return(0,a.Z)(((t={})[d]=C(h,(function(e){F.current=e})),t.id=U.toggleButtonId,t.tabIndex=-1,t),!p.disabled&&(0,a.Z)({},{onClick:k(l,(function(){O({type:Xe}),!W.current.state.isOpen&&N.current&&N.current.focus()}))}),p)}),[O,W,U]),fe=(0,d.useCallback)((function(e,t){var n,l=void 0===e?{}:e,f=l.onKeyDown,d=l.onChange,h=l.onInput,p=l.onBlur;l.onChangeText;var y=l.refKey,w=void 0===y?"ref":y,x=l.ref,_=(0,r.Z)(l,ht),S=(void 0===t?{}:t).suppressRefError;J("getInputProps",void 0!==S&&S,w,N);var E,j=W.current.state,T={};_.disabled||((E={}).onChange=k(d,h,(function(e){O({type:We,inputValue:e.target.value})})),E.onKeyDown=k(f,(function(e){var t=A(e);t&&ee[t]&&ee[t](e)})),E.onBlur=k(p,(function(){j.isOpen&&!X.current.isMouseDown&&O({type:Ze,selectItem:!0})})),T=E);return(0,a.Z)(((n={})[w]=C(x,(function(e){N.current=e})),n.id=U.inputId,n["aria-autocomplete"]="list",n["aria-controls"]=U.menuId,n),j.isOpen&&j.highlightedIndex>-1&&{"aria-activedescendant":U.getItemId(j.highlightedIndex)},{"aria-labelledby":U.labelId,autoComplete:"off",value:j.inputValue},T,_)}),[O,ee,W,X,J,U]),de=(0,d.useCallback)((function(e,t){var n,l=void 0===e?{}:e,f=l.refKey,d=void 0===f?"ref":f,h=l.ref,p=(0,r.Z)(l,pt),y=(void 0===t?{}:t).suppressRefError;return J("getComboboxProps",void 0!==y&&y,d,q),(0,a.Z)(((n={})[d]=C(h,(function(e){q.current=e})),n.role="combobox",n["aria-haspopup"]="listbox",n["aria-owns"]=U.menuId,n["aria-expanded"]=W.current.state.isOpen,n),p)}),[W,J,U]),he=(0,d.useCallback)((function(){O({type:Je})}),[O]),pe=(0,d.useCallback)((function(){O({type:et})}),[O]),me=(0,d.useCallback)((function(){O({type:Qe})}),[O]),ge=(0,d.useCallback)((function(e){O({type:tt,highlightedIndex:e})}),[O]),ve=(0,d.useCallback)((function(e){O({type:nt,selectedItem:e})}),[O]);return{getItemProps:ce,getLabelProps:se,getMenuProps:le,getInputProps:fe,getComboboxProps:de,getToggleButtonProps:ue,toggleMenu:he,openMenu:me,closeMenu:pe,setHighlightedIndex:ge,setInputValue:(0,d.useCallback)((function(e){O({type:rt,inputValue:e})}),[O]),selectItem:ve,reset:(0,d.useCallback)((function(){O({type:it})}),[O]),highlightedIndex:D,isOpen:P,selectedItem:R,inputValue:I}}mt.stateChangeTypes=at;var gt={activeIndex:-1,selectedItems:[]};function vt(e,t){return J(e,t,gt)}function yt(e,t){return X(e,t,gt)}function bt(e){if(e.shiftKey||e.metaKey||e.ctrlKey||e.altKey)return!1;var t=e.target;return!(t instanceof HTMLInputElement&&""!==t.value)||0===t.selectionStart&&0===t.selectionEnd}f().array,f().array,f().array,f().func,f().func,f().func,f().number,f().number,f().number,f().func,f().func,f().string,f().string,f().shape({addEventListener:f().func,removeEventListener:f().func,document:f().shape({getElementById:f().func,activeElement:f().any,body:f().any})});var wt={itemToString:Y.itemToString,stateReducer:Y.stateReducer,environment:Y.environment,getA11yRemovalMessage:function(e){var t=e.removedSelectedItem;return(0,e.itemToString)(t)+" has been removed."},keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},xt=w;var _t=0,St=1,kt=2,Ct=3,Et=4,Ot=5,jt=6,$t=7,Tt=8,At=9,Pt=10,Dt=11,Rt=12,It=Object.freeze({__proto__:null,SelectedItemClick:_t,SelectedItemKeyDownDelete:St,SelectedItemKeyDownBackspace:kt,SelectedItemKeyDownNavigationNext:Ct,SelectedItemKeyDownNavigationPrevious:Et,DropdownKeyDownNavigationPrevious:Ot,DropdownKeyDownBackspace:jt,DropdownClick:$t,FunctionAddSelectedItem:Tt,FunctionRemoveSelectedItem:At,FunctionSetSelectedItems:Pt,FunctionSetActiveIndex:Dt,FunctionReset:Rt});function Mt(e,t){var n,r=t.type,l=t.index,f=t.props,d=t.selectedItem,h=e.activeIndex,p=e.selectedItems;switch(r){case _t:n={activeIndex:l};break;case Et:n={activeIndex:h-1<0?0:h-1};break;case Ct:n={activeIndex:h+1>=p.length?-1:h+1};break;case kt:case St:var y=h;1===p.length?y=-1:h===p.length-1&&(y=p.length-2),n=(0,a.Z)({selectedItems:[].concat(p.slice(0,h),p.slice(h+1))},{activeIndex:y});break;case Ot:n={activeIndex:p.length-1};break;case jt:n={selectedItems:p.slice(0,p.length-1)};break;case Tt:n={selectedItems:[].concat(p,[d])};break;case $t:n={activeIndex:-1};break;case At:var w=h,x=p.indexOf(d);1===p.length?w=-1:x===p.length-1&&(w=p.length-2),n=(0,a.Z)({selectedItems:[].concat(p.slice(0,x),p.slice(x+1))},{activeIndex:w});break;case Pt:n={selectedItems:t.selectedItems};break;case Dt:n={activeIndex:t.activeIndex};break;case Rt:n={activeIndex:yt(f,"activeIndex"),selectedItems:yt(f,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return(0,a.Z)({},e,n)}var Lt=["refKey","ref","onClick","onKeyDown","selectedItem","index"],Nt=["refKey","ref","onKeyDown","onClick","preventKeyAction"];function Ft(e){void 0===e&&(e={}),xt(e,Ft);var t=(0,a.Z)({},wt,e),n=t.getA11yRemovalMessage,l=t.itemToString,f=t.environment,h=t.keyNavigationNext,p=t.keyNavigationPrevious,y=K(Mt,function(e){return{activeIndex:vt(e,"activeIndex"),selectedItems:vt(e,"selectedItems")}}(t),t),w=y[0],x=y[1],_=w.activeIndex,S=w.selectedItems,E=(0,d.useRef)(!0),O=(0,d.useRef)(null),j=(0,d.useRef)(S),T=(0,d.useRef)();T.current=[];var P=Z({state:w,props:t});(0,d.useEffect)((function(){if(!E.current){if(S.length<j.current.length){var e=j.current.find((function(e){return S.indexOf(e)<0}));M(n({itemToString:l,resultCount:S.length,removedSelectedItem:e,activeIndex:_,activeSelectedItem:S[_]}),f.document)}j.current=S}}),[S.length]),(0,d.useEffect)((function(){E.current||(-1===_&&O.current?O.current.focus():T.current[_]&&T.current[_].focus())}),[_]),ae({isInitialMount:E.current,props:t,state:w});var D=ne("getDropdownProps");(0,d.useEffect)((function(){E.current=!1}),[]);var R=(0,d.useMemo)((function(){var e;return(e={})[p]=function(){x({type:Et})},e[h]=function(){x({type:Ct})},e.Delete=function(){x({type:St})},e.Backspace=function(){x({type:kt})},e}),[x,h,p]),I=(0,d.useMemo)((function(){var e;return(e={})[p]=function(e){bt(e)&&x({type:Ot})},e.Backspace=function(e){bt(e)&&x({type:jt})},e}),[x,p]);return{getSelectedItemProps:(0,d.useCallback)((function(e){var t,n=void 0===e?{}:e,l=n.refKey,f=void 0===l?"ref":l,d=n.ref,h=n.onClick,p=n.onKeyDown,y=n.selectedItem,w=n.index,_=(0,r.Z)(n,Lt),S=P.current.state;if(z(w,y,S.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");return(0,a.Z)(((t={})[f]=C(d,(function(e){e&&T.current.push(e)})),t.tabIndex=w===S.activeIndex?0:-1,t.onClick=k(h,(function(){x({type:_t,index:w})})),t.onKeyDown=k(p,(function(e){var t=A(e);t&&R[t]&&R[t](e)})),t),_)}),[x,P,R]),getDropdownProps:(0,d.useCallback)((function(e,t){var n,l=void 0===e?{}:e,f=l.refKey,d=void 0===f?"ref":f,h=l.ref,p=l.onKeyDown,y=l.onClick,w=l.preventKeyAction,_=void 0!==w&&w,S=(0,r.Z)(l,Nt),E=(void 0===t?{}:t).suppressRefError;D("getDropdownProps",void 0!==E&&E,d,O);return(0,a.Z)(((n={})[d]=C(h,(function(e){e&&(O.current=e)})),n),!_&&{onKeyDown:k(p,(function(e){var t=A(e);t&&I[t]&&I[t](e)})),onClick:k(y,(function(){x({type:$t})}))},S)}),[x,I,D]),addSelectedItem:(0,d.useCallback)((function(e){x({type:Tt,selectedItem:e})}),[x]),removeSelectedItem:(0,d.useCallback)((function(e){x({type:At,selectedItem:e})}),[x]),setSelectedItems:(0,d.useCallback)((function(e){x({type:Pt,selectedItems:e})}),[x]),setActiveIndex:(0,d.useCallback)((function(e){x({type:Dt,activeIndex:e})}),[x]),reset:(0,d.useCallback)((function(){x({type:Rt})}),[x]),selectedItems:S,activeIndex:_}}Ft.stateChangeTypes=It},86139:function(e,t,n){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=0,l=void 0,f=void 0,d=function(e,t){T[a]=e,T[a+1]=t,2===(a+=2)&&(f?f(A):D())};function h(e){f=e}function p(e){d=e}var y="undefined"!=typeof window?window:void 0,w=y||{},x=w.MutationObserver||w.WebKitMutationObserver,_="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),S="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function k(){return function(){return process.nextTick(A)}}function C(){return void 0!==l?function(){l(A)}:j()}function E(){var e=0,t=new x(A),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function O(){var e=new MessageChannel;return e.port1.onmessage=A,function(){return e.port2.postMessage(0)}}function j(){var e=setTimeout;return function(){return e(A,1)}}var T=new Array(1e3);function A(){for(var e=0;e<a;e+=2)(0,T[e])(T[e+1]),T[e]=void 0,T[e+1]=void 0;a=0}function P(){try{var e=Function("return this")().require("vertx");return l=e.runOnLoop||e.runOnContext,C()}catch(e){return j()}}var D=void 0;function R(e,t){var n=this,r=new this.constructor(L);void 0===r[M]&&re(r);var a=n._state;if(a){var l=arguments[a-1];d((function(){return Q(a,r,l,n._result)}))}else X(n,r,e,t);return r}function I(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(L);return Z(n,e),n}D=_?k():x?E():S?O():void 0===y?P():j();var M=Math.random().toString(36).substring(2);function L(){}var N=void 0,F=1,q=2;function B(){return new TypeError("You cannot resolve a promise with itself")}function U(){return new TypeError("A promises callback cannot return that same promise.")}function H(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function z(e,t,n){d((function(e){var r=!1,a=H(n,t,(function(n){r||(r=!0,t!==n?Z(e,n):K(e,n))}),(function(t){r||(r=!0,Y(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&a&&(r=!0,Y(e,a))}),e)}function V(e,t){t._state===F?K(e,t._result):t._state===q?Y(e,t._result):X(t,void 0,(function(t){return Z(e,t)}),(function(t){return Y(e,t)}))}function W(e,n,r){n.constructor===e.constructor&&r===R&&n.constructor.resolve===I?V(e,n):void 0===r?K(e,n):t(r)?z(e,n,r):K(e,n)}function Z(t,n){if(t===n)Y(t,B());else if(e(n)){var r=void 0;try{r=n.then}catch(e){return void Y(t,e)}W(t,n,r)}else K(t,n)}function G(e){e._onerror&&e._onerror(e._result),J(e)}function K(e,t){e._state===N&&(e._result=t,e._state=F,0!==e._subscribers.length&&d(J,e))}function Y(e,t){e._state===N&&(e._state=q,e._result=t,d(G,e))}function X(e,t,n,r){var a=e._subscribers,l=a.length;e._onerror=null,a[l]=t,a[l+F]=n,a[l+q]=r,0===l&&e._state&&d(J,e)}function J(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,a=void 0,l=e._result,f=0;f<t.length;f+=3)r=t[f],a=t[f+n],r?Q(n,r,a,l):a(l);e._subscribers.length=0}}function Q(e,n,r,a){var l=t(r),f=void 0,d=void 0,h=!0;if(l){try{f=r(a)}catch(e){h=!1,d=e}if(n===f)return void Y(n,U())}else f=a;n._state!==N||(l&&h?Z(n,f):!1===h?Y(n,d):e===F?K(n,f):e===q&&Y(n,f))}function ee(e,t){try{t((function(t){Z(e,t)}),(function(t){Y(e,t)}))}catch(t){Y(e,t)}}var te=0;function ne(){return te++}function re(e){e[M]=te++,e._state=void 0,e._result=void 0,e._subscribers=[]}function validationError(){return new Error("Array Methods must be provided an Array")}var oe=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(L),this.promise[M]||re(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?K(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&K(this.promise,this._result))):Y(this.promise,validationError())}return e.prototype._enumerate=function(e){for(var t=0;this._state===N&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===I){var a=void 0,l=void 0,f=!1;try{a=e.then}catch(e){f=!0,l=e}if(a===R&&e._state!==N)this._settledAt(e._state,t,e._result);else if("function"!=typeof a)this._remaining--,this._result[t]=e;else if(n===fe){var d=new n(L);f?Y(d,l):W(d,e,a),this._willSettleAt(d,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===N&&(this._remaining--,e===q?Y(r,n):this._result[t]=n),0===this._remaining&&K(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;X(e,void 0,(function(e){return n._settledAt(F,t,e)}),(function(e){return n._settledAt(q,t,e)}))},e}();function ae(e){return new oe(this,e).promise}function se(e){var t=this;return r(e)?new t((function(n,r){for(var a=e.length,l=0;l<a;l++)t.resolve(e[l]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function le(e){var t=new this(L);return Y(t,e),t}function ce(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ue(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var fe=function(){function e(t){this[M]=ne(),this._result=this._state=void 0,this._subscribers=[],L!==t&&("function"!=typeof t&&ce(),this instanceof e?ee(this,t):ue())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();function de(){var e=void 0;if(void 0!==n.g)e=n.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=fe}return fe.prototype.then=R,fe.all=ae,fe.race=se,fe.resolve=I,fe.reject=le,fe._setScheduler=h,fe._setAsap=p,fe._asap=d,fe.polyfill=de,fe.Promise=fe,fe}()},73076:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new WeakMap,r=new WeakMap;function a(e){const t=n.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function l(e){null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener)}function f(e,t){n.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const r=Object.keys(t);for(let e=0;e<r.length;++e){const t=r[e];t in this||Object.defineProperty(this,t,d(t))}}function d(e){return{get(){return a(this).event[e]},set(t){a(this).event[e]=t},configurable:!0,enumerable:!0}}function h(e){return{value(){const t=a(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function p(e){if(null==e||e===Object.prototype)return f;let t=r.get(e);return null==t&&(t=function(e,t){const n=Object.keys(t);if(0===n.length)return e;function r(t,n){e.call(this,t,n)}r.prototype=Object.create(e.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let a=0;a<n.length;++a){const l=n[a];if(!(l in e.prototype)){const e="function"==typeof Object.getOwnPropertyDescriptor(t,l).value;Object.defineProperty(r.prototype,l,e?h(l):d(l))}}return r}(p(Object.getPrototypeOf(e)),e),r.set(e,t)),t}function y(e){return a(e).immediateStopped}function w(e,t){a(e).passiveListener=t}f.prototype={get type(){return a(this).event.type},get target(){return a(this).eventTarget},get currentTarget(){return a(this).currentTarget},composedPath(){const e=a(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return a(this).eventPhase},stopPropagation(){const e=a(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){const e=a(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(a(this).event.bubbles)},get cancelable(){return Boolean(a(this).event.cancelable)},preventDefault(){l(a(this))},get defaultPrevented(){return a(this).canceled},get composed(){return Boolean(a(this).event.composed)},get timeStamp(){return a(this).timeStamp},get srcElement(){return a(this).eventTarget},get cancelBubble(){return a(this).stopped},set cancelBubble(e){if(!e)return;const t=a(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)},get returnValue(){return!a(this).canceled},set returnValue(e){e||l(a(this))},initEvent(){}},Object.defineProperty(f.prototype,"constructor",{value:f,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(f.prototype,window.Event.prototype),r.set(window.Event.prototype,f));const x=new WeakMap,_=3;function S(e){return null!==e&&"object"==typeof e}function k(e){const t=x.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function C(e,t){Object.defineProperty(e,`on${t}`,function(e){return{get(){let t=k(this).get(e);for(;null!=t;){if(t.listenerType===_)return t.listener;t=t.next}return null},set(t){"function"==typeof t||S(t)||(t=null);const n=k(this);let r=null,a=n.get(e);for(;null!=a;)a.listenerType===_?null!==r?r.next=a.next:null!==a.next?n.set(e,a.next):n.delete(e):r=a,a=a.next;if(null!==t){const a={listener:t,listenerType:_,passive:!1,once:!1,next:null};null===r?n.set(e,a):r.next=a}},configurable:!0,enumerable:!0}}(t))}function E(e){function t(){O.call(this)}t.prototype=Object.create(O.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let n=0;n<e.length;++n)C(t.prototype,e[n]);return t}function O(){if(!(this instanceof O)){if(1===arguments.length&&Array.isArray(arguments[0]))return E(arguments[0]);if(arguments.length>0){const e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return E(e)}throw new TypeError("Cannot call a class as a function")}x.set(this,new Map)}O.prototype={addEventListener(e,t,n){if(null==t)return;if("function"!=typeof t&&!S(t))throw new TypeError("'listener' should be a function or an object.");const r=k(this),a=S(n),l=(a?Boolean(n.capture):Boolean(n))?1:2,f={listener:t,listenerType:l,passive:a&&Boolean(n.passive),once:a&&Boolean(n.once),next:null};let d=r.get(e);if(void 0===d)return void r.set(e,f);let h=null;for(;null!=d;){if(d.listener===t&&d.listenerType===l)return;h=d,d=d.next}h.next=f},removeEventListener(e,t,n){if(null==t)return;const r=k(this),a=(S(n)?Boolean(n.capture):Boolean(n))?1:2;let l=null,f=r.get(e);for(;null!=f;){if(f.listener===t&&f.listenerType===a)return void(null!==l?l.next=f.next:null!==f.next?r.set(e,f.next):r.delete(e));l=f,f=f.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');const t=k(this),n=e.type;let r=t.get(n);if(null==r)return!0;const l=function(e,t){return new(p(Object.getPrototypeOf(t)))(e,t)}(this,e);let f=null;for(;null!=r;){if(r.once?null!==f?f.next=r.next:null!==r.next?t.set(n,r.next):t.delete(n):f=r,w(l,r.passive?r.listener:null),"function"==typeof r.listener)try{r.listener.call(this,l)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else r.listenerType!==_&&"function"==typeof r.listener.handleEvent&&r.listener.handleEvent(l);if(y(l))break;r=r.next}return w(l,null),function(e,t){a(e).eventPhase=t}(l,0),function(e,t){a(e).currentTarget=t}(l,null),!l.defaultPrevented}},Object.defineProperty(O.prototype,"constructor",{value:O,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(O.prototype,window.EventTarget.prototype),t.defineEventAttribute=C,t.EventTarget=O,t.default=O,e.exports=O,e.exports.EventTarget=e.exports.default=O,e.exports.defineEventAttribute=C},22699:function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,l,f,d,h,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var y=new Error('Uncaught, unspecified "error" event. ('+t+")");throw y.context=t,y}if(a(l=this._events[e]))return!1;if(n(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),l.apply(this,d)}else if(r(l))for(d=Array.prototype.slice.call(arguments,1),f=(p=l.slice()).length,h=0;h<f;h++)p[h].apply(this,d);return!0},t.prototype.addListener=function(e,l){var f;if(!n(l))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(l.listener)?l.listener:l),this._events[e]?r(this._events[e])?this._events[e].push(l):this._events[e]=[this._events[e],l]:this._events[e]=l,r(this._events[e])&&!this._events[e].warned&&(f=a(this._maxListeners)?t.defaultMaxListeners:this._maxListeners)&&f>0&&this._events[e].length>f&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function a(){this.removeListener(e,a),r||(r=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},t.prototype.removeListener=function(e,t){var a,l,f,d;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(f=(a=this._events[e]).length,l=-1,a===t||n(a.listener)&&a.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(a)){for(d=f;d-- >0;)if(a[d]===t||a[d].listener&&a[d].listener===t){l=d;break}if(l<0)return this;1===a.length?(a.length=0,delete this._events[e]):a.splice(l,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},39765:function(e,t,n){!function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});var n=["prototype","__proto__","caller","arguments","length","name"];Object.getOwnPropertyNames(t).forEach((function(r){-1===n.indexOf(r)&&e[r]!==t[r]&&(e[r]=t[r])})),t&&h(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e,t,n){return(y=p()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&h(a,n.prototype),a}).apply(null,arguments)}function w(e){var t="function"==typeof Map?new Map:void 0;return(w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?x(e):t}function S(e){var t=p();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _(this,n)}}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}var C=Object.values||function(e){var t=[];for(var n in e)t.push(e[n]);return t},E=Object.entries||function(e){var t=[];for(var n in e)t.push([n,e[n]]);return t},O=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){for(var n in t)e[n]=t[n]})),e},j=Object.fromEntries||function(e){var t={};return T(e).forEach((function(e){var n=e[0],r=e[1];t[n]=r})),t},T=Array.from||function(e){if(e instanceof M){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t}return Array.prototype.slice.call(e)};function A(e){return-1!==this.indexOf(e)}Array.prototype.includes||(Array.prototype.includes=A),String.prototype.includes||(String.prototype.includes=A),String.prototype.startsWith||(String.prototype.startsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.substring(t,t+e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return this.substring(t-e.length,t)===e});var P="undefined"!=typeof self?self:n.g,D=P.fetch||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){var a=new XMLHttpRequest;if(a.open("get",e,!0),a.responseType="arraybuffer",a.onerror=r,t.headers)for(var l in t.headers)a.setRequestHeader(l,t.headers[l]);a.onload=function(){n({ok:a.status>=200&&a.status<300,status:a.status,arrayBuffer:function(){return Promise.resolve(a.response)}})},a.send(null)}))},R=function(e){var t=[];if(Object.defineProperties(t,{size:{get:function(){return this.length}},has:{value:function(e){return-1!==this.indexOf(e)}},add:{value:function(e){this.has(e)||this.push(e)}},delete:{value:function(e){if(this.has(e)){var t=this.indexOf(e);this.splice(t,1)}}}}),Array.isArray(e))for(var n=0;n<e.length;n++)t.add(e[n]);return t},I=function(e){return new M(e)},M=void 0!==P.Map&&void 0!==P.Map.prototype.keys?P.Map:function(){function e(n){if(t(this,e),this.clear(),n)for(var r=0;r<n.length;r++)this.set(n[r][0],n[r][1])}return a(e,[{key:"clear",value:function(){this._map={},this._keys=[]}},{key:"size",get:function(){return this._keys.length}},{key:"get",value:function(e){return this._map["map_"+e]}},{key:"set",value:function(e,t){return this._map["map_"+e]=t,this._keys.indexOf(e)<0&&this._keys.push(e),this}},{key:"has",value:function(e){return this._keys.indexOf(e)>=0}},{key:"delete",value:function(e){var t=this._keys.indexOf(e);return!(t<0||(delete this._map["map_"+e],this._keys.splice(t,1),0))}},{key:"keys",value:function(){return this._keys.slice(0)}},{key:"values",value:function(){var e=this;return this._keys.map((function(t){return e.get(t)}))}},{key:"entries",value:function(){var e=this;return this._keys.map((function(t){return[t,e.get(t)]}))}},{key:"forEach",value:function(e,t){for(var n=0;n<this._keys.length;n++)e.call(t,this._map["map_"+this._keys[n]],this._keys[n],this)}}]),e}(),L="undefined"!=typeof self?self:n.g,N="undefined"!=typeof navigator,F=N&&"undefined"==typeof HTMLImageElement,q=!(void 0===n.g||"undefined"==typeof process||!process.versions||!process.versions.node),B=L.Buffer,U=!!B,H=function(e){return void 0!==e};function z(e){return void 0===e||(e instanceof M?0===e.size:0===C(e).filter(H).length)}function V(e){var t=new Error(e);throw delete t.stack,t}function W(e){var t=function(e){var t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}var Z=function(e){return String.fromCharCode.apply(null,e)},G="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0;function K(e){return G?G.decode(e):U?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(Z(e)))}var Y=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;if(t(this,e),"boolean"==typeof l&&(this.le=l),Array.isArray(n)&&(n=new Uint8Array(n)),0===n)this.byteOffset=0,this.byteLength=0;else if(n instanceof ArrayBuffer){void 0===a&&(a=n.byteLength-r);var f=new DataView(n,r,a);this._swapDataView(f)}else if(n instanceof Uint8Array||n instanceof DataView||n instanceof e){void 0===a&&(a=n.byteLength-r),(r+=n.byteOffset)+a>n.byteOffset+n.byteLength&&V("Creating view outside of available memory in ArrayBuffer");var d=new DataView(n.buffer,r,a);this._swapDataView(d)}else if("number"==typeof n){var h=new DataView(new ArrayBuffer(n));this._swapDataView(h)}else V("Invalid input argument for BufferView: "+n)}return a(e,[{key:"_swapArrayBuffer",value:function(e){this._swapDataView(new DataView(e))}},{key:"_swapBuffer",value:function(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}},{key:"_swapDataView",value:function(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}},{key:"_lengthToEnd",value:function(e){return this.byteLength-e}},{key:"set",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return t instanceof DataView||t instanceof e?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||V("BufferView.set(): Invalid data argument."),this.toUint8().set(t,n),new r(this,n,t.byteLength)}},{key:"subarray",value:function(t,n){return new e(this,t,n=n||this._lengthToEnd(t))}},{key:"toUint8",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}},{key:"getUint8Array",value:function(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}},{key:"getString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;return K(this.getUint8Array(e,t))}},{key:"getLatin1String",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=this.getUint8Array(e,t);return Z(n)}},{key:"getUnicodeString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=[],r=0;r<t&&e+r<this.byteLength;r+=2)n.push(this.getUint16(e+r));return Z(n)}},{key:"getInt8",value:function(e){return this.dataView.getInt8(e)}},{key:"getUint8",value:function(e){return this.dataView.getUint8(e)}},{key:"getInt16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt16(e,t)}},{key:"getInt32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt32(e,t)}},{key:"getUint16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint16(e,t)}},{key:"getUint32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint32(e,t)}},{key:"getFloat32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getFloat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getDouble",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getUintBytes",value:function(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}},{key:"getUint",value:function(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}},{key:"toString",value:function(e){return this.dataView.toString(e,this.constructor.name)}},{key:"ensureChunk",value:function(){}}],[{key:"from",value:function(t,n){return t instanceof this&&t.le===n?t:new e(t,void 0,void 0,n)}}]),e}();function X(e,t){V("".concat(e," '").concat(t,"' was not loaded, try using full build of exifr."))}var J=function(e){f(r,e);var n=S(r);function r(e){var a;return t(this,r),(a=n.call(this)).kind=e,a}return a(r,[{key:"get",value:function(e,t){return this.has(e)||X(this.kind,e),t&&(e in t||function(e,t){V("Unknown ".concat(e," '").concat(t,"'."))}(this.kind,e),t[e].enabled||X(this.kind,e)),k(d(r.prototype),"get",this).call(this,e)}},{key:"keyList",value:function(){return T(this.keys())}}]),r}(w(M)),Q=new J("file parser"),ee=new J("segment parser"),te=new J("file reader");function ne(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function re(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var oe=ne((function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result||new ArrayBuffer)},r.onerror=n,r.readAsArrayBuffer(e)}))})),ae=ne((function(e){return D(e).then((function(e){return e.arrayBuffer()}))})),se=ne((function(e,t){return re(t(e),(function(e){return new Y(e)}))})),le=ne((function(e,t,n){var r=new(te.get(n))(e,t);return re(r.read(),(function(){return r}))})),ce=ne((function(e,t,n,r){return te.has(n)?le(e,t,n):r?se(e,r):(V("Parser ".concat(n," is not loaded")),re())})),ue="Invalid input argument";function fe(e,t){return(n=e).startsWith("data:")||n.length>1e4?le(e,t,"base64"):N?ce(e,t,"url",ae):q?le(e,t,"fs"):void V(ue);var n}var de=function(e){f(r,e);var n=S(r);function r(){return t(this,r),n.apply(this,arguments)}return a(r,[{key:"tagKeys",get:function(){return this.allKeys||(this.allKeys=T(this.keys())),this.allKeys}},{key:"tagValues",get:function(){return this.allValues||(this.allValues=T(this.values())),this.allValues}}]),r}(w(M));function he(e,t,n){var r=new de,a=n;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=T(a));for(var l=0;l<a.length;l++){var f=a[l],d=f[0],h=f[1];r.set(d,h)}if(Array.isArray(t)){var p=t;Array.isArray(p)||("function"==typeof p.entries&&(p=p.entries()),p=T(p));for(var y=0;y<p.length;y++){var w=p[y];e.set(w,r)}}else e.set(t,r);return r}function pe(e,t,n){var r,a=e.get(t),l=n;Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=T(l));for(var f=0;f<l.length;f++)r=l[f],a.set(r[0],r[1])}var me=I(),ge=I(),ve=I(),ye=37500,be=37510,we=33723,xe=34675,_e=34665,Se=34853,ke=40965,Ce=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Ee=["jfif","xmp","icc","iptc","ihdr"],Oe=["tiff"].concat(Ee),je=["ifd0","ifd1","exif","gps","interop"],$e=[].concat(Oe,je),Te=["makerNote","userComment"],Ae=["translateKeys","translateValues","reviveValues","multiSegment"],Pe=[].concat(Ae,["sanitize","mergeOutput","silentErrors"]),De=function(){function e(){t(this,e)}return a(e,[{key:"translate",get:function(){return this.translateKeys||this.translateValues||this.reviveValues}}]),e}(),Re=function(e){f(r,e);var n=S(r);function r(e,a,f,d){var h;if(t(this,r),l(x(h=n.call(this)),"enabled",!1),l(x(h),"skip",R()),l(x(h),"pick",R()),l(x(h),"deps",R()),l(x(h),"translateKeys",!1),l(x(h),"translateValues",!1),l(x(h),"reviveValues",!1),h.key=e,h.enabled=a,h.parse=h.enabled,h.applyInheritables(d),h.canBeFiltered=je.includes(e),h.canBeFiltered&&(h.dict=me.get(e)),void 0!==f)if(Array.isArray(f))h.parse=h.enabled=!0,h.canBeFiltered&&f.length>0&&h.translateTagSet(f,h.pick);else if("object"==typeof f){if(h.enabled=!0,h.parse=!1!==f.parse,h.canBeFiltered){var p=f.pick,y=f.skip;p&&p.length>0&&h.translateTagSet(p,h.pick),y&&y.length>0&&h.translateTagSet(y,h.skip)}h.applyInheritables(f)}else!0===f||!1===f?h.parse=h.enabled=f:V("Invalid options argument: ".concat(f));return h}return a(r,[{key:"needed",get:function(){return this.enabled||this.deps.size>0}},{key:"applyInheritables",value:function(e){var t,n,r=Ae;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=T(r));for(var a=0;a<r.length;a++)void 0!==(n=e[t=r[a]])&&(this[t]=n)}},{key:"translateTagSet",value:function(e,t){if(this.dict){var n,r,a=this.dict,l=a.tagKeys,f=a.tagValues,d=e;Array.isArray(d)||("function"==typeof d.entries&&(d=d.entries()),d=T(d));for(var h=0;h<d.length;h++)"string"==typeof(n=d[h])?(-1===(r=f.indexOf(n))&&(r=l.indexOf(Number(n))),-1!==r&&t.add(Number(l[r]))):t.add(n)}else{var p=e;Array.isArray(p)||("function"==typeof p.entries&&(p=p.entries()),p=T(p));for(var y=0;y<p.length;y++){var w=p[y];t.add(w)}}}},{key:"finalizeFilters",value:function(){!this.enabled&&this.deps.size>0?(this.enabled=!0,qe(this.pick,this.deps)):this.enabled&&this.pick.size>0&&qe(this.pick,this.deps)}}]),r}(De),Ie={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Me=I(),Le=function(e){f(r,e);var n=S(r);function r(e){var a;return t(this,r),a=n.call(this),!0===e?a.setupFromTrue():void 0===e?a.setupFromUndefined():Array.isArray(e)?a.setupFromArray(e):"object"==typeof e?a.setupFromObject(e):V("Invalid options argument ".concat(e)),void 0===a.firstChunkSize&&(a.firstChunkSize=N?a.firstChunkSizeBrowser:a.firstChunkSizeNode),a.mergeOutput&&(a.ifd1.enabled=!1),a.filterNestedSegmentTags(),a.traverseTiffDependencyTree(),a.checkLoadedPlugins(),a}return a(r,[{key:"setupFromUndefined",value:function(){var e,t=Ce;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=T(t));for(var n=0;n<t.length;n++)this[e=t[n]]=Ie[e];var r=Pe;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=T(r));for(var a=0;a<r.length;a++)this[e=r[a]]=Ie[e];var l=Te;Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=T(l));for(var f=0;f<l.length;f++)this[e=l[f]]=Ie[e];var d=$e;Array.isArray(d)||("function"==typeof d.entries&&(d=d.entries()),d=T(d));for(var h=0;h<d.length;h++)this[e=d[h]]=new Re(e,Ie[e],void 0,this)}},{key:"setupFromTrue",value:function(){var e,t=Ce;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=T(t));for(var n=0;n<t.length;n++)this[e=t[n]]=Ie[e];var r=Pe;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=T(r));for(var a=0;a<r.length;a++)this[e=r[a]]=Ie[e];var l=Te;Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=T(l));for(var f=0;f<l.length;f++)this[e=l[f]]=!0;var d=$e;Array.isArray(d)||("function"==typeof d.entries&&(d=d.entries()),d=T(d));for(var h=0;h<d.length;h++)this[e=d[h]]=new Re(e,!0,void 0,this)}},{key:"setupFromArray",value:function(e){var t,n=Ce;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=T(n));for(var r=0;r<n.length;r++)this[t=n[r]]=Ie[t];var a=Pe;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=T(a));for(var l=0;l<a.length;l++)this[t=a[l]]=Ie[t];var f=Te;Array.isArray(f)||("function"==typeof f.entries&&(f=f.entries()),f=T(f));for(var d=0;d<f.length;d++)this[t=f[d]]=Ie[t];var h=$e;Array.isArray(h)||("function"==typeof h.entries&&(h=h.entries()),h=T(h));for(var p=0;p<h.length;p++)this[t=h[p]]=new Re(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,je)}},{key:"setupFromObject",value:function(e){var t;je.ifd0=je.ifd0||je.image,je.ifd1=je.ifd1||je.thumbnail,O(this,e);var n=Ce;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=T(n));for(var r=0;r<n.length;r++)this[t=n[r]]=Fe(e[t],Ie[t]);var a=Pe;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=T(a));for(var l=0;l<a.length;l++)this[t=a[l]]=Fe(e[t],Ie[t]);var f=Te;Array.isArray(f)||("function"==typeof f.entries&&(f=f.entries()),f=T(f));for(var d=0;d<f.length;d++)this[t=f[d]]=Fe(e[t],Ie[t]);var h=Oe;Array.isArray(h)||("function"==typeof h.entries&&(h=h.entries()),h=T(h));for(var p=0;p<h.length;p++)this[t=h[p]]=new Re(t,Ie[t],e[t],this);var y=je;Array.isArray(y)||("function"==typeof y.entries&&(y=y.entries()),y=T(y));for(var w=0;w<y.length;w++)this[t=y[w]]=new Re(t,Ie[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,je,$e),!0===e.tiff?this.batchEnableWithBool(je,!0):!1===e.tiff?this.batchEnableWithUserValue(je,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,je):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,je)}},{key:"batchEnableWithBool",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=T(n));for(var r=0;r<n.length;r++)this[n[r]].enabled=t}},{key:"batchEnableWithUserValue",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=T(n));for(var r=0;r<n.length;r++){var a=n[r],l=t[a];this[a].enabled=!1!==l&&void 0!==l}}},{key:"setupGlobalFilters",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(e&&e.length){var a=r;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=T(a));for(var l=0;l<a.length;l++)this[a[l]].enabled=!1;var f=Ne(e,n);Array.isArray(f)||("function"==typeof f.entries&&(f=f.entries()),f=T(f));for(var d=0;d<f.length;d++){var h=f[d],p=h[0],y=h[1];qe(this[p].pick,y),this[p].enabled=!0}}else if(t&&t.length){var w=Ne(t,n);Array.isArray(w)||("function"==typeof w.entries&&(w=w.entries()),w=T(w));for(var x=0;x<w.length;x++){var _=w[x],S=_[0],k=_[1];qe(this[S].skip,k)}}}},{key:"filterNestedSegmentTags",value:function(){var e=this.ifd0,t=this.exif,n=this.xmp,r=this.iptc,a=this.icc;this.makerNote?t.deps.add(ye):t.skip.add(ye),this.userComment?t.deps.add(be):t.skip.add(be),n.enabled||e.skip.add(700),r.enabled||e.skip.add(we),a.enabled||e.skip.add(xe)}},{key:"traverseTiffDependencyTree",value:function(){var e=this,t=this.ifd0,n=this.exif,r=this.gps;this.interop.needed&&(n.deps.add(ke),t.deps.add(ke)),n.needed&&t.deps.add(_e),r.needed&&t.deps.add(Se),this.tiff.enabled=je.some((function(t){return!0===e[t].enabled}))||this.makerNote||this.userComment;var a=je;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=T(a));for(var l=0;l<a.length;l++)this[a[l]].finalizeFilters()}},{key:"onlyTiff",get:function(){var e=this;return!Ee.map((function(t){return e[t].enabled})).some((function(e){return!0===e}))&&this.tiff.enabled}},{key:"checkLoadedPlugins",value:function(){var e=Oe;Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=T(e));for(var t=0;t<e.length;t++){var n=e[t];this[n].enabled&&!ee.has(n)&&X("segment parser",n)}}}],[{key:"useCached",value:function(e){var t=Me.get(e);return void 0!==t||(t=new this(e),Me.set(e,t)),t}}]),r}(De);function Ne(e,t){var n,r,a,l=[],f=t;Array.isArray(f)||("function"==typeof f.entries&&(f=f.entries()),f=T(f));for(var d=0;d<f.length;d++){r=f[d],n=[];var h=me.get(r);Array.isArray(h)||("function"==typeof h.entries&&(h=h.entries()),h=T(h));for(var p=0;p<h.length;p++)a=h[p],(e.includes(a[0])||e.includes(a[1]))&&n.push(a[0]);n.length&&l.push([r,n])}return l}function Fe(e,t){return void 0!==e?e:void 0!==t?t:void 0}function qe(e,t){var n=t;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=T(n));for(var r=0;r<n.length;r++){var a=n[r];e.add(a)}}function Be(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ue(){}function He(e,t){if(!t)return e&&e.then?e.then(Ue):Promise.resolve()}function ze(e,t){var n=e();return n&&n.then?n.then(t):t(n)}l(Le,"default",Ie);var Ve,We=function(){function e(n){t(this,e),l(this,"parsers",{}),this.options=Le.useCached(n)}return a(e,[{key:"setup",value:function(){if(!this.fileParser){var e=this.file,t=e.getUint16(0),n=Q;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=T(n));for(var r=0;r<n.length;r++){var a=n[r],l=a[0],f=a[1];if(f.canHandle(e,t))return this.fileParser=new f(this.options,this.file,this.parsers),e[l]=!0}V("Unknown file format")}}},{key:"read",value:function(e){try{var t=this;return Be(function(e,t){return"string"==typeof e?fe(e,t):N&&!F&&e instanceof HTMLImageElement?fe(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new Y(e):N&&e instanceof Blob?ce(e,t,"blob",oe):void V(ue)}(e,t.options),(function(e){t.file=e}))}catch(e){return Promise.reject(e)}}},{key:"parse",value:function(){try{var e=this;e.setup();var t={},n=[];return ze((function(){return e.options.silentErrors?Be(e.doParse(t,n).catch((function(e){return n.push(e)})),(function(){n.push.apply(n,e.fileParser.errors)})):He(e.doParse(t,n))}),(function(){return e.file.close&&e.file.close(),e.options.silentErrors&&n.length>0&&(t.errors=n),z(r=t)?void 0:r;var r}))}catch(e){return Promise.reject(e)}}},{key:"doParse",value:function(e,t){try{var n=this;return Be(n.fileParser.parse(),(function(){var r,a=C(n.parsers).map((r=function(t){return Be(t.parse(),(function(n){t.assignToOutput(e,n)}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}));if(n.options.silentErrors){var l=function(e){return t.push(e)};a=a.map((function(e){return e.catch(l)}))}return He(Promise.all(a))}))}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;e.setup();var t,n=e.options,r=e.file,a=ee.get("tiff",n);return ze((function(){if(!r.tiff)return function(e){var t=e();if(t&&t.then)return t.then(Ue)}((function(){if(r.jpeg)return Be(e.fileParser.getOrFindSegment("tiff"),(function(e){t=e}))}));t={start:0,type:"tiff"}}),(function(){if(void 0!==t)return Be(e.fileParser.ensureSegmentChunk(t),(function(t){return Be((e.parsers.tiff=new a(t,n,r)).extractThumbnail(),(function(e){return r.close&&r.close(),e}))}))}))}catch(e){return Promise.reject(e)}}}]),e}(),Ze=(Ve=function(e,t){var n,r,a,l=new We(t);return n=l.read(e),r=function(){return l.parse()},a?r?r(n):n:(n&&n.then||(n=Promise.resolve(n)),r?n.then(r):n)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(Ve.apply(this,e))}catch(e){return Promise.reject(e)}}),Ge=Object.freeze({__proto__:null,parse:Ze,Exifr:We,fileParsers:Q,segmentParsers:ee,fileReaders:te,tagKeys:me,tagValues:ge,tagRevivers:ve,createDictionary:he,extendDictionary:pe,fetchUrlAsArrayBuffer:ae,readBlobAsArrayBuffer:oe,chunkedProps:Ce,otherSegments:Ee,segments:Oe,tiffBlocks:je,segmentsAndBlocks:$e,tiffExtractables:Te,inheritables:Ae,allFormatters:Pe,Options:Le});function Ke(){}var Ye=function(){function e(n,r,a){var f=this;t(this,e),l(this,"errors",[]),l(this,"ensureSegmentChunk",function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(e){var t,n,r,a=e.start,l=e.size||65536;return t=function(){if(f.file.chunked)return function(e){var t=e();if(t&&t.then)return t.then(Ke)}((function(){if(!f.file.available(a,l))return function(e){if(e&&e.then)return e.then(Ke)}(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return t=f.file.readChunk(a,l),n=function(t){e.chunk=t},r?n?n(t):t:(t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t);var t,n,r}),(function(t){V("Couldn't read segment: ".concat(JSON.stringify(e),". ").concat(t.message))})));e.chunk=f.file.subarray(a,l)}));f.file.byteLength>a+l?e.chunk=f.file.subarray(a,l):void 0===e.size?e.chunk=f.file.subarray(a):V("Segment unreachable: "+JSON.stringify(e))},n=function(){return e.chunk},(r=t())&&r.then?r.then(n):n(r)}))),this.extendOptions&&this.extendOptions(n),this.options=n,this.file=r,this.parsers=a}return a(e,[{key:"injectSegment",value:function(e,t){this.options[e].enabled&&this.createParser(e,t)}},{key:"createParser",value:function(e,t){var n=new(ee.get(e))(t,this.options,this.file);return this.parsers[e]=n}},{key:"createParsers",value:function(e){var t=e;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=T(t));for(var n=0;n<t.length;n++){var r=t[n],a=r.type,l=r.chunk,f=this.options[a];if(f&&f.enabled){var d=this.parsers[a];d&&d.append||d||this.createParser(a,l)}}}},{key:"readSegments",value:function(e){try{var t=e.map(this.ensureSegmentChunk);return function(e,t){return e&&e.then?e.then(Ke):Promise.resolve()}(Promise.all(t))}catch(e){return Promise.reject(e)}}}]),e}(),Xe=function(){function e(n){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=arguments.length>2?arguments[2]:void 0;t(this,e),l(this,"errors",[]),l(this,"raw",I()),l(this,"handleError",(function(e){if(!r.options.silentErrors)throw e;r.errors.push(e.message)})),this.chunk=this.normalizeInput(n),this.file=f,this.type=this.constructor.type,this.globalOptions=this.options=a,this.localOptions=a[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}return a(e,[{key:"normalizeInput",value:function(e){return e instanceof Y?e:new Y(e)}},{key:"translate",value:function(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}},{key:"output",get:function(){return this.translated?this.translated:this.raw?j(this.raw):void 0}},{key:"translateBlock",value:function(e,t){var n=ve.get(t),r=ge.get(t),a=me.get(t),l=this.options[t],f=l.reviveValues&&!!n,d=l.translateValues&&!!r,h=l.translateKeys&&!!a,p={},y=e;Array.isArray(y)||("function"==typeof y.entries&&(y=y.entries()),y=T(y));for(var w=0;w<y.length;w++){var x=y[w],_=x[0],S=x[1];f&&n.has(_)?S=n.get(_)(S):d&&r.has(_)&&(S=this.translateValue(S,r.get(_))),h&&a.has(_)&&(_=a.get(_)||_),p[_]=S}return p}},{key:"translateValue",value:function(e,t){return t[e]||t.DEFAULT||e}},{key:"assignToOutput",value:function(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}},{key:"assignObjectToOutput",value:function(e,t,n){if(this.globalOptions.mergeOutput)return O(e,n);e[t]?O(e[t],n):e[t]=n}}],[{key:"findPosition",value:function(e,t){var n=e.getUint16(t+2)+2,r="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,a=t+r,l=n-r;return{offset:t,length:n,headerLength:r,start:a,size:l,end:a+l}}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(e,new Le(l({},this.type,t))).parse()}}]),e}();function Je(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Qe(){}function et(e,t){if(!t)return e&&e.then?e.then(Qe):Promise.resolve()}function tt(e){var t=e();if(t&&t.then)return t.then(Qe)}function nt(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function rt(e,t,n){if(!e.s){if(n instanceof it){if(!n.s)return void(n.o=rt.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(rt.bind(null,e,t),rt.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}l(Xe,"headerLength",4),l(Xe,"type",void 0),l(Xe,"multiSegment",!1),l(Xe,"canHandle",(function(){return!1}));var it=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,a=this.s;if(a){var l=1&a?t:n;if(l){try{rt(r,1,l(this.v))}catch(e){rt(r,2,e)}return r}return this}return this.o=function(e){try{var a=e.v;1&e.s?rt(r,1,t?t(a):a):n?rt(r,1,n(a)):rt(r,2,a)}catch(e){rt(r,2,e)}},r},e}();function ot(e){return e instanceof it&&1&e.s}function at(e,t,n){for(var r;;){var a=e();if(ot(a)&&(a=a.v),!a)return l;if(a.then){r=0;break}var l=n();if(l&&l.then){if(!ot(l)){r=1;break}l=l.s}if(t){var f=t();if(f&&f.then&&!ot(f)){r=2;break}}}var d=new it,h=rt.bind(null,d,2);return(0===r?a.then(y):1===r?l.then(p):f.then(w)).then(void 0,h),d;function p(r){l=r;do{if(t&&(f=t())&&f.then&&!ot(f))return void f.then(w).then(void 0,h);if(!(a=e())||ot(a)&&!a.v)return void rt(d,1,l);if(a.then)return void a.then(y).then(void 0,h);ot(l=n())&&(l=l.v)}while(!l||!l.then);l.then(p).then(void 0,h)}function y(e){e?(l=n())&&l.then?l.then(p).then(void 0,h):p(l):rt(d,1,l)}function w(){(a=e())?a.then?a.then(y).then(void 0,h):y(a):rt(d,1,l)}}function st(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function lt(e){return e>=224&&e<=239}function ct(e,t,n){var r=ee;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=T(r));for(var a=0;a<r.length;a++){var l=r[a],f=l[0];if(l[1].canHandle(e,t,n))return f}}var ut=function(e){f(r,e);var n=S(r);function r(){var e;t(this,r);for(var a=arguments.length,f=new Array(a),d=0;d<a;d++)f[d]=arguments[d];return l(x(e=n.call.apply(n,[this].concat(f))),"appSegments",[]),l(x(e),"jpegSegments",[]),l(x(e),"unknownSegments",[]),e}return a(r,[{key:"parse",value:function(){try{var e=this;return Je(e.findAppSegments(),(function(){return Je(e.readSegments(e.appSegments),(function(){e.mergeMultiSegments(),e.createParsers(e.mergedAppSegments||e.appSegments)}))}))}catch(e){return Promise.reject(e)}}},{key:"setupSegmentFinderArgs",value:function(e){var t=this;!0===e?(this.findAll=!0,this.wanted=R(ee.keyList())):(e=void 0===e?ee.keyList().filter((function(e){return t.options[e].enabled})):e.filter((function(e){return t.options[e].enabled&&ee.has(e)})),this.findAll=!1,this.remaining=R(e),this.wanted=R(e)),this.unfinishedMultiSegment=!1}},{key:"findAppSegments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;try{var n=this;n.setupSegmentFinderArgs(t);var r=n.file,a=n.findAll,l=n.wanted,f=n.remaining;return nt((function(){if(!a&&n.file.chunked)return a=T(l).some((function(e){var t=ee.get(e),r=n.options[e];return t.multiSegment&&r.multiSegment})),tt((function(){if(a)return et(n.file.readWhole())}))}),(function(){var t=!1;if(e=n.findAppSegmentsInRange(e,r.byteLength),!n.options.onlyTiff)return function(){if(r.chunked){var a=!1;return at((function(){return!t&&f.size>0&&!a&&(!!r.canReadNextChunk||!!n.unfinishedMultiSegment)}),void 0,(function(){var l=r.nextChunkOffset,f=n.appSegments.some((function(e){return!n.file.available(e.offset||e.start,e.length||e.size)}));return nt((function(){return Je(e>l&&!f?r.readNextChunk(e):r.readNextChunk(l),(function(e){a=!e}))}),(function(){void 0===(e=n.findAppSegmentsInRange(e,r.byteLength))&&(t=!0)}))}))}}()}))}catch(e){return Promise.reject(e)}}},{key:"findAppSegmentsInRange",value:function(e,t){t-=2;for(var n,r,a,l,f,d,h=this.file,p=this.findAll,y=this.wanted,w=this.remaining,x=this.options;e<t;e++)if(255===h.getUint8(e))if(lt(n=h.getUint8(e+1))){if(r=h.getUint16(e+2),(a=ct(h,e,r))&&y.has(a)&&(f=(l=ee.get(a)).findPosition(h,e),d=x[a],f.type=a,this.appSegments.push(f),!p&&(l.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=f.chunkNumber<f.chunkCount,this.unfinishedMultiSegment||w.delete(a)):w.delete(a),0===w.size)))break;x.recordUnknownSegments&&((f=Xe.findPosition(h,e)).marker=n,this.unknownSegments.push(f)),e+=r+1}else if(st(n)){if(r=h.getUint16(e+2),218===n&&!1!==x.stopAfterSos)return;x.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:n}),e+=r+1}return e}},{key:"mergeMultiSegments",value:function(){var e=this;if(this.appSegments.some((function(e){return e.multiSegment}))){var t=function(e,t){for(var n,r,a,l=I(),f=0;f<e.length;f++)r=(n=e[f])[t],l.has(r)?a=l.get(r):l.set(r,a=[]),a.push(n);return T(l)}(this.appSegments,"type");this.mergedAppSegments=t.map((function(t){var n=t[0],r=t[1],a=ee.get(n,e.options);return a.handleMultiSegments?{type:n,chunk:a.handleMultiSegments(r)}:r[0]}))}}},{key:"getSegment",value:function(e){return this.appSegments.find((function(t){return t.type===e}))}},{key:"getOrFindSegment",value:function(e){try{var t=this,n=t.getSegment(e);return nt((function(){if(void 0===n)return Je(t.findAppSegments(0,[e]),(function(){n=t.getSegment(e)}))}),(function(){return n}))}catch(e){return Promise.reject(e)}}}],[{key:"canHandle",value:function(e,t){return 65496===t}}]),r}(Ye);function ft(){}function dt(e,t){if(!t)return e&&e.then?e.then(ft):Promise.resolve()}function ht(e,t){var n=e();return n&&n.then?n.then(t):t(n)}l(ut,"type","jpeg"),Q.set("jpeg",ut);var pt=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],mt=function(e){f(r,e);var n=S(r);function r(){return t(this,r),n.apply(this,arguments)}return a(r,[{key:"parse",value:function(){try{var e=this;e.parseHeader();var t=e.options;return ht((function(){if(t.ifd0.enabled)return dt(e.parseIfd0Block())}),(function(){return ht((function(){if(t.exif.enabled)return dt(e.safeParse("parseExifBlock"))}),(function(){return ht((function(){if(t.gps.enabled)return dt(e.safeParse("parseGpsBlock"))}),(function(){return ht((function(){if(t.interop.enabled)return dt(e.safeParse("parseInteropBlock"))}),(function(){return ht((function(){if(t.ifd1.enabled)return dt(e.safeParse("parseThumbnailBlock"))}),(function(){return e.createOutput()}))}))}))}))}))}catch(e){return Promise.reject(e)}}},{key:"safeParse",value:function(e){var t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}},{key:"findIfd0Offset",value:function(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}},{key:"findIfd1Offset",value:function(){if(void 0===this.ifd1Offset){this.findIfd0Offset();var e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}},{key:"parseBlock",value:function(e,t){var n=I();return this[t]=n,this.parseTags(e,t,n),n}},{key:"parseIfd0Block",value:function(){try{var e=this;if(e.ifd0)return;var t=e.file;return e.findIfd0Offset(),e.ifd0Offset<8&&V("Malformed EXIF data"),!t.chunked&&e.ifd0Offset>t.byteLength&&V("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(e.ifd0Offset,", file.byteLength: ").concat(t.byteLength)),ht((function(){if(t.tiff)return dt(t.ensureChunk(e.ifd0Offset,W(e.options)))}),(function(){var t=e.parseBlock(e.ifd0Offset,"ifd0");if(0!==t.size)return e.exifOffset=t.get(_e),e.interopOffset=t.get(ke),e.gpsOffset=t.get(Se),e.xmp=t.get(700),e.iptc=t.get(we),e.icc=t.get(xe),e.options.sanitize&&(t.delete(_e),t.delete(ke),t.delete(Se),t.delete(700),t.delete(we),t.delete(xe)),t}))}catch(e){return Promise.reject(e)}}},{key:"parseExifBlock",value:function(){try{var e=this;if(e.exif)return;return ht((function(){if(!e.ifd0)return dt(e.parseIfd0Block())}),(function(){if(void 0!==e.exifOffset)return ht((function(){if(e.file.tiff)return dt(e.file.ensureChunk(e.exifOffset,W(e.options)))}),(function(){var t=e.parseBlock(e.exifOffset,"exif");return e.interopOffset||(e.interopOffset=t.get(ke)),e.makerNote=t.get(ye),e.userComment=t.get(be),e.options.sanitize&&(t.delete(ke),t.delete(ye),t.delete(be)),e.unpack(t,41728),e.unpack(t,41729),t}))}))}catch(e){return Promise.reject(e)}}},{key:"unpack",value:function(e,t){var n=e.get(t);n&&1===n.length&&e.set(t,n[0])}},{key:"parseGpsBlock",value:function(){try{var e=this;if(e.gps)return;return ht((function(){if(!e.ifd0)return dt(e.parseIfd0Block())}),(function(){if(void 0!==e.gpsOffset){var t=e.parseBlock(e.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",gt.apply(void 0,t.get(2).concat([t.get(1)]))),t.set("longitude",gt.apply(void 0,t.get(4).concat([t.get(3)])))),t}}))}catch(e){return Promise.reject(e)}}},{key:"parseInteropBlock",value:function(){try{var e=this;if(e.interop)return;return ht((function(){if(!e.ifd0)return dt(e.parseIfd0Block())}),(function(){return ht((function(){if(void 0===e.interopOffset&&!e.exif)return dt(e.parseExifBlock())}),(function(){if(void 0!==e.interopOffset)return e.parseBlock(e.interopOffset,"interop")}))}))}catch(e){return Promise.reject(e)}}},{key:"parseThumbnailBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var t=this;if(t.ifd1||t.ifd1Parsed)return;if(t.options.mergeOutput&&!e)return;return t.findIfd1Offset(),t.ifd1Offset>0&&(t.parseBlock(t.ifd1Offset,"ifd1"),t.ifd1Parsed=!0),t.ifd1}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;return e.headerParsed||e.parseHeader(),ht((function(){if(!e.ifd1Parsed)return dt(e.parseThumbnailBlock(!0))}),(function(){if(void 0!==e.ifd1){var t=e.ifd1.get(513),n=e.ifd1.get(514);return e.chunk.getUint8Array(t,n)}}))}catch(e){return Promise.reject(e)}}},{key:"image",get:function(){return this.ifd0}},{key:"thumbnail",get:function(){return this.ifd1}},{key:"createOutput",value:function(){var e,t,n,r={},a=je;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=T(a));for(var l=0;l<a.length;l++)if(!z(e=this[t=a[l]]))if(n=this.canTranslate?this.translateBlock(e,t):j(e),this.options.mergeOutput){if("ifd1"===t)continue;O(r,n)}else r[t]=n;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}},{key:"assignToOutput",value:function(e,t){if(this.globalOptions.mergeOutput)O(e,t);else{var n=E(t);Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=T(n));for(var r=0;r<n.length;r++){var a=n[r],l=a[0],f=a[1];this.assignObjectToOutput(e,l,f)}}}}],[{key:"canHandle",value:function(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}}]),r}(function(e){f(r,e);var n=S(r);function r(){return t(this,r),n.apply(this,arguments)}return a(r,[{key:"parseHeader",value:function(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}},{key:"parseTags",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I(),r=this.options[t],a=r.pick,l=r.skip,f=(a=R(a)).size>0,d=0===l.size,h=this.chunk.getUint16(e);e+=2;for(var p=0;p<h;p++){var y=this.chunk.getUint16(e);if(f){if(a.has(y)&&(n.set(y,this.parseTag(e,y,t)),a.delete(y),0===a.size))break}else!d&&l.has(y)||n.set(y,this.parseTag(e,y,t));e+=12}return n}},{key:"parseTag",value:function(e,t,n){var r,a=this.chunk,l=a.getUint16(e+2),f=a.getUint32(e+4),d=pt[l];if(d*f<=4?e+=8:e=a.getUint32(e+8),(l<1||l>13)&&V("Invalid TIFF value type. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(l,", offset ").concat(e)),e>a.byteLength&&V("Invalid TIFF value offset. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(l,", offset ").concat(e," is outside of chunk size ").concat(a.byteLength)),1===l)return a.getUint8Array(e,f);if(2===l)return""===(r=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(r=a.getString(e,f)).trim())?void 0:r;if(7===l)return a.getUint8Array(e,f);if(1===f)return this.parseTagValue(l,e);for(var h=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(l))(f),p=d,y=0;y<f;y++)h[y]=this.parseTagValue(l,e),e+=p;return h}},{key:"parseTagValue",value:function(e,t){var n=this.chunk;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:case 13:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);default:V("Invalid tiff type ".concat(e))}}}]),r}(Xe));function gt(e,t,n,r){var a=e+t/60+n/3600;return"S"!==r&&"W"!==r||(a*=-1),a}l(mt,"type","tiff"),l(mt,"headerLength",10),ee.set("tiff",mt);var vt=Object.freeze({__proto__:null,default:Ge,Exifr:We,fileParsers:Q,segmentParsers:ee,fileReaders:te,tagKeys:me,tagValues:ge,tagRevivers:ve,createDictionary:he,extendDictionary:pe,fetchUrlAsArrayBuffer:ae,readBlobAsArrayBuffer:oe,chunkedProps:Ce,otherSegments:Ee,segments:Oe,tiffBlocks:je,segmentsAndBlocks:$e,tiffExtractables:Te,inheritables:Ae,allFormatters:Pe,Options:Le,parse:Ze});function yt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function bt(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var wt=bt((function(e){var t=new We(Et);return yt(t.read(e),(function(){return yt(t.parse(),(function(e){if(e&&e.ifd0)return e.ifd0[274]}))}))})),xt=bt((function(e){var t=new We(Ct);return yt(t.read(e),(function(){return yt(t.parse(),(function(e){if(e&&e.gps){var t=e.gps;return{latitude:t.latitude,longitude:t.longitude}}}))}))})),_t=bt((function(e){return yt(this.thumbnail(e),(function(e){if(void 0!==e){var t=new Blob([e]);return URL.createObjectURL(t)}}))})),St=bt((function(e){var t=new We(Ot);return yt(t.read(e),(function(){return yt(t.extractThumbnail(),(function(e){return e&&U?B.from(e):e}))}))})),kt={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Ct=O({},kt,{firstChunkSize:4e4,gps:[1,2,3,4]}),Et=O({},kt,{firstChunkSize:4e4,ifd0:[274]}),Ot=O({},kt,{tiff:!1,ifd1:!0,mergeOutput:!1}),jt=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});if(e.rotateCanvas=!0,e.rotateCss=!0,"object"==typeof navigator){var $t=navigator.userAgent;if($t.includes("iPad")||$t.includes("iPhone")){var Tt=$t.match(/OS (\d+)_(\d+)/);if(Tt){var At=Tt[1],Pt=Tt[2],Dt=Number(At)+.1*Number(Pt);e.rotateCanvas=Dt<13.4,e.rotateCss=!1}}else if($t.includes("OS X 10")){var Rt=$t.match(/OS X 10[_.](\d+)/)[1];e.rotateCanvas=e.rotateCss=Number(Rt)<15}if($t.includes("Chrome/")){var It=$t.match(/Chrome\/(\d+)/)[1];e.rotateCanvas=e.rotateCss=Number(It)<81}else if($t.includes("Firefox/")){var Mt=$t.match(/Firefox\/(\d+)/)[1];e.rotateCanvas=e.rotateCss=Number(Mt)<77}}function Lt(){}var Nt=function(e){f(r,e);var n=S(r);function r(){var e;t(this,r);for(var a=arguments.length,f=new Array(a),d=0;d<a;d++)f[d]=arguments[d];return l(x(e=n.call.apply(n,[this].concat(f))),"ranges",new Ft),0!==e.byteLength&&e.ranges.add(0,e.byteLength),e}return a(r,[{key:"_tryExtend",value:function(e,t,n){if(0===e&&0===this.byteLength&&n){var r=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(r)}else{var a=e+t;if(a>this.byteLength){var l=this._extend(a).dataView;this._swapDataView(l)}}}},{key:"_extend",value:function(e){var t;t=U?B.allocUnsafe(e):new Uint8Array(e);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}},{key:"subarray",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||this._lengthToEnd(e),n&&this._tryExtend(e,t),this.ranges.add(e,t),k(d(r.prototype),"subarray",this).call(this,e,t)}},{key:"set",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this._tryExtend(t,e.byteLength,e);var n=k(d(r.prototype),"set",this).call(this,e,t);return this.ranges.add(t,n.byteLength),n}},{key:"ensureChunk",value:function(e,t){try{var n=this;if(!n.chunked)return;if(n.ranges.available(e,t))return;return function(e,t){return e&&e.then?e.then(Lt):Promise.resolve()}(n.readChunk(e,t))}catch(e){return Promise.reject(e)}}},{key:"available",value:function(e,t){return this.ranges.available(e,t)}}]),r}(Y),Ft=function(){function e(){t(this,e),l(this,"list",[])}return a(e,[{key:"length",get:function(){return this.list.length}},{key:"add",value:function(e,t){var n=e+t,r=this.list.filter((function(t){return qt(e,t.offset,n)||qt(e,t.end,n)}));if(r.length>0){e=Math.min.apply(Math,[e].concat(r.map((function(e){return e.offset})))),t=(n=Math.max.apply(Math,[n].concat(r.map((function(e){return e.end})))))-e;var a=r.shift();a.offset=e,a.length=t,a.end=n,this.list=this.list.filter((function(e){return!r.includes(e)}))}else this.list.push({offset:e,length:t,end:n})}},{key:"available",value:function(e,t){var n=e+t;return this.list.some((function(t){return t.offset<=e&&n<=t.end}))}}]),e}();function qt(e,t,n){return e<=t&&t<=n}function Bt(){}function Ut(e,t){if(!t)return e&&e.then?e.then(Bt):Promise.resolve()}function Ht(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var zt=function(e){f(r,e);var n=S(r);function r(){return t(this,r),n.apply(this,arguments)}return a(r,[{key:"readWhole",value:function(){try{var e=this;return e.chunked=!1,Ht(oe(e.input),(function(t){e._swapArrayBuffer(t)}))}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){return this.chunked=!0,this.size=this.input.size,k(d(r.prototype),"readChunked",this).call(this)}},{key:"_readChunk",value:function(e,t){try{var n=this,r=t?e+t:void 0,a=n.input.slice(e,r);return Ht(oe(a),(function(t){return n.set(t,e,!0)}))}catch(e){return Promise.reject(e)}}}]),r}(function(e){f(r,e);var n=S(r);function r(e,a){var f;return t(this,r),l(x(f=n.call(this,0)),"chunksRead",0),f.input=e,f.options=a,f}return a(r,[{key:"readWhole",value:function(){try{var e=this;return e.chunked=!1,Ut(e.readChunk(e.nextChunkOffset))}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){try{var e=this;return e.chunked=!0,Ut(e.readChunk(0,e.options.firstChunkSize))}catch(e){return Promise.reject(e)}}},{key:"readNextChunk",value:function(e){try{var t=this;if(void 0===e&&(e=t.nextChunkOffset),t.fullyRead)return t.chunksRead++,!1;var n=t.options.chunkSize;return r=t.readChunk(e,n),a=function(e){return!!e&&e.byteLength===n},l?a?a(r):r:(r&&r.then||(r=Promise.resolve(r)),a?r.then(a):r)}catch(e){return Promise.reject(e)}var r,a,l}},{key:"readChunk",value:function(e,t){try{var n=this;if(n.chunksRead++,0===(t=n.safeWrapAddress(e,t)))return;return n._readChunk(e,t)}catch(e){return Promise.reject(e)}}},{key:"safeWrapAddress",value:function(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}},{key:"nextChunkOffset",get:function(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}},{key:"canReadNextChunk",get:function(){return this.chunksRead<this.options.chunkLimit}},{key:"fullyRead",get:function(){return void 0!==this.size&&this.nextChunkOffset===this.size}},{key:"read",value:function(){return this.options.chunked?this.readChunked():this.readWhole()}},{key:"close",value:function(){}}]),r}(Nt));te.set("blob",zt),e.Exifr=We,e.Options=Le,e.allFormatters=Pe,e.chunkedProps=Ce,e.createDictionary=he,e.default=vt,e.disableAllOptions=kt,e.extendDictionary=pe,e.fetchUrlAsArrayBuffer=ae,e.fileParsers=Q,e.fileReaders=te,e.gps=xt,e.gpsOnlyOptions=Ct,e.inheritables=Ae,e.orientation=wt,e.orientationOnlyOptions=Et,e.otherSegments=Ee,e.parse=Ze,e.readBlobAsArrayBuffer=oe,e.rotation=function(t){return yt(wt(t),(function(t){return O({canvas:e.rotateCanvas,css:e.rotateCss},jt[t])}))},e.rotations=jt,e.segmentParsers=ee,e.segments=Oe,e.segmentsAndBlocks=$e,e.tagKeys=me,e.tagRevivers=ve,e.tagValues=ge,e.thumbnail=St,e.thumbnailOnlyOptions=Ot,e.thumbnailUrl=_t,e.tiffBlocks=je,e.tiffExtractables=Te,Object.defineProperty(e,"__esModule",{value:!0})}(t)},49798:function(e,t,n){var r=n(38291),a=n(50232);void 0===a.$&&(a.$=r),void 0===a.jQuery&&(a.jQuery=r),e.exports=r},50232:function(e,t,n){"use strict";e.exports=function(){if("object"==typeof globalThis)return globalThis;var e;try{e=this||new Function("return this")()}catch(e){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return e}()},46388:function(e){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString;e.exports=function(e,r,a){if("[object Function]"!==n.call(r))throw new TypeError("iterator must be a function");var l=e.length;if(l===+l)for(var f=0;f<l;f++)r.call(a,e[f],f,e);else for(var d in e)t.call(e,d)&&r.call(a,e[d],d,e)}},46522:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=n(1),f=n(7),d=f.get,h=(f.deepValue,f.isArray),p=function(){function e(t,n){var r=n.location,a=void 0===r?0:r,l=n.distance,f=void 0===l?100:l,h=n.threshold,p=void 0===h?.6:h,y=n.maxPatternLength,w=void 0===y?32:y,x=n.caseSensitive,_=void 0!==x&&x,S=n.tokenSeparator,k=void 0===S?/ +/g:S,C=n.findAllMatches,E=void 0!==C&&C,O=n.minMatchCharLength,j=void 0===O?1:O,T=n.id,A=void 0===T?null:T,P=n.keys,D=void 0===P?[]:P,R=n.shouldSort,I=void 0===R||R,M=n.getFn,L=void 0===M?d:M,N=n.sortFn,F=void 0===N?function(e,t){return e.score-t.score}:N,q=n.tokenize,B=void 0!==q&&q,U=n.matchAllTokens,H=void 0!==U&&U,z=n.includeMatches,V=void 0!==z&&z,W=n.includeScore,Z=void 0!==W&&W,G=n.verbose,K=void 0!==G&&G;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:a,distance:f,threshold:p,maxPatternLength:w,isCaseSensitive:_,tokenSeparator:k,findAllMatches:E,minMatchCharLength:j,id:A,keys:D,includeMatches:V,includeScore:Z,shouldSort:I,getFn:L,sortFn:F,verbose:K,tokenize:B,matchAllTokens:H},this.setCollection(t),this._processKeys(D)}var t,n,f;return t=e,(n=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,n=e.length;t<n;t+=1){var r=e[t];this._keyWeights[r]=1,this._keyNames.push(r)}else{for(var a=null,l=null,f=0,d=0,h=e.length;d<h;d+=1){var p=e[d];if(!p.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var y=p.name;if(this._keyNames.push(y),!p.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var w=p.weight;if(w<0||w>1)throw new Error('"weight" property in key must bein the range of [0, 1)');l=null==l?w:Math.max(l,w),a=null==a?w:Math.min(a,w),this._keyWeights[y]=w,f+=w}if(f>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var n=this._prepareSearchers(e),r=n.tokenSearchers,a=n.fullSearcher,l=this._search(r,a);return this._computeScore(l),this.options.shouldSort&&this._sort(l),t.limit&&"number"==typeof t.limit&&(l=l.slice(0,t.limit)),this._format(l)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,a=n.length;r<a;r+=1)t.push(new l(n[r],this.options));return{tokenSearchers:t,fullSearcher:new l(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.list,r={},a=[];if("string"==typeof n[0]){for(var l=0,f=n.length;l<f;l+=1)this._analyze({key:"",value:n[l],record:l,index:l},{resultMap:r,results:a,tokenSearchers:e,fullSearcher:t});return a}for(var d=0,h=n.length;d<h;d+=1)for(var p=n[d],y=0,w=this._keyNames.length;y<w;y+=1){var x=this._keyNames[y];this._analyze({key:x,value:this.options.getFn(p,x),record:p,index:d},{resultMap:r,results:a,tokenSearchers:e,fullSearcher:t})}return a}},{key:"_analyze",value:function(e,t){var n=this,r=e.key,a=e.arrayIndex,l=void 0===a?-1:a,f=e.value,d=e.record,p=e.index,y=t.tokenSearchers,w=void 0===y?[]:y,x=t.fullSearcher,_=t.resultMap,S=void 0===_?{}:_,k=t.results,C=void 0===k?[]:k;!function e(t,a,l,f){if(null!=a)if("string"==typeof a){var d=!1,p=-1,y=0;n._log("\nKey: ".concat(""===r?"--":r));var _=x.search(a);if(n._log('Full text: "'.concat(a,'", score: ').concat(_.score)),n.options.tokenize){for(var k=a.split(n.options.tokenSeparator),E=k.length,O=[],j=0,T=w.length;j<T;j+=1){var A=w[j];n._log('\nPattern: "'.concat(A.pattern,'"'));for(var P=!1,D=0;D<E;D+=1){var R=k[D],I=A.search(R),M={};I.isMatch?(M[R]=I.score,d=!0,P=!0,O.push(I.score)):(M[R]=1,n.options.matchAllTokens||O.push(1)),n._log('Token: "'.concat(R,'", score: ').concat(M[R]))}P&&(y+=1)}p=O[0];for(var L=O.length,N=1;N<L;N+=1)p+=O[N];p/=L,n._log("Token score average:",p)}var F=_.score;p>-1&&(F=(F+p)/2),n._log("Score average:",F);var q=!n.options.tokenize||!n.options.matchAllTokens||y>=w.length;if(n._log("\nCheck Matches: ".concat(q)),(d||_.isMatch)&&q){var B={key:r,arrayIndex:t,value:a,score:F};n.options.includeMatches&&(B.matchedIndices=_.matchedIndices);var U=S[f];U?U.output.push(B):(S[f]={item:l,output:[B]},C.push(S[f]))}}else if(h(a))for(var H=0,z=a.length;H<z;H+=1)e(H,a[H],l,f)}(l,f,d,p)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,n=!!Object.keys(t).length,r=0,a=e.length;r<a;r+=1){for(var l=e[r],f=l.output,d=f.length,h=1,p=0;p<d;p+=1){var y=f[p],w=y.key,x=n?t[w]:1,_=0===y.score&&t&&t[w]>0?Number.EPSILON:y.score;h*=Math.pow(_,x)}l.score=h,this._log(l)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,(function(e,t){if("object"===r(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t}),2)),n=null}var a=[];this.options.includeMatches&&a.push((function(e,t){var n=e.output;t.matches=[];for(var r=0,a=n.length;r<a;r+=1){var l=n[r];if(0!==l.matchedIndices.length){var f={indices:l.matchedIndices,value:l.value};l.key&&(f.key=l.key),l.hasOwnProperty("arrayIndex")&&l.arrayIndex>-1&&(f.arrayIndex=l.arrayIndex),t.matches.push(f)}}})),this.options.includeScore&&a.push((function(e,t){t.score=e.score}));for(var l=0,f=e.length;l<f;l+=1){var d=e[l];if(this.options.id&&(d.item=this.options.getFn(d.item,this.options.id)[0]),a.length){for(var h={item:d.item},p=0,y=a.length;p<y;p+=1)a[p](d,h);t.push(h)}else t.push(d.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&a(t.prototype,n),f&&a(t,f),e}();e.exports=p},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(2),l=n(3),f=n(6),d=function(){function e(t,n){var r=n.location,a=void 0===r?0:r,l=n.distance,d=void 0===l?100:l,h=n.threshold,p=void 0===h?.6:h,y=n.maxPatternLength,w=void 0===y?32:y,x=n.isCaseSensitive,_=void 0!==x&&x,S=n.tokenSeparator,k=void 0===S?/ +/g:S,C=n.findAllMatches,E=void 0!==C&&C,O=n.minMatchCharLength,j=void 0===O?1:O,T=n.includeMatches,A=void 0!==T&&T;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:a,distance:d,threshold:p,maxPatternLength:w,isCaseSensitive:_,tokenSeparator:k,findAllMatches:E,includeMatches:A,minMatchCharLength:j},this.pattern=_?t:t.toLowerCase(),this.pattern.length<=w&&(this.patternAlphabet=f(this.pattern))}var t,n,d;return t=e,(n=[{key:"search",value:function(e){var t=this.options,n=t.isCaseSensitive,r=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var f={isMatch:!0,score:0};return r&&(f.matchedIndices=[[0,e.length-1]]),f}var d=this.options,h=d.maxPatternLength,p=d.tokenSeparator;if(this.pattern.length>h)return a(e,this.pattern,p);var y=this.options,w=y.location,x=y.distance,_=y.threshold,S=y.findAllMatches,k=y.minMatchCharLength;return l(e,this.pattern,this.patternAlphabet,{location:w,distance:x,threshold:_,findAllMatches:S,minMatchCharLength:k,includeMatches:r})}}])&&r(t.prototype,n),d&&r(t,d),e}();e.exports=d},function(e,t){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,a=new RegExp(t.replace(n,"\\$&").replace(r,"|")),l=e.match(a),f=!!l,d=[];if(f)for(var h=0,p=l.length;h<p;h+=1){var y=l[h];d.push([e.indexOf(y),y.length-1])}return{score:f?.5:1,isMatch:f,matchedIndices:d}}},function(e,t,n){var r=n(4),a=n(5);e.exports=function(e,t,n,l){for(var f=l.location,d=void 0===f?0:f,h=l.distance,p=void 0===h?100:h,y=l.threshold,w=void 0===y?.6:y,x=l.findAllMatches,_=void 0!==x&&x,S=l.minMatchCharLength,k=void 0===S?1:S,C=l.includeMatches,E=void 0!==C&&C,O=d,j=e.length,T=w,A=e.indexOf(t,O),P=t.length,D=[],R=0;R<j;R+=1)D[R]=0;if(-1!==A){var I=r(t,{errors:0,currentLocation:A,expectedLocation:O,distance:p});if(T=Math.min(I,T),-1!==(A=e.lastIndexOf(t,O+P))){var M=r(t,{errors:0,currentLocation:A,expectedLocation:O,distance:p});T=Math.min(M,T)}}A=-1;for(var L=[],N=1,F=P+j,q=1<<(P<=31?P-1:30),B=0;B<P;B+=1){for(var U=0,H=F;U<H;)r(t,{errors:B,currentLocation:O+H,expectedLocation:O,distance:p})<=T?U=H:F=H,H=Math.floor((F-U)/2+U);F=H;var z=Math.max(1,O-H+1),V=_?j:Math.min(O+H,j)+P,W=Array(V+2);W[V+1]=(1<<B)-1;for(var Z=V;Z>=z;Z-=1){var G=Z-1,K=n[e.charAt(G)];if(K&&(D[G]=1),W[Z]=(W[Z+1]<<1|1)&K,0!==B&&(W[Z]|=(L[Z+1]|L[Z])<<1|1|L[Z+1]),W[Z]&q&&(N=r(t,{errors:B,currentLocation:G,expectedLocation:O,distance:p}))<=T){if(T=N,(A=G)<=O)break;z=Math.max(1,2*O-A)}}if(r(t,{errors:B+1,currentLocation:O,expectedLocation:O,distance:p})>T)break;L=W}var Y={isMatch:A>=0,score:0===N?.001:N};return E&&(Y.matchedIndices=a(D,k)),Y}},function(e,t){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,a=t.currentLocation,l=void 0===a?0:a,f=t.expectedLocation,d=void 0===f?0:f,h=t.distance,p=void 0===h?100:h,y=r/e.length,w=Math.abs(d-l);return p?y+w/p:w?1:y}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,a=-1,l=0,f=e.length;l<f;l+=1){var d=e[l];d&&-1===r?r=l:d||-1===r||((a=l-1)-r+1>=t&&n.push([r,a]),r=-1)}return e[l-1]&&l-r>=t&&n.push([r,l-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var a=0;a<n;a+=1)t[e.charAt(a)]|=1<<n-a-1;return t}},function(e,t){var n=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},r=function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)},a=function(e){return"string"==typeof e},l=function(e){return"number"==typeof e};e.exports={get:function(e,t){var f=[];return function e(t,d){if(d){var h=d.indexOf("."),p=d,y=null;-1!==h&&(p=d.slice(0,h),y=d.slice(h+1));var w=t[p];if(null!=w)if(y||!a(w)&&!l(w))if(n(w))for(var x=0,_=w.length;x<_;x+=1)e(w[x],y);else y&&e(w,y);else f.push(r(w))}else f.push(t)}(e,t),f},isArray:n,isString:a,isNum:l,toString:r}}])},35048:function(e,t,n){var r;r="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=r},21725:function(e,t,n){"use strict";var r=n(34404),a=n.n(r),l=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function f(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(a()[n[1]]||"/"===e.charAt(e.length-2))&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var f=new RegExp(l),d=null;null!==(d=f.exec(e));)if(d[0].trim())if(d[1]){var h=d[1].trim(),p=[h,""];h.indexOf("=")>-1&&(p=h.split("=")),t.attrs[p[0]]=p[1],f.lastIndex--}else d[2]&&(t.attrs[d[2]]=d[3].trim().substring(1,d[3].length-1));return t}var d=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,h=/^\s*$/,p=Object.create(null);function y(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(y,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e"}}var w={parse:function(e,t){t||(t={}),t.components||(t.components=p);var n,r=[],a=[],l=-1,y=!1;if(0!==e.indexOf("<")){var w=e.indexOf("<");r.push({type:"text",content:-1===w?e:e.substring(0,w)})}return e.replace(d,(function(d,p){if(y){if(d!=="</"+n.name+">")return;y=!1}var w,x="/"!==d.charAt(1),_=d.startsWith("\x3c!--"),S=p+d.length,k=e.charAt(S);if(_){var C=f(d);return l<0?(r.push(C),r):((w=a[l]).children.push(C),r)}if(x&&(l++,"tag"===(n=f(d)).type&&t.components[n.name]&&(n.type="component",y=!0),n.voidElement||y||!k||"<"===k||n.children.push({type:"text",content:e.slice(S,e.indexOf("<",S))}),0===l&&r.push(n),(w=a[l-1])&&w.children.push(n),a[l]=n),(!x||n.voidElement)&&(l>-1&&(n.voidElement||n.name===d.slice(2,-1))&&(l--,n=-1===l?r:a[l]),!y&&"<"!==k&&k)){w=-1===l?r:a[l].children;var E=e.indexOf("<",S),O=e.slice(S,-1===E?void 0:E);h.test(O)&&(O=" "),(E>-1&&l+w.length>=0||" "!==O)&&w.push({type:"text",content:O})}})),r},stringify:function(e){return e.reduce((function(e,t){return e+y("",t)}),"")}};t.Z=w},34404:function(e){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},91285:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},47677:function(e){"use strict";e.exports=function(e,t,n,r,a,l,f,d){if(!e){var h;if(void 0===t)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,r,a,l,f,d],y=0;(h=new Error(t.replace(/%s/g,(function(){return p[y++]})))).name="Invariant Violation"}throw h.framesToPop=1,h}}},98843:function(e){e.exports=function(e,t){if(e===t)return!0;for(var n in e)if(!(n in t))return!1;for(var n in t)if(e[n]!==t[n])return!1;return!0}},77906:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},12405:function(e,t,n){e.exports=self.fetch||(self.fetch=n(94677).default||n(94677))},38291:function(e,t){var n,r,a;r="undefined"!=typeof window?window:this,a=function(r,a){var l=[],f=r.document,d=l.slice,h=l.concat,p=l.push,y=l.indexOf,w={},x=w.toString,_=w.hasOwnProperty,S={},k="2.2.4",C=function(e,t){return new C.fn.init(e,t)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,O=/^-ms-/,j=/-([\da-z])/gi,T=function(e,t){return t.toUpperCase()};function A(e){var t=!!e&&"length"in e&&e.length,n=C.type(e);return"function"!==n&&!C.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}C.fn=C.prototype={jquery:k,constructor:C,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:p,sort:l.sort,splice:l.splice},C.extend=C.fn.extend=function(){var e,t,n,r,a,l,f=arguments[0]||{},d=1,h=arguments.length,p=!1;for("boolean"==typeof f&&(p=f,f=arguments[d]||{},d++),"object"==typeof f||C.isFunction(f)||(f={}),d===h&&(f=this,d--);d<h;d++)if(null!=(e=arguments[d]))for(t in e)n=f[t],f!==(r=e[t])&&(p&&r&&(C.isPlainObject(r)||(a=C.isArray(r)))?(a?(a=!1,l=n&&C.isArray(n)?n:[]):l=n&&C.isPlainObject(n)?n:{},f[t]=C.extend(p,l,r)):void 0!==r&&(f[t]=r));return f},C.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===C.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!C.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==C.type(e)||e.nodeType||C.isWindow(e))return!1;if(e.constructor&&!_.call(e,"constructor")&&!_.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||_.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?w[x.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=C.trim(e))&&(1===e.indexOf("use strict")?((t=f.createElement("script")).text=e,f.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(O,"ms-").replace(j,T)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(A(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(E,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(A(Object(e))?C.merge(n,"string"==typeof e?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:y.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,l=e.length,f=!n;a<l;a++)!t(e[a],a)!==f&&r.push(e[a]);return r},map:function(e,t,n){var r,a,l=0,f=[];if(A(e))for(r=e.length;l<r;l++)null!=(a=t(e[l],l,n))&&f.push(a);else for(l in e)null!=(a=t(e[l],l,n))&&f.push(a);return h.apply([],f)},guid:1,proxy:function(e,t){var n,r,a;if("string"==typeof t&&(n=e[t],t=e,e=n),C.isFunction(e))return r=d.call(arguments,2),a=function(){return e.apply(t||this,r.concat(d.call(arguments)))},a.guid=e.guid=e.guid||C.guid++,a},now:Date.now,support:S}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=l[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){w["[object "+t+"]"]=t.toLowerCase()}));var P=function(e){var t,n,r,a,l,f,d,h,p,y,w,x,_,S,k,C,E,O,j,T="sizzle"+1*new Date,A=e.document,P=0,D=0,R=ge(),I=ge(),M=ge(),L=function(e,t){return e===t&&(w=!0),0},N=1<<31,F={}.hasOwnProperty,q=[],B=q.pop,U=q.push,H=q.push,z=q.slice,V=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},W="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Z="[\\x20\\t\\r\\n\\f]",G="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",K="\\["+Z+"*("+G+")(?:"+Z+"*([*^$|!~]?=)"+Z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+G+"))|)"+Z+"*\\]",Y=":("+G+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+K+")*)|.*)\\)|)",X=new RegExp(Z+"+","g"),J=new RegExp("^"+Z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Z+"+$","g"),Q=new RegExp("^"+Z+"*,"+Z+"*"),ee=new RegExp("^"+Z+"*([>+~]|"+Z+")"+Z+"*"),te=new RegExp("="+Z+"*([^\\]'\"]*?)"+Z+"*\\]","g"),ne=new RegExp(Y),re=new RegExp("^"+G+"$"),oe={ID:new RegExp("^#("+G+")"),CLASS:new RegExp("^\\.("+G+")"),TAG:new RegExp("^("+G+"|[*])"),ATTR:new RegExp("^"+K),PSEUDO:new RegExp("^"+Y),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Z+"*(even|odd|(([+-]|)(\\d*)n|)"+Z+"*(?:([+-]|)"+Z+"*(\\d+)|))"+Z+"*\\)|)","i"),bool:new RegExp("^(?:"+W+")$","i"),needsContext:new RegExp("^"+Z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Z+"*((?:-\\d)?\\d*)"+Z+"*\\)|)(?=[^-]|$)","i")},ae=/^(?:input|select|textarea|button)$/i,se=/^h\d$/i,le=/^[^{]+\{\s*\[native \w/,ce=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ue=/[+~]/,fe=/'|\\/g,de=new RegExp("\\\\([\\da-f]{1,6}"+Z+"?|("+Z+")|.)","ig"),he=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},pe=function(){x()};try{H.apply(q=z.call(A.childNodes),A.childNodes),q[A.childNodes.length].nodeType}catch(e){H={apply:q.length?function(e,t){U.apply(e,z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function me(e,t,r,a){var l,d,p,y,w,S,E,O,P=t&&t.ownerDocument,D=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==D&&9!==D&&11!==D)return r;if(!a&&((t?t.ownerDocument||t:A)!==_&&x(t),t=t||_,k)){if(11!==D&&(S=ce.exec(e)))if(l=S[1]){if(9===D){if(!(p=t.getElementById(l)))return r;if(p.id===l)return r.push(p),r}else if(P&&(p=P.getElementById(l))&&j(t,p)&&p.id===l)return r.push(p),r}else{if(S[2])return H.apply(r,t.getElementsByTagName(e)),r;if((l=S[3])&&n.getElementsByClassName&&t.getElementsByClassName)return H.apply(r,t.getElementsByClassName(l)),r}if(n.qsa&&!M[e+" "]&&(!C||!C.test(e))){if(1!==D)P=t,O=e;else if("object"!==t.nodeName.toLowerCase()){for((y=t.getAttribute("id"))?y=y.replace(fe,"\\$&"):t.setAttribute("id",y=T),d=(E=f(e)).length,w=re.test(y)?"#"+y:"[id='"+y+"']";d--;)E[d]=w+" "+Ee(E[d]);O=E.join(","),P=ue.test(e)&&ke(t.parentNode)||t}if(O)try{return H.apply(r,P.querySelectorAll(O)),r}catch(e){}finally{y===T&&t.removeAttribute("id")}}}return h(e.replace(J,"$1"),t,r,a)}function ge(){var e=[];return function t(n,a){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function ve(e){return e[T]=!0,e}function ye(e){var t=_.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function be(e,t){for(var n=e.split("|"),a=n.length;a--;)r.attrHandle[n[a]]=t}function we(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||N)-(~e.sourceIndex||N);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function xe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function _e(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function Se(e){return ve((function(t){return t=+t,ve((function(n,r){for(var a,l=e([],n.length,t),f=l.length;f--;)n[a=l[f]]&&(n[a]=!(r[a]=n[a]))}))}))}function ke(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=me.support={},l=me.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},x=me.setDocument=function(e){var t,a,f=e?e.ownerDocument||e:A;return f!==_&&9===f.nodeType&&f.documentElement?(S=(_=f).documentElement,k=!l(_),(a=_.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",pe,!1):a.attachEvent&&a.attachEvent("onunload",pe)),n.attributes=ye((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ye((function(e){return e.appendChild(_.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=le.test(_.getElementsByClassName),n.getById=ye((function(e){return S.appendChild(e).id=T,!_.getElementsByName||!_.getElementsByName(T).length})),n.getById?(r.find.ID=function(e,t){if(void 0!==t.getElementById&&k){var n=t.getElementById(e);return n?[n]:[]}},r.filter.ID=function(e){var t=e.replace(de,he);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(de,he);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,l=t.getElementsByTagName(e);if("*"===e){for(;n=l[a++];)1===n.nodeType&&r.push(n);return r}return l},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&k)return t.getElementsByClassName(e)},E=[],C=[],(n.qsa=le.test(_.querySelectorAll))&&(ye((function(e){S.appendChild(e).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&C.push("[*^$]="+Z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||C.push("\\["+Z+"*(?:value|"+W+")"),e.querySelectorAll("[id~="+T+"-]").length||C.push("~="),e.querySelectorAll(":checked").length||C.push(":checked"),e.querySelectorAll("a#"+T+"+*").length||C.push(".#.+[+~]")})),ye((function(e){var t=_.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&C.push("name"+Z+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||C.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),C.push(",.*:")}))),(n.matchesSelector=le.test(O=S.matches||S.webkitMatchesSelector||S.mozMatchesSelector||S.oMatchesSelector||S.msMatchesSelector))&&ye((function(e){n.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),E.push("!=",Y)})),C=C.length&&new RegExp(C.join("|")),E=E.length&&new RegExp(E.join("|")),t=le.test(S.compareDocumentPosition),j=t||le.test(S.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},L=t?function(e,t){if(e===t)return w=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===_||e.ownerDocument===A&&j(A,e)?-1:t===_||t.ownerDocument===A&&j(A,t)?1:y?V(y,e)-V(y,t):0:4&r?-1:1)}:function(e,t){if(e===t)return w=!0,0;var n,r=0,a=e.parentNode,l=t.parentNode,f=[e],d=[t];if(!a||!l)return e===_?-1:t===_?1:a?-1:l?1:y?V(y,e)-V(y,t):0;if(a===l)return we(e,t);for(n=e;n=n.parentNode;)f.unshift(n);for(n=t;n=n.parentNode;)d.unshift(n);for(;f[r]===d[r];)r++;return r?we(f[r],d[r]):f[r]===A?-1:d[r]===A?1:0},_):_},me.matches=function(e,t){return me(e,null,null,t)},me.matchesSelector=function(e,t){if((e.ownerDocument||e)!==_&&x(e),t=t.replace(te,"='$1']"),n.matchesSelector&&k&&!M[t+" "]&&(!E||!E.test(t))&&(!C||!C.test(t)))try{var r=O.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return me(t,_,null,[e]).length>0},me.contains=function(e,t){return(e.ownerDocument||e)!==_&&x(e),j(e,t)},me.attr=function(e,t){(e.ownerDocument||e)!==_&&x(e);var a=r.attrHandle[t.toLowerCase()],l=a&&F.call(r.attrHandle,t.toLowerCase())?a(e,t,!k):void 0;return void 0!==l?l:n.attributes||!k?e.getAttribute(t):(l=e.getAttributeNode(t))&&l.specified?l.value:null},me.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},me.uniqueSort=function(e){var t,r=[],a=0,l=0;if(w=!n.detectDuplicates,y=!n.sortStable&&e.slice(0),e.sort(L),w){for(;t=e[l++];)t===e[l]&&(a=r.push(l));for(;a--;)e.splice(r[a],1)}return y=null,e},a=me.getText=function(e){var t,n="",r=0,l=e.nodeType;if(l){if(1===l||9===l||11===l){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===l||4===l)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},r=me.selectors={cacheLength:50,createPseudo:ve,match:oe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(de,he),e[3]=(e[3]||e[4]||e[5]||"").replace(de,he),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||me.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&me.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return oe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ne.test(n)&&(t=f(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(de,he).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=R[e+" "];return t||(t=new RegExp("(^|"+Z+")"+e+"("+Z+"|$)"))&&R(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var a=me.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(X," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var l="nth"!==e.slice(0,3),f="last"!==e.slice(-4),d="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,h){var p,y,w,x,_,S,k=l!==f?"nextSibling":"previousSibling",C=t.parentNode,E=d&&t.nodeName.toLowerCase(),O=!h&&!d,j=!1;if(C){if(l){for(;k;){for(x=t;x=x[k];)if(d?x.nodeName.toLowerCase()===E:1===x.nodeType)return!1;S=k="only"===e&&!S&&"nextSibling"}return!0}if(S=[f?C.firstChild:C.lastChild],f&&O){for(j=(_=(p=(y=(w=(x=C)[T]||(x[T]={}))[x.uniqueID]||(w[x.uniqueID]={}))[e]||[])[0]===P&&p[1])&&p[2],x=_&&C.childNodes[_];x=++_&&x&&x[k]||(j=_=0)||S.pop();)if(1===x.nodeType&&++j&&x===t){y[e]=[P,_,j];break}}else if(O&&(j=_=(p=(y=(w=(x=t)[T]||(x[T]={}))[x.uniqueID]||(w[x.uniqueID]={}))[e]||[])[0]===P&&p[1]),!1===j)for(;(x=++_&&x&&x[k]||(j=_=0)||S.pop())&&((d?x.nodeName.toLowerCase()!==E:1!==x.nodeType)||!++j||(O&&((y=(w=x[T]||(x[T]={}))[x.uniqueID]||(w[x.uniqueID]={}))[e]=[P,j]),x!==t)););return(j-=a)===r||j%r==0&&j/r>=0}}},PSEUDO:function(e,t){var n,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||me.error("unsupported pseudo: "+e);return a[T]?a(t):a.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ve((function(e,n){for(var r,l=a(e,t),f=l.length;f--;)e[r=V(e,l[f])]=!(n[r]=l[f])})):function(e){return a(e,0,n)}):a}},pseudos:{not:ve((function(e){var t=[],n=[],r=d(e.replace(J,"$1"));return r[T]?ve((function(e,t,n,a){for(var l,f=r(e,null,a,[]),d=e.length;d--;)(l=f[d])&&(e[d]=!(t[d]=l))})):function(e,a,l){return t[0]=e,r(t,null,l,n),t[0]=null,!n.pop()}})),has:ve((function(e){return function(t){return me(e,t).length>0}})),contains:ve((function(e){return e=e.replace(de,he),function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}})),lang:ve((function(e){return re.test(e||"")||me.error("unsupported lang: "+e),e=e.replace(de,he).toLowerCase(),function(t){var n;do{if(n=k?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===S},focus:function(e){return e===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return se.test(e.nodeName)},input:function(e){return ae.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:Se((function(){return[0]})),last:Se((function(e,t){return[t-1]})),eq:Se((function(e,t,n){return[n<0?n+t:n]})),even:Se((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:Se((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:Se((function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e})),gt:Se((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=xe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=_e(t);function Ce(){}function Ee(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function Oe(e,t,n){var r=t.dir,a=n&&"parentNode"===r,l=D++;return t.first?function(t,n,l){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,l)}:function(t,n,f){var d,h,p,y=[P,l];if(f){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,f))return!0}else for(;t=t[r];)if(1===t.nodeType||a){if((d=(h=(p=t[T]||(t[T]={}))[t.uniqueID]||(p[t.uniqueID]={}))[r])&&d[0]===P&&d[1]===l)return y[2]=d[2];if(h[r]=y,y[2]=e(t,n,f))return!0}}}function je(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function $e(e,t,n,r,a){for(var l,f=[],d=0,h=e.length,p=null!=t;d<h;d++)(l=e[d])&&(n&&!n(l,r,a)||(f.push(l),p&&t.push(d)));return f}function Te(e,t,n,r,a,l){return r&&!r[T]&&(r=Te(r)),a&&!a[T]&&(a=Te(a,l)),ve((function(l,f,d,h){var p,y,w,x=[],_=[],S=f.length,k=l||function(e,t,n){for(var r=0,a=t.length;r<a;r++)me(e,t[r],n);return n}(t||"*",d.nodeType?[d]:d,[]),C=!e||!l&&t?k:$e(k,x,e,d,h),E=n?a||(l?e:S||r)?[]:f:C;if(n&&n(C,E,d,h),r)for(p=$e(E,_),r(p,[],d,h),y=p.length;y--;)(w=p[y])&&(E[_[y]]=!(C[_[y]]=w));if(l){if(a||e){if(a){for(p=[],y=E.length;y--;)(w=E[y])&&p.push(C[y]=w);a(null,E=[],p,h)}for(y=E.length;y--;)(w=E[y])&&(p=a?V(l,w):x[y])>-1&&(l[p]=!(f[p]=w))}}else E=$e(E===f?E.splice(S,E.length):E),a?a(null,f,E,h):H.apply(f,E)}))}function Ae(e){for(var t,n,a,l=e.length,f=r.relative[e[0].type],d=f||r.relative[" "],h=f?1:0,y=Oe((function(e){return e===t}),d,!0),w=Oe((function(e){return V(t,e)>-1}),d,!0),x=[function(e,n,r){var a=!f&&(r||n!==p)||((t=n).nodeType?y(e,n,r):w(e,n,r));return t=null,a}];h<l;h++)if(n=r.relative[e[h].type])x=[Oe(je(x),n)];else{if((n=r.filter[e[h].type].apply(null,e[h].matches))[T]){for(a=++h;a<l&&!r.relative[e[a].type];a++);return Te(h>1&&je(x),h>1&&Ee(e.slice(0,h-1).concat({value:" "===e[h-2].type?"*":""})).replace(J,"$1"),n,h<a&&Ae(e.slice(h,a)),a<l&&Ae(e=e.slice(a)),a<l&&Ee(e))}x.push(n)}return je(x)}return Ce.prototype=r.filters=r.pseudos,r.setFilters=new Ce,f=me.tokenize=function(e,t){var n,a,l,f,d,h,p,y=I[e+" "];if(y)return t?0:y.slice(0);for(d=e,h=[],p=r.preFilter;d;){for(f in n&&!(a=Q.exec(d))||(a&&(d=d.slice(a[0].length)||d),h.push(l=[])),n=!1,(a=ee.exec(d))&&(n=a.shift(),l.push({value:n,type:a[0].replace(J," ")}),d=d.slice(n.length)),r.filter)!(a=oe[f].exec(d))||p[f]&&!(a=p[f](a))||(n=a.shift(),l.push({value:n,type:f,matches:a}),d=d.slice(n.length));if(!n)break}return t?d.length:d?me.error(e):I(e,h).slice(0)},d=me.compile=function(e,t){var n,a=[],l=[],d=M[e+" "];if(!d){for(t||(t=f(e)),n=t.length;n--;)(d=Ae(t[n]))[T]?a.push(d):l.push(d);d=M(e,function(e,t){var n=t.length>0,a=e.length>0,l=function(l,f,d,h,y){var w,S,C,E=0,O="0",j=l&&[],T=[],A=p,D=l||a&&r.find.TAG("*",y),R=P+=null==A?1:Math.random()||.1,I=D.length;for(y&&(p=f===_||f||y);O!==I&&null!=(w=D[O]);O++){if(a&&w){for(S=0,f||w.ownerDocument===_||(x(w),d=!k);C=e[S++];)if(C(w,f||_,d)){h.push(w);break}y&&(P=R)}n&&((w=!C&&w)&&E--,l&&j.push(w))}if(E+=O,n&&O!==E){for(S=0;C=t[S++];)C(j,T,f,d);if(l){if(E>0)for(;O--;)j[O]||T[O]||(T[O]=B.call(h));T=$e(T)}H.apply(h,T),y&&!l&&T.length>0&&E+t.length>1&&me.uniqueSort(h)}return y&&(P=R,p=A),j};return n?ve(l):l}(l,a)),d.selector=e}return d},h=me.select=function(e,t,a,l){var h,p,y,w,x,_="function"==typeof e&&e,S=!l&&f(e=_.selector||e);if(a=a||[],1===S.length){if((p=S[0]=S[0].slice(0)).length>2&&"ID"===(y=p[0]).type&&n.getById&&9===t.nodeType&&k&&r.relative[p[1].type]){if(!(t=(r.find.ID(y.matches[0].replace(de,he),t)||[])[0]))return a;_&&(t=t.parentNode),e=e.slice(p.shift().value.length)}for(h=oe.needsContext.test(e)?0:p.length;h--&&(y=p[h],!r.relative[w=y.type]);)if((x=r.find[w])&&(l=x(y.matches[0].replace(de,he),ue.test(p[0].type)&&ke(t.parentNode)||t))){if(p.splice(h,1),!(e=l.length&&Ee(p)))return H.apply(a,l),a;break}}return(_||d(e,S))(l,t,!k,a,!t||ue.test(e)&&ke(t.parentNode)||t),a},n.sortStable=T.split("").sort(L).join("")===T,n.detectDuplicates=!!w,x(),n.sortDetached=ye((function(e){return 1&e.compareDocumentPosition(_.createElement("div"))})),ye((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||be("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ye((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||be("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ye((function(e){return null==e.getAttribute("disabled")}))||be(W,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),me}(r);C.find=P,C.expr=P.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=P.uniqueSort,C.text=P.getText,C.isXMLDoc=P.isXML,C.contains=P.contains;var D=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&C(e).is(n))break;r.push(e)}return r},R=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},I=C.expr.match.needsContext,M=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,L=/^.[^:#\[\.,]*$/;function N(e,t,n){if(C.isFunction(t))return C.grep(e,(function(e,r){return!!t.call(e,r,e)!==n}));if(t.nodeType)return C.grep(e,(function(e){return e===t!==n}));if("string"==typeof t){if(L.test(t))return C.filter(t,e,n);t=C.filter(t,e)}return C.grep(e,(function(e){return y.call(t,e)>-1!==n}))}C.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,(function(e){return 1===e.nodeType})))},C.fn.extend({find:function(e){var t,n=this.length,r=[],a=this;if("string"!=typeof e)return this.pushStack(C(e).filter((function(){for(t=0;t<n;t++)if(C.contains(a[t],this))return!0})));for(t=0;t<n;t++)C.find(e,a[t],r);return(r=this.pushStack(n>1?C.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(N(this,e||[],!1))},not:function(e){return this.pushStack(N(this,e||[],!0))},is:function(e){return!!N(this,"string"==typeof e&&I.test(e)?C(e):e||[],!1).length}});var F,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(C.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||F,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:f,!0)),M.test(r[1])&&C.isPlainObject(t))for(r in t)C.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=f.getElementById(r[2]))&&a.parentNode&&(this.length=1,this[0]=a),this.context=f,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):C.isFunction(e)?void 0!==n.ready?n.ready(e):e(C):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),C.makeArray(e,this))}).prototype=C.fn,F=C(f);var B=/^(?:parents|prev(?:Until|All))/,U={children:!0,contents:!0,next:!0,prev:!0};function H(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0}))},closest:function(e,t){for(var n,r=0,a=this.length,l=[],f=I.test(e)||"string"!=typeof e?C(e,t||this.context):0;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(f?f.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,e))){l.push(n);break}return this.pushStack(l.length>1?C.uniqueSort(l):l)},index:function(e){return e?"string"==typeof e?y.call(C(e),this[0]):y.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return D(e,"parentNode")},parentsUntil:function(e,t,n){return D(e,"parentNode",n)},next:function(e){return H(e,"nextSibling")},prev:function(e){return H(e,"previousSibling")},nextAll:function(e){return D(e,"nextSibling")},prevAll:function(e){return D(e,"previousSibling")},nextUntil:function(e,t,n){return D(e,"nextSibling",n)},prevUntil:function(e,t,n){return D(e,"previousSibling",n)},siblings:function(e){return R((e.parentNode||{}).firstChild,e)},children:function(e){return R(e.firstChild)},contents:function(e){return e.contentDocument||C.merge([],e.childNodes)}},(function(e,t){C.fn[e]=function(n,r){var a=C.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=C.filter(r,a)),this.length>1&&(U[e]||C.uniqueSort(a),B.test(e)&&a.reverse()),this.pushStack(a)}}));var z,V=/\S+/g;function W(){f.removeEventListener("DOMContentLoaded",W),r.removeEventListener("load",W),C.ready()}C.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return C.each(e.match(V)||[],(function(e,n){t[n]=!0})),t}(e):C.extend({},e);var t,n,r,a,l=[],f=[],d=-1,h=function(){for(a=e.once,r=t=!0;f.length;d=-1)for(n=f.shift();++d<l.length;)!1===l[d].apply(n[0],n[1])&&e.stopOnFalse&&(d=l.length,n=!1);e.memory||(n=!1),t=!1,a&&(l=n?[]:"")},p={add:function(){return l&&(n&&!t&&(d=l.length-1,f.push(n)),function t(n){C.each(n,(function(n,r){C.isFunction(r)?e.unique&&p.has(r)||l.push(r):r&&r.length&&"string"!==C.type(r)&&t(r)}))}(arguments),n&&!t&&h()),this},remove:function(){return C.each(arguments,(function(e,t){for(var n;(n=C.inArray(t,l,n))>-1;)l.splice(n,1),n<=d&&d--})),this},has:function(e){return e?C.inArray(e,l)>-1:l.length>0},empty:function(){return l&&(l=[]),this},disable:function(){return a=f=[],l=n="",this},disabled:function(){return!l},lock:function(){return a=f=[],n||(l=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],f.push(n),t||h()),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},C.extend({Deferred:function(e){var t=[["resolve","done",C.Callbacks("once memory"),"resolved"],["reject","fail",C.Callbacks("once memory"),"rejected"],["notify","progress",C.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return C.Deferred((function(n){C.each(t,(function(t,l){var f=C.isFunction(e[t])&&e[t];a[l[1]]((function(){var e=f&&f.apply(this,arguments);e&&C.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[l[0]+"With"](this===r?n.promise():this,f?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?C.extend(e,r):r}},a={};return r.pipe=r.then,C.each(t,(function(e,l){var f=l[2],d=l[3];r[l[1]]=f.add,d&&f.add((function(){n=d}),t[1^e][2].disable,t[2][2].lock),a[l[0]]=function(){return a[l[0]+"With"](this===a?r:this,arguments),this},a[l[0]+"With"]=f.fireWith})),r.promise(a),e&&e.call(a,a),a},when:function(e){var t,n,r,a=0,l=d.call(arguments),f=l.length,h=1!==f||e&&C.isFunction(e.promise)?f:0,p=1===h?e:C.Deferred(),y=function(e,n,r){return function(a){n[e]=this,r[e]=arguments.length>1?d.call(arguments):a,r===t?p.notifyWith(n,r):--h||p.resolveWith(n,r)}};if(f>1)for(t=new Array(f),n=new Array(f),r=new Array(f);a<f;a++)l[a]&&C.isFunction(l[a].promise)?l[a].promise().progress(y(a,n,t)).done(y(a,r,l)).fail(p.reject):--h;return h||p.resolveWith(r,l),p.promise()}}),C.fn.ready=function(e){return C.ready.promise().done(e),this},C.extend({isReady:!1,readyWait:1,holdReady:function(e){e?C.readyWait++:C.ready(!0)},ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||(z.resolveWith(f,[C]),C.fn.triggerHandler&&(C(f).triggerHandler("ready"),C(f).off("ready"))))}}),C.ready.promise=function(e){return z||(z=C.Deferred(),"complete"===f.readyState||"loading"!==f.readyState&&!f.documentElement.doScroll?r.setTimeout(C.ready):(f.addEventListener("DOMContentLoaded",W),r.addEventListener("load",W))),z.promise(e)},C.ready.promise();var Z=function(e,t,n,r,a,l,f){var d=0,h=e.length,p=null==n;if("object"===C.type(n))for(d in a=!0,n)Z(e,t,d,n[d],!0,l,f);else if(void 0!==r&&(a=!0,C.isFunction(r)||(f=!0),p&&(f?(t.call(e,r),t=null):(p=t,t=function(e,t,n){return p.call(C(e),n)})),t))for(;d<h;d++)t(e[d],n,f?r:r.call(e[d],d,t(e[d],n)));return a?e:p?t.call(e):h?t(e[0],n):l},G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=C.expando+K.uid++}K.uid=1,K.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!G(e))return{};var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[t]=n;else for(r in t)a[r]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(r=this.get(e,t))?r:this.get(e,C.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,a,l=e[this.expando];if(void 0!==l){if(void 0===t)this.register(e);else{C.isArray(t)?r=t.concat(t.map(C.camelCase)):(a=C.camelCase(t),r=t in l?[t,a]:(r=a)in l?[r]:r.match(V)||[]),n=r.length;for(;n--;)delete l[r[n]]}(void 0===t||C.isEmptyObject(l))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var Y=new K,X=new K,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function ee(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Q,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:J.test(n)?C.parseJSON(n):n)}catch(e){}X.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return X.hasData(e)||Y.hasData(e)},data:function(e,t,n){return X.access(e,t,n)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),C.fn.extend({data:function(e,t){var n,r,a,l=this[0],f=l&&l.attributes;if(void 0===e){if(this.length&&(a=X.get(l),1===l.nodeType&&!Y.get(l,"hasDataAttrs"))){for(n=f.length;n--;)f[n]&&0===(r=f[n].name).indexOf("data-")&&(r=C.camelCase(r.slice(5)),ee(l,r,a[r]));Y.set(l,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each((function(){X.set(this,e)})):Z(this,(function(t){var n,r;if(l&&void 0===t)return void 0!==(n=X.get(l,e)||X.get(l,e.replace(Q,"-$&").toLowerCase()))?n:(r=C.camelCase(e),void 0!==(n=X.get(l,r))||void 0!==(n=ee(l,r,void 0))?n:void 0);r=C.camelCase(e),this.each((function(){var n=X.get(this,r);X.set(this,r,t),e.indexOf("-")>-1&&void 0!==n&&X.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){X.remove(this,e)}))}}),C.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||C.isArray(n)?r=Y.access(e,t,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),r=n.length,a=n.shift(),l=C._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete l.stop,a.call(e,(function(){C.dequeue(e,t)}),l)),!r&&l&&l.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:C.Callbacks("once memory").add((function(){Y.remove(e,[t+"queue",n])}))})}}),C.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?C.queue(this[0],e):void 0===t?this:this.each((function(){var n=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&C.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){C.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=C.Deferred(),l=this,f=this.length,d=function(){--r||a.resolveWith(l,[l])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";f--;)(n=Y.get(l[f],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(d));return d(),a.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],oe=function(e,t){return e=t||e,"none"===C.css(e,"display")||!C.contains(e.ownerDocument,e)};function ae(e,t,n,r){var a,l=1,f=20,d=r?function(){return r.cur()}:function(){return C.css(e,t,"")},h=d(),p=n&&n[3]||(C.cssNumber[t]?"":"px"),y=(C.cssNumber[t]||"px"!==p&&+h)&&ne.exec(C.css(e,t));if(y&&y[3]!==p){p=p||y[3],n=n||[],y=+h||1;do{y/=l=l||".5",C.style(e,t,y+p)}while(l!==(l=d()/h)&&1!==l&&--f)}return n&&(y=+y||+h||0,a=n[1]?y+(n[1]+1)*n[2]:+n[2],r&&(r.unit=p,r.start=y,r.end=a)),a}var se=/^(?:checkbox|radio)$/i,le=/<([\w:-]+)/,ce=/^$|\/(?:java|ecma)script/i,ue={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fe(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&C.nodeName(e,t)?C.merge([e],n):n}function de(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;var he,pe,me=/<|&#?\w+;/;function ge(e,t,n,r,a){for(var l,f,d,h,p,y,w=t.createDocumentFragment(),x=[],_=0,S=e.length;_<S;_++)if((l=e[_])||0===l)if("object"===C.type(l))C.merge(x,l.nodeType?[l]:l);else if(me.test(l)){for(f=f||w.appendChild(t.createElement("div")),d=(le.exec(l)||["",""])[1].toLowerCase(),h=ue[d]||ue._default,f.innerHTML=h[1]+C.htmlPrefilter(l)+h[2],y=h[0];y--;)f=f.lastChild;C.merge(x,f.childNodes),(f=w.firstChild).textContent=""}else x.push(t.createTextNode(l));for(w.textContent="",_=0;l=x[_++];)if(r&&C.inArray(l,r)>-1)a&&a.push(l);else if(p=C.contains(l.ownerDocument,l),f=fe(w.appendChild(l),"script"),p&&de(f),n)for(y=0;l=f[y++];)ce.test(l.type||"")&&n.push(l);return w}he=f.createDocumentFragment().appendChild(f.createElement("div")),(pe=f.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),he.appendChild(pe),S.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",S.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue;var ve=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function xe(){return!1}function _e(){try{return f.activeElement}catch(e){}}function Se(e,t,n,r,a,l){var f,d;if("object"==typeof t){for(d in"string"!=typeof n&&(r=r||n,n=void 0),t)Se(e,d,n,r,t[d],l);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=xe;else if(!a)return e;return 1===l&&(f=a,a=function(e){return C().off(e),f.apply(this,arguments)},a.guid=f.guid||(f.guid=C.guid++)),e.each((function(){C.event.add(this,t,a,r,n)}))}C.event={global:{},add:function(e,t,n,r,a){var l,f,d,h,p,y,w,x,_,S,k,E=Y.get(e);if(E)for(n.handler&&(n=(l=n).handler,a=l.selector),n.guid||(n.guid=C.guid++),(h=E.events)||(h=E.events={}),(f=E.handle)||(f=E.handle=function(t){return void 0!==C&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),p=(t=(t||"").match(V)||[""]).length;p--;)_=k=(d=be.exec(t[p])||[])[1],S=(d[2]||"").split(".").sort(),_&&(w=C.event.special[_]||{},_=(a?w.delegateType:w.bindType)||_,w=C.event.special[_]||{},y=C.extend({type:_,origType:k,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&C.expr.match.needsContext.test(a),namespace:S.join(".")},l),(x=h[_])||((x=h[_]=[]).delegateCount=0,w.setup&&!1!==w.setup.call(e,r,S,f)||e.addEventListener&&e.addEventListener(_,f)),w.add&&(w.add.call(e,y),y.handler.guid||(y.handler.guid=n.guid)),a?x.splice(x.delegateCount++,0,y):x.push(y),C.event.global[_]=!0)},remove:function(e,t,n,r,a){var l,f,d,h,p,y,w,x,_,S,k,E=Y.hasData(e)&&Y.get(e);if(E&&(h=E.events)){for(p=(t=(t||"").match(V)||[""]).length;p--;)if(_=k=(d=be.exec(t[p])||[])[1],S=(d[2]||"").split(".").sort(),_){for(w=C.event.special[_]||{},x=h[_=(r?w.delegateType:w.bindType)||_]||[],d=d[2]&&new RegExp("(^|\\.)"+S.join("\\.(?:.*\\.|)")+"(\\.|$)"),f=l=x.length;l--;)y=x[l],!a&&k!==y.origType||n&&n.guid!==y.guid||d&&!d.test(y.namespace)||r&&r!==y.selector&&("**"!==r||!y.selector)||(x.splice(l,1),y.selector&&x.delegateCount--,w.remove&&w.remove.call(e,y));f&&!x.length&&(w.teardown&&!1!==w.teardown.call(e,S,E.handle)||C.removeEvent(e,_,E.handle),delete h[_])}else for(_ in h)C.event.remove(e,_+t[p],n,r,!0);C.isEmptyObject(h)&&Y.remove(e,"handle events")}},dispatch:function(e){e=C.event.fix(e);var t,n,r,a,l,f,h=d.call(arguments),p=(Y.get(this,"events")||{})[e.type]||[],y=C.event.special[e.type]||{};if(h[0]=e,e.delegateTarget=this,!y.preDispatch||!1!==y.preDispatch.call(this,e)){for(f=C.event.handlers.call(this,e,p),t=0;(a=f[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,n=0;(l=a.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(l.namespace)||(e.handleObj=l,e.data=l.data,void 0!==(r=((C.event.special[l.origType]||{}).handle||l.handler).apply(a.elem,h))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return y.postDispatch&&y.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,a,l,f=[],d=t.delegateCount,h=e.target;if(d&&h.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&(!0!==h.disabled||"click"!==e.type)){for(r=[],n=0;n<d;n++)void 0===r[a=(l=t[n]).selector+" "]&&(r[a]=l.needsContext?C(a,this).index(h)>-1:C.find(a,this,null,[h]).length),r[a]&&r.push(l);r.length&&f.push({elem:h,handlers:r})}return d<t.length&&f.push({elem:this,handlers:t.slice(d)}),f},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,a,l=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||f).documentElement,a=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),e.which||void 0===l||(e.which=1&l?1:2&l?3:4&l?2:0),e}},fix:function(e){if(e[C.expando])return e;var t,n,r,a=e.type,l=e,d=this.fixHooks[a];for(d||(this.fixHooks[a]=d=ye.test(a)?this.mouseHooks:ve.test(a)?this.keyHooks:{}),r=d.props?this.props.concat(d.props):this.props,e=new C.Event(l),t=r.length;t--;)e[n=r[t]]=l[n];return e.target||(e.target=f),3===e.target.nodeType&&(e.target=e.target.parentNode),d.filter?d.filter(e,l):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_e()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===_e()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&C.nodeName(this,"input"))return this.click(),!1},_default:function(e){return C.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:xe):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||C.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,a=e.handleObj;return r&&(r===this||C.contains(this,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),C.fn.extend({on:function(e,t,n,r){return Se(this,e,t,n,r)},one:function(e,t,n,r){return Se(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=xe),this.each((function(){C.event.remove(this,e,n,t)}))}});var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ce=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^true\/(.*)/,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function $e(e,t){return C.nodeName(e,"table")&&C.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Te(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ae(e){var t=Oe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pe(e,t){var n,r,a,l,f,d,h,p;if(1===t.nodeType){if(Y.hasData(e)&&(l=Y.access(e),f=Y.set(t,l),p=l.events))for(a in delete f.handle,f.events={},p)for(n=0,r=p[a].length;n<r;n++)C.event.add(t,a,p[a][n]);X.hasData(e)&&(d=X.access(e),h=C.extend({},d),X.set(t,h))}}function De(e,t,n,r){t=h.apply([],t);var a,l,f,d,p,y,w=0,x=e.length,_=x-1,k=t[0],E=C.isFunction(k);if(E||x>1&&"string"==typeof k&&!S.checkClone&&Ee.test(k))return e.each((function(a){var l=e.eq(a);E&&(t[0]=k.call(this,a,l.html())),De(l,t,n,r)}));if(x&&(l=(a=ge(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=l),l||r)){for(d=(f=C.map(fe(a,"script"),Te)).length;w<x;w++)p=a,w!==_&&(p=C.clone(p,!0,!0),d&&C.merge(f,fe(p,"script"))),n.call(e[w],p,w);if(d)for(y=f[f.length-1].ownerDocument,C.map(f,Ae),w=0;w<d;w++)p=f[w],ce.test(p.type||"")&&!Y.access(p,"globalEval")&&C.contains(y,p)&&(p.src?C._evalUrl&&C._evalUrl(p.src):C.globalEval(p.textContent.replace(je,"")))}return e}function Re(e,t,n){for(var r,a=t?C.filter(t,e):e,l=0;null!=(r=a[l]);l++)n||1!==r.nodeType||C.cleanData(fe(r)),r.parentNode&&(n&&C.contains(r.ownerDocument,r)&&de(fe(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e.replace(ke,"<$1></$2>")},clone:function(e,t,n){var r,a,l,f,d,h,p,y=e.cloneNode(!0),w=C.contains(e.ownerDocument,e);if(!(S.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(f=fe(y),r=0,a=(l=fe(e)).length;r<a;r++)d=l[r],h=f[r],p=void 0,"input"===(p=h.nodeName.toLowerCase())&&se.test(d.type)?h.checked=d.checked:"input"!==p&&"textarea"!==p||(h.defaultValue=d.defaultValue);if(t)if(n)for(l=l||fe(e),f=f||fe(y),r=0,a=l.length;r<a;r++)Pe(l[r],f[r]);else Pe(e,y);return(f=fe(y,"script")).length>0&&de(f,!w&&fe(e,"script")),y},cleanData:function(e){for(var t,n,r,a=C.event.special,l=0;void 0!==(n=e[l]);l++)if(G(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)a[r]?C.event.remove(n,r):C.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),C.fn.extend({domManip:De,detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return Z(this,(function(e){return void 0===e?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return De(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||$e(this,e).appendChild(e)}))},prepend:function(){return De(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=$e(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return De(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return De(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(fe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return C.clone(this,e,t)}))},html:function(e){return Z(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!ue[(le.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(fe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,(function(t){var n=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(fe(this)),n&&n.replaceChild(t,this))}),e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){C.fn[e]=function(e){for(var n,r=[],a=C(e),l=a.length-1,f=0;f<=l;f++)n=f===l?this:this.clone(!0),C(a[f])[t](n),p.apply(r,n.get());return this.pushStack(r)}}));var Ie,Me={HTML:"block",BODY:"block"};function Le(e,t){var n=C(t.createElement(e)).appendTo(t.body),r=C.css(n[0],"display");return n.detach(),r}function Ne(e){var t=f,n=Me[e];return n||("none"!==(n=Le(e,t))&&n||((t=(Ie=(Ie||C("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=Le(e,t),Ie.detach()),Me[e]=n),n}var Fe=/^margin/,qe=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Be=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ue=function(e,t,n,r){var a,l,f={};for(l in t)f[l]=e.style[l],e.style[l]=t[l];for(l in a=n.apply(e,r||[]),t)e.style[l]=f[l];return a},He=f.documentElement;function ze(e,t,n){var r,a,l,f,d=e.style;return""!==(f=(n=n||Be(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==f||C.contains(e.ownerDocument,e)||(f=C.style(e,t)),n&&!S.pixelMarginRight()&&qe.test(f)&&Fe.test(t)&&(r=d.width,a=d.minWidth,l=d.maxWidth,d.minWidth=d.maxWidth=d.width=f,f=n.width,d.width=r,d.minWidth=a,d.maxWidth=l),void 0!==f?f+"":f}function Ve(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,n,a,l=f.createElement("div"),d=f.createElement("div");function h(){d.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",d.innerHTML="",He.appendChild(l);var f=r.getComputedStyle(d);e="1%"!==f.top,a="2px"===f.marginLeft,t="4px"===f.width,d.style.marginRight="50%",n="4px"===f.marginRight,He.removeChild(l)}d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",S.clearCloneStyle="content-box"===d.style.backgroundClip,l.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",l.appendChild(d),C.extend(S,{pixelPosition:function(){return h(),e},boxSizingReliable:function(){return null==t&&h(),t},pixelMarginRight:function(){return null==t&&h(),n},reliableMarginLeft:function(){return null==t&&h(),a},reliableMarginRight:function(){var e,t=d.appendChild(f.createElement("div"));return t.style.cssText=d.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",d.style.width="1px",He.appendChild(l),e=!parseFloat(r.getComputedStyle(t).marginRight),He.removeChild(l),d.removeChild(t),e}}))}();var We=/^(none|table(?!-c[ea]).+)/,Ze={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","O","Moz","ms"],Ye=f.createElement("div").style;function Xe(e){if(e in Ye)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ke.length;n--;)if((e=Ke[n]+t)in Ye)return e}function Je(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,a){for(var l=n===(r?"border":"content")?4:"width"===t?1:0,f=0;l<4;l+=2)"margin"===n&&(f+=C.css(e,n+re[l],!0,a)),r?("content"===n&&(f-=C.css(e,"padding"+re[l],!0,a)),"margin"!==n&&(f-=C.css(e,"border"+re[l]+"Width",!0,a))):(f+=C.css(e,"padding"+re[l],!0,a),"padding"!==n&&(f+=C.css(e,"border"+re[l]+"Width",!0,a)));return f}function et(e,t,n){var r=!0,a="width"===t?e.offsetWidth:e.offsetHeight,l=Be(e),f="border-box"===C.css(e,"boxSizing",!1,l);if(a<=0||null==a){if(((a=ze(e,t,l))<0||null==a)&&(a=e.style[t]),qe.test(a))return a;r=f&&(S.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+Qe(e,t,n||(f?"border":"content"),r,l)+"px"}function tt(e,t){for(var n,r,a,l=[],f=0,d=e.length;f<d;f++)(r=e[f]).style&&(l[f]=Y.get(r,"olddisplay"),n=r.style.display,t?(l[f]||"none"!==n||(r.style.display=""),""===r.style.display&&oe(r)&&(l[f]=Y.access(r,"olddisplay",Ne(r.nodeName)))):(a=oe(r),"none"===n&&a||Y.set(r,"olddisplay",a?n:C.css(r,"display"))));for(f=0;f<d;f++)(r=e[f]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?l[f]||"":"none"));return e}function nt(e,t,n,r,a){return new nt.prototype.init(e,t,n,r,a)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,l,f,d=C.camelCase(t),h=e.style;if(t=C.cssProps[d]||(C.cssProps[d]=Xe(d)||d),f=C.cssHooks[t]||C.cssHooks[d],void 0===n)return f&&"get"in f&&void 0!==(a=f.get(e,!1,r))?a:h[t];"string"==(l=typeof n)&&(a=ne.exec(n))&&a[1]&&(n=ae(e,t,a),l="number"),null!=n&&n==n&&("number"===l&&(n+=a&&a[3]||(C.cssNumber[d]?"":"px")),S.clearCloneStyle||""!==n||0!==t.indexOf("background")||(h[t]="inherit"),f&&"set"in f&&void 0===(n=f.set(e,n,r))||(h[t]=n))}},css:function(e,t,n,r){var a,l,f,d=C.camelCase(t);return t=C.cssProps[d]||(C.cssProps[d]=Xe(d)||d),(f=C.cssHooks[t]||C.cssHooks[d])&&"get"in f&&(a=f.get(e,!0,n)),void 0===a&&(a=ze(e,t,r)),"normal"===a&&t in Ge&&(a=Ge[t]),""===n||n?(l=parseFloat(a),!0===n||isFinite(l)?l||0:a):a}}),C.each(["height","width"],(function(e,t){C.cssHooks[t]={get:function(e,n,r){if(n)return We.test(C.css(e,"display"))&&0===e.offsetWidth?Ue(e,Ze,(function(){return et(e,t,r)})):et(e,t,r)},set:function(e,n,r){var a,l=r&&Be(e),f=r&&Qe(e,t,r,"border-box"===C.css(e,"boxSizing",!1,l),l);return f&&(a=ne.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=C.css(e,t)),Je(0,n,f)}}})),C.cssHooks.marginLeft=Ve(S.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),C.cssHooks.marginRight=Ve(S.reliableMarginRight,(function(e,t){if(t)return Ue(e,{display:"inline-block"},ze,[e,"marginRight"])})),C.each({margin:"",padding:"",border:"Width"},(function(e,t){C.cssHooks[e+t]={expand:function(n){for(var r=0,a={},l="string"==typeof n?n.split(" "):[n];r<4;r++)a[e+re[r]+t]=l[r]||l[r-2]||l[0];return a}},Fe.test(e)||(C.cssHooks[e+t].set=Je)})),C.fn.extend({css:function(e,t){return Z(this,(function(e,t,n){var r,a,l={},f=0;if(C.isArray(t)){for(r=Be(e),a=t.length;f<a;f++)l[t[f]]=C.css(e,t[f],!1,r);return l}return void 0!==n?C.style(e,t,n):C.css(e,t)}),e,t,arguments.length>1)},show:function(){return tt(this,!0)},hide:function(){return tt(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){oe(this)?C(this).show():C(this).hide()}))}}),C.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,r,a,l){this.elem=e,this.prop=n,this.easing=a||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=l||(C.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[C.cssProps[e.prop]]&&!C.cssHooks[e.prop]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=nt.prototype.init,C.fx.step={};var rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){return r.setTimeout((function(){rt=void 0})),rt=C.now()}function lt(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=re[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function ct(e,t,n){for(var r,a=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),l=0,f=a.length;l<f;l++)if(r=a[l].call(n,t,e))return r}function ut(e,t,n){var r,a,l=0,f=ut.prefilters.length,d=C.Deferred().always((function(){delete h.elem})),h=function(){if(a)return!1;for(var t=rt||st(),n=Math.max(0,p.startTime+p.duration-t),r=1-(n/p.duration||0),l=0,f=p.tweens.length;l<f;l++)p.tweens[l].run(r);return d.notifyWith(e,[p,r,n]),r<1&&f?n:(d.resolveWith(e,[p]),!1)},p=d.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=C.Tween(e,p.opts,t,n,p.opts.specialEasing[t]||p.opts.easing);return p.tweens.push(r),r},stop:function(t){var n=0,r=t?p.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)p.tweens[n].run(1);return t?(d.notifyWith(e,[p,1,0]),d.resolveWith(e,[p,t])):d.rejectWith(e,[p,t]),this}}),y=p.props;for(function(e,t){var n,r,a,l,f;for(n in e)if(a=t[r=C.camelCase(n)],l=e[n],C.isArray(l)&&(a=l[1],l=e[n]=l[0]),n!==r&&(e[r]=l,delete e[n]),(f=C.cssHooks[r])&&"expand"in f)for(n in l=f.expand(l),delete e[r],l)n in e||(e[n]=l[n],t[n]=a);else t[r]=a}(y,p.opts.specialEasing);l<f;l++)if(r=ut.prefilters[l].call(p,e,y,p.opts))return C.isFunction(r.stop)&&(C._queueHooks(p.elem,p.opts.queue).stop=C.proxy(r.stop,r)),r;return C.map(y,ct,p),C.isFunction(p.opts.start)&&p.opts.start.call(e,p),C.fx.timer(C.extend(h,{elem:e,anim:p,queue:p.opts.queue})),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always)}C.Animation=C.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ae(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){C.isFunction(e)?(t=e,e=["*"]):e=e.match(V);for(var n,r=0,a=e.length;r<a;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,l,f,d,h,p,y=this,w={},x=e.style,_=e.nodeType&&oe(e),S=Y.get(e,"fxshow");for(r in n.queue||(null==(d=C._queueHooks(e,"fx")).unqueued&&(d.unqueued=0,h=d.empty.fire,d.empty.fire=function(){d.unqueued||h()}),d.unqueued++,y.always((function(){y.always((function(){d.unqueued--,C.queue(e,"fx").length||d.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[x.overflow,x.overflowX,x.overflowY],"inline"===("none"===(p=C.css(e,"display"))?Y.get(e,"olddisplay")||Ne(e.nodeName):p)&&"none"===C.css(e,"float")&&(x.display="inline-block")),n.overflow&&(x.overflow="hidden",y.always((function(){x.overflow=n.overflow[0],x.overflowX=n.overflow[1],x.overflowY=n.overflow[2]}))),t)if(a=t[r],ot.exec(a)){if(delete t[r],l=l||"toggle"===a,a===(_?"hide":"show")){if("show"!==a||!S||void 0===S[r])continue;_=!0}w[r]=S&&S[r]||C.style(e,r)}else p=void 0;if(C.isEmptyObject(w))"inline"===("none"===p?Ne(e.nodeName):p)&&(x.display=p);else for(r in S?"hidden"in S&&(_=S.hidden):S=Y.access(e,"fxshow",{}),l&&(S.hidden=!_),_?C(e).show():y.done((function(){C(e).hide()})),y.done((function(){var t;for(t in Y.remove(e,"fxshow"),w)C.style(e,t,w[t])})),w)f=ct(_?S[r]:0,r,y),r in S||(S[r]=f.start,_&&(f.end=f.start,f.start="width"===r||"height"===r?1:0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),C.speed=function(e,t,n){var r=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||C.isFunction(e)&&e,duration:e,easing:n&&t||t&&!C.isFunction(t)&&t};return r.duration=C.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in C.fx.speeds?C.fx.speeds[r.duration]:C.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){C.isFunction(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(oe).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=C.isEmptyObject(e),l=C.speed(t,n,r),f=function(){var t=ut(this,C.extend({},e),l);(a||Y.get(this,"finish"))&&t.stop(!0)};return f.finish=f,a||!1===l.queue?this.each(f):this.queue(l.queue,f)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",l=C.timers,f=Y.get(this);if(a)f[a]&&f[a].stop&&r(f[a]);else for(a in f)f[a]&&f[a].stop&&at.test(a)&&r(f[a]);for(a=l.length;a--;)l[a].elem!==this||null!=e&&l[a].queue!==e||(l[a].anim.stop(n),t=!1,l.splice(a,1));!t&&n||C.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Y.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],l=C.timers,f=r?r.length:0;for(n.finish=!0,C.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=l.length;t--;)l[t].elem===this&&l[t].queue===e&&(l[t].anim.stop(!0),l.splice(t,1));for(t=0;t<f;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(e,t){var n=C.fn[t];C.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,r,a)}})),C.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){C.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(rt=C.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),rt=void 0},C.fx.timer=function(e){C.timers.push(e),e()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){it||(it=r.setInterval(C.fx.tick,C.fx.interval))},C.fx.stop=function(){r.clearInterval(it),it=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var a=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(a)}}))},function(){var e=f.createElement("input"),t=f.createElement("select"),n=t.appendChild(f.createElement("option"));e.type="checkbox",S.checkOn=""!==e.value,S.optSelected=n.selected,t.disabled=!0,S.optDisabled=!n.disabled,(e=f.createElement("input")).value="t",e.type="radio",S.radioValue="t"===e.value}();var ft,dt=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return Z(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){C.removeAttr(this,e)}))}}),C.extend({attr:function(e,t,n){var r,a,l=e.nodeType;if(3!==l&&8!==l&&2!==l)return void 0===e.getAttribute?C.prop(e,t,n):(1===l&&C.isXMLDoc(e)||(t=t.toLowerCase(),a=C.attrHooks[t]||(C.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!S.radioValue&&"radio"===t&&C.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,a=0,l=t&&t.match(V);if(l&&1===e.nodeType)for(;n=l[a++];)r=C.propFix[n]||n,C.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=dt[t]||C.find.attr;dt[t]=function(e,t,r){var a,l;return r||(l=dt[t],dt[t]=a,a=null!=n(e,t,r)?t.toLowerCase():null,dt[t]=l),a}}));var ht=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;C.fn.extend({prop:function(e,t){return Z(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[C.propFix[e]||e]}))}}),C.extend({prop:function(e,t,n){var r,a,l=e.nodeType;if(3!==l&&8!==l&&2!==l)return 1===l&&C.isXMLDoc(e)||(t=C.propFix[t]||t,a=C.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),S.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this}));var mt=/[\t\r\n\f]/g;function gt(e){return e.getAttribute&&e.getAttribute("class")||""}C.fn.extend({addClass:function(e){var t,n,r,a,l,f,d,h=0;if(C.isFunction(e))return this.each((function(t){C(this).addClass(e.call(this,t,gt(this)))}));if("string"==typeof e&&e)for(t=e.match(V)||[];n=this[h++];)if(a=gt(n),r=1===n.nodeType&&(" "+a+" ").replace(mt," ")){for(f=0;l=t[f++];)r.indexOf(" "+l+" ")<0&&(r+=l+" ");a!==(d=C.trim(r))&&n.setAttribute("class",d)}return this},removeClass:function(e){var t,n,r,a,l,f,d,h=0;if(C.isFunction(e))return this.each((function(t){C(this).removeClass(e.call(this,t,gt(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(V)||[];n=this[h++];)if(a=gt(n),r=1===n.nodeType&&(" "+a+" ").replace(mt," ")){for(f=0;l=t[f++];)for(;r.indexOf(" "+l+" ")>-1;)r=r.replace(" "+l+" "," ");a!==(d=C.trim(r))&&n.setAttribute("class",d)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):C.isFunction(e)?this.each((function(n){C(this).toggleClass(e.call(this,n,gt(this),t),t)})):this.each((function(){var t,r,a,l;if("string"===n)for(r=0,a=C(this),l=e.match(V)||[];t=l[r++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Y.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+gt(n)+" ").replace(mt," ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g,yt=/[\x20\t\r\n\f]+/g;C.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=C.isFunction(e),this.each((function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,C(this).val()):e)?a="":"number"==typeof a?a+="":C.isArray(a)&&(a=C.map(a,(function(e){return null==e?"":e+""}))),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=C.valHooks[a.type]||C.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(vt,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:C.trim(C.text(e)).replace(yt," ")}},select:{get:function(e){for(var t,n,r=e.options,a=e.selectedIndex,l="select-one"===e.type||a<0,f=l?null:[],d=l?a+1:r.length,h=a<0?d:l?a:0;h<d;h++)if(((n=r[h]).selected||h===a)&&(S.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!C.nodeName(n.parentNode,"optgroup"))){if(t=C(n).val(),l)return t;f.push(t)}return f},set:function(e,t){for(var n,r,a=e.options,l=C.makeArray(t),f=a.length;f--;)((r=a[f]).selected=C.inArray(C.valHooks.option.get(r),l)>-1)&&(n=!0);return n||(e.selectedIndex=-1),l}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(e,t){if(C.isArray(t))return e.checked=C.inArray(C(e).val(),t)>-1}},S.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var bt=/^(?:focusinfocus|focusoutblur)$/;C.extend(C.event,{trigger:function(e,t,n,a){var l,d,h,p,y,w,x,S=[n||f],k=_.call(e,"type")?e.type:e,E=_.call(e,"namespace")?e.namespace.split("."):[];if(d=h=n=n||f,3!==n.nodeType&&8!==n.nodeType&&!bt.test(k+C.event.triggered)&&(k.indexOf(".")>-1&&(E=k.split("."),k=E.shift(),E.sort()),y=k.indexOf(":")<0&&"on"+k,(e=e[C.expando]?e:new C.Event(k,"object"==typeof e&&e)).isTrigger=a?2:3,e.namespace=E.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+E.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),x=C.event.special[k]||{},a||!x.trigger||!1!==x.trigger.apply(n,t))){if(!a&&!x.noBubble&&!C.isWindow(n)){for(p=x.delegateType||k,bt.test(p+k)||(d=d.parentNode);d;d=d.parentNode)S.push(d),h=d;h===(n.ownerDocument||f)&&S.push(h.defaultView||h.parentWindow||r)}for(l=0;(d=S[l++])&&!e.isPropagationStopped();)e.type=l>1?p:x.bindType||k,(w=(Y.get(d,"events")||{})[e.type]&&Y.get(d,"handle"))&&w.apply(d,t),(w=y&&d[y])&&w.apply&&G(d)&&(e.result=w.apply(d,t),!1===e.result&&e.preventDefault());return e.type=k,a||e.isDefaultPrevented()||x._default&&!1!==x._default.apply(S.pop(),t)||!G(n)||y&&C.isFunction(n[k])&&!C.isWindow(n)&&((h=n[y])&&(n[y]=null),C.event.triggered=k,n[k](),C.event.triggered=void 0,h&&(n[y]=h)),e.result}},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each((function(){C.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}}),C.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){C.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.focusin="onfocusin"in r,S.focusin||C.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var r=this.ownerDocument||this,a=Y.access(r,t);a||r.addEventListener(e,n,!0),Y.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this,a=Y.access(r,t)-1;a?Y.access(r,t,a):(r.removeEventListener(e,n,!0),Y.remove(r,t))}}}));var wt=r.location,xt=C.now(),_t=/\?/;C.parseJSON=function(e){return JSON.parse(e+"")},C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var St=/#.*$/,kt=/([?&])_=[^&]*/,Ct=/^(.*?):[ \t]*([^\r\n]*)$/gm,Et=/^(?:GET|HEAD)$/,Ot=/^\/\//,jt={},$t={},Tt="*/".concat("*"),At=f.createElement("a");function Pt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,l=t.toLowerCase().match(V)||[];if(C.isFunction(n))for(;r=l[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dt(e,t,n,r){var a={},l=e===$t;function f(d){var h;return a[d]=!0,C.each(e[d]||[],(function(e,d){var p=d(t,n,r);return"string"!=typeof p||l||a[p]?l?!(h=p):void 0:(t.dataTypes.unshift(p),f(p),!1)})),h}return f(t.dataTypes[0])||!a["*"]&&f("*")}function Rt(e,t){var n,r,a=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&C.extend(!0,e,r),e}At.href=wt.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":C.parseJSON,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Rt(Rt(e,C.ajaxSettings),t):Rt(C.ajaxSettings,e)},ajaxPrefilter:Pt(jt),ajaxTransport:Pt($t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,a,l,d,h,p,y,w,x=C.ajaxSetup({},t),_=x.context||x,S=x.context&&(_.nodeType||_.jquery)?C(_):C.event,k=C.Deferred(),E=C.Callbacks("once memory"),O=x.statusCode||{},j={},T={},A=0,P="canceled",D={readyState:0,getResponseHeader:function(e){var t;if(2===A){if(!d)for(d={};t=Ct.exec(l);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===A?l:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return A||(e=T[n]=T[n]||e,j[e]=t),this},overrideMimeType:function(e){return A||(x.mimeType=e),this},statusCode:function(e){var t;if(e)if(A<2)for(t in e)O[t]=[O[t],e[t]];else D.always(e[D.status]);return this},abort:function(e){var t=e||P;return n&&n.abort(t),R(0,t),this}};if(k.promise(D).complete=E.add,D.success=D.done,D.error=D.fail,x.url=((e||x.url||wt.href)+"").replace(St,"").replace(Ot,wt.protocol+"//"),x.type=t.method||t.type||x.method||x.type,x.dataTypes=C.trim(x.dataType||"*").toLowerCase().match(V)||[""],null==x.crossDomain){p=f.createElement("a");try{p.href=x.url,p.href=p.href,x.crossDomain=At.protocol+"//"+At.host!=p.protocol+"//"+p.host}catch(e){x.crossDomain=!0}}if(x.data&&x.processData&&"string"!=typeof x.data&&(x.data=C.param(x.data,x.traditional)),Dt(jt,x,t,D),2===A)return D;for(w in(y=C.event&&x.global)&&0==C.active++&&C.event.trigger("ajaxStart"),x.type=x.type.toUpperCase(),x.hasContent=!Et.test(x.type),a=x.url,x.hasContent||(x.data&&(a=x.url+=(_t.test(a)?"&":"?")+x.data,delete x.data),!1===x.cache&&(x.url=kt.test(a)?a.replace(kt,"$1_="+xt++):a+(_t.test(a)?"&":"?")+"_="+xt++)),x.ifModified&&(C.lastModified[a]&&D.setRequestHeader("If-Modified-Since",C.lastModified[a]),C.etag[a]&&D.setRequestHeader("If-None-Match",C.etag[a])),(x.data&&x.hasContent&&!1!==x.contentType||t.contentType)&&D.setRequestHeader("Content-Type",x.contentType),D.setRequestHeader("Accept",x.dataTypes[0]&&x.accepts[x.dataTypes[0]]?x.accepts[x.dataTypes[0]]+("*"!==x.dataTypes[0]?", "+Tt+"; q=0.01":""):x.accepts["*"]),x.headers)D.setRequestHeader(w,x.headers[w]);if(x.beforeSend&&(!1===x.beforeSend.call(_,D,x)||2===A))return D.abort();for(w in P="abort",{success:1,error:1,complete:1})D[w](x[w]);if(n=Dt($t,x,t,D)){if(D.readyState=1,y&&S.trigger("ajaxSend",[D,x]),2===A)return D;x.async&&x.timeout>0&&(h=r.setTimeout((function(){D.abort("timeout")}),x.timeout));try{A=1,n.send(j,R)}catch(e){if(!(A<2))throw e;R(-1,e)}}else R(-1,"No Transport");function R(e,t,f,d){var p,w,j,T,P,R=t;2!==A&&(A=2,h&&r.clearTimeout(h),n=void 0,l=d||"",D.readyState=e>0?4:0,p=e>=200&&e<300||304===e,f&&(T=function(e,t,n){for(var r,a,l,f,d=e.contents,h=e.dataTypes;"*"===h[0];)h.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in d)if(d[a]&&d[a].test(r)){h.unshift(a);break}if(h[0]in n)l=h[0];else{for(a in n){if(!h[0]||e.converters[a+" "+h[0]]){l=a;break}f||(f=a)}l=l||f}if(l)return l!==h[0]&&h.unshift(l),n[l]}(x,D,f)),T=function(e,t,n,r){var a,l,f,d,h,p={},y=e.dataTypes.slice();if(y[1])for(f in e.converters)p[f.toLowerCase()]=e.converters[f];for(l=y.shift();l;)if(e.responseFields[l]&&(n[e.responseFields[l]]=t),!h&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),h=l,l=y.shift())if("*"===l)l=h;else if("*"!==h&&h!==l){if(!(f=p[h+" "+l]||p["* "+l]))for(a in p)if((d=a.split(" "))[1]===l&&(f=p[h+" "+d[0]]||p["* "+d[0]])){!0===f?f=p[a]:!0!==p[a]&&(l=d[0],y.unshift(d[1]));break}if(!0!==f)if(f&&e.throws)t=f(t);else try{t=f(t)}catch(e){return{state:"parsererror",error:f?e:"No conversion from "+h+" to "+l}}}return{state:"success",data:t}}(x,T,D,p),p?(x.ifModified&&((P=D.getResponseHeader("Last-Modified"))&&(C.lastModified[a]=P),(P=D.getResponseHeader("etag"))&&(C.etag[a]=P)),204===e||"HEAD"===x.type?R="nocontent":304===e?R="notmodified":(R=T.state,w=T.data,p=!(j=T.error))):(j=R,!e&&R||(R="error",e<0&&(e=0))),D.status=e,D.statusText=(t||R)+"",p?k.resolveWith(_,[w,R,D]):k.rejectWith(_,[D,R,j]),D.statusCode(O),O=void 0,y&&S.trigger(p?"ajaxSuccess":"ajaxError",[D,x,p?w:j]),E.fireWith(_,[D,R]),y&&(S.trigger("ajaxComplete",[D,x]),--C.active||C.event.trigger("ajaxStop")))}return D},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],(function(e,t){C[t]=function(e,n,r,a){return C.isFunction(n)&&(a=a||r,r=n,n=void 0),C.ajax(C.extend({url:e,type:t,dataType:a,data:n,success:r},C.isPlainObject(e)&&e))}})),C._evalUrl=function(e){return C.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(e){var t;return C.isFunction(e)?this.each((function(t){C(this).wrapAll(e.call(this,t))})):(this[0]&&(t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return C.isFunction(e)?this.each((function(t){C(this).wrapInner(e.call(this,t))})):this.each((function(){var t=C(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=C.isFunction(e);return this.each((function(n){C(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(){return this.parent().each((function(){C.nodeName(this,"body")||C(this).replaceWith(this.childNodes)})).end()}}),C.expr.filters.hidden=function(e){return!C.expr.filters.visible(e)},C.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var It=/%20/g,Mt=/\[\]$/,Lt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Ft=/^(?:input|select|textarea|keygen)/i;function qt(e,t,n,r){var a;if(C.isArray(t))C.each(t,(function(t,a){n||Mt.test(e)?r(e,a):qt(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,n,r)}));else if(n||"object"!==C.type(t))r(e,t);else for(a in t)qt(e+"["+a+"]",t[a],n,r)}C.param=function(e,t){var n,r=[],a=function(e,t){t=C.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=C.ajaxSettings&&C.ajaxSettings.traditional),C.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,(function(){a(this.name,this.value)}));else for(n in e)qt(n,e[n],t,a);return r.join("&").replace(It,"+")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&Ft.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!se.test(e))})).map((function(e,t){var n=C(this).val();return null==n?null:C.isArray(n)?C.map(n,(function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})):{name:t.name,value:n.replace(Lt,"\r\n")}})).get()}}),C.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},Ut=C.ajaxSettings.xhr();S.cors=!!Ut&&"withCredentials"in Ut,S.ajax=Ut=!!Ut,C.ajaxTransport((function(e){var t,n;if(S.cors||Ut&&!e.crossDomain)return{send:function(a,l){var f,d=e.xhr();if(d.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(f in e.xhrFields)d[f]=e.xhrFields[f];for(f in e.mimeType&&d.overrideMimeType&&d.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)d.setRequestHeader(f,a[f]);t=function(e){return function(){t&&(t=n=d.onload=d.onerror=d.onabort=d.onreadystatechange=null,"abort"===e?d.abort():"error"===e?"number"!=typeof d.status?l(0,"error"):l(d.status,d.statusText):l(Bt[d.status]||d.status,d.statusText,"text"!==(d.responseType||"text")||"string"!=typeof d.responseText?{binary:d.response}:{text:d.responseText},d.getAllResponseHeaders()))}},d.onload=t(),n=d.onerror=t("error"),void 0!==d.onabort?d.onabort=n:d.onreadystatechange=function(){4===d.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{d.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),C.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain)return{send:function(r,a){t=C("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),f.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Ht=[],zt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||C.expando+"_"+xt++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",(function(e,t,n){var a,l,f,d=!1!==e.jsonp&&(zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&zt.test(e.data)&&"data");if(d||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=C.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,d?e[d]=e[d].replace(zt,"$1"+a):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return f||C.error(a+" was not called"),f[0]},e.dataTypes[0]="json",l=r[a],r[a]=function(){f=arguments},n.always((function(){void 0===l?C(r).removeProp(a):r[a]=l,e[a]&&(e.jsonpCallback=t.jsonpCallback,Ht.push(a)),f&&C.isFunction(l)&&l(f[0]),f=l=void 0})),"script"})),C.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||f;var r=M.exec(e),a=!n&&[];return r?[t.createElement(r[1])]:(r=ge([e],t,a),a&&a.length&&C(a).remove(),C.merge([],r.childNodes))};var Vt=C.fn.load;function Wt(e){return C.isWindow(e)?e:9===e.nodeType&&e.defaultView}C.fn.load=function(e,t,n){if("string"!=typeof e&&Vt)return Vt.apply(this,arguments);var r,a,l,f=this,d=e.indexOf(" ");return d>-1&&(r=C.trim(e.slice(d)),e=e.slice(0,d)),C.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),f.length>0&&C.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){l=arguments,f.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)})).always(n&&function(e,t){f.each((function(){n.apply(this,l||[e.responseText,t,e])}))}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){C.fn[t]=function(e){return this.on(t,e)}})),C.expr.filters.animated=function(e){return C.grep(C.timers,(function(t){return e===t.elem})).length},C.offset={setOffset:function(e,t,n){var r,a,l,f,d,h,p=C.css(e,"position"),y=C(e),w={};"static"===p&&(e.style.position="relative"),d=y.offset(),l=C.css(e,"top"),h=C.css(e,"left"),("absolute"===p||"fixed"===p)&&(l+h).indexOf("auto")>-1?(f=(r=y.position()).top,a=r.left):(f=parseFloat(l)||0,a=parseFloat(h)||0),C.isFunction(t)&&(t=t.call(e,n,C.extend({},d))),null!=t.top&&(w.top=t.top-d.top+f),null!=t.left&&(w.left=t.left-d.left+a),"using"in t?t.using.call(e,w):y.css(w)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){C.offset.setOffset(this,e,t)}));var t,n,r=this[0],a={top:0,left:0},l=r&&r.ownerDocument;return l?(t=l.documentElement,C.contains(t,r)?(a=r.getBoundingClientRect(),n=Wt(l),{top:a.top+n.pageYOffset-t.clientTop,left:a.left+n.pageXOffset-t.clientLeft}):a):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===C.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),C.nodeName(e[0],"html")||(r=e.offset()),r.top+=C.css(e[0],"borderTopWidth",!0),r.left+=C.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-C.css(n,"marginTop",!0),left:t.left-r.left-C.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||He}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;C.fn[e]=function(r){return Z(this,(function(e,r,a){var l=Wt(e);if(void 0===a)return l?l[t]:e[r];l?l.scrollTo(n?l.pageXOffset:a,n?a:l.pageYOffset):e[r]=a}),e,r,arguments.length)}})),C.each(["top","left"],(function(e,t){C.cssHooks[t]=Ve(S.pixelPosition,(function(e,n){if(n)return n=ze(e,t),qe.test(n)?C(e).position()[t]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){C.fn[r]=function(r,a){var l=arguments.length&&(n||"boolean"!=typeof r),f=n||(!0===r||!0===a?"margin":"border");return Z(this,(function(t,n,r){var a;return C.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===r?C.css(t,n,f):C.style(t,n,r,f)}),t,l?r:void 0,l,null)}}))})),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),C.fn.andSelf=C.fn.addBack,void 0===(n=function(){return C}.apply(t,[]))||(e.exports=n);var Zt=r.jQuery,Gt=r.$;return C.noConflict=function(e){return r.$===C&&(r.$=Gt),e&&r.jQuery===C&&(r.jQuery=Zt),C},a||(r.jQuery=r.$=C),C},"object"==typeof e.exports?e.exports=r.document?a(r,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return a(e)}:a(r)},29620:function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return f[e];var n,l=String(e);return(n=r[l.toLowerCase()])?n:(n=a[l.toLowerCase()])||(1===l.length?l.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var l;if(l=r[t.toLowerCase()])return l===n;if(l=a[t.toLowerCase()])return l===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(l=97;l<123;l++)r[String.fromCharCode(l)]=l-32;for(var l=48;l<58;l++)r[l-48]=l;for(l=1;l<13;l++)r["f"+l]=l+111;for(l=0;l<10;l++)r["numpad "+l]=l+96;var f=t.names=t.title={};for(l in r)f[r[l]]=l;for(var d in a)r[d]=a[d]},80594:function(e,t,n){var r=NaN,a="[object Symbol]",l=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,y="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,w="object"==typeof self&&self&&self.Object===Object&&self,x=y||w||Function("return this")(),_=Object.prototype.toString,S=Math.max,k=Math.min,C=function(){return x.Date.now()};function E(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function O(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&_.call(e)==a}(e))return r;if(E(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=E(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=d.test(e);return n||h.test(e)?p(e.slice(2),n?2:8):f.test(e)?r:+e}e.exports=function(e,t,n){var r,a,l,f,d,h,p=0,y=!1,w=!1,x=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var n=r,l=a;return r=a=void 0,p=t,f=e.apply(l,n)}function j(e){var n=e-h;return void 0===h||n>=t||n<0||w&&e-p>=l}function T(){var e=C();if(j(e))return A(e);d=setTimeout(T,function(e){var n=t-(e-h);return w?k(n,l-(e-p)):n}(e))}function A(e){return d=void 0,x&&r?_(e):(r=a=void 0,f)}function P(){var e=C(),n=j(e);if(r=arguments,a=this,h=e,n){if(void 0===d)return function(e){return p=e,d=setTimeout(T,t),y?_(e):f}(h);if(w)return d=setTimeout(T,t),_(h)}return void 0===d&&(d=setTimeout(T,t)),f}return t=O(t)||0,E(n)&&(y=!!n.leading,l=(w="maxWait"in n)?S(O(n.maxWait)||0,t):l,x="trailing"in n?!!n.trailing:x),P.cancel=function(){void 0!==d&&clearTimeout(d),p=0,r=h=a=d=void 0},P.flush=function(){return void 0===d?f:A(C())},P}},20602:function(e){e.exports=function(e){for(var t=-1,n=e?e.length:0,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r}},98357:function(e,t,n){var r="Expected a function",a=NaN,l="[object Symbol]",f=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,p=/^0o[0-7]+$/i,y=parseInt,w="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,x="object"==typeof self&&self&&self.Object===Object&&self,_=w||x||Function("return this")(),S=Object.prototype.toString,k=Math.max,C=Math.min,E=function(){return _.Date.now()};function O(e,t,n){var a,l,f,d,h,p,y=0,w=!1,x=!1,_=!0;if("function"!=typeof e)throw new TypeError(r);function S(t){var n=a,r=l;return a=l=void 0,y=t,d=e.apply(r,n)}function O(e){var n=e-p;return void 0===p||n>=t||n<0||x&&e-y>=f}function A(){var e=E();if(O(e))return P(e);h=setTimeout(A,function(e){var n=t-(e-p);return x?C(n,f-(e-y)):n}(e))}function P(e){return h=void 0,_&&a?S(e):(a=l=void 0,d)}function D(){var e=E(),n=O(e);if(a=arguments,l=this,p=e,n){if(void 0===h)return function(e){return y=e,h=setTimeout(A,t),w?S(e):d}(p);if(x)return h=setTimeout(A,t),S(p)}return void 0===h&&(h=setTimeout(A,t)),d}return t=T(t)||0,j(n)&&(w=!!n.leading,f=(x="maxWait"in n)?k(T(n.maxWait)||0,t):f,_="trailing"in n?!!n.trailing:_),D.cancel=function(){void 0!==h&&clearTimeout(h),y=0,a=p=l=h=void 0},D.flush=function(){return void 0===h?d:P(E())},D}function j(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function T(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&S.call(e)==l}(e))return a;if(j(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=j(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(f,"");var n=h.test(e);return n||p.test(e)?y(e.slice(2),n?2:8):d.test(e)?a:+e}e.exports=function(e,t,n){var a=!0,l=!0;if("function"!=typeof e)throw new TypeError(r);return j(n)&&(a="leading"in n?!!n.leading:a,l="trailing"in n?!!n.trailing:l),O(e,t,{leading:a,maxWait:t,trailing:l})}},39515:function(e,t,n){var r=n(38761)(n(37772),"DataView");e.exports=r},89612:function(e,t,n){var r=n(52118),a=n(96909),l=n(98138),f=n(4174),d=n(7942);function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=a,h.prototype.get=l,h.prototype.has=f,h.prototype.set=d,e.exports=h},80235:function(e,t,n){var r=n(3945),a=n(21846),l=n(88028),f=n(72344),d=n(94769);function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=a,h.prototype.get=l,h.prototype.has=f,h.prototype.set=d,e.exports=h},10326:function(e,t,n){var r=n(38761)(n(37772),"Map");e.exports=r},96738:function(e,t,n){var r=n(92411),a=n(36417),l=n(86928),f=n(79493),d=n(24150);function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=a,h.prototype.get=l,h.prototype.has=f,h.prototype.set=d,e.exports=h},52760:function(e,t,n){var r=n(38761)(n(37772),"Promise");e.exports=r},2143:function(e,t,n){var r=n(38761)(n(37772),"Set");e.exports=r},45386:function(e,t,n){var r=n(96738),a=n(52842),l=n(52482);function f(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}f.prototype.add=f.prototype.push=a,f.prototype.has=l,e.exports=f},86571:function(e,t,n){var r=n(80235),a=n(15243),l=n(72858),f=n(4417),d=n(8605),h=n(71418);function p(e){var t=this.__data__=new r(e);this.size=t.size}p.prototype.clear=a,p.prototype.delete=l,p.prototype.get=f,p.prototype.has=d,p.prototype.set=h,e.exports=p},50857:function(e,t,n){var r=n(37772).Symbol;e.exports=r},79162:function(e,t,n){var r=n(37772).Uint8Array;e.exports=r},93215:function(e,t,n){var r=n(38761)(n(37772),"WeakMap");e.exports=r},49432:function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},67552:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,l=[];++n<r;){var f=e[n];t(f,n,e)&&(l[a++]=f)}return l}},1634:function(e,t,n){var r=n(36473),a=n(79631),l=n(86152),f=n(73226),d=n(39045),h=n(77598),p=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=l(e),y=!n&&a(e),w=!n&&!y&&f(e),x=!n&&!y&&!w&&h(e),_=n||y||w||x,S=_?r(e.length,String):[],k=S.length;for(var C in e)!t&&!p.call(e,C)||_&&("length"==C||w&&("offset"==C||"parent"==C)||x&&("buffer"==C||"byteLength"==C||"byteOffset"==C)||d(C,k))||S.push(C);return S}},50343:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},65067:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},87064:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},60091:function(e,t,n){var r=n(13940),a=n(41225),l=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var f=e[t];l.call(e,t)&&a(f,n)&&(void 0!==n||t in e)||r(e,t,n)}},22218:function(e,t,n){var r=n(41225);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},13940:function(e,t,n){var r=n(83043);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},24303:function(e,t,n){var r=n(26548),a=n(92019)(r);e.exports=a},15308:function(e,t,n){var r=n(55463)();e.exports=r},26548:function(e,t,n){var r=n(15308),a=n(90249);e.exports=function(e,t){return e&&r(e,t,a)}},13324:function(e,t,n){var r=n(17297),a=n(33812);e.exports=function(e,t){for(var n=0,l=(t=r(t,e)).length;null!=e&&n<l;)e=e[a(t[n++])];return n&&n==l?e:void 0}},1897:function(e,t,n){var r=n(65067),a=n(86152);e.exports=function(e,t,n){var l=t(e);return a(e)?l:r(l,n(e))}},53366:function(e,t,n){var r=n(50857),a=n(62107),l=n(37157),f=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":f&&f in Object(e)?a(e):l(e)}},20187:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},15183:function(e,t,n){var r=n(53366),a=n(15125);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},88746:function(e,t,n){var r=n(51952),a=n(15125);e.exports=function e(t,n,l,f,d){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!=t&&n!=n:r(t,n,l,f,e,d))}},51952:function(e,t,n){var r=n(86571),a=n(74871),l=n(11491),f=n(17416),d=n(70940),h=n(86152),p=n(73226),y=n(77598),w="[object Arguments]",x="[object Array]",_="[object Object]",S=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,k,C,E){var O=h(e),j=h(t),T=O?x:d(e),A=j?x:d(t),P=(T=T==w?_:T)==_,D=(A=A==w?_:A)==_,R=T==A;if(R&&p(e)){if(!p(t))return!1;O=!0,P=!1}if(R&&!P)return E||(E=new r),O||y(e)?a(e,t,n,k,C,E):l(e,t,T,n,k,C,E);if(!(1&n)){var I=P&&S.call(e,"__wrapped__"),M=D&&S.call(t,"__wrapped__");if(I||M){var L=I?e.value():e,N=M?t.value():t;return E||(E=new r),C(L,N,n,k,E)}}return!!R&&(E||(E=new r),f(e,t,n,k,C,E))}},37036:function(e,t,n){var r=n(86571),a=n(88746);e.exports=function(e,t,n,l){var f=n.length,d=f,h=!l;if(null==e)return!d;for(e=Object(e);f--;){var p=n[f];if(h&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++f<d;){var y=(p=n[f])[0],w=e[y],x=p[1];if(h&&p[2]){if(void 0===w&&!(y in e))return!1}else{var _=new r;if(l)var S=l(w,x,y,e,t,_);if(!(void 0===S?a(x,w,3,l,_):S))return!1}}return!0}},6840:function(e,t,n){var r=n(61049),a=n(47394),l=n(29259),f=n(87035),d=/^\[object .+?Constructor\]$/,h=Function.prototype,p=Object.prototype,y=h.toString,w=p.hasOwnProperty,x=RegExp("^"+y.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!l(e)||a(e))&&(r(e)?x:d).test(f(e))}},35522:function(e,t,n){var r=n(53366),a=n(61158),l=n(15125),f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Arguments]"]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f["[object Map]"]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1,e.exports=function(e){return l(e)&&a(e.length)&&!!f[r(e)]}},68286:function(e,t,n){var r=n(26423),a=n(74716),l=n(23059),f=n(86152),d=n(65798);e.exports=function(e){return"function"==typeof e?e:null==e?l:"object"==typeof e?f(e)?a(e[0],e[1]):r(e):d(e)}},86411:function(e,t,n){var r=n(16001),a=n(54248),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))l.call(e,n)&&"constructor"!=n&&t.push(n);return t}},26423:function(e,t,n){var r=n(37036),a=n(49882),l=n(73477);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?l(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},74716:function(e,t,n){var r=n(88746),a=n(72579),l=n(95041),f=n(21401),d=n(28792),h=n(73477),p=n(33812);e.exports=function(e,t){return f(e)&&d(t)?h(p(e),t):function(n){var f=a(n,e);return void 0===f&&f===t?l(n,e):r(t,f,3)}}},20256:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},82952:function(e,t,n){var r=n(13324);e.exports=function(e){return function(t){return r(t,e)}}},36060:function(e,t,n){var r=n(23059),a=n(43114),l=n(75251);e.exports=function(e,t){return l(a(e,t,r),e+"")}},86532:function(e,t,n){var r=n(86874),a=n(83043),l=n(23059),f=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:l;e.exports=f},4751:function(e,t,n){var r=n(24303);e.exports=function(e,t){var n;return r(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}},36473:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1054:function(e,t,n){var r=n(50857),a=n(50343),l=n(86152),f=n(4795),d=r?r.prototype:void 0,h=d?d.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(l(t))return a(t,e)+"";if(f(t))return h?h.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},47826:function(e){e.exports=function(e){return function(t){return e(t)}}},59950:function(e){e.exports=function(e,t){return e.has(t)}},17297:function(e,t,n){var r=n(86152),a=n(21401),l=n(54452),f=n(66188);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:l(f(e))}},752:function(e,t,n){var r=n(60091),a=n(13940);e.exports=function(e,t,n,l){var f=!n;n||(n={});for(var d=-1,h=t.length;++d<h;){var p=t[d],y=l?l(n[p],e[p],p,n,e):void 0;void 0===y&&(y=e[p]),f?a(n,p,y):r(n,p,y)}return n}},24019:function(e,t,n){var r=n(37772)["__core-js_shared__"];e.exports=r},97263:function(e,t,n){var r=n(36060),a=n(82406);e.exports=function(e){return r((function(t,n){var r=-1,l=n.length,f=l>1?n[l-1]:void 0,d=l>2?n[2]:void 0;for(f=e.length>3&&"function"==typeof f?(l--,f):void 0,d&&a(n[0],n[1],d)&&(f=l<3?void 0:f,l=1),t=Object(t);++r<l;){var h=n[r];h&&e(t,h,r,f)}return t}))}},92019:function(e,t,n){var r=n(67878);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var l=n.length,f=t?l:-1,d=Object(n);(t?f--:++f<l)&&!1!==a(d[f],f,d););return n}}},55463:function(e){e.exports=function(e){return function(t,n,r){for(var a=-1,l=Object(t),f=r(t),d=f.length;d--;){var h=f[e?d:++a];if(!1===n(l[h],h,l))break}return t}}},83043:function(e,t,n){var r=n(38761),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},74871:function(e,t,n){var r=n(45386),a=n(87064),l=n(59950);e.exports=function(e,t,n,f,d,h){var p=1&n,y=e.length,w=t.length;if(y!=w&&!(p&&w>y))return!1;var x=h.get(e),_=h.get(t);if(x&&_)return x==t&&_==e;var S=-1,k=!0,C=2&n?new r:void 0;for(h.set(e,t),h.set(t,e);++S<y;){var E=e[S],O=t[S];if(f)var j=p?f(O,E,S,t,e,h):f(E,O,S,e,t,h);if(void 0!==j){if(j)continue;k=!1;break}if(C){if(!a(t,(function(e,t){if(!l(C,t)&&(E===e||d(E,e,n,f,h)))return C.push(t)}))){k=!1;break}}else if(E!==O&&!d(E,O,n,f,h)){k=!1;break}}return h.delete(e),h.delete(t),k}},11491:function(e,t,n){var r=n(50857),a=n(79162),l=n(41225),f=n(74871),d=n(75179),h=n(16909),p=r?r.prototype:void 0,y=p?p.valueOf:void 0;e.exports=function(e,t,n,r,p,w,x){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!w(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return l(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var _=d;case"[object Set]":var S=1&r;if(_||(_=h),e.size!=t.size&&!S)return!1;var k=x.get(e);if(k)return k==t;r|=2,x.set(e,t);var C=f(_(e),_(t),r,p,w,x);return x.delete(e),C;case"[object Symbol]":if(y)return y.call(e)==y.call(t)}return!1}},17416:function(e,t,n){var r=n(13483),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,l,f,d){var h=1&n,p=r(e),y=p.length;if(y!=r(t).length&&!h)return!1;for(var w=y;w--;){var x=p[w];if(!(h?x in t:a.call(t,x)))return!1}var _=d.get(e),S=d.get(t);if(_&&S)return _==t&&S==e;var k=!0;d.set(e,t),d.set(t,e);for(var C=h;++w<y;){var E=e[x=p[w]],O=t[x];if(l)var j=h?l(O,E,x,t,e,d):l(E,O,x,e,t,d);if(!(void 0===j?E===O||f(E,O,n,l,d):j)){k=!1;break}C||(C="constructor"==x)}if(k&&!C){var T=e.constructor,A=t.constructor;T==A||!("constructor"in e)||!("constructor"in t)||"function"==typeof T&&T instanceof T&&"function"==typeof A&&A instanceof A||(k=!1)}return d.delete(e),d.delete(t),k}},51242:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},13483:function(e,t,n){var r=n(1897),a=n(80633),l=n(90249);e.exports=function(e){return r(e,l,a)}},27937:function(e,t,n){var r=n(98304);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},49882:function(e,t,n){var r=n(28792),a=n(90249);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var l=t[n],f=e[l];t[n]=[l,f,r(f)]}return t}},38761:function(e,t,n){var r=n(6840),a=n(98109);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},62107:function(e,t,n){var r=n(50857),a=Object.prototype,l=a.hasOwnProperty,f=a.toString,d=r?r.toStringTag:void 0;e.exports=function(e){var t=l.call(e,d),n=e[d];try{e[d]=void 0;var r=!0}catch(e){}var a=f.call(e);return r&&(t?e[d]=n:delete e[d]),a}},80633:function(e,t,n){var r=n(67552),a=n(30981),l=Object.prototype.propertyIsEnumerable,f=Object.getOwnPropertySymbols,d=f?function(e){return null==e?[]:(e=Object(e),r(f(e),(function(t){return l.call(e,t)})))}:a;e.exports=d},70940:function(e,t,n){var r=n(39515),a=n(10326),l=n(52760),f=n(2143),d=n(93215),h=n(53366),p=n(87035),y="[object Map]",w="[object Promise]",x="[object Set]",_="[object WeakMap]",S="[object DataView]",k=p(r),C=p(a),E=p(l),O=p(f),j=p(d),T=h;(r&&T(new r(new ArrayBuffer(1)))!=S||a&&T(new a)!=y||l&&T(l.resolve())!=w||f&&T(new f)!=x||d&&T(new d)!=_)&&(T=function(e){var t=h(e),n="[object Object]"==t?e.constructor:void 0,r=n?p(n):"";if(r)switch(r){case k:return S;case C:return y;case E:return w;case O:return x;case j:return _}return t}),e.exports=T},98109:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},1369:function(e,t,n){var r=n(17297),a=n(79631),l=n(86152),f=n(39045),d=n(61158),h=n(33812);e.exports=function(e,t,n){for(var p=-1,y=(t=r(t,e)).length,w=!1;++p<y;){var x=h(t[p]);if(!(w=null!=e&&n(e,x)))break;e=e[x]}return w||++p!=y?w:!!(y=null==e?0:e.length)&&d(y)&&f(x,y)&&(l(e)||a(e))}},52118:function(e,t,n){var r=n(99191);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},96909:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},98138:function(e,t,n){var r=n(99191),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},4174:function(e,t,n){var r=n(99191),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},7942:function(e,t,n){var r=n(99191);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},39045:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},82406:function(e,t,n){var r=n(41225),a=n(67878),l=n(39045),f=n(29259);e.exports=function(e,t,n){if(!f(n))return!1;var d=typeof t;return!!("number"==d?a(n)&&l(t,n.length):"string"==d&&t in n)&&r(n[t],e)}},21401:function(e,t,n){var r=n(86152),a=n(4795),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(f.test(e)||!l.test(e)||null!=t&&e in Object(t))}},98304:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},47394:function(e,t,n){var r,a=n(24019),l=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!l&&l in e}},16001:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},28792:function(e,t,n){var r=n(29259);e.exports=function(e){return e==e&&!r(e)}},3945:function(e){e.exports=function(){this.__data__=[],this.size=0}},21846:function(e,t,n){var r=n(22218),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},88028:function(e,t,n){var r=n(22218);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},72344:function(e,t,n){var r=n(22218);e.exports=function(e){return r(this.__data__,e)>-1}},94769:function(e,t,n){var r=n(22218);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},92411:function(e,t,n){var r=n(89612),a=n(80235),l=n(10326);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(l||a),string:new r}}},36417:function(e,t,n){var r=n(27937);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},86928:function(e,t,n){var r=n(27937);e.exports=function(e){return r(this,e).get(e)}},79493:function(e,t,n){var r=n(27937);e.exports=function(e){return r(this,e).has(e)}},24150:function(e,t,n){var r=n(27937);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},75179:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},73477:function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},77777:function(e,t,n){var r=n(30733);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},99191:function(e,t,n){var r=n(38761)(Object,"create");e.exports=r},54248:function(e,t,n){var r=n(60241)(Object.keys,Object);e.exports=r},4146:function(e,t,n){e=n.nmd(e);var r=n(51242),a=t&&!t.nodeType&&t,l=a&&e&&!e.nodeType&&e,f=l&&l.exports===a&&r.process,d=function(){try{var e=l&&l.require&&l.require("util").types;return e||f&&f.binding&&f.binding("util")}catch(e){}}();e.exports=d},37157:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},60241:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},43114:function(e,t,n){var r=n(49432),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var l=arguments,f=-1,d=a(l.length-t,0),h=Array(d);++f<d;)h[f]=l[t+f];f=-1;for(var p=Array(t+1);++f<t;)p[f]=l[f];return p[t]=n(h),r(e,this,p)}}},37772:function(e,t,n){var r=n(51242),a="object"==typeof self&&self&&self.Object===Object&&self,l=r||a||Function("return this")();e.exports=l},52842:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},52482:function(e){e.exports=function(e){return this.__data__.has(e)}},16909:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},75251:function(e,t,n){var r=n(86532),a=n(97787)(r);e.exports=a},97787:function(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var a=t(),l=16-(a-r);if(r=a,l>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},15243:function(e,t,n){var r=n(80235);e.exports=function(){this.__data__=new r,this.size=0}},72858:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},4417:function(e){e.exports=function(e){return this.__data__.get(e)}},8605:function(e){e.exports=function(e){return this.__data__.has(e)}},71418:function(e,t,n){var r=n(80235),a=n(10326),l=n(96738);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var f=n.__data__;if(!a||f.length<199)return f.push([e,t]),this.size=++n.size,this;n=this.__data__=new l(f)}return n.set(e,t),this.size=n.size,this}},54452:function(e,t,n){var r=n(77777),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,f=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,n,r,a){t.push(r?a.replace(l,"$1"):n||e)})),t}));e.exports=f},33812:function(e,t,n){var r=n(4795);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},87035:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},60019:function(e,t,n){var r=n(60091),a=n(752),l=n(97263),f=n(67878),d=n(16001),h=n(90249),p=Object.prototype.hasOwnProperty,y=l((function(e,t){if(d(t)||f(t))a(t,h(t),e);else for(var n in t)p.call(t,n)&&r(e,n,t[n])}));e.exports=y},86874:function(e){e.exports=function(e){return function(){return e}}},41225:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},72579:function(e,t,n){var r=n(13324);e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},95041:function(e,t,n){var r=n(20187),a=n(1369);e.exports=function(e,t){return null!=e&&a(e,t,r)}},23059:function(e){e.exports=function(e){return e}},79631:function(e,t,n){var r=n(15183),a=n(15125),l=Object.prototype,f=l.hasOwnProperty,d=l.propertyIsEnumerable,h=r(function(){return arguments}())?r:function(e){return a(e)&&f.call(e,"callee")&&!d.call(e,"callee")};e.exports=h},86152:function(e){var t=Array.isArray;e.exports=t},67878:function(e,t,n){var r=n(61049),a=n(61158);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},73226:function(e,t,n){e=n.nmd(e);var r=n(37772),a=n(36330),l=t&&!t.nodeType&&t,f=l&&e&&!e.nodeType&&e,d=f&&f.exports===l?r.Buffer:void 0,h=(d?d.isBuffer:void 0)||a;e.exports=h},61049:function(e,t,n){var r=n(53366),a=n(29259);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},61158:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},29259:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},15125:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},4795:function(e,t,n){var r=n(53366),a=n(15125);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},77598:function(e,t,n){var r=n(35522),a=n(47826),l=n(4146),f=l&&l.isTypedArray,d=f?a(f):r;e.exports=d},90249:function(e,t,n){var r=n(1634),a=n(86411),l=n(67878);e.exports=function(e){return l(e)?r(e):a(e)}},76635:function(e,t,n){var r;e=n.nmd(e),function(){var a,l="Expected a function",f="__lodash_hash_undefined__",d="__lodash_placeholder__",h=16,p=32,y=64,w=128,x=256,_=1/0,S=9007199254740991,k=NaN,C=4294967295,E=[["ary",w],["bind",1],["bindKey",2],["curry",8],["curryRight",h],["flip",512],["partial",p],["partialRight",y],["rearg",x]],O="[object Arguments]",j="[object Array]",T="[object Boolean]",A="[object Date]",P="[object Error]",D="[object Function]",R="[object GeneratorFunction]",I="[object Map]",M="[object Number]",L="[object Object]",N="[object Promise]",F="[object RegExp]",q="[object Set]",B="[object String]",U="[object Symbol]",H="[object WeakMap]",z="[object ArrayBuffer]",V="[object DataView]",W="[object Float32Array]",Z="[object Float64Array]",G="[object Int8Array]",K="[object Int16Array]",Y="[object Int32Array]",X="[object Uint8Array]",J="[object Uint8ClampedArray]",Q="[object Uint16Array]",ee="[object Uint32Array]",te=/\b__p \+= '';/g,ne=/\b(__p \+=) '' \+/g,re=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oe=/&(?:amp|lt|gt|quot|#39);/g,ae=/[&<>"']/g,se=RegExp(oe.source),le=RegExp(ae.source),ce=/<%-([\s\S]+?)%>/g,ue=/<%([\s\S]+?)%>/g,fe=/<%=([\s\S]+?)%>/g,de=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,he=/^\w*$/,pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,me=/[\\^$.*+?()[\]{}|]/g,ge=RegExp(me.source),ve=/^\s+/,ye=/\s/,be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,we=/\{\n\/\* \[wrapped with (.+)\] \*/,xe=/,? & /,_e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Se=/[()=,{}\[\]\/\s]/,ke=/\\(\\)?/g,Ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ee=/\w*$/,Oe=/^[-+]0x[0-9a-f]+$/i,je=/^0b[01]+$/i,$e=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,Ae=/^(?:0|[1-9]\d*)$/,Pe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,De=/($^)/,Re=/['\n\r\u2028\u2029\\]/g,Ie="\\ud800-\\udfff",Me="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Le="\\u2700-\\u27bf",Ne="a-z\\xdf-\\xf6\\xf8-\\xff",Fe="A-Z\\xc0-\\xd6\\xd8-\\xde",qe="\\ufe0e\\ufe0f",Be="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ue="['’]",He="["+Ie+"]",ze="["+Be+"]",Ve="["+Me+"]",We="\\d+",Ze="["+Le+"]",Ge="["+Ne+"]",Ke="[^"+Ie+Be+We+Le+Ne+Fe+"]",Ye="\\ud83c[\\udffb-\\udfff]",Xe="[^"+Ie+"]",Je="(?:\\ud83c[\\udde6-\\uddff]){2}",Qe="[\\ud800-\\udbff][\\udc00-\\udfff]",et="["+Fe+"]",tt="\\u200d",nt="(?:"+Ge+"|"+Ke+")",rt="(?:"+et+"|"+Ke+")",it="(?:['’](?:d|ll|m|re|s|t|ve))?",ot="(?:['’](?:D|LL|M|RE|S|T|VE))?",at="(?:"+Ve+"|"+Ye+")"+"?",st="["+qe+"]?",lt=st+at+("(?:"+tt+"(?:"+[Xe,Je,Qe].join("|")+")"+st+at+")*"),ct="(?:"+[Ze,Je,Qe].join("|")+")"+lt,ut="(?:"+[Xe+Ve+"?",Ve,Je,Qe,He].join("|")+")",ft=RegExp(Ue,"g"),dt=RegExp(Ve,"g"),ht=RegExp(Ye+"(?="+Ye+")|"+ut+lt,"g"),pt=RegExp([et+"?"+Ge+"+"+it+"(?="+[ze,et,"$"].join("|")+")",rt+"+"+ot+"(?="+[ze,et+nt,"$"].join("|")+")",et+"?"+nt+"+"+it,et+"+"+ot,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",We,ct].join("|"),"g"),mt=RegExp("["+tt+Ie+Me+qe+"]"),gt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yt=-1,bt={};bt[W]=bt[Z]=bt[G]=bt[K]=bt[Y]=bt[X]=bt[J]=bt[Q]=bt[ee]=!0,bt[O]=bt[j]=bt[z]=bt[T]=bt[V]=bt[A]=bt[P]=bt[D]=bt[I]=bt[M]=bt[L]=bt[F]=bt[q]=bt[B]=bt[H]=!1;var wt={};wt[O]=wt[j]=wt[z]=wt[V]=wt[T]=wt[A]=wt[W]=wt[Z]=wt[G]=wt[K]=wt[Y]=wt[I]=wt[M]=wt[L]=wt[F]=wt[q]=wt[B]=wt[U]=wt[X]=wt[J]=wt[Q]=wt[ee]=!0,wt[P]=wt[D]=wt[H]=!1;var xt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_t=parseFloat,St=parseInt,kt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,Ct="object"==typeof self&&self&&self.Object===Object&&self,Et=kt||Ct||Function("return this")(),Ot=t&&!t.nodeType&&t,jt=Ot&&e&&!e.nodeType&&e,$t=jt&&jt.exports===Ot,Tt=$t&&kt.process,At=function(){try{var e=jt&&jt.require&&jt.require("util").types;return e||Tt&&Tt.binding&&Tt.binding("util")}catch(e){}}(),Pt=At&&At.isArrayBuffer,Dt=At&&At.isDate,Rt=At&&At.isMap,It=At&&At.isRegExp,Mt=At&&At.isSet,Lt=At&&At.isTypedArray;function Nt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ft(e,t,n,r){for(var a=-1,l=null==e?0:e.length;++a<l;){var f=e[a];t(r,f,n(f),e)}return r}function qt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Bt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ht(e,t){for(var n=-1,r=null==e?0:e.length,a=0,l=[];++n<r;){var f=e[n];t(f,n,e)&&(l[a++]=f)}return l}function zt(e,t){return!!(null==e?0:e.length)&&en(e,t,0)>-1}function Vt(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function Wt(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function Zt(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function Gt(e,t,n,r){var a=-1,l=null==e?0:e.length;for(r&&l&&(n=e[++a]);++a<l;)n=t(n,e[a],a,e);return n}function Kt(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function Yt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Xt=on("length");function Jt(e,t,n){var r;return n(e,(function(e,n,a){if(t(e,n,a))return r=n,!1})),r}function Qt(e,t,n,r){for(var a=e.length,l=n+(r?1:-1);r?l--:++l<a;)if(t(e[l],l,e))return l;return-1}function en(e,t,n){return t==t?function(e,t,n){var r=n-1,a=e.length;for(;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):Qt(e,nn,n)}function tn(e,t,n,r){for(var a=n-1,l=e.length;++a<l;)if(r(e[a],t))return a;return-1}function nn(e){return e!=e}function rn(e,t){var n=null==e?0:e.length;return n?ln(e,t)/n:k}function on(e){return function(t){return null==t?a:t[e]}}function an(e){return function(t){return null==e?a:e[t]}}function sn(e,t,n,r,a){return a(e,(function(e,a,l){n=r?(r=!1,e):t(n,e,a,l)})),n}function ln(e,t){for(var n,r=-1,l=e.length;++r<l;){var f=t(e[r]);f!==a&&(n=n===a?f:n+f)}return n}function cn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function un(e){return e?e.slice(0,jn(e)+1).replace(ve,""):e}function dn(e){return function(t){return e(t)}}function hn(e,t){return Wt(t,(function(t){return e[t]}))}function pn(e,t){return e.has(t)}function mn(e,t){for(var n=-1,r=e.length;++n<r&&en(t,e[n],0)>-1;);return n}function gn(e,t){for(var n=e.length;n--&&en(t,e[n],0)>-1;);return n}var vn=an({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),yn=an({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function bn(e){return"\\"+xt[e]}function wn(e){return mt.test(e)}function xn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function _n(e,t){return function(n){return e(t(n))}}function Sn(e,t){for(var n=-1,r=e.length,a=0,l=[];++n<r;){var f=e[n];f!==t&&f!==d||(e[n]=d,l[a++]=n)}return l}function kn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function En(e){return wn(e)?function(e){var t=ht.lastIndex=0;for(;ht.test(e);)++t;return t}(e):Xt(e)}function On(e){return wn(e)?function(e){return e.match(ht)||[]}(e):function(e){return e.split("")}(e)}function jn(e){for(var t=e.length;t--&&ye.test(e.charAt(t)););return t}var $n=an({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Tn=function e(t){var n,r=(t=null==t?Et:Tn.defaults(Et.Object(),t,Tn.pick(Et,vt))).Array,ye=t.Date,Ie=t.Error,Me=t.Function,Le=t.Math,Ne=t.Object,Fe=t.RegExp,qe=t.String,Be=t.TypeError,Ue=r.prototype,He=Me.prototype,ze=Ne.prototype,Ve=t["__core-js_shared__"],We=He.toString,Ze=ze.hasOwnProperty,Ge=0,Ke=(n=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ye=ze.toString,Xe=We.call(Ne),Je=Et._,Qe=Fe("^"+We.call(Ze).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=$t?t.Buffer:a,tt=t.Symbol,nt=t.Uint8Array,rt=et?et.allocUnsafe:a,it=_n(Ne.getPrototypeOf,Ne),ot=Ne.create,at=ze.propertyIsEnumerable,st=Ue.splice,lt=tt?tt.isConcatSpreadable:a,ct=tt?tt.iterator:a,ut=tt?tt.toStringTag:a,ht=function(){try{var e=Co(Ne,"defineProperty");return e({},"",{}),e}catch(e){}}(),mt=t.clearTimeout!==Et.clearTimeout&&t.clearTimeout,xt=ye&&ye.now!==Et.Date.now&&ye.now,kt=t.setTimeout!==Et.setTimeout&&t.setTimeout,Ct=Le.ceil,Ot=Le.floor,jt=Ne.getOwnPropertySymbols,Tt=et?et.isBuffer:a,At=t.isFinite,Xt=Ue.join,an=_n(Ne.keys,Ne),An=Le.max,Pn=Le.min,Dn=ye.now,Rn=t.parseInt,In=Le.random,Mn=Ue.reverse,Ln=Co(t,"DataView"),Nn=Co(t,"Map"),Fn=Co(t,"Promise"),qn=Co(t,"Set"),Bn=Co(t,"WeakMap"),Un=Co(Ne,"create"),Hn=Bn&&new Bn,zn={},Vn=Xo(Ln),Wn=Xo(Nn),Zn=Xo(Fn),Gn=Xo(qn),Kn=Xo(Bn),Yn=tt?tt.prototype:a,Xn=Yn?Yn.valueOf:a,Jn=Yn?Yn.toString:a;function Qn(e){if(hs(e)&&!rs(e)&&!(e instanceof rr)){if(e instanceof nr)return e;if(Ze.call(e,"__wrapped__"))return Jo(e)}return new nr(e)}var er=function(){function e(){}return function(t){if(!ds(t))return{};if(ot)return ot(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function tr(){}function nr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function rr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=C,this.__views__=[]}function ir(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function or(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ar(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function sr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ar;++t<n;)this.add(e[t])}function lr(e){var t=this.__data__=new or(e);this.size=t.size}function cr(e,t){var n=rs(e),r=!n&&ns(e),a=!n&&!r&&ss(e),l=!n&&!r&&!a&&xs(e),f=n||r||a||l,d=f?cn(e.length,qe):[],h=d.length;for(var p in e)!t&&!Ze.call(e,p)||f&&("length"==p||a&&("offset"==p||"parent"==p)||l&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||Po(p,h))||d.push(p);return d}function ur(e){var t=e.length;return t?e[si(0,t-1)]:a}function fr(e,t){return Go(Ui(e),wr(t,0,e.length))}function dr(e){return Go(Ui(e))}function hr(e,t,n){(n!==a&&!Qa(e[t],n)||n===a&&!(t in e))&&yr(e,t,n)}function pr(e,t,n){var r=e[t];Ze.call(e,t)&&Qa(r,n)&&(n!==a||t in e)||yr(e,t,n)}function mr(e,t){for(var n=e.length;n--;)if(Qa(e[n][0],t))return n;return-1}function gr(e,t,n,r){return Cr(e,(function(e,a,l){t(r,e,n(e),l)})),r}function vr(e,t){return e&&Hi(t,Hs(t),e)}function yr(e,t,n){"__proto__"==t&&ht?ht(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function br(e,t){for(var n=-1,l=t.length,f=r(l),d=null==e;++n<l;)f[n]=d?a:Ns(e,t[n]);return f}function wr(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function xr(e,t,n,r,l,f){var d,h=1&t,p=2&t,y=4&t;if(n&&(d=l?n(e,r,l,f):n(e)),d!==a)return d;if(!ds(e))return e;var w=rs(e);if(w){if(d=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ze.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!h)return Ui(e,d)}else{var x=jo(e),_=x==D||x==R;if(ss(e))return Mi(e,h);if(x==L||x==O||_&&!l){if(d=p||_?{}:To(e),!h)return p?function(e,t){return Hi(e,Oo(e),t)}(e,function(e,t){return e&&Hi(t,zs(t),e)}(d,e)):function(e,t){return Hi(e,Eo(e),t)}(e,vr(d,e))}else{if(!wt[x])return l?e:{};d=function(e,t,n){var r=e.constructor;switch(t){case z:return Li(e);case T:case A:return new r(+e);case V:return function(e,t){var n=t?Li(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case W:case Z:case G:case K:case Y:case X:case J:case Q:case ee:return Ni(e,n);case I:return new r;case M:case B:return new r(e);case F:return function(e){var t=new e.constructor(e.source,Ee.exec(e));return t.lastIndex=e.lastIndex,t}(e);case q:return new r;case U:return a=e,Xn?Ne(Xn.call(a)):{}}var a}(e,x,h)}}f||(f=new lr);var S=f.get(e);if(S)return S;f.set(e,d),ys(e)?e.forEach((function(r){d.add(xr(r,t,n,r,e,f))})):ps(e)&&e.forEach((function(r,a){d.set(a,xr(r,t,n,a,e,f))}));var k=w?a:(y?p?yo:vo:p?zs:Hs)(e);return qt(k||e,(function(r,a){k&&(r=e[a=r]),pr(d,a,xr(r,t,n,a,e,f))})),d}function _r(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ne(e);r--;){var l=n[r],f=t[l],d=e[l];if(d===a&&!(l in e)||!f(d))return!1}return!0}function Sr(e,t,n){if("function"!=typeof e)throw new Be(l);return zo((function(){e.apply(a,n)}),t)}function kr(e,t,n,r){var a=-1,l=zt,f=!0,d=e.length,h=[],p=t.length;if(!d)return h;n&&(t=Wt(t,dn(n))),r?(l=Vt,f=!1):t.length>=200&&(l=pn,f=!1,t=new sr(t));e:for(;++a<d;){var y=e[a],w=null==n?y:n(y);if(y=r||0!==y?y:0,f&&w==w){for(var x=p;x--;)if(t[x]===w)continue e;h.push(y)}else l(t,w,r)||h.push(y)}return h}Qn.templateSettings={escape:ce,evaluate:ue,interpolate:fe,variable:"",imports:{_:Qn}},Qn.prototype=tr.prototype,Qn.prototype.constructor=Qn,nr.prototype=er(tr.prototype),nr.prototype.constructor=nr,rr.prototype=er(tr.prototype),rr.prototype.constructor=rr,ir.prototype.clear=function(){this.__data__=Un?Un(null):{},this.size=0},ir.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ir.prototype.get=function(e){var t=this.__data__;if(Un){var n=t[e];return n===f?a:n}return Ze.call(t,e)?t[e]:a},ir.prototype.has=function(e){var t=this.__data__;return Un?t[e]!==a:Ze.call(t,e)},ir.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Un&&t===a?f:t,this},or.prototype.clear=function(){this.__data__=[],this.size=0},or.prototype.delete=function(e){var t=this.__data__,n=mr(t,e);return!(n<0)&&(n==t.length-1?t.pop():st.call(t,n,1),--this.size,!0)},or.prototype.get=function(e){var t=this.__data__,n=mr(t,e);return n<0?a:t[n][1]},or.prototype.has=function(e){return mr(this.__data__,e)>-1},or.prototype.set=function(e,t){var n=this.__data__,r=mr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ar.prototype.clear=function(){this.size=0,this.__data__={hash:new ir,map:new(Nn||or),string:new ir}},ar.prototype.delete=function(e){var t=So(this,e).delete(e);return this.size-=t?1:0,t},ar.prototype.get=function(e){return So(this,e).get(e)},ar.prototype.has=function(e){return So(this,e).has(e)},ar.prototype.set=function(e,t){var n=So(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},sr.prototype.add=sr.prototype.push=function(e){return this.__data__.set(e,f),this},sr.prototype.has=function(e){return this.__data__.has(e)},lr.prototype.clear=function(){this.__data__=new or,this.size=0},lr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},lr.prototype.get=function(e){return this.__data__.get(e)},lr.prototype.has=function(e){return this.__data__.has(e)},lr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof or){var r=n.__data__;if(!Nn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ar(r)}return n.set(e,t),this.size=n.size,this};var Cr=Wi(Dr),Er=Wi(Rr,!0);function Or(e,t){var n=!0;return Cr(e,(function(e,r,a){return n=!!t(e,r,a)})),n}function jr(e,t,n){for(var r=-1,l=e.length;++r<l;){var f=e[r],d=t(f);if(null!=d&&(h===a?d==d&&!ws(d):n(d,h)))var h=d,p=f}return p}function $r(e,t){var n=[];return Cr(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}function Tr(e,t,n,r,a){var l=-1,f=e.length;for(n||(n=Ao),a||(a=[]);++l<f;){var d=e[l];t>0&&n(d)?t>1?Tr(d,t-1,n,r,a):Zt(a,d):r||(a[a.length]=d)}return a}var Ar=Zi(),Pr=Zi(!0);function Dr(e,t){return e&&Ar(e,t,Hs)}function Rr(e,t){return e&&Pr(e,t,Hs)}function Ir(e,t){return Ht(t,(function(t){return cs(e[t])}))}function Mr(e,t){for(var n=0,r=(t=Pi(t,e)).length;null!=e&&n<r;)e=e[Yo(t[n++])];return n&&n==r?e:a}function Lr(e,t,n){var r=t(e);return rs(e)?r:Zt(r,n(e))}function Nr(e){return null==e?e===a?"[object Undefined]":"[object Null]":ut&&ut in Ne(e)?function(e){var t=Ze.call(e,ut),n=e[ut];try{e[ut]=a;var r=!0}catch(e){}var l=Ye.call(e);r&&(t?e[ut]=n:delete e[ut]);return l}(e):function(e){return Ye.call(e)}(e)}function Fr(e,t){return e>t}function qr(e,t){return null!=e&&Ze.call(e,t)}function Br(e,t){return null!=e&&t in Ne(e)}function Ur(e,t,n){for(var l=n?Vt:zt,f=e[0].length,d=e.length,h=d,p=r(d),y=1/0,w=[];h--;){var x=e[h];h&&t&&(x=Wt(x,dn(t))),y=Pn(x.length,y),p[h]=!n&&(t||f>=120&&x.length>=120)?new sr(h&&x):a}x=e[0];var _=-1,S=p[0];e:for(;++_<f&&w.length<y;){var k=x[_],C=t?t(k):k;if(k=n||0!==k?k:0,!(S?pn(S,C):l(w,C,n))){for(h=d;--h;){var E=p[h];if(!(E?pn(E,C):l(e[h],C,n)))continue e}S&&S.push(C),w.push(k)}}return w}function Hr(e,t,n){var r=null==(e=Bo(e,t=Pi(t,e)))?e:e[Yo(ca(t))];return null==r?a:Nt(r,e,n)}function zr(e){return hs(e)&&Nr(e)==O}function Vr(e,t,n,r,l){return e===t||(null==e||null==t||!hs(e)&&!hs(t)?e!=e&&t!=t:function(e,t,n,r,l,f){var d=rs(e),h=rs(t),p=d?j:jo(e),y=h?j:jo(t),w=(p=p==O?L:p)==L,x=(y=y==O?L:y)==L,_=p==y;if(_&&ss(e)){if(!ss(t))return!1;d=!0,w=!1}if(_&&!w)return f||(f=new lr),d||xs(e)?mo(e,t,n,r,l,f):function(e,t,n,r,a,l,f){switch(n){case V:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case z:return!(e.byteLength!=t.byteLength||!l(new nt(e),new nt(t)));case T:case A:case M:return Qa(+e,+t);case P:return e.name==t.name&&e.message==t.message;case F:case B:return e==t+"";case I:var d=xn;case q:var h=1&r;if(d||(d=kn),e.size!=t.size&&!h)return!1;var p=f.get(e);if(p)return p==t;r|=2,f.set(e,t);var y=mo(d(e),d(t),r,a,l,f);return f.delete(e),y;case U:if(Xn)return Xn.call(e)==Xn.call(t)}return!1}(e,t,p,n,r,l,f);if(!(1&n)){var S=w&&Ze.call(e,"__wrapped__"),k=x&&Ze.call(t,"__wrapped__");if(S||k){var C=S?e.value():e,E=k?t.value():t;return f||(f=new lr),l(C,E,n,r,f)}}if(!_)return!1;return f||(f=new lr),function(e,t,n,r,l,f){var d=1&n,h=vo(e),p=h.length,y=vo(t),w=y.length;if(p!=w&&!d)return!1;var x=p;for(;x--;){var _=h[x];if(!(d?_ in t:Ze.call(t,_)))return!1}var S=f.get(e),k=f.get(t);if(S&&k)return S==t&&k==e;var C=!0;f.set(e,t),f.set(t,e);var E=d;for(;++x<p;){var O=e[_=h[x]],j=t[_];if(r)var T=d?r(j,O,_,t,e,f):r(O,j,_,e,t,f);if(!(T===a?O===j||l(O,j,n,r,f):T)){C=!1;break}E||(E="constructor"==_)}if(C&&!E){var A=e.constructor,P=t.constructor;A==P||!("constructor"in e)||!("constructor"in t)||"function"==typeof A&&A instanceof A&&"function"==typeof P&&P instanceof P||(C=!1)}return f.delete(e),f.delete(t),C}(e,t,n,r,l,f)}(e,t,n,r,Vr,l))}function Wr(e,t,n,r){var l=n.length,f=l,d=!r;if(null==e)return!f;for(e=Ne(e);l--;){var h=n[l];if(d&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++l<f;){var p=(h=n[l])[0],y=e[p],w=h[1];if(d&&h[2]){if(y===a&&!(p in e))return!1}else{var x=new lr;if(r)var _=r(y,w,p,e,t,x);if(!(_===a?Vr(w,y,3,r,x):_))return!1}}return!0}function Zr(e){return!(!ds(e)||(t=e,Ke&&Ke in t))&&(cs(e)?Qe:$e).test(Xo(e));var t}function Gr(e){return"function"==typeof e?e:null==e?ml:"object"==typeof e?rs(e)?ei(e[0],e[1]):Qr(e):kl(e)}function Kr(e){if(!Lo(e))return an(e);var t=[];for(var n in Ne(e))Ze.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Yr(e){if(!ds(e))return function(e){var t=[];if(null!=e)for(var n in Ne(e))t.push(n);return t}(e);var t=Lo(e),n=[];for(var r in e)("constructor"!=r||!t&&Ze.call(e,r))&&n.push(r);return n}function Xr(e,t){return e<t}function Jr(e,t){var n=-1,a=os(e)?r(e.length):[];return Cr(e,(function(e,r,l){a[++n]=t(e,r,l)})),a}function Qr(e){var t=ko(e);return 1==t.length&&t[0][2]?Fo(t[0][0],t[0][1]):function(n){return n===e||Wr(n,e,t)}}function ei(e,t){return Ro(e)&&No(t)?Fo(Yo(e),t):function(n){var r=Ns(n,e);return r===a&&r===t?Fs(n,e):Vr(t,r,3)}}function ti(e,t,n,r,l){e!==t&&Ar(t,(function(f,d){if(l||(l=new lr),ds(f))!function(e,t,n,r,l,f,d){var h=Uo(e,n),p=Uo(t,n),y=d.get(p);if(y)return void hr(e,n,y);var w=f?f(h,p,n+"",e,t,d):a,x=w===a;if(x){var _=rs(p),S=!_&&ss(p),k=!_&&!S&&xs(p);w=p,_||S||k?rs(h)?w=h:as(h)?w=Ui(h):S?(x=!1,w=Mi(p,!0)):k?(x=!1,w=Ni(p,!0)):w=[]:gs(p)||ns(p)?(w=h,ns(h)?w=$s(h):ds(h)&&!cs(h)||(w=To(p))):x=!1}x&&(d.set(p,w),l(w,p,r,f,d),d.delete(p));hr(e,n,w)}(e,t,d,n,ti,r,l);else{var h=r?r(Uo(e,d),f,d+"",e,t,l):a;h===a&&(h=f),hr(e,d,h)}}),zs)}function ni(e,t){var n=e.length;if(n)return Po(t+=t<0?n:0,n)?e[t]:a}function ri(e,t,n){t=t.length?Wt(t,(function(e){return rs(e)?function(t){return Mr(t,1===e.length?e[0]:e)}:e})):[ml];var r=-1;t=Wt(t,dn(_o()));var a=Jr(e,(function(e,n,a){var l=Wt(t,(function(t){return t(e)}));return{criteria:l,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(a,(function(e,t){return function(e,t,n){var r=-1,a=e.criteria,l=t.criteria,f=a.length,d=n.length;for(;++r<f;){var h=Fi(a[r],l[r]);if(h)return r>=d?h:h*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function ii(e,t,n){for(var r=-1,a=t.length,l={};++r<a;){var f=t[r],d=Mr(e,f);n(d,f)&&di(l,Pi(f,e),d)}return l}function oi(e,t,n,r){var a=r?tn:en,l=-1,f=t.length,d=e;for(e===t&&(t=Ui(t)),n&&(d=Wt(e,dn(n)));++l<f;)for(var h=0,p=t[l],y=n?n(p):p;(h=a(d,y,h,r))>-1;)d!==e&&st.call(d,h,1),st.call(e,h,1);return e}function ai(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==l){var l=a;Po(a)?st.call(e,a,1):ki(e,a)}}return e}function si(e,t){return e+Ot(In()*(t-e+1))}function li(e,t){var n="";if(!e||t<1||t>S)return n;do{t%2&&(n+=e),(t=Ot(t/2))&&(e+=e)}while(t);return n}function ci(e,t){return Vo(qo(e,t,ml),e+"")}function ui(e){return ur(Js(e))}function fi(e,t){var n=Js(e);return Go(n,wr(t,0,n.length))}function di(e,t,n,r){if(!ds(e))return e;for(var l=-1,f=(t=Pi(t,e)).length,d=f-1,h=e;null!=h&&++l<f;){var p=Yo(t[l]),y=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(l!=d){var w=h[p];(y=r?r(w,p,h):a)===a&&(y=ds(w)?w:Po(t[l+1])?[]:{})}pr(h,p,y),h=h[p]}return e}var hi=Hn?function(e,t){return Hn.set(e,t),e}:ml,pi=ht?function(e,t){return ht(e,"toString",{configurable:!0,enumerable:!1,value:dl(t),writable:!0})}:ml;function mi(e){return Go(Js(e))}function gi(e,t,n){var a=-1,l=e.length;t<0&&(t=-t>l?0:l+t),(n=n>l?l:n)<0&&(n+=l),l=t>n?0:n-t>>>0,t>>>=0;for(var f=r(l);++a<l;)f[a]=e[a+t];return f}function vi(e,t){var n;return Cr(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}function yi(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;r<a;){var l=r+a>>>1,f=e[l];null!==f&&!ws(f)&&(n?f<=t:f<t)?r=l+1:a=l}return a}return bi(e,t,ml,n)}function bi(e,t,n,r){var l=0,f=null==e?0:e.length;if(0===f)return 0;for(var d=(t=n(t))!=t,h=null===t,p=ws(t),y=t===a;l<f;){var w=Ot((l+f)/2),x=n(e[w]),_=x!==a,S=null===x,k=x==x,C=ws(x);if(d)var E=r||k;else E=y?k&&(r||_):h?k&&_&&(r||!S):p?k&&_&&!S&&(r||!C):!S&&!C&&(r?x<=t:x<t);E?l=w+1:f=w}return Pn(f,4294967294)}function wi(e,t){for(var n=-1,r=e.length,a=0,l=[];++n<r;){var f=e[n],d=t?t(f):f;if(!n||!Qa(d,h)){var h=d;l[a++]=0===f?0:f}}return l}function xi(e){return"number"==typeof e?e:ws(e)?k:+e}function _i(e){if("string"==typeof e)return e;if(rs(e))return Wt(e,_i)+"";if(ws(e))return Jn?Jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Si(e,t,n){var r=-1,a=zt,l=e.length,f=!0,d=[],h=d;if(n)f=!1,a=Vt;else if(l>=200){var p=t?null:lo(e);if(p)return kn(p);f=!1,a=pn,h=new sr}else h=t?[]:d;e:for(;++r<l;){var y=e[r],w=t?t(y):y;if(y=n||0!==y?y:0,f&&w==w){for(var x=h.length;x--;)if(h[x]===w)continue e;t&&h.push(w),d.push(y)}else a(h,w,n)||(h!==d&&h.push(w),d.push(y))}return d}function ki(e,t){return null==(e=Bo(e,t=Pi(t,e)))||delete e[Yo(ca(t))]}function Ci(e,t,n,r){return di(e,t,n(Mr(e,t)),r)}function Ei(e,t,n,r){for(var a=e.length,l=r?a:-1;(r?l--:++l<a)&&t(e[l],l,e););return n?gi(e,r?0:l,r?l+1:a):gi(e,r?l+1:0,r?a:l)}function Oi(e,t){var n=e;return n instanceof rr&&(n=n.value()),Gt(t,(function(e,t){return t.func.apply(t.thisArg,Zt([e],t.args))}),n)}function ji(e,t,n){var a=e.length;if(a<2)return a?Si(e[0]):[];for(var l=-1,f=r(a);++l<a;)for(var d=e[l],h=-1;++h<a;)h!=l&&(f[l]=kr(f[l]||d,e[h],t,n));return Si(Tr(f,1),t,n)}function $i(e,t,n){for(var r=-1,l=e.length,f=t.length,d={};++r<l;){var h=r<f?t[r]:a;n(d,e[r],h)}return d}function Ti(e){return as(e)?e:[]}function Ai(e){return"function"==typeof e?e:ml}function Pi(e,t){return rs(e)?e:Ro(e,t)?[e]:Ko(Ts(e))}var Di=ci;function Ri(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:gi(e,t,n)}var Ii=mt||function(e){return Et.clearTimeout(e)};function Mi(e,t){if(t)return e.slice();var n=e.length,r=rt?rt(n):new e.constructor(n);return e.copy(r),r}function Li(e){var t=new e.constructor(e.byteLength);return new nt(t).set(new nt(e)),t}function Ni(e,t){var n=t?Li(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Fi(e,t){if(e!==t){var n=e!==a,r=null===e,l=e==e,f=ws(e),d=t!==a,h=null===t,p=t==t,y=ws(t);if(!h&&!y&&!f&&e>t||f&&d&&p&&!h&&!y||r&&d&&p||!n&&p||!l)return 1;if(!r&&!f&&!y&&e<t||y&&n&&l&&!r&&!f||h&&n&&l||!d&&l||!p)return-1}return 0}function qi(e,t,n,a){for(var l=-1,f=e.length,d=n.length,h=-1,p=t.length,y=An(f-d,0),w=r(p+y),x=!a;++h<p;)w[h]=t[h];for(;++l<d;)(x||l<f)&&(w[n[l]]=e[l]);for(;y--;)w[h++]=e[l++];return w}function Bi(e,t,n,a){for(var l=-1,f=e.length,d=-1,h=n.length,p=-1,y=t.length,w=An(f-h,0),x=r(w+y),_=!a;++l<w;)x[l]=e[l];for(var S=l;++p<y;)x[S+p]=t[p];for(;++d<h;)(_||l<f)&&(x[S+n[d]]=e[l++]);return x}function Ui(e,t){var n=-1,a=e.length;for(t||(t=r(a));++n<a;)t[n]=e[n];return t}function Hi(e,t,n,r){var l=!n;n||(n={});for(var f=-1,d=t.length;++f<d;){var h=t[f],p=r?r(n[h],e[h],h,n,e):a;p===a&&(p=e[h]),l?yr(n,h,p):pr(n,h,p)}return n}function zi(e,t){return function(n,r){var a=rs(n)?Ft:gr,l=t?t():{};return a(n,e,_o(r,2),l)}}function Vi(e){return ci((function(t,n){var r=-1,l=n.length,f=l>1?n[l-1]:a,d=l>2?n[2]:a;for(f=e.length>3&&"function"==typeof f?(l--,f):a,d&&Do(n[0],n[1],d)&&(f=l<3?a:f,l=1),t=Ne(t);++r<l;){var h=n[r];h&&e(t,h,r,f)}return t}))}function Wi(e,t){return function(n,r){if(null==n)return n;if(!os(n))return e(n,r);for(var a=n.length,l=t?a:-1,f=Ne(n);(t?l--:++l<a)&&!1!==r(f[l],l,f););return n}}function Zi(e){return function(t,n,r){for(var a=-1,l=Ne(t),f=r(t),d=f.length;d--;){var h=f[e?d:++a];if(!1===n(l[h],h,l))break}return t}}function Gi(e){return function(t){var n=wn(t=Ts(t))?On(t):a,r=n?n[0]:t.charAt(0),l=n?Ri(n,1).join(""):t.slice(1);return r[e]()+l}}function Ki(e){return function(t){return Gt(cl(tl(t).replace(ft,"")),e,"")}}function Yi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=er(e.prototype),r=e.apply(n,t);return ds(r)?r:n}}function Xi(e){return function(t,n,r){var l=Ne(t);if(!os(t)){var f=_o(n,3);t=Hs(t),n=function(e){return f(l[e],e,l)}}var d=e(t,n,r);return d>-1?l[f?t[d]:d]:a}}function Ji(e){return go((function(t){var n=t.length,r=n,f=nr.prototype.thru;for(e&&t.reverse();r--;){var d=t[r];if("function"!=typeof d)throw new Be(l);if(f&&!h&&"wrapper"==wo(d))var h=new nr([],!0)}for(r=h?r:n;++r<n;){var p=wo(d=t[r]),y="wrapper"==p?bo(d):a;h=y&&Io(y[0])&&424==y[1]&&!y[4].length&&1==y[9]?h[wo(y[0])].apply(h,y[3]):1==d.length&&Io(d)?h[p]():h.thru(d)}return function(){var e=arguments,r=e[0];if(h&&1==e.length&&rs(r))return h.plant(r).value();for(var a=0,l=n?t[a].apply(this,e):r;++a<n;)l=t[a].call(this,l);return l}}))}function Qi(e,t,n,l,f,d,h,p,y,x){var _=t&w,S=1&t,k=2&t,C=24&t,E=512&t,O=k?a:Yi(e);return function w(){for(var j=arguments.length,T=r(j),A=j;A--;)T[A]=arguments[A];if(C)var P=xo(w),D=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(T,P);if(l&&(T=qi(T,l,f,C)),d&&(T=Bi(T,d,h,C)),j-=D,C&&j<x){var R=Sn(T,P);return ao(e,t,Qi,w.placeholder,n,T,R,p,y,x-j)}var I=S?n:this,M=k?I[e]:e;return j=T.length,p?T=function(e,t){var n=e.length,r=Pn(t.length,n),l=Ui(e);for(;r--;){var f=t[r];e[r]=Po(f,n)?l[f]:a}return e}(T,p):E&&j>1&&T.reverse(),_&&y<j&&(T.length=y),this&&this!==Et&&this instanceof w&&(M=O||Yi(M)),M.apply(I,T)}}function eo(e,t){return function(n,r){return function(e,t,n,r){return Dr(e,(function(e,a,l){t(r,n(e),a,l)})),r}(n,e,t(r),{})}}function to(e,t){return function(n,r){var l;if(n===a&&r===a)return t;if(n!==a&&(l=n),r!==a){if(l===a)return r;"string"==typeof n||"string"==typeof r?(n=_i(n),r=_i(r)):(n=xi(n),r=xi(r)),l=e(n,r)}return l}}function no(e){return go((function(t){return t=Wt(t,dn(_o())),ci((function(n){var r=this;return e(t,(function(e){return Nt(e,r,n)}))}))}))}function ro(e,t){var n=(t=t===a?" ":_i(t)).length;if(n<2)return n?li(t,e):t;var r=li(t,Ct(e/En(t)));return wn(t)?Ri(On(r),0,e).join(""):r.slice(0,e)}function io(e){return function(t,n,l){return l&&"number"!=typeof l&&Do(t,n,l)&&(n=l=a),t=Cs(t),n===a?(n=t,t=0):n=Cs(n),function(e,t,n,a){for(var l=-1,f=An(Ct((t-e)/(n||1)),0),d=r(f);f--;)d[a?f:++l]=e,e+=n;return d}(t,n,l=l===a?t<n?1:-1:Cs(l),e)}}function oo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=js(t),n=js(n)),e(t,n)}}function ao(e,t,n,r,l,f,d,h,w,x){var _=8&t;t|=_?p:y,4&(t&=~(_?y:p))||(t&=-4);var S=[e,t,l,_?f:a,_?d:a,_?a:f,_?a:d,h,w,x],k=n.apply(a,S);return Io(e)&&Ho(k,S),k.placeholder=r,Wo(k,e,t)}function so(e){var t=Le[e];return function(e,n){if(e=js(e),(n=null==n?0:Pn(Es(n),292))&&At(e)){var r=(Ts(e)+"e").split("e");return+((r=(Ts(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var lo=qn&&1/kn(new qn([,-0]))[1]==_?function(e){return new qn(e)}:wl;function co(e){return function(t){var n=jo(t);return n==I?xn(t):n==q?Cn(t):function(e,t){return Wt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function uo(e,t,n,f,_,S,k,C){var E=2&t;if(!E&&"function"!=typeof e)throw new Be(l);var O=f?f.length:0;if(O||(t&=-97,f=_=a),k=k===a?k:An(Es(k),0),C=C===a?C:Es(C),O-=_?_.length:0,t&y){var j=f,T=_;f=_=a}var A=E?a:bo(e),P=[e,t,n,f,_,j,T,S,k,C];if(A&&function(e,t){var n=e[1],r=t[1],a=n|r,l=a<131,f=r==w&&8==n||r==w&&n==x&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!l&&!f)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var h=t[3];if(h){var p=e[3];e[3]=p?qi(p,h,t[4]):h,e[4]=p?Sn(e[3],d):t[4]}(h=t[5])&&(p=e[5],e[5]=p?Bi(p,h,t[6]):h,e[6]=p?Sn(e[5],d):t[6]);(h=t[7])&&(e[7]=h);r&w&&(e[8]=null==e[8]?t[8]:Pn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(P,A),e=P[0],t=P[1],n=P[2],f=P[3],_=P[4],!(C=P[9]=P[9]===a?E?0:e.length:An(P[9]-O,0))&&24&t&&(t&=-25),t&&1!=t)D=8==t||t==h?function(e,t,n){var l=Yi(e);return function f(){for(var d=arguments.length,h=r(d),p=d,y=xo(f);p--;)h[p]=arguments[p];var w=d<3&&h[0]!==y&&h[d-1]!==y?[]:Sn(h,y);return(d-=w.length)<n?ao(e,t,Qi,f.placeholder,a,h,w,a,a,n-d):Nt(this&&this!==Et&&this instanceof f?l:e,this,h)}}(e,t,C):t!=p&&33!=t||_.length?Qi.apply(a,P):function(e,t,n,a){var l=1&t,f=Yi(e);return function t(){for(var d=-1,h=arguments.length,p=-1,y=a.length,w=r(y+h),x=this&&this!==Et&&this instanceof t?f:e;++p<y;)w[p]=a[p];for(;h--;)w[p++]=arguments[++d];return Nt(x,l?n:this,w)}}(e,t,n,f);else var D=function(e,t,n){var r=1&t,a=Yi(e);return function t(){return(this&&this!==Et&&this instanceof t?a:e).apply(r?n:this,arguments)}}(e,t,n);return Wo((A?hi:Ho)(D,P),e,t)}function fo(e,t,n,r){return e===a||Qa(e,ze[n])&&!Ze.call(r,n)?t:e}function ho(e,t,n,r,l,f){return ds(e)&&ds(t)&&(f.set(t,e),ti(e,t,a,ho,f),f.delete(t)),e}function po(e){return gs(e)?a:e}function mo(e,t,n,r,l,f){var d=1&n,h=e.length,p=t.length;if(h!=p&&!(d&&p>h))return!1;var y=f.get(e),w=f.get(t);if(y&&w)return y==t&&w==e;var x=-1,_=!0,S=2&n?new sr:a;for(f.set(e,t),f.set(t,e);++x<h;){var k=e[x],C=t[x];if(r)var E=d?r(C,k,x,t,e,f):r(k,C,x,e,t,f);if(E!==a){if(E)continue;_=!1;break}if(S){if(!Yt(t,(function(e,t){if(!pn(S,t)&&(k===e||l(k,e,n,r,f)))return S.push(t)}))){_=!1;break}}else if(k!==C&&!l(k,C,n,r,f)){_=!1;break}}return f.delete(e),f.delete(t),_}function go(e){return Vo(qo(e,a,ia),e+"")}function vo(e){return Lr(e,Hs,Eo)}function yo(e){return Lr(e,zs,Oo)}var bo=Hn?function(e){return Hn.get(e)}:wl;function wo(e){for(var t=e.name+"",n=zn[t],r=Ze.call(zn,t)?n.length:0;r--;){var a=n[r],l=a.func;if(null==l||l==e)return a.name}return t}function xo(e){return(Ze.call(Qn,"placeholder")?Qn:e).placeholder}function _o(){var e=Qn.iteratee||gl;return e=e===gl?Gr:e,arguments.length?e(arguments[0],arguments[1]):e}function So(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function ko(e){for(var t=Hs(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,No(a)]}return t}function Co(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return Zr(n)?n:a}var Eo=jt?function(e){return null==e?[]:(e=Ne(e),Ht(jt(e),(function(t){return at.call(e,t)})))}:Ol,Oo=jt?function(e){for(var t=[];e;)Zt(t,Eo(e)),e=it(e);return t}:Ol,jo=Nr;function $o(e,t,n){for(var r=-1,a=(t=Pi(t,e)).length,l=!1;++r<a;){var f=Yo(t[r]);if(!(l=null!=e&&n(e,f)))break;e=e[f]}return l||++r!=a?l:!!(a=null==e?0:e.length)&&fs(a)&&Po(f,a)&&(rs(e)||ns(e))}function To(e){return"function"!=typeof e.constructor||Lo(e)?{}:er(it(e))}function Ao(e){return rs(e)||ns(e)||!!(lt&&e&&e[lt])}function Po(e,t){var n=typeof e;return!!(t=null==t?S:t)&&("number"==n||"symbol"!=n&&Ae.test(e))&&e>-1&&e%1==0&&e<t}function Do(e,t,n){if(!ds(n))return!1;var r=typeof t;return!!("number"==r?os(n)&&Po(t,n.length):"string"==r&&t in n)&&Qa(n[t],e)}function Ro(e,t){if(rs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ws(e))||(he.test(e)||!de.test(e)||null!=t&&e in Ne(t))}function Io(e){var t=wo(e),n=Qn[t];if("function"!=typeof n||!(t in rr.prototype))return!1;if(e===n)return!0;var r=bo(n);return!!r&&e===r[0]}(Ln&&jo(new Ln(new ArrayBuffer(1)))!=V||Nn&&jo(new Nn)!=I||Fn&&jo(Fn.resolve())!=N||qn&&jo(new qn)!=q||Bn&&jo(new Bn)!=H)&&(jo=function(e){var t=Nr(e),n=t==L?e.constructor:a,r=n?Xo(n):"";if(r)switch(r){case Vn:return V;case Wn:return I;case Zn:return N;case Gn:return q;case Kn:return H}return t});var Mo=Ve?cs:jl;function Lo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ze)}function No(e){return e==e&&!ds(e)}function Fo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==a||e in Ne(n)))}}function qo(e,t,n){return t=An(t===a?e.length-1:t,0),function(){for(var a=arguments,l=-1,f=An(a.length-t,0),d=r(f);++l<f;)d[l]=a[t+l];l=-1;for(var h=r(t+1);++l<t;)h[l]=a[l];return h[t]=n(d),Nt(e,this,h)}}function Bo(e,t){return t.length<2?e:Mr(e,gi(t,0,-1))}function Uo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ho=Zo(hi),zo=kt||function(e,t){return Et.setTimeout(e,t)},Vo=Zo(pi);function Wo(e,t,n){var r=t+"";return Vo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(be,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return qt(E,(function(n){var r="_."+n[0];t&n[1]&&!zt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(we);return t?t[1].split(xe):[]}(r),n)))}function Zo(e){var t=0,n=0;return function(){var r=Dn(),l=16-(r-n);if(n=r,l>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Go(e,t){var n=-1,r=e.length,l=r-1;for(t=t===a?r:t;++n<t;){var f=si(n,l),d=e[f];e[f]=e[n],e[n]=d}return e.length=t,e}var Ko=function(e){var t=Za(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(pe,(function(e,n,r,a){t.push(r?a.replace(ke,"$1"):n||e)})),t}));function Yo(e){if("string"==typeof e||ws(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xo(e){if(null!=e){try{return We.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Jo(e){if(e instanceof rr)return e.clone();var t=new nr(e.__wrapped__,e.__chain__);return t.__actions__=Ui(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Qo=ci((function(e,t){return as(e)?kr(e,Tr(t,1,as,!0)):[]})),ea=ci((function(e,t){var n=ca(t);return as(n)&&(n=a),as(e)?kr(e,Tr(t,1,as,!0),_o(n,2)):[]})),ta=ci((function(e,t){var n=ca(t);return as(n)&&(n=a),as(e)?kr(e,Tr(t,1,as,!0),a,n):[]}));function na(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:Es(n);return a<0&&(a=An(r+a,0)),Qt(e,_o(t,3),a)}function ra(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var l=r-1;return n!==a&&(l=Es(n),l=n<0?An(r+l,0):Pn(l,r-1)),Qt(e,_o(t,3),l,!0)}function ia(e){return(null==e?0:e.length)?Tr(e,1):[]}function oa(e){return e&&e.length?e[0]:a}var aa=ci((function(e){var t=Wt(e,Ti);return t.length&&t[0]===e[0]?Ur(t):[]})),sa=ci((function(e){var t=ca(e),n=Wt(e,Ti);return t===ca(n)?t=a:n.pop(),n.length&&n[0]===e[0]?Ur(n,_o(t,2)):[]})),la=ci((function(e){var t=ca(e),n=Wt(e,Ti);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?Ur(n,a,t):[]}));function ca(e){var t=null==e?0:e.length;return t?e[t-1]:a}var ua=ci(fa);function fa(e,t){return e&&e.length&&t&&t.length?oi(e,t):e}var da=go((function(e,t){var n=null==e?0:e.length,r=br(e,t);return ai(e,Wt(t,(function(e){return Po(e,n)?+e:e})).sort(Fi)),r}));function ha(e){return null==e?e:Mn.call(e)}var pa=ci((function(e){return Si(Tr(e,1,as,!0))})),ma=ci((function(e){var t=ca(e);return as(t)&&(t=a),Si(Tr(e,1,as,!0),_o(t,2))})),ga=ci((function(e){var t=ca(e);return t="function"==typeof t?t:a,Si(Tr(e,1,as,!0),a,t)}));function va(e){if(!e||!e.length)return[];var t=0;return e=Ht(e,(function(e){if(as(e))return t=An(e.length,t),!0})),cn(t,(function(t){return Wt(e,on(t))}))}function ya(e,t){if(!e||!e.length)return[];var n=va(e);return null==t?n:Wt(n,(function(e){return Nt(t,a,e)}))}var ba=ci((function(e,t){return as(e)?kr(e,t):[]})),wa=ci((function(e){return ji(Ht(e,as))})),xa=ci((function(e){var t=ca(e);return as(t)&&(t=a),ji(Ht(e,as),_o(t,2))})),_a=ci((function(e){var t=ca(e);return t="function"==typeof t?t:a,ji(Ht(e,as),a,t)})),Sa=ci(va);var ka=ci((function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,ya(e,n)}));function Ca(e){var t=Qn(e);return t.__chain__=!0,t}function Ea(e,t){return t(e)}var Oa=go((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,l=function(t){return br(t,e)};return!(t>1||this.__actions__.length)&&r instanceof rr&&Po(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Ea,args:[l],thisArg:a}),new nr(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(l)}));var ja=zi((function(e,t,n){Ze.call(e,n)?++e[n]:yr(e,n,1)}));var $a=Xi(na),Ta=Xi(ra);function Aa(e,t){return(rs(e)?qt:Cr)(e,_o(t,3))}function Pa(e,t){return(rs(e)?Bt:Er)(e,_o(t,3))}var Da=zi((function(e,t,n){Ze.call(e,n)?e[n].push(t):yr(e,n,[t])}));var Ra=ci((function(e,t,n){var a=-1,l="function"==typeof t,f=os(e)?r(e.length):[];return Cr(e,(function(e){f[++a]=l?Nt(t,e,n):Hr(e,t,n)})),f})),Ia=zi((function(e,t,n){yr(e,n,t)}));function Ma(e,t){return(rs(e)?Wt:Jr)(e,_o(t,3))}var La=zi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Na=ci((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Do(e,t[0],t[1])?t=[]:n>2&&Do(t[0],t[1],t[2])&&(t=[t[0]]),ri(e,Tr(t,1),[])})),Fa=xt||function(){return Et.Date.now()};function qa(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,uo(e,w,a,a,a,a,t)}function Ba(e,t){var n;if("function"!=typeof t)throw new Be(l);return e=Es(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var Ua=ci((function(e,t,n){var r=1;if(n.length){var a=Sn(n,xo(Ua));r|=p}return uo(e,r,t,n,a)})),Ha=ci((function(e,t,n){var r=3;if(n.length){var a=Sn(n,xo(Ha));r|=p}return uo(t,r,e,n,a)}));function za(e,t,n){var r,f,d,h,p,y,w=0,x=!1,_=!1,S=!0;if("function"!=typeof e)throw new Be(l);function k(t){var n=r,l=f;return r=f=a,w=t,h=e.apply(l,n)}function C(e){var n=e-y;return y===a||n>=t||n<0||_&&e-w>=d}function E(){var e=Fa();if(C(e))return O(e);p=zo(E,function(e){var n=t-(e-y);return _?Pn(n,d-(e-w)):n}(e))}function O(e){return p=a,S&&r?k(e):(r=f=a,h)}function j(){var e=Fa(),n=C(e);if(r=arguments,f=this,y=e,n){if(p===a)return function(e){return w=e,p=zo(E,t),x?k(e):h}(y);if(_)return Ii(p),p=zo(E,t),k(y)}return p===a&&(p=zo(E,t)),h}return t=js(t)||0,ds(n)&&(x=!!n.leading,d=(_="maxWait"in n)?An(js(n.maxWait)||0,t):d,S="trailing"in n?!!n.trailing:S),j.cancel=function(){p!==a&&Ii(p),w=0,r=y=f=p=a},j.flush=function(){return p===a?h:O(Fa())},j}var Va=ci((function(e,t){return Sr(e,1,t)})),Wa=ci((function(e,t,n){return Sr(e,js(t)||0,n)}));function Za(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Be(l);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],l=n.cache;if(l.has(a))return l.get(a);var f=e.apply(this,r);return n.cache=l.set(a,f)||l,f};return n.cache=new(Za.Cache||ar),n}function Ga(e){if("function"!=typeof e)throw new Be(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Za.Cache=ar;var Ka=Di((function(e,t){var n=(t=1==t.length&&rs(t[0])?Wt(t[0],dn(_o())):Wt(Tr(t,1),dn(_o()))).length;return ci((function(r){for(var a=-1,l=Pn(r.length,n);++a<l;)r[a]=t[a].call(this,r[a]);return Nt(e,this,r)}))})),Ya=ci((function(e,t){var n=Sn(t,xo(Ya));return uo(e,p,a,t,n)})),Xa=ci((function(e,t){var n=Sn(t,xo(Xa));return uo(e,y,a,t,n)})),Ja=go((function(e,t){return uo(e,x,a,a,a,t)}));function Qa(e,t){return e===t||e!=e&&t!=t}var es=oo(Fr),ts=oo((function(e,t){return e>=t})),ns=zr(function(){return arguments}())?zr:function(e){return hs(e)&&Ze.call(e,"callee")&&!at.call(e,"callee")},rs=r.isArray,is=Pt?dn(Pt):function(e){return hs(e)&&Nr(e)==z};function os(e){return null!=e&&fs(e.length)&&!cs(e)}function as(e){return hs(e)&&os(e)}var ss=Tt||jl,ls=Dt?dn(Dt):function(e){return hs(e)&&Nr(e)==A};function isError(e){if(!hs(e))return!1;var t=Nr(e);return t==P||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!gs(e)}function cs(e){if(!ds(e))return!1;var t=Nr(e);return t==D||t==R||"[object AsyncFunction]"==t||"[object Proxy]"==t}function us(e){return"number"==typeof e&&e==Es(e)}function fs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=S}function ds(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function hs(e){return null!=e&&"object"==typeof e}var ps=Rt?dn(Rt):function(e){return hs(e)&&jo(e)==I};function ms(e){return"number"==typeof e||hs(e)&&Nr(e)==M}function gs(e){if(!hs(e)||Nr(e)!=L)return!1;var t=it(e);if(null===t)return!0;var n=Ze.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&We.call(n)==Xe}var vs=It?dn(It):function(e){return hs(e)&&Nr(e)==F};var ys=Mt?dn(Mt):function(e){return hs(e)&&jo(e)==q};function bs(e){return"string"==typeof e||!rs(e)&&hs(e)&&Nr(e)==B}function ws(e){return"symbol"==typeof e||hs(e)&&Nr(e)==U}var xs=Lt?dn(Lt):function(e){return hs(e)&&fs(e.length)&&!!bt[Nr(e)]};var _s=oo(Xr),Ss=oo((function(e,t){return e<=t}));function ks(e){if(!e)return[];if(os(e))return bs(e)?On(e):Ui(e);if(ct&&e[ct])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[ct]());var t=jo(e);return(t==I?xn:t==q?kn:Js)(e)}function Cs(e){return e?(e=js(e))===_||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Es(e){var t=Cs(e),n=t%1;return t==t?n?t-n:t:0}function Os(e){return e?wr(Es(e),0,C):0}function js(e){if("number"==typeof e)return e;if(ws(e))return k;if(ds(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ds(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=un(e);var n=je.test(e);return n||Te.test(e)?St(e.slice(2),n?2:8):Oe.test(e)?k:+e}function $s(e){return Hi(e,zs(e))}function Ts(e){return null==e?"":_i(e)}var As=Vi((function(e,t){if(Lo(t)||os(t))Hi(t,Hs(t),e);else for(var n in t)Ze.call(t,n)&&pr(e,n,t[n])})),Ps=Vi((function(e,t){Hi(t,zs(t),e)})),Ds=Vi((function(e,t,n,r){Hi(t,zs(t),e,r)})),Rs=Vi((function(e,t,n,r){Hi(t,Hs(t),e,r)})),Is=go(br);var Ms=ci((function(e,t){e=Ne(e);var n=-1,r=t.length,l=r>2?t[2]:a;for(l&&Do(t[0],t[1],l)&&(r=1);++n<r;)for(var f=t[n],d=zs(f),h=-1,p=d.length;++h<p;){var y=d[h],w=e[y];(w===a||Qa(w,ze[y])&&!Ze.call(e,y))&&(e[y]=f[y])}return e})),Ls=ci((function(e){return e.push(a,ho),Nt(Ws,a,e)}));function Ns(e,t,n){var r=null==e?a:Mr(e,t);return r===a?n:r}function Fs(e,t){return null!=e&&$o(e,t,Br)}var qs=eo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ye.call(t)),e[t]=n}),dl(ml)),Bs=eo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ye.call(t)),Ze.call(e,t)?e[t].push(n):e[t]=[n]}),_o),Us=ci(Hr);function Hs(e){return os(e)?cr(e):Kr(e)}function zs(e){return os(e)?cr(e,!0):Yr(e)}var Vs=Vi((function(e,t,n){ti(e,t,n)})),Ws=Vi((function(e,t,n,r){ti(e,t,n,r)})),Zs=go((function(e,t){var n={};if(null==e)return n;var r=!1;t=Wt(t,(function(t){return t=Pi(t,e),r||(r=t.length>1),t})),Hi(e,yo(e),n),r&&(n=xr(n,7,po));for(var a=t.length;a--;)ki(n,t[a]);return n}));var Gs=go((function(e,t){return null==e?{}:function(e,t){return ii(e,t,(function(t,n){return Fs(e,n)}))}(e,t)}));function Ks(e,t){if(null==e)return{};var n=Wt(yo(e),(function(e){return[e]}));return t=_o(t),ii(e,n,(function(e,n){return t(e,n[0])}))}var Ys=co(Hs),Xs=co(zs);function Js(e){return null==e?[]:hn(e,Hs(e))}var Qs=Ki((function(e,t,n){return t=t.toLowerCase(),e+(n?el(t):t)}));function el(e){return ll(Ts(e).toLowerCase())}function tl(e){return(e=Ts(e))&&e.replace(Pe,vn).replace(dt,"")}var nl=Ki((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),rl=Ki((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),il=Gi("toLowerCase");var ol=Ki((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var al=Ki((function(e,t,n){return e+(n?" ":"")+ll(t)}));var sl=Ki((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),ll=Gi("toUpperCase");function cl(e,t,n){return e=Ts(e),(t=n?a:t)===a?function(e){return gt.test(e)}(e)?function(e){return e.match(pt)||[]}(e):function(e){return e.match(_e)||[]}(e):e.match(t)||[]}var ul=ci((function(e,t){try{return Nt(e,a,t)}catch(e){return isError(e)?e:new Ie(e)}})),fl=go((function(e,t){return qt(t,(function(t){t=Yo(t),yr(e,t,Ua(e[t],e))})),e}));function dl(e){return function(){return e}}var hl=Ji(),pl=Ji(!0);function ml(e){return e}function gl(e){return Gr("function"==typeof e?e:xr(e,1))}var vl=ci((function(e,t){return function(n){return Hr(n,e,t)}})),yl=ci((function(e,t){return function(n){return Hr(e,n,t)}}));function bl(e,t,n){var r=Hs(t),a=Ir(t,r);null!=n||ds(t)&&(a.length||!r.length)||(n=t,t=e,e=this,a=Ir(t,Hs(t)));var l=!(ds(n)&&"chain"in n&&!n.chain),f=cs(e);return qt(a,(function(n){var r=t[n];e[n]=r,f&&(e.prototype[n]=function(){var t=this.__chain__;if(l||t){var n=e(this.__wrapped__);return(n.__actions__=Ui(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Zt([this.value()],arguments))})})),e}function wl(){}var xl=no(Wt),_l=no(Ut),Sl=no(Yt);function kl(e){return Ro(e)?on(Yo(e)):function(e){return function(t){return Mr(t,e)}}(e)}var Cl=io(),El=io(!0);function Ol(){return[]}function jl(){return!1}var $l=to((function(e,t){return e+t}),0),Tl=so("ceil"),Al=to((function(e,t){return e/t}),1),Pl=so("floor");var Dl,Rl=to((function(e,t){return e*t}),1),Il=so("round"),Ml=to((function(e,t){return e-t}),0);return Qn.after=function(e,t){if("function"!=typeof t)throw new Be(l);return e=Es(e),function(){if(--e<1)return t.apply(this,arguments)}},Qn.ary=qa,Qn.assign=As,Qn.assignIn=Ps,Qn.assignInWith=Ds,Qn.assignWith=Rs,Qn.at=Is,Qn.before=Ba,Qn.bind=Ua,Qn.bindAll=fl,Qn.bindKey=Ha,Qn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return rs(e)?e:[e]},Qn.chain=Ca,Qn.chunk=function(e,t,n){t=(n?Do(e,t,n):t===a)?1:An(Es(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var f=0,d=0,h=r(Ct(l/t));f<l;)h[d++]=gi(e,f,f+=t);return h},Qn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var l=e[t];l&&(a[r++]=l)}return a},Qn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Zt(rs(n)?Ui(n):[n],Tr(t,1))},Qn.cond=function(e){var t=null==e?0:e.length,n=_o();return e=t?Wt(e,(function(e){if("function"!=typeof e[1])throw new Be(l);return[n(e[0]),e[1]]})):[],ci((function(n){for(var r=-1;++r<t;){var a=e[r];if(Nt(a[0],this,n))return Nt(a[1],this,n)}}))},Qn.conforms=function(e){return function(e){var t=Hs(e);return function(n){return _r(n,e,t)}}(xr(e,1))},Qn.constant=dl,Qn.countBy=ja,Qn.create=function(e,t){var n=er(e);return null==t?n:vr(n,t)},Qn.curry=function e(t,n,r){var l=uo(t,8,a,a,a,a,a,n=r?a:n);return l.placeholder=e.placeholder,l},Qn.curryRight=function e(t,n,r){var l=uo(t,h,a,a,a,a,a,n=r?a:n);return l.placeholder=e.placeholder,l},Qn.debounce=za,Qn.defaults=Ms,Qn.defaultsDeep=Ls,Qn.defer=Va,Qn.delay=Wa,Qn.difference=Qo,Qn.differenceBy=ea,Qn.differenceWith=ta,Qn.drop=function(e,t,n){var r=null==e?0:e.length;return r?gi(e,(t=n||t===a?1:Es(t))<0?0:t,r):[]},Qn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?gi(e,0,(t=r-(t=n||t===a?1:Es(t)))<0?0:t):[]},Qn.dropRightWhile=function(e,t){return e&&e.length?Ei(e,_o(t,3),!0,!0):[]},Qn.dropWhile=function(e,t){return e&&e.length?Ei(e,_o(t,3),!0):[]},Qn.fill=function(e,t,n,r){var l=null==e?0:e.length;return l?(n&&"number"!=typeof n&&Do(e,t,n)&&(n=0,r=l),function(e,t,n,r){var l=e.length;for((n=Es(n))<0&&(n=-n>l?0:l+n),(r=r===a||r>l?l:Es(r))<0&&(r+=l),r=n>r?0:Os(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Qn.filter=function(e,t){return(rs(e)?Ht:$r)(e,_o(t,3))},Qn.flatMap=function(e,t){return Tr(Ma(e,t),1)},Qn.flatMapDeep=function(e,t){return Tr(Ma(e,t),_)},Qn.flatMapDepth=function(e,t,n){return n=n===a?1:Es(n),Tr(Ma(e,t),n)},Qn.flatten=ia,Qn.flattenDeep=function(e){return(null==e?0:e.length)?Tr(e,_):[]},Qn.flattenDepth=function(e,t){return(null==e?0:e.length)?Tr(e,t=t===a?1:Es(t)):[]},Qn.flip=function(e){return uo(e,512)},Qn.flow=hl,Qn.flowRight=pl,Qn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},Qn.functions=function(e){return null==e?[]:Ir(e,Hs(e))},Qn.functionsIn=function(e){return null==e?[]:Ir(e,zs(e))},Qn.groupBy=Da,Qn.initial=function(e){return(null==e?0:e.length)?gi(e,0,-1):[]},Qn.intersection=aa,Qn.intersectionBy=sa,Qn.intersectionWith=la,Qn.invert=qs,Qn.invertBy=Bs,Qn.invokeMap=Ra,Qn.iteratee=gl,Qn.keyBy=Ia,Qn.keys=Hs,Qn.keysIn=zs,Qn.map=Ma,Qn.mapKeys=function(e,t){var n={};return t=_o(t,3),Dr(e,(function(e,r,a){yr(n,t(e,r,a),e)})),n},Qn.mapValues=function(e,t){var n={};return t=_o(t,3),Dr(e,(function(e,r,a){yr(n,r,t(e,r,a))})),n},Qn.matches=function(e){return Qr(xr(e,1))},Qn.matchesProperty=function(e,t){return ei(e,xr(t,1))},Qn.memoize=Za,Qn.merge=Vs,Qn.mergeWith=Ws,Qn.method=vl,Qn.methodOf=yl,Qn.mixin=bl,Qn.negate=Ga,Qn.nthArg=function(e){return e=Es(e),ci((function(t){return ni(t,e)}))},Qn.omit=Zs,Qn.omitBy=function(e,t){return Ks(e,Ga(_o(t)))},Qn.once=function(e){return Ba(2,e)},Qn.orderBy=function(e,t,n,r){return null==e?[]:(rs(t)||(t=null==t?[]:[t]),rs(n=r?a:n)||(n=null==n?[]:[n]),ri(e,t,n))},Qn.over=xl,Qn.overArgs=Ka,Qn.overEvery=_l,Qn.overSome=Sl,Qn.partial=Ya,Qn.partialRight=Xa,Qn.partition=La,Qn.pick=Gs,Qn.pickBy=Ks,Qn.property=kl,Qn.propertyOf=function(e){return function(t){return null==e?a:Mr(e,t)}},Qn.pull=ua,Qn.pullAll=fa,Qn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?oi(e,t,_o(n,2)):e},Qn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?oi(e,t,a,n):e},Qn.pullAt=da,Qn.range=Cl,Qn.rangeRight=El,Qn.rearg=Ja,Qn.reject=function(e,t){return(rs(e)?Ht:$r)(e,Ga(_o(t,3)))},Qn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],l=e.length;for(t=_o(t,3);++r<l;){var f=e[r];t(f,r,e)&&(n.push(f),a.push(r))}return ai(e,a),n},Qn.rest=function(e,t){if("function"!=typeof e)throw new Be(l);return ci(e,t=t===a?t:Es(t))},Qn.reverse=ha,Qn.sampleSize=function(e,t,n){return t=(n?Do(e,t,n):t===a)?1:Es(t),(rs(e)?fr:fi)(e,t)},Qn.set=function(e,t,n){return null==e?e:di(e,t,n)},Qn.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:di(e,t,n,r)},Qn.shuffle=function(e){return(rs(e)?dr:mi)(e)},Qn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Do(e,t,n)?(t=0,n=r):(t=null==t?0:Es(t),n=n===a?r:Es(n)),gi(e,t,n)):[]},Qn.sortBy=Na,Qn.sortedUniq=function(e){return e&&e.length?wi(e):[]},Qn.sortedUniqBy=function(e,t){return e&&e.length?wi(e,_o(t,2)):[]},Qn.split=function(e,t,n){return n&&"number"!=typeof n&&Do(e,t,n)&&(t=n=a),(n=n===a?C:n>>>0)?(e=Ts(e))&&("string"==typeof t||null!=t&&!vs(t))&&!(t=_i(t))&&wn(e)?Ri(On(e),0,n):e.split(t,n):[]},Qn.spread=function(e,t){if("function"!=typeof e)throw new Be(l);return t=null==t?0:An(Es(t),0),ci((function(n){var r=n[t],a=Ri(n,0,t);return r&&Zt(a,r),Nt(e,this,a)}))},Qn.tail=function(e){var t=null==e?0:e.length;return t?gi(e,1,t):[]},Qn.take=function(e,t,n){return e&&e.length?gi(e,0,(t=n||t===a?1:Es(t))<0?0:t):[]},Qn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?gi(e,(t=r-(t=n||t===a?1:Es(t)))<0?0:t,r):[]},Qn.takeRightWhile=function(e,t){return e&&e.length?Ei(e,_o(t,3),!1,!0):[]},Qn.takeWhile=function(e,t){return e&&e.length?Ei(e,_o(t,3)):[]},Qn.tap=function(e,t){return t(e),e},Qn.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new Be(l);return ds(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),za(e,t,{leading:r,maxWait:t,trailing:a})},Qn.thru=Ea,Qn.toArray=ks,Qn.toPairs=Ys,Qn.toPairsIn=Xs,Qn.toPath=function(e){return rs(e)?Wt(e,Yo):ws(e)?[e]:Ui(Ko(Ts(e)))},Qn.toPlainObject=$s,Qn.transform=function(e,t,n){var r=rs(e),a=r||ss(e)||xs(e);if(t=_o(t,4),null==n){var l=e&&e.constructor;n=a?r?new l:[]:ds(e)&&cs(l)?er(it(e)):{}}return(a?qt:Dr)(e,(function(e,r,a){return t(n,e,r,a)})),n},Qn.unary=function(e){return qa(e,1)},Qn.union=pa,Qn.unionBy=ma,Qn.unionWith=ga,Qn.uniq=function(e){return e&&e.length?Si(e):[]},Qn.uniqBy=function(e,t){return e&&e.length?Si(e,_o(t,2)):[]},Qn.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?Si(e,a,t):[]},Qn.unset=function(e,t){return null==e||ki(e,t)},Qn.unzip=va,Qn.unzipWith=ya,Qn.update=function(e,t,n){return null==e?e:Ci(e,t,Ai(n))},Qn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:Ci(e,t,Ai(n),r)},Qn.values=Js,Qn.valuesIn=function(e){return null==e?[]:hn(e,zs(e))},Qn.without=ba,Qn.words=cl,Qn.wrap=function(e,t){return Ya(Ai(t),e)},Qn.xor=wa,Qn.xorBy=xa,Qn.xorWith=_a,Qn.zip=Sa,Qn.zipObject=function(e,t){return $i(e||[],t||[],pr)},Qn.zipObjectDeep=function(e,t){return $i(e||[],t||[],di)},Qn.zipWith=ka,Qn.entries=Ys,Qn.entriesIn=Xs,Qn.extend=Ps,Qn.extendWith=Ds,bl(Qn,Qn),Qn.add=$l,Qn.attempt=ul,Qn.camelCase=Qs,Qn.capitalize=el,Qn.ceil=Tl,Qn.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=js(n))==n?n:0),t!==a&&(t=(t=js(t))==t?t:0),wr(js(e),t,n)},Qn.clone=function(e){return xr(e,4)},Qn.cloneDeep=function(e){return xr(e,5)},Qn.cloneDeepWith=function(e,t){return xr(e,5,t="function"==typeof t?t:a)},Qn.cloneWith=function(e,t){return xr(e,4,t="function"==typeof t?t:a)},Qn.conformsTo=function(e,t){return null==t||_r(e,t,Hs(t))},Qn.deburr=tl,Qn.defaultTo=function(e,t){return null==e||e!=e?t:e},Qn.divide=Al,Qn.endsWith=function(e,t,n){e=Ts(e),t=_i(t);var r=e.length,l=n=n===a?r:wr(Es(n),0,r);return(n-=t.length)>=0&&e.slice(n,l)==t},Qn.eq=Qa,Qn.escape=function(e){return(e=Ts(e))&&le.test(e)?e.replace(ae,yn):e},Qn.escapeRegExp=function(e){return(e=Ts(e))&&ge.test(e)?e.replace(me,"\\$&"):e},Qn.every=function(e,t,n){var r=rs(e)?Ut:Or;return n&&Do(e,t,n)&&(t=a),r(e,_o(t,3))},Qn.find=$a,Qn.findIndex=na,Qn.findKey=function(e,t){return Jt(e,_o(t,3),Dr)},Qn.findLast=Ta,Qn.findLastIndex=ra,Qn.findLastKey=function(e,t){return Jt(e,_o(t,3),Rr)},Qn.floor=Pl,Qn.forEach=Aa,Qn.forEachRight=Pa,Qn.forIn=function(e,t){return null==e?e:Ar(e,_o(t,3),zs)},Qn.forInRight=function(e,t){return null==e?e:Pr(e,_o(t,3),zs)},Qn.forOwn=function(e,t){return e&&Dr(e,_o(t,3))},Qn.forOwnRight=function(e,t){return e&&Rr(e,_o(t,3))},Qn.get=Ns,Qn.gt=es,Qn.gte=ts,Qn.has=function(e,t){return null!=e&&$o(e,t,qr)},Qn.hasIn=Fs,Qn.head=oa,Qn.identity=ml,Qn.includes=function(e,t,n,r){e=os(e)?e:Js(e),n=n&&!r?Es(n):0;var a=e.length;return n<0&&(n=An(a+n,0)),bs(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&en(e,t,n)>-1},Qn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:Es(n);return a<0&&(a=An(r+a,0)),en(e,t,a)},Qn.inRange=function(e,t,n){return t=Cs(t),n===a?(n=t,t=0):n=Cs(n),function(e,t,n){return e>=Pn(t,n)&&e<An(t,n)}(e=js(e),t,n)},Qn.invoke=Us,Qn.isArguments=ns,Qn.isArray=rs,Qn.isArrayBuffer=is,Qn.isArrayLike=os,Qn.isArrayLikeObject=as,Qn.isBoolean=function(e){return!0===e||!1===e||hs(e)&&Nr(e)==T},Qn.isBuffer=ss,Qn.isDate=ls,Qn.isElement=function(e){return hs(e)&&1===e.nodeType&&!gs(e)},Qn.isEmpty=function(e){if(null==e)return!0;if(os(e)&&(rs(e)||"string"==typeof e||"function"==typeof e.splice||ss(e)||xs(e)||ns(e)))return!e.length;var t=jo(e);if(t==I||t==q)return!e.size;if(Lo(e))return!Kr(e).length;for(var n in e)if(Ze.call(e,n))return!1;return!0},Qn.isEqual=function(e,t){return Vr(e,t)},Qn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?Vr(e,t,a,n):!!r},Qn.isError=isError,Qn.isFinite=function(e){return"number"==typeof e&&At(e)},Qn.isFunction=cs,Qn.isInteger=us,Qn.isLength=fs,Qn.isMap=ps,Qn.isMatch=function(e,t){return e===t||Wr(e,t,ko(t))},Qn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,Wr(e,t,ko(t),n)},Qn.isNaN=function(e){return ms(e)&&e!=+e},Qn.isNative=function(e){if(Mo(e))throw new Ie("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Zr(e)},Qn.isNil=function(e){return null==e},Qn.isNull=function(e){return null===e},Qn.isNumber=ms,Qn.isObject=ds,Qn.isObjectLike=hs,Qn.isPlainObject=gs,Qn.isRegExp=vs,Qn.isSafeInteger=function(e){return us(e)&&e>=-9007199254740991&&e<=S},Qn.isSet=ys,Qn.isString=bs,Qn.isSymbol=ws,Qn.isTypedArray=xs,Qn.isUndefined=function(e){return e===a},Qn.isWeakMap=function(e){return hs(e)&&jo(e)==H},Qn.isWeakSet=function(e){return hs(e)&&"[object WeakSet]"==Nr(e)},Qn.join=function(e,t){return null==e?"":Xt.call(e,t)},Qn.kebabCase=nl,Qn.last=ca,Qn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var l=r;return n!==a&&(l=(l=Es(n))<0?An(r+l,0):Pn(l,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,l):Qt(e,nn,l,!0)},Qn.lowerCase=rl,Qn.lowerFirst=il,Qn.lt=_s,Qn.lte=Ss,Qn.max=function(e){return e&&e.length?jr(e,ml,Fr):a},Qn.maxBy=function(e,t){return e&&e.length?jr(e,_o(t,2),Fr):a},Qn.mean=function(e){return rn(e,ml)},Qn.meanBy=function(e,t){return rn(e,_o(t,2))},Qn.min=function(e){return e&&e.length?jr(e,ml,Xr):a},Qn.minBy=function(e,t){return e&&e.length?jr(e,_o(t,2),Xr):a},Qn.stubArray=Ol,Qn.stubFalse=jl,Qn.stubObject=function(){return{}},Qn.stubString=function(){return""},Qn.stubTrue=function(){return!0},Qn.multiply=Rl,Qn.nth=function(e,t){return e&&e.length?ni(e,Es(t)):a},Qn.noConflict=function(){return Et._===this&&(Et._=Je),this},Qn.noop=wl,Qn.now=Fa,Qn.pad=function(e,t,n){e=Ts(e);var r=(t=Es(t))?En(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return ro(Ot(a),n)+e+ro(Ct(a),n)},Qn.padEnd=function(e,t,n){e=Ts(e);var r=(t=Es(t))?En(e):0;return t&&r<t?e+ro(t-r,n):e},Qn.padStart=function(e,t,n){e=Ts(e);var r=(t=Es(t))?En(e):0;return t&&r<t?ro(t-r,n)+e:e},Qn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Rn(Ts(e).replace(ve,""),t||0)},Qn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Do(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=Cs(e),t===a?(t=e,e=0):t=Cs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var l=In();return Pn(e+l*(t-e+_t("1e-"+((l+"").length-1))),t)}return si(e,t)},Qn.reduce=function(e,t,n){var r=rs(e)?Gt:sn,a=arguments.length<3;return r(e,_o(t,4),n,a,Cr)},Qn.reduceRight=function(e,t,n){var r=rs(e)?Kt:sn,a=arguments.length<3;return r(e,_o(t,4),n,a,Er)},Qn.repeat=function(e,t,n){return t=(n?Do(e,t,n):t===a)?1:Es(t),li(Ts(e),t)},Qn.replace=function(){var e=arguments,t=Ts(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Qn.result=function(e,t,n){var r=-1,l=(t=Pi(t,e)).length;for(l||(l=1,e=a);++r<l;){var f=null==e?a:e[Yo(t[r])];f===a&&(r=l,f=n),e=cs(f)?f.call(e):f}return e},Qn.round=Il,Qn.runInContext=e,Qn.sample=function(e){return(rs(e)?ur:ui)(e)},Qn.size=function(e){if(null==e)return 0;if(os(e))return bs(e)?En(e):e.length;var t=jo(e);return t==I||t==q?e.size:Kr(e).length},Qn.snakeCase=ol,Qn.some=function(e,t,n){var r=rs(e)?Yt:vi;return n&&Do(e,t,n)&&(t=a),r(e,_o(t,3))},Qn.sortedIndex=function(e,t){return yi(e,t)},Qn.sortedIndexBy=function(e,t,n){return bi(e,t,_o(n,2))},Qn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=yi(e,t);if(r<n&&Qa(e[r],t))return r}return-1},Qn.sortedLastIndex=function(e,t){return yi(e,t,!0)},Qn.sortedLastIndexBy=function(e,t,n){return bi(e,t,_o(n,2),!0)},Qn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=yi(e,t,!0)-1;if(Qa(e[n],t))return n}return-1},Qn.startCase=al,Qn.startsWith=function(e,t,n){return e=Ts(e),n=null==n?0:wr(Es(n),0,e.length),t=_i(t),e.slice(n,n+t.length)==t},Qn.subtract=Ml,Qn.sum=function(e){return e&&e.length?ln(e,ml):0},Qn.sumBy=function(e,t){return e&&e.length?ln(e,_o(t,2)):0},Qn.template=function(e,t,n){var r=Qn.templateSettings;n&&Do(e,t,n)&&(t=a),e=Ts(e),t=Ds({},t,r,fo);var l,f,d=Ds({},t.imports,r.imports,fo),h=Hs(d),p=hn(d,h),y=0,w=t.interpolate||De,x="__p += '",_=Fe((t.escape||De).source+"|"+w.source+"|"+(w===fe?Ce:De).source+"|"+(t.evaluate||De).source+"|$","g"),S="//# sourceURL="+(Ze.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yt+"]")+"\n";e.replace(_,(function(t,n,r,a,d,h){return r||(r=a),x+=e.slice(y,h).replace(Re,bn),n&&(l=!0,x+="' +\n__e("+n+") +\n'"),d&&(f=!0,x+="';\n"+d+";\n__p += '"),r&&(x+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),y=h+t.length,t})),x+="';\n";var k=Ze.call(t,"variable")&&t.variable;if(k){if(Se.test(k))throw new Ie("Invalid `variable` option passed into `_.template`")}else x="with (obj) {\n"+x+"\n}\n";x=(f?x.replace(te,""):x).replace(ne,"$1").replace(re,"$1;"),x="function("+(k||"obj")+") {\n"+(k?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+x+"return __p\n}";var C=ul((function(){return Me(h,S+"return "+x).apply(a,p)}));if(C.source=x,isError(C))throw C;return C},Qn.times=function(e,t){if((e=Es(e))<1||e>S)return[];var n=C,r=Pn(e,C);t=_o(t),e-=C;for(var a=cn(r,t);++n<e;)t(n);return a},Qn.toFinite=Cs,Qn.toInteger=Es,Qn.toLength=Os,Qn.toLower=function(e){return Ts(e).toLowerCase()},Qn.toNumber=js,Qn.toSafeInteger=function(e){return e?wr(Es(e),-9007199254740991,S):0===e?e:0},Qn.toString=Ts,Qn.toUpper=function(e){return Ts(e).toUpperCase()},Qn.trim=function(e,t,n){if((e=Ts(e))&&(n||t===a))return un(e);if(!e||!(t=_i(t)))return e;var r=On(e),l=On(t);return Ri(r,mn(r,l),gn(r,l)+1).join("")},Qn.trimEnd=function(e,t,n){if((e=Ts(e))&&(n||t===a))return e.slice(0,jn(e)+1);if(!e||!(t=_i(t)))return e;var r=On(e);return Ri(r,0,gn(r,On(t))+1).join("")},Qn.trimStart=function(e,t,n){if((e=Ts(e))&&(n||t===a))return e.replace(ve,"");if(!e||!(t=_i(t)))return e;var r=On(e);return Ri(r,mn(r,On(t))).join("")},Qn.truncate=function(e,t){var n=30,r="...";if(ds(t)){var l="separator"in t?t.separator:l;n="length"in t?Es(t.length):n,r="omission"in t?_i(t.omission):r}var f=(e=Ts(e)).length;if(wn(e)){var d=On(e);f=d.length}if(n>=f)return e;var h=n-En(r);if(h<1)return r;var p=d?Ri(d,0,h).join(""):e.slice(0,h);if(l===a)return p+r;if(d&&(h+=p.length-h),vs(l)){if(e.slice(h).search(l)){var y,w=p;for(l.global||(l=Fe(l.source,Ts(Ee.exec(l))+"g")),l.lastIndex=0;y=l.exec(w);)var x=y.index;p=p.slice(0,x===a?h:x)}}else if(e.indexOf(_i(l),h)!=h){var _=p.lastIndexOf(l);_>-1&&(p=p.slice(0,_))}return p+r},Qn.unescape=function(e){return(e=Ts(e))&&se.test(e)?e.replace(oe,$n):e},Qn.uniqueId=function(e){var t=++Ge;return Ts(e)+t},Qn.upperCase=sl,Qn.upperFirst=ll,Qn.each=Aa,Qn.eachRight=Pa,Qn.first=oa,bl(Qn,(Dl={},Dr(Qn,(function(e,t){Ze.call(Qn.prototype,t)||(Dl[t]=e)})),Dl),{chain:!1}),Qn.VERSION="4.17.21",qt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Qn[e].placeholder=Qn})),qt(["drop","take"],(function(e,t){rr.prototype[e]=function(n){n=n===a?1:An(Es(n),0);var r=this.__filtered__&&!t?new rr(this):this.clone();return r.__filtered__?r.__takeCount__=Pn(n,r.__takeCount__):r.__views__.push({size:Pn(n,C),type:e+(r.__dir__<0?"Right":"")}),r},rr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),qt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;rr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:_o(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),qt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");rr.prototype[e]=function(){return this[n](1).value()[0]}})),qt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");rr.prototype[e]=function(){return this.__filtered__?new rr(this):this[n](1)}})),rr.prototype.compact=function(){return this.filter(ml)},rr.prototype.find=function(e){return this.filter(e).head()},rr.prototype.findLast=function(e){return this.reverse().find(e)},rr.prototype.invokeMap=ci((function(e,t){return"function"==typeof e?new rr(this):this.map((function(n){return Hr(n,e,t)}))})),rr.prototype.reject=function(e){return this.filter(Ga(_o(e)))},rr.prototype.slice=function(e,t){e=Es(e);var n=this;return n.__filtered__&&(e>0||t<0)?new rr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=Es(t))<0?n.dropRight(-t):n.take(t-e)),n)},rr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},rr.prototype.toArray=function(){return this.take(C)},Dr(rr.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),l=Qn[r?"take"+("last"==t?"Right":""):t],f=r||/^find/.test(t);l&&(Qn.prototype[t]=function(){var t=this.__wrapped__,d=r?[1]:arguments,h=t instanceof rr,p=d[0],y=h||rs(t),w=function(e){var t=l.apply(Qn,Zt([e],d));return r&&x?t[0]:t};y&&n&&"function"==typeof p&&1!=p.length&&(h=y=!1);var x=this.__chain__,_=!!this.__actions__.length,S=f&&!x,k=h&&!_;if(!f&&y){t=k?t:new rr(this);var C=e.apply(t,d);return C.__actions__.push({func:Ea,args:[w],thisArg:a}),new nr(C,x)}return S&&k?e.apply(this,d):(C=this.thru(w),S?r?C.value()[0]:C.value():C)})})),qt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ue[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Qn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply(rs(a)?a:[],e)}return this[n]((function(n){return t.apply(rs(n)?n:[],e)}))}})),Dr(rr.prototype,(function(e,t){var n=Qn[t];if(n){var r=n.name+"";Ze.call(zn,r)||(zn[r]=[]),zn[r].push({name:t,func:n})}})),zn[Qi(a,2).name]=[{name:"wrapper",func:a}],rr.prototype.clone=function(){var e=new rr(this.__wrapped__);return e.__actions__=Ui(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ui(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ui(this.__views__),e},rr.prototype.reverse=function(){if(this.__filtered__){var e=new rr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},rr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=rs(e),r=t<0,a=n?e.length:0,l=function(e,t,n){var r=-1,a=n.length;for(;++r<a;){var l=n[r],f=l.size;switch(l.type){case"drop":e+=f;break;case"dropRight":t-=f;break;case"take":t=Pn(t,e+f);break;case"takeRight":e=An(e,t-f)}}return{start:e,end:t}}(0,a,this.__views__),f=l.start,d=l.end,h=d-f,p=r?d:f-1,y=this.__iteratees__,w=y.length,x=0,_=Pn(h,this.__takeCount__);if(!n||!r&&a==h&&_==h)return Oi(e,this.__actions__);var S=[];e:for(;h--&&x<_;){for(var k=-1,C=e[p+=t];++k<w;){var E=y[k],O=E.iteratee,j=E.type,T=O(C);if(2==j)C=T;else if(!T){if(1==j)continue e;break e}}S[x++]=C}return S},Qn.prototype.at=Oa,Qn.prototype.chain=function(){return Ca(this)},Qn.prototype.commit=function(){return new nr(this.value(),this.__chain__)},Qn.prototype.next=function(){this.__values__===a&&(this.__values__=ks(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Qn.prototype.plant=function(e){for(var t,n=this;n instanceof tr;){var r=Jo(n);r.__index__=0,r.__values__=a,t?l.__wrapped__=r:t=r;var l=r;n=n.__wrapped__}return l.__wrapped__=e,t},Qn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof rr){var t=e;return this.__actions__.length&&(t=new rr(this)),(t=t.reverse()).__actions__.push({func:Ea,args:[ha],thisArg:a}),new nr(t,this.__chain__)}return this.thru(ha)},Qn.prototype.toJSON=Qn.prototype.valueOf=Qn.prototype.value=function(){return Oi(this.__wrapped__,this.__actions__)},Qn.prototype.first=Qn.prototype.head,ct&&(Qn.prototype[ct]=function(){return this}),Qn}();Et._=Tn,(r=function(){return Tn}.call(t,n,t,e))===a||(e.exports=r)}.call(this)},34519:function(e,t,n){var r=n(13940),a=n(26548),l=n(68286);e.exports=function(e,t){var n={};return t=l(t,3),a(e,(function(e,a,l){r(n,a,t(e,a,l))})),n}},30733:function(e,t,n){var r=n(96738);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],l=n.cache;if(l.has(a))return l.get(a);var f=e.apply(this,r);return n.cache=l.set(a,f)||l,f};return n.cache=new(a.Cache||r),n}a.Cache=r,e.exports=a},65798:function(e,t,n){var r=n(20256),a=n(82952),l=n(21401),f=n(33812);e.exports=function(e){return l(e)?r(f(e)):a(e)}},51525:function(e,t,n){var r=n(87064),a=n(68286),l=n(4751),f=n(86152),d=n(82406);e.exports=function(e,t,n){var h=f(e)?r:l;return n&&d(e,t,n)&&(t=void 0),h(e,a(t,3))}},30981:function(e){e.exports=function(){return[]}},36330:function(e){e.exports=function(){return!1}},66188:function(e,t,n){var r=n(1054);e.exports=function(e){return null==e?"":r(e)}},14320:function(e){"use strict";e.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}},36631:function(e,t,n){"use strict";n.r(t);var r=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function a(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(a=e[n],l=t[n],!(a===l||r(a)&&r(l)))return!1;var a,l;return!0}t.default=function(e,t){var n;void 0===t&&(t=a);var r,l=[],f=!1;return function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return f&&n===this&&t(a,l)||(r=e.apply(this,a),f=!0,n=this,l=a),r}}},34752:function(e,t,n){var r=n(78477),a=/[\/\+\.]/;e.exports=function(e,t){function n(t){var n=r(t,e,a);return n&&n.length>=2}return t?n(t.split(";")[0]):n}},19034:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function a(e){t=e}function l(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function f(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(d(e,t))return!1;return!0}function p(e){return void 0===e}function y(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function w(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function x(e,t){var n,r=[],a=e.length;for(n=0;n<a;++n)r.push(t(e[n],n));return r}function _(e,t){for(var n in t)d(t,n)&&(e[n]=t[n]);return d(t,"toString")&&(e.toString=t.toString),d(t,"valueOf")&&(e.valueOf=t.valueOf),e}function S(e,t,n,r){return ar(e,t,n,r,!0).utc()}function k(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function C(e){return null==e._pf&&(e._pf=k()),e._pf}function E(e){if(null==e._isValid){var t=C(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),a=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(a=a&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return a;e._isValid=a}return e._isValid}function O(e){var t=S(NaN);return null!=e?_(C(t),e):C(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var j=r.momentProperties=[],T=!1;function A(e,t){var n,r,a,l=j.length;if(p(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),p(t._i)||(e._i=t._i),p(t._f)||(e._f=t._f),p(t._l)||(e._l=t._l),p(t._strict)||(e._strict=t._strict),p(t._tzm)||(e._tzm=t._tzm),p(t._isUTC)||(e._isUTC=t._isUTC),p(t._offset)||(e._offset=t._offset),p(t._pf)||(e._pf=C(t)),p(t._locale)||(e._locale=t._locale),l>0)for(n=0;n<l;n++)p(a=t[r=j[n]])||(e[r]=a);return e}function P(e){A(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===T&&(T=!0,r.updateOffset(this),T=!1)}function D(e){return e instanceof P||null!=e&&null!=e._isAMomentObject}function R(e){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function I(e,t){var n=!0;return _((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var a,l,f,h=[],p=arguments.length;for(l=0;l<p;l++){if(a="","object"==typeof arguments[l]){for(f in a+="\n["+l+"] ",arguments[0])d(arguments[0],f)&&(a+=f+": "+arguments[0][f]+", ");a=a.slice(0,-2)}else a=arguments[l];h.push(a)}R(e+"\nArguments: "+Array.prototype.slice.call(h).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var M,L={};function N(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),L[e]||(R(t),L[e]=!0)}function F(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function q(e){var t,n;for(n in e)d(e,n)&&(F(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function B(e,t){var n,r=_({},e);for(n in t)d(t,n)&&(f(e[n])&&f(t[n])?(r[n]={},_(r[n],e[n]),_(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)d(e,n)&&!d(t,n)&&f(e[n])&&(r[n]=_({},r[n]));return r}function U(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,M=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)d(e,t)&&n.push(t);return n};var H={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function z(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return F(r)?r.call(t,n):r}function V(e,t,n){var r=""+Math.abs(e),a=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}var W=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Z=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,G={},K={};function Y(e,t,n,r){var a=r;"string"==typeof r&&(a=function(){return this[r]()}),e&&(K[e]=a),t&&(K[t[0]]=function(){return V(a.apply(this,arguments),t[1],t[2])}),n&&(K[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function X(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function J(e){var t,n,r=e.match(W);for(t=0,n=r.length;t<n;t++)K[r[t]]?r[t]=K[r[t]]:r[t]=X(r[t]);return function(t){var a,l="";for(a=0;a<n;a++)l+=F(r[a])?r[a].call(t,e):r[a];return l}}function Q(e,t){return e.isValid()?(t=ee(t,e.localeData()),G[t]=G[t]||J(t),G[t](e)):e.localeData().invalidDate()}function ee(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(Z.lastIndex=0;n>=0&&Z.test(e);)e=e.replace(Z,r),Z.lastIndex=0,n-=1;return e}var te={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ne(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(W).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var re="Invalid date";function oe(){return this._invalidDate}var ae="%d",se=/\d{1,2}/;function le(e){return this._ordinal.replace("%d",e)}var ce={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ue(e,t,n,r){var a=this._relativeTime[n];return F(a)?a(e,t,n,r):a.replace(/%d/i,e)}function fe(e,t){var n=this._relativeTime[e>0?"future":"past"];return F(n)?n(t):n.replace(/%s/i,t)}var de={};function he(e,t){var n=e.toLowerCase();de[n]=de[n+"s"]=de[t]=e}function pe(e){return"string"==typeof e?de[e]||de[e.toLowerCase()]:void 0}function me(e){var t,n,r={};for(n in e)d(e,n)&&(t=pe(n))&&(r[t]=e[n]);return r}var ge={};function ve(e,t){ge[e]=t}function ye(e){var t,n=[];for(t in e)d(e,t)&&n.push({unit:t,priority:ge[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function be(e){return e%4==0&&e%100!=0||e%400==0}function we(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function xe(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=we(t)),n}function _e(e,t){return function(n){return null!=n?(ke(this,e,n),r.updateOffset(this,t),this):Se(this,e)}}function Se(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function ke(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&be(e.year())&&1===e.month()&&29===e.date()?(n=xe(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ut(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Ce(e){return F(this[e=pe(e)])?this[e]():this}function Ee(e,t){if("object"==typeof e){var n,r=ye(e=me(e)),a=r.length;for(n=0;n<a;n++)this[r[n].unit](e[r[n].unit])}else if(F(this[e=pe(e)]))return this[e](t);return this}var Oe,je=/\d/,$e=/\d\d/,Te=/\d{3}/,Ae=/\d{4}/,Pe=/[+-]?\d{6}/,De=/\d\d?/,Re=/\d\d\d\d?/,Ie=/\d\d\d\d\d\d?/,Me=/\d{1,3}/,Le=/\d{1,4}/,Ne=/[+-]?\d{1,6}/,Fe=/\d+/,qe=/[+-]?\d+/,Be=/Z|[+-]\d\d:?\d\d/gi,Ue=/Z|[+-]\d\d(?::?\d\d)?/gi,He=/[+-]?\d+(\.\d{1,3})?/,ze=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Ve(e,t,n){Oe[e]=F(t)?t:function(e,r){return e&&n?n:t}}function We(e,t){return d(Oe,e)?Oe[e](t._strict,t._locale):new RegExp(Ze(e))}function Ze(e){return Ge(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,a){return t||n||r||a})))}function Ge(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}Oe={};var Ke={};function Ye(e,t){var n,r,a=t;for("string"==typeof e&&(e=[e]),y(t)&&(a=function(e,n){n[t]=xe(e)}),r=e.length,n=0;n<r;n++)Ke[e[n]]=a}function Xe(e,t){Ye(e,(function(e,n,r,a){r._w=r._w||{},t(e,r._w,r,a)}))}function Je(e,t,n){null!=t&&d(Ke,e)&&Ke[e](t,n._a,n,e)}var Qe,et=0,tt=1,nt=2,rt=3,it=4,ot=5,at=6,st=7,lt=8;function ct(e,t){return(e%t+t)%t}function ut(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=ct(t,12);return e+=(t-n)/12,1===n?be(e)?29:28:31-n%7%2}Qe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},Y("M",["MM",2],"Mo",(function(){return this.month()+1})),Y("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),Y("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),he("month","M"),ve("month",8),Ve("M",De),Ve("MM",De,$e),Ve("MMM",(function(e,t){return t.monthsShortRegex(e)})),Ve("MMMM",(function(e,t){return t.monthsRegex(e)})),Ye(["M","MM"],(function(e,t){t[tt]=xe(e)-1})),Ye(["MMM","MMMM"],(function(e,t,n,r){var a=n._locale.monthsParse(e,r,n._strict);null!=a?t[tt]=a:C(n).invalidMonth=e}));var ft="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),dt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ht=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,pt=ze,mt=ze;function gt(e,t){return e?l(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||ht).test(t)?"format":"standalone"][e.month()]:l(this._months)?this._months:this._months.standalone}function vt(e,t){return e?l(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[ht.test(t)?"format":"standalone"][e.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function yt(e,t,n){var r,a,l,f=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)l=S([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(l,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(l,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(a=Qe.call(this._shortMonthsParse,f))?a:null:-1!==(a=Qe.call(this._longMonthsParse,f))?a:null:"MMM"===t?-1!==(a=Qe.call(this._shortMonthsParse,f))||-1!==(a=Qe.call(this._longMonthsParse,f))?a:null:-1!==(a=Qe.call(this._longMonthsParse,f))||-1!==(a=Qe.call(this._shortMonthsParse,f))?a:null}function bt(e,t,n){var r,a,l;if(this._monthsParseExact)return yt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(a=S([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(l="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(l.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function wt(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=xe(t);else if(!y(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),ut(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function xt(e){return null!=e?(wt(this,e),r.updateOffset(this,!0),this):Se(this,"Month")}function _t(){return ut(this.year(),this.month())}function St(e){return this._monthsParseExact?(d(this,"_monthsRegex")||Ct.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=pt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function kt(e){return this._monthsParseExact?(d(this,"_monthsRegex")||Ct.call(this),e?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=mt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Ct(){function e(e,t){return t.length-e.length}var t,n,r=[],a=[],l=[];for(t=0;t<12;t++)n=S([2e3,t]),r.push(this.monthsShort(n,"")),a.push(this.months(n,"")),l.push(this.months(n,"")),l.push(this.monthsShort(n,""));for(r.sort(e),a.sort(e),l.sort(e),t=0;t<12;t++)r[t]=Ge(r[t]),a[t]=Ge(a[t]);for(t=0;t<24;t++)l[t]=Ge(l[t]);this._monthsRegex=new RegExp("^("+l.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Et(e){return be(e)?366:365}Y("Y",0,0,(function(){var e=this.year();return e<=9999?V(e,4):"+"+e})),Y(0,["YY",2],0,(function(){return this.year()%100})),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),he("year","y"),ve("year",1),Ve("Y",qe),Ve("YY",De,$e),Ve("YYYY",Le,Ae),Ve("YYYYY",Ne,Pe),Ve("YYYYYY",Ne,Pe),Ye(["YYYYY","YYYYYY"],et),Ye("YYYY",(function(e,t){t[et]=2===e.length?r.parseTwoDigitYear(e):xe(e)})),Ye("YY",(function(e,t){t[et]=r.parseTwoDigitYear(e)})),Ye("Y",(function(e,t){t[et]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return xe(e)+(xe(e)>68?1900:2e3)};var Ot=_e("FullYear",!0);function jt(){return be(this.year())}function $t(e,t,n,r,a,l,f){var d;return e<100&&e>=0?(d=new Date(e+400,t,n,r,a,l,f),isFinite(d.getFullYear())&&d.setFullYear(e)):d=new Date(e,t,n,r,a,l,f),d}function Tt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function At(e,t,n){var r=7+t-n;return-(7+Tt(e,0,r).getUTCDay()-t)%7+r-1}function Pt(e,t,n,r,a){var l,f,d=1+7*(t-1)+(7+n-r)%7+At(e,r,a);return d<=0?f=Et(l=e-1)+d:d>Et(e)?(l=e+1,f=d-Et(e)):(l=e,f=d),{year:l,dayOfYear:f}}function Dt(e,t,n){var r,a,l=At(e.year(),t,n),f=Math.floor((e.dayOfYear()-l-1)/7)+1;return f<1?r=f+Rt(a=e.year()-1,t,n):f>Rt(e.year(),t,n)?(r=f-Rt(e.year(),t,n),a=e.year()+1):(a=e.year(),r=f),{week:r,year:a}}function Rt(e,t,n){var r=At(e,t,n),a=At(e+1,t,n);return(Et(e)-r+a)/7}function It(e){return Dt(e,this._week.dow,this._week.doy).week}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),he("week","w"),he("isoWeek","W"),ve("week",5),ve("isoWeek",5),Ve("w",De),Ve("ww",De,$e),Ve("W",De),Ve("WW",De,$e),Xe(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=xe(e)}));var Mt={dow:0,doy:6};function Lt(){return this._week.dow}function Nt(){return this._week.doy}function Ft(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function qt(e){var t=Dt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Bt(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Ut(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ht(e,t){return e.slice(t,7).concat(e.slice(0,t))}Y("d",0,"do","day"),Y("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),Y("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),Y("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),he("day","d"),he("weekday","e"),he("isoWeekday","E"),ve("day",11),ve("weekday",11),ve("isoWeekday",11),Ve("d",De),Ve("e",De),Ve("E",De),Ve("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Ve("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Ve("dddd",(function(e,t){return t.weekdaysRegex(e)})),Xe(["dd","ddd","dddd"],(function(e,t,n,r){var a=n._locale.weekdaysParse(e,r,n._strict);null!=a?t.d=a:C(n).invalidWeekday=e})),Xe(["d","e","E"],(function(e,t,n,r){t[r]=xe(e)}));var zt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Vt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Wt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Zt=ze,Gt=ze,Kt=ze;function Yt(e,t){var n=l(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ht(n,this._week.dow):e?n[e.day()]:n}function Xt(e){return!0===e?Ht(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Jt(e){return!0===e?Ht(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Qt(e,t,n){var r,a,l,f=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)l=S([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(l,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(l,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(l,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(a=Qe.call(this._weekdaysParse,f))?a:null:"ddd"===t?-1!==(a=Qe.call(this._shortWeekdaysParse,f))?a:null:-1!==(a=Qe.call(this._minWeekdaysParse,f))?a:null:"dddd"===t?-1!==(a=Qe.call(this._weekdaysParse,f))||-1!==(a=Qe.call(this._shortWeekdaysParse,f))||-1!==(a=Qe.call(this._minWeekdaysParse,f))?a:null:"ddd"===t?-1!==(a=Qe.call(this._shortWeekdaysParse,f))||-1!==(a=Qe.call(this._weekdaysParse,f))||-1!==(a=Qe.call(this._minWeekdaysParse,f))?a:null:-1!==(a=Qe.call(this._minWeekdaysParse,f))||-1!==(a=Qe.call(this._weekdaysParse,f))||-1!==(a=Qe.call(this._shortWeekdaysParse,f))?a:null}function en(e,t,n){var r,a,l;if(this._weekdaysParseExact)return Qt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(a=S([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(l="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[r]=new RegExp(l.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function tn(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Bt(e,this.localeData()),this.add(e-t,"d")):t}function nn(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function rn(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ut(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function on(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ln.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=Zt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function an(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ln.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function sn(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ln.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Kt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ln(){function e(e,t){return t.length-e.length}var t,n,r,a,l,f=[],d=[],h=[],p=[];for(t=0;t<7;t++)n=S([2e3,1]).day(t),r=Ge(this.weekdaysMin(n,"")),a=Ge(this.weekdaysShort(n,"")),l=Ge(this.weekdays(n,"")),f.push(r),d.push(a),h.push(l),p.push(r),p.push(a),p.push(l);f.sort(e),d.sort(e),h.sort(e),p.sort(e),this._weekdaysRegex=new RegExp("^("+p.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+f.join("|")+")","i")}function cn(){return this.hours()%12||12}function un(){return this.hours()||24}function dn(e,t){Y(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function hn(e,t){return t._meridiemParse}function pn(e){return"p"===(e+"").toLowerCase().charAt(0)}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,cn),Y("k",["kk",2],0,un),Y("hmm",0,0,(function(){return""+cn.apply(this)+V(this.minutes(),2)})),Y("hmmss",0,0,(function(){return""+cn.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)})),Y("Hmm",0,0,(function(){return""+this.hours()+V(this.minutes(),2)})),Y("Hmmss",0,0,(function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)})),dn("a",!0),dn("A",!1),he("hour","h"),ve("hour",13),Ve("a",hn),Ve("A",hn),Ve("H",De),Ve("h",De),Ve("k",De),Ve("HH",De,$e),Ve("hh",De,$e),Ve("kk",De,$e),Ve("hmm",Re),Ve("hmmss",Ie),Ve("Hmm",Re),Ve("Hmmss",Ie),Ye(["H","HH"],rt),Ye(["k","kk"],(function(e,t,n){var r=xe(e);t[rt]=24===r?0:r})),Ye(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Ye(["h","hh"],(function(e,t,n){t[rt]=xe(e),C(n).bigHour=!0})),Ye("hmm",(function(e,t,n){var r=e.length-2;t[rt]=xe(e.substr(0,r)),t[it]=xe(e.substr(r)),C(n).bigHour=!0})),Ye("hmmss",(function(e,t,n){var r=e.length-4,a=e.length-2;t[rt]=xe(e.substr(0,r)),t[it]=xe(e.substr(r,2)),t[ot]=xe(e.substr(a)),C(n).bigHour=!0})),Ye("Hmm",(function(e,t,n){var r=e.length-2;t[rt]=xe(e.substr(0,r)),t[it]=xe(e.substr(r))})),Ye("Hmmss",(function(e,t,n){var r=e.length-4,a=e.length-2;t[rt]=xe(e.substr(0,r)),t[it]=xe(e.substr(r,2)),t[ot]=xe(e.substr(a))}));var mn=/[ap]\.?m?\.?/i,gn=_e("Hours",!0);function vn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var yn,bn={calendar:H,longDateFormat:te,invalidDate:re,ordinal:ae,dayOfMonthOrdinalParse:se,relativeTime:ce,months:ft,monthsShort:dt,week:Mt,weekdays:zt,weekdaysMin:Wt,weekdaysShort:Vt,meridiemParse:mn},wn={},xn={};function _n(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function Sn(e){return e?e.toLowerCase().replace("_","-"):e}function kn(e){for(var t,n,r,a,l=0;l<e.length;){for(t=(a=Sn(e[l]).split("-")).length,n=(n=Sn(e[l+1]))?n.split("-"):null;t>0;){if(r=En(a.slice(0,t).join("-")))return r;if(n&&n.length>=t&&_n(a,n)>=t-1)break;t--}l++}return yn}function Cn(e){return null!=e.match("^[^/\\\\]*$")}function En(t){var n=null;if(void 0===wn[t]&&e&&e.exports&&Cn(t))try{n=yn._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),On(n)}catch(e){wn[t]=null}return wn[t]}function On(e,t){var n;return e&&((n=p(t)?Tn(e):jn(e,t))?yn=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),yn._abbr}function jn(e,t){if(null!==t){var n,r=bn;if(t.abbr=e,null!=wn[e])N("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=wn[e]._config;else if(null!=t.parentLocale)if(null!=wn[t.parentLocale])r=wn[t.parentLocale]._config;else{if(null==(n=En(t.parentLocale)))return xn[t.parentLocale]||(xn[t.parentLocale]=[]),xn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return wn[e]=new U(B(r,t)),xn[e]&&xn[e].forEach((function(e){jn(e.name,e.config)})),On(e),wn[e]}return delete wn[e],null}function $n(e,t){if(null!=t){var n,r,a=bn;null!=wn[e]&&null!=wn[e].parentLocale?wn[e].set(B(wn[e]._config,t)):(null!=(r=En(e))&&(a=r._config),t=B(a,t),null==r&&(t.abbr=e),(n=new U(t)).parentLocale=wn[e],wn[e]=n),On(e)}else null!=wn[e]&&(null!=wn[e].parentLocale?(wn[e]=wn[e].parentLocale,e===On()&&On(e)):null!=wn[e]&&delete wn[e]);return wn[e]}function Tn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return yn;if(!l(e)){if(t=En(e))return t;e=[e]}return kn(e)}function An(){return M(wn)}function Pn(e){var t,n=e._a;return n&&-2===C(e).overflow&&(t=n[tt]<0||n[tt]>11?tt:n[nt]<1||n[nt]>ut(n[et],n[tt])?nt:n[rt]<0||n[rt]>24||24===n[rt]&&(0!==n[it]||0!==n[ot]||0!==n[at])?rt:n[it]<0||n[it]>59?it:n[ot]<0||n[ot]>59?ot:n[at]<0||n[at]>999?at:-1,C(e)._overflowDayOfYear&&(t<et||t>nt)&&(t=nt),C(e)._overflowWeeks&&-1===t&&(t=st),C(e)._overflowWeekday&&-1===t&&(t=lt),C(e).overflow=t),e}var Dn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Rn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,In=/Z|[+-]\d\d(?::?\d\d)?/,Mn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ln=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Nn=/^\/?Date\((-?\d+)/i,Fn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,qn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Bn(e){var t,n,r,a,l,f,d=e._i,h=Dn.exec(d)||Rn.exec(d),p=Mn.length,y=Ln.length;if(h){for(C(e).iso=!0,t=0,n=p;t<n;t++)if(Mn[t][1].exec(h[1])){a=Mn[t][0],r=!1!==Mn[t][2];break}if(null==a)return void(e._isValid=!1);if(h[3]){for(t=0,n=y;t<n;t++)if(Ln[t][1].exec(h[3])){l=(h[2]||" ")+Ln[t][0];break}if(null==l)return void(e._isValid=!1)}if(!r&&null!=l)return void(e._isValid=!1);if(h[4]){if(!In.exec(h[4]))return void(e._isValid=!1);f="Z"}e._f=a+(l||"")+(f||""),Qn(e)}else e._isValid=!1}function Un(e,t,n,r,a,l){var f=[Hn(e),dt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(a,10)];return l&&f.push(parseInt(l,10)),f}function Hn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function zn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Vn(e,t,n){return!e||Vt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(C(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Wn(e,t,n){if(e)return qn[e];if(t)return 0;var r=parseInt(n,10),a=r%100;return(r-a)/100*60+a}function Zn(e){var t,n=Fn.exec(zn(e._i));if(n){if(t=Un(n[4],n[3],n[2],n[5],n[6],n[7]),!Vn(n[1],t,e))return;e._a=t,e._tzm=Wn(n[8],n[9],n[10]),e._d=Tt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),C(e).rfc2822=!0}else e._isValid=!1}function Gn(e){var t=Nn.exec(e._i);null===t?(Bn(e),!1===e._isValid&&(delete e._isValid,Zn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Kn(e,t,n){return null!=e?e:null!=t?t:n}function Yn(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Xn(e){var t,n,r,a,l,f=[];if(!e._d){for(r=Yn(e),e._w&&null==e._a[nt]&&null==e._a[tt]&&Jn(e),null!=e._dayOfYear&&(l=Kn(e._a[et],r[et]),(e._dayOfYear>Et(l)||0===e._dayOfYear)&&(C(e)._overflowDayOfYear=!0),n=Tt(l,0,e._dayOfYear),e._a[tt]=n.getUTCMonth(),e._a[nt]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=f[t]=r[t];for(;t<7;t++)e._a[t]=f[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[rt]&&0===e._a[it]&&0===e._a[ot]&&0===e._a[at]&&(e._nextDay=!0,e._a[rt]=0),e._d=(e._useUTC?Tt:$t).apply(null,f),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[rt]=24),e._w&&void 0!==e._w.d&&e._w.d!==a&&(C(e).weekdayMismatch=!0)}}function Jn(e){var t,n,r,a,l,f,d,h,p;null!=(t=e._w).GG||null!=t.W||null!=t.E?(l=1,f=4,n=Kn(t.GG,e._a[et],Dt(sr(),1,4).year),r=Kn(t.W,1),((a=Kn(t.E,1))<1||a>7)&&(h=!0)):(l=e._locale._week.dow,f=e._locale._week.doy,p=Dt(sr(),l,f),n=Kn(t.gg,e._a[et],p.year),r=Kn(t.w,p.week),null!=t.d?((a=t.d)<0||a>6)&&(h=!0):null!=t.e?(a=t.e+l,(t.e<0||t.e>6)&&(h=!0)):a=l),r<1||r>Rt(n,l,f)?C(e)._overflowWeeks=!0:null!=h?C(e)._overflowWeekday=!0:(d=Pt(n,r,a,l,f),e._a[et]=d.year,e._dayOfYear=d.dayOfYear)}function Qn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],C(e).empty=!0;var t,n,a,l,f,d,h,p=""+e._i,y=p.length,w=0;for(h=(a=ee(e._f,e._locale).match(W)||[]).length,t=0;t<h;t++)l=a[t],(n=(p.match(We(l,e))||[])[0])&&((f=p.substr(0,p.indexOf(n))).length>0&&C(e).unusedInput.push(f),p=p.slice(p.indexOf(n)+n.length),w+=n.length),K[l]?(n?C(e).empty=!1:C(e).unusedTokens.push(l),Je(l,n,e)):e._strict&&!n&&C(e).unusedTokens.push(l);C(e).charsLeftOver=y-w,p.length>0&&C(e).unusedInput.push(p),e._a[rt]<=12&&!0===C(e).bigHour&&e._a[rt]>0&&(C(e).bigHour=void 0),C(e).parsedDateParts=e._a.slice(0),C(e).meridiem=e._meridiem,e._a[rt]=er(e._locale,e._a[rt],e._meridiem),null!==(d=C(e).era)&&(e._a[et]=e._locale.erasConvertYear(d,e._a[et])),Xn(e),Pn(e)}else Zn(e);else Bn(e)}function er(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function tr(e){var t,n,r,a,l,f,d=!1,h=e._f.length;if(0===h)return C(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<h;a++)l=0,f=!1,t=A({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],Qn(t),E(t)&&(f=!0),l+=C(t).charsLeftOver,l+=10*C(t).unusedTokens.length,C(t).score=l,d?l<r&&(r=l,n=t):(null==r||l<r||f)&&(r=l,n=t,f&&(d=!0));_(e,n||t)}function nr(e){if(!e._d){var t=me(e._i),n=void 0===t.day?t.date:t.day;e._a=x([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Xn(e)}}function rr(e){var t=new P(Pn(ir(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function ir(e){var t=e._i,n=e._f;return e._locale=e._locale||Tn(e._l),null===t||void 0===n&&""===t?O({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),D(t)?new P(Pn(t)):(w(t)?e._d=t:l(n)?tr(e):n?Qn(e):or(e),E(e)||(e._d=null),e))}function or(e){var t=e._i;p(t)?e._d=new Date(r.now()):w(t)?e._d=new Date(t.valueOf()):"string"==typeof t?Gn(e):l(t)?(e._a=x(t.slice(0),(function(e){return parseInt(e,10)})),Xn(e)):f(t)?nr(e):y(t)?e._d=new Date(t):r.createFromInputFallback(e)}function ar(e,t,n,r,a){var d={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(f(e)&&h(e)||l(e)&&0===e.length)&&(e=void 0),d._isAMomentObject=!0,d._useUTC=d._isUTC=a,d._l=n,d._i=e,d._f=t,d._strict=r,rr(d)}function sr(e,t,n,r){return ar(e,t,n,r,!1)}r.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var lr=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=sr.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:O()})),cr=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=sr.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:O()}));function ur(e,t){var n,r;if(1===t.length&&l(t[0])&&(t=t[0]),!t.length)return sr();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function fr(){return ur("isBefore",[].slice.call(arguments,0))}function dr(){return ur("isAfter",[].slice.call(arguments,0))}var hr=function(){return Date.now?Date.now():+new Date},pr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function mr(e){var t,n,r=!1,a=pr.length;for(t in e)if(d(e,t)&&(-1===Qe.call(pr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<a;++n)if(e[pr[n]]){if(r)return!1;parseFloat(e[pr[n]])!==xe(e[pr[n]])&&(r=!0)}return!0}function gr(){return this._isValid}function vr(){return qr(NaN)}function yr(e){var t=me(e),n=t.year||0,r=t.quarter||0,a=t.month||0,l=t.week||t.isoWeek||0,f=t.day||0,d=t.hour||0,h=t.minute||0,p=t.second||0,y=t.millisecond||0;this._isValid=mr(t),this._milliseconds=+y+1e3*p+6e4*h+1e3*d*60*60,this._days=+f+7*l,this._months=+a+3*r+12*n,this._data={},this._locale=Tn(),this._bubble()}function br(e){return e instanceof yr}function wr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function xr(e,t,n){var r,a=Math.min(e.length,t.length),l=Math.abs(e.length-t.length),f=0;for(r=0;r<a;r++)(n&&e[r]!==t[r]||!n&&xe(e[r])!==xe(t[r]))&&f++;return f+l}function _r(e,t){Y(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+V(~~(e/60),2)+t+V(~~e%60,2)}))}_r("Z",":"),_r("ZZ",""),Ve("Z",Ue),Ve("ZZ",Ue),Ye(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=kr(Ue,e)}));var Sr=/([\+\-]|\d\d)/gi;function kr(e,t){var n,r,a=(t||"").match(e);return null===a?null:0===(r=60*(n=((a[a.length-1]||[])+"").match(Sr)||["-",0,0])[1]+xe(n[2]))?0:"+"===n[0]?r:-r}function Cr(e,t){var n,a;return t._isUTC?(n=t.clone(),a=(D(e)||w(e)?e.valueOf():sr(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+a),r.updateOffset(n,!1),n):sr(e).local()}function Er(e){return-Math.round(e._d.getTimezoneOffset())}function Or(e,t,n){var a,l=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=kr(Ue,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(a=Er(this)),this._offset=e,this._isUTC=!0,null!=a&&this.add(a,"m"),l!==e&&(!t||this._changeInProgress?Vr(this,qr(e-l,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?l:Er(this)}function jr(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function $r(e){return this.utcOffset(0,e)}function Tr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Er(this),"m")),this}function Ar(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=kr(Be,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Pr(e){return!!this.isValid()&&(e=e?sr(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Dr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Rr(){if(!p(this._isDSTShifted))return this._isDSTShifted;var e,t={};return A(t,this),(t=ir(t))._a?(e=t._isUTC?S(t._a):sr(t._a),this._isDSTShifted=this.isValid()&&xr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ir(){return!!this.isValid()&&!this._isUTC}function Mr(){return!!this.isValid()&&this._isUTC}function Lr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Nr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Fr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function qr(e,t){var n,r,a,l=e,f=null;return br(e)?l={ms:e._milliseconds,d:e._days,M:e._months}:y(e)||!isNaN(+e)?(l={},t?l[t]=+e:l.milliseconds=+e):(f=Nr.exec(e))?(n="-"===f[1]?-1:1,l={y:0,d:xe(f[nt])*n,h:xe(f[rt])*n,m:xe(f[it])*n,s:xe(f[ot])*n,ms:xe(wr(1e3*f[at]))*n}):(f=Fr.exec(e))?(n="-"===f[1]?-1:1,l={y:Br(f[2],n),M:Br(f[3],n),w:Br(f[4],n),d:Br(f[5],n),h:Br(f[6],n),m:Br(f[7],n),s:Br(f[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(a=Hr(sr(l.from),sr(l.to)),(l={}).ms=a.milliseconds,l.M=a.months),r=new yr(l),br(e)&&d(e,"_locale")&&(r._locale=e._locale),br(e)&&d(e,"_isValid")&&(r._isValid=e._isValid),r}function Br(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ur(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Hr(e,t){var n;return e.isValid()&&t.isValid()?(t=Cr(t,e),e.isBefore(t)?n=Ur(e,t):((n=Ur(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function zr(e,t){return function(n,r){var a;return null===r||isNaN(+r)||(N(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=n,n=r,r=a),Vr(this,qr(n,r),e),this}}function Vr(e,t,n,a){var l=t._milliseconds,f=wr(t._days),d=wr(t._months);e.isValid()&&(a=null==a||a,d&&wt(e,Se(e,"Month")+d*n),f&&ke(e,"Date",Se(e,"Date")+f*n),l&&e._d.setTime(e._d.valueOf()+l*n),a&&r.updateOffset(e,f||d))}qr.fn=yr.prototype,qr.invalid=vr;var Wr=zr(1,"add"),Zr=zr(-1,"subtract");function Gr(e){return"string"==typeof e||e instanceof String}function Kr(e){return D(e)||w(e)||Gr(e)||y(e)||Xr(e)||Yr(e)||null==e}function Yr(e){var t,n,r=f(e)&&!h(e),a=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],p=l.length;for(t=0;t<p;t+=1)n=l[t],a=a||d(e,n);return r&&a}function Xr(e){var t=l(e),n=!1;return t&&(n=0===e.filter((function(t){return!y(t)&&Gr(e)})).length),t&&n}function Jr(e){var t,n,r=f(e)&&!h(e),a=!1,l=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<l.length;t+=1)n=l[t],a=a||d(e,n);return r&&a}function Qr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function ei(e,t){1===arguments.length&&(arguments[0]?Kr(arguments[0])?(e=arguments[0],t=void 0):Jr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||sr(),a=Cr(n,this).startOf("day"),l=r.calendarFormat(this,a)||"sameElse",f=t&&(F(t[l])?t[l].call(this,n):t[l]);return this.format(f||this.localeData().calendar(l,this,sr(n)))}function ti(){return new P(this)}function ni(e,t){var n=D(e)?e:sr(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=pe(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function ri(e,t){var n=D(e)?e:sr(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=pe(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function ii(e,t,n,r){var a=D(e)?e:sr(e),l=D(t)?t:sr(t);return!!(this.isValid()&&a.isValid()&&l.isValid())&&("("===(r=r||"()")[0]?this.isAfter(a,n):!this.isBefore(a,n))&&(")"===r[1]?this.isBefore(l,n):!this.isAfter(l,n))}function oi(e,t){var n,r=D(e)?e:sr(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=pe(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function ai(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function si(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function li(e,t,n){var r,a,l;if(!this.isValid())return NaN;if(!(r=Cr(e,this)).isValid())return NaN;switch(a=6e4*(r.utcOffset()-this.utcOffset()),t=pe(t)){case"year":l=ci(this,r)/12;break;case"month":l=ci(this,r);break;case"quarter":l=ci(this,r)/3;break;case"second":l=(this-r)/1e3;break;case"minute":l=(this-r)/6e4;break;case"hour":l=(this-r)/36e5;break;case"day":l=(this-r-a)/864e5;break;case"week":l=(this-r-a)/6048e5;break;default:l=this-r}return n?l:we(l)}function ci(e,t){if(e.date()<t.date())return-ci(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function ui(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fi(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Q(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):F(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Q(n,"Z")):Q(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function di(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,a="moment",l="";return this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",l="Z"),e="["+a+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=l+'[")]',this.format(e+t+n+r)}function hi(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=Q(this,e);return this.localeData().postformat(t)}function pi(e,t){return this.isValid()&&(D(e)&&e.isValid()||sr(e).isValid())?qr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mi(e){return this.from(sr(),e)}function gi(e,t){return this.isValid()&&(D(e)&&e.isValid()||sr(e).isValid())?qr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function vi(e){return this.to(sr(),e)}function yi(e){var t;return void 0===e?this._locale._abbr:(null!=(t=Tn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var bi=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function wi(){return this._locale}var xi=1e3,_i=60*xi,Si=60*_i,ki=3506328*Si;function Ci(e,t){return(e%t+t)%t}function Ei(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-ki:new Date(e,t,n).valueOf()}function Oi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-ki:Date.UTC(e,t,n)}function ji(e){var t,n;if(void 0===(e=pe(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?Oi:Ei,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Ci(t+(this._isUTC?0:this.utcOffset()*_i),Si);break;case"minute":t=this._d.valueOf(),t-=Ci(t,_i);break;case"second":t=this._d.valueOf(),t-=Ci(t,xi)}return this._d.setTime(t),r.updateOffset(this,!0),this}function $i(e){var t,n;if(void 0===(e=pe(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?Oi:Ei,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Si-Ci(t+(this._isUTC?0:this.utcOffset()*_i),Si)-1;break;case"minute":t=this._d.valueOf(),t+=_i-Ci(t,_i)-1;break;case"second":t=this._d.valueOf(),t+=xi-Ci(t,xi)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function Ti(){return this._d.valueOf()-6e4*(this._offset||0)}function Ai(){return Math.floor(this.valueOf()/1e3)}function Pi(){return new Date(this.valueOf())}function Di(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ri(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ii(){return this.isValid()?this.toISOString():null}function Mi(){return E(this)}function Li(){return _({},C(this))}function Ni(){return C(this).overflow}function Fi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function qi(e,t){var n,a,l,f=this._eras||Tn("en")._eras;for(n=0,a=f.length;n<a;++n)switch("string"==typeof f[n].since&&(l=r(f[n].since).startOf("day"),f[n].since=l.valueOf()),typeof f[n].until){case"undefined":f[n].until=1/0;break;case"string":l=r(f[n].until).startOf("day").valueOf(),f[n].until=l.valueOf()}return f}function Bi(e,t,n){var r,a,l,f,d,h=this.eras();for(e=e.toUpperCase(),r=0,a=h.length;r<a;++r)if(l=h[r].name.toUpperCase(),f=h[r].abbr.toUpperCase(),d=h[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(f===e)return h[r];break;case"NNNN":if(l===e)return h[r];break;case"NNNNN":if(d===e)return h[r]}else if([l,f,d].indexOf(e)>=0)return h[r]}function Ui(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Hi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function zi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Vi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Wi(){var e,t,n,a,l=this.localeData().eras();for(e=0,t=l.length;e<t;++e)if(n=l[e].since<=l[e].until?1:-1,a=this.clone().startOf("day").valueOf(),l[e].since<=a&&a<=l[e].until||l[e].until<=a&&a<=l[e].since)return(this.year()-r(l[e].since).year())*n+l[e].offset;return this.year()}function Zi(e){return d(this,"_erasNameRegex")||eo.call(this),e?this._erasNameRegex:this._erasRegex}function Gi(e){return d(this,"_erasAbbrRegex")||eo.call(this),e?this._erasAbbrRegex:this._erasRegex}function Ki(e){return d(this,"_erasNarrowRegex")||eo.call(this),e?this._erasNarrowRegex:this._erasRegex}function Yi(e,t){return t.erasAbbrRegex(e)}function Xi(e,t){return t.erasNameRegex(e)}function Ji(e,t){return t.erasNarrowRegex(e)}function Qi(e,t){return t._eraYearOrdinalRegex||Fe}function eo(){var e,t,n=[],r=[],a=[],l=[],f=this.eras();for(e=0,t=f.length;e<t;++e)r.push(Ge(f[e].name)),n.push(Ge(f[e].abbr)),a.push(Ge(f[e].narrow)),l.push(Ge(f[e].name)),l.push(Ge(f[e].abbr)),l.push(Ge(f[e].narrow));this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function to(e,t){Y(0,[e,e.length],0,t)}function no(e){return lo.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ro(e){return lo.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function io(){return Rt(this.year(),1,4)}function oo(){return Rt(this.isoWeekYear(),1,4)}function ao(){var e=this.localeData()._week;return Rt(this.year(),e.dow,e.doy)}function so(){var e=this.localeData()._week;return Rt(this.weekYear(),e.dow,e.doy)}function lo(e,t,n,r,a){var l;return null==e?Dt(this,r,a).year:(t>(l=Rt(e,r,a))&&(t=l),co.call(this,e,t,n,r,a))}function co(e,t,n,r,a){var l=Pt(e,t,n,r,a),f=Tt(l.year,0,l.dayOfYear);return this.year(f.getUTCFullYear()),this.month(f.getUTCMonth()),this.date(f.getUTCDate()),this}function uo(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}Y("N",0,0,"eraAbbr"),Y("NN",0,0,"eraAbbr"),Y("NNN",0,0,"eraAbbr"),Y("NNNN",0,0,"eraName"),Y("NNNNN",0,0,"eraNarrow"),Y("y",["y",1],"yo","eraYear"),Y("y",["yy",2],0,"eraYear"),Y("y",["yyy",3],0,"eraYear"),Y("y",["yyyy",4],0,"eraYear"),Ve("N",Yi),Ve("NN",Yi),Ve("NNN",Yi),Ve("NNNN",Xi),Ve("NNNNN",Ji),Ye(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var a=n._locale.erasParse(e,r,n._strict);a?C(n).era=a:C(n).invalidEra=e})),Ve("y",Fe),Ve("yy",Fe),Ve("yyy",Fe),Ve("yyyy",Fe),Ve("yo",Qi),Ye(["y","yy","yyy","yyyy"],et),Ye(["yo"],(function(e,t,n,r){var a;n._locale._eraYearOrdinalRegex&&(a=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[et]=n._locale.eraYearOrdinalParse(e,a):t[et]=parseInt(e,10)})),Y(0,["gg",2],0,(function(){return this.weekYear()%100})),Y(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),to("gggg","weekYear"),to("ggggg","weekYear"),to("GGGG","isoWeekYear"),to("GGGGG","isoWeekYear"),he("weekYear","gg"),he("isoWeekYear","GG"),ve("weekYear",1),ve("isoWeekYear",1),Ve("G",qe),Ve("g",qe),Ve("GG",De,$e),Ve("gg",De,$e),Ve("GGGG",Le,Ae),Ve("gggg",Le,Ae),Ve("GGGGG",Ne,Pe),Ve("ggggg",Ne,Pe),Xe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=xe(e)})),Xe(["gg","GG"],(function(e,t,n,a){t[a]=r.parseTwoDigitYear(e)})),Y("Q",0,"Qo","quarter"),he("quarter","Q"),ve("quarter",7),Ve("Q",je),Ye("Q",(function(e,t){t[tt]=3*(xe(e)-1)})),Y("D",["DD",2],"Do","date"),he("date","D"),ve("date",9),Ve("D",De),Ve("DD",De,$e),Ve("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ye(["D","DD"],nt),Ye("Do",(function(e,t){t[nt]=xe(e.match(De)[0])}));var fo=_e("Date",!0);function ho(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}Y("DDD",["DDDD",3],"DDDo","dayOfYear"),he("dayOfYear","DDD"),ve("dayOfYear",4),Ve("DDD",Me),Ve("DDDD",Te),Ye(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=xe(e)})),Y("m",["mm",2],0,"minute"),he("minute","m"),ve("minute",14),Ve("m",De),Ve("mm",De,$e),Ye(["m","mm"],it);var po=_e("Minutes",!1);Y("s",["ss",2],0,"second"),he("second","s"),ve("second",15),Ve("s",De),Ve("ss",De,$e),Ye(["s","ss"],ot);var mo,go,vo=_e("Seconds",!1);for(Y("S",0,0,(function(){return~~(this.millisecond()/100)})),Y(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),Y(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),Y(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),Y(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),Y(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),Y(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),he("millisecond","ms"),ve("millisecond",16),Ve("S",Me,je),Ve("SS",Me,$e),Ve("SSS",Me,Te),mo="SSSS";mo.length<=9;mo+="S")Ve(mo,Fe);function yo(e,t){t[at]=xe(1e3*("0."+e))}for(mo="S";mo.length<=9;mo+="S")Ye(mo,yo);function bo(){return this._isUTC?"UTC":""}function wo(){return this._isUTC?"Coordinated Universal Time":""}go=_e("Milliseconds",!1),Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");var xo=P.prototype;function _o(e){return sr(1e3*e)}function So(){return sr.apply(null,arguments).parseZone()}function ko(e){return e}xo.add=Wr,xo.calendar=ei,xo.clone=ti,xo.diff=li,xo.endOf=$i,xo.format=hi,xo.from=pi,xo.fromNow=mi,xo.to=gi,xo.toNow=vi,xo.get=Ce,xo.invalidAt=Ni,xo.isAfter=ni,xo.isBefore=ri,xo.isBetween=ii,xo.isSame=oi,xo.isSameOrAfter=ai,xo.isSameOrBefore=si,xo.isValid=Mi,xo.lang=bi,xo.locale=yi,xo.localeData=wi,xo.max=cr,xo.min=lr,xo.parsingFlags=Li,xo.set=Ee,xo.startOf=ji,xo.subtract=Zr,xo.toArray=Di,xo.toObject=Ri,xo.toDate=Pi,xo.toISOString=fi,xo.inspect=di,"undefined"!=typeof Symbol&&null!=Symbol.for&&(xo[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),xo.toJSON=Ii,xo.toString=ui,xo.unix=Ai,xo.valueOf=Ti,xo.creationData=Fi,xo.eraName=Hi,xo.eraNarrow=zi,xo.eraAbbr=Vi,xo.eraYear=Wi,xo.year=Ot,xo.isLeapYear=jt,xo.weekYear=no,xo.isoWeekYear=ro,xo.quarter=xo.quarters=uo,xo.month=xt,xo.daysInMonth=_t,xo.week=xo.weeks=Ft,xo.isoWeek=xo.isoWeeks=qt,xo.weeksInYear=ao,xo.weeksInWeekYear=so,xo.isoWeeksInYear=io,xo.isoWeeksInISOWeekYear=oo,xo.date=fo,xo.day=xo.days=tn,xo.weekday=nn,xo.isoWeekday=rn,xo.dayOfYear=ho,xo.hour=xo.hours=gn,xo.minute=xo.minutes=po,xo.second=xo.seconds=vo,xo.millisecond=xo.milliseconds=go,xo.utcOffset=Or,xo.utc=$r,xo.local=Tr,xo.parseZone=Ar,xo.hasAlignedHourOffset=Pr,xo.isDST=Dr,xo.isLocal=Ir,xo.isUtcOffset=Mr,xo.isUtc=Lr,xo.isUTC=Lr,xo.zoneAbbr=bo,xo.zoneName=wo,xo.dates=I("dates accessor is deprecated. Use date instead.",fo),xo.months=I("months accessor is deprecated. Use month instead",xt),xo.years=I("years accessor is deprecated. Use year instead",Ot),xo.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",jr),xo.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Rr);var Co=U.prototype;function Eo(e,t,n,r){var a=Tn(),l=S().set(r,t);return a[n](l,e)}function Oo(e,t,n){if(y(e)&&(t=e,e=void 0),e=e||"",null!=t)return Eo(e,t,n,"month");var r,a=[];for(r=0;r<12;r++)a[r]=Eo(e,r,n,"month");return a}function jo(e,t,n,r){"boolean"==typeof e?(y(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,y(t)&&(n=t,t=void 0),t=t||"");var a,l=Tn(),f=e?l._week.dow:0,d=[];if(null!=n)return Eo(t,(n+f)%7,r,"day");for(a=0;a<7;a++)d[a]=Eo(t,(a+f)%7,r,"day");return d}function $o(e,t){return Oo(e,t,"months")}function To(e,t){return Oo(e,t,"monthsShort")}function Ao(e,t,n){return jo(e,t,n,"weekdays")}function Po(e,t,n){return jo(e,t,n,"weekdaysShort")}function Do(e,t,n){return jo(e,t,n,"weekdaysMin")}Co.calendar=z,Co.longDateFormat=ne,Co.invalidDate=oe,Co.ordinal=le,Co.preparse=ko,Co.postformat=ko,Co.relativeTime=ue,Co.pastFuture=fe,Co.set=q,Co.eras=qi,Co.erasParse=Bi,Co.erasConvertYear=Ui,Co.erasAbbrRegex=Gi,Co.erasNameRegex=Zi,Co.erasNarrowRegex=Ki,Co.months=gt,Co.monthsShort=vt,Co.monthsParse=bt,Co.monthsRegex=kt,Co.monthsShortRegex=St,Co.week=It,Co.firstDayOfYear=Nt,Co.firstDayOfWeek=Lt,Co.weekdays=Yt,Co.weekdaysMin=Jt,Co.weekdaysShort=Xt,Co.weekdaysParse=en,Co.weekdaysRegex=on,Co.weekdaysShortRegex=an,Co.weekdaysMinRegex=sn,Co.isPM=pn,Co.meridiem=vn,On("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===xe(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=I("moment.lang is deprecated. Use moment.locale instead.",On),r.langData=I("moment.langData is deprecated. Use moment.localeData instead.",Tn);var Ro=Math.abs;function Io(){var e=this._data;return this._milliseconds=Ro(this._milliseconds),this._days=Ro(this._days),this._months=Ro(this._months),e.milliseconds=Ro(e.milliseconds),e.seconds=Ro(e.seconds),e.minutes=Ro(e.minutes),e.hours=Ro(e.hours),e.months=Ro(e.months),e.years=Ro(e.years),this}function Mo(e,t,n,r){var a=qr(t,n);return e._milliseconds+=r*a._milliseconds,e._days+=r*a._days,e._months+=r*a._months,e._bubble()}function Lo(e,t){return Mo(this,e,t,1)}function No(e,t){return Mo(this,e,t,-1)}function Fo(e){return e<0?Math.floor(e):Math.ceil(e)}function qo(){var e,t,n,r,a,l=this._milliseconds,f=this._days,d=this._months,h=this._data;return l>=0&&f>=0&&d>=0||l<=0&&f<=0&&d<=0||(l+=864e5*Fo(Uo(d)+f),f=0,d=0),h.milliseconds=l%1e3,e=we(l/1e3),h.seconds=e%60,t=we(e/60),h.minutes=t%60,n=we(t/60),h.hours=n%24,f+=we(n/24),d+=a=we(Bo(f)),f-=Fo(Uo(a)),r=we(d/12),d%=12,h.days=f,h.months=d,h.years=r,this}function Bo(e){return 4800*e/146097}function Uo(e){return 146097*e/4800}function Ho(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=pe(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Bo(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Uo(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function zo(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*xe(this._months/12):NaN}function Vo(e){return function(){return this.as(e)}}var Wo=Vo("ms"),Zo=Vo("s"),Go=Vo("m"),Ko=Vo("h"),Yo=Vo("d"),Xo=Vo("w"),Jo=Vo("M"),Qo=Vo("Q"),ea=Vo("y");function ta(){return qr(this)}function na(e){return e=pe(e),this.isValid()?this[e+"s"]():NaN}function ra(e){return function(){return this.isValid()?this._data[e]:NaN}}var ia=ra("milliseconds"),oa=ra("seconds"),aa=ra("minutes"),sa=ra("hours"),la=ra("days"),ca=ra("months"),ua=ra("years");function fa(){return we(this.days()/7)}var da=Math.round,ha={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function pa(e,t,n,r,a){return a.relativeTime(t||1,!!n,e,r)}function ma(e,t,n,r){var a=qr(e).abs(),l=da(a.as("s")),f=da(a.as("m")),d=da(a.as("h")),h=da(a.as("d")),p=da(a.as("M")),y=da(a.as("w")),w=da(a.as("y")),x=l<=n.ss&&["s",l]||l<n.s&&["ss",l]||f<=1&&["m"]||f<n.m&&["mm",f]||d<=1&&["h"]||d<n.h&&["hh",d]||h<=1&&["d"]||h<n.d&&["dd",h];return null!=n.w&&(x=x||y<=1&&["w"]||y<n.w&&["ww",y]),(x=x||p<=1&&["M"]||p<n.M&&["MM",p]||w<=1&&["y"]||["yy",w])[2]=t,x[3]=+e>0,x[4]=r,pa.apply(null,x)}function ga(e){return void 0===e?da:"function"==typeof e&&(da=e,!0)}function va(e,t){return void 0!==ha[e]&&(void 0===t?ha[e]:(ha[e]=t,"s"===e&&(ha.ss=t-1),!0))}function ya(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,a=!1,l=ha;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(a=e),"object"==typeof t&&(l=Object.assign({},ha,t),null!=t.s&&null==t.ss&&(l.ss=t.s-1)),r=ma(this,!a,l,n=this.localeData()),a&&(r=n.pastFuture(+this,r)),n.postformat(r)}var ba=Math.abs;function wa(e){return(e>0)-(e<0)||+e}function xa(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,a,l,f,d,h=ba(this._milliseconds)/1e3,p=ba(this._days),y=ba(this._months),w=this.asSeconds();return w?(e=we(h/60),t=we(e/60),h%=60,e%=60,n=we(y/12),y%=12,r=h?h.toFixed(3).replace(/\.?0+$/,""):"",a=w<0?"-":"",l=wa(this._months)!==wa(w)?"-":"",f=wa(this._days)!==wa(w)?"-":"",d=wa(this._milliseconds)!==wa(w)?"-":"",a+"P"+(n?l+n+"Y":"")+(y?l+y+"M":"")+(p?f+p+"D":"")+(t||e||h?"T":"")+(t?d+t+"H":"")+(e?d+e+"M":"")+(h?d+r+"S":"")):"P0D"}var _a=yr.prototype;return _a.isValid=gr,_a.abs=Io,_a.add=Lo,_a.subtract=No,_a.as=Ho,_a.asMilliseconds=Wo,_a.asSeconds=Zo,_a.asMinutes=Go,_a.asHours=Ko,_a.asDays=Yo,_a.asWeeks=Xo,_a.asMonths=Jo,_a.asQuarters=Qo,_a.asYears=ea,_a.valueOf=zo,_a._bubble=qo,_a.clone=ta,_a.get=na,_a.milliseconds=ia,_a.seconds=oa,_a.minutes=aa,_a.hours=sa,_a.days=la,_a.weeks=fa,_a.months=ca,_a.years=ua,_a.humanize=ya,_a.toISOString=xa,_a.toString=xa,_a.toJSON=xa,_a.locale=yi,_a.localeData=wi,_a.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xa),_a.lang=bi,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),Ve("x",qe),Ve("X",He),Ye("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Ye("x",(function(e,t,n){n._d=new Date(xe(e))})),r.version="2.29.4",a(sr),r.fn=xo,r.min=fr,r.max=dr,r.now=hr,r.utc=S,r.unix=_o,r.months=$o,r.isDate=w,r.locale=On,r.invalid=O,r.duration=qr,r.isMoment=D,r.weekdays=Ao,r.parseZone=So,r.localeData=Tn,r.isDuration=br,r.monthsShort=To,r.weekdaysMin=Do,r.defineLocale=jn,r.updateLocale=$n,r.locales=An,r.weekdaysShort=Po,r.normalizeUnits=pe,r.relativeTimeRounding=ga,r.relativeTimeThreshold=va,r.calendarFormat=Qr,r.prototype=xo,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},5450:function(e){e.exports=function(){var e={},t=e._fns={};return e.emit=function(e,n,r,a,l,f,d){var h=function(e){var n=t[e]?t[e]:[],r=e.indexOf(":"),a=-1===r?[e]:[e.substring(0,r),e.substring(r+1)],l=Object.keys(t),f=0,d=l.length;for(;f<d;f++){var h=l[f];if("*"===h&&(n=n.concat(t[h])),2===a.length&&a[0]===h){n=n.concat(t[h]);break}}return n}(e);h.length&&function(e,t,n){var r=0,a=t.length;for(;r<a&&t[r];r++)t[r].event=e,t[r].apply(t[r],n)}(e,h,[n,r,a,l,f,d])},e.on=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.once=function(t,n){this.on(t,(function r(){n.apply(this,arguments),e.off(t,r)}))},e.off=function(e,t){var n=[];if(e&&t)for(var r=this._fns[e],a=0,l=r?r.length:0;a<l;a++)r[a]!==t&&n.push(r[a]);n.length?this._fns[e]=n:delete this._fns[e]},e}},27133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(60019),a=n(34519),l=n(51525),f=function(){function e(){this.__isFirstRender=!0,this.state={},this.props={}}return e.prototype.$onChanges=function(e){var t=this.props,n=a(e,"currentValue"),l=r({},this.props,n);if(this.__isFirstRender)r(this,{props:l}),this.componentWillMount(),this.render(),this.__isFirstRender=!1;else{if(!this.didPropsChange(n,t))return;this.componentWillReceiveProps(l);var f=this.shouldComponentUpdate(l,this.state);if(r(this,{props:l}),!f)return;this.componentWillUpdate(this.props,this.state),this.render(),this.componentDidUpdate(this.props,this.state)}},e.prototype.$postLink=function(){this.componentDidMount()},e.prototype.$onDestroy=function(){this.componentWillUnmount()},e.prototype.didPropsChange=function(e,t){return l(e,(function(e,n){return e!==t[n]}))},e.prototype.componentWillMount=function(){},e.prototype.componentDidMount=function(){},e.prototype.componentWillReceiveProps=function(e){},e.prototype.shouldComponentUpdate=function(e,t){return!0},e.prototype.componentWillUpdate=function(e,t){},e.prototype.componentDidUpdate=function(e,t){},e.prototype.componentWillUnmount=function(){},e.prototype.render=function(){},e}();t.default=f},37320:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var l,f,d=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),h=1;h<arguments.length;h++){for(var p in l=Object(arguments[h]))n.call(l,p)&&(d[p]=l[p]);if(t){f=t(l);for(var y=0;y<f.length;y++)r.call(l,f[y])&&(d[f[y]]=l[f[y]])}}return d}},75691:function(e,t,n){"use strict";var r;if(!Object.keys){var a=Object.prototype.hasOwnProperty,l=Object.prototype.toString,f=n(30801),d=Object.prototype.propertyIsEnumerable,h=!d.call({toString:null},"toString"),p=d.call((function(){}),"prototype"),y=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],w=function(e){var t=e.constructor;return t&&t.prototype===e},x={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},_=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!x["$"+e]&&a.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{w(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===l.call(e),r=f(e),d=t&&"[object String]"===l.call(e),x=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var S=p&&n;if(d&&e.length>0&&!a.call(e,0))for(var k=0;k<e.length;++k)x.push(String(k));if(r&&e.length>0)for(var C=0;C<e.length;++C)x.push(String(C));else for(var E in e)S&&"prototype"===E||!a.call(e,E)||x.push(String(E));if(h)for(var O=function(e){if("undefined"==typeof window||!_)return w(e);try{return w(e)}catch(e){return!1}}(e),j=0;j<y.length;++j)O&&"constructor"===y[j]||!a.call(e,y[j])||x.push(y[j]);return x}}e.exports=r},33464:function(e,t,n){"use strict";var r=Array.prototype.slice,a=n(30801),l=Object.keys,f=l?function(e){return l(e)}:n(75691),d=Object.keys;f.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return a(e)?d(r.call(e)):d(e)})}else Object.keys=f;return Object.keys||f},e.exports=f},30801:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},92427:function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,{Component:function(){return W},cloneElement:function(){return y},createElement:function(){return d},h:function(){return d},options:function(){return a},render:function(){return Z},rerender:function(){return S}});var a={},l=[],f=[];function d(e,t){var n,d,h,p,y=f;for(p=arguments.length;p-- >2;)l.push(arguments[p]);for(t&&null!=t.children&&(l.length||l.push(t.children),delete t.children);l.length;)if((d=l.pop())&&void 0!==d.pop)for(p=d.length;p--;)l.push(d[p]);else"boolean"==typeof d&&(d=null),(h="function"!=typeof e)&&(null==d?d="":"number"==typeof d?d=String(d):"string"!=typeof d&&(h=!1)),h&&n?y[y.length-1]+=d:y===f?y=[d]:y.push(d),n=h;var w=new r;return w.nodeName=e,w.children=y,w.attributes=null==t?void 0:t,w.key=null==t?void 0:t.key,void 0!==a.vnode&&a.vnode(w),w}function h(e,t){for(var n in t)e[n]=t[n];return e}var p="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function y(e,t){return d(e.nodeName,h(h({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var w=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,x=[];function _(e){!e._dirty&&(e._dirty=!0)&&1==x.push(e)&&(a.debounceRendering||p)(S)}function S(){var e,t=x;for(x=[];e=t.pop();)e._dirty&&z(e)}function k(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&C(e,t.nodeName):n||e._componentConstructor===t.nodeName}function C(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function E(e){var t=h({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function O(e){var t=e.parentNode;t&&t.removeChild(e)}function j(e,t,n,r,a){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||a)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var l in n)l in r||(e.style[l]="");for(var l in r)e.style[l]="number"==typeof r[l]&&!1===w.test(l)?r[l]+"px":r[l]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var f=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,T,f):e.removeEventListener(t,T,f),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!a&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var d=a&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?d?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(d?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function T(e){return this._listeners[e.type](a.event&&a.event(e)||e)}var A=[],P=0,D=!1,R=!1;function I(){for(var e;e=A.pop();)a.afterMount&&a.afterMount(e),e.componentDidMount&&e.componentDidMount()}function M(e,t,n,r,a,l){P++||(D=null!=a&&void 0!==a.ownerSVGElement,R=null!=e&&!("__preactattr_"in e));var f=L(e,t,n,r,l);return a&&f.parentNode!==a&&a.appendChild(f),--P||(R=!1,l||I()),f}function L(e,t,n,r,a){var l=e,f=D;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||a)?e.nodeValue!=t&&(e.nodeValue=t):(l=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(l,e),N(e,!0))),l.__preactattr_=!0,l;var d,h,p=t.nodeName;if("function"==typeof p)return function(e,t,n,r){var a=e&&e._component,l=a,f=e,d=a&&e._componentConstructor===t.nodeName,h=d,p=E(t);for(;a&&!h&&(a=a._parentComponent);)h=a.constructor===t.nodeName;a&&h&&(!r||a._component)?(H(a,p,3,n,r),e=a.base):(l&&!d&&(V(l),e=f=null),a=B(t.nodeName,p,n),e&&!a.nextBase&&(a.nextBase=e,f=null),H(a,p,1,n,r),e=a.base,f&&e!==f&&(f._component=null,N(f,!1)));return e}(e,t,n,r);if(D="svg"===p||"foreignObject"!==p&&D,p=String(p),(!e||!C(e,p))&&(d=p,(h=D?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d)).normalizedNodeName=d,l=h,e)){for(;e.firstChild;)l.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(l,e),N(e,!0)}var y=l.firstChild,w=l.__preactattr_,x=t.children;if(null==w){w=l.__preactattr_={};for(var _=l.attributes,S=_.length;S--;)w[_[S].name]=_[S].value}return!R&&x&&1===x.length&&"string"==typeof x[0]&&null!=y&&void 0!==y.splitText&&null==y.nextSibling?y.nodeValue!=x[0]&&(y.nodeValue=x[0]):(x&&x.length||null!=y)&&function(e,t,n,r,a){var l,f,d,h,p,y=e.childNodes,w=[],x={},_=0,S=0,C=y.length,E=0,j=t?t.length:0;if(0!==C)for(var T=0;T<C;T++){var A=y[T],P=A.__preactattr_;null!=(D=j&&P?A._component?A._component.__key:P.key:null)?(_++,x[D]=A):(P||(void 0!==A.splitText?!a||A.nodeValue.trim():a))&&(w[E++]=A)}if(0!==j)for(T=0;T<j;T++){var D;if(p=null,null!=(D=(h=t[T]).key))_&&void 0!==x[D]&&(p=x[D],x[D]=void 0,_--);else if(!p&&S<E)for(l=S;l<E;l++)if(void 0!==w[l]&&k(f=w[l],h,a)){p=f,w[l]=void 0,l===E-1&&E--,l===S&&S++;break}p=L(p,h,n,r),d=y[T],p&&p!==e&&p!==d&&(null==d?e.appendChild(p):p===d.nextSibling?O(d):e.insertBefore(p,d))}if(_)for(var T in x)void 0!==x[T]&&N(x[T],!1);for(;S<=E;)void 0!==(p=w[E--])&&N(p,!1)}(l,x,n,r,R||null!=w.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||j(e,r,n[r],n[r]=void 0,D);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||j(e,r,n[r],n[r]=t[r],D)}(l,t.attributes,w),D=f,l}function N(e,t){var n=e._component;n?V(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||O(e),F(e))}function F(e){for(e=e.lastChild;e;){var t=e.previousSibling;N(e,!0),e=t}}var q={};function B(e,t,n){var r,a=q[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),W.call(r,t,n)):((r=new W(t,n)).constructor=e,r.render=U),a)for(var l=a.length;l--;)if(a[l].constructor===e){r.nextBase=a[l].nextBase,a.splice(l,1);break}return r}function U(e,t,n){return this.constructor(e,n)}function H(e,t,n,r,l){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||l?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===a.syncComponentUpdates&&e.base?_(e):z(e,1,l)),e.__ref&&e.__ref(e))}function z(e,t,n,r){if(!e._disable){var l,f,d,p=e.props,y=e.state,w=e.context,x=e.prevProps||p,_=e.prevState||y,S=e.prevContext||w,k=e.base,C=e.nextBase,O=k||C,j=e._component,T=!1;if(k&&(e.props=x,e.state=_,e.context=S,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(p,y,w)?T=!0:e.componentWillUpdate&&e.componentWillUpdate(p,y,w),e.props=p,e.state=y,e.context=w),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!T){l=e.render(p,y,w),e.getChildContext&&(w=h(h({},w),e.getChildContext()));var D,R,L=l&&l.nodeName;if("function"==typeof L){var F=E(l);(f=j)&&f.constructor===L&&F.key==f.__key?H(f,F,1,w,!1):(D=f,e._component=f=B(L,F,w),f.nextBase=f.nextBase||C,f._parentComponent=e,H(f,F,0,w,!1),z(f,1,n,!0)),R=f.base}else d=O,(D=j)&&(d=e._component=null),(O||1===t)&&(d&&(d._component=null),R=M(d,l,w,n||!k,O&&O.parentNode,!0));if(O&&R!==O&&f!==j){var q=O.parentNode;q&&R!==q&&(q.replaceChild(R,O),D||(O._component=null,N(O,!1)))}if(D&&V(D),e.base=R,R&&!r){for(var U=e,W=e;W=W._parentComponent;)(U=W).base=R;R._component=U,R._componentConstructor=U.constructor}}if(!k||n?A.unshift(e):T||(e.componentDidUpdate&&e.componentDidUpdate(x,_,S),a.afterUpdate&&a.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);P||r||I()}}function V(e){a.beforeUnmount&&a.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?V(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,O(t),function(e){var t=e.constructor.name;(q[t]||(q[t]=[])).push(e)}(e),F(t)),e.__ref&&e.__ref(null)}function W(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function Z(e,t,n){return M(n,e,{},!1,t,!1)}h(W.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=h({},n)),h(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),_(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),z(this,2)},render:function(){}});var G={h:d,createElement:d,cloneElement:y,Component:W,render:Z,rerender:S,options:a};t.default=G},70688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,l.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=null;return t.forEach((function(e){if(null==a){var t=e.apply(void 0,n);null!=t&&(a=t)}})),a}))};var r,a=n(57965),l=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},25539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=f(n(2784)),l=f(n(57965));function f(e){return e&&e.__esModule?e:{default:e}}t.default=(0,l.default)((function(e,t,n,l,f){var d=e[t],h=void 0===d?"undefined":r(d);return a.default.isValidElement(d)?new Error("Invalid "+l+" `"+f+"` of type ReactElement supplied to `"+n+"`, expected a ReactComponent or a DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):"object"===h&&"function"==typeof d.render||1===d.nodeType?null:new Error("Invalid "+l+" `"+f+"` of value `"+d+"` supplied to `"+n+"`, expected a ReactComponent or a DOMElement.")})),e.exports=t.default},81083:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var r,a=n(41449),l=(r=a)&&r.__esModule?r:{default:r};var f={};function d(e,t){return function(n,r,a,d,h){var p=a||"<<anonymous>>",y=h||r;if(null!=n[r]){var w=a+"."+r;(0,l.default)(f[w],"The "+d+" `"+y+"` of `"+p+"` is deprecated. "+t+"."),f[w]=!0}for(var x=arguments.length,_=Array(x>5?x-5:0),S=5;S<x;S++)_[S-5]=arguments[S];return e.apply(void 0,[n,r,a,d,h].concat(_))}}d._resetWarned=function(){f={}},e.exports=t.default},51904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(2784)),a=n(31976),l=f(n(57965));function f(e){return e&&e.__esModule?e:{default:e}}t.default=(0,l.default)((function(e,t,n,l,f){var d=e[t];return r.default.isValidElement(d)?new Error("Invalid "+l+" `"+f+"` of type ReactElement supplied to `"+n+"`,expected an element type (a string , component class, or function component)."):(0,a.isValidElementType)(d)?null:new Error("Invalid "+l+" `"+f+"` of value `"+d+"` supplied to `"+n+"`, expected an element type (a string , component class, or function component).")})),e.exports=t.default},40368:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,r,a,l){var f=r||"<<anonymous>>",d=l||n;if(null==t[n])return new Error("The "+a+" `"+d+"` is required to make `"+f+"` accessible for users of assistive technologies such as screen readers.");for(var h=arguments.length,p=Array(h>5?h-5:0),y=5;y<h;y++)p[y-5]=arguments[y];return e.apply(void 0,[t,n,r,a,l].concat(p))}},e.exports=t.default},57965:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,a,l,f){var d=a||"<<anonymous>>",h=f||r;if(null==n[r])return t?new Error("Required "+l+" `"+h+"` was not specified in `"+d+"`."):null;for(var p=arguments.length,y=Array(p>6?p-6:0),w=6;w<p;w++)y[w-6]=arguments[w];return e.apply(void 0,[n,r,d,l,h].concat(y))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},55702:function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,l=n?Symbol.for("react.fragment"):60107,f=n?Symbol.for("react.strict_mode"):60108,d=n?Symbol.for("react.profiler"):60114,h=n?Symbol.for("react.provider"):60109,p=n?Symbol.for("react.context"):60110,y=n?Symbol.for("react.async_mode"):60111,w=n?Symbol.for("react.concurrent_mode"):60111,x=n?Symbol.for("react.forward_ref"):60112,_=n?Symbol.for("react.suspense"):60113,S=n?Symbol.for("react.suspense_list"):60120,k=n?Symbol.for("react.memo"):60115,C=n?Symbol.for("react.lazy"):60116,E=n?Symbol.for("react.block"):60121,O=n?Symbol.for("react.fundamental"):60117,j=n?Symbol.for("react.responder"):60118,T=n?Symbol.for("react.scope"):60119;function A(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case y:case w:case l:case d:case f:case _:return e;default:switch(e=e&&e.$$typeof){case p:case x:case C:case k:case h:return e;default:return t}}case a:return t}}}function P(e){return A(e)===w}t.AsyncMode=y,t.ConcurrentMode=w,t.ContextConsumer=p,t.ContextProvider=h,t.Element=r,t.ForwardRef=x,t.Fragment=l,t.Lazy=C,t.Memo=k,t.Portal=a,t.Profiler=d,t.StrictMode=f,t.Suspense=_,t.isAsyncMode=function(e){return P(e)||A(e)===y},t.isConcurrentMode=P,t.isContextConsumer=function(e){return A(e)===p},t.isContextProvider=function(e){return A(e)===h},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return A(e)===x},t.isFragment=function(e){return A(e)===l},t.isLazy=function(e){return A(e)===C},t.isMemo=function(e){return A(e)===k},t.isPortal=function(e){return A(e)===a},t.isProfiler=function(e){return A(e)===d},t.isStrictMode=function(e){return A(e)===f},t.isSuspense=function(e){return A(e)===_},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===l||e===w||e===d||e===f||e===_||e===S||"object"==typeof e&&null!==e&&(e.$$typeof===C||e.$$typeof===k||e.$$typeof===h||e.$$typeof===p||e.$$typeof===x||e.$$typeof===O||e.$$typeof===j||e.$$typeof===T||e.$$typeof===E)},t.typeOf=A},31976:function(e,t,n){"use strict";e.exports=n(55702)},41449:function(e){"use strict";var t=function(){};e.exports=t},68262:function(e,t,n){"use strict";var r=n(23586);function a(){}function l(){}l.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,l,f){if(f!==r){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:a};return n.PropTypes=n,n}},13980:function(e,t,n){e.exports=n(68262)()},23586:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},86802:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function e(n,r){var a=[];for(var l in n)if(t.call(n,l)){var f,d=n[l],h=encodeURIComponent(l);f="object"==typeof d?e(d,r?r+"["+h+"]":h):(r?r+"["+h+"]":h)+"="+encodeURIComponent(d),a.push(f)}return a.join("&")}},15002:function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,a,l){r=r||"&",a=a||"=";var f={};if("string"!=typeof e||0===e.length)return f;var d=/\+/g;e=e.split(r);var h=1e3;l&&"number"==typeof l.maxKeys&&(h=l.maxKeys);var p=e.length;h>0&&p>h&&(p=h);for(var y=0;y<p;++y){var w,x,_,S,k=e[y].replace(d,"%20"),C=k.indexOf(a);C>=0?(w=k.substr(0,C),x=k.substr(C+1)):(w=k,x=""),_=decodeURIComponent(w),S=decodeURIComponent(x),t(f,_)?n(f[_])?f[_].push(S):f[_]=[f[_],S]:f[_]=S}return f};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},75396:function(e){"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,l,f,d){return l=l||"&",f=f||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),(function(a){var d=encodeURIComponent(t(a))+f;return n(e[a])?r(e[a],(function(e){return d+encodeURIComponent(t(e))})).join(l):d+encodeURIComponent(t(e[a]))})).join(l):d?encodeURIComponent(t(d))+f+encodeURIComponent(t(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},74621:function(e,t,n){"use strict";t.decode=t.parse=n(15002),t.encode=t.stringify=n(75396)},97375:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function a(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,l,f=[];for(l in"string"!=typeof t&&(t="?"),e)if(n.call(e,l)){if((r=e[l])||null!=r&&!isNaN(r)||(r=""),l=a(l),r=a(r),null===l||null===r)continue;f.push(l+"="+r)}return f.length?t+f.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,a={};t=n.exec(e);){var l=r(t[1]),f=r(t[2]);null===l||null===f||l in a||(a[l]=f)}return a}},86186:function(e,t,n){"use strict";var r=n(69774),a=n.n(r),l=n(28845),f=n(45466),d=n(84080),h=n(72779),p=n.n(h),y=n(2784),w=n(13980),x=n.n(w),_=n(8558),S=n(17174),k=n(6880),C={onDismiss:x().func,closeLabel:x().string},E=function(e){function t(){return e.apply(this,arguments)||this}return(0,d.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.onDismiss,r=t.closeLabel,a=t.className,d=t.children,h=(0,f.Z)(t,["onDismiss","closeLabel","className","children"]),w=(0,_.D9)(h),x=w[0],S=w[1],C=!!n,E=(0,l.Z)({},(0,_.Nj)(x),((e={})[(0,_.O4)(x,"dismissable")]=C,e));return y.createElement("div",(0,l.Z)({},S,{role:"alert",className:p()(a,E)}),C&&y.createElement(k.Z,{onClick:n,label:r}),d)},t}(y.Component);E.propTypes=C,E.defaultProps={closeLabel:"Close alert"},t.Z=(0,_.KS)(a()(S.ZM),S.ZM.INFO,(0,_.Pn)("alert",E))},63584:function(e,t,n){"use strict";var r=n(69774),a=n.n(r),l=n(45466),f=n(28845),d=n(84080),h=n(72779),p=n.n(h),y=n(2784),w=n(13980),x=n.n(w),_=n(51904),S=n.n(_),k=n(8558),C=n(17174),E=n(49909),O={active:x().bool,disabled:x().bool,block:x().bool,onClick:x().func,componentClass:S(),href:x().string,type:x().oneOf(["button","reset","submit"])},j=function(e){function t(){return e.apply(this,arguments)||this}(0,d.Z)(t,e);var n=t.prototype;return n.renderAnchor=function(e,t){return y.createElement(E.Z,(0,f.Z)({},e,{className:p()(t,e.disabled&&"disabled")}))},n.renderButton=function(e,t){var n=e.componentClass,r=(0,l.Z)(e,["componentClass"]),a=n||"button";return y.createElement(a,(0,f.Z)({},r,{type:r.type||"button",className:t}))},n.render=function(){var e,t=this.props,n=t.active,r=t.block,a=t.className,d=(0,l.Z)(t,["active","block","className"]),h=(0,k.D9)(d),y=h[0],w=h[1],x=(0,f.Z)({},(0,k.Nj)(y),((e={active:n})[(0,k.O4)(y,"block")]=r,e)),_=p()(a,x);return w.href?this.renderAnchor(w,_):this.renderButton(w,_)},t}(y.Component);j.propTypes=O,j.defaultProps={active:!1,block:!1,disabled:!1},t.Z=(0,k.Pn)("btn",(0,k.F6)([C.$u.LARGE,C.$u.SMALL,C.$u.XSMALL],(0,k.KS)(a()(C.ZM).concat([C.bg.DEFAULT,C.bg.PRIMARY,C.bg.LINK]),C.bg.DEFAULT,j)))},42919:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(70688),x=n.n(w),_=n(63584),S=n(8558),k={vertical:y().bool,justified:y().bool,block:x()(y().bool,(function(e){var t=e.block,n=e.vertical;return t&&!n?new Error("`block` requires `vertical` to be set to have any effect"):null}))},C=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.block,l=t.justified,f=t.vertical,p=t.className,y=(0,a.Z)(t,["block","justified","vertical","className"]),w=(0,S.D9)(y),x=w[0],k=w[1],C=(0,r.Z)({},(0,S.Nj)(x),((e={})[(0,S.O4)(x)]=!f,e[(0,S.O4)(x,"vertical")]=f,e[(0,S.O4)(x,"justified")]=l,e[(0,S.O4)(_.Z.defaultProps,"block")]=n,e));return h.createElement("div",(0,r.Z)({},k,{className:d()(p,C)}))},t}(h.Component);C.propTypes=k,C.defaultProps={block:!1,justified:!1,vertical:!1},t.Z=(0,S.Pn)("btn-group",C)},6880:function(e,t,n){"use strict";var r=n(84080),a=n(13980),l=n.n(a),f=n(2784),d={label:l().string.isRequired,onClick:l().func},h=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.onClick;return f.createElement("button",{type:"button",className:"close",onClick:n},f.createElement("span",{"aria-hidden":"true"},"×"),f.createElement("span",{className:"sr-only"},t))},t}(f.Component);h.propTypes=d,h.defaultProps={label:"Close"},t.Z=h},83654:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(51904),x=n.n(w),_=n(8558),S=n(17174),k={componentClass:x(),xs:y().number,sm:y().number,md:y().number,lg:y().number,xsHidden:y().bool,smHidden:y().bool,mdHidden:y().bool,lgHidden:y().bool,xsOffset:y().number,smOffset:y().number,mdOffset:y().number,lgOffset:y().number,xsPush:y().number,smPush:y().number,mdPush:y().number,lgPush:y().number,xsPull:y().number,smPull:y().number,mdPull:y().number,lgPull:y().number},C=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,l=(0,a.Z)(e,["componentClass","className"]),f=(0,_.D9)(l),p=f[0],y=f[1],w=[];return S.Ts.forEach((function(e){function t(t,n){var r=""+e+t,a=y[r];null!=a&&w.push((0,_.O4)(p,""+e+n+"-"+a)),delete y[r]}t("",""),t("Offset","-offset"),t("Push","-push"),t("Pull","-pull");var n=e+"Hidden";y[n]&&w.push("hidden-"+e),delete y[n]})),h.createElement(t,(0,r.Z)({},y,{className:d()(n,w)}))},t}(h.Component);C.propTypes=k,C.defaultProps={componentClass:"div"},t.Z=(0,_.Pn)("col",C)},72300:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=(n(92564),n(8558)),x={htmlFor:y().string,srOnly:y().bool},_={$bs_formGroup:y().object},S=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.context.$bs_formGroup,t=e&&e.controlId,n=this.props,l=n.htmlFor,f=void 0===l?t:l,p=n.srOnly,y=n.className,x=(0,a.Z)(n,["htmlFor","srOnly","className"]),_=(0,w.D9)(x),S=_[0],k=_[1],C=(0,r.Z)({},(0,w.Nj)(S),{"sr-only":p});return h.createElement("label",(0,r.Z)({},k,{htmlFor:f,className:d()(y,C)}))},t}(h.Component);S.propTypes=x,S.defaultProps={srOnly:!1},S.contextTypes=_,t.Z=(0,w.Pn)("control-label",S)},65687:function(e,t,n){"use strict";var r,a=n(28845),l=n(45466),f=n(84080),d=n(72779),h=n.n(d),p=n(2784),y=n(13980),w=n.n(y),x=n(85268),_={in:w().bool,mountOnEnter:w().bool,unmountOnExit:w().bool,appear:w().bool,timeout:w().number,onEnter:w().func,onEntering:w().func,onEntered:w().func,onExit:w().func,onExiting:w().func,onExited:w().func},S=((r={})[x.d0]="in",r[x.cn]="in",r),k=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=(0,l.Z)(e,["className","children"]);return p.createElement(x.ZP,r,(function(e,r){return p.cloneElement(n,(0,a.Z)({},r,{className:h()("fade",t,n.props.className,S[e])}))}))},t}(p.Component);k.propTypes=_,k.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},t.Z=k},87731:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(51904),x=n.n(w),_=(n(92564),n(72015)),S=n(16670),k=n(8558),C=n(17174),E={componentClass:x(),type:y().string,id:y().string,inputRef:y().func},O={$bs_formGroup:y().object},j=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e,t=this.context.$bs_formGroup,n=t&&t.controlId,l=this.props,f=l.componentClass,p=l.type,y=l.id,w=void 0===y?n:y,x=l.inputRef,_=l.className,S=l.bsSize,E=(0,a.Z)(l,["componentClass","type","id","inputRef","className","bsSize"]),O=(0,k.D9)(E),j=O[0],T=O[1];if("file"!==p&&(e=(0,k.Nj)(j)),S){var A=C.H2[S]||S;e[(0,k.O4)({bsClass:"input"},A)]=!0}return h.createElement(f,(0,r.Z)({},T,{type:p,id:w,ref:x,className:d()(_,e)}))},t}(h.Component);j.propTypes=E,j.defaultProps={componentClass:"input"},j.contextTypes=O,j.Feedback=_.Z,j.Static=S.Z,t.Z=(0,k.Pn)("form-control",(0,k.F6)([C.$u.SMALL,C.$u.LARGE],j))},72015:function(e,t,n){"use strict";var r=n(45466),a=n(28845),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(60440),x=n(8558),_={$bs_formGroup:y().object},S=function(e){function t(){return e.apply(this,arguments)||this}(0,l.Z)(t,e);var n=t.prototype;return n.getGlyph=function(e){switch(e){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null}},n.renderDefaultFeedback=function(e,t,n,r){var l=this.getGlyph(e&&e.validationState);return l?h.createElement(w.Z,(0,a.Z)({},r,{glyph:l,className:d()(t,n)})):null},n.render=function(){var e=this.props,t=e.className,n=e.children,l=(0,r.Z)(e,["className","children"]),f=(0,x.D9)(l),p=f[0],y=f[1],w=(0,x.Nj)(p);if(!n)return this.renderDefaultFeedback(this.context.$bs_formGroup,t,w,y);var _=h.Children.only(n);return h.cloneElement(_,(0,a.Z)({},y,{className:d()(_.props.className,t,w)}))},t}(h.Component);S.defaultProps={bsRole:"feedback"},S.contextTypes=_,t.Z=(0,x.Pn)("form-control-feedback",S)},16670:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(51904),y=n.n(p),w=n(8558),x={componentClass:y()},_=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,l=(0,a.Z)(e,["componentClass","className"]),f=(0,w.D9)(l),p=f[0],y=f[1],x=(0,w.Nj)(p);return h.createElement(t,(0,r.Z)({},y,{className:d()(n,x)}))},t}(h.Component);_.propTypes=x,_.defaultProps={componentClass:"p"},t.Z=(0,w.Pn)("form-control-static",_)},99262:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(8558),x=n(17174),_=n(96877),S={controlId:y().string,validationState:y().oneOf(["success","warning","error",null])},k={$bs_formGroup:y().object.isRequired},C=function(e){function t(){return e.apply(this,arguments)||this}(0,l.Z)(t,e);var n=t.prototype;return n.getChildContext=function(){var e=this.props;return{$bs_formGroup:{controlId:e.controlId,validationState:e.validationState}}},n.hasFeedback=function(e){var t=this;return _.Z.some(e,(function(e){return"feedback"===e.props.bsRole||e.props.children&&t.hasFeedback(e.props.children)}))},n.render=function(){var e=this.props,t=e.validationState,n=e.className,l=e.children,f=(0,a.Z)(e,["validationState","className","children"]),p=(0,w.vD)(f,["controlId"]),y=p[0],x=p[1],_=(0,r.Z)({},(0,w.Nj)(y),{"has-feedback":this.hasFeedback(l)});return t&&(_["has-"+t]=!0),h.createElement("div",(0,r.Z)({},x,{className:d()(n,_)}),l)},t}(h.Component);C.propTypes=S,C.childContextTypes=k,t.Z=(0,w.Pn)("form-group",(0,w.F6)([x.$u.LARGE,x.$u.SMALL],C))},60440:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(8558),x={glyph:y().string.isRequired},_=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.glyph,l=t.className,f=(0,a.Z)(t,["glyph","className"]),p=(0,w.D9)(f),y=p[0],x=p[1],_=(0,r.Z)({},(0,w.Nj)(y),((e={})[(0,w.O4)(y,n)]=!0,e));return h.createElement("span",(0,r.Z)({},x,{className:d()(l,_)}))},t}(h.Component);_.propTypes=x,t.Z=(0,w.Pn)("glyphicon",_)},2571:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(51904),x=n.n(w),_=n(8558),S={fluid:y().bool,componentClass:x()},k=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.fluid,n=e.componentClass,l=e.className,f=(0,a.Z)(e,["fluid","componentClass","className"]),p=(0,_.D9)(f),y=p[0],w=p[1],x=(0,_.O4)(y,t&&"fluid");return h.createElement(n,(0,r.Z)({},w,{className:d()(l,x)}))},t}(h.Component);k.propTypes=S,k.defaultProps={componentClass:"div",fluid:!1},t.Z=(0,_.Pn)("container",k)},24578:function(e,t,n){"use strict";var r=n(45466),a=n(84080),l=n(10435),f=n(28845),d=n(72779),h=n.n(d),p=n(81836),y=n(55759),w=n.n(y),x=n(96892),_=n.n(x),S=n(58616),k=n.n(S),C=n(2784),E=n(13980),O=n.n(E),j=n(28316),T=n(18650),A=n.n(T),P=n(83164),D=n.n(P),R=n(51904),I=n.n(R),M=n(65687),L=n(40007),N=n(62816),F=n(94396),q=n(42963),B=n(76741),U=n(8558),H=n(26394),z=n(2148),V=n(17174),W=(0,f.Z)({},A().propTypes,N.Z.propTypes,{backdrop:O().oneOf(["static",!0,!1]),backdropClassName:O().string,keyboard:O().bool,animation:O().bool,dialogComponentClass:I(),autoFocus:O().bool,enforceFocus:O().bool,restoreFocus:O().bool,show:O().bool,onHide:O().func,onEnter:O().func,onEntering:O().func,onEntered:O().func,onExit:O().func,onExiting:O().func,onExited:O().func,container:A().propTypes.container}),Z=(0,f.Z)({},A().defaultProps,{animation:!0,dialogComponentClass:N.Z}),G={$bs_modal:O().shape({onHide:O().func})};function K(e){return C.createElement(M.Z,(0,f.Z)({},e,{timeout:X.TRANSITION_DURATION}))}function Y(e){return C.createElement(M.Z,(0,f.Z)({},e,{timeout:X.BACKDROP_TRANSITION_DURATION}))}var X=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleDialogBackdropMouseDown=function(){r._waitingForMouseUp=!0},r.handleMouseUp=function(e){var t=r._modal.getDialogElement();r._waitingForMouseUp&&e.target===t&&(r._ignoreBackdropClick=!0),r._waitingForMouseUp=!1},r.handleEntering=r.handleEntering.bind((0,l.Z)((0,l.Z)(r))),r.handleExited=r.handleExited.bind((0,l.Z)((0,l.Z)(r))),r.handleWindowResize=r.handleWindowResize.bind((0,l.Z)((0,l.Z)(r))),r.handleDialogClick=r.handleDialogClick.bind((0,l.Z)((0,l.Z)(r))),r.setModalRef=r.setModalRef.bind((0,l.Z)((0,l.Z)(r))),r.state={style:{}},r}(0,a.Z)(t,e);var n=t.prototype;return n.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},n.componentWillUnmount=function(){this.handleExited()},n.setModalRef=function(e){this._modal=e},n.handleDialogClick=function(e){this._ignoreBackdropClick||e.target!==e.currentTarget?this._ignoreBackdropClick=!1:this.props.onHide()},n.handleEntering=function(){p.ZP.on(window,"resize",this.handleWindowResize),this.updateStyle()},n.handleExited=function(){p.ZP.off(window,"resize",this.handleWindowResize)},n.handleWindowResize=function(){this.updateStyle()},n.updateStyle=function(){if(_()){var e=this._modal.getDialogElement(),t=e.scrollHeight,n=w()(e),r=D()(j.findDOMNode(this.props.container||n.body)),a=t>n.documentElement.clientHeight;this.setState({style:{paddingRight:r&&!a?k()():void 0,paddingLeft:!r&&a?k()():void 0}})}},n.render=function(){var e=this.props,t=e.backdrop,n=e.backdropClassName,a=e.animation,l=e.show,d=e.dialogComponentClass,p=e.className,y=e.style,w=e.children,x=e.onEntering,_=e.onExited,S=(0,r.Z)(e,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),k=(0,z.Z)(S,A()),E=k[0],O=k[1],j=l&&!a&&"in";return C.createElement(A(),(0,f.Z)({},E,{ref:this.setModalRef,show:l,containerClassName:(0,U.O4)(S,"open"),transition:a?K:void 0,backdrop:t,backdropTransition:a?Y:void 0,backdropClassName:h()((0,U.O4)(S,"backdrop"),n,j),onEntering:(0,H.Z)(x,this.handleEntering),onExited:(0,H.Z)(_,this.handleExited),onMouseUp:this.handleMouseUp}),C.createElement(d,(0,f.Z)({},O,{style:(0,f.Z)({},this.state.style,y),className:h()(p,j),onClick:!0===t?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),w))},t}(C.Component);X.propTypes=W,X.defaultProps=Z,X.childContextTypes=G,X.Body=L.Z,X.Header=q.Z,X.Title=B.Z,X.Footer=F.Z,X.Dialog=N.Z,X.TRANSITION_DURATION=300,X.BACKDROP_TRANSITION_DURATION=150,t.Z=(0,U.Pn)("modal",(0,U.F6)([V.$u.LARGE,V.$u.SMALL],X))},40007:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(51904),y=n.n(p),w=n(8558),x={componentClass:y()},_=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,l=(0,a.Z)(e,["componentClass","className"]),f=(0,w.D9)(l),p=f[0],y=f[1],x=(0,w.Nj)(p);return h.createElement(t,(0,r.Z)({},y,{className:d()(n,x)}))},t}(h.Component);_.propTypes=x,_.defaultProps={componentClass:"div"},t.Z=(0,w.Pn)("modal-body",_)},62816:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(8558),x=n(17174),_={dialogClassName:y().string},S=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.dialogClassName,l=t.className,f=t.style,p=t.children,y=t.onMouseDownDialog,x=(0,a.Z)(t,["dialogClassName","className","style","children","onMouseDownDialog"]),_=(0,w.D9)(x),S=_[0],k=_[1],C=(0,w.O4)(S),E=(0,r.Z)({display:"block"},f),O=(0,r.Z)({},(0,w.Nj)(S),((e={})[C]=!1,e[(0,w.O4)(S,"dialog")]=!0,e));return h.createElement("div",(0,r.Z)({},k,{tabIndex:"-1",role:"dialog",style:E,className:d()(l,C)}),h.createElement("div",{className:d()(n,O),onMouseDown:y},h.createElement("div",{className:(0,w.O4)(S,"content"),role:"document"},p)))},t}(h.Component);S.propTypes=_,t.Z=(0,w.Pn)("modal",(0,w.F6)([x.$u.LARGE,x.$u.SMALL],S))},94396:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(51904),y=n.n(p),w=n(8558),x={componentClass:y()},_=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,l=(0,a.Z)(e,["componentClass","className"]),f=(0,w.D9)(l),p=f[0],y=f[1],x=(0,w.Nj)(p);return h.createElement(t,(0,r.Z)({},y,{className:d()(n,x)}))},t}(h.Component);_.propTypes=x,_.defaultProps={componentClass:"div"},t.Z=(0,w.Pn)("modal-footer",_)},42963:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(13980),p=n.n(h),y=n(2784),w=n(8558),x=n(26394),_=n(6880),S={closeLabel:p().string,closeButton:p().bool,onHide:p().func},k={$bs_modal:p().shape({onHide:p().func})},C=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.closeLabel,n=e.closeButton,l=e.onHide,f=e.className,h=e.children,p=(0,a.Z)(e,["closeLabel","closeButton","onHide","className","children"]),S=this.context.$bs_modal,k=(0,w.D9)(p),C=k[0],E=k[1],O=(0,w.Nj)(C);return y.createElement("div",(0,r.Z)({},E,{className:d()(f,O)}),n&&y.createElement(_.Z,{label:t,onClick:(0,x.Z)(S&&S.onHide,l)}),h)},t}(y.Component);C.propTypes=S,C.defaultProps={closeLabel:"Close",closeButton:!1},C.contextTypes=k,t.Z=(0,w.Pn)("modal-header",C)},76741:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(51904),y=n.n(p),w=n(8558),x={componentClass:y()},_=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,l=(0,a.Z)(e,["componentClass","className"]),f=(0,w.D9)(l),p=f[0],y=f[1],x=(0,w.Nj)(p);return h.createElement(t,(0,r.Z)({},y,{className:d()(n,x)}))},t}(h.Component);_.propTypes=x,_.defaultProps={componentClass:"h4"},t.Z=(0,w.Pn)("modal-title",_)},34560:function(e,t,n){"use strict";var r=n(45466),a=n(84080),l=n(28845),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(92280),x=n.n(w),_=n(51904),S=n.n(_),k=n(65687),C=(0,l.Z)({},x().propTypes,{show:y().bool,rootClose:y().bool,onHide:y().func,animation:y().oneOfType([y().bool,S()]),onEnter:y().func,onEntering:y().func,onEntered:y().func,onExit:y().func,onExiting:y().func,onExited:y().func,placement:y().oneOf(["top","right","bottom","left"])}),E={animation:k.Z,rootClose:!1,show:!1,placement:"right"},O=function(e){function t(){return e.apply(this,arguments)||this}return(0,a.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.animation,a=t.children,f=(0,r.Z)(t,["animation","children"]),p=!0===n?k.Z:n||null;return e=p?a:(0,h.cloneElement)(a,{className:d()(a.props.className,"in")}),h.createElement(x(),(0,l.Z)({},f,{transition:p}),e)},t}(h.Component);O.propTypes=C,O.defaultProps=E,t.Z=O},185:function(e,t,n){"use strict";var r=n(45466),a=n(84080),l=n(10435),f=n(28845),d=n(71305),h=n.n(d),p=n(71009),y=n.n(p),w=n(2784),x=n(13980),_=n.n(x),S=n(28316),k=(n(92564),n(34560)),C=n(26394);function E(e,t){return h()(t)?t.indexOf(e)>=0:e===t}var O=_().oneOf(["click","hover","focus"]),j=(0,f.Z)({},k.Z.propTypes,{trigger:_().oneOfType([O,_().arrayOf(O)]),delay:_().number,delayShow:_().number,delayHide:_().number,defaultOverlayShown:_().bool,overlay:_().node.isRequired,onBlur:_().func,onClick:_().func,onFocus:_().func,onMouseOut:_().func,onMouseOver:_().func,target:_().oneOf([null]),onHide:_().oneOf([null]),show:_().oneOf([null])}),T=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleToggle=r.handleToggle.bind((0,l.Z)((0,l.Z)(r))),r.handleDelayedShow=r.handleDelayedShow.bind((0,l.Z)((0,l.Z)(r))),r.handleDelayedHide=r.handleDelayedHide.bind((0,l.Z)((0,l.Z)(r))),r.handleHide=r.handleHide.bind((0,l.Z)((0,l.Z)(r))),r.handleMouseOver=function(e){return r.handleMouseOverOut(r.handleDelayedShow,e,"fromElement")},r.handleMouseOut=function(e){return r.handleMouseOverOut(r.handleDelayedHide,e,"toElement")},r._mountNode=null,r.state={show:t.defaultOverlayShown},r}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._mountNode=document.createElement("div"),this.renderOverlay()},n.componentDidUpdate=function(){this.renderOverlay()},n.componentWillUnmount=function(){S.unmountComponentAtNode(this._mountNode),this._mountNode=null,clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)},n.handleDelayedHide=function(){var e=this;if(null!=this._hoverShowDelay)return clearTimeout(this._hoverShowDelay),void(this._hoverShowDelay=null);if(this.state.show&&null==this._hoverHideDelay){var t=null!=this.props.delayHide?this.props.delayHide:this.props.delay;t?this._hoverHideDelay=setTimeout((function(){e._hoverHideDelay=null,e.hide()}),t):this.hide()}},n.handleDelayedShow=function(){var e=this;if(null!=this._hoverHideDelay)return clearTimeout(this._hoverHideDelay),void(this._hoverHideDelay=null);if(!this.state.show&&null==this._hoverShowDelay){var t=null!=this.props.delayShow?this.props.delayShow:this.props.delay;t?this._hoverShowDelay=setTimeout((function(){e._hoverShowDelay=null,e.show()}),t):this.show()}},n.handleHide=function(){this.hide()},n.handleMouseOverOut=function(e,t,n){var r=t.currentTarget,a=t.relatedTarget||t.nativeEvent[n];a&&a===r||y()(r,a)||e(t)},n.handleToggle=function(){this.state.show?this.hide():this.show()},n.hide=function(){this.setState({show:!1})},n.makeOverlay=function(e,t){return w.createElement(k.Z,(0,f.Z)({},t,{show:this.state.show,onHide:this.handleHide,target:this}),e)},n.show=function(){this.setState({show:!0})},n.renderOverlay=function(){S.unstable_renderSubtreeIntoContainer(this,this._overlay,this._mountNode)},n.render=function(){var e=this.props,t=e.trigger,n=e.overlay,a=e.children,l=e.onBlur,f=e.onClick,d=e.onFocus,h=e.onMouseOut,p=e.onMouseOver,y=(0,r.Z)(e,["trigger","overlay","children","onBlur","onClick","onFocus","onMouseOut","onMouseOver"]);delete y.delay,delete y.delayShow,delete y.delayHide,delete y.defaultOverlayShown;var x=w.Children.only(a),_=x.props,S={};return this.state.show&&(S["aria-describedby"]=n.props.id),S.onClick=(0,C.Z)(_.onClick,f),E("click",t)&&(S.onClick=(0,C.Z)(S.onClick,this.handleToggle)),E("hover",t)&&(S.onMouseOver=(0,C.Z)(_.onMouseOver,p,this.handleMouseOver),S.onMouseOut=(0,C.Z)(_.onMouseOut,h,this.handleMouseOut)),E("focus",t)&&(S.onFocus=(0,C.Z)(_.onFocus,d,this.handleDelayedShow),S.onBlur=(0,C.Z)(_.onBlur,l,this.handleDelayedHide)),this._overlay=this.makeOverlay(n,y),(0,w.cloneElement)(x,S)},t}(w.Component);T.propTypes=j,T.defaultProps={defaultOverlayShown:!1,trigger:["hover","focus"]},t.Z=T},18556:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(51904),y=n.n(p),w=n(8558),x={componentClass:y()},_=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,l=(0,a.Z)(e,["componentClass","className"]),f=(0,w.D9)(l),p=f[0],y=f[1],x=(0,w.Nj)(p);return h.createElement(t,(0,r.Z)({},y,{className:d()(n,x)}))},t}(h.Component);_.propTypes=x,_.defaultProps={componentClass:"div"},t.Z=(0,w.Pn)("row",_)},49909:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(10435),d=n(2784),h=n(13980),p=n.n(h),y=n(51904),w=n.n(y),x=n(26394),_={href:p().string,onClick:p().func,onKeyDown:p().func,disabled:p().bool,role:p().string,tabIndex:p().oneOfType([p().number,p().string]),componentClass:w()};function S(e){return!e||"#"===e.trim()}var k=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind((0,f.Z)((0,f.Z)(r))),r.handleKeyDown=r.handleKeyDown.bind((0,f.Z)((0,f.Z)(r))),r}(0,l.Z)(t,e);var n=t.prototype;return n.handleClick=function(e){var t=this.props,n=t.disabled,r=t.href,a=t.onClick;(n||S(r))&&e.preventDefault(),n?e.stopPropagation():a&&a(e)},n.handleKeyDown=function(e){" "===e.key&&(e.preventDefault(),this.handleClick(e))},n.render=function(){var e=this.props,t=e.componentClass,n=e.disabled,l=e.onKeyDown,f=(0,a.Z)(e,["componentClass","disabled","onKeyDown"]);return S(f.href)&&(f.role=f.role||"button",f.href=f.href||"#"),n&&(f.tabIndex=-1,f.style=(0,r.Z)({pointerEvents:"none"},f.style)),d.createElement(t,(0,r.Z)({},f,{onClick:this.handleClick,onKeyDown:(0,x.Z)(this.handleKeyDown,l)}))},t}(d.Component);k.propTypes=_,k.defaultProps={componentClass:"a"},t.Z=k},42042:function(e,t,n){"use strict";var r=n(28845),a=n(45466),l=n(84080),f=n(72779),d=n.n(f),h=n(2784),p=n(13980),y=n.n(p),w=n(40368),x=n.n(w),_=n(8558),S={id:x()(y().oneOfType([y().string,y().number])),placement:y().oneOf(["top","right","bottom","left"]),positionTop:y().oneOfType([y().number,y().string]),positionLeft:y().oneOfType([y().number,y().string]),arrowOffsetTop:y().oneOfType([y().number,y().string]),arrowOffsetLeft:y().oneOfType([y().number,y().string])},k=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.placement,l=t.positionTop,f=t.positionLeft,p=t.arrowOffsetTop,y=t.arrowOffsetLeft,w=t.className,x=t.style,S=t.children,k=(0,a.Z)(t,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"]),C=(0,_.D9)(k),E=C[0],O=C[1],j=(0,r.Z)({},(0,_.Nj)(E),((e={})[n]=!0,e)),T=(0,r.Z)({top:l,left:f},x),A={top:p,left:y};return h.createElement("div",(0,r.Z)({},O,{role:"tooltip",className:d()(w,j),style:T}),h.createElement("div",{className:(0,_.O4)(E,"arrow"),style:A}),h.createElement("div",{className:(0,_.O4)(E,"inner")},S))},t}(h.Component);k.propTypes=S,k.defaultProps={placement:"right"},t.Z=(0,_.Pn)("tooltip",k)},17174:function(e,t,n){"use strict";n.d(t,{$u:function(){return r},H2:function(){return a},Ts:function(){return l},ZM:function(){return f},bg:function(){return d}});var r={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},a={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"},l=["lg","md","sm","xs"],f={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},d={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"}},96877:function(e,t,n){"use strict";var r=n(2784);t.Z={map:function(e,t,n){var a=0;return r.Children.map(e,(function(e){return r.isValidElement(e)?t.call(n,e,a++):e}))},forEach:function(e,t,n){var a=0;r.Children.forEach(e,(function(e){r.isValidElement(e)&&t.call(n,e,a++)}))},count:function(e){var t=0;return r.Children.forEach(e,(function(e){r.isValidElement(e)&&++t})),t},find:function(e,t,n){var a,l=0;return r.Children.forEach(e,(function(e){a||r.isValidElement(e)&&t.call(n,e,l++)&&(a=e)})),a},filter:function(e,t,n){var a=0,l=[];return r.Children.forEach(e,(function(e){r.isValidElement(e)&&t.call(n,e,a++)&&l.push(e)})),l},every:function(e,t,n){var a=0,l=!0;return r.Children.forEach(e,(function(e){l&&r.isValidElement(e)&&(t.call(n,e,a++)||(l=!1))})),l},some:function(e,t,n){var a=0,l=!1;return r.Children.forEach(e,(function(e){l||r.isValidElement(e)&&t.call(n,e,a++)&&(l=!0)})),l},toArray:function(e){var t=[];return r.Children.forEach(e,(function(e){r.isValidElement(e)&&t.push(e)})),t}}},8558:function(e,t,n){"use strict";n.d(t,{D9:function(){return j},F6:function(){return k},KS:function(){return S},Nj:function(){return C},O4:function(){return x},Pn:function(){return _},vD:function(){return T}});var r=n(62085),a=n.n(r),l=n(28845),f=n(47677),d=n.n(f),h=n(13980),p=n.n(h),y=n(17174);function w(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"function"==typeof n[n.length-1]?e.apply(void 0,n):function(t){return e.apply(void 0,n.concat([t]))}}}function x(e,t){var n=(e.bsClass||"").trim();return null==n&&d()(!1),n+(t?"-"+t:"")}var _=w((function(e,t){var n=t.propTypes||(t.propTypes={}),r=t.defaultProps||(t.defaultProps={});return n.bsClass=p().string,r.bsClass=e,t})),S=w((function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var r=n.STYLES||[],a=n.propTypes||{};e.forEach((function(e){-1===r.indexOf(e)&&r.push(e)}));var f=p().oneOf(r);(n.STYLES=r,f._values=r,n.propTypes=(0,l.Z)({},a,{bsStyle:f}),void 0!==t)&&((n.defaultProps||(n.defaultProps={})).bsStyle=t);return n})),k=w((function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var r=n.SIZES||[],a=n.propTypes||{};e.forEach((function(e){-1===r.indexOf(e)&&r.push(e)}));var f=[];r.forEach((function(e){var t=y.H2[e];t&&t!==e&&f.push(t),f.push(e)}));var d=p().oneOf(f);return d._values=f,n.SIZES=r,n.propTypes=(0,l.Z)({},a,{bsSize:d}),void 0!==t&&(n.defaultProps||(n.defaultProps={}),n.defaultProps.bsSize=t),n}));function C(e){var t,n=((t={})[x(e)]=!0,t);e.bsSize&&(n[x(e,y.H2[e.bsSize]||e.bsSize)]=!0);return e.bsStyle&&(n[x(e,e.bsStyle)]=!0),n}function E(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function O(e){return"bsClass"===e||"bsSize"===e||"bsStyle"===e||"bsRole"===e}function j(e){var t={};return a()(e).forEach((function(e){var n=e[0],r=e[1];O(n)||(t[n]=r)})),[E(e),t]}function T(e,t){var n={};t.forEach((function(e){n[e]=!0}));var r={};return a()(e).forEach((function(e){var t=e[0],a=e[1];O(t)||n[t]||(r[t]=a)})),[E(e),r]}},26394:function(e,t){"use strict";t.Z=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),null)}},2148:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(62085),a=n.n(r);function l(e,t){var n=t.propTypes,r={},l={};return a()(e).forEach((function(e){var t=e[0],a=e[1];n[t]?r[t]=a:l[t]=a})),[r,l]}},10726:function(e,t,n){"use strict";var r=n(67154);t.__esModule=!0,t.default=void 0;var a=r(n(44922)),l=r(n(48331)),f=r(n(28318)),d=r(n(72779)),h=r(n(2784)),p=r(n(13980)),y=(r(n(92564)),n(95963)),w={htmlFor:p.default.string,srOnly:p.default.bool},x={$bs_formGroup:p.default.object},_=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.context.$bs_formGroup,t=e&&e.controlId,n=this.props,r=n.htmlFor,f=void 0===r?t:r,p=n.srOnly,w=n.className,x=(0,l.default)(n,["htmlFor","srOnly","className"]),_=(0,y.splitBsProps)(x),S=_[0],k=_[1],C=(0,a.default)({},(0,y.getClassSet)(S),{"sr-only":p});return h.default.createElement("label",(0,a.default)({},k,{htmlFor:f,className:(0,d.default)(w,C)}))},t}(h.default.Component);_.propTypes=w,_.defaultProps={srOnly:!1},_.contextTypes=x;var S=(0,y.bsClass)("control-label",_);t.default=S,e.exports=t.default},88664:function(e,t,n){"use strict";var r=n(67154);t.__esModule=!0,t.default=void 0;var a=r(n(44922)),l=r(n(48331)),f=r(n(28318)),d=r(n(72779)),h=r(n(2784)),p=r(n(13980)),y=n(95963),w=n(53993),x=r(n(52153)),_={controlId:p.default.string,validationState:p.default.oneOf(["success","warning","error",null])},S={$bs_formGroup:p.default.object.isRequired},k=function(e){function t(){return e.apply(this,arguments)||this}(0,f.default)(t,e);var n=t.prototype;return n.getChildContext=function(){var e=this.props;return{$bs_formGroup:{controlId:e.controlId,validationState:e.validationState}}},n.hasFeedback=function(e){var t=this;return x.default.some(e,(function(e){return"feedback"===e.props.bsRole||e.props.children&&t.hasFeedback(e.props.children)}))},n.render=function(){var e=this.props,t=e.validationState,n=e.className,r=e.children,f=(0,l.default)(e,["validationState","className","children"]),p=(0,y.splitBsPropsAndOmit)(f,["controlId"]),w=p[0],x=p[1],_=(0,a.default)({},(0,y.getClassSet)(w),{"has-feedback":this.hasFeedback(r)});return t&&(_["has-"+t]=!0),h.default.createElement("div",(0,a.default)({},x,{className:(0,d.default)(n,_)}),r)},t}(h.default.Component);k.propTypes=_,k.childContextTypes=S;var C=(0,y.bsClass)("form-group",(0,y.bsSizes)([w.Size.LARGE,w.Size.SMALL],k));t.default=C,e.exports=t.default},53993:function(e,t){"use strict";t.__esModule=!0,t.Style=t.State=t.DEVICE_SIZES=t.SIZE_MAP=t.Size=void 0;t.Size={LARGE:"large",SMALL:"small",XSMALL:"xsmall"};t.SIZE_MAP={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};t.DEVICE_SIZES=["lg","md","sm","xs"];t.State={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"};t.Style={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"}},52153:function(e,t,n){"use strict";var r=n(67154);t.__esModule=!0,t.default=void 0;var a=r(n(2784));var l={map:function(e,t,n){var r=0;return a.default.Children.map(e,(function(e){return a.default.isValidElement(e)?t.call(n,e,r++):e}))},forEach:function(e,t,n){var r=0;a.default.Children.forEach(e,(function(e){a.default.isValidElement(e)&&t.call(n,e,r++)}))},count:function(e){var t=0;return a.default.Children.forEach(e,(function(e){a.default.isValidElement(e)&&++t})),t},find:function(e,t,n){var r,l=0;return a.default.Children.forEach(e,(function(e){r||a.default.isValidElement(e)&&t.call(n,e,l++)&&(r=e)})),r},filter:function(e,t,n){var r=0,l=[];return a.default.Children.forEach(e,(function(e){a.default.isValidElement(e)&&t.call(n,e,r++)&&l.push(e)})),l},every:function(e,t,n){var r=0,l=!0;return a.default.Children.forEach(e,(function(e){l&&a.default.isValidElement(e)&&(t.call(n,e,r++)||(l=!1))})),l},some:function(e,t,n){var r=0,l=!1;return a.default.Children.forEach(e,(function(e){l||a.default.isValidElement(e)&&t.call(n,e,r++)&&(l=!0)})),l},toArray:function(e){var t=[];return a.default.Children.forEach(e,(function(e){a.default.isValidElement(e)&&t.push(e)})),t}};t.default=l,e.exports=t.default},95963:function(e,t,n){"use strict";var r=n(67154);t.__esModule=!0,t.prefix=p,t.getClassSet=function(e){var t,n=((t={})[p(e)]=!0,t);if(e.bsSize){n[p(e,d.SIZE_MAP[e.bsSize]||e.bsSize)]=!0}e.bsStyle&&(n[p(e,e.bsStyle)]=!0);return n},t.splitBsProps=function(e){var t={};return(0,a.default)(e).forEach((function(e){var n=e[0],r=e[1];S(n)||(t[n]=r)})),[_(e),t]},t.splitBsPropsAndOmit=function(e,t){var n={};t.forEach((function(e){n[e]=!0}));var r={};return(0,a.default)(e).forEach((function(e){var t=e[0],a=e[1];S(t)||n[t]||(r[t]=a)})),[_(e),r]},t.addStyle=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];w(n)(e)},t._curry=t.bsSizes=t.bsStyles=t.bsClass=void 0;var a=r(n(62085)),l=r(n(44922)),f=(r(n(47677)),r(n(13980))),d=n(53993);function h(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"function"==typeof n[n.length-1]?e.apply(void 0,n):function(t){return e.apply(void 0,n.concat([t]))}}}function p(e,t){var n=(e.bsClass||"").trim();return null==n&&invariant(!1),n+(t?"-"+t:"")}var y=h((function(e,t){var n=t.propTypes||(t.propTypes={}),r=t.defaultProps||(t.defaultProps={});return n.bsClass=f.default.string,r.bsClass=e,t}));t.bsClass=y;var w=h((function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var r=n.STYLES||[],a=n.propTypes||{};e.forEach((function(e){-1===r.indexOf(e)&&r.push(e)}));var d=f.default.oneOf(r);(n.STYLES=r,d._values=r,n.propTypes=(0,l.default)({},a,{bsStyle:d}),void 0!==t)&&((n.defaultProps||(n.defaultProps={})).bsStyle=t);return n}));t.bsStyles=w;var x=h((function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var r=n.SIZES||[],a=n.propTypes||{};e.forEach((function(e){-1===r.indexOf(e)&&r.push(e)}));var h=[];r.forEach((function(e){var t=d.SIZE_MAP[e];t&&t!==e&&h.push(t),h.push(e)}));var p=f.default.oneOf(h);return p._values=h,n.SIZES=r,n.propTypes=(0,l.default)({},a,{bsSize:p}),void 0!==t&&(n.defaultProps||(n.defaultProps={}),n.defaultProps.bsSize=t),n}));function _(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function S(e){return"bsClass"===e||"bsSize"===e||"bsStyle"===e||"bsRole"===e}t.bsSizes=x;var k=h;t._curry=k},52967:function(e,t,n){"use strict";var r=n(2784),a=n(37320),l=n(14616);function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(f(227));var d=new Set,h={};function p(e,t){y(e,t),y(e+"Capture",t)}function y(e,t){for(h[e]=t,e=0;e<t.length;e++)d.add(t[e])}var w=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_=Object.prototype.hasOwnProperty,S={},k={};function C(e,t,n,r,a,l,f){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=f}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){E[e]=new C(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];E[t]=new C(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){E[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){E[e]=new C(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){E[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){E[e]=new C(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){E[e]=new C(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){E[e]=new C(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){E[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)}));var O=/[\-:]([a-z])/g;function j(e){return e[1].toUpperCase()}function T(e,t,n,r){var a=E.hasOwnProperty(t)?E[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!_.call(k,e)||!_.call(S,e)&&(x.test(e)?k[e]=!0:(S[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(O,j);E[t]=new C(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(O,j);E[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(O,j);E[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){E[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)})),E.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){E[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)}));var A=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=60103,D=60106,R=60107,I=60108,M=60114,L=60109,N=60110,F=60112,q=60113,B=60120,U=60115,H=60116,z=60121,V=60128,W=60129,Z=60130,G=60131;if("function"==typeof Symbol&&Symbol.for){var K=Symbol.for;P=K("react.element"),D=K("react.portal"),R=K("react.fragment"),I=K("react.strict_mode"),M=K("react.profiler"),L=K("react.provider"),N=K("react.context"),F=K("react.forward_ref"),q=K("react.suspense"),B=K("react.suspense_list"),U=K("react.memo"),H=K("react.lazy"),z=K("react.block"),K("react.scope"),V=K("react.opaque.id"),W=K("react.debug_trace_mode"),Z=K("react.offscreen"),G=K("react.legacy_hidden")}var Y,X="function"==typeof Symbol&&Symbol.iterator;function J(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=X&&e[X]||e["@@iterator"])?e:null}function Q(e){if(void 0===Y)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Y=t&&t[1]||""}return"\n"+Y+e}var ee=!1;function te(e,t){if(!e||ee)return"";ee=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var a=e.stack.split("\n"),l=r.stack.split("\n"),f=a.length-1,d=l.length-1;1<=f&&0<=d&&a[f]!==l[d];)d--;for(;1<=f&&0<=d;f--,d--)if(a[f]!==l[d]){if(1!==f||1!==d)do{if(f--,0>--d||a[f]!==l[d])return"\n"+a[f].replace(" at new "," at ")}while(1<=f&&0<=d);break}}}finally{ee=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Q(e):""}function ne(e){switch(e.tag){case 5:return Q(e.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return e=te(e.type,!1);case 11:return e=te(e.type.render,!1);case 22:return e=te(e.type._render,!1);case 1:return e=te(e.type,!0);default:return""}}function re(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case R:return"Fragment";case D:return"Portal";case M:return"Profiler";case I:return"StrictMode";case q:return"Suspense";case B:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case L:return(e._context.displayName||"Context")+".Provider";case F:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case U:return re(e.type);case z:return re(e._render);case H:t=e._payload,e=e._init;try{return re(e(t))}catch(e){}}return null}function oe(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ae(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function se(e){e._valueTracker||(e._valueTracker=function(e){var t=ae(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function le(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ae(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ce(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ue(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function fe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=oe(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function de(e,t){null!=(t=t.checked)&&T(e,"checked",t,!1)}function he(e,t){de(e,t);var n=oe(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?me(e,t.type,n):t.hasOwnProperty("defaultValue")&&me(e,t.type,oe(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function pe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function me(e,t,n){"number"===t&&ce(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ge(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ve(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+oe(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ye(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(f(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function be(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(f(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(f(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:oe(n)}}function we(e,t){var n=oe(t.value),r=oe(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function xe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var _e={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ke(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ce,Ee,Oe=(Ee=function(e,t){if(e.namespaceURI!==_e.svg||"innerHTML"in e)e.innerHTML=t;else{for((Ce=Ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ee(e,t)}))}:Ee);function je(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var $e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Te=["Webkit","ms","Moz","O"];function Ae(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||$e.hasOwnProperty(e)&&$e[e]?(""+t).trim():t+"px"}function Pe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=Ae(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys($e).forEach((function(e){Te.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$e[t]=$e[e]}))}));var De=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Re(e,t){if(t){if(De[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(f(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(f(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(f(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(f(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Me(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Le=null,Ne=null,Fe=null;function qe(e){if(e=pi(e)){if("function"!=typeof Le)throw Error(f(280));var t=e.stateNode;t&&(t=gi(t),Le(e.stateNode,e.type,t))}}function Be(e){Ne?Fe?Fe.push(e):Fe=[e]:Ne=e}function Ue(){if(Ne){var e=Ne,t=Fe;if(Fe=Ne=null,qe(e),t)for(e=0;e<t.length;e++)qe(t[e])}}function He(e,t){return e(t)}function ze(e,t,n,r,a){return e(t,n,r,a)}function Ve(){}var We=He,Ze=!1,Ge=!1;function Ke(){null===Ne&&null===Fe||(Ve(),Ue())}function Ye(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(f(231,t,typeof n));return n}var Xe=!1;if(w)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Xe=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch(Ee){Xe=!1}function Qe(e,t,n,r,a,l,f,d,h){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(e){this.onError(e)}}var et=!1,tt=null,nt=!1,rt=null,it={onError:function(e){et=!0,tt=e}};function ot(e,t,n,r,a,l,f,d,h){et=!1,tt=null,Qe.apply(it,arguments)}function at(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function st(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function lt(e){if(at(e)!==e)throw Error(f(188))}function ct(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=at(e)))throw Error(f(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var l=a.alternate;if(null===l){if(null!==(r=a.return)){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return lt(a),e;if(l===r)return lt(a),t;l=l.sibling}throw Error(f(188))}if(n.return!==r.return)n=a,r=l;else{for(var d=!1,h=a.child;h;){if(h===n){d=!0,n=a,r=l;break}if(h===r){d=!0,r=a,n=l;break}h=h.sibling}if(!d){for(h=l.child;h;){if(h===n){d=!0,n=l,r=a;break}if(h===r){d=!0,r=l,n=a;break}h=h.sibling}if(!d)throw Error(f(189))}}if(n.alternate!==r)throw Error(f(190))}if(3!==n.tag)throw Error(f(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function ut(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var ft,dt,ht,pt,mt=!1,gt=[],vt=null,yt=null,bt=null,wt=new Map,xt=new Map,_t=[],St="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kt(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function Ct(e,t){switch(e){case"focusin":case"focusout":vt=null;break;case"dragenter":case"dragleave":yt=null;break;case"mouseover":case"mouseout":bt=null;break;case"pointerover":case"pointerout":wt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xt.delete(t.pointerId)}}function Et(e,t,n,r,a,l){return null===e||e.nativeEvent!==l?(e=kt(t,n,r,a,l),null!==t&&(null!==(t=pi(t))&&dt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ot(e){var t=hi(e.target);if(null!==t){var n=at(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=st(n)))return e.blockedOn=t,void pt(e.lanePriority,(function(){l.unstable_runWithPriority(e.priority,(function(){ht(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=un(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=pi(n))&&dt(t),e.blockedOn=n,!1;t.shift()}return!0}function $t(e,t,n){jt(e)&&n.delete(t)}function Tt(){for(mt=!1;0<gt.length;){var e=gt[0];if(null!==e.blockedOn){null!==(e=pi(e.blockedOn))&&ft(e);break}for(var t=e.targetContainers;0<t.length;){var n=un(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&gt.shift()}null!==vt&&jt(vt)&&(vt=null),null!==yt&&jt(yt)&&(yt=null),null!==bt&&jt(bt)&&(bt=null),wt.forEach($t),xt.forEach($t)}function At(e,t){e.blockedOn===t&&(e.blockedOn=null,mt||(mt=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Tt)))}function Pt(e){function t(t){return At(t,e)}if(0<gt.length){At(gt[0],e);for(var n=1;n<gt.length;n++){var r=gt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==vt&&At(vt,e),null!==yt&&At(yt,e),null!==bt&&At(bt,e),wt.forEach(t),xt.forEach(t),n=0;n<_t.length;n++)(r=_t[n]).blockedOn===e&&(r.blockedOn=null);for(;0<_t.length&&null===(n=_t[0]).blockedOn;)Ot(n),null===n.blockedOn&&_t.shift()}function Dt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rt={animationend:Dt("Animation","AnimationEnd"),animationiteration:Dt("Animation","AnimationIteration"),animationstart:Dt("Animation","AnimationStart"),transitionend:Dt("Transition","TransitionEnd")},It={},Mt={};function Lt(e){if(It[e])return It[e];if(!Rt[e])return e;var t,n=Rt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Mt)return It[e]=n[t];return e}w&&(Mt=document.createElement("div").style,"AnimationEvent"in window||(delete Rt.animationend.animation,delete Rt.animationiteration.animation,delete Rt.animationstart.animation),"TransitionEvent"in window||delete Rt.transitionend.transition);var Nt=Lt("animationend"),Ft=Lt("animationiteration"),qt=Lt("animationstart"),Bt=Lt("transitionend"),Ut=new Map,Ht=new Map,zt=["abort","abort",Nt,"animationEnd",Ft,"animationIteration",qt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Bt,"transitionEnd","waiting","waiting"];function Vt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Ht.set(r,t),Ut.set(r,a),p(a,[r])}}(0,l.unstable_now)();var Wt=8;function Zt(e){if(0!=(1&e))return Wt=15,1;if(0!=(2&e))return Wt=14,2;if(0!=(4&e))return Wt=13,4;var t=24&e;return 0!==t?(Wt=12,t):0!=(32&e)?(Wt=11,32):0!==(t=192&e)?(Wt=10,t):0!=(256&e)?(Wt=9,256):0!==(t=3584&e)?(Wt=8,t):0!=(4096&e)?(Wt=7,4096):0!==(t=4186112&e)?(Wt=6,t):0!==(t=62914560&e)?(Wt=5,t):67108864&e?(Wt=4,67108864):0!=(134217728&e)?(Wt=3,134217728):0!==(t=805306368&e)?(Wt=2,t):0!=(1073741824&e)?(Wt=1,1073741824):(Wt=8,e)}function Gt(e,t){var n=e.pendingLanes;if(0===n)return Wt=0;var r=0,a=0,l=e.expiredLanes,f=e.suspendedLanes,d=e.pingedLanes;if(0!==l)r=l,a=Wt=15;else if(0!==(l=134217727&n)){var h=l&~f;0!==h?(r=Zt(h),a=Wt):0!==(d&=l)&&(r=Zt(d),a=Wt)}else 0!==(l=n&~f)?(r=Zt(l),a=Wt):0!==d&&(r=Zt(d),a=Wt);if(0===r)return 0;if(r=n&((0>(r=31-en(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&f)){if(Zt(t),a<=Wt)return t;Wt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-en(t)),r|=e[n],t&=~a;return r}function Kt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Yt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Xt(24&~t))?Yt(10,t):e;case 10:return 0===(e=Xt(192&~t))?Yt(8,t):e;case 8:return 0===(e=Xt(3584&~t))&&(0===(e=Xt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Xt(805306368&~t))&&(t=268435456),t}throw Error(f(358,e))}function Xt(e){return e&-e}function Jt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-en(t)]=n}var en=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(tn(e)/nn|0)|0},tn=Math.log,nn=Math.LN2;var rn=l.unstable_UserBlockingPriority,on=l.unstable_runWithPriority,an=!0;function sn(e,t,n,r){Ze||Ve();var a=cn,l=Ze;Ze=!0;try{ze(a,e,t,n,r)}finally{(Ze=l)||Ke()}}function ln(e,t,n,r){on(rn,cn.bind(null,e,t,n,r))}function cn(e,t,n,r){var a;if(an)if((a=0==(4&t))&&0<gt.length&&-1<St.indexOf(e))e=kt(null,e,t,n,r),gt.push(e);else{var l=un(e,t,n,r);if(null===l)a&&Ct(e,r);else{if(a){if(-1<St.indexOf(e))return e=kt(l,e,t,n,r),void gt.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return vt=Et(vt,e,t,n,r,a),!0;case"dragenter":return yt=Et(yt,e,t,n,r,a),!0;case"mouseover":return bt=Et(bt,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return wt.set(l,Et(wt.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,xt.set(l,Et(xt.get(l)||null,e,t,n,r,a)),!0}return!1}(l,e,t,n,r))return;Ct(e,r)}Wr(e,t,r,null,n)}}}function un(e,t,n,r){var a=Me(r);if(null!==(a=hi(a))){var l=at(a);if(null===l)a=null;else{var f=l.tag;if(13===f){if(null!==(a=st(l)))return a;a=null}else if(3===f){if(l.stateNode.hydrate)return 3===l.tag?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Wr(e,t,r,a,n),null}var dn=null,hn=null,pn=null;function mn(){if(pn)return pn;var e,t,n=hn,r=n.length,a="value"in dn?dn.value:dn.textContent,l=a.length;for(e=0;e<r&&n[e]===a[e];e++);var f=r-e;for(t=1;t<=f&&n[r-t]===a[l-t];t++);return pn=a.slice(e,1<t?1-t:void 0)}function gn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function vn(){return!0}function yn(){return!1}function bn(e){function t(t,n,r,a,l){for(var f in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(f)&&(t=e[f],this[f]=t?t(a):a[f]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?vn:yn,this.isPropagationStopped=yn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=vn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=vn)},persist:function(){},isPersistent:vn}),t}var wn,xn,_n,Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kn=bn(Sn),Cn=a({},Sn,{view:0,detail:0}),En=bn(Cn),On=a({},Cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_n&&(_n&&"mousemove"===e.type?(wn=e.screenX-_n.screenX,xn=e.screenY-_n.screenY):xn=wn=0,_n=e),wn)},movementY:function(e){return"movementY"in e?e.movementY:xn}}),jn=bn(On),$n=bn(a({},On,{dataTransfer:0})),Tn=bn(a({},Cn,{relatedTarget:0})),An=bn(a({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0})),Pn=a({},Sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dn=bn(Pn),Rn=bn(a({},Sn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ln={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ln[e])&&!!t[e]}function Fn(){return Nn}var qn=a({},Cn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=gn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fn,charCode:function(e){return"keypress"===e.type?gn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?gn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Bn=bn(qn),Un=bn(a({},On,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Hn=bn(a({},Cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fn})),zn=bn(a({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Vn=a({},On,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wn=bn(Vn),Zn=[9,13,27,32],Gn=w&&"CompositionEvent"in window,Kn=null;w&&"documentMode"in document&&(Kn=document.documentMode);var Yn=w&&"TextEvent"in window&&!Kn,Xn=w&&(!Gn||Kn&&8<Kn&&11>=Kn),Jn=String.fromCharCode(32),Qn=!1;function er(e,t){switch(e){case"keyup":return-1!==Zn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var nr=!1;var rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!rr[e.type]:"textarea"===t}function or(e,t,n,r){Be(r),0<(t=Gr(t,"onChange")).length&&(n=new kn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ar=null,sr=null;function lr(e){qr(e,0)}function cr(e){if(le(mi(e)))return e}function ur(e,t){if("change"===e)return t}var fr=!1;if(w){var dr;if(w){var hr="oninput"in document;if(!hr){var pr=document.createElement("div");pr.setAttribute("oninput","return;"),hr="function"==typeof pr.oninput}dr=hr}else dr=!1;fr=dr&&(!document.documentMode||9<document.documentMode)}function mr(){ar&&(ar.detachEvent("onpropertychange",gr),sr=ar=null)}function gr(e){if("value"===e.propertyName&&cr(sr)){var t=[];if(or(t,sr,e,Me(e)),e=lr,Ze)e(t);else{Ze=!0;try{He(e,t)}finally{Ze=!1,Ke()}}}}function vr(e,t,n){"focusin"===e?(mr(),sr=n,(ar=t).attachEvent("onpropertychange",gr)):"focusout"===e&&mr()}function yr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return cr(sr)}function br(e,t){if("click"===e)return cr(t)}function wr(e,t){if("input"===e||"change"===e)return cr(t)}var xr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},_r=Object.prototype.hasOwnProperty;function Sr(e,t){if(xr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!_r.call(t,n[r])||!xr(e[n[r]],t[n[r]]))return!1;return!0}function kr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cr(e,t){var n,r=kr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=kr(r)}}function Er(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Er(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Or(){for(var e=window,t=ce();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=ce((e=t.contentWindow).document)}return t}function jr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var $r=w&&"documentMode"in document&&11>=document.documentMode,Tr=null,Ar=null,Pr=null,Dr=!1;function Rr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Dr||null==Tr||Tr!==ce(r)||("selectionStart"in(r=Tr)&&jr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Pr&&Sr(Pr,r)||(Pr=r,0<(r=Gr(Ar,"onSelect")).length&&(t=new kn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Tr)))}Vt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Vt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Vt(zt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Mr=0;Mr<Ir.length;Mr++)Ht.set(Ir[Mr],0);y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,l,d,h,p){if(ot.apply(this,arguments),et){if(!et)throw Error(f(198));var y=tt;et=!1,tt=null,nt||(nt=!0,rt=y)}}(r,t,void 0,e),e.currentTarget=null}function qr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var f=r.length-1;0<=f;f--){var d=r[f],h=d.instance,p=d.currentTarget;if(d=d.listener,h!==l&&a.isPropagationStopped())break e;Fr(a,d,p),l=h}else for(f=0;f<r.length;f++){if(h=(d=r[f]).instance,p=d.currentTarget,d=d.listener,h!==l&&a.isPropagationStopped())break e;Fr(a,d,p),l=h}}}if(nt)throw e=rt,nt=!1,rt=null,e}function Br(e,t){var n=vi(t),r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){e[Ur]||(e[Ur]=!0,d.forEach((function(t){Nr.has(t)||zr(t,!1,e,null),zr(t,!0,e,null)})))}function zr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,l=n;if("selectionchange"===e&&9!==n.nodeType&&(l=n.ownerDocument),null!==r&&!t&&Nr.has(e)){if("scroll"!==e)return;a|=2,l=r}var f=vi(l),d=e+"__"+(t?"capture":"bubble");f.has(d)||(t&&(a|=4),Vr(l,e,a,t),f.add(d))}function Vr(e,t,n,r){var a=Ht.get(t);switch(void 0===a?2:a){case 0:a=sn;break;case 1:a=ln;break;default:a=cn}n=a.bind(null,t,n,e),a=void 0,!Xe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,a){var l=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var f=r.tag;if(3===f||4===f){var d=r.stateNode.containerInfo;if(d===a||8===d.nodeType&&d.parentNode===a)break;if(4===f)for(f=r.return;null!==f;){var h=f.tag;if((3===h||4===h)&&((h=f.stateNode.containerInfo)===a||8===h.nodeType&&h.parentNode===a))return;f=f.return}for(;null!==d;){if(null===(f=hi(d)))return;if(5===(h=f.tag)||6===h){r=l=f;continue e}d=d.parentNode}}r=r.return}!function(e,t,n){if(Ge)return e(t,n);Ge=!0;try{return We(e,t,n)}finally{Ge=!1,Ke()}}((function(){var r=l,a=Me(n),f=[];e:{var d=Ut.get(e);if(void 0!==d){var h=kn,p=e;switch(e){case"keypress":if(0===gn(n))break e;case"keydown":case"keyup":h=Bn;break;case"focusin":p="focus",h=Tn;break;case"focusout":p="blur",h=Tn;break;case"beforeblur":case"afterblur":h=Tn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=$n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Hn;break;case Nt:case Ft:case qt:h=An;break;case Bt:h=zn;break;case"scroll":h=En;break;case"wheel":h=Wn;break;case"copy":case"cut":case"paste":h=Dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Un}var y=0!=(4&t),w=!y&&"scroll"===e,x=y?null!==d?d+"Capture":null:d;y=[];for(var _,S=r;null!==S;){var k=(_=S).stateNode;if(5===_.tag&&null!==k&&(_=k,null!==x&&(null!=(k=Ye(S,x))&&y.push(Zr(S,k,_)))),w)break;S=S.return}0<y.length&&(d=new h(d,p,null,n,a),f.push({event:d,listeners:y}))}}if(0==(7&t)){if(h="mouseout"===e||"pointerout"===e,(!(d="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(p=n.relatedTarget||n.fromElement)||!hi(p)&&!p[fi])&&(h||d)&&(d=a.window===a?a:(d=a.ownerDocument)?d.defaultView||d.parentWindow:window,h?(h=r,null!==(p=(p=n.relatedTarget||n.toElement)?hi(p):null)&&(p!==(w=at(p))||5!==p.tag&&6!==p.tag)&&(p=null)):(h=null,p=r),h!==p)){if(y=jn,k="onMouseLeave",x="onMouseEnter",S="mouse","pointerout"!==e&&"pointerover"!==e||(y=Un,k="onPointerLeave",x="onPointerEnter",S="pointer"),w=null==h?d:mi(h),_=null==p?d:mi(p),(d=new y(k,S+"leave",h,n,a)).target=w,d.relatedTarget=_,k=null,hi(a)===r&&((y=new y(x,S+"enter",p,n,a)).target=_,y.relatedTarget=w,k=y),w=k,h&&p)e:{for(x=p,S=0,_=y=h;_;_=Kr(_))S++;for(_=0,k=x;k;k=Kr(k))_++;for(;0<S-_;)y=Kr(y),S--;for(;0<_-S;)x=Kr(x),_--;for(;S--;){if(y===x||null!==x&&y===x.alternate)break e;y=Kr(y),x=Kr(x)}y=null}else y=null;null!==h&&Yr(f,d,h,y,!1),null!==p&&null!==w&&Yr(f,w,p,y,!0)}if("select"===(h=(d=r?mi(r):window).nodeName&&d.nodeName.toLowerCase())||"input"===h&&"file"===d.type)var C=ur;else if(ir(d))if(fr)C=wr;else{C=yr;var E=vr}else(h=d.nodeName)&&"input"===h.toLowerCase()&&("checkbox"===d.type||"radio"===d.type)&&(C=br);switch(C&&(C=C(e,r))?or(f,C,n,a):(E&&E(e,d,r),"focusout"===e&&(E=d._wrapperState)&&E.controlled&&"number"===d.type&&me(d,"number",d.value)),E=r?mi(r):window,e){case"focusin":(ir(E)||"true"===E.contentEditable)&&(Tr=E,Ar=r,Pr=null);break;case"focusout":Pr=Ar=Tr=null;break;case"mousedown":Dr=!0;break;case"contextmenu":case"mouseup":case"dragend":Dr=!1,Rr(f,n,a);break;case"selectionchange":if($r)break;case"keydown":case"keyup":Rr(f,n,a)}var O;if(Gn)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else nr?er(e,n)&&(j="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(j="onCompositionStart");j&&(Xn&&"ko"!==n.locale&&(nr||"onCompositionStart"!==j?"onCompositionEnd"===j&&nr&&(O=mn()):(hn="value"in(dn=a)?dn.value:dn.textContent,nr=!0)),0<(E=Gr(r,j)).length&&(j=new Rn(j,e,null,n,a),f.push({event:j,listeners:E}),O?j.data=O:null!==(O=tr(n))&&(j.data=O))),(O=Yn?function(e,t){switch(e){case"compositionend":return tr(t);case"keypress":return 32!==t.which?null:(Qn=!0,Jn);case"textInput":return(e=t.data)===Jn&&Qn?null:e;default:return null}}(e,n):function(e,t){if(nr)return"compositionend"===e||!Gn&&er(e,t)?(e=mn(),pn=hn=dn=null,nr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new Rn("onBeforeInput","beforeinput",null,n,a),f.push({event:a,listeners:r}),a.data=O))}qr(f,t)}))}function Zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,l=a.stateNode;5===a.tag&&null!==l&&(a=l,null!=(l=Ye(e,n))&&r.unshift(Zr(e,l,a)),null!=(l=Ye(e,t))&&r.push(Zr(e,l,a))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var l=t._reactName,f=[];null!==n&&n!==r;){var d=n,h=d.alternate,p=d.stateNode;if(null!==h&&h===r)break;5===d.tag&&null!==p&&(d=p,a?null!=(h=Ye(n,l))&&f.unshift(Zr(n,h,d)):a||null!=(h=Ye(n,l))&&f.push(Zr(n,h,d))),n=n.return}0!==f.length&&e.push({event:t,listeners:f})}function Xr(){}var Jr=null,Qr=null;function ei(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ti(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"==typeof setTimeout?setTimeout:void 0,ri="function"==typeof clearTimeout?clearTimeout:void 0;function ii(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function ai(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=0;var li=Math.random().toString(36).slice(2),ci="__reactFiber$"+li,ui="__reactProps$"+li,fi="__reactContainer$"+li,di="__reactEvents$"+li;function hi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ai(e);null!==e;){if(n=e[ci])return n;e=ai(e)}return t}n=(e=n).parentNode}return null}function pi(e){return!(e=e[ci]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(f(33))}function gi(e){return e[ui]||null}function vi(e){var t=e[di];return void 0===t&&(t=e[di]=new Set),t}var yi=[],bi=-1;function wi(e){return{current:e}}function xi(e){0>bi||(e.current=yi[bi],yi[bi]=null,bi--)}function _i(e,t){bi++,yi[bi]=e.current,e.current=t}var Si={},ki=wi(Si),Ci=wi(!1),Ei=Si;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,l={};for(a in n)l[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function ji(e){return null!=(e=e.childContextTypes)}function $i(){xi(Ci),xi(ki)}function Ti(e,t,n){if(ki.current!==Si)throw Error(f(168));_i(ki,t),_i(Ci,n)}function Ai(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var l in r=r.getChildContext())if(!(l in e))throw Error(f(108,re(t)||"Unknown",l));return a({},n,r)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ei=ki.current,_i(ki,e),_i(Ci,Ci.current),!0}function Di(e,t,n){var r=e.stateNode;if(!r)throw Error(f(169));n?(e=Ai(e,t,Ei),r.__reactInternalMemoizedMergedChildContext=e,xi(Ci),xi(ki),_i(ki,e)):xi(Ci),_i(Ci,n)}var Ri=null,Ii=null,Mi=l.unstable_runWithPriority,Li=l.unstable_scheduleCallback,Ni=l.unstable_cancelCallback,Fi=l.unstable_shouldYield,qi=l.unstable_requestPaint,Bi=l.unstable_now,Ui=l.unstable_getCurrentPriorityLevel,Hi=l.unstable_ImmediatePriority,zi=l.unstable_UserBlockingPriority,Vi=l.unstable_NormalPriority,Wi=l.unstable_LowPriority,Zi=l.unstable_IdlePriority,Gi={},Ki=void 0!==qi?qi:function(){},Yi=null,Xi=null,Ji=!1,Qi=Bi(),eo=1e4>Qi?Bi:function(){return Bi()-Qi};function to(){switch(Ui()){case Hi:return 99;case zi:return 98;case Vi:return 97;case Wi:return 96;case Zi:return 95;default:throw Error(f(332))}}function no(e){switch(e){case 99:return Hi;case 98:return zi;case 97:return Vi;case 96:return Wi;case 95:return Zi;default:throw Error(f(332))}}function ro(e,t){return e=no(e),Mi(e,t)}function io(e,t,n){return e=no(e),Li(e,t,n)}function oo(){if(null!==Xi){var e=Xi;Xi=null,Ni(e)}ao()}function ao(){if(!Ji&&null!==Yi){Ji=!0;var e=0;try{var t=Yi;ro(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Yi=null}catch(t){throw null!==Yi&&(Yi=Yi.slice(e+1)),Li(Hi,oo),t}finally{Ji=!1}}}var so=A.ReactCurrentBatchConfig;function lo(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var co=wi(null),uo=null,fo=null,ho=null;function po(){ho=fo=uo=null}function mo(e){var t=co.current;xi(co),e.type._context._currentValue=t}function go(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function vo(e,t){uo=e,ho=fo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ga=!0),e.firstContext=null)}function yo(e,t){if(ho!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(ho=e,t=1073741823),t={context:e,observedBits:t,next:null},null===fo){if(null===uo)throw Error(f(308));fo=t,uo.dependencies={lanes:0,firstContext:t,responders:null}}else fo=fo.next=t;return e._currentValue}var bo=!1;function wo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function xo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _o(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function So(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ko(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,l=null;if(null!==(n=n.firstBaseUpdate)){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===l?a=l=f:l=l.next=f,n=n.next}while(null!==n);null===l?a=l=t:l=l.next=t}else a=l=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Co(e,t,n,r){var l=e.updateQueue;bo=!1;var f=l.firstBaseUpdate,d=l.lastBaseUpdate,h=l.shared.pending;if(null!==h){l.shared.pending=null;var p=h,y=p.next;p.next=null,null===d?f=y:d.next=y,d=p;var w=e.alternate;if(null!==w){var x=(w=w.updateQueue).lastBaseUpdate;x!==d&&(null===x?w.firstBaseUpdate=y:x.next=y,w.lastBaseUpdate=p)}}if(null!==f){for(x=l.baseState,d=0,w=y=p=null;;){h=f.lane;var _=f.eventTime;if((r&h)===h){null!==w&&(w=w.next={eventTime:_,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var S=e,k=f;switch(h=t,_=n,k.tag){case 1:if("function"==typeof(S=k.payload)){x=S.call(_,x,h);break e}x=S;break e;case 3:S.flags=-4097&S.flags|64;case 0:if(null==(h="function"==typeof(S=k.payload)?S.call(_,x,h):S))break e;x=a({},x,h);break e;case 2:bo=!0}}null!==f.callback&&(e.flags|=32,null===(h=l.effects)?l.effects=[f]:h.push(f))}else _={eventTime:_,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===w?(y=w=_,p=x):w=w.next=_,d|=h;if(null===(f=f.next)){if(null===(h=l.shared.pending))break;f=h.next,h.next=null,l.lastBaseUpdate=h,l.shared.pending=null}}null===w&&(p=x),l.baseState=p,l.firstBaseUpdate=y,l.lastBaseUpdate=w,Qs|=d,e.lanes=d,e.memoizedState=x}}function Eo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(f(191,a));a.call(r)}}}var Oo=(new r.Component).refs;function jo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var $o={isMounted:function(e){return!!(e=e._reactInternals)&&at(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kl(),a=Cl(e),l=_o(r,a);l.payload=t,null!=n&&(l.callback=n),So(e,l),El(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kl(),a=Cl(e),l=_o(r,a);l.tag=1,l.payload=t,null!=n&&(l.callback=n),So(e,l),El(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kl(),r=Cl(e),a=_o(n,r);a.tag=2,null!=t&&(a.callback=t),So(e,a),El(e,r,n)}};function To(e,t,n,r,a,l,f){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,l,f):!t.prototype||!t.prototype.isPureReactComponent||(!Sr(n,r)||!Sr(a,l))}function Ao(e,t,n){var r=!1,a=Si,l=t.contextType;return"object"==typeof l&&null!==l?l=yo(l):(a=ji(t)?Ei:ki.current,l=(r=null!=(r=t.contextTypes))?Oi(e,a):Si),t=new t(n,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=$o,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Po(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$o.enqueueReplaceState(t,t.state,null)}function Do(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Oo,wo(e);var l=t.contextType;"object"==typeof l&&null!==l?a.context=yo(l):(l=ji(t)?Ei:ki.current,a.context=Oi(e,l)),Co(e,n,a,r),a.state=e.memoizedState,"function"==typeof(l=t.getDerivedStateFromProps)&&(jo(e,t,l,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&$o.enqueueReplaceState(a,a.state,null),Co(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4)}var Ro=Array.isArray;function Io(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(f(309));var r=n.stateNode}if(!r)throw Error(f(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===Oo&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(f(284));if(!n._owner)throw Error(f(290,e))}return e}function Mo(e,t){if("textarea"!==e.type)throw Error(f(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Lo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=ic(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function d(t){return e&&null===t.alternate&&(t.flags=2),t}function h(e,t,n,r){return null===t||6!==t.tag?((t=lc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Io(e,t,n),r.return=e,r):((r=oc(n.type,n.key,n.props,null,e.mode,r)).ref=Io(e,t,n),r.return=e,r)}function y(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=cc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function w(e,t,n,r,l){return null===t||7!==t.tag?((t=ac(n,e.mode,r,l)).return=e,t):((t=a(t,n)).return=e,t)}function x(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=lc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case P:return(n=oc(t.type,t.key,t.props,null,e.mode,n)).ref=Io(e,null,t),n.return=e,n;case D:return(t=cc(t,e.mode,n)).return=e,t}if(Ro(t)||J(t))return(t=ac(t,e.mode,n,null)).return=e,t;Mo(e,t)}return null}function _(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:h(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case P:return n.key===a?n.type===R?w(e,t,n.props.children,r,a):p(e,t,n,r):null;case D:return n.key===a?y(e,t,n,r):null}if(Ro(n)||J(n))return null!==a?null:w(e,t,n,r,null);Mo(e,n)}return null}function S(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return h(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case P:return e=e.get(null===r.key?n:r.key)||null,r.type===R?w(t,e,r.props.children,a,r.key):p(t,e,r,a);case D:return y(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(Ro(r)||J(r))return w(t,e=e.get(n)||null,r,a,null);Mo(t,r)}return null}function k(a,f,d,h){for(var p=null,y=null,w=f,k=f=0,C=null;null!==w&&k<d.length;k++){w.index>k?(C=w,w=null):C=w.sibling;var E=_(a,w,d[k],h);if(null===E){null===w&&(w=C);break}e&&w&&null===E.alternate&&t(a,w),f=l(E,f,k),null===y?p=E:y.sibling=E,y=E,w=C}if(k===d.length)return n(a,w),p;if(null===w){for(;k<d.length;k++)null!==(w=x(a,d[k],h))&&(f=l(w,f,k),null===y?p=w:y.sibling=w,y=w);return p}for(w=r(a,w);k<d.length;k++)null!==(C=S(w,a,k,d[k],h))&&(e&&null!==C.alternate&&w.delete(null===C.key?k:C.key),f=l(C,f,k),null===y?p=C:y.sibling=C,y=C);return e&&w.forEach((function(e){return t(a,e)})),p}function C(a,d,h,p){var y=J(h);if("function"!=typeof y)throw Error(f(150));if(null==(h=y.call(h)))throw Error(f(151));for(var w=y=null,k=d,C=d=0,E=null,O=h.next();null!==k&&!O.done;C++,O=h.next()){k.index>C?(E=k,k=null):E=k.sibling;var j=_(a,k,O.value,p);if(null===j){null===k&&(k=E);break}e&&k&&null===j.alternate&&t(a,k),d=l(j,d,C),null===w?y=j:w.sibling=j,w=j,k=E}if(O.done)return n(a,k),y;if(null===k){for(;!O.done;C++,O=h.next())null!==(O=x(a,O.value,p))&&(d=l(O,d,C),null===w?y=O:w.sibling=O,w=O);return y}for(k=r(a,k);!O.done;C++,O=h.next())null!==(O=S(k,a,C,O.value,p))&&(e&&null!==O.alternate&&k.delete(null===O.key?C:O.key),d=l(O,d,C),null===w?y=O:w.sibling=O,w=O);return e&&k.forEach((function(e){return t(a,e)})),y}return function(e,r,l,h){var p="object"==typeof l&&null!==l&&l.type===R&&null===l.key;p&&(l=l.props.children);var y="object"==typeof l&&null!==l;if(y)switch(l.$$typeof){case P:e:{for(y=l.key,p=r;null!==p;){if(p.key===y){if(7===p.tag){if(l.type===R){n(e,p.sibling),(r=a(p,l.props.children)).return=e,e=r;break e}}else if(p.elementType===l.type){n(e,p.sibling),(r=a(p,l.props)).ref=Io(e,p,l),r.return=e,e=r;break e}n(e,p);break}t(e,p),p=p.sibling}l.type===R?((r=ac(l.props.children,e.mode,h,l.key)).return=e,e=r):((h=oc(l.type,l.key,l.props,null,e.mode,h)).ref=Io(e,r,l),h.return=e,e=h)}return d(e);case D:e:{for(p=l.key;null!==r;){if(r.key===p){if(4===r.tag&&r.stateNode.containerInfo===l.containerInfo&&r.stateNode.implementation===l.implementation){n(e,r.sibling),(r=a(r,l.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=cc(l,e.mode,h)).return=e,e=r}return d(e)}if("string"==typeof l||"number"==typeof l)return l=""+l,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,l)).return=e,e=r):(n(e,r),(r=lc(l,e.mode,h)).return=e,e=r),d(e);if(Ro(l))return k(e,r,l,h);if(J(l))return C(e,r,l,h);if(y&&Mo(e,l),void 0===l&&!p)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(f(152,re(e.type)||"Component"))}return n(e,r)}}var No=Lo(!0),Fo=Lo(!1),qo={},Bo=wi(qo),Uo=wi(qo),Ho=wi(qo);function zo(e){if(e===qo)throw Error(f(174));return e}function Vo(e,t){switch(_i(Ho,t),_i(Uo,e),_i(Bo,qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ke(null,"");break;default:t=ke(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Bo),_i(Bo,t)}function Wo(){xi(Bo),xi(Uo),xi(Ho)}function Zo(e){zo(Ho.current);var t=zo(Bo.current),n=ke(t,e.type);t!==n&&(_i(Uo,e),_i(Bo,n))}function Go(e){Uo.current===e&&(xi(Bo),xi(Uo))}var Ko=wi(0);function Yo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xo=null,Jo=null,Qo=!1;function ea(e,t){var n=nc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ta(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function na(e){if(Qo){var t=Jo;if(t){var n=t;if(!ta(e,t)){if(!(t=oi(n.nextSibling))||!ta(e,t))return e.flags=-1025&e.flags|2,Qo=!1,void(Xo=e);ea(Xo,n)}Xo=e,Jo=oi(t.firstChild)}else e.flags=-1025&e.flags|2,Qo=!1,Xo=e}}function ra(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Xo=e}function ia(e){if(e!==Xo)return!1;if(!Qo)return ra(e),Qo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!ti(t,e.memoizedProps))for(t=Jo;t;)ea(e,t),t=oi(t.nextSibling);if(ra(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(f(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Jo=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Jo=null}}else Jo=Xo?oi(e.stateNode.nextSibling):null;return!0}function oa(){Jo=Xo=null,Qo=!1}var aa=[];function sa(){for(var e=0;e<aa.length;e++)aa[e]._workInProgressVersionPrimary=null;aa.length=0}var la=A.ReactCurrentDispatcher,ca=A.ReactCurrentBatchConfig,ua=0,fa=null,da=null,ha=null,pa=!1,ma=!1;function ga(){throw Error(f(321))}function va(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xr(e[n],t[n]))return!1;return!0}function ya(e,t,n,r,a,l){if(ua=l,fa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,la.current=null===e||null===e.memoizedState?za:Va,e=n(r,a),ma){l=0;do{if(ma=!1,!(25>l))throw Error(f(301));l+=1,ha=da=null,t.updateQueue=null,la.current=Wa,e=n(r,a)}while(ma)}if(la.current=Ha,t=null!==da&&null!==da.next,ua=0,ha=da=fa=null,pa=!1,t)throw Error(f(300));return e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ha?fa.memoizedState=ha=e:ha=ha.next=e,ha}function wa(){if(null===da){var e=fa.alternate;e=null!==e?e.memoizedState:null}else e=da.next;var t=null===ha?fa.memoizedState:ha.next;if(null!==t)ha=t,da=e;else{if(null===e)throw Error(f(310));e={memoizedState:(da=e).memoizedState,baseState:da.baseState,baseQueue:da.baseQueue,queue:da.queue,next:null},null===ha?fa.memoizedState=ha=e:ha=ha.next=e}return ha}function xa(e,t){return"function"==typeof t?t(e):t}function _a(e){var t=wa(),n=t.queue;if(null===n)throw Error(f(311));n.lastRenderedReducer=e;var r=da,a=r.baseQueue,l=n.pending;if(null!==l){if(null!==a){var d=a.next;a.next=l.next,l.next=d}r.baseQueue=a=l,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var h=d=l=null,p=a;do{var y=p.lane;if((ua&y)===y)null!==h&&(h=h.next={lane:0,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null}),r=p.eagerReducer===e?p.eagerState:e(r,p.action);else{var w={lane:y,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null};null===h?(d=h=w,l=r):h=h.next=w,fa.lanes|=y,Qs|=y}p=p.next}while(null!==p&&p!==a);null===h?l=r:h.next=d,xr(r,t.memoizedState)||(Ga=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=h,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Sa(e){var t=wa(),n=t.queue;if(null===n)throw Error(f(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(null!==a){n.pending=null;var d=a=a.next;do{l=e(l,d.action),d=d.next}while(d!==a);xr(l,t.memoizedState)||(Ga=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function ka(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(ua&e)===e)&&(t._workInProgressVersionPrimary=r,aa.push(t))),e)return n(t._source);throw aa.push(t),Error(f(350))}function Ca(e,t,n,r){var a=Vs;if(null===a)throw Error(f(349));var l=t._getVersion,d=l(t._source),h=la.current,p=h.useState((function(){return ka(a,t,n)})),y=p[1],w=p[0];p=ha;var x=e.memoizedState,_=x.refs,S=_.getSnapshot,k=x.source;x=x.subscribe;var C=fa;return e.memoizedState={refs:_,source:t,subscribe:r},h.useEffect((function(){_.getSnapshot=n,_.setSnapshot=y;var e=l(t._source);if(!xr(d,e)){e=n(t._source),xr(w,e)||(y(e),e=Cl(C),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,f=e;0<f;){var h=31-en(f),p=1<<h;r[h]|=e,f&=~p}}}),[n,t,r]),h.useEffect((function(){return r(t._source,(function(){var e=_.getSnapshot,n=_.setSnapshot;try{n(e(t._source));var r=Cl(C);a.mutableReadLanes|=r&a.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),xr(S,n)&&xr(k,t)&&xr(x,r)||((e={pending:null,dispatch:null,lastRenderedReducer:xa,lastRenderedState:w}).dispatch=y=Ua.bind(null,fa,e),p.queue=e,p.baseQueue=null,w=ka(a,t,n),p.memoizedState=p.baseState=w),w}function Ea(e,t,n){return Ca(wa(),e,t,n)}function Oa(e){var t=ba();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e}).dispatch=Ua.bind(null,fa,e),[t.memoizedState,e]}function ja(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=fa.updateQueue)?(t={lastEffect:null},fa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function $a(e){return e={current:e},ba().memoizedState=e}function Ta(){return wa().memoizedState}function Aa(e,t,n,r){var a=ba();fa.flags|=e,a.memoizedState=ja(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var a=wa();r=void 0===r?null:r;var l=void 0;if(null!==da){var f=da.memoizedState;if(l=f.destroy,null!==r&&va(r,f.deps))return void ja(t,n,l,r)}fa.flags|=e,a.memoizedState=ja(1|t,n,l,r)}function Da(e,t){return Aa(516,4,e,t)}function Ra(e,t){return Pa(516,4,e,t)}function Ia(e,t){return Pa(4,2,e,t)}function Ma(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function La(e,t,n){return n=null!=n?n.concat([e]):null,Pa(4,2,Ma.bind(null,t,e),n)}function Na(){}function Fa(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&va(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&va(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t){var n=to();ro(98>n?98:n,(function(){e(!0)})),ro(97<n?97:n,(function(){var n=ca.transition;ca.transition=1;try{e(!1),t()}finally{ca.transition=n}}))}function Ua(e,t,n){var r=kl(),a=Cl(e),l={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},f=t.pending;if(null===f?l.next=l:(l.next=f.next,f.next=l),t.pending=l,f=e.alternate,e===fa||null!==f&&f===fa)ma=pa=!0;else{if(0===e.lanes&&(null===f||0===f.lanes)&&null!==(f=t.lastRenderedReducer))try{var d=t.lastRenderedState,h=f(d,n);if(l.eagerReducer=f,l.eagerState=h,xr(h,d))return}catch(e){}El(e,a,r)}}var Ha={readContext:yo,useCallback:ga,useContext:ga,useEffect:ga,useImperativeHandle:ga,useLayoutEffect:ga,useMemo:ga,useReducer:ga,useRef:ga,useState:ga,useDebugValue:ga,useDeferredValue:ga,useTransition:ga,useMutableSource:ga,useOpaqueIdentifier:ga,unstable_isNewReconciler:!1},za={readContext:yo,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:yo,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Aa(4,2,Ma.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Aa(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ua.bind(null,fa,e),[r.memoizedState,e]},useRef:$a,useState:Oa,useDebugValue:Na,useDeferredValue:function(e){var t=Oa(e),n=t[0],r=t[1];return Da((function(){var t=ca.transition;ca.transition=1;try{r(e)}finally{ca.transition=t}}),[e]),n},useTransition:function(){var e=Oa(!1),t=e[0];return $a(e=Ba.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ba();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Ca(r,e,t,n)},useOpaqueIdentifier:function(){if(Qo){var e=!1,t=function(e){return{$$typeof:V,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(si++).toString(36))),Error(f(355))})),n=Oa(t)[1];return 0==(2&fa.mode)&&(fa.flags|=516,ja(5,(function(){n("r:"+(si++).toString(36))}),void 0,null)),t}return Oa(t="r:"+(si++).toString(36)),t},unstable_isNewReconciler:!1},Va={readContext:yo,useCallback:Fa,useContext:yo,useEffect:Ra,useImperativeHandle:La,useLayoutEffect:Ia,useMemo:qa,useReducer:_a,useRef:Ta,useState:function(){return _a(xa)},useDebugValue:Na,useDeferredValue:function(e){var t=_a(xa),n=t[0],r=t[1];return Ra((function(){var t=ca.transition;ca.transition=1;try{r(e)}finally{ca.transition=t}}),[e]),n},useTransition:function(){var e=_a(xa)[0];return[Ta().current,e]},useMutableSource:Ea,useOpaqueIdentifier:function(){return _a(xa)[0]},unstable_isNewReconciler:!1},Wa={readContext:yo,useCallback:Fa,useContext:yo,useEffect:Ra,useImperativeHandle:La,useLayoutEffect:Ia,useMemo:qa,useReducer:Sa,useRef:Ta,useState:function(){return Sa(xa)},useDebugValue:Na,useDeferredValue:function(e){var t=Sa(xa),n=t[0],r=t[1];return Ra((function(){var t=ca.transition;ca.transition=1;try{r(e)}finally{ca.transition=t}}),[e]),n},useTransition:function(){var e=Sa(xa)[0];return[Ta().current,e]},useMutableSource:Ea,useOpaqueIdentifier:function(){return Sa(xa)[0]},unstable_isNewReconciler:!1},Za=A.ReactCurrentOwner,Ga=!1;function Ka(e,t,n,r){t.child=null===e?Fo(t,null,n,r):No(t,e.child,n,r)}function Ya(e,t,n,r,a){n=n.render;var l=t.ref;return vo(t,a),r=ya(e,t,n,r,l,a),null===e||Ga?(t.flags|=1,Ka(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,vs(e,t,a))}function Xa(e,t,n,r,a,l){if(null===e){var f=n.type;return"function"!=typeof f||rc(f)||void 0!==f.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=oc(n.type,null,r,t,t.mode,l)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=f,Ja(e,t,f,r,a,l))}return f=e.child,0==(a&l)&&(a=f.memoizedProps,(n=null!==(n=n.compare)?n:Sr)(a,r)&&e.ref===t.ref)?vs(e,t,l):(t.flags|=1,(e=ic(f,r)).ref=t.ref,e.return=t,t.child=e)}function Ja(e,t,n,r,a,l){if(null!==e&&Sr(e.memoizedProps,r)&&e.ref===t.ref){if(Ga=!1,0==(l&a))return t.lanes=e.lanes,vs(e,t,l);0!=(16384&e.flags)&&(Ga=!0)}return ts(e,t,n,r,l)}function Qa(e,t,n){var r=t.pendingProps,a=r.children,l=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},Rl(t,n);else{if(0==(1073741824&n))return e=null!==l?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Rl(t,e),null;t.memoizedState={baseLanes:0},Rl(t,null!==l?l.baseLanes:n)}else null!==l?(r=l.baseLanes|n,t.memoizedState=null):r=n,Rl(t,r);return Ka(e,t,a,n),t.child}function es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function ts(e,t,n,r,a){var l=ji(n)?Ei:ki.current;return l=Oi(t,l),vo(t,a),n=ya(e,t,n,r,l,a),null===e||Ga?(t.flags|=1,Ka(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,vs(e,t,a))}function ns(e,t,n,r,a){if(ji(n)){var l=!0;Pi(t)}else l=!1;if(vo(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Ao(t,n,r),Do(t,n,r,a),r=!0;else if(null===e){var f=t.stateNode,d=t.memoizedProps;f.props=d;var h=f.context,p=n.contextType;"object"==typeof p&&null!==p?p=yo(p):p=Oi(t,p=ji(n)?Ei:ki.current);var y=n.getDerivedStateFromProps,w="function"==typeof y||"function"==typeof f.getSnapshotBeforeUpdate;w||"function"!=typeof f.UNSAFE_componentWillReceiveProps&&"function"!=typeof f.componentWillReceiveProps||(d!==r||h!==p)&&Po(t,f,r,p),bo=!1;var x=t.memoizedState;f.state=x,Co(t,r,f,a),h=t.memoizedState,d!==r||x!==h||Ci.current||bo?("function"==typeof y&&(jo(t,n,y,r),h=t.memoizedState),(d=bo||To(t,n,d,r,x,h,p))?(w||"function"!=typeof f.UNSAFE_componentWillMount&&"function"!=typeof f.componentWillMount||("function"==typeof f.componentWillMount&&f.componentWillMount(),"function"==typeof f.UNSAFE_componentWillMount&&f.UNSAFE_componentWillMount()),"function"==typeof f.componentDidMount&&(t.flags|=4)):("function"==typeof f.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=h),f.props=r,f.state=h,f.context=p,r=d):("function"==typeof f.componentDidMount&&(t.flags|=4),r=!1)}else{f=t.stateNode,xo(e,t),d=t.memoizedProps,p=t.type===t.elementType?d:lo(t.type,d),f.props=p,w=t.pendingProps,x=f.context,"object"==typeof(h=n.contextType)&&null!==h?h=yo(h):h=Oi(t,h=ji(n)?Ei:ki.current);var _=n.getDerivedStateFromProps;(y="function"==typeof _||"function"==typeof f.getSnapshotBeforeUpdate)||"function"!=typeof f.UNSAFE_componentWillReceiveProps&&"function"!=typeof f.componentWillReceiveProps||(d!==w||x!==h)&&Po(t,f,r,h),bo=!1,x=t.memoizedState,f.state=x,Co(t,r,f,a);var S=t.memoizedState;d!==w||x!==S||Ci.current||bo?("function"==typeof _&&(jo(t,n,_,r),S=t.memoizedState),(p=bo||To(t,n,p,r,x,S,h))?(y||"function"!=typeof f.UNSAFE_componentWillUpdate&&"function"!=typeof f.componentWillUpdate||("function"==typeof f.componentWillUpdate&&f.componentWillUpdate(r,S,h),"function"==typeof f.UNSAFE_componentWillUpdate&&f.UNSAFE_componentWillUpdate(r,S,h)),"function"==typeof f.componentDidUpdate&&(t.flags|=4),"function"==typeof f.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof f.componentDidUpdate||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),"function"!=typeof f.getSnapshotBeforeUpdate||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=S),f.props=r,f.state=S,f.context=h,r=p):("function"!=typeof f.componentDidUpdate||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),"function"!=typeof f.getSnapshotBeforeUpdate||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=256),r=!1)}return rs(e,t,n,r,l,a)}function rs(e,t,n,r,a,l){es(e,t);var f=0!=(64&t.flags);if(!r&&!f)return a&&Di(t,n,!1),vs(e,t,l);r=t.stateNode,Za.current=t;var d=f&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&f?(t.child=No(t,e.child,null,l),t.child=No(t,null,d,l)):Ka(e,t,d,l),t.memoizedState=r.state,a&&Di(t,n,!0),t.child}function is(e){var t=e.stateNode;t.pendingContext?Ti(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ti(0,t.context,!1),Vo(e,t.containerInfo)}var os,as,ss,ls,cs={dehydrated:null,retryLane:0};function us(e,t,n){var r,a=t.pendingProps,l=Ko.current,f=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&l)),r?(f=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(l|=1),_i(Ko,1&l),null===e?(void 0!==a.fallback&&na(t),e=a.children,l=a.fallback,f?(e=fs(t,e,l,n),t.child.memoizedState={baseLanes:n},t.memoizedState=cs,e):"number"==typeof a.unstable_expectedLoadTime?(e=fs(t,e,l,n),t.child.memoizedState={baseLanes:n},t.memoizedState=cs,t.lanes=33554432,e):((n=sc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,f?(a=hs(e,t,a.children,a.fallback,n),f=t.child,l=e.child.memoizedState,f.memoizedState=null===l?{baseLanes:n}:{baseLanes:l.baseLanes|n},f.childLanes=e.childLanes&~n,t.memoizedState=cs,a):(n=ds(e,t,a.children,n),t.memoizedState=null,n))}function fs(e,t,n,r){var a=e.mode,l=e.child;return t={mode:"hidden",children:t},0==(2&a)&&null!==l?(l.childLanes=0,l.pendingProps=t):l=sc(t,a,0,null),n=ac(n,a,r,null),l.return=e,n.return=e,l.sibling=n,e.child=l,n}function ds(e,t,n,r){var a=e.child;return e=a.sibling,n=ic(a,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function hs(e,t,n,r,a){var l=t.mode,f=e.child;e=f.sibling;var d={mode:"hidden",children:n};return 0==(2&l)&&t.child!==f?((n=t.child).childLanes=0,n.pendingProps=d,null!==(f=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=f,f.nextEffect=null):t.firstEffect=t.lastEffect=null):n=ic(f,d),null!==e?r=ic(e,r):(r=ac(r,l,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ps(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),go(e.return,t)}function ms(e,t,n,r,a,l){var f=e.memoizedState;null===f?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:l}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=r,f.tail=n,f.tailMode=a,f.lastEffect=l)}function gs(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(Ka(e,t,r.children,n),0!=(2&(r=Ko.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ps(e,n);else if(19===e.tag)ps(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(Ko,r),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Yo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),ms(t,!1,a,n,l,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Yo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}ms(t,!0,n,null,l,t.lastEffect);break;case"together":ms(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Qs|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(f(153));if(null!==t.child){for(n=ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ys(e,t){if(!Qo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bs(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ji(t.type)&&$i(),null;case 3:return Wo(),xi(Ci),xi(ki),sa(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ia(t)?t.flags|=4:r.hydrate||(t.flags|=256)),as(t),null;case 5:Go(t);var l=zo(Ho.current);if(n=t.type,null!==e&&null!=t.stateNode)ss(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(f(166));return null}if(e=zo(Bo.current),ia(t)){r=t.stateNode,n=t.type;var d=t.memoizedProps;switch(r[ci]=t,r[ui]=d,n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(e=0;e<Lr.length;e++)Br(Lr[e],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":fe(r,d),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!d.multiple},Br("invalid",r);break;case"textarea":be(r,d),Br("invalid",r)}for(var p in Re(n,d),e=null,d)d.hasOwnProperty(p)&&(l=d[p],"children"===p?"string"==typeof l?r.textContent!==l&&(e=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(e=["children",""+l]):h.hasOwnProperty(p)&&null!=l&&"onScroll"===p&&Br("scroll",r));switch(n){case"input":se(r),pe(r,d,!0);break;case"textarea":se(r),xe(r);break;case"select":case"option":break;default:"function"==typeof d.onClick&&(r.onclick=Xr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(p=9===l.nodeType?l:l.ownerDocument,e===_e.html&&(e=Se(n)),e===_e.html?"script"===n?((e=p.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=p.createElement(n,{is:r.is}):(e=p.createElement(n),"select"===n&&(p=e,r.multiple?p.multiple=!0:r.size&&(p.size=r.size))):e=p.createElementNS(e,n),e[ci]=t,e[ui]=r,os(e,t,!1,!1),t.stateNode=e,p=Ie(n,r),n){case"dialog":Br("cancel",e),Br("close",e),l=r;break;case"iframe":case"object":case"embed":Br("load",e),l=r;break;case"video":case"audio":for(l=0;l<Lr.length;l++)Br(Lr[l],e);l=r;break;case"source":Br("error",e),l=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),l=r;break;case"details":Br("toggle",e),l=r;break;case"input":fe(e,r),l=ue(e,r),Br("invalid",e);break;case"option":l=ge(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=a({},r,{value:void 0}),Br("invalid",e);break;case"textarea":be(e,r),l=ye(e,r),Br("invalid",e);break;default:l=r}Re(n,l);var y=l;for(d in y)if(y.hasOwnProperty(d)){var w=y[d];"style"===d?Pe(e,w):"dangerouslySetInnerHTML"===d?null!=(w=w?w.__html:void 0)&&Oe(e,w):"children"===d?"string"==typeof w?("textarea"!==n||""!==w)&&je(e,w):"number"==typeof w&&je(e,""+w):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(h.hasOwnProperty(d)?null!=w&&"onScroll"===d&&Br("scroll",e):null!=w&&T(e,d,w,p))}switch(n){case"input":se(e),pe(e,r,!1);break;case"textarea":se(e),xe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+oe(r.value));break;case"select":e.multiple=!!r.multiple,null!=(d=r.value)?ve(e,!!r.multiple,d,!1):null!=r.defaultValue&&ve(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=Xr)}ei(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)ls(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(f(166));n=zo(Ho.current),zo(Bo.current),ia(t)?(r=t.stateNode,n=t.memoizedProps,r[ci]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r)}return null;case 13:return xi(Ko),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&ia(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ko.current)?0===Ys&&(Ys=3):(0!==Ys&&3!==Ys||(Ys=4),null===Vs||0==(134217727&Qs)&&0==(134217727&el)||Tl(Vs,Zs))),(r||n)&&(t.flags|=4),null);case 4:return Wo(),as(t),null===e&&Hr(t.stateNode.containerInfo),null;case 10:return mo(t),null;case 19:if(xi(Ko),null===(r=t.memoizedState))return null;if(d=0!=(64&t.flags),null===(p=r.rendering))if(d)ys(r,!1);else{if(0!==Ys||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(p=Yo(e))){for(t.flags|=64,ys(r,!1),null!==(d=p.updateQueue)&&(t.updateQueue=d,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(d=n).flags&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,null===(p=d.alternate)?(d.childLanes=0,d.lanes=e,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,e=p.dependencies,d.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(Ko,1&Ko.current|2),t.child}e=e.sibling}null!==r.tail&&eo()>il&&(t.flags|=64,d=!0,ys(r,!1),t.lanes=33554432)}else{if(!d)if(null!==(e=Yo(p))){if(t.flags|=64,d=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ys(r,!0),null===r.tail&&"hidden"===r.tailMode&&!p.alternate&&!Qo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*eo()-r.renderingStartTime>il&&1073741824!==n&&(t.flags|=64,d=!0,ys(r,!1),t.lanes=33554432);r.isBackwards?(p.sibling=t.child,t.child=p):(null!==(n=r.last)?n.sibling=p:t.child=p,r.last=p)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=eo(),n.sibling=null,t=Ko.current,_i(Ko,d?1&t|2:1&t),n):null;case 23:case 24:return Il(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(f(156,t.tag))}function ws(e){switch(e.tag){case 1:ji(e.type)&&$i();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Wo(),xi(Ci),xi(ki),sa(),0!=(64&(t=e.flags)))throw Error(f(285));return e.flags=-4097&t|64,e;case 5:return Go(e),null;case 13:return xi(Ko),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return xi(Ko),null;case 4:return Wo(),null;case 10:return mo(e),null;case 23:case 24:return Il(),null;default:return null}}function xs(e,t){try{var n="",r=t;do{n+=ne(r),r=r.return}while(r);var a=n}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a}}function _s(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},as=function(){},ss=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,zo(Bo.current);var f,d=null;switch(n){case"input":l=ue(e,l),r=ue(e,r),d=[];break;case"option":l=ge(e,l),r=ge(e,r),d=[];break;case"select":l=a({},l,{value:void 0}),r=a({},r,{value:void 0}),d=[];break;case"textarea":l=ye(e,l),r=ye(e,r),d=[];break;default:"function"!=typeof l.onClick&&"function"==typeof r.onClick&&(e.onclick=Xr)}for(w in Re(n,r),n=null,l)if(!r.hasOwnProperty(w)&&l.hasOwnProperty(w)&&null!=l[w])if("style"===w){var p=l[w];for(f in p)p.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else"dangerouslySetInnerHTML"!==w&&"children"!==w&&"suppressContentEditableWarning"!==w&&"suppressHydrationWarning"!==w&&"autoFocus"!==w&&(h.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in r){var y=r[w];if(p=null!=l?l[w]:void 0,r.hasOwnProperty(w)&&y!==p&&(null!=y||null!=p))if("style"===w)if(p){for(f in p)!p.hasOwnProperty(f)||y&&y.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in y)y.hasOwnProperty(f)&&p[f]!==y[f]&&(n||(n={}),n[f]=y[f])}else n||(d||(d=[]),d.push(w,n)),n=y;else"dangerouslySetInnerHTML"===w?(y=y?y.__html:void 0,p=p?p.__html:void 0,null!=y&&p!==y&&(d=d||[]).push(w,y)):"children"===w?"string"!=typeof y&&"number"!=typeof y||(d=d||[]).push(w,""+y):"suppressContentEditableWarning"!==w&&"suppressHydrationWarning"!==w&&(h.hasOwnProperty(w)?(null!=y&&"onScroll"===w&&Br("scroll",e),d||p===y||(d=[])):"object"==typeof y&&null!==y&&y.$$typeof===V?y.toString():(d=d||[]).push(w,y))}n&&(d=d||[]).push("style",n);var w=d;(t.updateQueue=w)&&(t.flags|=4)}},ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ss="function"==typeof WeakMap?WeakMap:Map;function ks(e,t,n){(n=_o(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ll||(ll=!0,cl=r),_s(0,t)},n}function Cs(e,t,n){(n=_o(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return _s(0,t),r(a)}}var l=e.stateNode;return null!==l&&"function"==typeof l.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===ul?ul=new Set([this]):ul.add(this),_s(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var Es="function"==typeof WeakSet?WeakSet:Set;function Os(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Jl(e,t)}else t.current=null}function js(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:lo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&ii(t.stateNode.containerInfo))}throw Error(f(163))}function $s(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!=(4&(a=a.tag))&&0!=(1&a)&&(Kl(n,e),Gl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:lo(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&Eo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}Eo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&ei(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Pt(n)))))}throw Error(f(163))}function Ts(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=null!=a&&a.hasOwnProperty("display")?a.display:null,r.style.display=Ae("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function As(e,t){if(Ii&&"function"==typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(Ri,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!=(4&r))Kl(t,n);else{r=t;try{a()}catch(e){Jl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(Os(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Jl(t,e)}break;case 5:Os(t);break;case 4:Ls(e,t)}}function Ps(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Ds(e){return 5===e.tag||3===e.tag||4===e.tag}function Rs(e){e:{for(var t=e.return;null!==t;){if(Ds(t))break e;t=t.return}throw Error(f(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(f(161))}16&n.flags&&(je(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Ds(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Is(e,n,t):Ms(e,n,t)}function Is(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(Is(e,t,n),e=e.sibling;null!==e;)Is(e,t,n),e=e.sibling}function Ms(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ms(e,t,n),e=e.sibling;null!==e;)Ms(e,t,n),e=e.sibling}function Ls(e,t){for(var n,r,a=t,l=!1;;){if(!l){l=a.return;e:for(;;){if(null===l)throw Error(f(160));switch(n=l.stateNode,l.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}l=l.return}l=!0}if(5===a.tag||6===a.tag){e:for(var d=e,h=a,p=h;;)if(As(d,p),null!==p.child&&4!==p.tag)p.child.return=p,p=p.child;else{if(p===h)break e;for(;null===p.sibling;){if(null===p.return||p.return===h)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}r?(d=n,h=a.stateNode,8===d.nodeType?d.parentNode.removeChild(h):d.removeChild(h)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(As(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(l=!1)}a.sibling.return=a.return,a=a.sibling}}function Ns(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var l=t.updateQueue;if(t.updateQueue=null,null!==l){for(n[ui]=r,"input"===e&&"radio"===r.type&&null!=r.name&&de(n,r),Ie(e,a),t=Ie(e,r),a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];"style"===d?Pe(n,h):"dangerouslySetInnerHTML"===d?Oe(n,h):"children"===d?je(n,h):T(n,d,h,t)}switch(e){case"input":he(n,r);break;case"textarea":we(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(l=r.value)?ve(n,!!r.multiple,l,!1):e!==!!r.multiple&&(null!=r.defaultValue?ve(n,!!r.multiple,r.defaultValue,!0):ve(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(f(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Pt(n.containerInfo)));case 13:return null!==t.memoizedState&&(rl=eo(),Ts(t.child,!0)),void Fs(t);case 19:return void Fs(t);case 23:case 24:return void Ts(t,null!==t.memoizedState)}throw Error(f(163))}function Fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Es),t.forEach((function(t){var r=ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function qs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Bs=Math.ceil,Us=A.ReactCurrentDispatcher,Hs=A.ReactCurrentOwner,zs=0,Vs=null,Ws=null,Zs=0,Gs=0,Ks=wi(0),Ys=0,Xs=null,Js=0,Qs=0,el=0,tl=0,nl=null,rl=0,il=1/0;function ol(){il=eo()+500}var al,sl=null,ll=!1,cl=null,ul=null,fl=!1,dl=null,hl=90,pl=[],ml=[],gl=null,vl=0,yl=null,bl=-1,wl=0,xl=0,_l=null,Sl=!1;function kl(){return 0!=(48&zs)?eo():-1!==bl?bl:bl=eo()}function Cl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===to()?1:2;if(0===wl&&(wl=Js),0!==so.transition){0!==xl&&(xl=null!==nl?nl.pendingLanes:0),e=wl;var t=4186112&~xl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=to(),0!=(4&zs)&&98===e?e=Yt(12,wl):e=Yt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),wl),e}function El(e,t,n){if(50<vl)throw vl=0,yl=null,Error(f(185));if(null===(e=Ol(e,t)))return null;Qt(e,t,n),e===Vs&&(el|=t,4===Ys&&Tl(e,Zs));var r=to();1===t?0!=(8&zs)&&0==(48&zs)?Al(e):(jl(e,n),0===zs&&(ol(),oo())):(0==(4&zs)||98!==r&&99!==r||(null===gl?gl=new Set([e]):gl.add(e)),jl(e,n)),nl=e}function Ol(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function jl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,d=e.pendingLanes;0<d;){var h=31-en(d),p=1<<h,y=l[h];if(-1===y){if(0==(p&r)||0!=(p&a)){y=t,Zt(p);var w=Wt;l[h]=10<=w?y+250:6<=w?y+5e3:-1}}else y<=t&&(e.expiredLanes|=p);d&=~p}if(r=Gt(e,e===Vs?Zs:0),t=Wt,0===r)null!==n&&(n!==Gi&&Ni(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Gi&&Ni(n)}15===t?(n=Al.bind(null,e),null===Yi?(Yi=[n],Xi=Li(Hi,ao)):Yi.push(n),n=Gi):14===t?n=io(99,Al.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(f(358,e))}}(t),n=io(n,$l.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function $l(e){if(bl=-1,xl=wl=0,0!=(48&zs))throw Error(f(327));var t=e.callbackNode;if(Zl()&&e.callbackNode!==t)return null;var n=Gt(e,e===Vs?Zs:0);if(0===n)return null;var r=n,a=zs;zs|=16;var l=Nl();for(Vs===e&&Zs===r||(ol(),Ml(e,r));;)try{Bl();break}catch(t){Ll(e,t)}if(po(),Us.current=l,zs=a,null!==Ws?r=0:(Vs=null,Zs=0,r=Ys),0!=(Js&el))Ml(e,0);else if(0!==r){if(2===r&&(zs|=64,e.hydrate&&(e.hydrate=!1,ii(e.containerInfo)),0!==(n=Kt(e))&&(r=Fl(e,n))),1===r)throw t=Xs,Ml(e,0),Tl(e,n),jl(e,eo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(f(345));case 2:case 5:zl(e);break;case 3:if(Tl(e,n),(62914560&n)===n&&10<(r=rl+500-eo())){if(0!==Gt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){kl(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ni(zl.bind(null,e),r);break}zl(e);break;case 4:if(Tl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var d=31-en(n);l=1<<d,(d=r[d])>a&&(a=d),n&=~l}if(n=a,10<(n=(120>(n=eo()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Bs(n/1960))-n)){e.timeoutHandle=ni(zl.bind(null,e),n);break}zl(e);break;default:throw Error(f(329))}}return jl(e,eo()),e.callbackNode===t?$l.bind(null,e):null}function Tl(e,t){for(t&=~tl,t&=~el,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),r=1<<n;e[n]=-1,t&=~r}}function Al(e){if(0!=(48&zs))throw Error(f(327));if(Zl(),e===Vs&&0!=(e.expiredLanes&Zs)){var t=Zs,n=Fl(e,t);0!=(Js&el)&&(n=Fl(e,t=Gt(e,t)))}else n=Fl(e,t=Gt(e,0));if(0!==e.tag&&2===n&&(zs|=64,e.hydrate&&(e.hydrate=!1,ii(e.containerInfo)),0!==(t=Kt(e))&&(n=Fl(e,t))),1===n)throw n=Xs,Ml(e,0),Tl(e,t),jl(e,eo()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,zl(e),jl(e,eo()),null}function Pl(e,t){var n=zs;zs|=1;try{return e(t)}finally{0===(zs=n)&&(ol(),oo())}}function Dl(e,t){var n=zs;zs&=-2,zs|=8;try{return e(t)}finally{0===(zs=n)&&(ol(),oo())}}function Rl(e,t){_i(Ks,Gs),Gs|=t,Js|=t}function Il(){Gs=Ks.current,xi(Ks)}function Ml(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ri(n)),null!==Ws)for(n=Ws.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&$i();break;case 3:Wo(),xi(Ci),xi(ki),sa();break;case 5:Go(r);break;case 4:Wo();break;case 13:case 19:xi(Ko);break;case 10:mo(r);break;case 23:case 24:Il()}n=n.return}Vs=e,Ws=ic(e.current,null),Zs=Gs=Js=t,Ys=0,Xs=null,tl=el=Qs=0}function Ll(e,t){for(;;){var n=Ws;try{if(po(),la.current=Ha,pa){for(var r=fa.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}pa=!1}if(ua=0,ha=da=fa=null,ma=!1,Hs.current=null,null===n||null===n.return){Ys=1,Xs=t,Ws=null;break}e:{var l=e,f=n.return,d=n,h=t;if(t=Zs,d.flags|=2048,d.firstEffect=d.lastEffect=null,null!==h&&"object"==typeof h&&"function"==typeof h.then){var p=h;if(0==(2&d.mode)){var y=d.alternate;y?(d.updateQueue=y.updateQueue,d.memoizedState=y.memoizedState,d.lanes=y.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=0!=(1&Ko.current),x=f;do{var _;if(_=13===x.tag){var S=x.memoizedState;if(null!==S)_=null!==S.dehydrated;else{var k=x.memoizedProps;_=void 0!==k.fallback&&(!0!==k.unstable_avoidThisFallback||!w)}}if(_){var C=x.updateQueue;if(null===C){var E=new Set;E.add(p),x.updateQueue=E}else C.add(p);if(0==(2&x.mode)){if(x.flags|=64,d.flags|=16384,d.flags&=-2981,1===d.tag)if(null===d.alternate)d.tag=17;else{var O=_o(-1,1);O.tag=2,So(d,O)}d.lanes|=1;break e}h=void 0,d=t;var j=l.pingCache;if(null===j?(j=l.pingCache=new Ss,h=new Set,j.set(p,h)):void 0===(h=j.get(p))&&(h=new Set,j.set(p,h)),!h.has(d)){h.add(d);var T=Ql.bind(null,l,p,d);p.then(T,T)}x.flags|=4096,x.lanes=t;break e}x=x.return}while(null!==x);h=Error((re(d.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ys&&(Ys=2),h=xs(h,d),x=f;do{switch(x.tag){case 3:l=h,x.flags|=4096,t&=-t,x.lanes|=t,ko(x,ks(0,l,t));break e;case 1:l=h;var A=x.type,P=x.stateNode;if(0==(64&x.flags)&&("function"==typeof A.getDerivedStateFromError||null!==P&&"function"==typeof P.componentDidCatch&&(null===ul||!ul.has(P)))){x.flags|=4096,t&=-t,x.lanes|=t,ko(x,Cs(x,l,t));break e}}x=x.return}while(null!==x)}Hl(n)}catch(e){t=e,Ws===n&&null!==n&&(Ws=n=n.return);continue}break}}function Nl(){var e=Us.current;return Us.current=Ha,null===e?Ha:e}function Fl(e,t){var n=zs;zs|=16;var r=Nl();for(Vs===e&&Zs===t||Ml(e,t);;)try{ql();break}catch(t){Ll(e,t)}if(po(),zs=n,Us.current=r,null!==Ws)throw Error(f(261));return Vs=null,Zs=0,Ys}function ql(){for(;null!==Ws;)Ul(Ws)}function Bl(){for(;null!==Ws&&!Fi();)Ul(Ws)}function Ul(e){var t=al(e.alternate,e,Gs);e.memoizedProps=e.pendingProps,null===t?Hl(e):Ws=t,Hs.current=null}function Hl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=bs(n,t,Gs)))return void(Ws=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Gs)||0==(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ws(t)))return n.flags&=2047,void(Ws=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ws=t);Ws=t=e}while(null!==t);0===Ys&&(Ys=5)}function zl(e){var t=to();return ro(99,Vl.bind(null,e,t)),null}function Vl(e,t){do{Zl()}while(null!==dl);if(0!=(48&zs))throw Error(f(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(f(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,l=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var d=e.eventTimes,h=e.expirationTimes;0<l;){var p=31-en(l),y=1<<p;a[p]=0,d[p]=-1,h[p]=-1,l&=~y}if(null!==gl&&0==(24&r)&&gl.has(e)&&gl.delete(e),e===Vs&&(Ws=Vs=null,Zs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=zs,zs|=32,Hs.current=null,Jr=an,jr(d=Or())){if("selectionStart"in d)h={start:d.selectionStart,end:d.selectionEnd};else e:if(h=(h=d.ownerDocument)&&h.defaultView||window,(y=h.getSelection&&h.getSelection())&&0!==y.rangeCount){h=y.anchorNode,l=y.anchorOffset,p=y.focusNode,y=y.focusOffset;try{h.nodeType,p.nodeType}catch(e){h=null;break e}var w=0,x=-1,_=-1,S=0,k=0,C=d,E=null;t:for(;;){for(var O;C!==h||0!==l&&3!==C.nodeType||(x=w+l),C!==p||0!==y&&3!==C.nodeType||(_=w+y),3===C.nodeType&&(w+=C.nodeValue.length),null!==(O=C.firstChild);)E=C,C=O;for(;;){if(C===d)break t;if(E===h&&++S===l&&(x=w),E===p&&++k===y&&(_=w),null!==(O=C.nextSibling))break;E=(C=E).parentNode}C=O}h=-1===x||-1===_?null:{start:x,end:_}}else h=null;h=h||{start:0,end:0}}else h=null;Qr={focusedElem:d,selectionRange:h},an=!1,_l=null,Sl=!1,sl=r;do{try{Wl()}catch(e){if(null===sl)throw Error(f(330));Jl(sl,e),sl=sl.nextEffect}}while(null!==sl);_l=null,sl=r;do{try{for(d=e;null!==sl;){var j=sl.flags;if(16&j&&je(sl.stateNode,""),128&j){var T=sl.alternate;if(null!==T){var A=T.ref;null!==A&&("function"==typeof A?A(null):A.current=null)}}switch(1038&j){case 2:Rs(sl),sl.flags&=-3;break;case 6:Rs(sl),sl.flags&=-3,Ns(sl.alternate,sl);break;case 1024:sl.flags&=-1025;break;case 1028:sl.flags&=-1025,Ns(sl.alternate,sl);break;case 4:Ns(sl.alternate,sl);break;case 8:Ls(d,h=sl);var P=h.alternate;Ps(h),null!==P&&Ps(P)}sl=sl.nextEffect}}catch(e){if(null===sl)throw Error(f(330));Jl(sl,e),sl=sl.nextEffect}}while(null!==sl);if(A=Qr,T=Or(),j=A.focusedElem,d=A.selectionRange,T!==j&&j&&j.ownerDocument&&Er(j.ownerDocument.documentElement,j)){null!==d&&jr(j)&&(T=d.start,void 0===(A=d.end)&&(A=T),"selectionStart"in j?(j.selectionStart=T,j.selectionEnd=Math.min(A,j.value.length)):(A=(T=j.ownerDocument||document)&&T.defaultView||window).getSelection&&(A=A.getSelection(),h=j.textContent.length,P=Math.min(d.start,h),d=void 0===d.end?P:Math.min(d.end,h),!A.extend&&P>d&&(h=d,d=P,P=h),h=Cr(j,P),l=Cr(j,d),h&&l&&(1!==A.rangeCount||A.anchorNode!==h.node||A.anchorOffset!==h.offset||A.focusNode!==l.node||A.focusOffset!==l.offset)&&((T=T.createRange()).setStart(h.node,h.offset),A.removeAllRanges(),P>d?(A.addRange(T),A.extend(l.node,l.offset)):(T.setEnd(l.node,l.offset),A.addRange(T))))),T=[];for(A=j;A=A.parentNode;)1===A.nodeType&&T.push({element:A,left:A.scrollLeft,top:A.scrollTop});for("function"==typeof j.focus&&j.focus(),j=0;j<T.length;j++)(A=T[j]).element.scrollLeft=A.left,A.element.scrollTop=A.top}an=!!Jr,Qr=Jr=null,e.current=n,sl=r;do{try{for(j=e;null!==sl;){var D=sl.flags;if(36&D&&$s(j,sl.alternate,sl),128&D){T=void 0;var R=sl.ref;if(null!==R){var I=sl.stateNode;sl.tag,T=I,"function"==typeof R?R(T):R.current=T}}sl=sl.nextEffect}}catch(e){if(null===sl)throw Error(f(330));Jl(sl,e),sl=sl.nextEffect}}while(null!==sl);sl=null,Ki(),zs=a}else e.current=n;if(fl)fl=!1,dl=e,hl=t;else for(sl=r;null!==sl;)t=sl.nextEffect,sl.nextEffect=null,8&sl.flags&&((D=sl).sibling=null,D.stateNode=null),sl=t;if(0===(r=e.pendingLanes)&&(ul=null),1===r?e===yl?vl++:(vl=0,yl=e):vl=0,n=n.stateNode,Ii&&"function"==typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(Ri,n,void 0,64==(64&n.current.flags))}catch(e){}if(jl(e,eo()),ll)throw ll=!1,e=cl,cl=null,e;return 0!=(8&zs)||oo(),null}function Wl(){for(;null!==sl;){var e=sl.alternate;Sl||null===_l||(0!=(8&sl.flags)?ut(sl,_l)&&(Sl=!0):13===sl.tag&&qs(e,sl)&&ut(sl,_l)&&(Sl=!0));var t=sl.flags;0!=(256&t)&&js(e,sl),0==(512&t)||fl||(fl=!0,io(97,(function(){return Zl(),null}))),sl=sl.nextEffect}}function Zl(){if(90!==hl){var e=97<hl?97:hl;return hl=90,ro(e,Yl)}return!1}function Gl(e,t){pl.push(t,e),fl||(fl=!0,io(97,(function(){return Zl(),null})))}function Kl(e,t){ml.push(t,e),fl||(fl=!0,io(97,(function(){return Zl(),null})))}function Yl(){if(null===dl)return!1;var e=dl;if(dl=null,0!=(48&zs))throw Error(f(331));var t=zs;zs|=32;var n=ml;ml=[];for(var r=0;r<n.length;r+=2){var a=n[r],l=n[r+1],d=a.destroy;if(a.destroy=void 0,"function"==typeof d)try{d()}catch(e){if(null===l)throw Error(f(330));Jl(l,e)}}for(n=pl,pl=[],r=0;r<n.length;r+=2){a=n[r],l=n[r+1];try{var h=a.create;a.destroy=h()}catch(e){if(null===l)throw Error(f(330));Jl(l,e)}}for(h=e.current.firstEffect;null!==h;)e=h.nextEffect,h.nextEffect=null,8&h.flags&&(h.sibling=null,h.stateNode=null),h=e;return zs=t,oo(),!0}function Xl(e,t,n){So(e,t=ks(0,t=xs(n,t),1)),t=kl(),null!==(e=Ol(e,1))&&(Qt(e,1,t),jl(e,t))}function Jl(e,t){if(3===e.tag)Xl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Xl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ul||!ul.has(r))){var a=Cs(n,e=xs(t,e),1);if(So(n,a),a=kl(),null!==(n=Ol(n,1)))Qt(n,1,a),jl(n,a);else if("function"==typeof r.componentDidCatch&&(null===ul||!ul.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ql(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=kl(),e.pingedLanes|=e.suspendedLanes&n,Vs===e&&(Zs&n)===n&&(4===Ys||3===Ys&&(62914560&Zs)===Zs&&500>eo()-rl?Ml(e,0):tl|=n),jl(e,t)}function ec(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===to()?1:2:(0===wl&&(wl=Js),0===(t=Xt(62914560&~wl))&&(t=4194304))),n=kl(),null!==(e=Ol(e,t))&&(Qt(e,t,n),jl(e,n))}function tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nc(e,t,n,r){return new tc(e,t,n,r)}function rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ic(e,t){var n=e.alternate;return null===n?((n=nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function oc(e,t,n,r,a,l){var d=2;if(r=e,"function"==typeof e)rc(e)&&(d=1);else if("string"==typeof e)d=5;else e:switch(e){case R:return ac(n.children,a,l,t);case W:d=8,a|=16;break;case I:d=8,a|=1;break;case M:return(e=nc(12,n,t,8|a)).elementType=M,e.type=M,e.lanes=l,e;case q:return(e=nc(13,n,t,a)).type=q,e.elementType=q,e.lanes=l,e;case B:return(e=nc(19,n,t,a)).elementType=B,e.lanes=l,e;case Z:return sc(n,a,l,t);case G:return(e=nc(24,n,t,a)).elementType=G,e.lanes=l,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case L:d=10;break e;case N:d=9;break e;case F:d=11;break e;case U:d=14;break e;case H:d=16,r=null;break e;case z:d=22;break e}throw Error(f(130,null==e?e:typeof e,""))}return(t=nc(d,n,t,a)).elementType=e,t.type=r,t.lanes=l,t}function ac(e,t,n,r){return(e=nc(7,e,r,t)).lanes=n,e}function sc(e,t,n,r){return(e=nc(23,e,r,t)).elementType=Z,e.lanes=n,e}function lc(e,t,n){return(e=nc(6,e,null,t)).lanes=n,e}function cc(e,t,n){return(t=nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function uc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Jt(0),this.expirationTimes=Jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jt(0),this.mutableSourceEagerHydrationData=null}function fc(e,t,n,r){var a=t.current,l=kl(),d=Cl(a);e:if(n){t:{if(at(n=n._reactInternals)!==n||1!==n.tag)throw Error(f(170));var h=n;do{switch(h.tag){case 3:h=h.stateNode.context;break t;case 1:if(ji(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break t}}h=h.return}while(null!==h);throw Error(f(171))}if(1===n.tag){var p=n.type;if(ji(p)){n=Ai(n,p,h);break e}}n=h}else n=Si;return null===t.context?t.context=n:t.pendingContext=n,(t=_o(l,d)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),So(a,t),El(a,d,l),d}function dc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function pc(e,t){hc(e,t),(e=e.alternate)&&hc(e,t)}function mc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new uc(e,t,null!=n&&!0===n.hydrate),t=nc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,wo(t),e[fi]=n.current,Hr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function vc(e,t,n,r,a){var l=n._reactRootContainer;if(l){var f=l._internalRoot;if("function"==typeof a){var d=a;a=function(){var e=dc(f);d.call(e)}}fc(t,f,e,a)}else{if(l=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new mc(e,0,t?{hydrate:!0}:void 0)}(n,r),f=l._internalRoot,"function"==typeof a){var h=a;a=function(){var e=dc(f);h.call(e)}}Dl((function(){fc(t,f,e,a)}))}return dc(f)}function yc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!gc(t))throw Error(f(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:D,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}al=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)Ga=!0;else{if(0==(n&r)){switch(Ga=!1,t.tag){case 3:is(t),oa();break;case 5:Zo(t);break;case 1:ji(t.type)&&Pi(t);break;case 4:Vo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;_i(co,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?us(e,t,n):(_i(Ko,1&Ko.current),null!==(t=vs(e,t,n))?t.sibling:null);_i(Ko,1&Ko.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return gs(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),_i(Ko,Ko.current),r)break;return null;case 23:case 24:return t.lanes=0,Qa(e,t,n)}return vs(e,t,n)}Ga=0!=(16384&e.flags)}else Ga=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=Oi(t,ki.current),vo(t,n),a=ya(null,t,r,e,a,n),t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(r)){var l=!0;Pi(t)}else l=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,wo(t);var d=r.getDerivedStateFromProps;"function"==typeof d&&jo(t,r,d,e),a.updater=$o,t.stateNode=a,a._reactInternals=t,Do(t,r,e,n),t=rs(null,t,r,!0,l,n)}else t.tag=0,Ka(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(l=a._init)(a._payload),t.type=a,l=t.tag=function(e){if("function"==typeof e)return rc(e)?1:0;if(null!=e){if((e=e.$$typeof)===F)return 11;if(e===U)return 14}return 2}(a),e=lo(a,e),l){case 0:t=ts(null,t,a,e,n);break e;case 1:t=ns(null,t,a,e,n);break e;case 11:t=Ya(null,t,a,e,n);break e;case 14:t=Xa(null,t,a,lo(a.type,e),r,n);break e}throw Error(f(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,ts(e,t,r,a=t.elementType===r?a:lo(r,a),n);case 1:return r=t.type,a=t.pendingProps,ns(e,t,r,a=t.elementType===r?a:lo(r,a),n);case 3:if(is(t),r=t.updateQueue,null===e||null===r)throw Error(f(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,xo(e,t),Co(t,r,null,n),(r=t.memoizedState.element)===a)oa(),t=vs(e,t,n);else{if((l=(a=t.stateNode).hydrate)&&(Jo=oi(t.stateNode.containerInfo.firstChild),Xo=t,l=Qo=!0),l){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(l=e[a])._workInProgressVersionPrimary=e[a+1],aa.push(l);for(n=Fo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ka(e,t,r,n),oa();t=t.child}return t;case 5:return Zo(t),null===e&&na(t),r=t.type,a=t.pendingProps,l=null!==e?e.memoizedProps:null,d=a.children,ti(r,a)?d=null:null!==l&&ti(r,l)&&(t.flags|=16),es(e,t),Ka(e,t,d,n),t.child;case 6:return null===e&&na(t),null;case 13:return us(e,t,n);case 4:return Vo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=No(t,null,r,n):Ka(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Ya(e,t,r,a=t.elementType===r?a:lo(r,a),n);case 7:return Ka(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ka(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,d=t.memoizedProps,l=a.value;var h=t.type._context;if(_i(co,h._currentValue),h._currentValue=l,null!==d)if(h=d.value,0===(l=xr(h,l)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(h,l):1073741823))){if(d.children===a.children&&!Ci.current){t=vs(e,t,n);break e}}else for(null!==(h=t.child)&&(h.return=t);null!==h;){var p=h.dependencies;if(null!==p){d=h.child;for(var y=p.firstContext;null!==y;){if(y.context===r&&0!=(y.observedBits&l)){1===h.tag&&((y=_o(-1,n&-n)).tag=2,So(h,y)),h.lanes|=n,null!==(y=h.alternate)&&(y.lanes|=n),go(h.return,n),p.lanes|=n;break}y=y.next}}else d=10===h.tag&&h.type===t.type?null:h.child;if(null!==d)d.return=h;else for(d=h;null!==d;){if(d===t){d=null;break}if(null!==(h=d.sibling)){h.return=d.return,d=h;break}d=d.return}h=d}Ka(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(l=t.pendingProps).children,vo(t,n),r=r(a=yo(a,l.unstable_observedBits)),t.flags|=1,Ka(e,t,r,n),t.child;case 14:return l=lo(a=t.type,t.pendingProps),Xa(e,t,a,l=lo(a.type,l),r,n);case 15:return Ja(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:lo(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ji(r)?(e=!0,Pi(t)):e=!1,vo(t,n),Ao(t,r,a),Do(t,r,a,n),rs(null,t,r,!0,e,n);case 19:return gs(e,t,n);case 23:case 24:return Qa(e,t,n)}throw Error(f(156,t.tag))},mc.prototype.render=function(e){fc(e,this._internalRoot,null,null)},mc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;fc(null,e,null,(function(){t[fi]=null}))},ft=function(e){13===e.tag&&(El(e,4,kl()),pc(e,4))},dt=function(e){13===e.tag&&(El(e,67108864,kl()),pc(e,67108864))},ht=function(e){if(13===e.tag){var t=kl(),n=Cl(e);El(e,n,t),pc(e,n)}},pt=function(e,t){return t()},Le=function(e,t,n){switch(t){case"input":if(he(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=gi(r);if(!a)throw Error(f(90));le(r),he(r,a)}}}break;case"textarea":we(e,n);break;case"select":null!=(t=n.value)&&ve(e,!!n.multiple,t,!1)}},He=Pl,ze=function(e,t,n,r,a){var l=zs;zs|=4;try{return ro(98,e.bind(null,t,n,r,a))}finally{0===(zs=l)&&(ol(),oo())}},Ve=function(){0==(49&zs)&&(function(){if(null!==gl){var e=gl;gl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,jl(e,eo())}))}oo()}(),Zl())},We=function(e,t){var n=zs;zs|=2;try{return e(t)}finally{0===(zs=n)&&(ol(),oo())}};var bc={Events:[pi,mi,gi,Be,Ue,Zl,{current:!1}]},wc={findFiberByHostInstance:hi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xc={bundleType:wc.bundleType,version:wc.version,rendererPackageName:wc.rendererPackageName,rendererConfig:wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ct(e))?null:e.stateNode},findFiberByHostInstance:wc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{Ri=Sc.inject(xc),Ii=Sc}catch(Ee){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bc,t.createPortal=yc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(f(188));throw Error(f(268,Object.keys(e)))}return e=null===(e=ct(t))?null:e.stateNode},t.flushSync=function(e,t){var n=zs;if(0!=(48&n))return e(t);zs|=1;try{if(e)return ro(99,e.bind(null,t))}finally{zs=n,oo()}},t.hydrate=function(e,t,n){if(!gc(t))throw Error(f(200));return vc(null,e,t,!0,n)},t.render=function(e,t,n){if(!gc(t))throw Error(f(200));return vc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!gc(e))throw Error(f(40));return!!e._reactRootContainer&&(Dl((function(){vc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=Pl,t.unstable_createPortal=function(e,t){return yc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!gc(n))throw Error(f(200));if(null==e||void 0===e._reactInternals)throw Error(f(38));return vc(e,t,n,!1,r)},t.version="17.0.2"},28316:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(52967)},80589:function(e,t,n){!function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var l=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,n){return!Object.is(e,t[n])}))},f={error:null,info:null},d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state=f,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.setState(f)},t}a(t,e),t.getDerivedStateFromError=function getDerivedStateFromError(e){return{error:e}};var n=t.prototype;return n.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,null==t?void 0:t.componentStack),this.setState({info:t})},n.componentDidUpdate=function(e){var t,n,r=this.state,a=r.error,d=r.info,h=this.props.resetKeys;null!==a&&null!==d&&l(e.resetKeys,h)&&(null==(t=(n=this.props).onResetKeysChange)||t.call(n,e.resetKeys,h),this.setState(f))},n.render=function(){var e=this.state,t=e.error,n=e.info,a=this.props,l=a.fallbackRender,f=a.FallbackComponent,d=a.fallback;if(null!==t){if(!n)return null;var h={componentStack:null==n?void 0:n.componentStack,error:t,resetErrorBoundary:this.resetErrorBoundary};if(r.default.isValidElement(d))return d;if("function"==typeof l)return l(h);if(f)return r.default.createElement(f,h);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(r.default.Component);function h(e,t){function n(n){return r.default.createElement(d,t,r.default.createElement(e,n))}var a=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+a+")",n}function p(e){var t=r.default.useState(null),n=t[0],a=t[1];if(e)throw e;if(n)throw n;return a}e.ErrorBoundary=d,e.useErrorHandler=p,e.withErrorBoundary=h,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2784))},86814:function(e,t,n){"use strict";n.d(t,{c:function(){return j}});var r=n(59740),a=n(86522),l=n(56666),f=n(2784),d=n(21725),h=n(71648),p=n(63910),y=["format"],w=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t){if(!e)return!1;var n=e.props?e.props.children:e.children;return t?n.length>0:!!n}function k(e){return e?e.props?e.props.children:e.children:[]}function C(e){return Array.isArray(e)?e:[e]}function E(e,t){if(!e)return"";var n="",l=C(e),d=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return l.forEach((function(e,l){if("string"==typeof e)n+="".concat(e);else if((0,f.isValidElement)(e)){var h=Object.keys(e.props).length,w=d.indexOf(e.type)>-1,x=e.props.children;if(!x&&w&&0===h)n+="<".concat(e.type,"/>");else if(x||w&&0===h)if(e.props.i18nIsDynamicList)n+="<".concat(l,"></").concat(l,">");else if(w&&1===h&&"string"==typeof x)n+="<".concat(e.type,">").concat(x,"</").concat(e.type,">");else{var _=E(x,t);n+="<".concat(l,">").concat(_,"</").concat(l,">")}else n+="<".concat(l,"></").concat(l,">")}else if(null===e)(0,p.ZK)("Trans: the passed in value is invalid - seems you passed in a null child.");else if("object"===(0,a.Z)(e)){var S=e.format,k=(0,r.Z)(e,y),C=Object.keys(k);if(1===C.length){var O=S?"".concat(C[0],", ").concat(S):C[0];n+="{{".concat(O,"}}")}else(0,p.ZK)("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else(0,p.ZK)("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)})),n}function O(e,t,n,r,l,h){if(""===t)return[];var p=r.transKeepBasicHtmlNodesFor||[],y=t&&new RegExp(p.join("|")).test(t);if(!e&&!y)return[t];var w={};!function e(t){C(t).forEach((function(t){"string"!=typeof t&&(S(t)?e(k(t)):"object"!==(0,a.Z)(t)||(0,f.isValidElement)(t)||Object.assign(w,t))}))}(e);var x=d.Z.parse("<0>".concat(t,"</0>")),E=_(_({},w),l);function O(e,t,n){var r=k(e),a=T(r,t.children,n);return function(e){return"[object Array]"===Object.prototype.toString.call(e)&&e.every((function(e){return(0,f.isValidElement)(e)}))}(r)&&0===a.length?r:a}function j(e,t,n,r,a){e.dummy&&(e.children=t),n.push((0,f.cloneElement)(e,_(_({},e.props),{},{key:r}),a?void 0:t))}function T(t,l,d){var w=C(t);return C(l).reduce((function(t,l,x){var k,C,A,P=l.children&&l.children[0]&&l.children[0].content&&n.services.interpolator.interpolate(l.children[0].content,E,n.language);if("tag"===l.type){var D=w[parseInt(l.name,10)];!D&&1===d.length&&d[0][l.name]&&(D=d[0][l.name]),D||(D={});var R=0!==Object.keys(l.attrs).length?(k={props:l.attrs},(A=_({},C=D)).props=Object.assign(k.props,C.props),A):D,I=(0,f.isValidElement)(R),M=I&&S(l,!0)&&!l.voidElement,L=y&&"object"===(0,a.Z)(R)&&R.dummy&&!I,N="object"===(0,a.Z)(e)&&null!==e&&Object.hasOwnProperty.call(e,l.name);if("string"==typeof R){var F=n.services.interpolator.interpolate(R,E,n.language);t.push(F)}else if(S(R)||M){j(R,O(R,l,d),t,x)}else if(L){var q=T(w,l.children,d);t.push((0,f.cloneElement)(R,_(_({},R.props),{},{key:x}),q))}else if(Number.isNaN(parseFloat(l.name))){if(N)j(R,O(R,l,d),t,x,l.voidElement);else if(r.transSupportBasicHtmlNodes&&p.indexOf(l.name)>-1)if(l.voidElement)t.push((0,f.createElement)(l.name,{key:"".concat(l.name,"-").concat(x)}));else{var B=T(w,l.children,d);t.push((0,f.createElement)(l.name,{key:"".concat(l.name,"-").concat(x)},B))}else if(l.voidElement)t.push("<".concat(l.name," />"));else{var U=T(w,l.children,d);t.push("<".concat(l.name,">").concat(U,"</").concat(l.name,">"))}}else if("object"!==(0,a.Z)(R)||I)1===l.children.length&&P?t.push((0,f.cloneElement)(R,_(_({},R.props),{},{key:x}),P)):t.push((0,f.cloneElement)(R,_(_({},R.props),{},{key:x})));else{var H=l.children[0]?P:null;H&&t.push(H)}}else if("text"===l.type){var z=r.transWrapTextNodes,V=h?r.unescape(n.services.interpolator.interpolate(l.content,E,n.language)):n.services.interpolator.interpolate(l.content,E,n.language);z?t.push((0,f.createElement)(z,{key:"".concat(l.name,"-").concat(x)},V)):t.push(V)}return t}),[])}return k(T([{dummy:!0,children:e||[]}],x,C(e||[]))[0])}function j(e){var t=e.children,n=e.count,a=e.parent,l=e.i18nKey,d=e.context,y=e.tOptions,x=void 0===y?{}:y,S=e.values,k=e.defaults,C=e.components,j=e.ns,T=e.i18n,A=e.t,P=e.shouldUnescape,D=(0,r.Z)(e,w),R=(0,f.useContext)(h.OO)||{},I=R.i18n,M=R.defaultNS,L=T||I||(0,h.nI)();if(!L)return(0,p.O4)("You will need to pass in an i18next instance by using i18nextReactModule"),t;var N=A||L.t.bind(L)||function(e){return e};d&&(x.context=d);var F=_(_({},(0,h.JP)()),L.options&&L.options.react),q=j||N.ns||M||L.options&&L.options.defaultNS;q="string"==typeof q?[q]:q||["translation"];var B=k||E(t,F)||F.transEmptyNodeValue||l,U=F.hashTransKey,H=l||(U?U(B):B),z=S?x.interpolation:{interpolation:_(_({},x.interpolation),{},{prefix:"#$?",suffix:"?$#"})},V=_(_(_(_({},x),{},{count:n},S),z),{},{defaultValue:B,ns:q}),W=O(C||t,H?N(H,V):B,L,F,V,P),Z=void 0!==a?a:F.defaultTransParent;return Z?(0,f.createElement)(Z,D,W):W}},71648:function(e,t,n){"use strict";n.d(t,{Db:function(){return k},JP:function(){return x},OO:function(){return w},nI:function(){return S},zv:function(){return _}});var r=n(9249),a=n(87371),l=n(56666),f=n(2784);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p,y={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:n(88622).A},w=(0,f.createContext)();function x(){return y}var _=function(){function e(){(0,r.Z)(this,e),this.usedNamespaces={}}return(0,a.Z)(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function S(){return p}var k={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y=h(h({},y),e)}(e.options.react),function(e){p=e}(e)}}},88622:function(e,t,n){"use strict";n.d(t,{A:function(){return f}});var r=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,a={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},l=function(e){return a[e]},f=function(e){return e.replace(r,l)}},76699:function(e,t,n){"use strict";n.d(t,{$:function(){return w}});var r=n(36073),a=n(56666),l=n(2784),f=n(71648),d=n(63910);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e,t){var n=(0,l.useRef)();return(0,l.useEffect)((function(){n.current=t?n.current:e}),[e,t]),n.current};function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.i18n,a=(0,l.useContext)(f.OO)||{},h=a.i18n,w=a.defaultNS,x=n||h||(0,f.nI)();if(x&&!x.reportNamespaces&&(x.reportNamespaces=new f.zv),!x){(0,d.O4)("You will need to pass in an i18next instance by using initReactI18next");var _=function(e){return Array.isArray(e)?e[e.length-1]:e},S=[_,{},!1];return S.t=_,S.i18n={},S.ready=!1,S}x.options.react&&void 0!==x.options.react.wait&&(0,d.O4)("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var k=p(p(p({},(0,f.JP)()),x.options.react),t),C=k.useSuspense,E=k.keyPrefix,O=e||w||x.options&&x.options.defaultNS;O="string"==typeof O?[O]:O||["translation"],x.reportNamespaces.addUsedNamespaces&&x.reportNamespaces.addUsedNamespaces(O);var j=(x.isInitialized||x.initializedStoreOnce)&&O.every((function(e){return(0,d.F0)(e,x,k)}));function T(){return x.getFixedT(null,"fallback"===k.nsMode?O:O[0],E)}var A=(0,l.useState)(T),P=(0,r.Z)(A,2),D=P[0],R=P[1],I=O.join(),M=y(I),L=(0,l.useRef)(!0);(0,l.useEffect)((function(){var e=k.bindI18n,t=k.bindI18nStore;function n(){L.current&&R(T)}return L.current=!0,j||C||(0,d.DC)(x,O,(function(){L.current&&R(T)})),j&&M&&M!==I&&L.current&&R(T),e&&x&&x.on(e,n),t&&x&&x.store.on(t,n),function(){L.current=!1,e&&x&&e.split(" ").forEach((function(e){return x.off(e,n)})),t&&x&&t.split(" ").forEach((function(e){return x.store.off(e,n)}))}}),[x,I]);var N=(0,l.useRef)(!0);(0,l.useEffect)((function(){L.current&&!N.current&&R(T),N.current=!1}),[x,E]);var F=[D,x,j];if(F.t=D,F.i18n=x,F.ready=j,j)return F;if(!j&&!C)return F;throw new Promise((function(e){(0,d.DC)(x,O,(function(){e()}))}))}},63910:function(e,t,n){"use strict";function r(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}n.d(t,{DC:function(){return f},F0:function(){return d},O4:function(){return l},ZK:function(){return r}});var a={};function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&a[t[0]]||("string"==typeof t[0]&&(a[t[0]]=new Date),r.apply(void 0,t))}function f(e,t,n){e.loadNamespaces(t,(function(){if(e.isInitialized)n();else{e.on("initialized",(function t(){setTimeout((function(){e.off("initialized",t)}),0),n()}))}}))}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{precheck:function(t,r){if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.languages[0],a=!!t.options&&t.options.fallbackLng,l=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var f=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!f(t.isLanguageChangingTo,e)||!t.hasResourceBundle(r,e)&&t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages)&&(!f(r,e)||a&&!f(l,e)))}(e,t,n):(l("i18n.languages were undefined or empty",t.languages),!0)}},66866:function(e,t){"use strict";var n=60103,r=60106,a=60107,l=60108,f=60114,d=60109,h=60110,p=60112,y=60113,w=60120,x=60115,_=60116,S=60121,k=60122,C=60117,E=60129,O=60131;if("function"==typeof Symbol&&Symbol.for){var j=Symbol.for;n=j("react.element"),r=j("react.portal"),a=j("react.fragment"),l=j("react.strict_mode"),f=j("react.profiler"),d=j("react.provider"),h=j("react.context"),p=j("react.forward_ref"),y=j("react.suspense"),w=j("react.suspense_list"),x=j("react.memo"),_=j("react.lazy"),S=j("react.block"),k=j("react.server.block"),C=j("react.fundamental"),E=j("react.debug_trace_mode"),O=j("react.legacy_hidden")}function T(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case f:case l:case y:case w:return e;default:switch(e=e&&e.$$typeof){case h:case p:case _:case x:case d:return e;default:return t}}case r:return t}}}},48570:function(e,t,n){"use strict";n(66866)},46847:function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function a(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function l(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function f(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,f=null,d=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?f="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(f="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?d="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(d="UNSAFE_componentWillUpdate"),null!==n||null!==f||null!==d){var h=e.displayName||e.name,p="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+h+" uses "+p+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==f?"\n  "+f:"")+(null!==d?"\n  "+d:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=l;var y=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;y.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:function(){return f}}),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,l.__suppressDeprecationWarning=!0},53372:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2784)),l=p(n(45349)),f=p(n(79894)),d=p(n(66106)),h=p(n(97864));function p(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"parseString",value:function(e){var t=this;if(""===e)return e;var n=this.props.matchDecorator(e);if(!n)return e;var r=[],a=0;return n.forEach((function(n,l){n.index>a&&r.push(e.substring(a,n.index));var f=t.props.hrefDecorator(n.url),d=t.props.textDecorator(n.text),h=t.props.componentDecorator(f,d,l);r.push(h),a=n.lastIndex})),e.length>a&&r.push(e.substring(a)),1===r.length?r[0]:r}},{key:"parse",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"==typeof e?this.parseString(e):a.isValidElement(e)&&"a"!==e.type&&"button"!==e.type?a.cloneElement(e,{key:n},this.parse(e.props.children)):Array.isArray(e)?e.map((function(e,n){return t.parse(e,n)})):e}},{key:"render",value:function(){return a.createElement(a.Fragment,null,this.parse(this.props.children))}}]),t}(a.Component);y.defaultProps={componentDecorator:l.default,hrefDecorator:f.default,matchDecorator:d.default,textDecorator:h.default},t.default=y},45349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2784));t.default=function(e,t,n){return r.createElement("a",{href:e,key:n},t)}},79894:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},66106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(72025)),a=l(n(90784));function l(e){return e&&e.__esModule?e:{default:e}}var f=new r.default;f.tlds(a.default),t.default=function(e){return f.match(e)}},97864:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},3546:function(e,t,n){"use strict";var r,a=n(53372),l=(r=a)&&r.__esModule?r:{default:r};t.Z=l.default},72025:function(e,t,n){"use strict";function r(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function a(e){return Object.prototype.toString.call(e)}function l(e){return"[object Function]"===a(e)}function f(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var d={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var h={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},p="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",y="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function w(e){var t=e.re=n(44285)(e.__opts__),r=e.__tlds__.slice();function d(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push(p),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(d(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(d(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(d(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(d(t.tpl_host_fuzzy_test),"i");var h=[];function schemaError(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===a(n))return!function(e){return"[object RegExp]"===a(e)}(n.validate)?l(n.validate)?r.validate=n.validate:schemaError(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(l(n.normalize)?r.normalize=n.normalize:n.normalize?schemaError(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===a(e)}(n)?schemaError(t,n):h.push(t)}})),h.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var y=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(f).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+y+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+y+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function x(e,t){var n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function _(e,t){var n=new x(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function S(e,t){if(!(this instanceof S))return new S(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||d.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=r({},d,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},h,e),this.__compiled__={},this.__tlds__=y,this.__tlds_replaced__=!1,this.re={},w(this)}S.prototype.add=function(e,t){return this.__schemas__[e]=t,w(this),this},S.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},S.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,a,l,f,d,h;if(this.re.schema_test.test(e))for((d=this.re.schema_search).lastIndex=0;null!==(t=d.exec(e));)if(a=this.testSchemaAt(e,t[2],d.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(h=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||h<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(l=n.index+n[1].length,(this.__index__<0||l<this.__index__)&&(this.__schema__="",this.__index__=l,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(l=r.index+r[1].length,f=r.index+r[0].length,(this.__index__<0||l<this.__index__||l===this.__index__&&f>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=l,this.__last_index__=f)),this.__index__>=0},S.prototype.pretest=function(e){return this.re.pretest.test(e)},S.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},S.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(_(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(_(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},S.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),w(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,w(this),this)},S.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},S.prototype.onCompile=function(){},e.exports=S},44285:function(e,t,n){"use strict";e.exports=function(e){var t={};t.src_Any=n(83530).source,t.src_Cc=n(46889).source,t.src_Z=n(18442).source,t.src_P=n(7062).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var r="[><｜]";return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+r+"|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},52169:function(e,t,n){"use strict";t.__esModule=!0;var r=p(n(13980)),a=p(n(25539)),l=p(n(2784)),f=p(n(28316)),d=p(n(31957)),h=p(n(19));function p(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,p=Array(a),w=0;w<a;w++)p[w]=arguments[w];return n=r=y(this,e.call.apply(e,[this].concat(p))),r._mountOverlayTarget=function(){r._overlayTarget||(r._overlayTarget=document.createElement("div"),r._portalContainerNode=(0,d.default)(r.props.container,(0,h.default)(r).body),r._portalContainerNode.appendChild(r._overlayTarget))},r._unmountOverlayTarget=function(){r._overlayTarget&&(r._portalContainerNode.removeChild(r._overlayTarget),r._overlayTarget=null),r._portalContainerNode=null},r._renderOverlay=function(){var e=r.props.children?l.default.Children.only(r.props.children):null;if(null!==e){r._mountOverlayTarget();var t=!r._overlayInstance;r._overlayInstance=f.default.unstable_renderSubtreeIntoContainer(r,e,r._overlayTarget,(function(){t&&r.props.onRendered&&r.props.onRendered()}))}else r._unrenderOverlay(),r._unmountOverlayTarget()},r._unrenderOverlay=function(){r._overlayTarget&&(f.default.unmountComponentAtNode(r._overlayTarget),r._overlayInstance=null)},r.getMountNode=function(){return r._overlayTarget},y(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,d.default)(e.container,(0,h.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(l.default.Component);w.displayName="Portal",w.propTypes={container:r.default.oneOfType([a.default,r.default.func]),onRendered:r.default.func},t.default=w,e.exports=t.default},18650:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=P(n(47718)),l=P(n(71009)),f=P(n(96892)),d=P(n(13980)),h=P(n(25539)),p=P(n(81083)),y=P(n(51904)),w=n(2784),x=P(w),_=P(n(28316)),S=P(n(92564)),k=P(n(59501)),C=P(n(57316)),E=P(n(93641)),O=P(n(12415)),j=P(n(64486)),T=P(n(31957)),A=P(n(19));function P(e){return e&&e.__esModule?e:{default:e}}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var R=new k.default,I=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=Array(a),f=0;f<a;f++)l[f]=arguments[f];return n=r=D(this,e.call.apply(e,[this].concat(l))),M.call(r),D(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.omitProps=function(e,t){var n=Object.keys(e),r={};return n.map((function(n){Object.prototype.hasOwnProperty.call(t,n)||(r[n]=e[n])})),r},t.prototype.render=function(){var e=this.props,n=e.show,a=e.container,l=e.children,f=e.transition,d=e.backdrop,h=e.className,p=e.style,y=e.onExit,_=e.onExiting,S=e.onEnter,k=e.onEntering,O=e.onEntered,j=x.default.Children.only(l),T=this.omitProps(this.props,t.propTypes);if(!(n||f&&!this.state.exited))return null;var A=j.props,P=A.role,D=A.tabIndex;return void 0!==P&&void 0!==D||(j=(0,w.cloneElement)(j,{role:void 0===P?"document":P,tabIndex:null==D?"-1":D})),f&&(j=x.default.createElement(f,{appear:!0,unmountOnExit:!0,in:n,onExit:y,onExiting:_,onExited:this.handleHidden,onEnter:S,onEntering:k,onEntered:O},j)),x.default.createElement(C.default,{ref:this.setMountNode,container:a,onRendered:this.onPortalRendered},x.default.createElement("div",r({ref:this.setModalNodeRef,role:P||"dialog"},T,{style:p,className:h}),d&&this.renderBackdrop(),x.default.createElement(E.default,{ref:this.setDialogRef},j)))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(e){!this.props.show&&e.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.show,n=e.transition;this._isMounted=!1,(t||n&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var e=this.getDialogElement(),t=(0,a.default)((0,A.default)(this));e&&!(0,l.default)(e,t)&&(this.lastFocus=t,e.hasAttribute("tabIndex")||((0,S.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".'),e.setAttribute("tabIndex",-1)),e.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return _.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(x.default.Component);I.propTypes=r({},C.default.propTypes,{show:d.default.bool,container:d.default.oneOfType([h.default,d.default.func]),onShow:d.default.func,onHide:d.default.func,backdrop:d.default.oneOfType([d.default.bool,d.default.oneOf(["static"])]),renderBackdrop:d.default.func,onEscapeKeyDown:d.default.func,onEscapeKeyUp:(0,p.default)(d.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:d.default.func,backdropStyle:d.default.object,backdropClassName:d.default.string,containerClassName:d.default.string,keyboard:d.default.bool,transition:y.default,backdropTransition:y.default,autoFocus:d.default.bool,enforceFocus:d.default.bool,restoreFocus:d.default.bool,onEnter:d.default.func,onEntering:d.default.func,onEntered:d.default.func,onExit:d.default.func,onExiting:d.default.func,onExited:d.default.func,manager:d.default.object.isRequired}),I.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:R,renderBackdrop:function(e){return x.default.createElement("div",e)}};var M=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,r=t.backdropClassName,a=t.renderBackdrop,l=t.backdropTransition,f=a({ref:function(t){return e.backdrop=t},style:n,className:r,onClick:e.handleBackdropClick});return l&&(f=x.default.createElement(l,{appear:!0,in:e.props.show},f)),f},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,A.default)(e),n=(0,T.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,O.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,O.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,j.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t?t.getMountNode():t},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){var t;(e.setState({exited:!0}),e.onHide(),e.props.onExited)&&(t=e.props).onExited.apply(t,arguments)},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),!0===e.props.backdrop&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){f.default&&(e.lastFocus=(0,a.default)())},this.enforceFocus=function(){if(e.props.enforceFocus&&e._isMounted&&e.isTopModal()){var t=e.getDialogElement(),n=(0,a.default)((0,A.default)(e));t&&!(0,l.default)(t,n)&&t.focus()}}};I.Manager=k.default,t.default=I,e.exports=t.default},59501:function(e,t,n){"use strict";t.__esModule=!0;var r=h(n(33589)),a=h(n(49182)),l=h(n(58616)),f=h(n(83164)),d=n(26545);function h(e){return e&&e.__esModule?e:{default:e}}t.default=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=n.hideSiblingNodes,p=void 0===h||h,y=n.handleContainerOverflow,w=void 0===y||y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.add=function(e,n,h){var p=t.modals.indexOf(e),y=t.containers.indexOf(n);if(-1!==p)return p;if(p=t.modals.length,t.modals.push(e),t.hideSiblingNodes&&(0,d.hideSiblings)(n,e.modalNode),-1!==y)return t.data[y].modals.push(e),p;var w={modals:[e],classes:h?h.split(/\s+/):[],overflowing:(0,f.default)(n)};return t.handleContainerOverflow&&function(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,a.default)(t,"paddingRight")||0,10)+(0,l.default)()+"px"),(0,a.default)(t,n)}(w,n),w.classes.forEach(r.default.addClass.bind(null,n)),t.containers.push(n),t.data.push(w),p},this.remove=function(e){var n=t.modals.indexOf(e);if(-1!==n){var a=function(e,t){return n=function(e){return-1!==e.modals.indexOf(t)},r=-1,e.some((function(e,t){if(n(e,t))return r=t,!0})),r;var n,r}(t.data,e),l=t.data[a],f=t.containers[a];l.modals.splice(l.modals.indexOf(e),1),t.modals.splice(n,1),0===l.modals.length?(l.classes.forEach(r.default.removeClass.bind(null,f)),t.handleContainerOverflow&&function(e,t){var n=e.style;Object.keys(n).forEach((function(e){return t.style[e]=n[e]}))}(l,f),t.hideSiblingNodes&&(0,d.showSiblings)(f,e.modalNode),t.containers.splice(a,1),t.data.splice(a,1)):t.hideSiblingNodes&&(0,d.ariaHidden)(!1,l.modals[l.modals.length-1].modalNode)}},this.isTopModal=function(e){return!!t.modals.length&&t.modals[t.modals.length-1]===e},this.hideSiblingNodes=p,this.handleContainerOverflow=w,this.modals=[],this.containers=[],this.data=[]},e.exports=t.default},92280:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=y(n(13980)),l=y(n(51904)),f=y(n(2784)),d=y(n(57316)),h=y(n(17284)),p=y(n(13667));function y(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a.handleHidden=function(){var e;(a.setState({exited:!0}),a.props.onExited)&&(e=a.props).onExited.apply(e,arguments)},a.state={exited:!n.show},a.onHiddenListener=a.handleHidden.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.render=function(){var e=this.props,t=e.container,n=e.containerPadding,r=e.target,a=e.placement,l=e.shouldUpdatePosition,y=e.rootClose,w=e.children,x=e.transition,_=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(_.show||x&&!this.state.exited))return null;var S=w;if(S=f.default.createElement(h.default,{container:t,containerPadding:n,target:r,placement:a,shouldUpdatePosition:l},S),x){var k=_.onExit,C=_.onExiting,E=_.onEnter,O=_.onEntering,j=_.onEntered;S=f.default.createElement(x,{in:_.show,appear:!0,onExit:k,onExiting:C,onExited:this.onHiddenListener,onEnter:E,onEntering:O,onEntered:j},S)}return y&&(S=f.default.createElement(p.default,{onRootClose:_.onHide,event:_.rootCloseEvent},S)),f.default.createElement(d.default,{container:t},S)},t}(f.default.Component);w.propTypes=r({},d.default.propTypes,h.default.propTypes,{show:a.default.bool,rootClose:a.default.bool,rootCloseEvent:p.default.propTypes.event,onHide:function(e){var t=a.default.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];return t.apply(void 0,[e].concat(r))},transition:l.default,onEnter:a.default.func,onEntering:a.default.func,onEntered:a.default.func,onExit:a.default.func,onExiting:a.default.func,onExited:a.default.func}),t.default=w,e.exports=t.default},57316:function(e,t,n){"use strict";t.__esModule=!0;var r=w(n(96892)),a=w(n(13980)),l=w(n(25539)),f=w(n(2784)),d=w(n(28316)),h=w(n(31957)),p=w(n(19)),y=w(n(52169));function w(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=Array(a),f=0;f<a;f++)l[f]=arguments[f];return n=r=x(this,e.call.apply(e,[this].concat(l))),r.getMountNode=function(){return r._portalContainerNode},x(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.UNSAFE_componentWillMount=function(){if(r.default){var e=this.props.container;"function"==typeof e&&(e=e()),e&&!d.default.findDOMNode(e)||this.setContainer(e)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.container!==this.props.container&&this.setContainer(e.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(e){this._portalContainerNode=(0,h.default)(e,(0,p.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?d.default.createPortal(this.props.children,this._portalContainerNode):null},t}(f.default.Component);_.displayName="Portal",_.propTypes={container:a.default.oneOfType([l.default,a.default.func]),onRendered:a.default.func},t.default=d.default.createPortal?_:y.default,e.exports=t.default},17284:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=_(n(72779)),l=_(n(13980)),f=_(n(25539)),d=n(2784),h=_(d),p=_(n(28316)),y=_(n(33677)),w=_(n(31957)),x=_(n(19));function _(e){return e&&e.__esModule?e:{default:e}}function S(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var k=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a.getTarget=function(){var e=a.props.target,t="function"==typeof e?e():e;return t&&p.default.findDOMNode(t)||null},a.maybeUpdatePosition=function(e){var t=a.getTarget();(a.props.shouldUpdatePosition||t!==a._lastTarget||e)&&a.updatePosition(t)},a.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},a._needsFlush=!1,a._lastTarget=null,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.UNSAFE_componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,l=S(e,["children","className"]),f=this.state,p=f.positionLeft,y=f.positionTop,w=S(f,["positionLeft","positionTop"]);delete l.target,delete l.container,delete l.containerPadding,delete l.shouldUpdatePosition;var x=h.default.Children.only(t);return(0,d.cloneElement)(x,r({},l,w,{positionLeft:p,positionTop:y,className:(0,a.default)(n,x.props.className),style:r({},x.props.style,{left:p,top:y})}))},t.prototype.updatePosition=function(e){if(this._lastTarget=e,e){var t=p.default.findDOMNode(this),n=(0,w.default)(this.props.container,(0,x.default)(this).body);this.setState((0,y.default)(this.props.placement,t,e,n,this.props.containerPadding))}else this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null})},t}(h.default.Component);k.propTypes={target:l.default.oneOfType([f.default,l.default.func]),container:l.default.oneOfType([f.default,l.default.func]),containerPadding:l.default.number,placement:l.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:l.default.bool},k.displayName="Position",k.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=k,e.exports=t.default},93641:function(e,t,n){"use strict";t.__esModule=!0;var r=l(n(13980)),a=l(n(2784));function l(e){return e&&e.__esModule?e:{default:e}}var f={children:r.default.node},d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return this.props.children},t}(a.default.Component);d.propTypes=f,t.default=d,e.exports=t.default},13667:function(e,t,n){"use strict";t.__esModule=!0;var r=p(n(71009)),a=p(n(13980)),l=p(n(2784)),f=p(n(28316)),d=p(n(12415)),h=p(n(19));function p(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,a));return l.addEventListeners=function(){l.currentEvent=window.event;var e=l.props.event,t=(0,h.default)(l);l.documentMouseCaptureListener=(0,d.default)(t,e,l.handleMouseCapture,!0),l.documentMouseListener=(0,d.default)(t,e,l.handleMouse),l.documentKeyupListener=(0,d.default)(t,"keyup",l.handleKeyUp)},l.removeEventListeners=function(){l.documentMouseCaptureListener&&l.documentMouseCaptureListener.remove(),l.documentMouseListener&&l.documentMouseListener.remove(),l.documentKeyupListener&&l.documentKeyupListener.remove()},l.handleMouseCapture=function(e){var t;l.preventMouseRootClose=!!((t=e).metaKey||t.altKey||t.ctrlKey||t.shiftKey)||!function(e){return 0===e.button}(e)||(0,r.default)(f.default.findDOMNode(l),e.target)},l.handleMouse=function(e){e!==l.currentEvent?!l.preventMouseRootClose&&l.props.onRootClose&&l.props.onRootClose(e):l.currentEvent=void 0},l.handleKeyUp=function(e){e!==l.currentEvent?27===e.keyCode&&l.props.onRootClose&&l.props.onRootClose(e):l.currentEvent=void 0},l.preventMouseRootClose=!1,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(l.default.Component);y.displayName="RootCloseWrapper",y.propTypes={onRootClose:a.default.func,children:a.default.element,disabled:a.default.bool,event:a.default.oneOf(["click","mousedown"])},y.defaultProps={event:"click"},t.default=y,e.exports=t.default},12415:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,l){return(0,r.default)(e,t,n,l),{remove:function(){(0,a.default)(e,t,n,l)}}};var r=l(n(8331)),a=l(n(70863));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},64486:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){var t=!document.addEventListener,n=void 0;t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)});return{remove:n}},e.exports=t.default},33677:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,l,f){var d="BODY"===l.tagName?(0,r.default)(n):(0,a.default)(n,l),p=(0,r.default)(t),y=p.height,w=p.width,x=void 0,_=void 0,S=void 0,k=void 0;if("left"===e||"right"===e){_=d.top+(d.height-y)/2,x="left"===e?d.left-w:d.left+d.width;var C=function(e,t,n,r){var a=h(n),l=a.scroll,f=a.height,d=e-r-l,p=e+r-l+t;return d<0?-d:p>f?f-p:0}(_,y,l,f);_+=C,k=50*(1-2*C/y)+"%",S=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');x=d.left+(d.width-w)/2,_="top"===e?d.top-y:d.top+d.height;var E=function(e,t,n,r){var a=h(n),l=a.width,f=e-r,d=e+r+t;if(f<0)return-f;if(d>l)return l-d;return 0}(x,w,l,f);x+=E,S=50*(1-2*E/w)+"%",k=void 0}return{positionLeft:x,positionTop:_,arrowOffsetLeft:S,arrowOffsetTop:k}};var r=d(n(62271)),a=d(n(78878)),l=d(n(71992)),f=d(n(19));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){var t=void 0,n=void 0,a=void 0;if("BODY"===e.tagName)t=window.innerWidth,n=window.innerHeight,a=(0,l.default)((0,f.default)(e).documentElement)||(0,l.default)(e);else{var d=(0,r.default)(e);t=d.width,n=d.height,a=(0,l.default)(e)}return{width:t,height:n,scroll:a}}e.exports=t.default},31957:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e="function"==typeof e?e():e,l.default.findDOMNode(e)||t};var r,a=n(28316),l=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},83164:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return(0,r.default)(e)||(t=e,t&&"body"===t.tagName.toLowerCase())?function(e){var t=(0,a.default)(e),n=(0,r.default)(t),l=n.innerWidth;if(!l){var f=t.documentElement.getBoundingClientRect();l=f.right-Math.abs(f.left)}return t.body.clientWidth<l}(e):e.scrollHeight>e.clientHeight;var t};var r=l(n(54615)),a=l(n(55759));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},26545:function(e,t){"use strict";t.__esModule=!0,t.ariaHidden=a,t.hideSiblings=function(e,t){r(e,t,(function(e){return a(!0,e)}))},t.showSiblings=function(e,t){r(e,t,(function(e){return a(!1,e)}))};var n=["template","script","style"],r=function(e,t,r){t=[].concat(t),[].forEach.call(e.children,(function(e){var a,l,f;-1===t.indexOf(e)&&(l=(a=e).nodeType,f=a.tagName,1===l&&-1===n.indexOf(f.toLowerCase()))&&r(e)}))};function a(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}},19:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return(0,a.default)(r.default.findDOMNode(e))};var r=l(n(28316)),a=l(n(55759));function l(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},85268:function(e,t,n){"use strict";t.ZP=t.cn=t.d0=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(13980)),a=d(n(2784)),l=d(n(28316)),f=n(46847);n(66530);function d(e){return e&&e.__esModule?e:{default:e}}var h="unmounted";var p="exited";var y="entering";t.d0=y;var w="entered";t.cn=w;var x="exiting";var _=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var a,l=n.transitionGroup,f=l&&!l.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?f?(a=p,r.appearStatus=y):a=w:a=t.unmountOnExit||t.mountOnEnter?h:p,r.state={status:a},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var f=r.prototype;return f.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===h?{status:p}:null},f.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},f.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==y&&n!==w&&(t=y):n!==y&&n!==w||(t=x)}this.updateStatus(!1,t)},f.componentWillUnmount=function(){this.cancelNextCallback()},f.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},f.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=l.default.findDOMNode(this);t===y?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===p&&this.setState({status:h})},f.performEnter=function(e,t){var n=this,r=this.props.enter,a=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,l=this.getTimeouts(),f=a?l.appear:l.enter;t||r?(this.props.onEnter(e,a),this.safeSetState({status:y},(function(){n.props.onEntering(e,a),n.onTransitionEnd(e,f,(function(){n.safeSetState({status:w},(function(){n.props.onEntered(e,a)}))}))}))):this.safeSetState({status:w},(function(){n.props.onEntered(e)}))},f.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:x},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:p},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:p},(function(){t.props.onExited(e)}))},f.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},f.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},f.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},f.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},f.render=function(){var e=this.state.status;if(e===h)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var l=a.default.Children.only(n);return a.default.cloneElement(l,r)},r}(a.default.Component);function S(){}_.contextTypes={transitionGroup:r.object},_.childContextTypes={transitionGroup:function(){}},_.propTypes={},_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:S,onEntering:S,onEntered:S,onExit:S,onExiting:S,onExited:S},_.UNMOUNTED=0,_.EXITED=1,_.ENTERING=2,_.ENTERED=3,_.EXITING=4;var k=(0,f.polyfill)(_);t.ZP=k},66530:function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(13980))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},11837:function(e,t,n){"use strict";n(37320);var r=n(2784),a=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var l=Symbol.for;a=l("react.element"),t.Fragment=l("react.fragment")}var f=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d=Object.prototype.hasOwnProperty,h={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,n){var r,l={},p=null,y=null;for(r in void 0!==n&&(p=""+n),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(y=t.ref),t)d.call(t,r)&&!h.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:a,type:e,key:p,ref:y,props:l,_owner:f.current}}t.jsx=p,t.jsxs=p},83426:function(e,t,n){"use strict";var r=n(37320),a=60103,l=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var f=60109,d=60110,h=60112;t.Suspense=60113;var p=60115,y=60116;if("function"==typeof Symbol&&Symbol.for){var w=Symbol.for;a=w("react.element"),l=w("react.portal"),t.Fragment=w("react.fragment"),t.StrictMode=w("react.strict_mode"),t.Profiler=w("react.profiler"),f=w("react.provider"),d=w("react.context"),h=w("react.forward_ref"),t.Suspense=w("react.suspense"),p=w("react.memo"),y=w("react.lazy")}var x="function"==typeof Symbol&&Symbol.iterator;function _(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};function C(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||S}function E(){}function O(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||S}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(_(85));this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=C.prototype;var j=O.prototype=new E;j.constructor=O,r(j,C.prototype),j.isPureReactComponent=!0;var T={current:null},A=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,n){var r,l={},f=null,d=null;if(null!=t)for(r in void 0!==t.ref&&(d=t.ref),void 0!==t.key&&(f=""+t.key),t)A.call(t,r)&&!P.hasOwnProperty(r)&&(l[r]=t[r]);var h=arguments.length-2;if(1===h)l.children=n;else if(1<h){for(var p=Array(h),y=0;y<h;y++)p[y]=arguments[y+2];l.children=p}if(e&&e.defaultProps)for(r in h=e.defaultProps)void 0===l[r]&&(l[r]=h[r]);return{$$typeof:a,type:e,key:f,ref:d,props:l,_owner:T.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var I=/\/+/g;function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,n,r,f){var d=typeof e;"undefined"!==d&&"boolean"!==d||(e=null);var h=!1;if(null===e)h=!0;else switch(d){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case a:case l:h=!0}}if(h)return f=f(h=e),e=""===r?"."+M(h,0):r,Array.isArray(f)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),L(f,t,n,"",(function(e){return e}))):null!=f&&(R(f)&&(f=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(f,n+(!f.key||h&&h.key===f.key?"":(""+f.key).replace(I,"$&/")+"/")+e)),t.push(f)),1;if(h=0,r=""===r?".":r+":",Array.isArray(e))for(var p=0;p<e.length;p++){var y=r+M(d=e[p],p);h+=L(d,t,n,y,f)}else if(y=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=x&&e[x]||e["@@iterator"])?e:null}(e),"function"==typeof y)for(e=y.call(e),p=0;!(d=e.next()).done;)h+=L(d=d.value,t,n,y=r+M(d,p++),f);else if("object"===d)throw t=""+e,Error(_(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return h}function N(e,t,n){if(null==e)return e;var r=[],a=0;return L(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function F(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var q={current:null};function B(){var e=q.current;if(null===e)throw Error(_(321));return e}var U={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!R(e))throw Error(_(143));return e}},t.Component=C,t.PureComponent=O,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,n){if(null==e)throw Error(_(267,e));var l=r({},e.props),f=e.key,d=e.ref,h=e._owner;if(null!=t){if(void 0!==t.ref&&(d=t.ref,h=T.current),void 0!==t.key&&(f=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(y in t)A.call(t,y)&&!P.hasOwnProperty(y)&&(l[y]=void 0===t[y]&&void 0!==p?p[y]:t[y])}var y=arguments.length-2;if(1===y)l.children=n;else if(1<y){p=Array(y);for(var w=0;w<y;w++)p[w]=arguments[w+2];l.children=p}return{$$typeof:a,type:e.type,key:f,ref:d,props:l,_owner:h}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},t.createElement=D,t.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:F}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return B().useCallback(e,t)},t.useContext=function(e,t){return B().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return B().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return B().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return B().useLayoutEffect(e,t)},t.useMemo=function(e,t){return B().useMemo(e,t)},t.useReducer=function(e,t,n){return B().useReducer(e,t,n)},t.useRef=function(e){return B().useRef(e)},t.useState=function(e){return B().useState(e)},t.version="17.0.2"},2784:function(e,t,n){"use strict";e.exports=n(83426)},52322:function(e,t,n){"use strict";e.exports=n(11837)},46353:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=this&&this.__assign||function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var f=n(20602),d=n(27133),h=n(2784),p=n(28316);t.react2angular=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=[]);var r=t||e.propTypes&&Object.keys(e.propTypes)||[];return{bindings:f(r.map((function(e){return[e,"<"]}))),controller:["$element"].concat(n,[function(t){function r(e){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var l=t.call(this)||this;return l.$element=e,l.isDestroyed=!1,l.injectedProps={},n.forEach((function(e,t){l.injectedProps[e]=r[t]})),l}return a(r,t),Object.defineProperty(r,"$$ngIsClass",{get:function(){return!0},enumerable:!0,configurable:!0}),r.prototype.render=function(){this.isDestroyed||p.render(h.createElement(e,l({},this.props,this.injectedProps)),this.$element[0])},r.prototype.componentWillUnmount=function(){this.isDestroyed=!0,p.unmountComponentAtNode(this.$element[0])},r}(d.default)])}}},45433:function(e){var t={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ấ":"A","Ắ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Æ":"AE","Ầ":"A","Ằ":"A","Ȃ":"A","Ç":"C","Ḉ":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ế":"E","Ḗ":"E","Ề":"E","Ḕ":"E","Ḝ":"E","Ȇ":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ḯ":"I","Ȋ":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ố":"O","Ṍ":"O","Ṓ":"O","Ȏ":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ấ":"a","ắ":"a","ẳ":"a","ẵ":"a","ặ":"a","æ":"ae","ầ":"a","ằ":"a","ȃ":"a","ç":"c","ḉ":"c","è":"e","é":"e","ê":"e","ë":"e","ế":"e","ḗ":"e","ề":"e","ḕ":"e","ḝ":"e","ȇ":"e","ì":"i","í":"i","î":"i","ï":"i","ḯ":"i","ȋ":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ố":"o","ṍ":"o","ṓ":"o","ȏ":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","C̆":"C","c̆":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","Ǵ":"G","ĝ":"g","ǵ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ḫ":"H","ḫ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","Ḱ":"K","ḱ":"k","K̆":"K","k̆":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"l","ł":"l","Ḿ":"M","ḿ":"m","M̆":"M","m̆":"m","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"n","N̆":"N","n̆":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","P̆":"P","p̆":"p","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","R̆":"R","r̆":"r","Ȓ":"R","ȓ":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","Ș":"S","ș":"s","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","ț":"t","Ț":"T","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","T̆":"T","t̆":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ȗ":"U","ȗ":"u","V̆":"V","v̆":"v","Ŵ":"W","ŵ":"w","Ẃ":"W","ẃ":"w","X̆":"X","x̆":"x","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Y̆":"Y","y̆":"y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ǎ":"A","ǎ":"a","Ǐ":"I","ǐ":"i","Ǒ":"O","ǒ":"o","Ǔ":"U","ǔ":"u","Ǖ":"U","ǖ":"u","Ǘ":"U","ǘ":"u","Ǚ":"U","ǚ":"u","Ǜ":"U","ǜ":"u","Ứ":"U","ứ":"u","Ṹ":"U","ṹ":"u","Ǻ":"A","ǻ":"a","Ǽ":"AE","ǽ":"ae","Ǿ":"O","ǿ":"o","Þ":"TH","þ":"th","Ṕ":"P","ṕ":"p","Ṥ":"S","ṥ":"s","X́":"X","x́":"x","Ѓ":"Г","ѓ":"г","Ќ":"К","ќ":"к","A̋":"A","a̋":"a","E̋":"E","e̋":"e","I̋":"I","i̋":"i","Ǹ":"N","ǹ":"n","Ồ":"O","ồ":"o","Ṑ":"O","ṑ":"o","Ừ":"U","ừ":"u","Ẁ":"W","ẁ":"w","Ỳ":"Y","ỳ":"y","Ȁ":"A","ȁ":"a","Ȅ":"E","ȅ":"e","Ȉ":"I","ȉ":"i","Ȍ":"O","ȍ":"o","Ȑ":"R","ȑ":"r","Ȕ":"U","ȕ":"u","B̌":"B","b̌":"b","Č̣":"C","č̣":"c","Ê̌":"E","ê̌":"e","F̌":"F","f̌":"f","Ǧ":"G","ǧ":"g","Ȟ":"H","ȟ":"h","J̌":"J","ǰ":"j","Ǩ":"K","ǩ":"k","M̌":"M","m̌":"m","P̌":"P","p̌":"p","Q̌":"Q","q̌":"q","Ř̩":"R","ř̩":"r","Ṧ":"S","ṧ":"s","V̌":"V","v̌":"v","W̌":"W","w̌":"w","X̌":"X","x̌":"x","Y̌":"Y","y̌":"y","A̧":"A","a̧":"a","B̧":"B","b̧":"b","Ḑ":"D","ḑ":"d","Ȩ":"E","ȩ":"e","Ɛ̧":"E","ɛ̧":"e","Ḩ":"H","ḩ":"h","I̧":"I","i̧":"i","Ɨ̧":"I","ɨ̧":"i","M̧":"M","m̧":"m","O̧":"O","o̧":"o","Q̧":"Q","q̧":"q","U̧":"U","u̧":"u","X̧":"X","x̧":"x","Z̧":"Z","z̧":"z"},n=Object.keys(t).join("|"),r=new RegExp(n,"g"),a=new RegExp(n,""),l=function(e){return e.replace(r,(function(e){return t[e]}))};e.exports=l,e.exports.has=function(e){return!!e.match(a)},e.exports.remove=l},57245:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},97209:function(e,t,n){"use strict";n.r(t);var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var a=r[n];e.call(t,a[1],a[0])}},t}()}(),a="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,l=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),f="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(l):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var d=["top","right","bottom","left","width","height","size","weight"],h="undefined"!=typeof MutationObserver,p=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,a=0;function l(){n&&(n=!1,e()),r&&h()}function d(){f(l)}function h(){var e=Date.now();if(n){if(e-a<2)return;r=!0}else n=!0,r=!1,setTimeout(d,t);a=e}return h}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){a&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),h?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){a&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;d.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),y=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},w=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||l},x=O(0,0,0,0);function _(e){return parseFloat(e)||0}function S(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+_(e["border-"+n+"-width"])}),0)}function k(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return x;var r=w(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var a=r[n],l=e["padding-"+a];t[a]=_(l)}return t}(r),l=a.left+a.right,f=a.top+a.bottom,d=_(r.width),h=_(r.height);if("border-box"===r.boxSizing&&(Math.round(d+l)!==t&&(d-=S(r,"left","right")+l),Math.round(h+f)!==n&&(h-=S(r,"top","bottom")+f)),!function(e){return e===w(e).document.documentElement}(e)){var p=Math.round(d+l)-t,y=Math.round(h+f)-n;1!==Math.abs(p)&&(d-=p),1!==Math.abs(y)&&(h-=y)}return O(a.left,a.top,d,h)}var C="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof w(e).SVGGraphicsElement}:function(e){return e instanceof w(e).SVGElement&&"function"==typeof e.getBBox};function E(e){return a?C(e)?function(e){var t=e.getBBox();return O(0,0,t.width,t.height)}(e):k(e):x}function O(e,t,n,r){return{x:e,y:t,width:n,height:r}}var j=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=E(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),T=function(e,t){var n,r,a,l,f,d,h,p=(r=(n=t).x,a=n.y,l=n.width,f=n.height,d="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,h=Object.create(d.prototype),y(h,{x:r,y:a,width:l,height:f,top:a,right:r+l,bottom:f+a,left:r}),h);y(this,{target:e,contentRect:p})},A=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof w(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new j(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof w(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new T(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),P="undefined"!=typeof WeakMap?new WeakMap:new r,D=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=p.getInstance(),r=new A(t,n,this);P.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){D.prototype[e]=function(){var t;return(t=P.get(this))[e].apply(t,arguments)}}));var R=void 0!==l.ResizeObserver?l.ResizeObserver:D;t.default=R},46475:function(e,t){"use strict";var n,r,a,l;if("object"==typeof performance&&"function"==typeof performance.now){var f=performance;t.unstable_now=function(){return f.now()}}else{var d=Date,h=d.now();t.unstable_now=function(){return d.now()-h}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var p=null,y=null,w=function(){if(null!==p)try{var e=t.unstable_now();p(!0,e),p=null}catch(e){throw setTimeout(w,0),e}};n=function(e){null!==p?setTimeout(n,0,e):(p=e,setTimeout(w,0))},r=function(e,t){y=setTimeout(e,t)},a=function(){clearTimeout(y)},t.unstable_shouldYield=function(){return!1},l=t.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,_=window.clearTimeout;if("undefined"!=typeof console){var S=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof S&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var k=!1,C=null,E=-1,O=5,j=0;t.unstable_shouldYield=function(){return t.unstable_now()>=j},l=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5};var T=new MessageChannel,A=T.port2;T.port1.onmessage=function(){if(null!==C){var e=t.unstable_now();j=e+O;try{C(!0,e)?A.postMessage(null):(k=!1,C=null)}catch(e){throw A.postMessage(null),e}}else k=!1},n=function(e){C=e,k||(k=!0,A.postMessage(null))},r=function(e,n){E=x((function(){e(t.unstable_now())}),n)},a=function(){_(E),E=-1}}function P(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<I(a,t)))break e;e[r]=t,e[n]=a,n=r}}function D(e){return void 0===(e=e[0])?null:e}function R(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var l=2*(r+1)-1,f=e[l],d=l+1,h=e[d];if(void 0!==f&&0>I(f,n))void 0!==h&&0>I(h,f)?(e[r]=h,e[d]=n,r=d):(e[r]=f,e[l]=n,r=l);else{if(!(void 0!==h&&0>I(h,n)))break e;e[r]=h,e[d]=n,r=d}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var M=[],L=[],N=1,F=null,q=3,B=!1,U=!1,H=!1;function z(e){for(var t=D(L);null!==t;){if(null===t.callback)R(L);else{if(!(t.startTime<=e))break;R(L),t.sortIndex=t.expirationTime,P(M,t)}t=D(L)}}function V(e){if(H=!1,z(e),!U)if(null!==D(M))U=!0,n(W);else{var t=D(L);null!==t&&r(V,t.startTime-e)}}function W(e,n){U=!1,H&&(H=!1,a()),B=!0;var l=q;try{for(z(n),F=D(M);null!==F&&(!(F.expirationTime>n)||e&&!t.unstable_shouldYield());){var f=F.callback;if("function"==typeof f){F.callback=null,q=F.priorityLevel;var d=f(F.expirationTime<=n);n=t.unstable_now(),"function"==typeof d?F.callback=d:F===D(M)&&R(M),z(n)}else R(M);F=D(M)}if(null!==F)var h=!0;else{var p=D(L);null!==p&&r(V,p.startTime-n),h=!1}return h}finally{F=null,q=l,B=!1}}var Z=l;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){U||B||(U=!0,n(W))},t.unstable_getCurrentPriorityLevel=function(){return q},t.unstable_getFirstCallbackNode=function(){return D(M)},t.unstable_next=function(e){switch(q){case 1:case 2:case 3:var t=3;break;default:t=q}var n=q;q=t;try{return e()}finally{q=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=Z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=q;q=e;try{return t()}finally{q=n}},t.unstable_scheduleCallback=function(e,l,f){var d=t.unstable_now();switch("object"==typeof f&&null!==f?f="number"==typeof(f=f.delay)&&0<f?d+f:d:f=d,e){case 1:var h=-1;break;case 2:h=250;break;case 5:h=1073741823;break;case 4:h=1e4;break;default:h=5e3}return e={id:N++,callback:l,priorityLevel:e,startTime:f,expirationTime:h=f+h,sortIndex:-1},f>d?(e.sortIndex=f,P(L,e),null===D(M)&&e===D(L)&&(H?a():H=!0,r(V,f-d))):(e.sortIndex=h,P(M,e),U||B||(U=!0,n(W))),e},t.unstable_wrapCallback=function(e){var t=q;return function(){var n=q;q=t;try{return e.apply(this,arguments)}finally{q=n}}}},14616:function(e,t,n){"use strict";e.exports=n(46475)},93057:function(e,t,n){"use strict";var r=n(20569);function a(e){return e===Object(e)&&0!==Object.keys(e).length}t.Z=function(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(a(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:(0,r.Z)(e,t));if(!n){var l=function(e){return!1===e?{block:"end",inline:"nearest"}:a(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,a=e.top,l=e.left;r.scroll&&n?r.scroll({top:a,left:l,behavior:t}):(r.scrollTop=a,r.scrollLeft=l)}))}((0,r.Z)(e,l),l.behavior)}}},5163:function(e,t,n){"use strict";n.d(t,{pi:function(){return r}});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.create;Object.create},46889:function(e){e.exports=/[\0-\x1F\x7F-\x9F]/},7062:function(e){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},18442:function(e){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},83530:function(e){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},94677:function(e,t,n){"use strict";function r(e,t){return t=t||{},new Promise((function(n,r){var a=new XMLHttpRequest,l=[],f=[],d={},h=function(){return{ok:2==(a.status/100|0),statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:h,headers:{keys:function(){return l},entries:function(){return f},get:function(e){return d[e.toLowerCase()]},has:function(e){return e.toLowerCase()in d}}}};for(var p in a.open(t.method||"get",e,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){l.push(t=t.toLowerCase()),f.push([t,n]),d[t]=d[t]?d[t]+","+n:n})),n(h())},a.onerror=r,a.withCredentials="include"==t.credentials,t.headers)a.setRequestHeader(p,t.headers[p]);a.send(t.body||null)}))}n.r(t),n.d(t,{default:function(){return r}})},64846:function(e,t,n){"use strict";var r=n(57245),a=n(97375),l=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,f=/[\n\r\t]/g,d=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,h=/:\d+$/,p=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,y=/^[a-zA-Z]:/;function w(e){return(e||"").toString().replace(l,"")}var x=[["#","hash"],["?","query"],function(e,t){return k(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],_={hash:1,query:1};function S(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},a={},l=typeof(e=e||r);if("blob:"===e.protocol)a=new E(unescape(e.pathname),{});else if("string"===l)for(t in a=new E(e,{}),_)delete a[t];else if("object"===l){for(t in e)t in _||(a[t]=e[t]);void 0===a.slashes&&(a.slashes=d.test(e.href))}return a}function k(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function C(e,t){e=(e=w(e)).replace(f,""),t=t||{};var n,r=p.exec(e),a=r[1]?r[1].toLowerCase():"",l=!!r[2],d=!!r[3],h=0;return l?d?(n=r[2]+r[3]+r[4],h=r[2].length+r[3].length):(n=r[2]+r[4],h=r[2].length):d?(n=r[3]+r[4],h=r[3].length):n=r[4],"file:"===a?h>=2&&(n=n.slice(2)):k(a)?n=r[4]:a?l&&(n=n.slice(2)):h>=2&&k(t.protocol)&&(n=r[4]),{protocol:a,slashes:l||k(a),slashesCount:h,rest:n}}function E(e,t,n){if(e=(e=w(e)).replace(f,""),!(this instanceof E))return new E(e,t,n);var l,d,h,p,_,O,j=x.slice(),T=typeof t,A=this,P=0;for("object"!==T&&"string"!==T&&(n=t,t=null),n&&"function"!=typeof n&&(n=a.parse),l=!(d=C(e||"",t=S(t))).protocol&&!d.slashes,A.slashes=d.slashes||l&&t.slashes,A.protocol=d.protocol||t.protocol||"",e=d.rest,("file:"===d.protocol&&(2!==d.slashesCount||y.test(e))||!d.slashes&&(d.protocol||d.slashesCount<2||!k(A.protocol)))&&(j[3]=[/(.*)/,"pathname"]);P<j.length;P++)"function"!=typeof(p=j[P])?(h=p[0],O=p[1],h!=h?A[O]=e:"string"==typeof h?~(_="@"===h?e.lastIndexOf(h):e.indexOf(h))&&("number"==typeof p[2]?(A[O]=e.slice(0,_),e=e.slice(_+p[2])):(A[O]=e.slice(_),e=e.slice(0,_))):(_=h.exec(e))&&(A[O]=_[1],e=e.slice(0,_.index)),A[O]=A[O]||l&&p[3]&&t[O]||"",p[4]&&(A[O]=A[O].toLowerCase())):e=p(e,A);n&&(A.query=n(A.query)),l&&t.slashes&&"/"!==A.pathname.charAt(0)&&(""!==A.pathname||""!==t.pathname)&&(A.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,a=n[r-1],l=!1,f=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),f++):f&&(0===r&&(l=!0),n.splice(r,1),f--);return l&&n.unshift(""),"."!==a&&".."!==a||n.push(""),n.join("/")}(A.pathname,t.pathname)),"/"!==A.pathname.charAt(0)&&k(A.protocol)&&(A.pathname="/"+A.pathname),r(A.port,A.protocol)||(A.host=A.hostname,A.port=""),A.username=A.password="",A.auth&&(~(_=A.auth.indexOf(":"))?(A.username=A.auth.slice(0,_),A.username=encodeURIComponent(decodeURIComponent(A.username)),A.password=A.auth.slice(_+1),A.password=encodeURIComponent(decodeURIComponent(A.password))):A.username=encodeURIComponent(decodeURIComponent(A.auth)),A.auth=A.password?A.username+":"+A.password:A.username),A.origin="file:"!==A.protocol&&k(A.protocol)&&A.host?A.protocol+"//"+A.host:"null",A.href=A.toString()}E.prototype={set:function(e,t,n){var l=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||a.parse)(t)),l[e]=t;break;case"port":l[e]=t,r(t,l.protocol)?t&&(l.host=l.hostname+":"+t):(l.host=l.hostname,l[e]="");break;case"hostname":l[e]=t,l.port&&(t+=":"+l.port),l.host=t;break;case"host":l[e]=t,h.test(t)?(t=t.split(":"),l.port=t.pop(),l.hostname=t.join(":")):(l.hostname=t,l.port="");break;case"protocol":l.protocol=t.toLowerCase(),l.slashes=!n;break;case"pathname":case"hash":if(t){var f="pathname"===e?"/":"#";l[e]=t.charAt(0)!==f?f+t:t}else l[e]=t;break;case"username":case"password":l[e]=encodeURIComponent(t);break;case"auth":var d=t.indexOf(":");~d?(l.username=t.slice(0,d),l.username=encodeURIComponent(decodeURIComponent(l.username)),l.password=t.slice(d+1),l.password=encodeURIComponent(decodeURIComponent(l.password))):l.username=encodeURIComponent(decodeURIComponent(t))}for(var p=0;p<x.length;p++){var y=x[p];y[4]&&(l[y[1]]=l[y[1]].toLowerCase())}return l.auth=l.password?l.username+":"+l.password:l.username,l.origin="file:"!==l.protocol&&k(l.protocol)&&l.host?l.protocol+"//"+l.host:"null",l.href=l.toString(),l},toString:function(e){e&&"function"==typeof e||(e=a.stringify);var t,n=this,r=n.host,l=n.protocol;l&&":"!==l.charAt(l.length-1)&&(l+=":");var f=l+(n.protocol&&n.slashes||k(n.protocol)?"//":"");return n.username?(f+=n.username,n.password&&(f+=":"+n.password),f+="@"):n.password?(f+=":"+n.password,f+="@"):"file:"!==n.protocol&&k(n.protocol)&&!r&&"/"!==n.pathname&&(f+="@"),(":"===r[r.length-1]||h.test(n.hostname)&&!n.port)&&(r+=":"),f+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(f+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(f+=n.hash),f}},E.extractProtocol=C,E.location=S,E.trimLeft=w,E.qs=a,e.exports=E},98022:function(e,t,n){var r=n(84481),a=n(26426),l=a;l.v1=r,l.v4=a,e.exports=l},38725:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,a=t;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}},19157:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},84481:function(e,t,n){var r,a,l=n(19157),f=n(38725),d=0,h=0;e.exports=function(e,t,n){var p=t&&n||0,y=t||[],w=(e=e||{}).node||r,x=void 0!==e.clockseq?e.clockseq:a;if(null==w||null==x){var _=l();null==w&&(w=r=[1|_[0],_[1],_[2],_[3],_[4],_[5]]),null==x&&(x=a=16383&(_[6]<<8|_[7]))}var S=void 0!==e.msecs?e.msecs:(new Date).getTime(),k=void 0!==e.nsecs?e.nsecs:h+1,C=S-d+(k-h)/1e4;if(C<0&&void 0===e.clockseq&&(x=x+1&16383),(C<0||S>d)&&void 0===e.nsecs&&(k=0),k>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=S,h=k,a=x;var E=(1e4*(268435455&(S+=122192928e5))+k)%4294967296;y[p++]=E>>>24&255,y[p++]=E>>>16&255,y[p++]=E>>>8&255,y[p++]=255&E;var O=S/4294967296*1e4&268435455;y[p++]=O>>>8&255,y[p++]=255&O,y[p++]=O>>>24&15|16,y[p++]=O>>>16&255,y[p++]=x>>>8|128,y[p++]=255&x;for(var j=0;j<6;++j)y[p+j]=w[j];return t||f(y)}},26426:function(e,t,n){var r=n(19157),a=n(38725);e.exports=function(e,t,n){var l=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var f=(e=e||{}).random||(e.rng||r)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,t)for(var d=0;d<16;++d)t[l+d]=f[d];return t||a(f)}},92564:function(e){"use strict";e.exports=function(){}},78477:function(e){"use strict";function t(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}t.prototype.match=function(e){var t,n,r=!0,a=this.parts,l=a.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(n=(e||"").split(this.separator),t=0;r&&t<l;t++)"*"!==a[t]&&(r=t<n.length&&a[t]===n[t]);r=r&&n}else r=!1;else if("function"==typeof e.splice)for(r=[],t=e.length;t--;)this.match(e[t])&&(r[r.length]=e[t]);else if("object"==typeof e)for(var f in r={},e)this.match(f)&&(r[f]=e[f]);return r},e.exports=function(e,n,r){var a=new t(e,r||/[\/\.]/);return void 0!==n?a.match(n):a}},91956:function(e,t,n){var r={"./ambiance.json":[70856,3778],"./chaos.json":[24631,809],"./chrome.json":[27766,4701],"./clouds.json":[7375,2231],"./clouds_midnight.json":[39748,1333],"./cobalt.json":[45677,6108],"./crimson_editor.json":[63252,3359],"./dawn.json":[46972,7479],"./dracula.json":[55576,562],"./dreamweaver.json":[75708,3506],"./eclipse.json":[65453,7157],"./github.json":[49747,2268],"./gob.json":[69003,5848],"./gruvbox.json":[29728,4608],"./idle_fingers.json":[69124,7895],"./iplastic.json":[84855,5777],"./katzenmilch.json":[97993,4288],"./kr_theme.json":[29541,929],"./kuroir.json":[95134,2834],"./merbivore.json":[78069,1787],"./merbivore_soft.json":[90873,4934],"./mono_industrial.json":[79189,9192],"./monokai.json":[61647,1921],"./nord_dark.json":[12287,8812],"./one_dark.json":[58405,8166],"./overleaf.json":[81459,7223],"./pastel_on_dark.json":[35708,588],"./solarized_dark.json":[71304,1369],"./solarized_light.json":[19394,8244],"./sqlserver.json":[6326,9190],"./terminal.json":[47381,8895],"./textmate.json":[6534,4412],"./tomorrow.json":[96631,3552],"./tomorrow_night.json":[44846,6975],"./tomorrow_night_blue.json":[40245,8863],"./tomorrow_night_bright.json":[84098,6144],"./tomorrow_night_eighties.json":[99122,1897],"./twilight.json":[17270,7530],"./vibrant_ink.json":[627,8967],"./xcode.json":[89834,1949]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,19)}))}a.keys=function(){return Object.keys(r)},a.id=91956,e.exports=a},7445:function(){var e=angular.module("autocomplete",[]);e.directive("autocomplete",(function(){var e=-1;return{restrict:"E",scope:{searchParam:"=ngModel",suggestions:"=data",onType:"=onType",onSelect:"=onSelect"},controller:["$scope",function(e){e.selectedIndex=-1,e.setIndex=function(t){e.selectedIndex=parseInt(t)},this.setIndex=function(t){e.setIndex(t),e.$apply()},e.getIndex=function(t){return e.selectedIndex};var t=!0;e.completing=!1,e.$watch("searchParam",(function(n,r){r!==n&&(t&&e.searchParam&&(e.completing=!0,e.searchFilter=e.searchParam,e.selectedIndex=-1),e.onType&&e.onType(e.searchParam))})),this.preSelect=function(n){t=!1,e.$apply(),t=!0},e.preSelect=this.preSelect,this.preSelectOff=function(){t=!0},e.preSelectOff=this.preSelectOff,e.select=function(n){n&&(e.searchParam=n,e.searchFilter=n,e.onSelect&&e.onSelect(n)),t=!1,e.completing=!1,setTimeout((function(){t=!0}),1e3),e.setIndex(-1)}}],link:function(t,n,r){var a="";for(var l in t.attrs={placeholder:"start typing...",class:"",id:"",inputclass:"",inputid:""},r)a=l.replace("attr","").toLowerCase(),0===l.indexOf("attr")&&(t.attrs[a]=r[l]);r.clickActivation&&(n[0].onclick=function(e){t.searchParam||(t.completing=!0,t.$apply())});var f=37,d=38,h=39,p=40,y=13,w=27;document.addEventListener("keydown",(function(e){if((e.keyCode||e.which)===w)t.select(),t.setIndex(-1),t.$apply(),e.preventDefault()}),!0),document.addEventListener("blur",(function(e){setTimeout((function(){t.select(),t.setIndex(-1),t.$apply()}),200)}),!0),n[0].addEventListener("keydown",(function(n){var r=n.keyCode||n.which,a=angular.element(this).find("li").length;switch(r){case d:if((e=t.getIndex()-1)<-1)e=a-1;else if(e>=a){e=-1,t.setIndex(e),t.preSelectOff();break}t.setIndex(e),-1!==e&&t.preSelect(angular.element(angular.element(this).find("li")[e]).text()),t.$apply();break;case p:if((e=t.getIndex()+1)<-1)e=a-1;else if(e>=a){e=-1,t.setIndex(e),t.preSelectOff(),t.$apply();break}t.setIndex(e),-1!==e&&t.preSelect(angular.element(angular.element(this).find("li")[e]).text());break;case f:break;case h:case y:-1!==(e=t.getIndex())&&t.select(angular.element(angular.element(this).find("li")[e]).text()),t.setIndex(-1),t.$apply();break;case w:t.select(),t.setIndex(-1),t.$apply(),n.preventDefault();break;default:return}-1===t.getIndex()&&r!=y||n.preventDefault()}))},templateUrl:"js/libs/angular-autocomplete/ac_template.html"}})),e.filter("highlight",["$sce",function(e){return function(t,n){if("function"==typeof t)return"";if(n){var r="("+n.split(/\ /).join(" |")+"|"+n.split(/\ /).join("|")+")",a=new RegExp(r,"gi");r.length&&(t=t.replace(a,'<span class="highlight">$1</span>'))}return e.trustAsHtml(t)}}]),e.directive("suggestion",(function(){return{restrict:"A",require:"^autocomplete",link:function(e,t,n,r){t.bind("mouseenter",(function(){r.preSelect(n.val),r.setIndex(n.index)})),t.bind("mouseleave",(function(){r.preSelectOff()}))}}}))},5852:function(){angular.module("ivpusic.cookie",["ipCookie"]),angular.module("ipCookie",["ng"]).factory("ipCookie",["$document",function(e){"use strict";return function(){function t(t,n,r){var a,l,f,d,h,p,y,w,x;if(r=r||{},void 0!==n)return n="object"==typeof n?JSON.stringify(n):String(n),"number"==typeof r.expires&&(x=r.expires,r.expires=new Date,-1===x?r.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==r.expirationUnit?"hours"===r.expirationUnit?r.expires.setHours(r.expires.getHours()+x):"minutes"===r.expirationUnit?r.expires.setMinutes(r.expires.getMinutes()+x):"seconds"===r.expirationUnit?r.expires.setSeconds(r.expires.getSeconds()+x):r.expires.setDate(r.expires.getDate()+x):r.expires.setDate(r.expires.getDate()+x)),e[0].cookie=[encodeURIComponent(t),"=",encodeURIComponent(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("");for(l=[],(w=e[0].cookie)&&(l=w.split("; ")),a={},y=!1,f=0;f<l.length;++f)if(l[f]&&(h=(d=l[f]).indexOf("="),p=d.substring(0,h),n=decodeURIComponent(d.substring(h+1)),void 0===t||t===p)){try{a[p]=JSON.parse(n)}catch(e){a[p]=n}if(t===p)return a[p];y=!0}return y&&void 0===t?a:void 0}return t.remove=function(e,n){var r=void 0!==t(e);return r&&(n||(n={}),n.expires=-1,t(e,"",n)),r},t}()}])},80327:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(global){var qq=function(e){"use strict";return{hide:function(){return e.style.display="none",this},attach:function(t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq(e).detach(t,n)}},detach:function(t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n),this},contains:function(t){return!!t&&(e===t||(e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e))))},insertBefore:function(t){return t.parentNode.insertBefore(e,t),this},remove:function(){return e.parentNode.removeChild(e),this},css:function(t){if(null==e.style)throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");return null!=t.opacity&&"string"!=typeof e.style.opacity&&void 0!==e.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t),this},hasClass:function(t,n){var r=new RegExp("(^| )"+t+"( |$)");return r.test(e.className)||!(!n||!r.test(e.parentNode.className))},addClass:function(t){return qq(e).hasClass(t)||(e.className+=" "+t),this},removeClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t,n){var r,a=[];return n&&e.querySelector?e.querySelector("."+t):e.querySelectorAll?e.querySelectorAll("."+t):(r=e.getElementsByTagName("*"),qq.each(r,(function(e,n){qq(n).hasClass(t)&&a.push(n)})),n?a[0]:a)},getFirstByClass:function(t){return qq(e).getByClass(t,!0)},children:function(){for(var t=[],n=e.firstChild;n;)1===n.nodeType&&t.push(n),n=n.nextSibling;return t},setText:function(t){return e.innerText=t,e.textContent=t,this},clearText:function(){return qq(e).setText("")},hasAttribute:function(t){var n;return e.hasAttribute?!!e.hasAttribute(t)&&null==/^false$/i.exec(e.getAttribute(t)):void 0!==(n=e[t])&&null==/^false$/i.exec(n)}}},ExifRestorer;(function(){"use strict";var div;qq.canvasToBlob=function(e,t,n){return qq.dataUriToBlob(e.toDataURL(t,n))},qq.dataUriToBlob=function(e){var t,n,r,a,l,f,d,h;return n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(n.length),r=new Uint8Array(t),qq.each(n,(function(e,t){r[e]=t.charCodeAt(0)})),l=t,f=a,d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,(h=d&&new d)?(h.append(l),h.getBlob(f)):new Blob([l],{type:f})},qq.log=function(e,t){window.console&&(t&&"info"!==t?window.console[t]?window.console[t](e):window.console.log("<"+t+"> "+e):window.console.log(e))},qq.isObject=function(e){return e&&!e.nodeType&&"[object Object]"===Object.prototype.toString.call(e)},qq.isFunction=function(e){return"function"==typeof e},qq.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)||e&&window.ArrayBuffer&&e.buffer&&e.buffer.constructor===ArrayBuffer},qq.isItemList=function(e){return"[object DataTransferItemList]"===Object.prototype.toString.call(e)},qq.isNodeList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)||e.item&&e.namedItem},qq.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},qq.trimStr=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},qq.format=function(e){var t=Array.prototype.slice.call(arguments,1),n=e,r=n.indexOf("{}");return qq.each(t,(function(e,t){var a=n.substring(0,r),l=n.substring(r+2);if((r=(n=a+t+l).indexOf("{}",r+t.length))<0)return!1})),n},qq.isFile=function(e){return window.File&&"[object File]"===Object.prototype.toString.call(e)},qq.isFileList=function(e){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(e)},qq.isFileOrInput=function(e){return qq.isFile(e)||qq.isInput(e)},qq.isInput=function(e,t){var n=function(e){var n=e.toLowerCase();return t?"file"!==n:"file"===n};return!!(window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(e)&&e.type&&n(e.type))||!!(e.tagName&&"input"===e.tagName.toLowerCase()&&e.type&&n(e.type))},qq.isBlob=function(e){if(window.Blob&&"[object Blob]"===Object.prototype.toString.call(e))return!0},qq.isXhrUploadSupported=function(){var e=document.createElement("input");return e.type="file",void 0!==e.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&void 0!==qq.createXhrInstance().upload},qq.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return qq.log("Neither XHR or ActiveX are supported!","error"),null}},qq.isFolderDropSupported=function(e){return e.items&&e.items.length>0&&e.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return!qq.androidStock()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)},qq.sliceBlob=function(e,t,n){return(e.slice||e.mozSlice||e.webkitSlice).call(e,t,n)},qq.arrayBufferToHex=function(e){var t="",n=new Uint8Array(e);return qq.each(n,(function(e,n){var r=n.toString(16);r.length<2&&(r="0"+r),t+=r})),t},qq.readBlobToHex=function(e,t,n){var r=qq.sliceBlob(e,t,t+n),a=new FileReader,l=new qq.Promise;return a.onload=function(){l.success(qq.arrayBufferToHex(a.result))},a.onerror=l.failure,a.readAsArrayBuffer(r),l},qq.extend=function(e,t,n){return qq.each(t,(function(t,r){n&&qq.isObject(r)?(void 0===e[t]&&(e[t]={}),qq.extend(e[t],r,!0)):e[t]=r})),e},qq.override=function(e,t){var n={},r=t(n);return qq.each(r,(function(t,r){void 0!==e[t]&&(n[t]=e[t]),e[t]=r})),e},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var r=e.length;for(n<0&&(n+=r);n<r;n+=1)if(e.hasOwnProperty(n)&&e[n]===t)return n;return-1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")},qq.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")},qq.ie8=function(){return-1!==navigator.userAgent.indexOf("MSIE 8")},qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")},qq.ie11=function(){return qq.ie()&&-1!==navigator.userAgent.indexOf("rv:11")},qq.edge=function(){return navigator.userAgent.indexOf("Edge")>=0},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")},qq.firefox=function(){return!qq.edge()&&!qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0},qq.ios6=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 6_")},qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")},qq.ios8=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_")},qq.ios800=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_0 ")},qq.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")},qq.iosChrome=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf("CriOS")},qq.iosSafari=function(){return qq.ios()&&!qq.iosChrome()&&-1!==navigator.userAgent.indexOf("Safari")},qq.iosSafariWebView=function(){return qq.ios()&&!qq.iosChrome()&&!qq.iosSafari()},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.toElement=(div=document.createElement("div"),function(e){div.innerHTML=e;var t=div.firstChild;return div.removeChild(t),t}),qq.each=function(e,t){var n;if(e)if(window.Storage&&e.constructor===window.Storage)for(n=0;n<e.length&&!1!==t(e.key(n),e.getItem(e.key(n)));n++);else if(qq.isArray(e)||qq.isItemList(e)||qq.isNodeList(e))for(n=0;n<e.length&&!1!==t(n,e[n]);n++);else if(qq.isString(e))for(n=0;n<e.length&&!1!==t(n,e.charAt(n));n++);else for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!1===t(n,e[n]))break},qq.bind=function(e,t){if(qq.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return function(){var r=qq.extend([],n);return arguments.length&&(r=r.concat(Array.prototype.slice.call(arguments))),e.apply(t,r)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(e,t,n){var r=[],a="&",l=function(e,n){var a=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;"undefined"!==a&&"undefined"!==n&&r.push("object"==typeof e?qq.obj2url(e,a,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(a)+"="+encodeURIComponent(e()):encodeURIComponent(a)+"="+encodeURIComponent(e))};return!n&&t?(a=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",r.push(t),r.push(qq.obj2url(e))):"[object Array]"===Object.prototype.toString.call(e)&&void 0!==e?qq.each(e,(function(e,t){l(t,e)})):null!=e&&"object"==typeof e?qq.each(e,(function(e,t){l(t,e)})):r.push(encodeURIComponent(t)+"="+encodeURIComponent(e)),t?r.join(a):r.join(a).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(e,t,n){return t||(t=new FormData),qq.each(e,(function(e,r){e=n?n+"["+e+"]":e,qq.isObject(r)?qq.obj2FormData(r,t,e):qq.isFunction(r)?t.append(e,r()):t.append(e,r)})),t},qq.obj2Inputs=function(e,t){var n;return t||(t=document.createElement("form")),qq.obj2FormData(e,{append:function(e,r){(n=document.createElement("input")).setAttribute("name",e),n.setAttribute("value",r),t.appendChild(n)}}),t},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.getExtension=function(e){var t=e.lastIndexOf(".")+1;if(t>0)return e.substr(t,e.length-t)},qq.getFilename=function(e){return qq.isInput(e)?e.value.replace(/.*(\/|\\)/,""):qq.isFile(e)&&null!==e.fileName&&void 0!==e.fileName?e.fileName:e.name},qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do{(t=e.shift())&&t()}while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}}})(),function(){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return qq}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(),function(){"use strict";qq.Error=function(e){this.message="[Fine Uploader "+qq.version+"] "+e},qq.Error.prototype=new Error}(),qq.version="5.15.4",qq.supportedFeatures=function(){"use strict";var e,t,n,r,a,l,f,d,h,p,y,w,x,_,S,k;function C(){return!!window.XMLHttpRequest&&void 0!==qq.createXhrInstance().withCredentials}function E(){return void 0!==window.XDomainRequest}return e=function(){var e,t=!0;try{(e=document.createElement("input")).type="file",qq(e).hide(),e.disabled&&(t=!1)}catch(e){t=!1}return t}(),t=(r=e&&qq.isXhrUploadSupported())&&!qq.androidStock(),a=(n=r&&(("draggable"in(k=document.createElement("span"))||"ondragstart"in k&&"ondrop"in k)&&!qq.android()&&!qq.ios()))&&(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/),l=r&&qq.isFileChunkingSupported(),f=r&&l&&function(){try{return!!window.localStorage&&qq.isFunction(window.localStorage.setItem)}catch(e){return!1}}(),d=r&&(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/),h=e&&(void 0!==window.postMessage||r),y=C(),p=E(),w=!!C()||E(),x=void 0!==document.createElement("input").webkitdirectory,_=r&&void 0!==window.FileReader,S=!!r&&!qq.androidStock()&&!qq.iosChrome(),{ajaxUploading:r,blobUploading:t,canDetermineSize:r,chunking:l,deleteFileCors:w,deleteFileCorsXdr:p,deleteFileCorsXhr:y,dialogElement:!!window.HTMLDialogElement,fileDrop:n,folderDrop:a,folderSelection:x,imagePreviews:_,imageValidation:_,itemSizeValidation:r,pause:l,progressBar:S,resume:f,scaling:_&&t,tiffPreviews:qq.safari(),unlimitedScaledImageSize:!qq.ios(),uploading:e,uploadCors:h,uploadCustomHeaders:r,uploadNonMultipart:r,uploadViaPaste:d}}(),qq.isGenericPromise=function(e){"use strict";return!!(e&&e.then&&qq.isFunction(e.then))},qq.Promise=function(){"use strict";var e,t,n=[],r=[],a=[],l=0;qq.extend(this,{then:function(a,f){return 0===l?(a&&n.push(a),f&&r.push(f)):-1===l?f&&f.apply(null,t):a&&a.apply(null,e),this},done:function(n){return 0===l?a.push(n):n.apply(null,void 0===t?e:t),this},success:function(){return l=1,e=arguments,n.length&&qq.each(n,(function(t,n){n.apply(null,e)})),a.length&&qq.each(a,(function(t,n){n.apply(null,e)})),this},failure:function(){return l=-1,t=arguments,r.length&&qq.each(r,(function(e,n){n.apply(null,t)})),a.length&&qq.each(a,(function(e,n){n.apply(null,t)})),this}})},qq.BlobProxy=function(e,t){"use strict";qq.extend(this,{referenceBlob:e,create:function(){return t(e)}})},qq.UploadButton=function(e){"use strict";var t,n,r=this,a=new qq.DisposeSupport,l={acceptFiles:null,element:null,focusClass:"qq-upload-button-focus",folders:!1,hoverClass:"qq-upload-button-hover",ios8BrowserCrashWorkaround:!1,multiple:!1,name:"qqfile",onChange:function(e){},title:null};function f(){var e=document.createElement("input");return e.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,n),e.setAttribute("title",l.title),r.setMultiple(l.multiple,e),l.folders&&qq.supportedFeatures.folderSelection&&e.setAttribute("webkitdirectory",""),l.acceptFiles&&e.setAttribute("accept",l.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",l.name),qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:qq.ie()&&!qq.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),!qq.ie7()&&qq(e).css({height:"100%"}),l.element.appendChild(e),a.attach(e,"change",(function(){l.onChange(e)})),a.attach(e,"mouseover",(function(){qq(l.element).addClass(l.hoverClass)})),a.attach(e,"mouseout",(function(){qq(l.element).removeClass(l.hoverClass)})),a.attach(e,"focus",(function(){qq(l.element).addClass(l.focusClass)})),a.attach(e,"blur",(function(){qq(l.element).removeClass(l.focusClass)})),e}qq.extend(l,e),n=qq.getUniqueId(),qq(l.element).css({position:"relative",overflow:"hidden",direction:"ltr"}),qq.extend(this,{getInput:function(){return t},getButtonId:function(){return n},setMultiple:function(e,t){var n=t||this.getInput();l.ios8BrowserCrashWorkaround&&qq.ios8()&&(qq.iosChrome()||qq.iosSafariWebView())||e?n.setAttribute("multiple",""):n.removeAttribute("multiple")},setAcceptFiles:function(e){e!==l.acceptFiles&&t.setAttribute("accept",e)},reset:function(){t.parentNode&&qq(t).remove(),qq(l.element).removeClass(l.focusClass),t=null,t=f()}}),t=f()},qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id",qq.UploadData=function(e){"use strict";var t=[],n={},r={},a={},l={};qq.extend(this,{addFile:function(f){var d=f.status||qq.status.SUBMITTING,h=t.push({name:f.name,originalName:f.name,uuid:f.uuid,size:null==f.size?-1:f.size,status:d})-1;return f.batchId&&(t[h].batchId=f.batchId,void 0===l[f.batchId]&&(l[f.batchId]=[]),l[f.batchId].push(h)),f.proxyGroupId&&(t[h].proxyGroupId=f.proxyGroupId,void 0===a[f.proxyGroupId]&&(a[f.proxyGroupId]=[]),a[f.proxyGroupId].push(h)),t[h].id=h,n[f.uuid]=h,void 0===r[d]&&(r[d]=[]),r[d].push(h),f.onBeforeStatusChange&&f.onBeforeStatusChange(h),e.onStatusChange(h,null,d),h},retrieve:function(e){return qq.isObject(e)&&t.length?void 0!==e.id?function(e){if(qq.isArray(e)){var n=[];return qq.each(e,(function(e,r){n.push(t[r])})),n}return t[e]}(e.id):void 0!==e.uuid?function(e){if(qq.isArray(e)){var r=[];return qq.each(e,(function(e,a){r.push(t[n[a]])})),r}return t[n[e]]}(e.uuid):e.status?(a=e.status,l=[],f=[].concat(a),qq.each(f,(function(e,n){var a=r[n];void 0!==a&&qq.each(a,(function(e,n){l.push(t[n])}))})),l):void 0:qq.extend([],t,!0);var a,l,f},reset:function(){t=[],n={},r={},l={}},setStatus:function(n,a){var l=t[n].status,f=qq.indexOf(r[l],n);r[l].splice(f,1),t[n].status=a,void 0===r[a]&&(r[a]=[]),r[a].push(n),e.onStatusChange(n,l,a)},uuidChanged:function(e,r){var a=t[e].uuid;t[e].uuid=r,n[r]=e,delete n[a]},updateName:function(e,n){t[e].name=n},updateSize:function(e,n){t[e].size=n},setParentId:function(e,n){t[e].parentId=n},getIdsInProxyGroup:function(e){var n=t[e].proxyGroupId;return n?a[n]:[]},getIdsInBatch:function(e){var n=t[e].batchId;return l[n]}})},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},function(){"use strict";qq.basePublicApi={addBlobs:function(e,t,n){this.addFiles(e,t,n)},addInitialFiles:function(e){var t=this;qq.each(e,(function(e,n){t._addCannedFile(n)}))},addFiles:function(e,t,n){this._maybeHandleIos8SafariWorkaround();var r=0===this._storedIds.length?qq.getUniqueId():this._currentBatchId,a=qq.bind((function(e){this._handleNewFile({blob:e,name:this._options.blobs.defaultName},r,y)}),this),l=qq.bind((function(e){this._handleNewFile(e,r,y)}),this),f=qq.bind((function(e){var t=qq.canvasToBlob(e);this._handleNewFile({blob:t,name:this._options.blobs.defaultName+".png"},r,y)}),this),d=qq.bind((function(e){var t=e.quality&&e.quality/100,n=qq.canvasToBlob(e.canvas,e.type,t);this._handleNewFile({blob:n,name:e.name},r,y)}),this),h=qq.bind((function(e){if(qq.isInput(e)&&qq.supportedFeatures.ajaxUploading){var t=Array.prototype.slice.call(e.files),n=this;qq.each(t,(function(e,t){n._handleNewFile(t,r,y)}))}else this._handleNewFile(e,r,y)}),this),p=this,y=[];this._currentBatchId=r,e&&(qq.isFileList(e)&&(e=Array.prototype.slice.call(e)),e=[].concat(e),qq.each(e,(function(e,t){qq.isFileOrInput(t)?h(t):qq.isBlob(t)?a(t):qq.isObject(t)?t.blob&&t.name?l(t):t.canvas&&t.name&&d(t):t.tagName&&"canvas"===t.tagName.toLowerCase()?f(t):p.log(t+" is not a valid file container!  Ignoring!","warn")})),this.log("Received "+y.length+" files."),this._prepareItemsForUpload(y,t,n))},cancel:function(e){this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds),qq.each(e,(function(e,n){t.cancel(n)})),this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(e){var t=this._uploadData.retrieve({id:e});return!(!qq.supportedFeatures.pause||!this._options.chunking.enabled)&&(t.status===qq.status.PAUSED?(this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",e,this.getName(e))),this._uploadFile(e),!0):(this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",e,this.getName(e)),"error"),!1))},deleteFile:function(e){return this._onSubmitDelete(e)},doesExist:function(e){return this._handler.isValid(e)},drawThumbnail:function(e,t,n,r,a){var l,f,d=new qq.Promise;return this._imageGenerator?(l=this._thumbnailUrls[e],f={customResizeFunction:a,maxSize:n>0?n:null,scale:n>0},!r&&qq.supportedFeatures.imagePreviews&&(l=this.getFile(e)),null==l?d.failure({container:t,error:"File or URL not found."}):this._imageGenerator.generate(l,t,f).then((function(e){d.success(e)}),(function(e,t){d.failure({container:e,error:t||"Problem generating thumbnail"})}))):d.failure({container:t,error:"Missing image generator module"}),d},getButton:function(e){return this._getButton(this._buttonIdsForFileIds[e])},getEndpoint:function(e){return this._endpointStore.get(e)},getFile:function(e){return this._handler.getFile(e)||null},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getName:function(e){return this._uploadData.retrieve({id:e}).name},getParentId:function(e){var t=this.getUploads({id:e}),n=null;return t&&void 0!==t.parentId&&(n=t.parentId),n},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._uploadData.retrieve({id:e}).size},getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var e=this._currentItemLimit;return e>0?e-this._netUploadedOrQueued:null},getUploads:function(e){return this._uploadData.retrieve(e)},getUuid:function(e){return this._uploadData.retrieve({id:e}).uuid},log:function(e,t){!this._options.debug||t&&"info"!==t?t&&"info"!==t&&qq.log("[Fine Uploader "+qq.version+"] "+e,t):qq.log("[Fine Uploader "+qq.version+"] "+e)},pauseUpload:function(e){var t=this._uploadData.retrieve({id:e});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],t.status)>=0){if(this._handler.pause(e))return this._uploadData.setStatus(e,qq.status.PAUSED),!0;this.log(qq.format("Unable to pause file ID {} ({}).",e,this.getName(e)),"error")}else this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",e,this.getName(e)),"error");return!1},removeFileRef:function(e){this._handler.expunge(e)},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],qq.each(this._buttons,(function(e,t){t.reset()})),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._buttonIdsForFileIds=[],this._pasteHandler&&this._pasteHandler.reset(),this._options.session.refreshOnReset&&this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._totalProgress&&this._totalProgress.reset()},retry:function(e){return this._manualRetry(e)},scaleImage:function(e,t){var n=this;return qq.Scaler.prototype.scaleImage(e,t,{log:qq.bind(n.log,n),getFile:qq.bind(n.getFile,n),uploadData:n._uploadData})},setCustomHeaders:function(e,t){this._customHeadersStore.set(e,t)},setDeleteFileCustomHeaders:function(e,t){this._deleteFileCustomHeadersStore.set(e,t)},setDeleteFileEndpoint:function(e,t){this._deleteFileEndpointStore.set(e,t)},setDeleteFileParams:function(e,t){this._deleteFileParamsStore.set(e,t)},setEndpoint:function(e,t){this._endpointStore.set(e,t)},setForm:function(e){this._updateFormSupportAndParams(e)},setItemLimit:function(e){this._currentItemLimit=e},setName:function(e,t){this._uploadData.updateName(e,t)},setParams:function(e,t){this._paramsStore.set(e,t)},setUuid:function(e,t){return this._uploadData.uuidChanged(e,t)},setStatus:function(e,t){if(!this.getUploads({id:e}))throw new qq.Error(e+" is not a valid file ID.");switch(t){case qq.status.DELETED:this._onDeleteComplete(e,null,!1);break;case qq.status.DELETE_FAILED:this._onDeleteComplete(e,null,!0);break;default:var n="Method setStatus called on '"+name+"' not implemented yet for "+t;throw this.log(n),new qq.Error(n)}},uploadStoredFiles:function(){0===this._storedIds.length?this._itemError("noFilesError"):this._uploadStoredFiles()}},qq.basePrivateApi={_addCannedFile:function(e){var t=this;return this._uploadData.addFile({uuid:e.uuid,name:e.name,size:e.size,status:qq.status.UPLOAD_SUCCESSFUL,onBeforeStatusChange:function(n){e.deleteFileEndpoint&&t.setDeleteFileEndpoint(e.deleteFileEndpoint,n),e.deleteFileParams&&t.setDeleteFileParams(e.deleteFileParams,n),e.thumbnailUrl&&(t._thumbnailUrls[n]=e.thumbnailUrl),t._netUploaded++,t._netUploadedOrQueued++}})},_annotateWithButtonId:function(e,t){qq.isFile(e)&&(e.qqButtonId=this._getButtonId(t))},_batchError:function(e){this._options.callbacks.onError(null,null,e,void 0)},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,cors:this._options.cors,log:qq.bind(e.log,e),onDelete:function(t){e._onDelete(t),e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,n,r){e._onDeleteComplete(t,n,r),e._options.callbacks.onDeleteComplete(t,n,r)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(e.log,e),pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createStore:function(e,t){var n={},r=e,a={},l=t,f=function(e){return qq.isObject(e)?qq.extend({},e):e},d=function(e,t){l&&qq.isObject(t)&&qq.extend(t,qq.isFunction(l)?l():l),a[e]&&qq.extend(t,a[e])};return{set:function(e,t){null==t?(n={},r=f(e)):n[t]=f(e)},get:function(e){var t;return t=null!=e&&n[e]?n[e]:f(r),d(e,t),f(t)},addReadOnly:function(e,t){qq.isObject(n)&&(null===e?qq.isFunction(t)?l=t:(l=l||{},qq.extend(l,t)):(a[e]=a[e]||{},qq.extend(a[e],t)))},remove:function(e){return delete n[e]},reset:function(){n={},a={},r=e}}},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,n,r){e._onUploadStatusChange(t,n,r),e._options.callbacks.onStatusChange(t,n,r),e._maybeAllComplete(t,r),e._totalProgress&&setTimeout((function(){e._totalProgress.onStatusChange(t,n,r)}),0)}})},_createUploadButton:function(e){var t,n=this,r=e.accept||this._options.validation.acceptFiles,a=e.allowedExtensions||this._options.validation.allowedExtensions;return t=new qq.UploadButton({acceptFiles:r,element:e.element,focusClass:this._options.classes.buttonFocus,folders:e.folders,hoverClass:this._options.classes.buttonHover,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash,multiple:!!qq.supportedFeatures.ajaxUploading&&!(n._options.workarounds.iosEmptyVideos&&qq.ios()&&!qq.ios6()&&n._isAllowedExtension(a,".mov"))&&(void 0===e.multiple?n._options.multiple:e.multiple),name:this._options.request.inputName,onChange:function(e){n._onInputChange(e)},title:null==e.title?this._options.text.fileInputTitle:e.title}),this._disposeSupport.addDisposer((function(){t.dispose()})),n._buttons.push(t),t},_createUploadHandler:function(e,t){var n=this,r={},a={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(n.log,n),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(e,t,a,l){a<0||l<0||(r[e]&&r[e].loaded===a&&r[e].total===l||(n._onProgress(e,t,a,l),n._options.callbacks.onProgress(e,t,a,l)),r[e]={loaded:a,total:l})},onComplete:function(e,t,a,l){delete r[e];var f,d=n.getUploads({id:e}).status;d!==qq.status.UPLOAD_SUCCESSFUL&&d!==qq.status.UPLOAD_FAILED&&((f=n._onComplete(e,t,a,l))instanceof qq.Promise?f.done((function(){n._options.callbacks.onComplete(e,t,a,l)})):n._options.callbacks.onComplete(e,t,a,l))},onCancel:function(e,t,r){var a=new qq.Promise;return n._handleCheckedCallback({name:"onCancel",callback:qq.bind(n._options.callbacks.onCancel,n,e,t),onFailure:a.failure,onSuccess:function(){r.then((function(){n._onCancel(e,t)})),a.success()},identifier:e}),a},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(e,t){n._onUpload(e,t),n._options.callbacks.onUpload(e,t)},onUploadChunk:function(e,t,r){n._onUploadChunk(e,r),n._options.callbacks.onUploadChunk(e,t,r)},onUploadChunkSuccess:function(e,t,r,a){n._options.callbacks.onUploadChunkSuccess.apply(n,arguments)},onResume:function(e,t,r){return n._options.callbacks.onResume(e,t,r)},onAutoRetry:function(e,t,r,a){return n._onAutoRetry.apply(n,arguments)},onUuidChanged:function(e,t){n.log("Server requested UUID change from '"+n.getUuid(e)+"' to '"+t+"'"),n.setUuid(e,t)},getName:qq.bind(n.getName,n),getUuid:qq.bind(n.getUuid,n),getSize:qq.bind(n.getSize,n),setSize:qq.bind(n._setSize,n),getDataByUuid:function(e){return n.getUploads({uuid:e})},isQueued:function(e){var t=n.getUploads({id:e}).status;return t===qq.status.QUEUED||t===qq.status.SUBMITTED||t===qq.status.UPLOAD_RETRYING||t===qq.status.PAUSED},getIdsInProxyGroup:n._uploadData.getIdsInProxyGroup,getIdsInBatch:n._uploadData.getIdsInBatch};return qq.each(this._options.request,(function(e,t){a[e]=t})),a.customHeaders=this._customHeadersStore,e&&qq.each(e,(function(e,t){a[e]=t})),new qq.UploadHandlerController(a,t)},_fileOrBlobRejected:function(e){this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.REJECTED)},_formatSize:function(e){if(0===e)return e+this._options.text.sizeSymbols[0];var t=-1;do{e/=1e3,t++}while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_generateExtraButtonSpecs:function(){var e=this;this._extraButtonSpecs={},qq.each(this._options.extraButtons,(function(t,n){var r=n.multiple,a=qq.extend({},e._options.validation,!0),l=qq.extend({},n);void 0===r&&(r=e._options.multiple),l.validation&&qq.extend(a,n.validation,!0),qq.extend(l,{multiple:r,validation:a},!0),e._initExtraButton(l)}))},_getButton:function(e){var t=this._extraButtonSpecs[e];return t?t.element:e===this._defaultButtonId?this._options.button:void 0},_getButtonId:function(e){var t,n,r=e;if(r instanceof qq.BlobProxy&&(r=r.referenceBlob),r&&!qq.isBlob(r)){if(qq.isFile(r))return r.qqButtonId;if("input"===r.tagName.toLowerCase()&&"file"===r.type.toLowerCase())return r.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);if(t=r.getElementsByTagName("input"),qq.each(t,(function(e,t){if("file"===t.getAttribute("type"))return n=t,!1})),n)return n.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_getValidationBase:function(e){var t=this._extraButtonSpecs[e];return t?t.validation:this._options.validation},_getValidationDescriptor:function(e){return e.file instanceof qq.BlobProxy?{name:qq.getFilename(e.file.referenceBlob),size:e.file.referenceBlob.size}:{name:this.getUploads({id:e.id}).name,size:this.getUploads({id:e.id}).size}},_getValidationDescriptors:function(e){var t=this,n=[];return qq.each(e,(function(e,r){n.push(t._getValidationDescriptor(r))})),n},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var e="image/*;capture=camera",t=this._options.camera.button,n=t?this._getButtonId(t):this._defaultButtonId,r=this._options;n&&n!==this._defaultButtonId&&(r=this._extraButtonSpecs[n]),r.multiple=!1,null===r.validation.acceptFiles?r.validation.acceptFiles=e:r.validation.acceptFiles+=","+e,qq.each(this._buttons,(function(e,t){if(t.getButtonId()===n)return t.setMultiple(r.multiple),t.setAcceptFiles(r.acceptFiles),!1}))}},_handleCheckedCallback:function(e){var t=this,n=e.callback();return qq.isGenericPromise(n)?(this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier),n.then((function(n){t.log(e.name+" promise success for "+e.identifier),e.onSuccess(n)}),(function(){e.onFailure?(t.log(e.name+" promise failure for "+e.identifier),e.onFailure()):t.log(e.name+" promise failure for "+e.identifier)}))):(!1!==n?e.onSuccess(n):e.onFailure?(this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback."),e.onFailure()):this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed."),n)},_handleNewFile:function(e,t,n){var r=this,a=qq.getUniqueId(),l=-1,f=qq.getFilename(e),d=e.blob||e,h=this._customNewFileHandler?this._customNewFileHandler:qq.bind(r._handleNewFileGeneric,r);!qq.isInput(d)&&d.size>=0&&(l=d.size),h(d,f,a,l,n,t,this._options.request.uuidName,{uploadData:r._uploadData,paramsStore:r._paramsStore,addFileToHandler:function(e,t){r._handler.add(e,t),r._netUploadedOrQueued++,r._trackButton(e)}})},_handleNewFileGeneric:function(e,t,n,r,a,l){var f=this._uploadData.addFile({uuid:n,name:t,size:r,batchId:l});this._handler.add(f,e),this._trackButton(f),this._netUploadedOrQueued++,a.push({id:f,file:e})},_handlePasteSuccess:function(e,t){var n=e.type.split("/")[1],r=t;null==r&&(r=this._options.paste.defaultName),r+="."+n,this.addFiles({name:r,blob:e})},_handleDeleteSuccess:function(e){if(this.getUploads({id:e}).status!==qq.status.DELETED){var t=this.getName(e);this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(e),this._uploadData.setStatus(e,qq.status.DELETED),this.log("Delete request for '"+t+"' has succeeded.")}},_handleDeleteFailed:function(e,t){var n=this.getName(e);this._uploadData.setStatus(e,qq.status.DELETE_FAILED),this.log("Delete request for '"+n+"' has failed.","error"),t&&void 0!==t.withCredentials?this._options.callbacks.onError(e,n,"Delete request failed with response code "+t.status,t):this._options.callbacks.onError(e,n,"Delete request failed",t)},_initExtraButton:function(e){var t=this._createUploadButton({accept:e.validation.acceptFiles,allowedExtensions:e.validation.allowedExtensions,element:e.element,folders:e.folders,multiple:e.multiple,title:e.fileInputTitle});this._extraButtonSpecs[t.getButtonId()]=e},_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm?(this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_isDeletePossible:function(){return!(!qq.DeleteFileAjaxRequester||!this._options.deleteFile.enabled)&&(!this._options.cors.expected||(!!qq.supportedFeatures.deleteFileCorsXhr||!(!qq.supportedFeatures.deleteFileCorsXdr||!this._options.cors.allowXdr)))},_isAllowedExtension:function(e,t){var n=!1;return!e.length||(qq.each(e,(function(e,r){if(qq.isString(r)){var a=new RegExp("\\."+r+"$","i");if(null!=t.match(a))return n=!0,!1}})),n)},_itemError:function(e,t,n){var r,a,l=this._options.messages[e],f=[],d=[].concat(t),h=d[0],p=this._getButtonId(n),y=this._getValidationBase(p);function w(e,t){l=l.replace(e,t)}return qq.each(y.allowedExtensions,(function(e,t){qq.isString(t)&&f.push(t)})),r=f.join(", ").toLowerCase(),w("{file}",this._options.formatFileName(h)),w("{extensions}",r),w("{sizeLimit}",this._formatSize(y.sizeLimit)),w("{minSizeLimit}",this._formatSize(y.minSizeLimit)),null!==(a=l.match(/(\{\w+\})/g))&&qq.each(a,(function(e,t){w(t,d[e])})),this._options.callbacks.onError(null,h,l,void 0),l},_manualRetry:function(e,t){if(this._onBeforeManualRetry(e))return this._netUploadedOrQueued++,this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),t?t(e):this._handler.retry(e),!0},_maybeAllComplete:function(e,t){var n=this,r=this._getNotFinished();t===qq.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(e):t===qq.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(e),0===r&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout((function(){n._onAllComplete(n._succeededSinceLastAllComplete,n._failedSinceLastAllComplete)}),0)},_maybeHandleIos8SafariWorkaround:function(){var e=this;if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari())throw setTimeout((function(){window.alert(e._options.messages.unsupportedBrowserIos8Safari)}),0),new qq.Error(this._options.messages.unsupportedBrowserIos8Safari)},_maybeParseAndSendUploadError:function(e,t,n,r){if(!n.success)if(r&&200!==r.status&&!n.error)this._options.callbacks.onError(e,t,"XHR returned response code "+r.status,r);else{var a=n.error?n.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,a,r)}},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,n,r,a){var l=this;if(t.length>n)if(e||!this._options.validation.stopOnFirstInvalidFile)setTimeout((function(){var e=l._getValidationDescriptor(t[n]),f=l._getButtonId(t[n].file),d=l._getButton(f);l._handleCheckedCallback({name:"onValidate",callback:qq.bind(l._options.callbacks.onValidate,l,e,d),onSuccess:qq.bind(l._onValidateCallbackSuccess,l,t,n,r,a),onFailure:qq.bind(l._onValidateCallbackFailure,l,t,n,r,a),identifier:"Item '"+e.name+"', size: "+e.size})}),0);else if(!e)for(;n<t.length;n++)l._fileOrBlobRejected(t[n].id)},_onAllComplete:function(e,t){this._totalProgress&&this._totalProgress.onAllComplete(e,t,this._preventRetries),this._options.callbacks.onAllComplete(qq.extend([],e),qq.extend([],t)),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[]},_onAutoRetry:function(e,t,n,r,a){var l=this;if(l._preventRetries[e]=n[l._options.retry.preventRetryResponseProperty],l._shouldAutoRetry(e,t,n)){var f=1e3*l._options.retry.autoAttemptDelay;return l._maybeParseAndSendUploadError.apply(l,arguments),l._options.callbacks.onAutoRetry(e,t,l._autoRetries[e]),l._onBeforeAutoRetry(e,t),l._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),l._retryTimeouts[e]=setTimeout((function(){l.log("Starting retry for "+t+"..."),a?a(e):l._handler.retry(e)}),f),!0}},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onBeforeManualRetry:function(e){var t,n=this._currentItemLimit;return this._preventRetries[e]?(this.log("Retries are forbidden for id "+e,"warn"),!1):this._handler.isValid(e)?(t=this.getName(e),!1!==this._options.callbacks.onManualRetry(e,t)&&(n>0&&this._netUploadedOrQueued+1>n?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+t+"' (id: "+e+")..."),!0))):(this.log("'"+e+"' is not a valid file ID","error"),!1)},_onCancel:function(e,t){this._netUploadedOrQueued--,clearTimeout(this._retryTimeouts[e]);var n=qq.indexOf(this._storedIds,e);!this._options.autoUpload&&n>=0&&this._storedIds.splice(n,1),this._uploadData.setStatus(e,qq.status.CANCELED)},_onComplete:function(e,t,n,r){return n.success?(n.thumbnailUrl&&(this._thumbnailUrls[e]=n.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED),!0===n[this._options.retry.preventRetryResponseProperty]&&(this._preventRetries[e]=!0)),this._maybeParseAndSendUploadError(e,t,n,r),!!n.success},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,n){this.getName(e);n?this._handleDeleteFailed(e,t):this._handleDeleteSuccess(e)},_onInputChange:function(e){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<e.files.length;t++)this._annotateWithButtonId(e.files[t],e);this.addFiles(e.files)}else e.value.length>0&&this.addFiles(e);qq.each(this._buttons,(function(e,t){t.reset()}))},_onProgress:function(e,t,n,r){this._totalProgress&&this._totalProgress.onIndividualProgress(e,n,r)},_onSubmit:function(e,t){},_onSubmitCallbackSuccess:function(e,t){this._onSubmit.apply(this,arguments),this._uploadData.setStatus(e,qq.status.SUBMITTED),this._onSubmitted.apply(this,arguments),this._options.autoUpload?(this._options.callbacks.onSubmitted.apply(this,arguments),this._uploadFile(e)):(this._storeForLater(e),this._options.callbacks.onSubmitted.apply(this,arguments))},_onSubmitDelete:function(e,t,n){var r,a=this.getUuid(e);return t&&(r=qq.bind(t,this,e,a,n)),this._isDeletePossible()?(this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:r||qq.bind(this._deleteHandler.sendDelete,this,e,a,n),identifier:e}),!0):(this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onSubmitted:function(e){},_onTotalProgress:function(e,t){this._options.callbacks.onTotalProgress(e,t)},_onUploadPrep:function(e){},_onUpload:function(e,t){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onUploadChunk:function(e,t){},_onUploadStatusChange:function(e,t,n){n===qq.status.PAUSED&&clearTimeout(this._retryTimeouts[e])},_onValidateBatchCallbackFailure:function(e){var t=this;qq.each(e,(function(e,n){t._fileOrBlobRejected(n.id)}))},_onValidateBatchCallbackSuccess:function(e,t,n,r,a){var l,f=this._currentItemLimit,d=this._netUploadedOrQueued;0===f||d<=f?t.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,e[0],a),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,n,r),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,n,r),identifier:"Item '"+t[0].file.name+"', size: "+t[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(t),l=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,d).replace(/\{itemLimit\}/g,f),this._batchError(l))},_onValidateCallbackFailure:function(e,t,n,r){var a=t+1;this._fileOrBlobRejected(e[t].id,e[t].file.name),this._maybeProcessNextItemAfterOnValidateCallback(!1,e,a,n,r)},_onValidateCallbackSuccess:function(e,t,n,r){var a=this,l=t+1,f=this._getValidationDescriptor(e[t]);this._validateFileOrBlobData(e[t],f).then((function(){a._upload(e[t].id,n,r),a._maybeProcessNextItemAfterOnValidateCallback(!0,e,l,n,r)}),(function(){a._maybeProcessNextItemAfterOnValidateCallback(!1,e,l,n,r)}))},_prepareItemsForUpload:function(e,t,n){if(0!==e.length){var r=this._getValidationDescriptors(e),a=this._getButtonId(e[0].file),l=this._getButton(a);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,r,l),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,r,e,t,n,l),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,e),identifier:"batch validation"})}else this._itemError("noFilesError")},_preventLeaveInProgress:function(){var e=this;this._disposeSupport.attach(window,"beforeunload",(function(t){if(e.getInProgress())return(t=t||window.event).returnValue=e._options.messages.onLeave,e._options.messages.onLeave}))},_refreshSessionData:function(){var e=this,t=this._options.session;qq.Session&&null!=this._options.session.endpoint&&(this._session||(qq.extend(t,{cors:this._options.cors}),t.log=qq.bind(this.log,this),t.addFileRecord=qq.bind(this._addCannedFile,this),this._session=new qq.Session(t)),setTimeout((function(){e._session.refresh().then((function(t,n){e._sessionRequestComplete(),e._options.callbacks.onSessionRequestComplete(t,!0,n)}),(function(t,n){e._options.callbacks.onSessionRequestComplete(t,!1,n)}))}),0))},_sessionRequestComplete:function(){},_setSize:function(e,t){this._uploadData.updateSize(e,t),this._totalProgress&&this._totalProgress.onNewSize(e)},_shouldAutoRetry:function(e,t,n){var r=this._uploadData.retrieve({id:e});return!!(!this._preventRetries[e]&&this._options.retry.enableAuto&&r.status!==qq.status.PAUSED&&(void 0===this._autoRetries[e]&&(this._autoRetries[e]=0),this._autoRetries[e]<this._options.retry.maxAutoAttempts))&&(this._autoRetries[e]+=1,!0)},_storeForLater:function(e){this._storedIds.push(e)},_trackButton:function(e){var t;(t=qq.supportedFeatures.ajaxUploading?this._handler.getFile(e).qqButtonId:this._getButtonId(this._handler.getInput(e)))&&(this._buttonIdsForFileIds[e]=t)},_updateFormSupportAndParams:function(e){this._options.form.element=e,this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm&&(this._paramsStore.addReadOnly(null,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&this.setEndpoint(this._formSupport.newEndpoint))},_upload:function(e,t,n){var r=this.getName(e);t&&this.setParams(t,e),n&&this.setEndpoint(n,e),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,e,r),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,e,r),onFailure:qq.bind(this._fileOrBlobRejected,this,e,r),identifier:e})},_uploadFile:function(e){this._handler.upload(e)||this._uploadData.setStatus(e,qq.status.QUEUED)},_uploadStoredFiles:function(){for(var e,t,n=this;this._storedIds.length;)e=this._storedIds.shift(),this._uploadFile(e);(t=this.getUploads({status:qq.status.SUBMITTING}).length)&&(qq.log("Still waiting for "+t+" files to clear submit queue. Will re-parse stored IDs array shortly."),setTimeout((function(){n._uploadStoredFiles()}),1e3))},_validateFileOrBlobData:function(e,t){var n=this,r=e.file instanceof qq.BlobProxy?e.file.referenceBlob:e.file,a=t.name,l=t.size,f=this._getButtonId(e.file),d=this._getValidationBase(f),h=new qq.Promise;return h.then((function(){}),(function(){n._fileOrBlobRejected(e.id,a)})),qq.isFileOrInput(r)&&!this._isAllowedExtension(d.allowedExtensions,a)?(this._itemError("typeError",a,r),h.failure()):this._options.validation.allowEmpty||0!==l?l>0&&d.sizeLimit&&l>d.sizeLimit?(this._itemError("sizeError",a,r),h.failure()):l>0&&l<d.minSizeLimit?(this._itemError("minSizeError",a,r),h.failure()):(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(r)?new qq.ImageValidation(r,qq.bind(n.log,n)).validate(d.image).then(h.success,(function(e){n._itemError(e+"ImageError",a,r),h.failure()})):h.success(),h):(this._itemError("emptyError",a,r),h.failure())},_wrapCallbacks:function(){var e,t,n;for(n in e=this,t=function(t,n,r){var a;try{return n.apply(e,r)}catch(n){a=n.message||n.toString(),e.log("Caught exception in '"+t+"' callback - "+a,"error")}},this._options.callbacks)!function(){var r,a;r=n,a=e._options.callbacks[r],e._options.callbacks[r]=function(){return t(r,a,arguments)}}()}}}(),function(){"use strict";qq.FineUploaderBasic=function(e){var t=this;this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{customHeaders:{},endpoint:"/server/upload",filenameParam:"qqfilename",forceMultipart:!0,inputName:"qqfile",method:"POST",params:{},paramsInBody:!0,totalFileSizeName:"qqtotalfilesize",uuidName:"qquuid"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0},allowEmpty:!1},callbacks:{onSubmit:function(e,t){},onSubmitted:function(e,t){},onComplete:function(e,t,n,r){},onAllComplete:function(e,t){},onCancel:function(e,t){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,r){},onResume:function(e,t,n){},onProgress:function(e,t,n,r){},onTotalProgress:function(e,t){},onError:function(e,t,n,r){},onAutoRetry:function(e,t,n){},onManualRetry:function(e,t){},onValidateBatch:function(e){},onValidate:function(e){},onSubmitDelete:function(e){},onDelete:function(e){},onDeleteComplete:function(e,t,n){},onPasteReceived:function(e){},onStatusChange:function(e,t,n){},onSessionRequestComplete:function(e,t,n){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,concurrent:{enabled:!1},mandatory:!1,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2e6,success:{endpoint:null}},resume:{enabled:!1,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){return e},text:{defaultResponseError:"Upload failure reason unknown",fileInputTitle:"file input",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{customResizer:null,sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]},workarounds:{iosEmptyVideos:!0,ios8SafariUploads:!0,ios8BrowserCrash:!1}},qq.extend(this._options,e,!0),this._buttons=[],this._extraButtonSpecs={},this._buttonIdsForFileIds=[],this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._initFormSupportAndParams(),this._customHeadersStore=this._createStore(this._options.request.customHeaders),this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders),this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params),this._endpointStore=this._createStore(this._options.request.endpoint),this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint),this._handler=this._createUploadHandler(),this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler(),this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button,title:this._options.text.fileInputTitle}).getButtonId()),this._generateExtraButtonSpecs(),this._handleCameraAccess(),this._options.paste.targetElement&&(qq.PasteSupport?this._pasteHandler=this._createPasteHandler():this.log("Paste support module not found","error")),this._preventLeaveInProgress(),this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this)),this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._scaler=qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this))||{},this._scaler.enabled&&(this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler)),qq.TotalProgress&&qq.supportedFeatures.progressBar&&(this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),(function(e){var n=t._uploadData.retrieve({id:e});return n&&n.size||0}))),this._currentItemLimit=this._options.validation.itemLimit},qq.FineUploaderBasic.prototype=qq.basePublicApi,qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)}(),qq.AjaxRequester=function(e){"use strict";var t,n,r=[],a={},l={acceptHeader:null,validMethods:["PATCH","POST","PUT"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],PATCH:[200,201,202,203,204],POST:[200,201,202,203,204],PUT:[200,201,202,203,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onSend:function(e){},onComplete:function(e,t,n){},onProgress:null};if(qq.extend(l,e),t=l.log,qq.indexOf(l.validMethods,l.method)<0)throw new Error("'"+l.method+"' is not a supported method for this type of request!");function f(e){return l.cors.expected&&void 0===e.withCredentials}function d(e,t){var n=a[e].xhr;return n||(n=t||(l.cors.expected?function(){var e;return(window.XMLHttpRequest||window.ActiveXObject)&&void 0===(e=qq.createXhrInstance()).withCredentials&&((e=new XDomainRequest).onload=function(){},e.onerror=function(){},e.ontimeout=function(){},e.onprogress=function(){}),e}():qq.createXhrInstance()),a[e].xhr=n),n}function h(e){var t=qq.indexOf(r,e),n=l.maxConnections;delete a[e],r.splice(t,1),r.length>=n&&t<n&&y(r[n-1])}function p(e,n){var r,a=d(e),p=l.method,y=!0===n;h(e),y?t(p+" request for "+e+" has failed","error"):f(a)||(r=a.status,qq.indexOf(l.successfulResponseCodes[l.method],r)>=0)||(y=!0,t(p+" request for "+e+" has failed - response code "+a.status,"error")),l.onComplete(e,a,y)}function y(e,r){var h,y=d(e,r),w=l.method,x=function(e){var t,n=a[e].additionalParams,r=l.mandatedParams;return l.paramsStore.get&&(t=l.paramsStore.get(e)),n&&qq.each(n,(function(e,n){(t=t||{})[e]=n})),r&&qq.each(r,(function(e,n){(t=t||{})[e]=n})),t}(e),_=a[e].payload;return l.onSend(e),h=function(e,t,r){var f=l.endpointStore.get(e),d=a[e].addToPath;null!=d&&(f+="/"+d);n&&t&&(f=qq.obj2url(t,f));r&&(f=qq.obj2url(r,f));return f}(e,x,a[e].additionalQueryParams),f(y)?(y.onload=function(e){return function(){p(e)}}(e),y.onerror=function(e){return function(){p(e,!0)}}(e)):y.onreadystatechange=function(e){return function(){4===d(e).readyState&&p(e)}}(e),function(e){var t=l.onProgress;t&&(d(e).upload.onprogress=function(n){n.lengthComputable&&t(e,n.loaded,n.total)})}(e),y.open(w,h,!0),l.cors.expected&&l.cors.sendCredentials&&!f(y)&&(y.withCredentials=!0),function(e){var t=d(e),n=l.customHeaders,r=a[e].additionalHeaders||{},h=l.method,p={};f(t)||(l.acceptHeader&&t.setRequestHeader("Accept",l.acceptHeader),l.allowXRequestedWithAndCacheControl&&(l.cors.expected&&qq.indexOf(["GET","POST","HEAD"],l.method)>=0&&(y=!1,qq.each(y,(function(e,t){if(qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],t)<0)return y=!0,!1})),!y)||(t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Cache-Control","no-cache"))),!l.contentType||"POST"!==h&&"PUT"!==h||t.setRequestHeader("Content-Type",l.contentType),qq.extend(p,qq.isFunction(n)?n(e):n),qq.extend(p,r),qq.each(p,(function(e,n){t.setRequestHeader(e,n)})));var y}(e),t("Sending "+w+" request for "+e),_?y.send(_):n||!x?y.send():x&&l.contentType&&l.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?y.send(qq.obj2url(x,"")):x&&l.contentType&&l.contentType.toLowerCase().indexOf("application/json")>=0?y.send(JSON.stringify(x)):y.send(x),y}n="GET"===l.method||"DELETE"===l.method,qq.extend(this,{initTransport:function(e){var t,n,f,d,h,p;return{withPath:function(e){return t=e,this},withParams:function(e){return n=e,this},withQueryParams:function(e){return p=e,this},withHeaders:function(e){return f=e,this},withPayload:function(e){return d=e,this},withCacheBuster:function(){return h=!0,this},send:function(w){return h&&qq.indexOf(["GET","DELETE"],l.method)>=0&&(n.qqtimestamp=(new Date).getTime()),function(e,t,n,f,d,h,p){if(a[e]={addToPath:n,additionalParams:f,additionalQueryParams:d,additionalHeaders:h,payload:p},r.push(e)<=l.maxConnections)return y(e,t)}(e,w,t,n,p,f,d)}}},canceled:function(e){h(e)}})},qq.UploadHandler=function(e){"use strict";var t=e.proxy,n={},r=t.onCancel,a=t.getName;qq.extend(this,{add:function(e,t){n[e]=t,n[e].temp={}},cancel:function(e){var t=this,l=new qq.Promise;r(e,a(e),l).then((function(){t.isValid(e)&&(n[e].canceled=!0,t.expunge(e)),l.success()}))},expunge:function(e){delete n[e]},getThirdPartyFileId:function(e){return n[e].key},isValid:function(e){return void 0!==n[e]},reset:function(){n={}},_getFileState:function(e){return n[e]},_setThirdPartyFileId:function(e,t){n[e].key=t},_wasCanceled:function(e){return!!n[e].canceled}})},qq.UploadHandlerController=function(e,t){"use strict";var n,r,a,l,f=this,d=!1,h=!1,p={paramsStore:{},maxConnections:3,chunking:{enabled:!1,multiple:{enabled:!1}},log:function(e,t){},onProgress:function(e,t,n,r){},onComplete:function(e,t,n,r){},onCancel:function(e,t){},onUploadPrep:function(e){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,r){},onAutoRetry:function(e,t,n,r){},onResume:function(e,t,n){},onUuidChanged:function(e,t){},getName:function(e){},setSize:function(e,t){},isQueued:function(e){},getIdsInProxyGroup:function(e){},getIdsInBatch:function(e){}},y={done:function(e,t,n,r){var l=a._getChunkData(e,t);a._getFileState(e).attemptingResume=!1,delete a._getFileState(e).temp.chunkProgress[t],a._getFileState(e).loaded+=l.size,p.onUploadChunkSuccess(e,a._getChunkDataForCallback(l),n,r)},finalize:function(e){var t=p.getSize(e),n=p.getName(e);r("All chunks have been uploaded for "+e+" - finalizing...."),a.finalizeChunks(e).then((function(l,f){r("Finalize successful for "+e);var d=_.normalizeResponse(l,!0);p.onProgress(e,n,t,t),a._maybeDeletePersistedChunkData(e),_.cleanup(e,d,f)}),(function(t,a){var l=_.normalizeResponse(t,!1);r("Problem finalizing chunks for file ID "+e+" - "+l.error,"error"),l.reset&&y.reset(e),p.onAutoRetry(e,n,l,a)||_.cleanup(e,l,a)}))},handleFailure:function(e,t,n,l){var f=p.getName(t);r("Chunked upload request failed for "+t+", chunk "+e),a.clearCachedChunk(t,e);var d,x=_.normalizeResponse(n,!1);x.reset?y.reset(t):(d=qq.indexOf(a._getFileState(t).chunking.inProgress,e))>=0&&(a._getFileState(t).chunking.inProgress.splice(d,1),a._getFileState(t).chunking.remaining.unshift(e)),a._getFileState(t).temp.ignoreFailure||(h&&(a._getFileState(t).temp.ignoreFailure=!0,r(qq.format("Going to attempt to abort these chunks: {}. These are currently in-progress: {}.",JSON.stringify(Object.keys(a._getXhrs(t))),JSON.stringify(a._getFileState(t).chunking.inProgress))),qq.each(a._getXhrs(t),(function(e,n){r(qq.format("Attempting to abort file {}.{}. XHR readyState {}. ",t,e,n.readyState)),n.abort(),n._cancelled=!0})),a.moveInProgressToRemaining(t),w.free(t,!0)),p.onAutoRetry(t,f,x,l)||_.cleanup(t,x,l))},hasMoreParts:function(e){return!!a._getFileState(e).chunking.remaining.length},nextPart:function(e){var t=a._getFileState(e).chunking.remaining.shift();return t>=a._getTotalChunks(e)&&(t=null),t},reset:function(e){r("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+e,"error"),a._maybeDeletePersistedChunkData(e),a.reevaluateChunking(e),a._getFileState(e).loaded=0},sendNext:function(e){var t=p.getSize(e),n=p.getName(e),l=y.nextPart(e),f=a._getChunkData(e,l),d=a._getFileState(e).attemptingResume,x=a._getFileState(e).chunking.inProgress||[];null==a._getFileState(e).loaded&&(a._getFileState(e).loaded=0),d&&!1===p.onResume(e,n,f)&&(y.reset(e),l=y.nextPart(e),f=a._getChunkData(e,l),d=!1),null==l&&0===x.length?y.finalize(e):(r(qq.format("Sending chunked upload request for item {}.{}, bytes {}-{} of {}.",e,l,f.start+1,f.end,t)),p.onUploadChunk(e,n,a._getChunkDataForCallback(f)),x.push(l),a._getFileState(e).chunking.inProgress=x,h&&w.open(e,l),h&&w.available()&&a._getFileState(e).chunking.remaining.length&&y.sendNext(e),0===f.blob.size?(r(qq.format("Chunk {} for file {} will not be uploaded, zero sized chunk.",l,e),"error"),y.handleFailure(l,e,"File is no longer available",null)):a.uploadChunk(e,l,d).then((function(t,n){r("Chunked upload request succeeded for "+e+", chunk "+l),a.clearCachedChunk(e,l);var f=a._getFileState(e).chunking.inProgress||[],d=_.normalizeResponse(t,!0),h=qq.indexOf(f,l);r(qq.format("Chunk {} for file {} uploaded successfully.",l,e)),y.done(e,l,d,n),h>=0&&f.splice(h,1),a._maybePersistChunkedState(e),y.hasMoreParts(e)||0!==f.length?y.hasMoreParts(e)?y.sendNext(e):r(qq.format("File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}",e,JSON.stringify(f))):y.finalize(e)}),(function(t,n){y.handleFailure(l,e,t,n)})).done((function(){a.clearXhr(e,l)})))}},w={_open:[],_openChunks:{},_waiting:[],available:function(){var e=p.maxConnections,t=0,n=0;return qq.each(w._openChunks,(function(e,r){t++,n+=r.length})),e-(w._open.length-t+n)},free:function(e,t){var n,l=!t,f=qq.indexOf(w._waiting,e),d=qq.indexOf(w._open,e);delete w._openChunks[e],_.getProxyOrBlob(e)instanceof qq.BlobProxy&&(r("Generated blob upload has ended for "+e+", disposing generated blob."),delete a._getFileState(e).file),f>=0?w._waiting.splice(f,1):l&&d>=0&&(w._open.splice(d,1),(n=w._waiting.shift())>=0&&(w._open.push(n),_.start(n)))},getWaitingOrConnected:function(){var e=[];return qq.each(w._openChunks,(function(t,n){n&&n.length&&e.push(parseInt(t))})),qq.each(w._open,(function(t,n){w._openChunks[n]||e.push(parseInt(n))})),e=e.concat(w._waiting)},isUsingConnection:function(e){return qq.indexOf(w._open,e)>=0},open:function(e,t){return null==t&&w._waiting.push(e),!!w.available()&&(null==t?(w._waiting.pop(),w._open.push(e)):((n=w._openChunks[e]||[]).push(t),w._openChunks[e]=n),!0);var n},reset:function(){w._waiting=[],w._open=[]}},x=function(e,t){a._getFileState(e).loaded=0,r("Sending simple upload request for "+e),a.uploadFile(e).then((function(n,a){r("Simple upload request succeeded for "+e);var l=_.normalizeResponse(n,!0),f=p.getSize(e);p.onProgress(e,t,f,f),_.maybeNewUuid(e,l),_.cleanup(e,l,a)}),(function(n,a){r("Simple upload request failed for "+e);var l=_.normalizeResponse(n,!1);p.onAutoRetry(e,t,l,a)||_.cleanup(e,l,a)}))},_={cancel:function(e){r("Cancelling "+e),p.paramsStore.remove(e),w.free(e)},cleanup:function(e,t,n){var r=p.getName(e);p.onComplete(e,r,t,n),a._getFileState(e)&&a._clearXhrs&&a._clearXhrs(e),w.free(e)},getProxyOrBlob:function(e){return a.getProxy&&a.getProxy(e)||a.getFile&&a.getFile(e)},initHandler:function(){var e=t?qq[t]:qq.traditional,n=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";(a=new e[n+"UploadHandler"](p,{getDataByUuid:p.getDataByUuid,getName:p.getName,getSize:p.getSize,getUuid:p.getUuid,log:r,onCancel:p.onCancel,onProgress:p.onProgress,onUuidChanged:p.onUuidChanged}))._removeExpiredChunkingRecords&&a._removeExpiredChunkingRecords()},isDeferredEligibleForUpload:function(e){return p.isQueued(e)},maybeDefer:function(e,t){return t&&!a.getFile(e)&&t instanceof qq.BlobProxy?(p.onUploadPrep(e),r("Attempting to generate a blob on-demand for "+e),t.create().then((function(t){r("Generated an on-demand blob for "+e),a.updateBlob(e,t),p.setSize(e,t.size),a.reevaluateChunking(e),_.maybeSendDeferredFiles(e)}),(function(t){var a={};t&&(a.error=t),r(qq.format("Failed to generate blob for ID {}.  Error message: {}.",e,t),"error"),p.onComplete(e,p.getName(e),qq.extend(a,n),null),_.maybeSendDeferredFiles(e),w.free(e)})),!1):_.maybeSendDeferredFiles(e)},maybeSendDeferredFiles:function(e){var t=p.getIdsInProxyGroup(e),n=!1;return t&&t.length?(r("Maybe ready to upload proxy group file "+e),qq.each(t,(function(t,r){if(_.isDeferredEligibleForUpload(r)&&a.getFile(r))n=r===e,_.now(r);else if(_.isDeferredEligibleForUpload(r))return!1}))):(n=!0,_.now(e)),n},maybeNewUuid:function(e,t){void 0!==t.newUuid&&p.onUuidChanged(e,t.newUuid)},normalizeResponse:function(e,t){var n=e;return qq.isObject(e)||(n={},qq.isString(e)&&!t&&(n.error=e)),n.success=t,n},now:function(e){var t=p.getName(e);if(!f.isValid(e))throw new qq.Error(e+" is not a valid file ID to upload!");p.onUpload(e,t),d&&a._shouldChunkThisFile(e)?y.sendNext(e):x(e,t)},start:function(e){var t=_.getProxyOrBlob(e);return t?_.maybeDefer(e,t):(_.now(e),!0)}};qq.extend(this,{add:function(e,t){a.add.apply(this,arguments)},upload:function(e){return!!w.open(e)&&_.start(e)},retry:function(e){return h&&(a._getFileState(e).temp.ignoreFailure=!1),w.isUsingConnection(e)?_.start(e):f.upload(e)},cancel:function(e){var t=a.cancel(e);qq.isGenericPromise(t)?t.then((function(){_.cancel(e)})):!1!==t&&_.cancel(e)},cancelAll:function(){var e,t=w.getWaitingOrConnected();if(t.length)for(e=t.length-1;e>=0;e--)f.cancel(t[e]);w.reset()},getFile:function(e){return a.getProxy&&a.getProxy(e)?a.getProxy(e).referenceBlob:a.getFile&&a.getFile(e)},isProxied:function(e){return!(!a.getProxy||!a.getProxy(e))},getInput:function(e){if(a.getInput)return a.getInput(e)},reset:function(){r("Resetting upload handler"),f.cancelAll(),w.reset(),a.reset()},expunge:function(e){if(f.isValid(e))return a.expunge(e)},isValid:function(e){return a.isValid(e)},getResumableFilesData:function(){return a.getResumableFilesData?a.getResumableFilesData():[]},getThirdPartyFileId:function(e){if(f.isValid(e))return a.getThirdPartyFileId(e)},pause:function(e){return!!(f.isResumable(e)&&a.pause&&f.isValid(e)&&a.pause(e))&&(w.free(e),a.moveInProgressToRemaining(e),!0)},isResumable:function(e){return!!a.isResumable&&a.isResumable(e)}}),qq.extend(p,e),r=p.log,d=p.chunking.enabled&&qq.supportedFeatures.chunking,h=d&&p.chunking.concurrent.enabled,(l={})[p.preventRetryParam]=!0,n=l,_.initHandler()},qq.WindowReceiveMessage=function(e){"use strict";var t={};qq.extend({log:function(e,t){}},e),qq.extend(this,{receiveMessage:function(e,n){window.postMessage?t[e]=qq(window).attach("message",(function(e){n(e.data)})):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(e){if(window.postMessage){var n=t[e];n&&n()}}})},qq.FormUploadHandler=function(e){"use strict";var t=e.options,n=this,r=e.proxy,a=qq.getUniqueId(),l={},f={},d={},h=t.isCors,p=t.inputName,y=r.getUuid,w=r.log,x=new qq.WindowReceiveMessage({log:w});function _(e){return e.split("_")[0]}qq.extend(this,new qq.UploadHandler(e)),qq.override(this,(function(e){return{add:function(t,n){e.add(t,{input:n}),n.setAttribute("name",p),n.parentNode&&qq(n).remove()},expunge:function(t){!function(e){delete f[e],h&&(clearTimeout(d[e]),delete d[e],x.stopReceivingMessages(e));var t=document.getElementById(n._getIframeName(e));t&&(t.setAttribute("src","javascript:false;"),qq(t).remove())}(t),e.expunge(t)},isValid:function(t){return e.isValid(t)&&void 0!==n._getFileState(t).input}}})),qq.extend(this,{getInput:function(e){return n._getFileState(e).input},_attachLoadEvent:function(e,t){var r;h?function(e,t){var r=e.id,a=_(r),h=y(a);l[h]=t,f[a]=qq(e).attach("load",(function(){n.getInput(a)&&(w("Received iframe load event for CORS upload request (iframe name "+r+")"),d[r]=setTimeout((function(){var e="No valid message received from loaded iframe for iframe name "+r;w(e,"error"),t({error:e})}),1e3))})),x.receiveMessage(r,(function(e){w("Received the following window message: '"+e+"'"),_(r);var t,a=n._parseJsonResponse(e),f=a.uuid;f&&l[f]?(w("Handling response for iframe name "+r),clearTimeout(d[r]),delete d[r],n._detachLoadEvent(r),t=l[f],delete l[f],x.stopReceivingMessages(r),t(a)):f||w("'"+e+"' does not contain a UUID - ignoring.")}))}(e,t):f[e.id]=qq(e).attach("load",(function(){if(w("Received response for "+e.id),e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML)return}catch(e){w("Error when attempting to access iframe during handling of upload response ("+e.message+")","error"),r={success:!1}}t(r)}}))},_createIframe:function(e){return function(e){var t=qq.toElement("<iframe src='javascript:false;' name='"+e+"' />");return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t}(n._getIframeName(e))},_detachLoadEvent:function(e){void 0!==f[e]&&(f[e](),delete f[e])},_getIframeName:function(e){return e+"_"+a},_initFormForUpload:function(e){var t=e.method,n=e.endpoint,r=e.params,a=e.paramsInBody,l=e.targetName,f=qq.toElement("<form method='"+t+"' enctype='multipart/form-data'></form>"),d=n;return a?qq.obj2Inputs(r,f):d=qq.obj2url(r,n),f.setAttribute("action",d),f.setAttribute("target",l),f.style.display="none",document.body.appendChild(f),f},_parseJsonResponse:function(e){var t={};try{t=qq.parseJson(e)}catch(e){w("Error when attempting to parse iframe upload response ("+e.message+")","error")}return t}})},qq.XhrUploadHandler=function(e){"use strict";var t=this,n=e.options.namespace,r=e.proxy,a=e.options.chunking,l=e.options.resume,f=a&&e.options.chunking.enabled&&qq.supportedFeatures.chunking,d=l&&e.options.resume.enabled&&f&&qq.supportedFeatures.resume,h=r.getName,p=r.getSize,y=r.getUuid,w=r.getEndpoint,x=r.getDataByUuid,_=r.onUuidChanged,S=r.onProgress,k=r.log;function C(e){qq.each(t._getXhrs(e),(function(n,r){var a=t._getAjaxRequester(e,n);r.onreadystatechange=null,r.upload.onprogress=null,r.abort(),a&&a.canceled&&a.canceled(e)}))}qq.extend(this,new qq.UploadHandler(e)),qq.override(this,(function(e){return{add:function(n,r){if(qq.isFile(r)||qq.isBlob(r))e.add(n,{file:r});else{if(!(r instanceof qq.BlobProxy))throw new Error("Passed obj is not a File, Blob, or proxy");e.add(n,{proxy:r})}t._initTempState(n),d&&t._maybePrepareForResume(n)},expunge:function(n){C(n),t._maybeDeletePersistedChunkData(n),t._clearXhrs(n),e.expunge(n)}}})),qq.extend(this,{clearCachedChunk:function(e,n){delete t._getFileState(e).temp.cachedChunks[n]},clearXhr:function(e,n){var r=t._getFileState(e).temp;r.xhrs&&delete r.xhrs[n],r.ajaxRequesters&&delete r.ajaxRequesters[n]},finalizeChunks:function(e,n){var r=t._getTotalChunks(e)-1,a=t._getXhr(e,r);return n?(new qq.Promise).success(n(a),a):(new qq.Promise).success({},a)},getFile:function(e){return t.isValid(e)&&t._getFileState(e).file},getProxy:function(e){return t.isValid(e)&&t._getFileState(e).proxy},getResumableFilesData:function(){var e=[];return t._iterateResumeRecords((function(n,r){t.moveInProgressToRemaining(null,r.chunking.inProgress,r.chunking.remaining);var a={name:r.name,remaining:r.chunking.remaining,size:r.size,uuid:r.uuid};r.key&&(a.key=r.key),e.push(a)})),e},isResumable:function(e){return!!a&&t.isValid(e)&&!t._getFileState(e).notResumable},moveInProgressToRemaining:function(e,n,r){var a=n||t._getFileState(e).chunking.inProgress,l=r||t._getFileState(e).chunking.remaining;a&&(k(qq.format("Moving these chunks from in-progress {}, to remaining.",JSON.stringify(a))),a.reverse(),qq.each(a,(function(e,t){l.unshift(t)})),a.length=0)},pause:function(e){if(t.isValid(e))return k(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",e,h(e))),t._getFileState(e).paused=!0,C(e),!0},reevaluateChunking:function(e){if(a&&t.isValid(e)){var n,r,l=t._getFileState(e);if(delete l.chunking,l.chunking={},(n=t._getTotalChunks(e))>1||a.mandatory){for(l.chunking.enabled=!0,l.chunking.parts=n,l.chunking.remaining=[],r=0;r<n;r++)l.chunking.remaining.push(r);t._initTempState(e)}else l.chunking.enabled=!1}},updateBlob:function(e,n){t.isValid(e)&&(t._getFileState(e).file=n)},_clearXhrs:function(e){var n=t._getFileState(e).temp;qq.each(n.ajaxRequesters,(function(e){delete n.ajaxRequesters[e]})),qq.each(n.xhrs,(function(e){delete n.xhrs[e]}))},_createXhr:function(e,n){return t._registerXhr(e,n,qq.createXhrInstance())},_getAjaxRequester:function(e,n){var r=null==n?-1:n;return t._getFileState(e).temp.ajaxRequesters[r]},_getChunkData:function(e,n){var r=a.partSize,l=p(e),f=t.getFile(e),d=r*n,h=d+r>=l?l:d+r,y=t._getTotalChunks(e),w=this._getFileState(e).temp.cachedChunks,x=w[n]||qq.sliceBlob(f,d,h);return w[n]=x,{part:n,start:d,end:h,count:y,blob:x,size:h-d}},_getChunkDataForCallback:function(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}},_getLocalStorageId:function(e){var t=h(e),r=p(e),l=a.partSize,f=w(e);return qq.format("qq{}resume{}-{}-{}-{}-{}",n,"5.0",t,r,l,f)},_getMimeType:function(e){return t.getFile(e).type},_getPersistableData:function(e){return t._getFileState(e).chunking},_getTotalChunks:function(e){if(a){var t=p(e),n=a.partSize;return Math.ceil(t/n)}},_getXhr:function(e,n){var r=null==n?-1:n;return t._getFileState(e).temp.xhrs[r]},_getXhrs:function(e){return t._getFileState(e).temp.xhrs},_iterateResumeRecords:function(e){d&&qq.each(localStorage,(function(t,r){if(0===t.indexOf(qq.format("qq{}resume",n))){var a=JSON.parse(r);e(t,a)}}))},_initTempState:function(e){t._getFileState(e).temp={ajaxRequesters:{},chunkProgress:{},xhrs:{},cachedChunks:{}}},_markNotResumable:function(e){t._getFileState(e).notResumable=!0},_maybeDeletePersistedChunkData:function(e){var n;return!!(d&&t.isResumable(e)&&(n=t._getLocalStorageId(e))&&localStorage.getItem(n))&&(localStorage.removeItem(n),!0)},_maybePrepareForResume:function(e){var n,r,a=t._getFileState(e);d&&void 0===a.key&&(n=t._getLocalStorageId(e),(r=localStorage.getItem(n))&&(r=JSON.parse(r),x(r.uuid)?t._markNotResumable(e):(k(qq.format("Identified file with ID {} and name of {} as resumable.",e,h(e))),_(e,r.uuid),a.key=r.key,a.chunking=r.chunking,a.loaded=r.loaded,a.attemptingResume=!0,t.moveInProgressToRemaining(e))))},_maybePersistChunkedState:function(e){var n,r,a=t._getFileState(e);if(d&&t.isResumable(e)){n=t._getLocalStorageId(e),r={name:h(e),size:p(e),uuid:y(e),key:a.key,chunking:a.chunking,loaded:a.loaded,lastUpdated:Date.now()};try{localStorage.setItem(n,JSON.stringify(r))}catch(t){k(qq.format("Unable to save resume data for '{}' due to error: '{}'.",e,t.toString()),"warn")}}},_registerProgressHandler:function(e,n,r){var a=t._getXhr(e,n),l=h(e),f={simple:function(t,n){var r=p(e);S(e,l,t===n?r:t>=r?r-1:t,r)},chunked:function(a,f){var d=t._getFileState(e).temp.chunkProgress,h=t._getFileState(e).loaded,y=a,w=f,x=p(e),_=y-(w-r),k=h;d[n]=_,qq.each(d,(function(e,t){k+=t})),S(e,l,k,x)}};a.upload.onprogress=function(e){e.lengthComputable&&f[null==r?"simple":"chunked"](e.loaded,e.total)}},_registerXhr:function(e,n,r,a){var l=null==n?-1:n,f=t._getFileState(e).temp;return f.xhrs=f.xhrs||{},f.ajaxRequesters=f.ajaxRequesters||{},f.xhrs[l]=r,a&&(f.ajaxRequesters[l]=a),r},_removeExpiredChunkingRecords:function(){var e=l.recordsExpireIn;t._iterateResumeRecords((function(t,n){var r=new Date(n.lastUpdated);r.setDate(r.getDate()+e),r.getTime()<=Date.now()&&(k("Removing expired resume record with key "+t),localStorage.removeItem(t))}))},_shouldChunkThisFile:function(e){var n=t._getFileState(e);return n.chunking||t.reevaluateChunking(e),n.chunking.enabled}})},qq.DeleteFileAjaxRequester=function(e){"use strict";var t,n={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:function(e){return{}},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onDelete:function(e){},onDeleteComplete:function(e,t,n){}};qq.extend(n,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:n.method,endpointStore:n.endpointStore,paramsStore:n.paramsStore,mandatedParams:"POST"===n.method.toUpperCase()?{_method:"DELETE"}:{},maxConnections:n.maxConnections,customHeaders:function(e){return n.customHeaders.get(e)},log:n.log,onSend:n.onDelete,onComplete:n.onDeleteComplete,cors:n.cors})),qq.extend(this,{sendDelete:function(e,r,a){var l=a||{};n.log("Submitting delete file request for "+e),"DELETE"===n.method?t.initTransport(e).withPath(r).withParams(l).send():(l[n.uuidParamName]=r,t.initTransport(e).withParams(l).send())}})},function(){function e(e,n,r,a,l){var f,d=e.naturalWidth,h=e.naturalHeight,p=a.width,y=a.height,w=r.getContext("2d"),x=new qq.Promise;return w.save(),a.resize?function(e){var n=e.blob,r=e.image,a=e.imageHeight,l=e.imageWidth,f=e.orientation,d=new qq.Promise,h=e.resize,p=document.createElement("canvas"),y=p.getContext("2d"),w=e.canvas,x=e.targetHeight,_=e.targetWidth;return t(p,l,a,f),w.height=x,w.width=_,y.drawImage(r,0,0),h({blob:n,height:x,image:r,sourceCanvas:p,targetCanvas:w,width:_}).then((function(){w.qqImageRendered&&w.qqImageRendered(),d.success()}),d.failure),d}({blob:n,canvas:r,image:e,imageHeight:h,imageWidth:d,orientation:a.orientation,resize:a.resize,targetHeight:y,targetWidth:p}):(qq.supportedFeatures.unlimitedScaledImageSize||(f=function(e){var t=5241e3;if(!qq.ios())throw new qq.Error("Downsampled dimensions can only be reliably calculated for iOS!");if(e.origHeight*e.origWidth>t)return{newHeight:Math.round(Math.sqrt(t*(e.origHeight/e.origWidth))),newWidth:Math.round(Math.sqrt(t*(e.origWidth/e.origHeight)))}}({origWidth:p,origHeight:y}))&&(qq.log(qq.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",p,y,f.newWidth,f.newHeight),"warn"),p=f.newWidth,y=f.newHeight),t(r,p,y,a.orientation),qq.ios()?function(){(function(e){var t,n=e.naturalWidth,r=e.naturalHeight,a=document.createElement("canvas");return n*r>1048576&&(a.width=a.height=1,(t=a.getContext("2d")).drawImage(e,1-n,0),0===t.getImageData(0,0,1,1).data[3])})(e)&&(d/=2,h/=2);var t,n,r,a=1024,f=document.createElement("canvas"),x=l?function(e,t,n){var r,a,l,f=document.createElement("canvas"),d=0,h=n,p=n;for(f.width=1,f.height=n,(r=f.getContext("2d")).drawImage(e,0,0),a=r.getImageData(0,0,1,n).data;p>d;)0===a[4*(p-1)+3]?h=p:d=p,p=h+d>>1;return 0==(l=p/n)?1:l}(e,0,h):1,_=Math.ceil(a*p/d),S=Math.ceil(a*y/h/x),k=0,C=0;for(f.width=f.height=a,t=f.getContext("2d");k<h;){for(n=0,r=0;n<d;)t.clearRect(0,0,a,a),t.drawImage(e,-n,-k),w.drawImage(f,0,0,a,a,r,C,_,S),n+=a,r+=_;k+=a,C+=S}w.restore(),f=t=null}():w.drawImage(e,0,0,p,y),r.qqImageRendered&&r.qqImageRendered(),x.success(),x)}function t(e,t,n,r){switch(r){case 5:case 6:case 7:case 8:e.width=n,e.height=t;break;default:e.width=t,e.height=n}var a=e.getContext("2d");switch(r){case 2:a.translate(t,0),a.scale(-1,1);break;case 3:a.translate(t,n),a.rotate(Math.PI);break;case 4:a.translate(0,n),a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI),a.translate(0,-n);break;case 7:a.rotate(.5*Math.PI),a.translate(t,-n),a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-t,0)}}function n(e,t){var n=this;window.Blob&&e instanceof Blob&&function(){var t=new Image,r=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!r)throw Error("No createObjectURL function found to create blob url");t.src=r.createObjectURL(e),n.blob=e,e=t}(),e.naturalWidth||e.naturalHeight||(e.onload=function(){var e=n.imageLoadListeners;e&&(n.imageLoadListeners=null,setTimeout((function(){for(var t=0,n=e.length;t<n;t++)e[t]()}),0))},e.onerror=t,this.imageLoadListeners=[]),this.srcImage=e}n.prototype.render=function(t,n){n=n||{};var r,a,l=this,f=this.srcImage.naturalWidth,d=this.srcImage.naturalHeight,h=n.width,p=n.height,y=n.maxWidth,w=n.maxHeight,x=!this.blob||"image/jpeg"===this.blob.type,_=t.tagName.toLowerCase();this.imageLoadListeners?this.imageLoadListeners.push((function(){l.render(t,n)})):(h&&!p?p=d*h/f<<0:p&&!h?h=f*p/d<<0:(h=f,p=d),y&&h>y&&(p=d*(h=y)/f<<0),w&&p>w&&(h=f*(p=w)/d<<0),r={width:h,height:p},qq.each(n,(function(e,t){r[e]=t})),"img"===_?(a=t.src,function(t,n,r,a){var l=document.createElement("canvas"),f=r.mime||"image/jpeg",d=new qq.Promise;return e(t,n,l,r,a).then((function(){d.success(l.toDataURL(f,r.quality||.8))})),d}(l.srcImage,l.blob,r,x).then((function(e){t.src=e,a===t.src&&t.onload()}))):"canvas"===_&&e(this.srcImage,this.blob,t,r,x),"function"==typeof this.onrender&&this.onrender(t))},qq.MegaPixImage=n}(),qq.ImageGenerator=function(e){"use strict";function t(e){return"img"===e.tagName.toLowerCase()}function n(e){return"canvas"===e.tagName.toLowerCase()}function r(e){var t=e.split("/"),n=t[t.length-1].split("?")[0],r=qq.getExtension(n);switch(r=r&&r.toLowerCase()){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff"}}function a(e){var t,n,r,a=document.createElement("a");return a.href=e,t=a.protocol,r=a.port,n=a.hostname,t.toLowerCase()!==window.location.protocol.toLowerCase()||(n.toLowerCase()!==window.location.hostname.toLowerCase()||r!==window.location.port&&!qq.ie())}function l(r,a){var l=t(r)||n(r);return t(r)?function(t,n){t.onload=function(){t.onload=null,t.onerror=null,n.success(t)},t.onerror=function(){t.onload=null,t.onerror=null,e("Problem drawing thumbnail!","error"),n.failure(t,"Problem drawing thumbnail!")}}(r,a):n(r)?function(e,t){e.qqImageRendered=function(){t.success(e)}}(r,a):(a.failure(r),e(qq.format("Element container of type {} is not supported!",r.tagName),"error")),l}function f(e,t,n,f,d){var h=new Image,p=new qq.Promise;l(h,p),a(e)&&(h.crossOrigin="anonymous"),h.src=e,p.then((function(){l(t,n),new qq.MegaPixImage(h).render(t,{maxWidth:f,maxHeight:f,mime:r(e),resize:d})}),n.failure)}function d(e,t,n,r){l(t,n),qq(t).css({maxWidth:r+"px",maxHeight:r+"px"}),t.src=e}function h(e,r,h){var p,y=new qq.Promise,w=h.scale,x=w?h.maxSize:null;return w&&t(r)?(p=document.createElement("canvas")).getContext&&p.getContext("2d")?a(e)&&void 0===(new Image).crossOrigin?d(e,r,y,x):f(e,r,y,x):d(e,r,y,x):n(r)?f(e,r,y,x):l(r,y)&&(r.src=e),y}qq.extend(this,{generate:function(t,n,r){return qq.isString(t)?(e("Attempting to update thumbnail based on server response."),h(t,n,r||{})):(e("Attempting to draw client-side image preview."),function(t,n,r){var a=new qq.Promise,f=new qq.Identify(t,e),d=r.maxSize,h=null==r.orient||r.orient,p=function(){n.onerror=null,n.onload=null,e("Could not render preview, file may be too large!","error"),a.failure(n,"Browser cannot render image!")};return f.isPreviewable().then((function(f){var y={parse:function(){return(new qq.Promise).success()}},w=h?new qq.Exif(t,e):y,x=new qq.MegaPixImage(t,p);l(n,a)&&w.parse().then((function(e){var t=e&&e.Orientation;x.render(n,{maxWidth:d,maxHeight:d,orientation:t,mime:f,resize:r.customResizeFunction})}),(function(t){e(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",t)),x.render(n,{maxWidth:d,maxHeight:d,mime:f,resize:r.customResizeFunction})}))}),(function(){e("Not previewable"),a.failure(n,"Not previewable")})),a}(t,n,r||{}))}}),this._testing={},this._testing.isImg=t,this._testing.isCanvas=n,this._testing.isCrossOrigin=a,this._testing.determineMimeOfFileName=r},qq.Exif=function(e,t){"use strict";var n=[274],r={274:{name:"Orientation",bytes:2}};function a(e){for(var t=0,n=0;e.length>0;)t+=parseInt(e.substring(0,2),16)*Math.pow(2,n),e=e.substring(2,e.length),n+=8;return t}function l(t,n){var r=t,a=n;return void 0===r&&(r=2,a=new qq.Promise),qq.readBlobToHex(e,r,4).then((function(e){var t,n=/^ffe([0-9])/.exec(e);n?"1"!==n[1]?(t=parseInt(e.slice(4,8),16),l(r+t+2,a)):a.success(r):a.failure("No EXIF header to be found!")})),a}function f(){var t=new qq.Promise;return qq.readBlobToHex(e,0,6).then((function(e){0!==e.indexOf("ffd8")?t.failure("Not a valid JPEG!"):l().then((function(e){t.success(e)}),(function(e){t.failure(e)}))})),t}qq.extend(this,{parse:function(){var l=new qq.Promise,d=function(e){t(qq.format("EXIF header parse failed: '{}' ",e)),l.failure(e)};return f().then((function(f){var h,p;t(qq.format("Moving forward with EXIF header parsing for '{}'",void 0===e.name?"blob":e.name)),(h=f,p=new qq.Promise,qq.readBlobToHex(e,h+10,2).then((function(e){p.success("4949"===e)})),p).then((function(h){t(qq.format("EXIF Byte order is {} endian",h?"little":"big")),function(t,n){var r=new qq.Promise;return qq.readBlobToHex(e,t+18,2).then((function(e){if(n)return r.success(a(e));r.success(parseInt(e,16))})),r}(f,h).then((function(p){t(qq.format("Found {} APP1 directory entries",p)),function(t,n){var r=t+20,a=12*n;return qq.readBlobToHex(e,r,a)}(f,p).then((function(e){var f=function(e){for(var t=[],n=0;n+24<=e.length;)t.push(e.slice(n,n+24)),n+=24;return t}(e),d=function(e,t){var l=qq.extend([],n),f={};return qq.each(t,(function(t,n){var d,h,p,y=n.slice(0,4),w=e?a(y):parseInt(y,16),x=l.indexOf(w);if(x>=0&&(h=r[w].name,p=r[w].bytes,d=n.slice(16,16+2*p),f[h]=e?a(d):parseInt(d,16),l.splice(x,1)),0===l.length)return!1})),f}(h,f);t("Successfully parsed some EXIF tags"),l.success(d)}),d)}),d)}),d)}),d),l}}),this._testing={},this._testing.parseLittleEndian=a},qq.Identify=function(e,t){"use strict";qq.extend(this,{isPreviewable:function(){var n=this,r=new qq.Promise,a=!1,l=void 0===e.name?"blob":e.name;return t(qq.format("Attempting to determine if {} can be rendered in this browser",l)),t("First pass: check type attribute of blob object."),this.isPreviewableSync()?(t("Second pass: check for magic bytes in file header."),qq.readBlobToHex(e,0,4).then((function(e){qq.each(n.PREVIEWABLE_MIME_TYPES,(function(t,n){if(l=e,f=!1,d=[].concat(n),qq.each(d,(function(e,t){if(0===l.indexOf(t))return f=!0,!1})),f)return("image/tiff"!==t||qq.supportedFeatures.tiffPreviews)&&(a=!0,r.success(t)),!1;var l,f,d})),t(qq.format("'{}' is {} able to be rendered in this browser",l,a?"":"NOT")),a||r.failure()}),(function(){t("Error reading file w/ name '"+l+"'.  Not able to be rendered in this browser."),r.failure()}))):r.failure(),r},isPreviewableSync:function(){var n=e.type,r=qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),n)>=0,a=!1,l=void 0===e.name?"blob":e.name;return r&&(a="image/tiff"!==n||qq.supportedFeatures.tiffPreviews),!a&&t(l+" is not previewable in this browser per the blob's type attr"),a}})},qq.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]},qq.ImageValidation=function(e,t){"use strict";this.validate=function(n){var r,a=new qq.Promise;return t("Attempting to validate image."),!function(e){var t=!1;return qq.each(e,(function(e,n){if(n>0)return t=!0,!1})),t}(n)?a.success():(r=new qq.Promise,new qq.Identify(e,t).isPreviewable().then((function(){var n=new Image,a=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;a?(n.onerror=function(){t("Cannot determine dimensions for image.  May be too large.","error"),r.failure()},n.onload=function(){r.success({width:this.width,height:this.height})},n.src=a.createObjectURL(e)):(t("No createObjectURL function available to generate image URL!","error"),r.failure())}),r.failure),r).then((function(e){var t=function(e,t){var n;return qq.each(e,(function(e,r){if(r>0){var a=/(max|min)(Width|Height)/.exec(e),l=a[2].charAt(0).toLowerCase()+a[2].slice(1),f=t[l];switch(a[1]){case"min":if(f<r)return n=e,!1;break;case"max":if(f>r)return n=e,!1}}})),n}(n,e);t?a.failure(t):a.success()}),a.success),a}},qq.Session=function(e){"use strict";var t={endpoint:null,params:{},customHeaders:{},cors:{},addFileRecord:function(e){},log:function(e,t){}};function n(e,n,r,a){var l=!1;(n=n&&function(e){if(qq.isArray(e))return!0;t.log("Session response is not an array.","error")}(e))&&qq.each(e,(function(e,n){if(null==n.uuid)l=!0,t.log(qq.format("Session response item {} did not include a valid UUID - ignoring.",e),"error");else if(null==n.name)l=!0,t.log(qq.format("Session response item {} did not include a valid name - ignoring.",e),"error");else try{return t.addFileRecord(n),!0}catch(e){l=!0,t.log(e.message,"error")}return!1})),a[n&&!l?"success":"failure"](e,r)}qq.extend(t,e,!0),this.refresh=function(){var e=new qq.Promise,r=qq.extend({},t);return new qq.SessionAjaxRequester(qq.extend(r,{onComplete:function(t,r,a){n(t,r,a,e)}})).queryServer(),e}},qq.SessionAjaxRequester=function(e){"use strict";var t,n={endpoint:null,customHeaders:{},params:{},cors:{expected:!1,sendCredentials:!1},onComplete:function(e,t,n){},log:function(e,t){}};qq.extend(n,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["GET"],method:"GET",endpointStore:{get:function(){return n.endpoint}},customHeaders:n.customHeaders,log:n.log,onComplete:function(e,t,r){var a=null;if(null!=t.responseText)try{a=qq.parseJson(t.responseText)}catch(e){n.log("Problem parsing session response: "+e.message,"error"),r=!0}n.onComplete(a,!r,t)},cors:n.cors})),qq.extend(this,{queryServer:function(){var e=qq.extend({},n.params);n.log("Session query request."),t.initTransport("sessionRefresh").withParams(e).withCacheBuster().send()}})},qq.Scaler=function(e,t){"use strict";var n=e.customResizer,r=e.sendOriginal,a=e.orient,l=e.defaultType,f=e.defaultQuality/100,d=e.failureText,h=e.includeExif,p=this._getSortedSizes(e.sizes);qq.extend(this,{enabled:qq.supportedFeatures.scaling&&p.length>0,getFileRecords:function(e,y,w){var x=this,_=[],S=w.blob?w.blob:w;return new qq.Identify(S,t).isPreviewableSync()?(qq.each(p,(function(e,r){var p=x._determineOutputType({defaultType:l,requestedType:r.type,refType:S.type});_.push({uuid:qq.getUniqueId(),name:x._getName(y,{name:r.name,type:p,refType:S.type}),blob:new qq.BlobProxy(S,qq.bind(x._generateScaledImage,x,{customResizeFunction:n,maxSize:r.maxSize,orient:a,type:p,quality:f,failedText:d,includeExif:h,log:t}))})})),_.push({uuid:e,name:y,size:S.size,blob:r?S:null})):_.push({uuid:e,name:y,size:S.size,blob:S}),_},handleNewFile:function(e,t,n,r,a,l,f,d){e.qqButtonId||e.blob&&e.blob.qqButtonId;var h,p=[],y=null,w=d.addFileToHandler,x=d.uploadData,_=d.paramsStore,S=qq.getUniqueId();qq.each(this.getFileRecords(n,t,e),(function(e,t){var n,r=t.size;t.blob instanceof qq.BlobProxy&&(r=-1),n=x.addFile({uuid:t.uuid,name:t.name,size:r,batchId:l,proxyGroupId:S}),t.blob instanceof qq.BlobProxy?p.push(n):y=n,t.blob?(w(n,t.blob),a.push({id:n,file:t.blob})):x.setStatus(n,qq.status.REJECTED)})),null!==y&&(qq.each(p,(function(e,t){var n={qqparentuuid:x.retrieve({id:y}).uuid,qqparentsize:x.retrieve({id:y}).size};n[f]=x.retrieve({id:t}).uuid,x.setParentId(t,y),_.addReadOnly(t,n)})),p.length&&((h={})[f]=x.retrieve({id:y}).uuid,_.addReadOnly(y,h)))}})},qq.extend(qq.Scaler.prototype,{scaleImage:function(e,t,n){"use strict";if(!qq.supportedFeatures.scaling)throw new qq.Error("Scaling is not supported in this browser!");var r=new qq.Promise,a=n.log,l=n.getFile(e),f=n.uploadData.retrieve({id:e}),d=f&&f.name,h=f&&f.uuid,p={customResizer:t.customResizer,sendOriginal:!1,orient:t.orient,defaultType:t.type||null,defaultQuality:t.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:t.maxSize}]},y=new qq.Scaler(p,a);return qq.Scaler&&qq.supportedFeatures.imagePreviews&&l?qq.bind((function(){var t=y.getFileRecords(h,d,l)[0];t&&t.blob instanceof qq.BlobProxy?t.blob.create().then(r.success,r.failure):(a(e+" is not a scalable image!","error"),r.failure())}),this)():(r.failure(),a("Could not generate requested scaled image for "+e+".  Scaling is either not possible in this browser, or the file could not be located.","error")),r},_determineOutputType:function(e){"use strict";var t=e.requestedType,n=e.defaultType,r=e.refType;return n||t?t&&qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES),t)>=0?"image/tiff"===t?qq.supportedFeatures.tiffPreviews?t:n:t:n:"image/jpeg"!==r?"image/png":r},_getName:function(e,t){"use strict";var n=e.lastIndexOf("."),r=t.type||"image/png",a=t.refType,l="",f=qq.getExtension(e),d="";return t.name&&t.name.trim().length&&(d=" ("+t.name+")"),n>=0?(l=e.substr(0,n),a!==r&&(f=r.split("/")[1]),l+=d+"."+f):l=e+d,l},_getSortedSizes:function(e){"use strict";return(e=qq.extend([],e)).sort((function(e,t){return e.maxSize>t.maxSize?1:e.maxSize<t.maxSize?-1:0}))},_generateScaledImage:function(e,t){"use strict";var n=this,r=e.customResizeFunction,a=e.log,l=e.maxSize,f=e.orient,d=e.type,h=e.quality,p=e.failedText,y=e.includeExif&&"image/jpeg"===t.type&&"image/jpeg"===d,w=new qq.Promise,x=new qq.ImageGenerator(a),_=document.createElement("canvas");return a("Attempting to generate scaled version for "+t.name),x.generate(t,_,{maxSize:l,orient:f,customResizeFunction:r}).then((function(){var e=_.toDataURL(d,h),r=function(){a("Success generating scaled version for "+t.name);var n=qq.dataUriToBlob(e);w.success(n)};y?n._insertExifHeader(t,e,a).then((function(t){e=t,r()}),(function(){a("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.","error"),r()})):r()}),(function(){a("Failed attempt to generate scaled version for "+t.name,"error"),w.failure(p)})),w},_insertExifHeader:function(e,t,n){"use strict";var r=new FileReader,a=new qq.Promise,l="";return r.onload=function(){l=r.result,a.success(qq.ExifRestorer.restore(l,t))},r.onerror=function(){n("Problem reading "+e.name+" during attempt to transfer EXIF data to scaled version.","error"),a.failure()},r.readAsDataURL(e),a},_dataUriToBlob:function(e){"use strict";var t,n,r,a;return t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),a=new Uint8Array(r),qq.each(t,(function(e,t){a[e]=t.charCodeAt(0)})),this._createBlob(r,n)},_createBlob:function(e,t){"use strict";var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=n&&new n;return r?(r.append(e),r.getBlob(t)):new Blob([e],{type:t})}}),qq.ExifRestorer=(ExifRestorer={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(e){var t,n,r,a,l,f="",d="",h="",p=0;do{r=(t=e[p++])>>2,a=(3&t)<<4|(n=e[p++])>>4,l=(15&n)<<2|(d=e[p++])>>6,h=63&d,isNaN(n)?l=h=64:isNaN(d)&&(h=64),f=f+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l)+this.KEY_STR.charAt(h),t=n=d="",r=a=l=h=""}while(p<e.length);return f},restore:function(e,t){var n="data:image/jpeg;base64,";if(!e.match(n))return t;var r=this.decode64(e.replace(n,"")),a=this.slice2Segments(r),l=this.exifManipulation(t,a);return n+this.encode64(l)},exifManipulation:function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},getExifArray:function(e){for(var t,n=0;n<e.length;n++)if(255==(t=e[n])[0]&225==t[1])return t;return[]},insertExif:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),a=r.indexOf(255,3),l=r.slice(0,a),f=r.slice(a),d=l;return d=(d=d.concat(t)).concat(f)},slice2Segments:function(e){for(var t=0,n=[];!(255==e[t]&218==e[t+1]);){if(255==e[t]&216==e[t+1])t+=2;else{var r=t+(256*e[t+2]+e[t+3])+2,a=e.slice(t,r);n.push(a),t=r}if(t>e.length)break}return n},decode64:function(e){var t,n,r,a,l="",f="",d=0,h=[];if(/[^A-Za-z0-9\+\/\=]/g.exec(e))throw new Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=this.KEY_STR.indexOf(e.charAt(d++))<<2|(r=this.KEY_STR.indexOf(e.charAt(d++)))>>4,n=(15&r)<<4|(a=this.KEY_STR.indexOf(e.charAt(d++)))>>2,l=(3&a)<<6|(f=this.KEY_STR.indexOf(e.charAt(d++))),h.push(t),64!=a&&h.push(n),64!=f&&h.push(l),t=n=l="",r=a=f=""}while(d<e.length);return h}},ExifRestorer),qq.TotalProgress=function(e,t){"use strict";var n={},r=0,a=0,l=-1,f=-1,d=function(t,n){t===l&&n===f||e(t,n),l=t,f=n},h=function(e){var r=t(e);r>0&&(p(e,0,r),n[e]={loaded:0,total:r})},p=function(e,t,l){var f=n[e]?n[e].loaded:0,h=n[e]?n[e].total:0;-1===t&&-1===l?(r-=f,a-=h):(t&&(r+=t-f),l&&(a+=l-h)),d(r,a)};qq.extend(this,{onAllComplete:function(e,t,n){(0===t.length||function(e,t){var n=!0;return qq.each(e,(function(e,r){if(qq.indexOf(t,r)>=0)return n=!1,!1})),n}(t,n))&&(d(a,a),this.reset())},onStatusChange:function(e,t,r){r===qq.status.CANCELED||r===qq.status.REJECTED?function(e){p(e,-1,-1),delete n[e]}(e):r===qq.status.SUBMITTING&&h(e)},onIndividualProgress:function(e,t,r){p(e,t,r),n[e]={loaded:t,total:r}},onNewSize:function(e){h(e)},reset:function(){n={},r=0,a=0}})},qq.PasteSupport=function(e){"use strict";var t,n;t={targetElement:null,callbacks:{log:function(e,t){},pasteReceived:function(e){}}},qq.extend(t,e),n=qq(t.targetElement).attach("paste",(function(e){var n=e.clipboardData;n&&qq.each(n.items,(function(e,n){if(function(e){return e.type&&0===e.type.indexOf("image/")}(n)){var r=n.getAsFile();t.callbacks.pasteReceived(r)}}))})),qq.extend(this,{reset:function(){n&&n()}})},qq.FormSupport=function(e,t,n){"use strict";var r=this,a=e.interceptSubmit,l=e.element,f=e.autoUpload;function d(e,t){if(!e.checkValidity||e.checkValidity())return!0;n("Form did not pass validation checks - will not upload.","error"),t()}qq.extend(this,{newEndpoint:null,newAutoUpload:f,attachedToForm:!1,getFormInputsAsObject:function(){return null==l?null:r._form2Obj(l)}}),l=function(e){return e&&(qq.isString(e)&&(e=document.getElementById(e)),e&&(n("Attaching to form element."),function(e){e.getAttribute("action")&&(r.newEndpoint=e.getAttribute("action"))}(e),a&&function(e){var n=e.submit;qq(e).attach("submit",(function(r){(r=r||window.event).preventDefault?r.preventDefault():r.returnValue=!1,d(e,n)&&t()})),e.submit=function(){d(e,n)&&t()}}(e))),e}(l),this.attachedToForm=!!l},qq.extend(qq.FormSupport.prototype,{_form2Obj:function(e){"use strict";var t={},n=function(e){return t=e.type,qq.indexOf(["checkbox","radio"],t.toLowerCase())>=0&&!e.checked||e.disabled&&"hidden"!==e.type.toLowerCase();var t};return qq.each(e.elements,(function(e,r){if((qq.isInput(r,!0)||"textarea"===r.tagName.toLowerCase())&&(l=r.type,qq.indexOf(["button","image","reset","submit"],l.toLowerCase())<0)&&!n(r))t[r.name]=r.value;else if("select"===r.tagName.toLowerCase()&&!n(r)){var a=function(e){var t=null;return qq.each(qq(e).children(),(function(e,n){if("option"===n.tagName.toLowerCase()&&n.selected)return t=n.value,!1})),t}(r);null!==a&&(t[r.name]=a)}var l})),t}}),qq.traditional=qq.traditional||{},qq.traditional.FormUploadHandler=function(e,t){"use strict";var n=this,r=t.getName,a=t.getUuid,l=t.log;this.uploadFile=function(t){var f,d=n.getInput(t),h=n._createIframe(t),p=new qq.Promise;return f=function(t,l){var f=e.paramsStore.get(t),d="get"===e.method.toLowerCase()?"GET":"POST",h=e.endpointStore.get(t),p=r(t);return f[e.uuidName]=a(t),f[e.filenameParam]=p,n._initFormForUpload({method:d,endpoint:h,params:f,paramsInBody:e.paramsInBody,targetName:l.name})}(t,h),f.appendChild(d),n._attachLoadEvent(h,(function(r){l("iframe loaded");var a=r||function(e,t){var r,a,f;try{f=(a=t.contentDocument||t.contentWindow.document).body.innerHTML,l("converting iframe's innerHTML to JSON"),l("innerHTML = "+f),f&&f.match(/^<pre/i)&&(f=a.body.firstChild.firstChild.nodeValue),r=n._parseJsonResponse(f)}catch(e){l("Error when attempting to parse form upload response ("+e.message+")","error"),r={success:!1}}return r}(0,h);n._detachLoadEvent(t),e.cors.expected||qq(h).remove(),a.success?p.success(a):p.failure(a)})),l("Sending upload request for "+t),f.submit(),qq(f).remove(),p},qq.extend(this,new qq.FormUploadHandler({options:{isCors:e.cors.expected,inputName:e.inputName},proxy:{onCancel:e.onCancel,getName:r,getUuid:a,log:l}}))},qq.traditional=qq.traditional||{},qq.traditional.XhrUploadHandler=function(e,t){"use strict";var n=this,r=t.getName,a=t.getSize,l=t.getUuid,f=t.log,d=e.forceMultipart||e.paramsInBody,h=new qq.traditional.AllChunksDoneAjaxRequester({cors:e.cors,endpoint:e.chunking.success.endpoint,log:f}),p=function(e,t){var n=new qq.Promise;return t.onreadystatechange=function(){if(4===t.readyState){var r=w(e,t);r.success?n.success(r.response,t):n.failure(r.response,t)}},n},y=function(e,t){return qq.indexOf([200,201,202,203,204],e.status)<0||!t.success||t.reset},w=function(e,t){var n;return f("xhr - server response received for "+e),f("responseText = "+t.responseText),n=x(!0,t),{success:!y(t,n),response:n}},x=function(e,t){var n={};try{f(qq.format("Received response status {} with body: {}",t.status,t.responseText)),n=qq.parseJson(t.responseText)}catch(t){e&&f("Error when attempting to parse xhr response text ("+t.message+")","error")}return n},_=function(t){var f=new qq.Promise;return h.complete(t,n._createXhr(t),function(t){var f=e.paramsStore.get(t),d=r(t),h=a(t);return f[e.uuidName]=l(t),f[e.filenameParam]=d,f[e.totalFileSizeName]=h,f[e.chunking.paramNames.totalParts]=n._getTotalChunks(t),f}(t),e.customHeaders.get(t)).then((function(e){f.success(x(!1,e),e)}),(function(e){f.failure(x(!1,e),e)})),f},S=function(t,n,f,h){var p=new FormData,y=e.method,w=e.endpointStore.get(h),x=r(h),_=a(h);return t[e.uuidName]=l(h),t[e.filenameParam]=x,d&&(t[e.totalFileSizeName]=_),e.paramsInBody||(d||(t[e.inputName]=x),w=qq.obj2url(t,w)),n.open(y,w,!0),e.cors.expected&&e.cors.sendCredentials&&(n.withCredentials=!0),d?(e.paramsInBody&&qq.obj2FormData(t,p),p.append(e.inputName,f),p):f},k=function(t,r){var a=e.customHeaders.get(t),l=n.getFile(t);r.setRequestHeader("Accept","application/json"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Cache-Control","no-cache"),d||(r.setRequestHeader("Content-Type","application/octet-stream"),r.setRequestHeader("X-Mime-Type",l.type)),qq.each(a,(function(e,t){r.setRequestHeader(e,t)}))};qq.extend(this,{uploadChunk:function(t,l,f){var h,y,w,x=n._getChunkData(t,l),_=n._createXhr(t,l);a(t);return h=p(t,_),n._registerProgressHandler(t,l,x.size),function(t,n,l){var f=a(t),h=r(t);n[e.chunking.paramNames.partIndex]=l.part,n[e.chunking.paramNames.partByteOffset]=l.start,n[e.chunking.paramNames.chunkSize]=l.size,n[e.chunking.paramNames.totalParts]=l.count,n[e.totalFileSizeName]=f,d&&(n[e.filenameParam]=h)}(t,w=e.paramsStore.get(t),x),f&&(w[e.resume.paramNames.resuming]=!0),y=S(w,_,x.blob,t),k(t,_),_.send(y),h},uploadFile:function(t){var r,a,l,f,d=n.getFile(t);return a=n._createXhr(t),n._registerProgressHandler(t),r=p(t,a),l=e.paramsStore.get(t),f=S(l,a,d,t),k(t,a),a.send(f),r}}),qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"traditional"},e),proxy:qq.extend({getEndpoint:e.endpointStore.get},t)})),qq.override(this,(function(t){return{finalizeChunks:function(n){return e.chunking.success.endpoint?_(n):t.finalizeChunks(n,qq.bind(x,this,!0))}}}))},qq.traditional.AllChunksDoneAjaxRequester=function(e){"use strict";var t,n="POST",r={cors:{allowXdr:!1,expected:!1,sendCredentials:!1},endpoint:null,log:function(e,t){}},a={},l={get:function(e){return r.endpoint}};qq.extend(r,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:[n],method:n,endpointStore:l,allowXRequestedWithAndCacheControl:!1,cors:r.cors,log:r.log,onComplete:function(e,t,n){var r=a[e];delete a[e],n?r.failure(t):r.success(t)}})),qq.extend(this,{complete:function(e,n,l,f){var d=new qq.Promise;return r.log("Submitting All Chunks Done request for "+e),a[e]=d,t.initTransport(e).withParams(l).withHeaders(f).send(n),d}})},qq.DragAndDrop=function(e){"use strict";var t,n,r,a="qq-hidezones",l="qq-hide-dropzone",f=[],d=[],h=new qq.DisposeSupport;function p(e){var n=new qq.Promise;return e.isFile?e.file((function(t){var r=e.name,a=e.fullPath,l=a.indexOf(r);"/"===(a=a.substr(0,l)).charAt(0)&&(a=a.substr(1)),t.qqPath=a,d.push(t),n.success()}),(function(r){t.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+r.code+".","error"),n.failure()})):e.isDirectory&&y(e).then((function(e){var t=e.length;qq.each(e,(function(e,r){p(r).done((function(){0===(t-=1)&&n.success()}))})),e.length||n.success()}),(function(r){t.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+r.code+".","error"),n.failure()})),n}function y(e,t,n,r){var a=r||new qq.Promise,l=t||e.createReader();return l.readEntries((function(t){var r=n?n.concat(t):t;t.length?setTimeout((function(){y(e,l,r,a)}),0):a.success(r)}),a.failure),a}function w(e){var n=new qq.UploadDropZone({HIDE_ZONES_EVENT_NAME:a,element:e,onEnter:function(n){qq(e).addClass(t.classes.dropActive),n.stopPropagation()},onLeaveNotDescendants:function(n){qq(e).removeClass(t.classes.dropActive)},onDrop:function(e){var r,a,l,f;(r=e.dataTransfer,a=n,l=[],f=new qq.Promise,t.callbacks.processingDroppedFiles(),a.dropDisabled(!0),r.files.length>1&&!t.allowMultipleItems?(t.callbacks.processingDroppedFilesComplete([]),t.callbacks.dropError("tooManyFilesError",""),a.dropDisabled(!1),f.failure()):(d=[],qq.isFolderDropSupported(r)?qq.each(r.items,(function(e,t){var n=t.webkitGetAsEntry();n&&(n.isFile?d.push(t.getAsFile()):l.push(p(n).done((function(){l.pop(),0===l.length&&f.success()}))))})):d=r.files,0===l.length&&f.success()),f).then((function(){!function(e,n){var r=Array.prototype.slice.call(e);t.callbacks.dropLog("Grabbed "+e.length+" dropped files."),n.dropDisabled(!1),t.callbacks.processingDroppedFilesComplete(r,n.getElement())}(d,n)}),(function(){t.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")}))}});return h.addDisposer((function(){n.dispose()})),qq(e).hasAttribute(l)&&qq(e).hide(),f.push(n),n}function x(e){var t;return qq.each(e.dataTransfer.types,(function(e,n){if("Files"===n)return t=!0,!1})),t}t={dropZoneElements:[],allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks},qq.extend(t,e,!0),n=t.dropZoneElements,r=function(){setTimeout((function(){qq.each(n,(function(e,n){qq(n).hasAttribute(l)&&qq(n).hide(),qq(n).removeClass(t.classes.dropActive)}))}),10)},qq.each(n,(function(e,t){var r=w(t);n.length&&qq.supportedFeatures.fileDrop&&h.attach(document,"dragenter",(function(e){!r.dropDisabled()&&x(e)&&qq.each(n,(function(e,t){t instanceof HTMLElement&&qq(t).hasAttribute(l)&&qq(t).css({display:"block"})}))}))})),h.attach(document,"dragleave",(function(e){(function(e){return qq.safari()?e.x<0||e.y<0:0===e.x&&0===e.y})(e)&&r()})),h.attach(qq(document).children()[0],"mouseenter",(function(e){r()})),h.attach(document,"drop",(function(e){x(e)&&(e.preventDefault(),r())})),h.attach(document,a,r),qq.extend(this,{setupExtraDropzone:function(e){t.dropZoneElements.push(e),w(e)},removeDropzone:function(e){var n,r=t.dropZoneElements;for(n in r)if(r[n]===e)return r.splice(n,1)},dispose:function(){h.dispose(),qq.each(f,(function(e,t){t.dispose()}))}})},qq.DragAndDrop.callbacks=function(){"use strict";return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(e,t){},dropError:function(e,t){qq.log("Drag & drop error code '"+e+" with these specifics: '"+t+"'","error")},dropLog:function(e,t){qq.log(e,t)}}},qq.UploadDropZone=function(e){"use strict";var t,n,r,a,l=new qq.DisposeSupport;function f(){return qq.safari()||qq.firefox()&&qq.windows()}function d(e){if(!qq.supportedFeatures.fileDrop)return!1;var t,n=e.dataTransfer,r=qq.safari();return t=!(!qq.ie()||!qq.supportedFeatures.fileDrop)||"none"!==n.effectAllowed,n&&t&&(n.files&&n.files.length||!r&&n.types.contains&&n.types.contains("Files")||n.types.includes&&n.types.includes("Files"))}function h(e){return void 0!==e&&(r=e),r}t={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}},qq.extend(t,e),n=t.element,a||(f?l.attach(document,"dragover",(function(e){e.preventDefault()})):l.attach(document,"dragover",(function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())})),a=!0),l.attach(n,"dragover",(function(e){if(d(e)){var t=qq.ie()&&qq.supportedFeatures.fileDrop?null:e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",e.stopPropagation(),e.preventDefault()}})),l.attach(n,"dragenter",(function(e){if(!h()){if(!d(e))return;t.onEnter(e)}})),l.attach(n,"dragleave",(function(e){if(d(e)){t.onLeave(e);var n=document.elementFromPoint(e.clientX,e.clientY);qq(this).contains(n)||t.onLeaveNotDescendants(e)}})),l.attach(n,"drop",(function(e){if(!h()){if(!d(e))return;e.preventDefault(),e.stopPropagation(),t.onDrop(e),function(){var e;function n(){(e=document.createEvent("Event")).initEvent(t.HIDE_ZONES_EVENT_NAME,!0,!0)}if(window.CustomEvent)try{e=new CustomEvent(t.HIDE_ZONES_EVENT_NAME)}catch(e){n()}else n();document.dispatchEvent(e)}()}})),qq.extend(this,{dropDisabled:function(e){return h(e)},dispose:function(){l.dispose()},getElement:function(){return n}}),this._testing={},this._testing.isValidFileDrag=d},function(){"use strict";qq.uiPublicApi={addInitialFiles:function(e){this._parent.prototype.addInitialFiles.apply(this,arguments),this._templating.addCacheToDom()},clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments),this._templating.clearFiles()},addExtraDropzone:function(e){this._dnd&&this._dnd.setupExtraDropzone(e)},removeExtraDropzone:function(e){if(this._dnd)return this._dnd.removeDropzone(e)},getItemByFileId:function(e){if(!this._templating.isHiddenForever(e))return this._templating.getFileContainer(e)},reset:function(){this._parent.prototype.reset.apply(this,arguments),this._templating.reset(),!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId()),this._dnd&&(this._dnd.dispose(),this._dnd=this._setupDragAndDrop()),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0,this._setupClickAndEditEventHandlers()},setName:function(e,t){var n=this._options.formatFileName(t);this._parent.prototype.setName.apply(this,arguments),this._templating.updateFilename(e,n)},pauseUpload:function(e){var t=this._parent.prototype.pauseUpload.apply(this,arguments);return t&&this._templating.uploadPaused(e),t},continueUpload:function(e){var t=this._parent.prototype.continueUpload.apply(this,arguments);return t&&this._templating.uploadContinued(e),t},getId:function(e){return this._templating.getFileId(e)},getDropTarget:function(e){return this.getFile(e).qqDropTarget}},qq.uiPrivateApi={_getButton:function(e){var t=this._parent.prototype._getButton.apply(this,arguments);return t||e===this._defaultButtonId&&(t=this._templating.getButton()),t},_removeFileItem:function(e){this._templating.removeFile(e)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=qq.FileButtonsClickHandler&&this._bindFileButtonsClickEvent(),this._focusinEventSupported=!qq.firefox(),this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var e=this,t=this._options.dragAndDrop.extraDropzones,n=this._templating,r=n.getDropZone();return r&&t.push(r),new qq.DragAndDrop({dropZoneElements:t,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){n.showDropProcessing()},processingDroppedFilesComplete:function(t,r){n.hideDropProcessing(),qq.each(t,(function(e,t){t.qqDropTarget=r})),t.length&&e.addFiles(t,null,null)},dropError:function(t,n){e._itemError(t,n)},dropLog:function(t,n){e.log(t,n)}}})},_bindFileButtonsClickEvent:function(){var e=this;return new qq.FileButtonsClickHandler({templating:this._templating,log:function(t,n){e.log(t,n)},onDeleteFile:function(t){e.deleteFile(t)},onCancel:function(t){e.cancel(t)},onRetry:function(t){e.retry(t)},onPause:function(t){e.pauseUpload(t)},onContinue:function(t){e.continueUpload(t)},onGetName:function(t){return e.getName(t)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&qq.FilenameClickHandler&&qq.FilenameInputFocusHandler&&qq.FilenameInputFocusHandler},_filenameEditHandler:function(){var e=this,t=this._templating;return{templating:t,log:function(t,n){e.log(t,n)},onGetUploadStatus:function(t){return e.getUploads({id:t}).status},onGetName:function(t){return e.getName(t)},onSetName:function(t,n){e.setName(t,n)},onEditingStatusChange:function(e,n){var r=qq(t.getEditInput(e)),a=qq(t.getFileContainer(e));n?(r.addClass("qq-editing"),t.hideFilename(e),t.hideEditIcon(e)):(r.removeClass("qq-editing"),t.showFilename(e),t.showEditIcon(e)),a.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(e,t,n){this._parent.prototype._onUploadStatusChange.apply(this,arguments),this._isEditFilenameEnabled()&&this._templating.getFileContainer(e)&&n!==qq.status.SUBMITTED&&(this._templating.markFilenameEditable(e),this._templating.hideEditIcon(e)),t===qq.status.UPLOAD_RETRYING&&n===qq.status.UPLOADING?(this._templating.hideRetry(e),this._templating.setStatusText(e),qq(this._templating.getFileContainer(e)).removeClass(this._classes.retrying)):n===qq.status.UPLOAD_FAILED&&this._templating.hidePause(e)},_bindFilenameInputFocusInEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(e)},_bindFilenameInputFocusEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(e)},_bindFilenameClickEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(e)},_storeForLater:function(e){this._parent.prototype._storeForLater.apply(this,arguments),this._templating.hideSpinner(e)},_onAllComplete:function(e,t){this._parent.prototype._onAllComplete.apply(this,arguments),this._templating.resetTotalProgress()},_onSubmit:function(e,t){var n=this.getFile(e);n&&n.qqPath&&this._options.dragAndDrop.reportDirectoryPaths&&this._paramsStore.addReadOnly(e,{qqpath:n.qqPath}),this._parent.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onSubmitted:function(e){this._isEditFilenameEnabled()&&(this._templating.markFilenameEditable(e),this._templating.showEditIcon(e),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(e)))},_onProgress:function(e,t,n,r){this._parent.prototype._onProgress.apply(this,arguments),this._templating.updateProgress(e,n,r),0===r||100===Math.round(n/r*100)?(this._templating.hideCancel(e),this._templating.hidePause(e),this._templating.hideProgress(e),this._templating.setStatusText(e,this._options.text.waitingForResponse),this._displayFileSize(e)):this._displayFileSize(e,n,r)},_onTotalProgress:function(e,t){this._parent.prototype._onTotalProgress.apply(this,arguments),this._templating.updateTotalProgress(e,t)},_onComplete:function(e,t,n,r){var a=this._parent.prototype._onComplete.apply(this,arguments),l=this._templating,f=l.getFileContainer(e),d=this;function h(t){f&&(l.setStatusText(e),qq(f).removeClass(d._classes.retrying),l.hideProgress(e),d.getUploads({id:e}).status!==qq.status.UPLOAD_FAILED&&l.hideCancel(e),l.hideSpinner(e),t.success?d._markFileAsSuccessful(e):(qq(f).addClass(d._classes.fail),l.showCancel(e),l.isRetryPossible()&&!d._preventRetries[e]&&(qq(f).addClass(d._classes.retryable),l.showRetry(e)),d._controlFailureTextDisplay(e,t)))}return a instanceof qq.Promise?a.done((function(e){h(e)})):h(n),a},_markFileAsSuccessful:function(e){var t=this._templating;this._isDeletePossible()&&t.showDeleteButton(e),qq(t.getFileContainer(e)).addClass(this._classes.success),this._maybeUpdateThumbnail(e)},_onUploadPrep:function(e){this._parent.prototype._onUploadPrep.apply(this,arguments),this._templating.showSpinner(e)},_onUpload:function(e,t){var n=this._parent.prototype._onUpload.apply(this,arguments);return this._templating.showSpinner(e),n},_onUploadChunk:function(e,t){this._parent.prototype._onUploadChunk.apply(this,arguments),t.partIndex>0&&this._handler.isResumable(e)&&this._templating.allowPause(e)},_onCancel:function(e,t){this._parent.prototype._onCancel.apply(this,arguments),this._removeFileItem(e),0===this._getNotFinished()&&this._templating.resetTotalProgress()},_onBeforeAutoRetry:function(e){var t,n,r;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments),this._showCancelLink(e),this._options.retry.showAutoRetryNote&&(t=this._autoRetries[e],n=this._options.retry.maxAutoAttempts,r=(r=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,t)).replace(/\{maxAuto\}/g,n),this._templating.setStatusText(e,r),qq(this._templating.getFileContainer(e)).addClass(this._classes.retrying))},_onBeforeManualRetry:function(e){return this._parent.prototype._onBeforeManualRetry.apply(this,arguments)?(this._templating.resetProgress(e),qq(this._templating.getFileContainer(e)).removeClass(this._classes.fail),this._templating.setStatusText(e),this._templating.showSpinner(e),this._showCancelLink(e),!0):(qq(this._templating.getFileContainer(e)).addClass(this._classes.retryable),this._templating.showRetry(e),!1)},_onSubmitDelete:function(e){var t=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,e,t)},_onSubmitDeleteSuccess:function(e,t,n){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)},_onDeleteComplete:function(e,t,n){this._parent.prototype._onDeleteComplete.apply(this,arguments),this._templating.hideSpinner(e),n?(this._templating.setStatusText(e,this._options.deleteFile.deletingFailedText),this._templating.showDeleteButton(e)):this._removeFileItem(e)},_sendDeleteRequest:function(e,t,n){this._templating.hideDeleteButton(e),this._templating.showSpinner(e),this._templating.setStatusText(e,this._options.deleteFile.deletingStatusText),this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(e,t,n){var r,a=this.getName(e),l=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,a),f=(t=this.getUuid(e),arguments),d=this;r=this._options.showConfirm(l),qq.isGenericPromise(r)?r.then((function(){d._sendDeleteRequest.apply(d,f)})):!1!==r&&d._sendDeleteRequest.apply(d,f)},_addToList:function(e,t,n){var r,a,l=0,f=this._handler.isProxied(e)&&this._options.scaling.hideScaled;this._options.display.prependFiles&&(this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0&&(l=this._filesInBatchAddedToUi-1),r={index:l}),n||(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading&&this._templating.disableCancel(),this._options.multiple||(a=this.getUploads({id:e}),this._handledProxyGroup=this._handledProxyGroup||a.proxyGroupId,a.proxyGroupId===this._handledProxyGroup&&a.proxyGroupId||(this._handler.cancelAll(),this._clearList(),this._handledProxyGroup=null))),n?(this._templating.addFileToCache(e,this._options.formatFileName(t),r,f),this._templating.updateThumbnail(e,this._thumbnailUrls[e],!0,this._options.thumbnails.customResizer)):(this._templating.addFile(e,this._options.formatFileName(t),r,f),this._templating.generatePreview(e,this.getFile(e),this._options.thumbnails.customResizer)),this._filesInBatchAddedToUi+=1,(n||this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading)&&this._displayFileSize(e)},_clearList:function(){this._templating.clearFiles(),this.clearStoredFiles()},_displayFileSize:function(e,t,n){var r=this.getSize(e),a=this._formatSize(r);r>=0&&(void 0!==t&&void 0!==n&&(a=this._formatProgress(t,n)),this._templating.updateSize(e,a))},_formatProgress:function(e,t){var n=this._options.text.formatProgress;function r(e,t){n=n.replace(e,t)}return r("{percent}",Math.round(e/t*100)),r("{total_size}",this._formatSize(t)),n},_controlFailureTextDisplay:function(e,t){var n,r,a;n=this._options.failedUploadTextDisplay.mode,r=this._options.failedUploadTextDisplay.responseProperty,"custom"===n?((a=t[r])||(a=this._options.text.failUpload),this._templating.setStatusText(e,a),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(e,a)):"default"===n?this._templating.setStatusText(e,this._options.text.failUpload):"none"!==n&&this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid","warn")},_showTooltip:function(e,t){this._templating.getFileContainer(e).title=t},_showCancelLink:function(e){this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading||this._templating.showCancel(e)},_itemError:function(e,t,n){var r=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(r)},_batchError:function(e){this._parent.prototype._batchError.apply(this,arguments),this._options.showMessage(e)},_setupPastePrompt:function(){var e=this;this._options.callbacks.onPasteReceived=function(){var t=e._options.paste.namePromptMessage,n=e._options.paste.defaultName;return e._options.showPrompt(t,n)}},_fileOrBlobRejected:function(e,t){this._totalFilesInBatch-=1,this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(e,t,n){this._totalFilesInBatch=e.length,this._filesInBatchAddedToUi=0,this._parent.prototype._prepareItemsForUpload.apply(this,arguments)},_maybeUpdateThumbnail:function(e){var t=this._thumbnailUrls[e];this.getUploads({id:e}).status===qq.status.DELETED||!t&&!this._options.thumbnails.placeholders.waitUntilResponse&&qq.supportedFeatures.imagePreviews||this._templating.updateThumbnail(e,t,this._options.thumbnails.customResizer)},_addCannedFile:function(e){var t=this._parent.prototype._addCannedFile.apply(this,arguments);return this._addToList(t,this.getName(t),!0),this._templating.hideSpinner(t),this._templating.hideCancel(t),this._markFileAsSuccessful(t),t},_setSize:function(e,t){this._parent.prototype._setSize.apply(this,arguments),this._templating.updateSize(e,this._formatSize(t))},_sessionRequestComplete:function(){this._templating.addCacheToDom(),this._parent.prototype._sessionRequestComplete.apply(this,arguments)}}}(),qq.FineUploader=function(e,t){"use strict";var n=this;this._parent=t?qq[t].FineUploaderBasic:qq.FineUploaderBasic,this._parent.apply(this,arguments),qq.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],reportDirectoryPaths:!1},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},thumbnails:{customResizer:null,maxCount:0,placeholders:{waitUntilResponse:!1,notAvailablePath:null,waitingPath:null},timeBetweenThumbs:750},scaling:{hideScaled:!1},showMessage:function(e){if(n._templating.hasDialog("alert"))return n._templating.showDialog("alert",e);setTimeout((function(){window.alert(e)}),0)},showConfirm:function(e){return n._templating.hasDialog("confirm")?n._templating.showDialog("confirm",e):window.confirm(e)},showPrompt:function(e,t){return n._templating.hasDialog("prompt")?n._templating.showDialog("prompt",e,t):window.prompt(e,t)}},!0),qq.extend(this._options,e,!0),this._templating=new qq.Templating({log:qq.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},limits:{maxThumbs:this._options.thumbnails.maxCount,timeBetweenThumbs:this._options.thumbnails.timeBetweenThumbs},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text}),this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari()?this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari):!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._templating.renderFailure(this._options.messages.unsupportedBrowser):(this._wrapCallbacks(),this._templating.render(),this._classes=this._options.classes,!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId()),this._setupClickAndEditEventHandlers(),qq.DragAndDrop&&qq.supportedFeatures.fileDrop&&(this._dnd=this._setupDragAndDrop()),this._options.paste.targetElement&&this._options.paste.promptForName&&(qq.PasteSupport?this._setupPastePrompt():this.log("Paste support module not found.","error")),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0)},qq.extend(qq.FineUploader.prototype,qq.basePublicApi),qq.extend(qq.FineUploader.prototype,qq.basePrivateApi),qq.extend(qq.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi),qq.Templating=function(e){"use strict";var t,n,r,a,l,f,d,h,p="qq-file-id",y="qq-file-id-",w="qq-drop-area-text",x="qq-in-progress",_="qq-hidden-forever",S={content:document.createDocumentFragment(),map:{}},k=!1,C=0,E=!1,O=[],j=-1,T={log:null,limits:{maxThumbs:0,timeBetweenThumbs:750},templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:!1,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},A={button:"qq-upload-button-selector",alertDialog:"qq-alert-dialog-selector",dialogCancelButton:"qq-cancel-button-selector",confirmDialog:"qq-confirm-dialog-selector",dialogMessage:"qq-dialog-message-selector",dialogOkButton:"qq-ok-button-selector",promptDialog:"qq-prompt-dialog-selector",uploader:"qq-uploader-selector",drop:"qq-upload-drop-area-selector",list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropText:"qq-upload-drop-area-text-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},P={},D=new qq.Promise,R=new qq.Promise,I=function(e){var t=new qq.Promise;return R.then((function(n){Q(n,e),e.src?t.success():(e.src=n.src,e.onload=function(){e.onload=null,oe(e),t.success()})}),(function(){J(e),t.success()})),t},M=function(){if(O.length){E=!0;var e=O.shift();e.update?ne(e):te(e)}else E=!1},L=function(e){return Y(H(e),A.cancel)},N=function(e){return Y(H(e),A.continueButton)},F=function(e){return Y(l,A[e+"Dialog"])},q=function(e){return Y(H(e),A.deleteButton)},B=function(){return Y(l,A.dropProcessing)},U=function(e){return Y(H(e),A.editNameIcon)},H=function(e){return S.map[e]||qq(f).getFirstByClass(y+e)},z=function(e){return Y(H(e),A.file)},V=function(e){return Y(H(e),A.pause)},W=function(e){return null==e?Y(l,A.totalProgressBarContainer)||Y(l,A.totalProgressBar):Y(H(e),A.progressBarContainer)||Y(H(e),A.progressBar)},Z=function(e){return Y(H(e),A.retry)},G=function(e){return Y(H(e),A.size)},K=function(e){return Y(H(e),A.spinner)},Y=function(e,t){return e&&qq(e).getFirstByClass(t)},X=function(e){return d&&Y(H(e),A.thumbnail)},J=function(e){e&&qq(e).addClass(T.classes.hide)},Q=function(e,t){var n=e.style.maxWidth,r=e.style.maxHeight;r&&n&&!t.style.maxWidth&&!t.style.maxHeight&&qq(t).css({maxWidth:n,maxHeight:r})},ee=function(e,t){var n=P[e]||(new qq.Promise).failure(),r=new qq.Promise;return D.then((function(e){n.then((function(){r.success()}),(function(){Q(e,t),t.onload=function(){t.onload=null,r.success()},t.src=e.src,oe(t)}))})),r},te=function(e){var n=e.id,r=e.optFileOrBlob,a=r&&r.qqThumbnailId,l=X(n),f={customResizeFunction:e.customResizeFunction,maxSize:j,orient:!0,scale:!0};qq.supportedFeatures.imagePreviews?l?T.limits.maxThumbs&&T.limits.maxThumbs<=C?(ee(n,l),M()):I(l).done((function(){P[n]=new qq.Promise,P[n].done((function(){setTimeout(M,T.limits.timeBetweenThumbs)})),null!=a?ae(n,a):function(e,n,r){var a=X(e);t("Generating new thumbnail for "+e),n.qqThumbnailId=e,T.imageGenerator.generate(n,a,r).then((function(){C++,oe(a),P[e].success()}),(function(){P[e].failure(),T.placeholders.waitUntilUpdate||ee(e,a)}))}(n,r,f)})):M():l&&(I(l),M())},ne=function(e){var t=e.id,n=e.thumbnailUrl,r=e.showWaitingImg,a=X(t),l={customResizeFunction:e.customResizeFunction,scale:h,maxSize:j};if(a)if(n){if(!(T.limits.maxThumbs&&T.limits.maxThumbs<=C))return r&&I(a),T.imageGenerator.generate(n,a,l).then((function(){oe(a),C++,setTimeout(M,T.limits.timeBetweenThumbs)}),(function(){ee(t,a),setTimeout(M,T.limits.timeBetweenThumbs)}));ee(t,a),M()}else ee(t,a),M()},re=function(e,t){var n=W(e),r=null==e?A.totalProgressBar:A.progressBar;n&&!qq(n).hasClass(r)&&(n=qq(n).getFirstByClass(r)),n&&(qq(n).css({width:t+"%"}),n.setAttribute("aria-valuenow",t))},oe=function(e){e&&qq(e).removeClass(T.classes.hide)},ae=function(e,n){var r=X(e),a=X(n);t(qq.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",e,n,n)),P[n].then((function(){C++,P[e].success(),t(qq.format("Now using previously generated thumbnail created for ID {} on ID {}.",n,e)),r.src=a.src,oe(r)}),(function(){P[e].failure(),T.placeholders.waitUntilUpdate||ee(e,r)}))};qq.extend(T,e),t=T.log,qq.supportedFeatures.imagePreviews||(T.limits.timeBetweenThumbs=0,T.limits.maxThumbs=0),l=T.containerEl,d=void 0!==T.imageGenerator,a=function(){var e,a,l,f,p,y,x,_,S,k,C;if(t("Parsing template"),null==T.templateIdOrEl)throw new Error("You MUST specify either a template element or ID!");if(qq.isString(T.templateIdOrEl)){if(null===(e=document.getElementById(T.templateIdOrEl)))throw new Error(qq.format("Cannot find template script at ID '{}'!",T.templateIdOrEl));a=e.innerHTML}else{if(void 0===T.templateIdOrEl.innerHTML)throw new Error("You have specified an invalid value for the template option!  It must be an ID or an Element.");a=T.templateIdOrEl.innerHTML}if(a=qq.trimStr(a),(f=document.createElement("div")).appendChild(qq.toElement(a)),C=qq(f).getFirstByClass(A.uploader),T.button&&(y=qq(f).getFirstByClass(A.button))&&qq(y).remove(),qq.DragAndDrop&&qq.supportedFeatures.fileDrop||(S=qq(f).getFirstByClass(A.dropProcessing))&&qq(S).remove(),(x=qq(f).getFirstByClass(A.drop))&&!qq.DragAndDrop&&(t("DnD module unavailable.","info"),qq(x).remove()),qq.supportedFeatures.fileDrop?qq(C).hasAttribute(w)&&x&&(k=qq(x).getFirstByClass(A.dropText))&&qq(k).remove():(C.removeAttribute(w),x&&qq(x).hasAttribute("qq-hide-dropzone")&&qq(x).css({display:"none"})),_=qq(f).getFirstByClass(A.thumbnail),d?_&&(j=(j=parseInt(_.getAttribute("qq-max-size")))>0?j:null,h=qq(_).hasAttribute("qq-server-scale")):_&&qq(_).remove(),d=d&&_,n=qq(f).getByClass(A.editFilenameInput).length>0,r=qq(f).getByClass(A.retry).length>0,null==(l=qq(f).getFirstByClass(A.list)))throw new Error("Could not find the file list container in the template!");return p=l.children[0].cloneNode(!0),l.innerHTML="",f.getElementsByTagName("DIALOG").length&&document.createElement("dialog"),t("Template parsing complete"),{template:f,fileTemplate:p}}(),function(){var e=T.placeholders.thumbnailNotAvailable,n=T.placeholders.waitingForThumbnail,r={maxSize:j,scale:h};d&&(e?T.imageGenerator.generate(e,new Image,r).then((function(e){D.success(e)}),(function(){D.failure(),t("Problem loading 'not available' placeholder image at "+e,"error")})):D.failure(),n?T.imageGenerator.generate(n,new Image,r).then((function(e){R.success(e)}),(function(){R.failure(),t("Problem loading 'waiting for thumbnail' placeholder image at "+n,"error")})):R.failure())}(),qq.extend(this,{render:function(){t("Rendering template in DOM."),C=0,l.appendChild(a.template.cloneNode(!0)),J(B()),this.hideTotalProgress(),f=T.fileContainerEl||Y(l,A.list),t("Template rendering complete")},renderFailure:function(e){var t=qq.toElement(e);l.innerHTML="",l.appendChild(t)},reset:function(){this.render()},clearFiles:function(){f.innerHTML=""},disableCancel:function(){k=!0},addFile:function(e,t,n,r,d){var h,x=a.fileTemplate.cloneNode(!0),C=Y(x,A.file),E=Y(l,A.uploader),O=d?S.content:f;d&&(S.map[e]=x),qq(x).addClass(y+e),E.removeAttribute(w),C&&(qq(C).setText(t),C.setAttribute("title",t)),x.setAttribute(p,e),n?function(e,t,n){var r=n,a=r.firstChild;t>0&&(a=qq(r).children()[t].nextSibling),r.insertBefore(e,a)}(x,n.index,O):O.appendChild(x),r?(x.style.display="none",qq(x).addClass(_)):(J(W(e)),J(G(e)),J(q(e)),J(Z(e)),J(V(e)),J(N(e)),k&&this.hideCancel(e),(h=X(e))&&!h.src&&R.then((function(e){h.src=e.src,e.style.maxHeight&&e.style.maxWidth&&qq(h).css({maxHeight:e.style.maxHeight,maxWidth:e.style.maxWidth}),oe(h)})))},addFileToCache:function(e,t,n,r){this.addFile(e,t,n,r,!0)},addCacheToDom:function(){f.appendChild(S.content),S.content=document.createDocumentFragment(),S.map={}},removeFile:function(e){qq(H(e)).remove()},getFileId:function(e){var t=e;if(t){for(;null==t.getAttribute(p);)t=t.parentNode;return parseInt(t.getAttribute(p))}},getFileList:function(){return f},markFilenameEditable:function(e){var t=z(e);t&&qq(t).addClass(T.classes.editable)},updateFilename:function(e,t){var n=z(e);n&&(qq(n).setText(t),n.setAttribute("title",t))},hideFilename:function(e){J(z(e))},showFilename:function(e){oe(z(e))},isFileName:function(e){return qq(e).hasClass(A.file)},getButton:function(){return T.button||Y(l,A.button)},hideDropProcessing:function(){J(B())},showDropProcessing:function(){oe(B())},getDropZone:function(){return Y(l,A.drop)},isEditFilenamePossible:function(){return n},hideRetry:function(e){J(Z(e))},isRetryPossible:function(){return r},showRetry:function(e){oe(Z(e))},getFileContainer:function(e){return H(e)},showEditIcon:function(e){var t=U(e);t&&qq(t).addClass(T.classes.editable)},isHiddenForever:function(e){return qq(H(e)).hasClass(_)},hideEditIcon:function(e){var t=U(e);t&&qq(t).removeClass(T.classes.editable)},isEditIcon:function(e){return qq(e).hasClass(A.editNameIcon,!0)},getEditInput:function(e){return Y(H(e),A.editFilenameInput)},isEditInput:function(e){return qq(e).hasClass(A.editFilenameInput,!0)},updateProgress:function(e,t,n){var r,a=W(e);a&&n>0&&(100===(r=Math.round(t/n*100))?J(a):oe(a),re(e,r))},updateTotalProgress:function(e,t){this.updateProgress(null,e,t)},hideProgress:function(e){var t=W(e);t&&J(t)},hideTotalProgress:function(){this.hideProgress()},resetProgress:function(e){re(e,0),this.hideTotalProgress(e)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(e){if(!k){var t=L(e);t&&qq(t).removeClass(T.classes.hide)}},hideCancel:function(e){J(L(e))},isCancel:function(e){return qq(e).hasClass(A.cancel,!0)},allowPause:function(e){oe(V(e)),J(N(e))},uploadPaused:function(e){this.setStatusText(e,T.text.paused),this.allowContinueButton(e),J(K(e))},hidePause:function(e){J(V(e))},isPause:function(e){return qq(e).hasClass(A.pause,!0)},isContinueButton:function(e){return qq(e).hasClass(A.continueButton,!0)},allowContinueButton:function(e){oe(N(e)),J(V(e))},uploadContinued:function(e){this.setStatusText(e,""),this.allowPause(e),oe(K(e))},showDeleteButton:function(e){oe(q(e))},hideDeleteButton:function(e){J(q(e))},isDeleteButton:function(e){return qq(e).hasClass(A.deleteButton,!0)},isRetry:function(e){return qq(e).hasClass(A.retry,!0)},updateSize:function(e,t){var n=G(e);n&&(oe(n),qq(n).setText(t))},setStatusText:function(e,t){var n=Y(H(e),A.statusText);n&&(null==t?qq(n).clearText():qq(n).setText(t))},hideSpinner:function(e){qq(H(e)).removeClass(x),J(K(e))},showSpinner:function(e){qq(H(e)).addClass(x),oe(K(e))},generatePreview:function(e,t,n){this.isHiddenForever(e)||(O.push({id:e,customResizeFunction:n,optFileOrBlob:t}),!E&&M())},updateThumbnail:function(e,t,n,r){this.isHiddenForever(e)||(O.push({customResizeFunction:r,update:!0,id:e,thumbnailUrl:t,showWaitingImg:n}),!E&&M())},hasDialog:function(e){return qq.supportedFeatures.dialogElement&&!!F(e)},showDialog:function(e,t,n){var r=F(e),a=Y(r,A.dialogMessage),l=r.getElementsByTagName("INPUT")[0],f=Y(r,A.dialogCancelButton),d=Y(r,A.dialogOkButton),h=new qq.Promise,p=function(){f.removeEventListener("click",y),d&&d.removeEventListener("click",w),h.failure()},y=function(){f.removeEventListener("click",y),r.close()},w=function(){r.removeEventListener("close",p),d.removeEventListener("click",w),r.close(),h.success(l&&l.value)};return r.addEventListener("close",p),f.addEventListener("click",y),d&&d.addEventListener("click",w),l&&(l.value=n),a.textContent=t,r.showModal(),h}})},qq.UiEventHandler=function(e,t){"use strict";var n=new qq.DisposeSupport,r={eventType:"click",attachTo:null,onHandled:function(e,t){}};function a(e){n.attach(e,r.eventType,(function(e){var t=(e=e||window.event).target||e.srcElement;r.onHandled(t,e)}))}qq.extend(this,{addHandler:function(e){a(e)},dispose:function(){n.dispose()}}),qq.extend(t,{getFileIdFromItem:function(e){return e.qqFileId},getDisposeSupport:function(){return n}}),qq.extend(r,e),r.attachTo&&a(r.attachTo)},qq.FileButtonsClickHandler=function(e){"use strict";var t={templating:null,log:function(e,t){},onDeleteFile:function(e){},onCancel:function(e){},onRetry:function(e){},onPause:function(e){},onContinue:function(e){},onGetName:function(e){}},n={cancel:function(e){t.onCancel(e)},retry:function(e){t.onRetry(e)},deleteButton:function(e){t.onDeleteFile(e)},pause:function(e){t.onPause(e)},continueButton:function(e){t.onContinue(e)}};qq.extend(t,e),t.eventType="click",t.onHandled=function(e,r){qq.each(n,(function(n,a){var l,f=n.charAt(0).toUpperCase()+n.slice(1);if(t.templating["is"+f](e))return l=t.templating.getFileId(e),qq.preventDefault(r),t.log(qq.format("Detected valid file button click event on file '{}', ID: {}.",t.onGetName(l),l)),a(l),!1}))},t.attachTo=t.templating.getFileList(),qq.extend(this,new qq.UiEventHandler(t,{}))},qq.FilenameClickHandler=function(e){"use strict";var t={},n={templating:null,log:function(e,t){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(e){},onGetName:function(e){}};qq.extend(n,e),n.eventType="click",n.onHandled=function(e,r){if(n.templating.isFileName(e)||n.templating.isEditIcon(e)){var a=n.templating.getFileId(e);n.onGetUploadStatus(a)===qq.status.SUBMITTED&&(n.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",n.onGetName(a),a)),qq.preventDefault(r),t.handleFilenameEdit(a,e,!0))}},qq.extend(this,new qq.FilenameEditHandler(n,t))},qq.FilenameInputFocusInHandler=function(e,t){"use strict";var n={templating:null,onGetUploadStatus:function(e){},log:function(e,t){}};t||(t={}),n.eventType="focusin",n.onHandled=function(e,r){if(n.templating.isEditInput(e)){var a=n.templating.getFileId(e);n.onGetUploadStatus(a)===qq.status.SUBMITTED&&(n.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",n.onGetName(a),a)),t.handleFilenameEdit(a,e))}},qq.extend(n,e),qq.extend(this,new qq.FilenameEditHandler(n,t))},qq.FilenameInputFocusHandler=function(e){"use strict";e.eventType="focus",e.attachTo=null,qq.extend(this,new qq.FilenameInputFocusInHandler(e,{}))},qq.FilenameEditHandler=function(e,t){"use strict";var n={templating:null,log:function(e,t){},onGetUploadStatus:function(e){},onGetName:function(e){},onSetName:function(e,t){},onEditingStatusChange:function(e,t){}};function r(e,t){var r,a=e.value;void 0!==a&&qq.trimStr(a).length>0&&(r=function(e){var t=n.onGetName(e);return qq.getExtension(t)}(t),void 0!==r&&(a=a+"."+r),n.onSetName(t,a)),n.onEditingStatusChange(t,!1)}qq.extend(n,e),n.attachTo=n.templating.getFileList(),qq.extend(this,new qq.UiEventHandler(n,t)),qq.extend(t,{handleFilenameEdit:function(e,a,l){var f,d,h,p=n.templating.getEditInput(e);n.onEditingStatusChange(e,!0),p.value=(f=e,d=n.onGetName(f),(h=d.lastIndexOf("."))>0&&(d=d.substr(0,h)),d),l&&p.focus(),function(e,n){t.getDisposeSupport().attach(e,"blur",(function(){r(e,n)}))}(p,e),function(e,n){t.getDisposeSupport().attach(e,"keyup",(function(t){13===(t.keyCode||t.which)&&r(e,n)}))}(p,e)}})}})(window)},88009:function(){var uuid,removeData,eventType,orig;function focusable(e,t){var n,r,a,l=e.nodeName.toLowerCase();return"area"===l?(r=(n=e.parentNode).name,!(!e.href||!r||"map"!==n.nodeName.toLowerCase())&&(!!(a=$("img[usemap='#"+r+"']")[0])&&visible(a))):(/^(input|select|textarea|button|object)$/.test(l)?!e.disabled:"a"===l&&e.href||t)&&visible(e)}function visible(e){return $.expr.filters.visible(e)&&!$(e).parents().addBack().filter((function(){return"hidden"===$.css(this,"visibility")})).length}$.ui=$.ui||{},$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({scrollParent:function(e){var t=this.css("position"),n="absolute"===t,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter((function(){var e=$(this);return(!n||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==t&&a.length?a:$(this[0].ownerDocument||document)},uniqueId:(uuid=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++uuid)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&$(this).removeAttr("id")}))}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo((function(e){return function(t){return!!$.data(t,e)}})):function(e,t,n){return!!$.data(e,n[3])},focusable:function(e){return focusable(e,!isNaN($.attr(e,"tabindex")))},tabbable:function(e){var t=$.attr(e,"tabindex"),n=isNaN(t);return(n||t>=0)&&focusable(e,!n)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],(function(e,t){var n="Width"===t?["Left","Right"]:["Top","Bottom"],r=t.toLowerCase(),a={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function l(e,t,r,a){return $.each(n,(function(){t-=parseFloat($.css(e,"padding"+this))||0,r&&(t-=parseFloat($.css(e,"border"+this+"Width"))||0),a&&(t-=parseFloat($.css(e,"margin"+this))||0)})),t}$.fn["inner"+t]=function(e){return void 0===e?a["inner"+t].call(this):this.each((function(){$(this).css(r,l(this,e)+"px")}))},$.fn["outer"+t]=function(e,n){return"number"!=typeof e?a["outer"+t].call(this,e):this.each((function(){$(this).css(r,l(this,e,!0,n)+"px")}))}})),$.fn.addBack||($.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=(removeData=$.fn.removeData,function(e){return arguments.length?removeData.call(this,$.camelCase(e)):removeData.call(this)})),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.fn.extend({focus:(orig=$.fn.focus,function(e,t){return"number"==typeof e?this.each((function(){var n=this;setTimeout((function(){$(n).focus(),t&&t.call(n)}),e)})):orig.apply(this,arguments)}),disableSelection:(eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(eventType+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var t,n,r=$(this[0]);r.length&&r[0]!==document;){if(("absolute"===(t=r.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0}}),$.ui.plugin={add:function(e,t,n){var r,a=$.ui[e].prototype;for(r in n)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([t,n[r]])},call:function(e,t,n,r){var a,l=e.plugins[t];if(l&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;a<l.length;a++)e.options[l[a][0]]&&l[a][1].apply(e.element,n)}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(e){return function(t){var n,r,a;for(a=0;null!=(r=t[a]);a++)try{(n=$._data(r,"events"))&&n.remove&&$(r).triggerHandler("remove")}catch(e){}e(t)}}($.cleanData),$.widget=function(e,t,n){var r,a,l,f,d={},h=e.split(".")[0];return e=e.split(".")[1],r=h+"-"+e,n||(n=t,t=$.Widget),$.expr[":"][r.toLowerCase()]=function(e){return!!$.data(e,r)},$[h]=$[h]||{},a=$[h][e],l=$[h][e]=function(e,t){if(!this._createWidget)return new l(e,t);arguments.length&&this._createWidget(e,t)},$.extend(l,a,{version:n.version,_proto:$.extend({},n),_childConstructors:[]}),(f=new t).options=$.widget.extend({},f.options),$.each(n,(function(e,n){var r,a;$.isFunction(n)?d[e]=(r=function(){return t.prototype[e].apply(this,arguments)},a=function(n){return t.prototype[e].apply(this,n)},function(){var e,t=this._super,l=this._superApply;return this._super=r,this._superApply=a,e=n.apply(this,arguments),this._super=t,this._superApply=l,e}):d[e]=n})),l.prototype=$.widget.extend(f,{widgetEventPrefix:a&&f.widgetEventPrefix||e},d,{constructor:l,namespace:h,widgetName:e,widgetFullName:r}),a?($.each(a._childConstructors,(function(e,t){var n=t.prototype;$.widget(n.namespace+"."+n.widgetName,l,t._proto)})),delete a._childConstructors):t._childConstructors.push(l),$.widget.bridge(e,l),l},$.widget.extend=function(e){for(var t,n,r=widget_slice.call(arguments,1),a=0,l=r.length;a<l;a++)for(t in r[a])n=r[a][t],r[a].hasOwnProperty(t)&&void 0!==n&&($.isPlainObject(n)?e[t]=$.isPlainObject(e[t])?$.widget.extend({},e[t],n):$.widget.extend({},n):e[t]=n);return e},$.widget.bridge=function(e,t){var n=t.prototype.widgetFullName||e;$.fn[e]=function(r){var a="string"==typeof r,l=widget_slice.call(arguments,1),f=this;return a?this.each((function(){var t,a=$.data(this,n);return"instance"===r?(f=a,!1):a?$.isFunction(a[r])&&"_"!==r.charAt(0)?(t=a[r].apply(a,l))!==a&&void 0!==t?(f=t&&t.jquery?f.pushStack(t.get()):t,!1):void 0:$.error("no such method '"+r+"' for "+e+" widget instance"):$.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")})):(l.length&&(r=$.widget.extend.apply(null,[r].concat(l))),this.each((function(){var e=$.data(this,n);e?(e.option(r||{}),e._init&&e._init()):$.data(this,n,new t(r,this))}))),f}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,t){t=$(t||this.defaultElement||this)[0],this.element=$(t),this.uuid=widget_uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),t!==this&&($.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=$(t.style?t.ownerDocument:t.document||t),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(e,t){var n,r,a,l=e;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof e)if(l={},n=e.split("."),e=n.shift(),n.length){for(r=l[e]=$.widget.extend({},this.options[e]),a=0;a<n.length-1;a++)r[n[a]]=r[n[a]]||{},r=r[n[a]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];l[e]=t}return this._setOptions(l),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,t,n){var r,a=this;"boolean"!=typeof e&&(n=t,t=e,e=!1),n?(t=r=$(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),$.each(n,(function(n,l){function f(){if(e||!0!==a.options.disabled&&!$(this).hasClass("ui-state-disabled"))return("string"==typeof l?a[l]:l).apply(a,arguments)}"string"!=typeof l&&(f.guid=l.guid=l.guid||f.guid||$.guid++);var d=n.match(/^([\w:-]*)\s*(.*)$/),h=d[1]+a.eventNamespace,p=d[2];p?r.delegate(p,h,f):t.bind(h,f)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t),this.bindings=$(this.bindings.not(e).get()),this.focusable=$(this.focusable.not(e).get()),this.hoverable=$(this.hoverable.not(e).get())},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){$(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){$(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){$(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){$(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,n){var r,a,l=this.options[e];if(n=n||{},(t=$.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],a=t.originalEvent)for(r in a)r in t||(t[r]=a[r]);return this.element.trigger(t,n),!($.isFunction(l)&&!1===l.apply(this.element[0],[t].concat(n))||t.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},(function(e,t){$.Widget.prototype["_"+e]=function(n,r,a){"string"==typeof r&&(r={effect:r});var l,f=r?!0===r||"number"==typeof r?t:r.effect||t:e;"number"==typeof(r=r||{})&&(r={duration:r}),l=!$.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),l&&$.effects&&$.effects.effect[f]?n[e](r):f!==e&&n[f]?n[f](r.duration,r.easing,a):n.queue((function(t){$(this)[e](),a&&a.call(n[0]),t()}))}}));var widget=$.widget,mouseHandled=!1;$(document).mouseup((function(){mouseHandled=!1}));var mouse=$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).bind("click."+this.widgetName,(function(t){if(!0===$.data(t.target,e.widgetName+".preventClickEvent"))return $.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!mouseHandled){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,n=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&$(e.target).closest(this.options.cancel).length;return!(n&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){t.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===$.data(e.target,this.widgetName+".preventClickEvent")&&$.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),mouseHandled=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&$.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),mouseHandled=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});$.widget("ui.draggable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return this._blurActiveElement(e),!(this.helper||t.disabled||$(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=$(this);return $("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=this.document[0];if(this.handleElement.is(e.target))try{t.activeElement&&"body"!==t.activeElement.nodeName.toLowerCase()&&$(t.activeElement).blur()}catch(e){}},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===$(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!t.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",$.ui.ddmanager&&$.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,n=!1;return $.ui.ddmanager&&!this.options.dropBehaviour&&(n=$.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==t._trigger("stop",e)&&t._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),$.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!$(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var t=this.options,n=$.isFunction(t.helper),r=n?$(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),n&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),$.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,n,r=this.options,a=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(n=(t=$(r.containment))[0])&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)):this.containment=r.containment:this.containment=[0,0,$(a).width()-this.helperProportions.width-this.margins.left,($(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,a,l,f=this.options,d=this._isRootNode(this.scrollParent[0]),h=e.pageX,p=e.pageY;return d&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(h=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(p=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(h=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(p=n[3]+this.offset.click.top)),f.grid&&(a=f.grid[1]?this.originalPageY+Math.round((p-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY,p=n?a-this.offset.click.top>=n[1]||a-this.offset.click.top>n[3]?a:a-this.offset.click.top>=n[1]?a-f.grid[1]:a+f.grid[1]:a,l=f.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX,h=n?l-this.offset.click.left>=n[0]||l-this.offset.click.left>n[2]?l:l-this.offset.click.left>=n[0]?l-f.grid[0]:l+f.grid[0]:l),"y"===f.axis&&(h=this.originalPageX),"x"===f.axis&&(p=this.originalPageY)),{top:p-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,t,n){return n=n||this._uiHash(),$.ui.plugin.call(this,e,[t,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),$.Widget.prototype._trigger.call(this,e,t,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,n){var r=$.extend({},t,{item:n.element});n.sortables=[],$(n.options.connectToSortable).each((function(){var t=$(this).sortable("instance");t&&!t.options.disabled&&(n.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,r))}))},stop:function(e,t,n){var r=$.extend({},t,{item:n.element});n.cancelHelperRemoval=!1,$.each(n.sortables,(function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,r))}))},drag:function(e,t,n){$.each(n.sortables,(function(){var r=!1,a=this;a.positionAbs=n.positionAbs,a.helperProportions=n.helperProportions,a.offset.click=n.offset.click,a._intersectsWith(a.containerCache)&&(r=!0,$.each(n.sortables,(function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&$.contains(a.element[0],this.element[0])&&(r=!1),r}))),r?(a.isOver||(a.isOver=1,n._parent=t.helper.parent(),a.currentItem=t.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return t.helper[0]},e.target=a.currentItem[0],a._mouseCapture(e,!0),a._mouseStart(e,!0,!0),a.offset.click.top=n.offset.click.top,a.offset.click.left=n.offset.click.left,a.offset.parent.left-=n.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=n.offset.parent.top-a.offset.parent.top,n._trigger("toSortable",e),n.dropped=a.element,$.each(n.sortables,(function(){this.refreshPositions()})),n.currentItem=n.element,a.fromOutside=n),a.currentItem&&(a._mouseDrag(e),t.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",e,a._uiHash(a)),a._mouseStop(e,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),t.helper.appendTo(n._parent),n._refreshOffsets(e),t.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,$.each(n.sortables,(function(){this.refreshPositions()})))}))}}),$.ui.plugin.add("draggable","cursor",{start:function(e,t,n){var r=$("body"),a=n.options;r.css("cursor")&&(a._cursor=r.css("cursor")),r.css("cursor",a.cursor)},stop:function(e,t,n){var r=n.options;r._cursor&&$("body").css("cursor",r._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(e,t,n){var r=$(t.helper),a=n.options;r.css("opacity")&&(a._opacity=r.css("opacity")),r.css("opacity",a.opacity)},stop:function(e,t,n){var r=n.options;r._opacity&&$(t.helper).css("opacity",r._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,t,n){var r=n.options,a=!1,l=n.scrollParentNotHidden[0],f=n.document[0];l!==f&&"HTML"!==l.tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+l.offsetHeight-e.pageY<r.scrollSensitivity?l.scrollTop=a=l.scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(l.scrollTop=a=l.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+l.offsetWidth-e.pageX<r.scrollSensitivity?l.scrollLeft=a=l.scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(l.scrollLeft=a=l.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-$(f).scrollTop()<r.scrollSensitivity?a=$(f).scrollTop($(f).scrollTop()-r.scrollSpeed):$(window).height()-(e.pageY-$(f).scrollTop())<r.scrollSensitivity&&(a=$(f).scrollTop($(f).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-$(f).scrollLeft()<r.scrollSensitivity?a=$(f).scrollLeft($(f).scrollLeft()-r.scrollSpeed):$(window).width()-(e.pageX-$(f).scrollLeft())<r.scrollSensitivity&&(a=$(f).scrollLeft($(f).scrollLeft()+r.scrollSpeed)))),!1!==a&&$.ui.ddmanager&&!r.dropBehaviour&&$.ui.ddmanager.prepareOffsets(n,e)}}),$.ui.plugin.add("draggable","snap",{start:function(e,t,n){var r=n.options;n.snapElements=[],$(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var e=$(this),t=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})}))},drag:function(e,t,n){var r,a,l,f,d,h,p,y,w,x,_=n.options,S=_.snapTolerance,k=t.offset.left,C=k+n.helperProportions.width,E=t.offset.top,O=E+n.helperProportions.height;for(w=n.snapElements.length-1;w>=0;w--)h=(d=n.snapElements[w].left-n.margins.left)+n.snapElements[w].width,y=(p=n.snapElements[w].top-n.margins.top)+n.snapElements[w].height,C<d-S||k>h+S||O<p-S||E>y+S||!$.contains(n.snapElements[w].item.ownerDocument,n.snapElements[w].item)?(n.snapElements[w].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,$.extend(n._uiHash(),{snapItem:n.snapElements[w].item})),n.snapElements[w].snapping=!1):("inner"!==_.snapMode&&(r=Math.abs(p-O)<=S,a=Math.abs(y-E)<=S,l=Math.abs(d-C)<=S,f=Math.abs(h-k)<=S,r&&(t.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top),a&&(t.position.top=n._convertPositionTo("relative",{top:y,left:0}).top),l&&(t.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left),f&&(t.position.left=n._convertPositionTo("relative",{top:0,left:h}).left)),x=r||a||l||f,"outer"!==_.snapMode&&(r=Math.abs(p-E)<=S,a=Math.abs(y-O)<=S,l=Math.abs(d-k)<=S,f=Math.abs(h-C)<=S,r&&(t.position.top=n._convertPositionTo("relative",{top:p,left:0}).top),a&&(t.position.top=n._convertPositionTo("relative",{top:y-n.helperProportions.height,left:0}).top),l&&(t.position.left=n._convertPositionTo("relative",{top:0,left:d}).left),f&&(t.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left)),!n.snapElements[w].snapping&&(r||a||l||f||x)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,$.extend(n._uiHash(),{snapItem:n.snapElements[w].item})),n.snapElements[w].snapping=r||a||l||f||x)}}),$.ui.plugin.add("draggable","stack",{start:function(e,t,n){var r,a=n.options,l=$.makeArray($(a.stack)).sort((function(e,t){return(parseInt($(e).css("zIndex"),10)||0)-(parseInt($(t).css("zIndex"),10)||0)}));l.length&&(r=parseInt($(l[0]).css("zIndex"),10)||0,$(l).each((function(e){$(this).css("zIndex",r+e)})),this.css("zIndex",r+l.length))}}),$.ui.plugin.add("draggable","zIndex",{start:function(e,t,n){var r=$(t.helper),a=n.options;r.css("zIndex")&&(a._zIndex=r.css("zIndex")),r.css("zIndex",a.zIndex)},stop:function(e,t,n){var r=n.options;r._zIndex&&$(t.helper).css("zIndex",r._zIndex)}});var draggable=$.ui.draggable;$.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=$.isFunction(n)?n:function(e){return e.is(n)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(t.scope),t.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){$.ui.ddmanager.droppables[e]=$.ui.ddmanager.droppables[e]||[],$.ui.ddmanager.droppables[e].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var e=$.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,t){if("accept"===e)this.accept=$.isFunction(t)?t:function(e){return e.is(t)};else if("scope"===e){var n=$.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(t)}this._super(e,t)},_activate:function(e){var t=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),t&&this._trigger("activate",e,this.ui(t))},_deactivate:function(e){var t=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),t&&this._trigger("deactivate",e,this.ui(t))},_over:function(e){var t=$.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(t)))},_out:function(e){var t=$.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!==this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(t)))},_drop:function(e,t){var n=t||$.ui.ddmanager.current,r=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var t=$(this).droppable("instance");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&$.ui.intersect(n,$.extend(t,{offset:t.element.offset()}),t.options.tolerance,e))return r=!0,!1})),!r&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),$.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,r,a){if(!n.offset)return!1;var l=(t.positionAbs||t.position.absolute).left+t.margins.left,f=(t.positionAbs||t.position.absolute).top+t.margins.top,d=l+t.helperProportions.width,h=f+t.helperProportions.height,p=n.offset.left,y=n.offset.top,w=p+n.proportions().width,x=y+n.proportions().height;switch(r){case"fit":return p<=l&&d<=w&&y<=f&&h<=x;case"intersect":return p<l+t.helperProportions.width/2&&d-t.helperProportions.width/2<w&&y<f+t.helperProportions.height/2&&h-t.helperProportions.height/2<x;case"pointer":return e(a.pageY,y,n.proportions().height)&&e(a.pageX,p,n.proportions().width);case"touch":return(f>=y&&f<=x||h>=y&&h<=x||f<y&&h>x)&&(l>=p&&l<=w||d>=p&&d<=w||l<p&&d>w);default:return!1}}}(),$.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,t){var n,r,a=$.ui.ddmanager.droppables[e.options.scope]||[],l=t?t.type:null,f=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<a.length;n++)if(!(a[n].options.disabled||e&&!a[n].accept.call(a[n].element[0],e.currentItem||e.element))){for(r=0;r<f.length;r++)if(f[r]===a[n].element[0]){a[n].proportions().height=0;continue e}a[n].visible="none"!==a[n].element.css("display"),a[n].visible&&("mousedown"===l&&a[n]._activate.call(a[n],t),a[n].offset=a[n].element.offset(),a[n].proportions({width:a[n].element[0].offsetWidth,height:a[n].element[0].offsetHeight}))}},drop:function(e,t){var n=!1;return $.each(($.ui.ddmanager.droppables[e.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&$.ui.intersect(e,this,this.options.tolerance,t)&&(n=this._drop.call(this,t)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,t)))})),n},dragStart:function(e,t){e.element.parentsUntil("body").bind("scroll.droppable",(function(){e.options.refreshPositions||$.ui.ddmanager.prepareOffsets(e,t)}))},drag:function(e,t){e.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(e,t);var n=$.ui.ddmanager.droppables[e.options.scope]||[];$.each(n,(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,r,a,l=$.ui.intersect(e,this,this.options.tolerance,t),f=!l&&this.isover?"isout":l&&!this.isover?"isover":null;f&&(this.options.greedy&&(r=this.options.scope,(a=this.element.parents(":data(ui-droppable)").filter((function(){return $(this).droppable("instance").options.scope===r}))).length&&((n=$(a[0]).droppable("instance")).enteredGreedyChild=n.enteredGreedyChild||"isover"===f,n.leftGreedyChild=n.leftGreedyChild||"isout"===f)),this[f]=!0,this["isout"===f?"isover":"isout"]=!1,this.c=f)}})),$.each(n,(function(){this.enteredGreedyChild&&(this.greedyChild=!0,this.isover=!1,this.isout=!0,this.c="isout"),this.leftGreedyChild&&!this.enteredGreedyChild&&(this.greedyChild=!1,this.isover=!0,this.isout=!1,this.c="isover"),this.c&&(this["isover"===this.c?"_over":"_out"].call(this,t),this.leftGreedyChild=!1,this.enteredGreedyChild=!1,this.c=null)}))},dragStop:function(e,t){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||$.ui.ddmanager.prepareOffsets(e,t)}};var droppable=$.ui.droppable;(function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(e){return"string"===$.type(e)},runPluginCallbacks=function(Instance,a_fn){if($.isArray(a_fn))for(var i=0,c=a_fn.length;i<c;i++){var fn=a_fn[i];try{isStr(fn)&&(fn=eval(fn)),$.isFunction(fn)&&g(fn)(Instance)}catch(e){}}function g(e){return e}};$.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(e){var t=$(e),n=t.data("layout")||t.data("parentLayout");if(n){var r=n.container;if(r.data("layoutPane"))return r;var a=r.closest("."+$.layout.defaults.panes.paneClass);if(a.data("layoutPane"))return a}return null},getParentPaneInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("layoutPane"):null},getParentLayoutInstance:function(e){var t=$.layout.getParentPaneElem(e);return t?t.data("parentLayout"):null},getEventObject:function(e){return"object"==typeof e&&e.stopPropagation?e:null},parsePaneName:function(e){var t=$.layout.getEventObject(e),n=e;return t&&(t.stopPropagation(),n=$(this).data("layoutEdge")),n&&!/^(west|east|north|south|center)$/.test(n)&&($.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+n+'"'),n="error"),n},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||$.effects.effect&&$.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(e){var t=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:t.css("width")-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,e.match(/^(width|height)$/)?n[e]:n},showInvisibly:function(e,t){if(e&&e.length&&(t||"none"===e.css("display"))){var n=e[0].style,r={display:n.display||"",visibility:n.visibility||""};return e.css({display:"block",visibility:"hidden"}),r}return{}},getElementDimensions:function(e,t){var n,r,a,l={css:{},inset:{}},f=l.css,d={bottom:0},h=$.layout.cssNum,p=e.offset();return l.offsetLeft=p.left,l.offsetTop=p.top,t||(t={}),$.each("Left,Right,Top,Bottom".split(","),(function(h,p){n=f["border"+p]=$.layout.borderWidth(e,p),r=f["padding"+p]=$.layout.cssNum(e,"padding"+p),a=p.toLowerCase(),l.inset[a]=t[a]>=0?t[a]:r,d[a]=l.inset[a]+n})),f.width=e.width(),f.height=e.height(),f.top=h(e,"top",!0),f.bottom=h(e,"bottom",!0),f.left=h(e,"left",!0),f.right=h(e,"right",!0),l.outerWidth=e.outerWidth(),l.outerHeight=e.outerHeight(),l.innerWidth=max(0,l.outerWidth-d.left-d.right),l.innerHeight=max(0,l.outerHeight-d.top-d.bottom),l.layoutWidth=e.innerWidth(),l.layoutHeight=e.innerHeight(),l},getElementStyles:function(e,t){var n,r,a,l,f,d,h={},p=e[0].style,y=t.split(","),w="Top,Bottom,Left,Right".split(","),x="Color,Style,Width".split(",");for(l=0;l<y.length;l++)if((n=y[l]).match(/(border|padding|margin)$/))for(f=0;f<4;f++)if(r=w[f],"border"===n)for(d=0;d<3;d++)h[n+r+(a=x[d])]=p[n+r+a];else h[n+r]=p[n+r];else h[n]=p[n];return h},cssWidth:function(e,t){if(t<=0)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",r=$.layout.borderWidth,a=$.layout.cssNum,l=t;return"border-box"!==n&&(l-=r(e,"Left")+r(e,"Right")),"content-box"===n&&(l-=a(e,"paddingLeft")+a(e,"paddingRight")),max(0,l)},cssHeight:function(e,t){if(t<=0)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",r=$.layout.borderWidth,a=$.layout.cssNum,l=t;return"border-box"!==n&&(l-=r(e,"Top")+r(e,"Bottom")),"content-box"===n&&(l-=a(e,"paddingTop")+a(e,"paddingBottom")),max(0,l)},cssNum:function(e,t,n){e.jquery||(e=$(e));var r=$.layout.showInvisibly(e),a=$.css(e[0],t,!0),l=n&&"auto"==a?a:Math.round(parseFloat(a)||0);return e.css(r),l},borderWidth:function(e,t){e.jquery&&(e=e[0]);var n="border"+t.substr(0,1).toUpperCase()+t.substr(1);return"none"===$.css(e,n+"Style",!0)?0:Math.round(parseFloat($.css(e,n+"Width",!0))||0)},isMouseOverElem:function(e,t){var n=$(t||this),r=n.offset(),a=r.top,l=r.left,f=l+n.outerWidth(),d=a+n.outerHeight(),h=e.pageX,p=e.pageY;return $.layout.browser.msie&&h<0&&p<0||h>=l&&h<=f&&p>=a&&p<=d},msg:function(e,t,n,r){if($.isPlainObject(e)&&window.debugData){"string"==typeof t?(r=n,n=t):"object"==typeof n&&(r=n,n=null);var a=n||"log( <object> )",l=$.extend({sort:!1,returnHTML:!1,display:!1},r);!0===t||l.display?debugData(e,a,l):window.console&&console.log(debugData(e,a,l))}else if(t)alert(e);else if(window.console)console.log(e);else{var f=$("#layoutLogger");f.length||(f=function(){var e=$.support.fixedPosition?"fixed":"absolute",t=$('<div id="layoutLogger" style="position: '+e+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body");t.css("left",$(window).width()-t.outerWidth()-5),$.ui.draggable&&t.draggable({handle:":first-child"});return t}()),f.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}}};var u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||/(webkit)[ \/]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],b=m[1]||"",v=m[2]||0,ie="msie"===b;$.layout.browser={version:v,safari:"webkit"===b,webkit:"chrome"===b,msie:ie,isIE6:ie&&6==v,boxModel:!ie||!1!==$.support.boxModel},b&&($.layout.browser[b]=!0),ie&&$((function(){$.layout.browser.boxModel=$.support.boxModel})),$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},$.layout.optionsMap={layout:"name,instanceKey,stateManagement,effects,inset,zIndexes,errors,zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end".split(","),center:"paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,containerSelector,children,initChildren,resizeChildren,destroyChildren,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end".split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")},$.layout.transformData=function(e,t){var n,r,a,l,f,d,h,p=t?{panes:{},center:{}}:{};if("object"!=typeof e)return p;for(r in e)for(n=p,f=e[r],h=(a=r.split("__")).length-1,d=0;d<=h;d++)l=a[d],d===h?$.isPlainObject(f)?n[l]=$.layout.transformData(f):n[l]=f:(n[l]||(n[l]={}),n=n[l]);return p},$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(e){var t,n,r,a=$.layout.backwardCompatibility.map;for(var l in a)void 0!==(r=(t=f(l)).branch[t.key])&&((n=f(a[l],!0)).branch[n.key]=r,delete t.branch[t.key]);function f(t,n){for(var r,a=t.split("."),l=a.length-1,f={branch:e,key:a[l]},d=0;d<l;d++)r=a[d],null==f.branch[r]?f.branch=n?f.branch[r]={}:{}:f.branch=f.branch[r];return f}},renameAllOptions:function(e){var t=$.layout.backwardCompatibility.renameOptions;return t(e),e.defaults&&("object"!=typeof e.panes&&(e.panes={}),$.extend(!0,e.panes,e.defaults),delete e.defaults),e.panes&&t(e.panes),$.each($.layout.config.allPanes,(function(n,r){e[r]&&t(e[r])})),e}},$.fn.layout=function(opts){var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(!0,{},$.layout.defaults),effects=options.effects=$.extend(!0,{},$.layout.effects),state={id:"layout"+$.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(e,t,n){timer.clear(e),timer.data[e]=setTimeout(t,n)},clear:function(e){var t=timer.data;t[e]&&(clearTimeout(t[e]),delete t[e])}},_log=function(e,t,n){var r=options;return(r.showErrorMessages&&!n||n&&r.showDebugMessages)&&$.layout.msg(r.name+" / "+e,!1!==t),!1},_runCallbacks=function(evtName,pane,skipBoundEvents){var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P;return hasPane||"boolean"!==$.type(pane)||(skipBoundEvents=pane,pane=""),fn&&(isStr(fn)&&(fn.match(/,/)?(args=fn.split(","),fn=eval(args[0])):fn=eval(fn)),$.isFunction(fn)&&(retVal=args.length?g(fn)(args[1]):hasPane?g(fn)(pane,$Ps[pane],s,o,lName):g(fn)(Instance,s,o,lName))),skipBoundEvents||!1===retVal||(hasPane?($P=$Ps[pane],o=options[pane],s=state[pane],$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]),shrt&&$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])):($N.triggerHandler("layout"+lng,[Instance,s,o,lName]),shrt&&$N.triggerHandler("layout"+shrt,[Instance,s,o,lName]))),hasPane&&"onresize_end"===evtName&&resizeChildren(pane+"",!0),retVal;function g(e){return e}},_fixIframe=function(e){if(!browser.mozilla){var t=$Ps[e];"IFRAME"===state[e].tagName?t.css(_c.hidden).css(_c.visible):t.find("IFRAME").css(_c.hidden).css(_c.visible)}},cssSize=function(e,t){return("horz"==_c[e].dir?cssH:cssW)($Ps[e],t)},cssMinDims=function(e){var t=$Ps[e],n=_c[e].dir,r={minWidth:1001-cssW(t,1e3),minHeight:1001-cssH(t,1e3)};return"horz"===n&&(r.minSize=r.minHeight),"vert"===n&&(r.minSize=r.minWidth),r},setOuterWidth=function(e,t,n){var r,a=e;isStr(e)?a=$Ps[e]:e.jquery||(a=$(e)),r=cssW(a,t),a.css({width:r}),r>0?n&&a.data("autoHidden")&&a.innerHeight()>0&&(a.show().data("autoHidden",!1),browser.mozilla||a.css(_c.hidden).css(_c.visible)):n&&!a.data("autoHidden")&&a.hide().data("autoHidden",!0)},setOuterHeight=function(e,t,n){var r,a=e;isStr(e)?a=$Ps[e]:e.jquery||(a=$(e)),r=cssH(a,t),a.css({height:r,visibility:"visible"}),r>0&&a.innerWidth()>0?n&&a.data("autoHidden")&&(a.show().data("autoHidden",!1),browser.mozilla||a.css(_c.hidden).css(_c.visible)):n&&!a.data("autoHidden")&&a.hide().data("autoHidden",!0)},_parseSize=function(e,t,n){if(n||(n=_c[e].dir),isStr(t)&&t.match(/%/)&&(t="100%"===t?-1:parseInt(t,10)/100),0===t)return 0;if(t>=1)return parseInt(t,10);var r=options,a=0;if("horz"==n?a=sC.innerHeight-($Ps.north?r.north.spacing_open:0)-($Ps.south?r.south.spacing_open:0):"vert"==n&&(a=sC.innerWidth-($Ps.west?r.west.spacing_open:0)-($Ps.east?r.east.spacing_open:0)),-1===t)return a;if(t>0)return round(a*t);if("center"==e)return 0;var l="horz"===n?"height":"width",f=$Ps[e],d="height"===l&&$Cs[e],h=$.layout.showInvisibly(f),p=f.css(l),y=d?d.css(l):0;return f.css(l,"auto"),d&&d.css(l,"auto"),t="height"===l?f.outerHeight():f.outerWidth(),f.css(l,p).css(h),d&&d.css(l,y),t},getPaneSize=function(e,t){var n=$Ps[e],r=options[e],a=state[e],l=t?r.spacing_open:0,f=t?r.spacing_closed:0;return!n||a.isHidden?0:a.isClosed||a.isSliding&&t?f:"horz"===_c[e].dir?n.outerHeight()+l:n.outerWidth()+l},setSizeLimits=function(e,t){if(isInitialized()){var n=options[e],r=state[e],a=_c[e],l=a.dir,f=(a.sizeType.toLowerCase(),null!=t?t:r.isSliding),d=($Ps[e],n.spacing_open),h=_c.oppositeEdge[e],p=state[h],y=$Ps[h],w=!y||!1===p.isVisible||p.isSliding?0:"horz"==l?y.outerHeight():y.outerWidth(),x=(!y||p.isHidden?0:options[h][!1!==p.isClosed?"spacing_closed":"spacing_open"])||0,_="horz"==l?sC.innerHeight:sC.innerWidth,S=cssMinDims("center"),k="horz"==l?max(options.center.minHeight,S.minHeight):max(options.center.minWidth,S.minWidth),C=_-d-(f?0:_parseSize("center",k,l)+w+x),E=r.minSize=max(_parseSize(e,n.minSize),cssMinDims(e).minSize),O=r.maxSize=min(n.maxSize?_parseSize(e,n.maxSize):1e5,C),j=r.resizerPosition={},T=sC.inset.top,A=sC.inset.left,P=sC.innerWidth,D=sC.innerHeight,R=n.spacing_open;switch(e){case"north":j.min=T+E,j.max=T+O;break;case"west":j.min=A+E,j.max=A+O;break;case"south":j.min=T+D-O-R,j.max=T+D-E-R;break;case"east":j.min=A+P-O-R,j.max=A+P-E-R}}},calcNewCenterPaneDims=function(){var e={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};return e.width=sC.innerWidth-e.left-e.right,e.height=sC.innerHeight-e.bottom-e.top,e.top+=sC.inset.top,e.bottom+=sC.inset.bottom,e.left+=sC.inset.left,e.right+=sC.inset.right,e},getHoverClasses=function(e,t){var n=$(e),r=n.data("layoutRole"),a=n.data("layoutEdge"),l=options[a][r+"Class"],f="-"+a,d="-open",h="-closed",p="-sliding",y="-hover ",w=n.hasClass(l+h)?h:d,x=w===h?d:h,_=l+y+(l+f+y)+(l+w+y)+(l+f+w+y);return t&&(_+=l+x+y+(l+f+x+y)),"resizer"==r&&n.hasClass(l+p)&&(_+=l+p+y+(l+f+p+y)),$.trim(_)},addHover=function(e,t){var n=$(t||this);e&&"toggler"===n.data("layoutRole")&&e.stopPropagation(),n.addClass(getHoverClasses(n))},removeHover=function(e,t){var n=$(t||this);n.removeClass(getHoverClasses(n,!0))},onResizerEnter=function(e){var t=$(this).data("layoutEdge"),n=state[t];n.isClosed||n.isResizing||state.paneResizing||($.fn.disableSelection&&$("body").disableSelection(),options.maskPanesEarly&&showMasks(t,{resizing:!0}))},onResizerLeave=function(e,t){var n=t||this,r=$(n).data("layoutEdge"),a=r+"ResizerLeave";timer.clear(r+"_openSlider"),timer.clear(a),t?state.paneResizing||($.fn.enableSelection&&$("body").enableSelection(),options.maskPanesEarly&&hideMasks()):timer.set(a,(function(){onResizerLeave(e,n)}),200)},_create=function(){initOptions();var e=options,t=state;return t.creatingLayout=!0,runPluginCallbacks(Instance,$.layout.onCreate),!1===_runCallbacks("onload_start")?"cancel":(_initContainer(),initHotkeys(),$(window).bind("unload."+sID,unload),runPluginCallbacks(Instance,$.layout.onLoad),e.initPanes&&_initLayoutElements(),delete t.creatingLayout,state.initialized)},isInitialized=function(){return!(!state.initialized&&!state.creatingLayout)||_initLayoutElements()},_initLayoutElements=function(e){var t=options;if(!$N.is(":visible"))return!e&&browser.webkit&&"BODY"===$N[0].tagName&&setTimeout((function(){_initLayoutElements(!0)}),50),!1;if(!getPane("center").length)return _log(t.errors.centerPaneMissing);if(state.creatingLayout=!0,$.extend(sC,elDims($N,t.inset)),initPanes(),t.scrollToBookmarkOnLoad){var n=self.location;n.hash&&n.replace(n.hash)}return Instance.hasParentLayout?t.resizeWithWindow=!1:t.resizeWithWindow&&$(window).bind("resize."+sID,windowResize),delete state.creatingLayout,state.initialized=!0,runPluginCallbacks(Instance,$.layout.onReady),_runCallbacks("onload_end"),!0},createChildren=function(e,t){var n=evtPane.call(this,e),r=$Ps[n];if(r){var a=$Cs[n],l=state[n],f=options[n],d=options.stateManagement||{},h=t?f.children=t:f.children;if($.isPlainObject(h))h=[h];else if(!h||!$.isArray(h))return;$.each(h,(function(e,t){$.isPlainObject(t)&&(t.containerSelector?r.find(t.containerSelector):a||r).each((function(){var e=$(this),r=e.data("layout");if(!r){if(setInstanceKey({container:e,options:t},l),d.includeChildren&&state.stateData[n]){var a=(state.stateData[n].children||{})[t.instanceKey],f=t.stateManagement||(t.stateManagement={autoLoad:!0});!0===f.autoLoad&&a&&(f.autoSave=!1,f.includeChildren=!0,f.autoLoad=$.extend(!0,{},a))}(r=e.layout(t))&&refreshChildren(n,r)}}))}))}},setInstanceKey=function(e,t){var n=e.container,r=e.options,a=r.stateManagement,l=r.instanceKey||n.data("layoutInstanceKey");return l||(l=(a&&a.cookie?a.cookie.name:"")||r.name),l=l?l.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++t.childIdx,r.instanceKey=l,n.data("layoutInstanceKey",l),l},refreshChildren=function(e,t){var n,r=$Ps[e],a=children[e],l=state[e];$.isPlainObject(a)&&($.each(a,(function(e,t){t.destroyed&&delete a[e]})),$.isEmptyObject(a)&&(a=children[e]=null)),t||a||(t=r.data("layout")),t&&(t.hasParentLayout=!0,n=t.options,setInstanceKey(t,l),a||(a=children[e]={}),a[n.instanceKey]=t.container.data("layout")),Instance[e].children=children[e],t||createChildren(e)},windowResize=function(){var e=options,t=Number(e.resizeWithWindowDelay);t<10&&(t=100),timer.clear("winResize"),timer.set("winResize",(function(){timer.clear("winResize"),timer.clear("winResizeRepeater");var t=elDims($N,e.inset);t.innerWidth===sC.innerWidth&&t.innerHeight===sC.innerHeight||resizeAll()}),t),timer.data.winResizeRepeater||setWindowResizeRepeater()},setWindowResizeRepeater=function(){var e=Number(options.resizeWithWindowMaxDelay);e>0&&timer.set("winResizeRepeater",(function(){setWindowResizeRepeater(),resizeAll()}),e)},unload=function(){_runCallbacks("onunload_start"),runPluginCallbacks(Instance,$.layout.onUnload),_runCallbacks("onunload_end")},_initContainer=function(){var e,t,n=$N[0],r=$("html"),a=sC.tagName=n.tagName,l=sC.id=n.id,f=sC.className=n.className,d=options,h=d.name,p="position,margin,padding,border",y="layoutCSS",w={},x="hidden",_=$N.data("parentLayout"),S=$N.data("layoutEdge"),k=_&&S,C=$.layout.cssNum;sC.selector=$N.selector.split(".slice")[0],sC.ref=(d.name?d.name+" layout / ":"")+a+(l?"#"+l:f?".["+f+"]":""),sC.isBody="BODY"===a,k||sC.isBody||(_=(e=$N.closest("."+$.layout.defaults.panes.paneClass)).data("parentLayout"),S=e.data("layoutEdge"),k=_&&S),$N.data({layout:Instance,layoutContainer:sID}).addClass(d.containerClass);var E={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(h in E)$N.bind("layout"+h.toLowerCase()+"."+sID,Instance[E[h]||h]);k&&(Instance.hasParentLayout=!0,_.refreshChildren(S,Instance)),$N.data(y)||(sC.isBody?($N.data(y,$.extend(styles($N,p),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")})),r.data(y,$.extend(styles(r,"padding"),{height:"auto",overflow:r.css("overflow"),overflowX:r.css("overflowX"),overflowY:r.css("overflowY")}))):$N.data(y,styles($N,p+",top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{if(w={overflow:x,overflowX:x,overflowY:x},$N.css(w),d.inset&&!$.isPlainObject(d.inset)&&(t=parseInt(d.inset,10)||0,d.inset={top:t,bottom:t,left:t,right:t}),sC.isBody)d.outset?$.isPlainObject(d.outset)||(t=parseInt(d.outset,10)||0,d.outset={top:t,bottom:t,left:t,right:t}):d.outset={top:C(r,"paddingTop"),bottom:C(r,"paddingBottom"),left:C(r,"paddingLeft"),right:C(r,"paddingRight")},r.css(w).css({height:"100%",border:"none",padding:0,margin:0}),browser.isIE6?($N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),d.inset||(d.inset=elDims($N).inset)):($N.css({width:"auto",height:"auto",margin:0,position:"absolute"}),$N.css(d.outset)),$.extend(sC,elDims($N,d.inset));else{var O=$N.css("position");O&&O.match(/(fixed|absolute|relative)/)||$N.css("position","relative"),$N.is(":visible")&&($.extend(sC,elDims($N,d.inset)),sC.innerHeight<1&&_log(d.errors.noContainerHeight.replace(/CONTAINER/,sC.ref)))}C($N,"minWidth")&&$N.parent().css("overflowX","auto"),C($N,"minHeight")&&$N.parent().css("overflowY","auto")}catch(e){}},initHotkeys=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,(function(e,t){var n=options[t];if(n.enableCursorHotkey||n.customHotkey)return $(document).bind("keydown."+sID,keyDown),!1}))},initOptions=function(){var e,t,n,r,a,l,f;if(opts=$.layout.transformData(opts,!0),opts=$.layout.backwardCompatibility.renameAllOptions(opts),!$.isEmptyObject(opts.panes)){for(e=$.layout.optionsMap.noDefault,a=0,l=e.length;a<l;a++)n=e[a],delete opts.panes[n];for(e=$.layout.optionsMap.layout,a=0,l=e.length;a<l;a++)n=e[a],delete opts.panes[n]}e=$.layout.optionsMap.layout;var d=$.layout.config.optionRootKeys;for(n in opts)r=opts[n],$.inArray(n,d)<0&&$.inArray(n,e)<0&&(opts.panes[n]||(opts.panes[n]=$.isPlainObject(r)?$.extend(!0,{},r):r),delete opts[n]);$.extend(!0,options,opts),$.each(_c.allPanes,(function(r,a){if(_c[a]=$.extend(!0,{},_c.panes,_c[a]),t=options.panes,f=options[a],"center"===a)for(e=$.layout.optionsMap.center,r=0,l=e.length;r<l;r++)n=e[r],opts.center[n]||!opts.panes[n]&&f[n]||(f[n]=t[n]);else f=options[a]=$.extend(!0,{},t,f),function(e){var t=options[e],n=options.panes;t.fxSettings||(t.fxSettings={});n.fxSettings||(n.fxSettings={});$.each(["_open","_close","_size"],(function(r,a){var l="fxName"+a,f="fxSpeed"+a,d="fxSettings"+a,h=t[l]=t[l]||n[l]||t.fxName||n.fxName||"none",p=$.effects&&($.effects[h]||$.effects.effect&&$.effects.effect[h]);"none"!==h&&options.effects[h]&&p||(h=t[l]="none");var y=options.effects[h]||{},w=y.all||null,x=y[e]||null;t[f]=t[f]||n[f]||t.fxSpeed||n.fxSpeed||null,t[d]=$.extend(!0,{},w,x,n.fxSettings,t.fxSettings,n[d],t[d])})),delete t.fxName,delete t.fxSpeed,delete t.fxSettings}(a),f.resizerClass||(f.resizerClass="ui-layout-resizer"),f.togglerClass||(f.togglerClass="ui-layout-toggler");f.paneClass||(f.paneClass="ui-layout-pane")}));var h=opts.zIndex,p=options.zIndexes;h>0&&(p.pane_normal=h,p.content_mask=max(h+1,p.content_mask),p.resizer_normal=max(h+2,p.resizer_normal)),delete options.panes},getPane=function(e){var t=options[e].paneSelector;if("#"===t.substr(0,1))return $N.find(t).eq(0);var n=$N.children(t).eq(0);return n.length?n:$N.children("form:first").children(t).eq(0)},initPanes=function(e){evtPane(e),$.each(_c.allPanes,(function(e,t){addPane(t,!0)})),initHandles(),$.each(_c.borderPanes,(function(e,t){$Ps[t]&&state[t].isVisible&&(setSizeLimits(t),makePaneFit(t))})),sizeMidPanes("center"),$.each(_c.allPanes,(function(e,t){afterInitPane(t)}))},addPane=function(e,t){if(t||isInitialized()){var n,r,a,l=options[e],f=state[e],d=_c[e],h=d.dir,p=(f.fx,l.spacing_open,"center"===e),y={},w=$Ps[e];if(w?removePane(e,!1,!0,!1):$Cs[e]=!1,(w=$Ps[e]=getPane(e)).length){if(!w.data("layoutCSS")){w.data("layoutCSS",styles(w,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"))}Instance[e]={name:e,pane:$Ps[e],content:$Cs[e],options:options[e],state:state[e],children:children[e]},w.data({parentLayout:Instance,layoutPane:Instance[e],layoutEdge:e,layoutRole:"pane"}).css(d.cssReq).css("zIndex",options.zIndexes.pane_normal).css(l.applyDemoStyles?d.cssDemo:{}).addClass(l.paneClass+" "+l.paneClass+"-"+e).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var x,_={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(x in _)w.bind("layoutpane"+x.toLowerCase()+"."+sID,Instance[_[x]||x]);initContent(e,!1),p||(n=f.size=_parseSize(e,l.size),r=_parseSize(e,l.minSize)||1,a=_parseSize(e,l.maxSize)||1e5,n>0&&(n=max(min(n,a),r)),f.autoResize=l.autoResize,f.isClosed=!1,f.isSliding=!1,f.isResizing=!1,f.isHidden=!1,f.pins||(f.pins=[])),f.tagName=w[0].tagName,f.edge=e,f.noRoom=!1,f.isVisible=!0,setPanePosition(e),"horz"===h?y.height=cssH(w,n):"vert"===h&&(y.width=cssW(w,n)),w.css(y),"horz"!=h&&sizeMidPanes(e,!0),state.initialized&&(initHandles(e),initHotkeys(e)),l.initClosed&&l.closable&&!l.initHidden?close(e,!0,!0):l.initHidden||l.initClosed?hide(e):f.noRoom||w.css("display","block"),w.css("visibility","visible"),l.showOverflowOnHover&&w.hover(allowOverflow,resetOverflow),state.initialized&&afterInitPane(e)}else $Ps[e]=!1}},afterInitPane=function(e){var t=$Ps[e],n=state[e],r=options[e];t&&(t.data("layout")&&refreshChildren(e,t.data("layout")),n.isVisible&&(state.initialized?resizeAll():sizeContent(e),r.triggerEventsOnLoad?_runCallbacks("onresize_end",e):resizeChildren(e,!0)),r.initChildren&&r.children&&createChildren(e))},setPanePosition=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,(function(e,t){var n=$Ps[t],r=$Rs[t],a=(options[t],state[t]),l=_c[t].side,f={};if(n){switch(t){case"north":f.top=sC.inset.top,f.left=sC.inset.left,f.right=sC.inset.right;break;case"south":f.bottom=sC.inset.bottom,f.left=sC.inset.left,f.right=sC.inset.right;break;case"west":f.left=sC.inset.left;break;case"east":f.right=sC.inset.right}n.css(f),r&&a.isClosed?r.css(l,sC.inset[l]):r&&!a.isHidden&&r.css(l,sC.inset[l]+getPaneSize(t))}}))},initHandles=function(e){e=e?e.split(","):_c.borderPanes,$.each(e,(function(e,t){var n=$Ps[t];if($Rs[t]=!1,$Ts[t]=!1,n){var r=options[t],a=state[t],l=(_c[t],"#"===r.paneSelector.substr(0,1)?r.paneSelector.substr(1):""),f=r.resizerClass,d=r.togglerClass,h=(a.isVisible?r.spacing_open:r.spacing_closed,"-"+t),p=(a.isVisible,Instance[t]),y=p.resizer=$Rs[t]=$("<div></div>"),w=p.toggler=!!r.closable&&($Ts[t]=$("<div></div>"));!a.isVisible&&r.slidable&&y.attr("title",r.tips.Slide).css("cursor",r.sliderCursor),y.attr("id",l?l+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(r.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(f+" "+f+h).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N),r.resizerDblClickToggle&&y.bind("dblclick."+sID,toggle),w&&(w.attr("id",l?l+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(r.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(d+" "+d+h).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo(y),r.togglerContent_open&&$("<span>"+r.togglerContent_open+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",t).addClass("content content-open").css("display","none").appendTo(w),r.togglerContent_closed&&$("<span>"+r.togglerContent_closed+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(w),enableClosable(t)),initResizable(t),a.isVisible?setAsOpen(t):(setAsClosed(t),bindStartSlidingEvents(t,!0))}})),sizeHandles()},initContent=function(e,t){if(isInitialized()){var n,r=options[e],a=r.contentSelector,l=Instance[e],f=$Ps[e];a&&(n=l.content=$Cs[e]=r.findNestedContent?f.find(a).eq(0):f.children(a).eq(0)),n&&n.length?(n.data("layoutRole","content"),n.data("layoutCSS")||n.data("layoutCSS",styles(n,"height")),n.css(_c.content.cssReq),r.applyDemoStyles&&(n.css(_c.content.cssDemo),f.css(_c.content.cssDemoPane)),f.css("overflowX").match(/(scroll|auto)/)&&f.css("overflow","hidden"),state[e].content={},!1!==t&&sizeContent(e)):l.content=$Cs[e]=!1}},initResizable=function(e){var t=$.layout.plugins.draggable;e=e?e.split(","):_c.borderPanes,$.each(e,(function(e,r){var a=options[r];if(!t||!$Ps[r]||!a.resizable)return a.resizable=!1,!0;var l,f,d=state[r],h=options.zIndexes,p=_c[r],y="horz"==p.dir?"top":"left",w=($Ps[r],$Rs[r]),x=a.resizerClass,_=0,S=x+"-drag",k=x+"-"+r+"-drag",C=x+"-dragging",E=x+"-"+r+"-dragging",O=x+"-dragging-limit",j=x+"-"+r+"-dragging-limit",T=!1;d.isClosed||w.attr("title",a.tips.Resize).css("cursor",a.resizerCursor),w.draggable({containment:$N[0],axis:"horz"==p.dir?"y":"x",delay:0,distance:1,grid:a.resizingGrid,helper:"clone",opacity:a.resizerDragOpacity,addClasses:!1,zIndex:h.resizer_drag,start:function(e,t){if(a=options[r],d=state[r],f=a.livePaneResizing,!1===_runCallbacks("ondrag_start",r))return!1;d.isResizing=!0,state.paneResizing=r,timer.clear(r+"_closeSlider"),setSizeLimits(r),l=d.resizerPosition,_=t.position[y],w.addClass(S+" "+k),T=!1,$("body").disableSelection(),showMasks(r,{resizing:!0})},drag:function(e,t){T||(t.helper.addClass(C+" "+E).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),T=!0,d.isSliding&&$Ps[r].css("zIndex",h.pane_sliding));var p=0;t.position[y]<l.min?(t.position[y]=l.min,p=-1):t.position[y]>l.max&&(t.position[y]=l.max,p=1),p?(t.helper.addClass(O+" "+j),window.defaultStatus=p>0&&r.match(/(north|west)/)||p<0&&r.match(/(south|east)/)?a.tips.maxSizeWarning:a.tips.minSizeWarning):(t.helper.removeClass(O+" "+j),window.defaultStatus=""),f&&Math.abs(t.position[y]-_)>=a.liveResizingTolerance&&(_=t.position[y],n(e,t,r))},stop:function(e,t){$("body").enableSelection(),window.defaultStatus="",w.removeClass(S+" "+k),d.isResizing=!1,state.paneResizing=!1,n(e,t,r,!0)}})}));var n=function(e,t,n,r){var a,l=t.position,f=_c[n],d=options[n],h=state[n];switch(n){case"north":a=l.top;break;case"west":a=l.left;break;case"south":a=sC.layoutHeight-l.top-d.spacing_open;break;case"east":a=sC.layoutWidth-l.left-d.spacing_open}var p=a-sC.inset[f.side];if(r)!1!==_runCallbacks("ondrag_end",n)&&manualSizePane(n,p,!1,!0),hideMasks(!0),h.isSliding&&showMasks(n,{resizing:!0});else{if(Math.abs(p-h.size)<d.liveResizingTolerance)return;manualSizePane(n,p,!1,!0),sizeMasks()}}},sizeMask=function(){var e=$(this),t=e.data("layoutMask"),n=state[t];"IFRAME"==n.tagName&&n.isVisible&&e.css({top:n.offsetTop,left:n.offsetLeft,width:n.outerWidth,height:n.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(e,t){var n,r,a=_c[e],l=["center"],f=options.zIndexes,d=$.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:state[e].isSliding},t);d.resizing&&l.push(e),d.sliding&&l.push(_c.oppositeEdge[e]),"horz"===a.dir&&(l.push("west"),l.push("east")),$.each(l,(function(e,t){r=state[t],n=options[t],r.isVisible&&(n.maskObjects||!d.objectsOnly&&n.maskContents)&&getMasks(t).each((function(){sizeMask.call(this),this.style.zIndex=r.isSliding?f.pane_sliding+1:f.pane_normal+1,this.style.display="block"}))}))},hideMasks=function(e){if(e||!state.paneResizing)$Ms.hide();else if(!e&&!$.isEmptyObject(state.panesSliding))for(var t,n,r=$Ms.length-1;r>=0;r--)t=(n=$Ms.eq(r)).data("layoutMask"),options[t].maskObjects||n.hide()},getMasks=function(e){for(var t,n=$([]),r=0,a=$Ms.length;r<a;r++)(t=$Ms.eq(r)).data("layoutMask")===e&&(n=n.add(t));return n.length?n:createMasks(e)},createMasks=function(e){var t,n,r,a,l,f=$Ps[e],d=state[e],h=options[e],p=options.zIndexes,y=$([]);if(!h.maskContents&&!h.maskObjects)return y;for(l=0;l<(h.maskObjects?2:1);l++)t=h.maskObjects&&0==l,n=document.createElement(t?"iframe":"div"),r=$(n).data("layoutMask",e),n.className="ui-layout-mask ui-layout-mask-"+e,(a=n.style).display="block",a.position="absolute",a.background="#FFF",t&&(n.frameborder=0,n.src="about:blank",a.opacity=0,a.filter="Alpha(Opacity='0')",a.border=0),"IFRAME"==d.tagName?(a.zIndex=p.pane_normal+1,$N.append(n)):(r.addClass("ui-layout-mask-inside-pane"),a.zIndex=h.maskZindex||p.content_mask,a.top=0,a.left=0,a.width="100%",a.height="100%",f.append(n)),y=y.add(n),$Ms=$Ms.add(n);return y},destroy=function(e,t){$(window).unbind("."+sID),$(document).unbind("."+sID),"object"==typeof e?evtPane(e):t=e,$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID),$Ms.remove(),$.each(_c.allPanes,(function(e,n){removePane(n,!1,!0,t)}));var n="layoutCSS";for(var r in $N.data(n)&&!$N.data("layoutRole")&&$N.css($N.data(n)).removeData(n),"BODY"===sC.tagName&&($N=$("html")).data(n)&&$N.css($N.data(n)).removeData(n),runPluginCallbacks(Instance,$.layout.onDestroy),unload(),Instance)r.match(/^(container|options)$/)||delete Instance[r];return Instance.destroyed=!0,Instance},removePane=function(e,t,n,r){if(isInitialized()){var a=evtPane.call(this,e),l=$Ps[a],f=$Cs[a],d=$Rs[a],h=$Ts[a];l&&$.isEmptyObject(l.data())&&(l=!1),f&&$.isEmptyObject(f.data())&&(f=!1),d&&$.isEmptyObject(d.data())&&(d=!1),h&&$.isEmptyObject(h.data())&&(h=!1),l&&l.stop(!0,!0);var p=options[a],y=(state[a],"layoutCSS"),w=children[a],x=$.isPlainObject(w)&&!$.isEmptyObject(w),_=void 0!==r?r:p.destroyChildren;if(x&&_&&($.each(w,(function(e,t){t.destroyed||t.destroy(!0),t.destroyed&&delete w[e]})),$.isEmptyObject(w)&&(w=children[a]=null,x=!1)),l&&t&&!x)l.remove();else if(l&&l[0]){var S=p.paneClass,k=S+"-"+a,C="-open",E="-sliding",O="-closed",j=[S,S+C,S+O,S+E,k,k+C,k+O,k+E];$.merge(j,getHoverClasses(l,!0)),l.removeClass(j.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID),x&&f?(f.width(f.width()),$.each(w,(function(e,t){t.resizeAll()}))):f&&f.css(f.data(y)).removeData(y).removeData("layoutRole"),l.data("layout")||l.css(l.data(y)).removeData(y)}h&&h.remove(),d&&d.remove(),Instance[a]=$Ps[a]=$Cs[a]=$Rs[a]=$Ts[a]=!1,{removed:!0},n||resizeAll()}},_hidePane=function(e){var t=$Ps[e],n=options[e],r=t[0].style;n.useOffscreenClose?(t.data(_c.offscreenReset)||t.data(_c.offscreenReset,{left:r.left,right:r.right}),t.css(_c.offscreenCSS)):t.hide().removeData(_c.offscreenReset)},_showPane=function(e){var t=$Ps[e],n=options[e],r=_c.offscreenCSS,a=t.data(_c.offscreenReset),l=t[0].style;t.show().removeData(_c.offscreenReset),n.useOffscreenClose&&a&&(l.left==r.left&&(l.left=a.left),l.right==r.right&&(l.right=a.right))},hide=function(e,t){if(isInitialized()){var n=evtPane.call(this,e),r=options[n],a=state[n],l=$Ps[n],f=$Rs[n];l&&!a.isHidden&&(state.initialized&&!1===_runCallbacks("onhide_start",n)||(a.isSliding=!1,delete state.panesSliding[n],f&&f.hide(),!state.initialized||a.isClosed?(a.isClosed=!0,a.isHidden=!0,a.isVisible=!1,state.initialized||_hidePane(n),sizeMidPanes("horz"===_c[n].dir?"":"center"),(state.initialized||r.triggerEventsOnLoad)&&_runCallbacks("onhide_end",n)):(a.isHiding=!0,close(n,!1,t))))}},show=function(e,t,n,r){if(isInitialized()){var a=evtPane.call(this,e),l=(options[a],state[a]),f=$Ps[a];$Rs[a];f&&l.isHidden&&!1!==_runCallbacks("onshow_start",a)&&(l.isShowing=!0,l.isSliding=!1,delete state.panesSliding[a],!1===t?close(a,!0):open(a,!1,n,r))}},toggle=function(e,t){if(isInitialized()){var n=evtObj(e),r=evtPane.call(this,e),a=state[r];n&&n.stopImmediatePropagation(),a.isHidden?show(r):a.isClosed?open(r,!!t):close(r)}},_closePane=function(e,t){$Ps[e];var n=state[e];_hidePane(e),n.isClosed=!0,n.isVisible=!1,t&&setAsClosed(e)},close=function(e,t,n,r){var a=evtPane.call(this,e);if(state.initialized||!$Ps[a]){if(isInitialized()){var l,f,d,h=$Ps[a],p=($Rs[a],$Ts[a],options[a]),y=state[a];_c[a];$N.queue((function(e){if(!h||!p.closable&&!y.isShowing&&!y.isHiding||!t&&y.isClosed&&!y.isShowing)return e();var r=!y.isShowing&&!1===_runCallbacks("onclose_start",a);if(f=y.isShowing,d=y.isHiding,y.isSliding,delete y.isShowing,delete y.isHiding,r)return e();l=!n&&!y.isClosed&&"none"!=p.fxName_close,y.isMoving=!0,y.isClosed=!0,y.isVisible=!1,d?y.isHidden=!0:f&&(y.isHidden=!1),y.isSliding?bindStopSlidingEvents(a,!1):sizeMidPanes("horz"===_c[a].dir?"":"center",!1),setAsClosed(a),l?(lockPaneForFX(a,!0),h.hide(p.fxName_close,p.fxSettings_close,p.fxSpeed_close,(function(){lockPaneForFX(a,!1),y.isClosed&&w(),e()}))):(_hidePane(a),w(),e())}))}}else _closePane(a,!0);function w(){y.isMoving=!1,bindStartSlidingEvents(a,!0);var e=_c.oppositeEdge[a];state[e].noRoom&&(setSizeLimits(e),makePaneFit(e)),r||!state.initialized&&!p.triggerEventsOnLoad||(f||_runCallbacks("onclose_end",a),f&&_runCallbacks("onshow_end",a),d&&_runCallbacks("onhide_end",a))}},setAsClosed=function(e){if($Rs[e]){$Ps[e];var t=$Rs[e],n=$Ts[e],r=options[e],a=(state[e],_c[e].side),l=r.resizerClass,f=r.togglerClass,d="-"+e,h="-open",p="-sliding",y="-closed";t.css(a,sC.inset[a]).removeClass(l+h+" "+l+d+h).removeClass(l+p+" "+l+d+p).addClass(l+y+" "+l+d+y),r.resizable&&$.layout.plugins.draggable&&t.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),n&&(n.removeClass(f+h+" "+f+d+h).addClass(f+y+" "+f+d+y).attr("title",r.tips.Open),n.children(".content-open").hide(),n.children(".content-closed").css("display","block")),syncPinBtns(e,!1),state.initialized&&sizeHandles()}},open=function(e,t,n,r){if(isInitialized()){var a,l,f=evtPane.call(this,e),d=$Ps[f],h=($Rs[f],$Ts[f],options[f]),p=state[f];_c[f];$N.queue((function(e){if(!d||!h.resizable&&!h.closable&&!p.isShowing||p.isVisible&&!p.isSliding)return e();if(p.isHidden&&!p.isShowing)return e(),void show(f,!0);p.autoResize&&p.size!=h.size?sizePane(f,h.size,!0,!0,!0):setSizeLimits(f,t);var w=_runCallbacks("onopen_start",f);return"abort"===w?e():("NC"!==w&&setSizeLimits(f,t),p.minSize>p.maxSize?(syncPinBtns(f,!1),!r&&h.tips.noRoomToOpen&&alert(h.tips.noRoomToOpen),e()):(t?bindStopSlidingEvents(f,!0):p.isSliding?bindStopSlidingEvents(f,!1):h.slidable&&bindStartSlidingEvents(f,!1),p.noRoom=!1,makePaneFit(f),l=p.isShowing,delete p.isShowing,a=!n&&p.isClosed&&"none"!=h.fxName_open,p.isMoving=!0,p.isVisible=!0,p.isClosed=!1,l&&(p.isHidden=!1),void(a?(lockPaneForFX(f,!0),d.show(h.fxName_open,h.fxSettings_open,h.fxSpeed_open,(function(){lockPaneForFX(f,!1),p.isVisible&&y(),e()}))):(_showPane(f),y(),e()))))}))}function y(){p.isMoving=!1,_fixIframe(f),p.isSliding||sizeMidPanes("vert"==_c[f].dir?"center":"",!1),setAsOpen(f)}},setAsOpen=function(e,t){var n=$Ps[e],r=$Rs[e],a=$Ts[e],l=options[e],f=state[e],d=_c[e].side,h=l.resizerClass,p=l.togglerClass,y="-"+e,w="-open",x="-closed",_="-sliding";r.css(d,sC.inset[d]+getPaneSize(e)).removeClass(h+x+" "+h+y+x).addClass(h+w+" "+h+y+w),f.isSliding?r.addClass(h+_+" "+h+y+_):r.removeClass(h+_+" "+h+y+_),removeHover(0,r),l.resizable&&$.layout.plugins.draggable?r.draggable("enable").css("cursor",l.resizerCursor).attr("title",l.tips.Resize):f.isSliding||r.css("cursor","default"),a&&(a.removeClass(p+x+" "+p+y+x).addClass(p+w+" "+p+y+w).attr("title",l.tips.Close),removeHover(0,a),a.children(".content-closed").hide(),a.children(".content-open").css("display","block")),syncPinBtns(e,!f.isSliding),$.extend(f,elDims(n)),state.initialized&&(sizeHandles(),sizeContent(e,!0)),!t&&(state.initialized||l.triggerEventsOnLoad)&&n.is(":visible")&&(_runCallbacks("onopen_end",e),f.isShowing&&_runCallbacks("onshow_end",e),state.initialized&&_runCallbacks("onresize_end",e))},slideOpen=function(e){if(isInitialized()){var t=evtObj(e),n=evtPane.call(this,e),r=state[n],a=options[n].slideDelay_open;t&&t.stopImmediatePropagation(),r.isClosed&&t&&"mouseenter"===t.type&&a>0?timer.set(n+"_openSlider",l,a):l()}function l(){r.isClosed?r.isMoving||open(n,!0):bindStopSlidingEvents(n,!0)}},slideClose=function(e){if(isInitialized()){var t=evtObj(e),n=evtPane.call(this,e),r=options[n],a=state[n],l=a.isMoving?1e3:300;if(!a.isClosed&&!a.isResizing)if("click"===r.slideTrigger_close)f();else{if(r.preventQuickSlideClose&&a.isMoving)return;if(r.preventPrematureSlideClose&&t&&$.layout.isMouseOverElem(t,$Ps[n]))return;t?timer.set(n+"_closeSlider",f,max(r.slideDelay_close,l)):f()}}function f(){a.isClosed?bindStopSlidingEvents(n,!1):a.isMoving||close(n)}},slideToggle=function(e){var t=evtPane.call(this,e);toggle(t,!0)},lockPaneForFX=function(e,t){var n=$Ps[e],r=state[e],a=options[e],l=options.zIndexes;t?(showMasks(e,{animation:!0,objectsOnly:!0}),n.css({zIndex:l.pane_animate}),"south"==e?n.css({top:sC.inset.top+sC.innerHeight-n.outerHeight()}):"east"==e&&n.css({left:sC.inset.left+sC.innerWidth-n.outerWidth()})):(hideMasks(),n.css({zIndex:r.isSliding?l.pane_sliding:l.pane_normal}),"south"==e?n.css({top:"auto"}):"east"!=e||n.css("left").match(/\-99999/)||n.css({left:"auto"}),browser.msie&&a.fxOpacityFix&&"slide"!=a.fxName_open&&n.css("filter")&&1==n.css("opacity")&&n[0].style.removeAttribute("filter"))},bindStartSlidingEvents=function(e,t){var n=options[e],r=($Ps[e],$Rs[e]),a=n.slideTrigger_open.toLowerCase();!r||t&&!n.slidable||(a.match(/mouseover/)?a=n.slideTrigger_open="mouseenter":a.match(/(click|dblclick|mouseenter)/)||(a=n.slideTrigger_open="click"),n.resizerDblClickToggle&&a.match(/click/)&&r[t?"unbind":"bind"]("dblclick."+sID,toggle),r[t?"bind":"unbind"](a+"."+sID,slideOpen).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.tips.Slide:""))},bindStopSlidingEvents=function(e,t){var n=options[e],r=state[e],a=(_c[e],options.zIndexes),l=n.slideTrigger_close.toLowerCase(),f=t?"bind":"unbind",d=$Ps[e],h=$Rs[e];function p(t){timer.clear(e+"_closeSlider"),t.stopPropagation()}timer.clear(e+"_closeSlider"),t?(r.isSliding=!0,state.panesSliding[e]=!0,bindStartSlidingEvents(e,!1)):(r.isSliding=!1,delete state.panesSliding[e]),d.css("zIndex",t?a.pane_sliding:a.pane_normal),h.css("zIndex",t?a.pane_sliding+2:a.resizer_normal),l.match(/(click|mouseleave)/)||(l=n.slideTrigger_close="mouseleave"),h[f](l,slideClose),"mouseleave"===l&&(d[f]("mouseleave."+sID,slideClose),h[f]("mouseenter."+sID,p),d[f]("mouseenter."+sID,p)),t?"click"!==l||n.resizable||(h.css("cursor",t?n.sliderCursor:"default"),h.attr("title",t?n.tips.Close:"")):timer.clear(e+"_closeSlider")},makePaneFit=function(e,t,n,r){var a=options[e],l=state[e],f=_c[e],d=$Ps[e],h=$Rs[e],p="vert"===f.dir,y=!1;if(("center"===e||p&&l.noVerticalRoom)&&((y=l.maxHeight>=0)&&l.noRoom?(_showPane(e),h&&h.show(),l.isVisible=!0,l.noRoom=!1,p&&(l.noVerticalRoom=!1),_fixIframe(e)):y||l.noRoom||(_hidePane(e),h&&h.hide(),l.isVisible=!1,l.noRoom=!0)),"center"===e);else if(l.minSize<=l.maxSize){if(y=!0,l.size>l.maxSize)sizePane(e,l.maxSize,n,!0,r);else if(l.size<l.minSize)sizePane(e,l.minSize,n,!0,r);else if(h&&l.isVisible&&d.is(":visible")){var w=l.size+sC.inset[f.side];$.layout.cssNum(h,f.side)!=w&&h.css(f.side,w)}l.noRoom&&(l.wasOpen&&a.closable?a.autoReopen?open(e,!1,!0,!0):l.noRoom=!1:show(e,l.wasOpen,!0,!0))}else l.noRoom||(l.noRoom=!0,l.wasOpen=!l.isClosed&&!l.isSliding,l.isClosed||(a.closable?close(e,!0,!0):hide(e,!0)))},manualSizePane=function(e,t,n,r,a){if(isInitialized()){var l=evtPane.call(this,e),f=options[l],d=state[l],h=a||f.livePaneResizing&&!d.isResizing;d.autoResize=!1,sizePane(l,t,n,r,h)}},sizePane=function(e,t,n,r,a){if(isInitialized()){var l,f,d=evtPane.call(this,e),h=options[d],p=state[d],y=$Ps[d],w=$Rs[d],x=_c[d].side,_=_c[d].sizeType.toLowerCase(),S=p.isResizing&&!h.triggerEventsDuringLiveResize,k=!0!==r&&h.animatePaneSizing;$N.queue((function(e){if(setSizeLimits(d),l=p.size,t=_parseSize(d,t),t=max(t,_parseSize(d,h.minSize)),(t=min(t,p.maxSize))<p.minSize)return e(),void makePaneFit(d,!1,n);if(!a&&t===l)return e();if(p.newSize=t,!n&&state.initialized&&p.isVisible&&_runCallbacks("onresize_start",d),f=cssSize(d,t),k&&y.is(":visible")){var r=$.layout.effects.size[d]||$.layout.effects.size.all,w=h.fxSettings_size.easing||r.easing,x=options.zIndexes,S={};S[_]=f+"px",p.isMoving=!0,y.css({zIndex:x.pane_animate}).show().animate(S,h.fxSpeed_size,w,(function(){y.css({zIndex:p.isSliding?x.pane_sliding:x.pane_normal}),p.isMoving=!1,delete p.newSize,C(),e()}))}else y.css(_,f),delete p.newSize,y.is(":visible")?C():(p.size=t,$.extend(p,elDims(y))),e()}))}function C(){for(var e="width"===_?y.outerWidth():y.outerHeight(),r=[{pane:d,count:1,target:t,actual:e,correct:t===e,attempt:t,cssSize:f}],h=r[0],k={},C="Inaccurate size after resizing the "+d+"-pane.";!(h.correct||(k={pane:d,count:h.count+1,target:t},h.actual>t?k.attempt=max(0,h.attempt-(h.actual-t)):k.attempt=max(0,h.attempt+(t-h.actual)),k.cssSize=cssSize(d,k.attempt),y.css(_,k.cssSize),k.actual="width"==_?y.outerWidth():y.outerHeight(),k.correct=t===k.actual,1===r.length&&(_log(C,!1,!0),_log(h,!1,!0)),_log(k,!1,!0),r.length>3));)r.push(k),h=r[r.length-1];p.size=t,$.extend(p,elDims(y)),p.isVisible&&y.is(":visible")&&(w&&w.css(x,t+sC.inset[x]),sizeContent(d)),!n&&!S&&state.initialized&&p.isVisible&&_runCallbacks("onresize_end",d),n||(p.isSliding||sizeMidPanes("horz"==_c[d].dir?"":"center",S,a),sizeHandles());var E=_c.oppositeEdge[d];t<l&&state[E].noRoom&&(setSizeLimits(E),makePaneFit(E,!1,n)),r.length>1&&_log(C+"\nSee the Error Console for details.",!0,!0)}},sizeMidPanes=function(e,t,n){e=(e||"east,west,center").split(","),$.each(e,(function(e,r){if($Ps[r]){var a=options[r],l=state[r],f=$Ps[r],d=($Rs[r],!0),h={},p=$.layout.showInvisibly(f),y=calcNewCenterPaneDims();if($.extend(l,elDims(f)),"center"===r){if(!n&&l.isVisible&&y.width===l.outerWidth&&y.height===l.outerHeight)return f.css(p),!0;if($.extend(l,cssMinDims(r),{maxWidth:y.width,maxHeight:y.height}),h=y,l.newWidth=h.width,l.newHeight=h.height,h.width=cssW(f,h.width),h.height=cssH(f,h.height),d=h.width>=0&&h.height>=0,!state.initialized&&a.minWidth>y.width){var w=a.minWidth-l.outerWidth,x=options.east.minSize||0,_=options.west.minSize||0,S=state.east.size,k=state.west.size,C=S,E=k;if(w>0&&state.east.isVisible&&S>x&&(w-=S-(C=max(S-x,S-w))),w>0&&state.west.isVisible&&k>_&&(w-=k-(E=max(k-_,k-w))),0===w)return S&&S!=x&&sizePane("east",C,!0,!0,n),k&&k!=_&&sizePane("west",E,!0,!0,n),sizeMidPanes("center",t,n),void f.css(p)}}else{if(l.isVisible&&!l.noVerticalRoom&&$.extend(l,elDims(f),cssMinDims(r)),!n&&!l.noVerticalRoom&&y.height===l.outerHeight)return f.css(p),!0;h.top=y.top,h.bottom=y.bottom,l.newSize=y.height,h.height=cssH(f,y.height),l.maxHeight=h.height,(d=l.maxHeight>=0)||(l.noVerticalRoom=!0)}if(d?(!t&&state.initialized&&_runCallbacks("onresize_start",r),f.css(h),"center"!==r&&sizeHandles(r),!l.noRoom||l.isClosed||l.isHidden||makePaneFit(r),l.isVisible&&($.extend(l,elDims(f)),state.initialized&&sizeContent(r))):!l.noRoom&&l.isVisible&&makePaneFit(r),f.css(p),delete l.newSize,delete l.newWidth,delete l.newHeight,!l.isVisible)return!0;if("center"===r){var O=browser.isIE6||!browser.boxModel;$Ps.north&&(O||"IFRAME"==state.north.tagName)&&$Ps.north.css("width",cssW($Ps.north,sC.innerWidth)),$Ps.south&&(O||"IFRAME"==state.south.tagName)&&$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}!t&&state.initialized&&_runCallbacks("onresize_end",r)}}))},resizeAll=function(e){var t=sC.innerWidth,n=sC.innerHeight;if(evtPane(e),$N.is(":visible"))if(state.initialized){if(!0===e&&$.isPlainObject(options.outset)&&$N.css(options.outset),$.extend(sC,elDims($N,options.inset)),sC.outerHeight){if(!0===e&&setPanePosition(),!1===_runCallbacks("onresizeall_start"))return!1;var r,a;sC.innerHeight,sC.innerWidth;$.each(["south","north","east","west"],(function(e,t){$Ps[t]&&(r=options[t],(a=state[t]).autoResize&&a.size!=r.size?sizePane(t,r.size,!0,!0,!0):(setSizeLimits(t),makePaneFit(t,!1,!0,!0)))})),sizeMidPanes("",!0,!0),sizeHandles(),$.each(_c.allPanes,(function(e,t){$Ps[t]&&state[t].isVisible&&_runCallbacks("onresize_end",t)})),_runCallbacks("onresizeall_end")}}else _initLayoutElements()},resizeChildren=function(e,t){var n=evtPane.call(this,e);if(options[n].resizeChildren){t||refreshChildren(n);var r=children[n];$.isPlainObject(r)&&$.each(r,(function(e,t){t.destroyed||t.resizeAll()}))}},sizeContent=function(e,t){if(isInitialized()){var n=evtPane.call(this,e);n=n?n.split(","):_c.allPanes,$.each(n,(function(e,n){var r=$Ps[n],a=$Cs[n],l=options[n],f=state[n],d=f.content;if(!r||!a||!r.is(":visible"))return!0;if((a.length||(initContent(n,!1),a))&&!1!==_runCallbacks("onsizecontent_start",n)){(!f.isMoving&&!f.isResizing||l.liveContentResizing||t||null==d.top)&&(y(),d.hiddenFooters>0&&"hidden"===r.css("overflow")&&(r.css("overflow","visible"),y(),r.css("overflow","hidden")));var h=f.innerHeight-(d.spaceAbove-f.css.paddingTop)-(d.spaceBelow-f.css.paddingBottom);a.is(":visible")&&d.height==h||(setOuterHeight(a,h,!0),d.height=h),state.initialized&&_runCallbacks("onsizecontent_end",n)}function p(e){return max(f.css.paddingBottom,parseInt(e.css("marginBottom"),10)||0)}function y(){var e=options[n].contentIgnoreSelector,t=a.nextAll().not(".ui-layout-mask").not(e||":lt(0)"),r=t.filter(":visible"),l=r.filter(":last");(d={top:a[0].offsetTop,height:a.outerHeight(),numFooters:t.length,hiddenFooters:t.length-r.length,spaceBelow:0}).spaceAbove=d.top,d.bottom=d.top+d.height,l.length?d.spaceBelow=l[0].offsetTop+l.outerHeight()-d.bottom+p(l):d.spaceBelow=p(a)}}))}},sizeHandles=function(e){var t=evtPane.call(this,e);t=t?t.split(","):_c.borderPanes,$.each(t,(function(e,t){var n,r=options[t],a=state[t],l=$Ps[t],f=$Rs[t],d=$Ts[t];if(l&&f){var h,p,y,w=_c[t].dir,x=a.isClosed?"_closed":"_open",_=r["spacing"+x],S=r["togglerAlign"+x],k=r["togglerLength"+x];if(0!==_){if(a.noRoom||a.isHidden||f.show(),"horz"===w?(h=sC.innerWidth,a.resizerLength=h,p=$.layout.cssNum(l,"left"),f.css({width:cssW(f,h),height:cssH(f,_),left:p>-9999?p:sC.inset.left})):(h=l.outerHeight(),a.resizerLength=h,f.css({height:cssH(f,h),width:cssW(f,_),top:sC.inset.top+getPaneSize("north",!0)})),removeHover(r,f),d){if(0===k||a.isSliding&&r.hideTogglerOnSlide)return void d.hide();if(d.show(),!(k>0)||"100%"===k||k>h)k=h,y=0;else if(isStr(S))switch(S){case"top":case"left":y=0;break;case"bottom":case"right":y=h-k;break;default:y=round((h-k)/2)}else{var C=parseInt(S,10);y=S>=0?C:h-k+C}if("horz"===w){var E=cssW(d,k);d.css({width:E,height:cssH(d,_),left:y,top:0}),d.children(".content").each((function(){(n=$(this)).css("marginLeft",round((E-n.outerWidth())/2))}))}else{var O=cssH(d,k);d.css({height:O,width:cssW(d,_),top:y,left:0}),d.children(".content").each((function(){(n=$(this)).css("marginTop",round((O-n.outerHeight())/2))}))}removeHover(0,d)}state.initialized||!r.initHidden&&!a.isHidden||(f.hide(),d&&d.hide())}else f.hide()}}))},enableClosable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Ts[t],r=options[t];n&&(r.closable=!0,n.bind("click."+sID,(function(e){e.stopPropagation(),toggle(t)})).css("visibility","visible").css("cursor","pointer").attr("title",state[t].isClosed?r.tips.Open:r.tips.Close).show())}},disableClosable=function(e,t){if(isInitialized()){var n=evtPane.call(this,e),r=$Ts[n];r&&(options[n].closable=!1,state[n].isClosed&&open(n,!1,!0),r.unbind("."+sID).css("visibility",t?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&n.data("draggable")&&(options[t].slidable=!0,state[t].isClosed&&bindStartSlidingEvents(t,!0))}},disableSlidable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&(options[t].slidable=!1,state[t].isSliding?close(t,!1,!0):(bindStartSlidingEvents(t,!1),n.css("cursor","default").attr("title",""),removeHover(null,n[0])))}},enableResizable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t],r=options[t];n&&n.data("draggable")&&(r.resizable=!0,n.draggable("enable"),state[t].isClosed||n.css("cursor",r.resizerCursor).attr("title",r.tips.Resize))}},disableResizable=function(e){if(isInitialized()){var t=evtPane.call(this,e),n=$Rs[t];n&&n.data("draggable")&&(options[t].resizable=!1,n.draggable("disable").css("cursor","default").attr("title",""),removeHover(null,n[0]))}},swapPanes=function(e,t){if(isInitialized()){var n=evtPane.call(this,e);if(state[n].edge=t,state[t].edge=n,!1===_runCallbacks("onswap_start",n)||!1===_runCallbacks("onswap_start",t))return state[n].edge=n,void(state[t].edge=t);var r=f(n),a=f(t),l={};return l[n]=r?r.state.size:0,l[t]=a?a.state.size:0,$Ps[n]=!1,$Ps[t]=!1,state[n]={},state[t]={},$Ts[n]&&$Ts[n].remove(),$Ts[t]&&$Ts[t].remove(),$Rs[n]&&$Rs[n].remove(),$Rs[t]&&$Rs[t].remove(),$Rs[n]=$Rs[t]=$Ts[n]=$Ts[t]=!1,d(r,t),d(a,n),r=a=l=null,$Ps[n]&&$Ps[n].css(_c.visible),$Ps[t]&&$Ps[t].css(_c.visible),resizeAll(),_runCallbacks("onswap_end",n),void _runCallbacks("onswap_end",t)}function f(e){var t=$Ps[e],n=$Cs[e];return!!t&&{pane:e,P:!!t&&t[0],C:!!n&&n[0],state:$.extend(!0,{},state[e]),options:$.extend(!0,{},options[e])}}function d(e,t){if(e){var n,r,a=e.P,f=e.C,d=e.pane,h=_c[t],p=$.extend(!0,{},state[t]),y=options[t],w={resizerCursor:y.resizerCursor};$.each("fxName,fxSpeed,fxSettings".split(","),(function(e,t){w[t+"_open"]=y[t+"_open"],w[t+"_close"]=y[t+"_close"],w[t+"_size"]=y[t+"_size"]})),$Ps[t]=$(a).data({layoutPane:Instance[t],layoutEdge:t}).css(_c.hidden).css(h.cssReq),$Cs[t]=!!f&&$(f),options[t]=$.extend(!0,{},e.options,w),state[t]=$.extend(!0,{},e.state),n=new RegExp(y.paneClass+"-"+d,"g"),a.className=a.className.replace(n,y.paneClass+"-"+t),initHandles(t),h.dir!=_c[d].dir?(r=l[t]||0,setSizeLimits(t),r=max(r,state[t].minSize),manualSizePane(t,r,!0,!0)):$Rs[t].css(h.side,sC.inset[h.side]+(state[t].isVisible?getPaneSize(t):0)),e.state.isVisible&&!p.isVisible?setAsOpen(t,!0):(setAsClosed(t),bindStartSlidingEvents(t,!0)),e=null}}},syncPinBtns=function(e,t){$.layout.plugins.buttons&&$.each(state[e].pins,(function(n,r){$.layout.buttons.setPinState(Instance,$(r),e,t)}))};function keyDown(e){if(!e)return!0;var t=e.keyCode;if(t<33)return!0;var n,r,a,l,f={38:"north",40:"south",37:"west",39:"east"},d=(e.altKey,e.shiftKey),h=e.ctrlKey;return h&&t>=37&&t<=40&&options[f[t]].enableCursorHotkey?l=f[t]:(h||d)&&$.each(_c.borderPanes,(function(e,f){if(n=options[f],r=n.customHotkey,a=n.customHotkeyModifier,(d&&"SHIFT"==a||h&&"CTRL"==a||h&&d)&&r&&t===(isNaN(r)||r<=9?r.toUpperCase().charCodeAt(0):r))return l=f,!1})),!(l&&$Ps[l]&&options[l].closable&&!state[l].isHidden)||(toggle(l),e.stopPropagation(),e.returnValue=!1,!1)}function allowOverflow(e){var t;if(isInitialized()&&(this&&this.tagName&&(e=this),isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each((function(){if($(this).data("layoutRole"))return t=$(this),!1})),t&&t.length)){var n=t.data("layoutEdge"),r=state[n];if(r.cssSaved&&resetOverflow(n),r.isSliding||r.isResizing||r.isClosed)r.cssSaved=!1;else{var a={zIndex:options.zIndexes.resizer_normal+1},l={},f=t.css("overflow"),d=t.css("overflowX"),h=t.css("overflowY");"visible"!=f&&(l.overflow=f,a.overflow="visible"),d&&!d.match(/(visible|auto)/)&&(l.overflowX=d,a.overflowX="visible"),h&&!h.match(/(visible|auto)/)&&(l.overflowY=d,a.overflowY="visible"),r.cssSaved=l,t.css(a),$.each(_c.allPanes,(function(e,t){t!=n&&resetOverflow(t)}))}}}function resetOverflow(e){var t;if(isInitialized()&&(this&&this.tagName&&(e=this),isStr(e)?t=$Ps[e]:$(e).data("layoutRole")?t=$(e):$(e).parents().each((function(){if($(this).data("layoutRole"))return t=$(this),!1})),t&&t.length)){var n=t.data("layoutEdge"),r=state[n],a=r.cssSaved||{};r.isSliding||r.isResizing||t.css("zIndex",options.zIndexes.pane_normal),t.css(a),r.cssSaved=!1}}try{var $N=$(this).eq(0);if(!$N.length)return _log(options.errors.containerMissing);if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout")}catch(e){console.log("eeeee",e)}var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id,Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:!1,children:children,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===_create()?null:Instance}})(jQuery),function(e){e.ui||(e.ui={}),e.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(t){for(var n,r=document.cookie,a=r?r.split(";"):[],l=0,f=a.length;l<f;l++)if((n=e.trim(a[l]).split("="))[0]==t)return decodeURIComponent(n[1]);return null},write:function(t,n,r){var a="",l="",f=!1,d=r||{},h=d.expires||null,p=e.type(h);"date"===p?l=h:"string"===p&&h>0&&(h=parseInt(h,10),p="number"),"number"===p&&(l=new Date,h>0?l.setDate(l.getDate()+h):(l.setFullYear(1970),f=!0)),l&&(a+=";expires="+l.toUTCString()),d.path&&(a+=";path="+d.path),d.domain&&(a+=";domain="+d.domain),d.secure&&(a+=";secure"),document.cookie=t+"="+(f?"":encodeURIComponent(n))+a},clear:function(t){e.ui.cookie.write(t,"",{expires:-1})}},e.cookie||(e.cookie=function(t,n,r){var a=e.ui.cookie;if(null===n)a.clear(t);else{if(void 0===n)return a.read(t);a.write(t,n,r)}}),e.layout.plugins.stateManagement=!0,e.layout.config.optionRootKeys.push("stateManagement"),e.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},e.layout.optionsMap.layout.push("stateManagement"),e.layout.state={saveCookie:function(t,n,r){var a=t.options,l=a.stateManagement,f=e.extend(!0,{},l.cookie,r||null),d=t.state.stateData=t.readState(n||l.stateKeys);return e.ui.cookie.write(f.name||a.name||"Layout",e.layout.state.encodeJSON(d),f),e.extend(!0,{},d)},deleteCookie:function(t){var n=t.options;e.ui.cookie.clear(n.stateManagement.cookie.name||n.name||"Layout")},readCookie:function(t){var n=t.options,r=e.ui.cookie.read(n.stateManagement.cookie.name||n.name||"Layout");return r?e.layout.state.decodeJSON(r):{}},loadCookie:function(t){var n=e.layout.state.readCookie(t);return n&&(t.state.stateData=e.extend(!0,{},n),t.loadState(n)),n},loadState:function(t,n,r){if(e.isPlainObject(n)&&!e.isEmptyObject(n)){n=t.state.stateData=e.layout.transformData(n);var a=t.options.stateManagement;if(r=e.extend({animateLoad:!1,includeChildren:a.includeChildren},r),t.state.initialized){var l,f,d,h,p,y,w=!r.animateLoad;if(e.each(e.layout.config.borderPanes,(function(r,a){x=n[a],e.isPlainObject(x)&&(s=x.size,l=x.initClosed,f=x.initHidden,ar=x.autoResize,d=t.state[a],h=d.isVisible,ar&&(d.autoResize=ar),h||t._sizePane(a,s,!1,!1,!1),!0===f?t.hide(a,w):!0===l?t.close(a,!1,w):!1===l?t.open(a,!1,w):!1===f&&t.show(a,!1,w),h&&t._sizePane(a,s,!1,!1,w))})),r.includeChildren)e.each(t.children,(function(t,r){(p=n[t]?n[t].children:0)&&r&&e.each(r,(function(e,t){y=p[e],t&&y&&t.loadState(y)}))}))}else{var x=e.extend(!0,{},n);e.each(e.layout.config.allPanes,(function(e,t){x[t]&&delete x[t].children})),e.extend(!0,t.options,x)}}},readState:function(t,n){"string"===e.type(n)&&(n={keys:n}),n||(n={});var r,a,l,f,d,h,p,y=t.options.stateManagement,w=n.includeChildren,x=void 0!==w?w:y.includeChildren,_=n.stateKeys||y.stateKeys,S={isClosed:"initClosed",isHidden:"initHidden"},k=t.state,C=e.layout.config.allPanes,E={};e.isArray(_)&&(_=_.join(","));for(var O=0,j=(_=_.replace(/__/g,".").split(",")).length;O<j;O++)a=(r=_[O].split("."))[0],l=r[1],e.inArray(a,C)<0||null!=(f=k[a][l])&&("isClosed"==l&&k[a].isSliding&&(f=!0),(E[a]||(E[a]={}))[S[l]?S[l]:l]=f);return x&&e.each(C,(function(n,r){h=t.children[r],d=k.stateData[r],e.isPlainObject(h)&&!e.isEmptyObject(h)&&((p=E[r]||(E[r]={})).children||(p.children={}),e.each(h,(function(t,n){n.state.initialized?p.children[t]=e.layout.state.readState(n):d&&d.children&&d.children[t]&&(p.children[t]=e.extend(!0,{},d.children[t]))})))})),E},encodeJSON:function(t){return function t(n){var r,a,l,f=[],d=0,h=e.isArray(n);for(r in n)"string"==(l=typeof(a=n[r]))?a='"'+a+'"':"object"==l&&(a=t(a)),f[d++]=(h?"":'"'+r+'":')+a;return(h?"[":"{")+f.join(",")+(h?"]":"}")}(t)},decodeJSON:function(t){try{return e.parseJSON?e.parseJSON(t):window.eval("("+t+")")||{}}catch(e){return{}}},_create:function(t){var n=e.layout.state,r=t.options.stateManagement;if(e.extend(t,{readCookie:function(){return n.readCookie(t)},deleteCookie:function(){n.deleteCookie(t)},saveCookie:function(e,r){return n.saveCookie(t,e,r)},loadCookie:function(){return n.loadCookie(t)},loadState:function(e,r){n.loadState(t,e,r)},readState:function(e){return n.readState(t,e)},encodeJSON:n.encodeJSON,decodeJSON:n.decodeJSON}),t.state.stateData={},r.autoLoad)if(e.isPlainObject(r.autoLoad))e.isEmptyObject(r.autoLoad)||t.loadState(r.autoLoad);else if(r.enabled)if(e.isFunction(r.autoLoad)){var a={};try{a=r.autoLoad(t,t.state,t.options,t.options.name||"")}catch(e){}a&&e.isPlainObject(a)&&!e.isEmptyObject(a)&&t.loadState(a)}else t.loadCookie()},_unload:function(t){var n=t.options.stateManagement;if(n.enabled&&n.autoSave)if(e.isFunction(n.autoSave))try{n.autoSave(t,t.state,t.options,t.options.name||"")}catch(e){}else t.saveCookie()}},e.layout.onCreate.push(e.layout.state._create),e.layout.onUnload.push(e.layout.state._unload),e.layout.plugins.buttons=!0,e.layout.defaults.autoBindCustomButtons=!1,e.layout.optionsMap.layout.push("autoBindCustomButtons"),e.layout.buttons={init:function(t){var n,r=t.options.name||"";e.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),(function(a,l){e.each(e.layout.config.borderPanes,(function(a,f){e(".ui-layout-button-"+l+"-"+f).each((function(){null!=(n=e(this).data("layoutName")||e(this).attr("layoutName"))&&n!==r||t.bindButton(this,l,f)}))}))}))},get:function(t,n,r,a){var l=e(n),f=t.options,d=f.errors.addButtonError;if(l.length)if(e.inArray(r,e.layout.config.borderPanes)<0)e.layout.msg(d+" "+f.errors.pane+": "+r,!0),l=e("");else{var h=f[r].buttonClass+"-"+a;l.addClass(h+" "+h+"-"+r).data("layoutName",f.name)}else e.layout.msg(d+" "+f.errors.selector+": "+n,!0);return l},bind:function(t,n,r,a){var l=e.layout.buttons;switch(r.toLowerCase()){case"toggle":l.addToggle(t,n,a);break;case"open":l.addOpen(t,n,a);break;case"close":l.addClose(t,n,a);break;case"pin":l.addPin(t,n,a);break;case"toggle-slide":l.addToggle(t,n,a,!0);break;case"open-slide":l.addOpen(t,n,a,!0)}return t},addToggle:function(t,n,r,a){return e.layout.buttons.get(t,n,r,"toggle").click((function(e){t.toggle(r,!!a),e.stopPropagation()})),t},addOpen:function(t,n,r,a){return e.layout.buttons.get(t,n,r,"open").attr("title",t.options[r].tips.Open).click((function(e){t.open(r,!!a),e.stopPropagation()})),t},addClose:function(t,n,r){return e.layout.buttons.get(t,n,r,"close").attr("title",t.options[r].tips.Close).click((function(e){t.close(r),e.stopPropagation()})),t},addPin:function(t,n,r){var a=e.layout.buttons,l=a.get(t,n,r,"pin");if(l.length){var f=t.state[r];l.click((function(n){a.setPinState(t,e(this),r,f.isSliding||f.isClosed),f.isSliding||f.isClosed?t.open(r):t.close(r),n.stopPropagation()})),a.setPinState(t,l,r,!f.isClosed&&!f.isSliding),f.pins.push(n)}return t},setPinState:function(e,t,n,r){var a=t.attr("pin");if(!a||r!==("down"==a)){var l=e.options[n],f=l.buttonClass+"-pin",d=f+"-"+n,h=f+"-up "+d+"-up",p=f+"-down "+d+"-down";t.attr("pin",r?"down":"up").attr("title",r?l.tips.Unpin:l.tips.Pin).removeClass(r?h:p).addClass(r?p:h)}},syncPinBtns:function(t,n,r){e.each(t.state[n].pins,(function(a,l){e.layout.buttons.setPinState(t,e(l),n,r)}))},_load:function(t){var n=e.layout.buttons;e.extend(t,{bindButton:function(e,r,a){return n.bind(t,e,r,a)},addToggleBtn:function(e,r,a){return n.addToggle(t,e,r,a)},addOpenBtn:function(e,r,a){return n.addOpen(t,e,r,a)},addCloseBtn:function(e,r){return n.addClose(t,e,r)},addPinBtn:function(e,r){return n.addPin(t,e,r)}});for(var r=0;r<4;r++){var a=e.layout.config.borderPanes[r];t.state[a].pins=[]}t.options.autoBindCustomButtons&&n.init(t)},_unload:function(e){}},e.layout.onLoad.push(e.layout.buttons._load),e.layout.plugins.browserZoom=!0,e.layout.defaults.browserZoomCheckInterval=1e3,e.layout.optionsMap.layout.push("browserZoomCheckInterval"),e.layout.browserZoom={_init:function(t){!1!==e.layout.browserZoom.ratio()&&e.layout.browserZoom._setTimer(t)},_setTimer:function(t){if(!t.destroyed){var n=t.options,r=t.state,a=t.hasParentLayout?5e3:Math.max(n.browserZoomCheckInterval,100);setTimeout((function(){if(!t.destroyed&&n.resizeWithWindow){var a=e.layout.browserZoom.ratio();a!==r.browserZoom&&(r.browserZoom=a,t.resizeAll()),e.layout.browserZoom._setTimer(t)}}),a)}},ratio:function(){var t,n,r,a=window,l=screen,f=document,d=f.documentElement||f.body,h=e.layout.browser,p=h.version;return!(h.msie&&p>8||!h.msie)&&(l.deviceXDPI&&l.systemXDPI?y(l.deviceXDPI,l.systemXDPI):h.webkit&&(t=f.body.getBoundingClientRect)?y(t.left-t.right,f.body.offsetWidth):h.webkit&&(n=a.outerWidth)?y(n,a.innerWidth):!(!(n=l.width)||!(r=d.clientWidth))&&y(n,r));function y(e,t){return(parseInt(e,10)/parseInt(t,10)*100).toFixed()}}},e.layout.onReady.push(e.layout.browserZoom._init)}(jQuery)},94432:function(){!function(e,t,n){"use strict";e.map(["localStorage","sessionStorage"],(function(r){var a={cookiePrefix:"fallback:"+r+":",cookieOptions:{path:"/",domain:n.domain,expires:"localStorage"===r?{expires:365}:void 0}};try{e.support[r]=r in t&&null!==t[r]}catch(t){e.support[r]=!1}e[r]=function(l,f){var d=e.extend({},a,e[r].options);return this.getItem=function(n){var a=function(n){return JSON.parse(e.support[r]?t[r].getItem(n):e.cookie(d.cookiePrefix+n))};if("string"==typeof n)return a(n);for(var l=[],f=n.length;f--;)l[f]=a(n[f]);return l},this.setItem=function(n,a){return a=JSON.stringify(a),e.support[r]?t[r].setItem(n,a):e.cookie(d.cookiePrefix+n,a,d.cookieOptions)},this.removeItem=function(n){return e.support[r]?t[r].removeItem(n):e.cookie(d.cookiePrefix+n,null,e.extend(d.cookieOptions,{expires:-1}))},this.clear=function(){if(e.support[r])return t[r].clear();var a=new RegExp("^"+d.cookiePrefix,""),l=e.extend(d.cookieOptions,{expires:-1});n.cookie&&""!==n.cookie&&e.map(n.cookie.split(";"),(function(t){a.test(t=e.trim(t))&&e.cookie(t.substr(0,t.indexOf("=")),null,l)}))},void 0!==l?void 0!==f?null===f?this.removeItem(l):this.setItem(l,f):this.getItem(l):this},e[r].options=a}))}(jQuery,window,document)},20789:function(){!function(e){if(e.support.touch="ontouchend"in document,e.support.touch){var t,n=e.ui.mouse.prototype,r=n._mouseInit,a=n._mouseDestroy;n._touchStart=function(e){!t&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,this._touchMoved=!1,l(e,"mouseover"),l(e,"mousemove"),l(e,"mousedown"))},n._touchMove=function(e){t&&(this._touchMoved=!0,l(e,"mousemove"))},n._touchEnd=function(e){t&&(l(e,"mouseup"),l(e,"mouseout"),this._touchMoved||l(e,"click"),t=!1)},n._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)},n._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),a.call(t)}}function l(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}}}(jQuery)},81154:function(){angular.module("ng-context-menu",[]).factory("ContextMenuService",(function(){return{element:null,menuElement:null,container:null}})).directive("contextMenu",["$document","ContextMenuService",function(e,t){return{restrict:"A",scope:{callback:"&contextMenu",disabled:"&contextMenuDisabled"},link:function(n,r,a){var l=!1;function f(e){e.removeClass("open"),l=!1}function d(e){!n.disabled()&&l&&27===e.keyCode&&n.$apply((function(){f(t.menuElement)}))}function h(e){n.disabled()||!l||2===e.button&&e.target===t.element||n.$apply((function(){f(t.menuElement)}))}r.bind("contextmenu",(function(r){n.disabled()||(null!==t.menuElement&&f(t.menuElement),t.menuElement=angular.element(document.getElementById(a.target)),void 0!==a.contextMenuContainer&&(t.container=angular.element(a.contextMenuContainer)),t.element=r.target,r.preventDefault(),r.stopPropagation(),n.$apply((function(){n.callback({$event:r}),function(t,n,r){n.addClass("open"),r&&r.append(n);var a=e[0].documentElement,f=(window.pageXOffset||a.scrollLeft)-(a.clientLeft||0),d=(window.pageYOffset||a.scrollTop)-(a.clientTop||0),h=n[0].scrollHeight,p=a.clientHeight+d,y=h+t.pageY,w=Math.max(t.pageY-d,0);y>p&&(w-=y-p),n.css("top",w+"px"),n.css("left",Math.max(t.pageX-f,0)+"px"),l=!0}(r,t.menuElement,t.container)})))})),e.bind("keyup",d),e.bind("click",h),e.bind("contextmenu",h),n.$on("$destroy",(function(){e.unbind("keyup",d),e.unbind("click",h),e.unbind("contextmenu",h)}))}}}])},42070:function(){!function(e,t,n){"use strict";var r=n.PassField=n.PassField||{};r.Config=r.Config||{},r.Config.locales={en:{lower:!0,msg:{pass:"password",and:"and",showPass:"Show password",hidePass:"Hide password",genPass:"Random password",passTooShort:"password is too short (min. length: {})",noCharType:"password must contain {}",digits:"digits",letters:"letters",letters_up:"letters in UPPER case",symbols:"symbols",inBlackList:"password is in list of top used passwords",passRequired:"password is required",equalTo:"password is equal to login",repeat:"password consists of repeating characters",badChars:"password contains bad characters: “{}”",weakWarn:"weak",invalidPassWarn:"*",weakTitle:"This password is weak",generateMsg:"To generate a strong password, click {} button."}},de:{lower:!1,msg:{pass:"Passwort",and:"und",showPass:"Passwort anzeigen",hidePass:"Passwort verbergen",genPass:"Zufallspasswort",passTooShort:"Passwort ist zu kurz (Mindestlänge: {})",noCharType:"Passwort muss {} enthalten",digits:"Ziffern",letters:"Buchstaben",letters_up:"Buchstaben in GROSSSCHRIFT",symbols:"Symbole",inBlackList:"Passwort steht auf der Liste der beliebtesten Passwörter",passRequired:"Passwort wird benötigt",equalTo:"Passwort ist wie Anmeldung",repeat:"Passwort besteht aus sich wiederholenden Zeichen",badChars:"Passwort enthält ungültige Zeichen: “{}”",weakWarn:"Schwach",invalidPassWarn:"*",weakTitle:"Dieses Passwort ist schwach",generateMsg:"Klicken Sie auf den {}-Button, um ein starkes Passwort zu generieren."}},fr:{lower:!0,msg:{pass:"mot de passe",and:"et",showPass:"Montrer le mot de passe",hidePass:"Cacher le mot de passe",genPass:"Mot de passe aléatoire",passTooShort:"le mot de passe est trop court (min. longueur: {})",noCharType:"le mot de passe doit contenir des {}",digits:"chiffres",letters:"lettres",letters_up:"lettres en MAJUSCULES",symbols:"symboles",inBlackList:"le mot de passe est dans la liste des plus utilisés",passRequired:"le mot de passe est requis",equalTo:"le mot de passe est le même que l'identifiant",repeat:"le mot de passe est une répétition de caractères",badChars:"le mot de passe contient des caractères incorrects: “{}”",weakWarn:"faible",invalidPassWarn:"*",weakTitle:"Ce mot de passe est faible",generateMsg:"Pour créer un mot de passe fort cliquez sur le bouton {}."}},it:{lower:!1,msg:{pass:"password",and:"e",showPass:"Mostra password",hidePass:"Nascondi password",genPass:"Password casuale",passTooShort:"la password è troppo breve (lunghezza min.: {})",noCharType:"la password deve contenere {}",digits:"numeri",letters:"lettere",letters_up:"lettere in MAIUSCOLO",symbols:"simboli",inBlackList:"la password è nella lista delle password più usate",passRequired:"è necessaria una password",equalTo:"la password è uguale al login",repeat:"la password è composta da caratteri che si ripetono",badChars:"la password contiene caratteri non accettati: “{}”",weakWarn:"debole",invalidPassWarn:"*",weakTitle:"Questa password è debole",generateMsg:"Per generare una password forte, clicca sul tasto {}."}},ru:{lower:!0,msg:{pass:"пароль",and:"и",showPass:"Показать пароль",hidePass:"Скрыть пароль",genPass:"Случайный пароль",passTooShort:"пароль слишком короткий (мин. длина: {})",noCharType:"в пароле должны быть {}",digits:"цифры",letters:"буквы",letters_up:"буквы в ВЕРХНЕМ регистре",symbols:"символы",inBlackList:"этот пароль часто используется в Интернете",passRequired:"пароль обязателен",equalTo:"пароль совпадает с логином",repeat:"пароль состоит из повторяющихся символов",badChars:"в пароле есть недопустимые символы: «{}»",weakWarn:"слабый",invalidPassWarn:"*",weakTitle:"Пароль слабый, его легко взломать",generateMsg:"Чтобы сгенерировать пароль, нажмите кнопку {}."}},ua:{lower:!0,msg:{pass:"пароль",and:"i",showPass:"Показати пароль",hidePass:"Сховати пароль",genPass:"Випадковий пароль",passTooShort:"пароль є занадто коротким (мiн. довжина: {})",noCharType:"пароль повинен містити {}",digits:"цифри",letters:"букви",letters_up:"букви у ВЕРХНЬОМУ регістрі",symbols:"cимволи",inBlackList:"пароль входить до списку паролей, що використовуються найчастіше",passRequired:"пароль є обов'язковим",equalTo:"пароль та логін однакові",repeat:"пароль містить повторювані символи",badChars:"пароль містить неприпустимі символи: «{}»",weakWarn:"слабкий",invalidPassWarn:"*",weakTitle:"Цей пароль є слабким",generateMsg:"Щоб ​​створити надійний пароль, натисніть кнопку {}."}},es:{lower:!0,msg:{pass:"contraseña",and:"y",showPass:"Mostrar contraseña",hidePass:"Ocultar contraseña",genPass:"Contraseña aleatoria",passTooShort:"contraseña demasiado corta (longitud mín.: {})",noCharType:"la contraseña debe contener {}",digits:"dígitos",letters:"letras",letters_up:"letras en MAYÚSCULAS",symbols:"símbolos",inBlackList:"la contraseña está en la lista de las contraseñas más usadas",passRequired:"se requiere contraseña",equalTo:"la contraseña es igual al inicio de sesión",repeat:"la contraseña tiene caracteres repetidos",badChars:"la contraseña contiene caracteres no permitidos: “{}”",weakWarn:"débil",invalidPassWarn:"*",weakTitle:"Esta contraseña es débil",generateMsg:"Para generar una contraseña segura, haga clic en el botón de {}."}},el:{lower:!0,msg:{pass:"πρόσβασης",and:"και",showPass:"Προβολή κωδικού πρόσβασης",hidePass:"Απόκρυψη κωδικού πρόσβασης",genPass:"Τυχαίος κωδικός πρόσβασης",passTooShort:"ο κωδικός πρόσβασης είναι πολύ μικρός (ελάχιστο μήκος: {})",noCharType:"ο κωδικός πρόσβασης πρέπει να περιέχει {}",digits:"ψηφία",letters:"λατινικά γράμματα",letters_up:"λατινικά γράμματα με ΚΕΦΑΛΑΙΑ",symbols:"σύμβολα",inBlackList:"ο κωδικός πρόσβασης βρίσκεται σε κατάλογο δημοφιλέστερων κωδικών",passRequired:"απαιτείται κωδικός πρόσβασης",equalTo:"ο κωδικός είναι όμοιος με το όνομα χρήστη",repeat:"ο κωδικός αποτελείται από επαναλαμβανόμενους χαρακτήρες",badChars:"ο κωδικός περιέχει μη επιτρεπτούς χαρακτήρες: “{}”",weakWarn:"αδύναμος",invalidPassWarn:"*",weakTitle:"Αυτός ο κωδικός πρόσβασης είναι αδύναμος",generateMsg:"Για να δημιουργήσετε δυνατό κωδικό πρόσβασης, κάντε κλικ στο κουμπί {}."}},pt:{lower:!0,msg:{pass:"senha",and:"e",showPass:"Mostrar senha",hidePass:"Ocultar senha",genPass:"Senha aleatória",passTooShort:"senha muito curta (tamanho mínimo: {})",noCharType:"Senha deve conter {}",digits:"dígito",letters:"letras",letters_up:"letras maiúsculas",symbols:"símbolos",inBlackList:"senha está na lista das senhas mais usadas",passRequired:"senha é obrigatória",equalTo:"senha igual ao login",repeat:"senha consiste em uma repetição de caracteres",badChars:"senha tem caracteres inválidos: “{}”",weakWarn:"fraca",invalidPassWarn:"*",weakTitle:"Esta senha é fraca",generateMsg:"Para gerar uma senha forte, clique no botão {}."}}}}(window.jQuery,document,window),function(e,t,n,r){"use strict";var a=n.PassField=n.PassField||{};a.CharTypes={DIGIT:"digits",LETTER:"letters",LETTER_UP:"letters_up",SYMBOL:"symbols",UNKNOWN:"unknown"},a.CheckModes={MODERATE:0,STRICT:1},a.Config={defaults:{pattern:"abcdef12",acceptRate:.8,allowEmpty:!0,isMasked:!0,showToggle:!0,showGenerate:!0,showWarn:!0,showTip:!0,tipPopoverStyle:{},strengthCheckTimeout:500,validationCallback:null,blackList:[],locale:"",localeMsg:{},warnMsgClassName:"help-inline",errorWrapClassName:"error",allowAnyChars:!0,checkMode:a.CheckModes.MODERATE,chars:{digits:"1234567890",letters:"abcdefghijklmnopqrstuvwxyzßабвгедёжзийклмнопрстуфхцчшщъыьэюяґєåäâáàãéèêëíìîїóòôõöüúùûýñçøåæþðαβγδεζηθικλμνξοπρσςτυφχψω",letters_up:"ABCDEFGHIJKLMNOPQRSTUVWXYZАБВГЕДЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯҐЄÅÄÂÁÀÃÉÈÊËÍÌÎЇÓÒÔÕÖÜÚÙÛÝÑÇØÅÆÞÐΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩ",symbols:"@#$%^&*()-_=+[]{};:<>/?!"},events:{generated:null,switched:null},nonMatchField:null,length:{min:null,max:null},maskBtn:{textMasked:"abc",textUnmasked:"&bull;&bull;&bull;",className:!1,classMasked:!1,classUnmasked:!1}},locales:a.Config?a.Config.locales:{},blackList:["password","123456","12345678","abc123","qwerty","monkey","letmein","dragon","111111","baseball","iloveyou","trustno1","1234567","sunshine","master","123123","welcome","shadow","ashley","football","jesus","michael","ninja","mustang","password1","p@ssw0rd","miss","root","secret"],generationChars:{digits:"1234567890",letters:"abcdefghijklmnopqrstuvwxyz",letters_up:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},dataAttr:"PassField.Field"},a.Field=function(f,d){function h(t){if(ue.showTip)if(ue.tipPopoverStyle&&e&&"function"==typeof e.fn.popover)e(ce.mainInput).popover(l.extend({title:null,placement:ue.tipPopoverStyle.placement||function(t,r){var a=e(r).position().top-e(n).scrollTop(),l=e(n).height()-a;return l>300||l>a?"bottom":"top"},animation:!1},ue.tipPopoverStyle,{trigger:"manual",html:!0,content:function(){return be}}));else{ce.tip=F("div",{id:"tip",className:"tip"},{position:"absolute",margin:"0",padding:"0",width:t.width+"px"}),G(ce.mainInput,ce.tip);var r=F("div",{id:"tip-arr-wrap",className:"tip-arr-wrap"});ce.tip.appendChild(r),r.appendChild(F("div",{id:"tip-arr",className:"tip-arr"})),r.appendChild(F("div",{id:"tip-arr-in",className:"tip-arr-in"})),ce.tipBody=F("div",{id:"tip-body",className:"tip-body"}),ce.tip.appendChild(ce.tipBody)}}function p(){ce.genBtn&&(ce.genBtn.style.display=pe||me&&!ge?"block":"none"),ce.maskBtn&&(ce.maskBtn.style.display=pe||me&&!ve?"block":"none"),w();var e=z(x()),t=y();ce.maskBtn&&"none"!=ce.maskBtn.style.display&&(t+=Z(ce.maskBtn,"width"),V(ce.maskBtn,{top:e.top,left:e.left+e.width-t,height:e.height})),ce.genBtn&&"none"!=ce.genBtn.style.display&&(t+=Z(ce.genBtn,"width"),V(ce.genBtn,{top:e.top,left:e.left+e.width-t,height:e.height}),ce.genBtnInner.style.marginTop=Math.max(0,Math.round((e.height-19)/2))+"px"),ce.placeholder&&"none"!=ce.placeholder.style.display&&V(ce.placeholder,{top:e.top,left:e.left+7,height:e.height}),ce.tip&&"none"!=ce.tip.style.display&&V(ce.tip,{left:e.left,top:e.top+e.height,width:e.width})}function y(){var e=Z(x(),"paddingRight");return Math.max(_e,e)}function w(){if(ue.showTip)if(ce.tip)ce.tip.style.display=de&&me?"block":"none";else if(de&&me){if(!ye||be!=ye){var t=e(ce.mainInput).data("popover")||e(ce.mainInput).data("bs.popover"),n=t.options,r=n.animation;ye&&(n.animation=!1);var a=x().offsetWidth-2,l=t.$tip;l?l.width(a):t.options.template&&(t.options.template=t.options.template.replace('class="popover"','class="popover" style="width: '+a+'px"')),ce.clearInput&&(t.$element=e(x())),e(ce.mainInput).popover("show"),ye=be,n.animation=r}}else ye&&(ye=null,e(ce.mainInput).popover("hide"))}function x(){return fe?ce.mainInput:ce.clearInput||ce.mainInput}function _(){x().focus()}function S(e){var t="mouseover"===e.type,n=e.relatedTarget?e.relatedTarget:t?e.fromElement:e.toElement;(!n||!n.id||0!=n.id.indexOf(we+"btn")&&n!==ce.mainInput&&n!==ce.clearInput)&&(pe=t,p())}function k(e){var t,n=e?e.which||e.keyCode:null,r=n===ke||n===Se;t=ce.clearInput?fe?ce.clearInput.value=ce.mainInput.value:ce.mainInput.value=ce.clearInput.value:ce.mainInput.value,ue.strengthCheckTimeout>0&&!de&&!r?(re&&clearTimeout(re),re=setTimeout(R,ue.strengthCheckTimeout)):R(),ce.placeholder&&!t&&(ce.placeholder.style.display="block"),C()}function C(){if(ce.passLengthChecker){var e=x().value;fe&&(e=e.replace(/./g,se.passSymbol)),K(ce.passLengthChecker,e);var t=ce.passLengthChecker.offsetWidth;t+=Z(ce.mainInput,"paddingLeft");var n=0,r=H(x()).width,a=!1,l=y();if(ce.maskBtn){var f=t>r-(n=Z(ce.maskBtn,"width"))-l;ve!=f&&(a=!0,ve=f)}if(ce.genBtn){var d=t>r-n-Z(ce.genBtn,"width")-l;ge!=d&&(a=!0,ge=d)}a&&p()}}function E(){ce.placeholder&&(ce.placeholder.style.display="none")}function O(){oe&&(clearTimeout(oe),oe=null),ae&&(clearTimeout(ae),ae=null),me=!0,p()}function j(){oe=setTimeout((function(){oe=null,me=!1,p(),ue.isMasked&&!ae&&(ae=setTimeout((function(){ae=null,A(!0,!1)}),1500))}),100)}function T(){de&&R()}function A(e,t){t===r&&(t=!0);var n=e!=fe;if(e=e===r?!fe:!!e,se.changeType){var a=x(),f=P(a);a.setAttribute("type",e?"password":"text"),t&&(D(a,f),a.focus())}else{var d=W(x(),"display")||"block",h=e?ce.clearInput:ce.mainInput,y=e?ce.mainInput:ce.clearInput;fe!=e&&l.each(["paddingRight","width","backgroundImage","backgroundPosition","backgroundRepeat","backgroundAttachment","border"],(function(e){var t=h.style[e];t&&(y.style[e]=t)}));var w=P(h);y.style.display=d,h.style.display="none",y.value=h.value,t&&(D(y,w),y.focus()),ce.mainInput.nextSibling!=ce.clearInput&&G(ce.mainInput,ce.clearInput)}ce.maskBtn&&(K(ce.maskBtn,e?ue.maskBtn.textMasked:ue.maskBtn.textUnmasked),e?(ue.maskBtn.classUnmasked&&J(ce.maskBtn,ue.maskBtn.classUnmasked,!0),ue.maskBtn.classMasked&&X(ce.maskBtn,ue.maskBtn.classMasked,!0)):(ue.maskBtn.classMasked&&J(ce.maskBtn,ue.maskBtn.classMasked,!0),ue.maskBtn.classUnmasked&&X(ce.maskBtn,ue.maskBtn.classUnmasked,!0)),ce.maskBtn.title=e?te.msg.showPass:te.msg.hidePass),fe=e,C(),p(),n&&ee("switched",fe)}function P(e){return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?{start:e.selectionStart,end:e.selectionEnd}:null}function D(e,t){t&&"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd&&(e.selectionStart=t.start,e.selectionEnd=t.end)}function R(){re&&(clearTimeout(re),re=null);var e=x().value,t=function(e){var t=L(ue.pattern,a.CharTypes.SYMBOL),n=L(e,ue.allowAnyChars?a.CharTypes.SYMBOL:a.CharTypes.UNKNOWN),r=[],f=0;l.each(t,(function(e){if(f++,!n[e]){var t=te.msg[e];if(e==a.CharTypes.SYMBOL){var l=4,d=ue.chars[e];d.length>l&&(d=d.substring(0,l)),t=t+" ("+d+")"}r.push(t)}}));var d=1-r.length/f;if(r.length&&(r=[I(r)]),ue.checkMode==a.CheckModes.MODERATE){var h=0;l.each(n,(function(e){t[e]||h++})),d+=h/f}var p=ue.pattern.length,y=e.length/p-1;if(ue.length&&ue.length.min&&e.length<ue.length.min&&(y=-10,ue.length.min>p&&(p=ue.length.min)),0>y?(d+=y,r.push(te.msg.passTooShort.replace("{}",p.toString()))):ue.checkMode==a.CheckModes.MODERATE&&(d+=y/f),e.length>2){for(var w=e.charAt(0),x=!0,_=0;_<e.length;_++)if(e.charAt(_)!=w){x=!1;break}x&&(d=0,r=[te.msg.repeat])}return 0>d&&(d=0),d>1&&(d=1),{strength:d,messages:r,charTypes:n}}(e);if(0==e.length)t={strength:ue.allowEmpty?0:null,messages:[te.msg.passRequired]};else{!ue.allowAnyChars&&t.charTypes[a.CharTypes.UNKNOWN]&&(t={strength:null,messages:[te.msg.badChars.replace("{}",t.charTypes[a.CharTypes.UNKNOWN])]}),delete t.charTypes;var n=!1;l.each(ue.blackList,(function(t){return t!=e||(n=!0,!1)})),n&&(t={strength:0,messages:[te.msg.inBlackList]}),e&&e===function(){if(!ue.nonMatchField)return null;var e=Y(ue.nonMatchField);return e?e.value:null}()&&(t={strength:0,messages:[te.msg.equalTo]})}if("function"==typeof ue.validationCallback){var r,f,d=ue.validationCallback(ce.mainInput,t);d&&d.messages&&l.isArray(d.messages)&&(r=d.messages),d&&Object.prototype.hasOwnProperty.call(d,"strength")&&("number"==typeof d.strength||null===d.strength)&&(f=d.strength),r&&r.length?(t.messages=r,t.strength=f):f&&f>t.strength&&(t.strength=f)}return 0==e.length&&ue.allowEmpty?(M(),he={strength:0},!0):null===t.strength||t.strength<ue.acceptRate?(function(e,t){var n="",r="";if(null===e)n=te.msg.invalidPassWarn,r=t[0].charAt(0).toUpperCase()+t[0].substring(1);else if(n=te.msg.weakWarn,r="",t)for(var a=0;a<t.length;a++){var l=t[a].charAt(0);0==a?(r+=te.msg.weakTitle+": ",te.lower&&(l=l.toLowerCase())):(r+="<br/>",l=l.toUpperCase()),(r+=l+t[a].substring(1))&&"."!=r.charAt(r.length-1)&&(r+=".")}if(r&&"."!=r.charAt(r.length-1)&&(r+="."),he={strength:e,message:r},ce.warnMsg&&(K(ce.warnMsg,n),ce.warnMsg.title=r,ue.errorWrapClassName&&X(ce.wrapper,ue.errorWrapClassName,!0)),ue.showTip){var f=r;ce.genBtn&&(f+="<br/>"+te.msg.generateMsg.replace("{}",'<div class="'+N("btn-gen-help")+'"></div>')),be=f,ce.tipBody&&K(ce.tipBody,f)}de=!0,p()}(t.strength,t.messages),!1):(M(),he={strength:t.strength},!0)}function I(e){for(var t=e[0],n=1;n<e.length;n++)t+=n==e.length-1?" "+te.msg.and+" ":", ",t+=e[n];return te.msg.noCharType.replace("{}",t)}function M(){ce.warnMsg&&(K(ce.warnMsg,""),ce.warnMsg.title="",ue.errorWrapClassName&&J(ce.wrapper,ue.errorWrapClassName,!0)),be=null,de=!1,p()}function L(e,t){for(var n={},r=0;r<e.length;r++){var a=e.charAt(r),f=t;l.each(ue.chars,(function(e,t){return!(t.indexOf(a)>=0)||(f=e,!1)})),n[f]=(n[f]||"")+a}return n}function N(e){return we+e}function F(e,t,n){return t.id&&(t.id=function(e){return we+e+"-"+ne}(t.id)),t.className&&(t.className=N(t.className)),l.newEl(e,t,n)}function q(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,left:0}}}function B(e){var t=e.ownerDocument;if(!t)return{top:0,left:0};var r=q(e);return{top:r.top+(n.pageYOffset||0)-(t.documentElement.clientTop||0),left:r.left+(n.pageXOffset||0)-(t.documentElement.clientLeft||0)}}function U(e){var n;try{n=e.offsetParent}catch(e){}for(n||(n=t.documentElement);n&&"html"!=n.nodeName.toLowerCase()&&"static"===W(n,"position");)n=n.offsetParent;return n||t.documentElement}function H(e){return{width:e.offsetWidth,height:e.offsetHeight}}function z(e){return l.extend(B(e),H(e))}function V(e,t){if(t.height&&!isNaN(t.height)&&(e.style.height=t.height+"px",e.style.lineHeight=t.height+"px"),t.width&&!isNaN(t.width)&&(e.style.width=t.width+"px"),t.top||t.left){if("none"==W(e,"display"))return e.style.top=t.top+"px",void(e.style.left=t.left+"px");var n,r,a;if(a=B(e),((r=W(e,"top")||0)+(n=W(e,"left")||0)+"").indexOf("auto")>-1){var l=function(e){var t,n={top:0,left:0};if("fixed"===W(e,"position"))t=q(e);else{var r=U(e);t=B(e),"html"!=r.nodeName.toLowerCase()&&(n=B(r)),n.top+=Z(r,"borderTopWidth"),n.left+=Z(r,"borderLeftWidth")}return{top:t.top-n.top-Z(e,"marginTop"),left:t.left-n.left-Z(e,"marginLeft")}}(e);r=l.top,n=l.left}else r=parseFloat(r)||0,n=parseFloat(n)||0;t.top&&(e.style.top=t.top-a.top+r+"px"),t.left&&(e.style.left=t.left-a.left+n+"px")}}function W(e,t){var r="function"==typeof n.getComputedStyle?n.getComputedStyle(e,null):e.currentStyle;return r?r[t]:null}function Z(e,t){var n=W(e,t);if(!n)return 0;var r=parseFloat(n);return isNaN(r)?0:r}function G(e,t){e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)}function K(e,n){try{e.innerHTML=n}catch(a){var r=t.createElement("c");for(r.innerHTML=n;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(r)}}function Y(e){return"string"==typeof e?t.getElementById(e):e.jquery?e[0]:e}function X(e,t,n){Q(e,t,n)||(e.className=e.className+(e.className?" ":"")+(!0===n?t:N(t)))}function J(e,t,n){Q(e,t,n)&&(e.className=(" "+e.className+" ").replace((!0===n?t:N(t))+" ","").replace(/^\s+|\s+$/g,""))}function Q(e,t,n){return t=" "+(!0===n?t:N(t))+" ",(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(t)>-1}function ee(t,n){if(e)try{e(ce.mainInput).trigger(xe+t,n)}catch(e){}if(ue.events&&"function"==typeof ue.events[t])try{ue.events[t].call(ce.mainInput,n)}catch(e){}}var te,ne,re,oe,ae,se,le=a.Config,ce={},ue=l.extend({},le.defaults,d),fe=!0,de=!1,he=null,pe=!1,me=!1,ge=!1,ve=!1,ye=!1,be=null,we="a_pf-",xe="pass:",_e=5,Se=46,ke=8;this.toggleMasking=function(e){A(e)},this.setPass=function(e){ce.mainInput.value=e,ce.clearInput&&(ce.clearInput.value=e),k()},this.validatePass=R,this.getPassValidationMessage=function(){return he?he.message:null},this.getPassStrength=function(){return he?he.strength:-1},function(){ue.blackList=(ue.blackList||[]).concat(a.Config.blackList),"string"==typeof f&&(f=t.getElementById(f)),ce.mainInput=f,ce.mainInput&&(function(){var e="en",t=ue.locale;!t&&navigator.language&&(t=navigator.language.replace(/\-.*/g,"")),t&&(te=le.locales[t]),te&&(te=l.extend({},le.locales[e],te)),te||(te=l.extend({},le.locales[e])),ue.localeMsg&&l.extend(te.msg,ue.localeMsg)}(),(ne=ce.mainInput.id)||(ne="i"+Math.round(1e5*Math.random()),ce.mainInput.id=ne),function(){var e=!0,n=!0,r=t.createElement("input");"placeholder"in r||(e=!1),r.setAttribute("style","position:absolute;left:-10000px;top:-10000px;"),t.body.appendChild(r);try{r.setAttribute("type","password")}catch(e){n=!1}t.body.removeChild(r);var a=t.createElement("div");a.setAttribute("style","display:inline-block"),a.style.paddingLeft=a.style.width="1px",t.body.appendChild(a);var l=2==a.offsetWidth,f="inline-block"===W(a,"display");t.body.removeChild(a);var d=navigator.userAgent.indexOf("AppleWebKit")>=0||navigator.userAgent.indexOf("Opera")>=0||navigator.userAgent.indexOf("Firefox")>=0&&navigator.platform.indexOf("Mac")>=0?"•":"●";se={placeholders:e,changeType:n,boxModel:l,hasInlineBlock:f,passSymbol:d}}(),function(){var e=z(ce.mainInput);e.top+=Z(ce.mainInput,"marginTop"),ce.wrapper=ce.mainInput.parentNode,X(ce.wrapper,"wrap"),se.hasInlineBlock||X(ce.wrapper,"wrap-no-ib"),"static"==W(ce.wrapper,"position")&&(ce.wrapper.style.position="relative"),ue.length&&ue.length.max&&ce.mainInput.setAttribute("maxLength",ue.length.max.toString()),function(){if(!se.changeType){ce.clearInput=F("input",{type:"text",id:"txt-clear",className:"txt-clear",value:ce.mainInput.value},{display:"none"});var e=ce.mainInput.className;e&&X(ce.clearInput,e,!0);var t=ce.mainInput.style.cssText;t&&(ce.clearInput.style.cssText=t),l.each(["maxLength","size","placeholder"],(function(e){var t=ce.mainInput.getAttribute(e);t&&ce.clearInput.setAttribute(e,t)})),G(ce.mainInput,ce.clearInput)}X(ce.mainInput,"txt-pass")}(),ue.showWarn&&(ce.warnMsg=F("div",{id:"warn",className:"warn"},{margin:"0 0 0 3px"}),ue.warnMsgClassName&&X(ce.warnMsg,ue.warnMsgClassName,!0),G(ce.clearInput||ce.mainInput,ce.warnMsg)),ue.showToggle&&(ce.maskBtn=F("div",{id:"btn-mask",className:"btn-mask",title:te.msg.showPass},{position:"absolute",margin:"0",padding:"0"}),X(ce.maskBtn,"btn"),ue.maskBtn.className&&X(ce.maskBtn,ue.maskBtn.className,!0),ue.maskBtn.classMasked&&X(ce.maskBtn,ue.maskBtn.classMasked,!0),K(ce.maskBtn,ue.maskBtn.textMasked),G(ce.mainInput,ce.maskBtn)),ue.showGenerate&&(ce.genBtn=F("div",{id:"btn-gen",className:"btn-gen",title:te.msg.genPass},{position:"absolute",margin:"0",padding:"0"}),X(ce.genBtn,"btn"),G(ce.mainInput,ce.genBtn),ce.genBtnInner=F("div",{id:"btn-gen-i",className:"btn-gen-i",title:te.msg.genPass}),ce.genBtn.appendChild(ce.genBtnInner)),h(e),function(e){if(se.placeholders)!ce.mainInput.getAttribute("placeholder")&&ce.mainInput.getAttribute("data-placeholder")&&ce.mainInput.setAttribute("placeholder",ce.mainInput.getAttribute("data-placeholder"));else{var t=ce.mainInput.getAttribute("placeholder")||ce.mainInput.getAttribute("data-placeholder");t&&(ce.placeholder=F("div",{id:"placeholder",className:"placeholder"},{position:"absolute",margin:"0",padding:"0",height:e.height+"px",lineHeight:e.height+"px"}),K(ce.placeholder,t),G(ce.mainInput,ce.placeholder))}}(e),se.passSymbol&&(ce.passLengthChecker=F("div",{id:"len"},{position:"absolute",height:W(ce.mainInput,"height"),top:"-10000px",left:"-10000px",display:"block",color:"transparent",border:"none"}),G(ce.mainInput,ce.passLengthChecker),setTimeout((function(){l.each(["marginLeft","fontFamily","fontSize","fontWeight","fontStyle","fontVariant"],(function(e){var t=W(ce.mainInput,e);t&&(ce.passLengthChecker.style[e]=t)}))}),50)),setTimeout(p,0)}(),function(){if(l.each(ce.clearInput?[ce.mainInput,ce.clearInput]:[ce.mainInput],(function(e){l.attachEvent(e,"onkeyup",k),l.attachEvent(e,"onfocus",O),l.attachEvent(e,"onblur",j),l.attachEvent(e,"onmouseover",S),l.attachEvent(e,"onmouseout",S),ce.placeholder&&l.attachEvent(e,"onkeydown",E)})),l.attachEvent(n,"onresize",p),ce.maskBtn&&(l.attachEvent(ce.maskBtn,"onclick",(function(){A()})),l.attachEvent(ce.maskBtn,"onmouseover",S),l.attachEvent(ce.maskBtn,"onmouseout",S)),ce.genBtn&&(l.attachEvent(ce.genBtn,"onclick",(function(){!function(){var e=function(){var e="",t=L(ue.pattern,a.CharTypes.SYMBOL),n=[];return l.each(t,(function(e,t){for(var r=0;r<t.length;r++)n.push(e)})),n.sort((function(){return.7-Math.random()})),l.each(n,(function(t){var n=le.generationChars[t];n?ue.chars[t]&&ue.chars[t].indexOf(n)<0&&(n=ue.chars[t]):n=ue.chars[t],e+=l.selectRandom(n)})),e}();ce.mainInput.value=e,ce.clearInput&&(ce.clearInput.value=e),ee("generated",e),A(!1),re&&(clearTimeout(re),re=null),R(),ce.placeholder&&(ce.placeholder.style.display="none")}()})),l.attachEvent(ce.genBtn,"onmouseover",S),l.attachEvent(ce.genBtn,"onmouseout",S)),ce.placeholder&&l.attachEvent(ce.placeholder,"onclick",_),ue.nonMatchField){var e=Y(ue.nonMatchField);e&&l.attachEvent(e,"onkeyup",T)}}(),A(ue.isMasked,!1),("function"==typeof ce.mainInput.hasAttribute&&ce.mainInput.hasAttribute("autofocus")||ce.mainInput.getAttribute("autofocus"))&&(ce.mainInput.focus(),O()),function(t,n){e&&e(ce.mainInput).data(t,n)}(a.Config.dataAttr,this))}.call(this)};var l={extend:function(){for(var e=arguments,t=1;t<e.length;t++)l.each(e[t],(function(t,n){e[0][t]=l.isArray(e[0][t])||l.isArray(n)?e[0][t]?e[0][t].concat(n||[]):n:l.isElement(n)?n:"object"==typeof e[0][t]&&"object"==typeof n&&null!==n?l.extend({},e[0][t],n):"object"==typeof n&&null!==n?l.extend({},n):n}));return e[0]},newEl:function(e,n,r){var a=t.createElement(e);return n&&l.each(n,(function(e,t){t&&(a[e]=t)})),r&&l.each(r,(function(e,t){t&&(a.style[e]=t)})),a},attachEvent:function(e,t,r){var a=e[t];e[t]=function(e){e||(e=n.event),r(e),"function"==typeof a&&a(e)}},each:function(e,t){if(l.isArray(e)){for(var n=0;n<e.length;n++)if(!1===t(e[n]))return}else for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&!1===t(r,e[r]))return},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isElement:function(t){if(!t)return!1;try{return t instanceof HTMLElement||e&&t instanceof jQuery}catch(e){return"object"==typeof t&&t.nodeType||t.jquery}},selectRandom:function(e){var t=Math.floor(Math.random()*e.length);return l.isArray(e)?e[t]:e.charAt(t)},contains:function(e,t){if(!e)return!1;var n=!1;return l.each(e,(function(e){return e!==t||(n=!0,!1)})),n}};e&&(e.fn.passField=function(e){return this.each((function(){new a.Field(this,e)}))},e.fn.togglePassMasking=function(t){return this.each((function(){var n=e(this).data(a.Config.dataAttr);n&&n.toggleMasking(t)}))},e.fn.setPass=function(t){return this.each((function(){var n=e(this).data(a.Config.dataAttr);n&&n.setPass(t)}))},e.fn.validatePass=function(){var t=!0;return this.each((function(){var n=e(this).data(a.Config.dataAttr);n&&!n.validatePass()&&(t=!1)})),t},e.fn.getPassValidationMessage=function(){var e=this.first();if(e){var t=e.data(a.Config.dataAttr);if(t)return t.getPassValidationMessage()}return null},e.fn.getPassStrength=function(){var e=this.first();if(e){var t=e.data(a.Config.dataAttr);if(t)return t.getPassStrength()}return null}),e&&e.validator&&jQuery.validator.addMethod("passfield",(function(t,n){return e(n).validatePass()}),(function(t,n){return e(n).getPassValidationMessage()}))}(window.jQuery,document,window)},78262:function(){!function(){"use strict";var e={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){switch(t.which){case e.COMMAND:case e.SHIFT:case e.CTRL:case e.ALT:return!0}return!!(t.metaKey||t.ctrlKey||t.altKey)},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123},isVerticalMovement:function(t){return~[e.UP,e.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[e.LEFT,e.RIGHT,e.BACKSPACE,e.DELETE].indexOf(t)},toSeparator:function(t){var n={ENTER:"\n",TAB:"\t",SPACE:" "}[t];return n||(e[t]?void 0:t)}};function t(e){return angular.isUndefined(e)||null===e}void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(n.bind(t)(e))return t;t=t.parentElement}return!1});var n=0,r=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",removeSelected:!0,resetSearchInput:!0,generateId:function(){return n++},appendToBody:!1,spinnerEnabled:!1,spinnerClass:"glyphicon glyphicon-refresh ui-select-spin",backspaceReset:!0}).service("uiSelectMinErr",(function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments).message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(t)}})).directive("uisTranscludeAppend",(function(){return{link:function(e,t,n,r,a){a(e,(function(e){t.append(e)}))}}})).filter("highlight",(function(){return function(e,t){return t&&e?(""+e).replace(new RegExp((""+t).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),'<span class="ui-select-highlight">$&</span>'):e}})).factory("uisOffset",["$document","$window",function(e,t){return function(n){var r=n[0].getBoundingClientRect();return{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);r.factory("$$uisDebounce",["$timeout",function(e){return function(t,n){var r;return function(){var a=this,l=Array.prototype.slice.call(arguments);r&&e.cancel(r),r=e((function(){t.apply(a,l)}),n)}}}]),r.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(e,t,n,r,a){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){return t.addClass("ui-select-choices"),(t.parent().attr("theme")||e.theme)+"/choices.tpl.html"},compile:function(r,l){if(!l.repeat)throw n("repeat","Expected 'repeat' expression.");var f=l.groupBy,d=l.groupFilter;if(f){var h=r.querySelectorAll(".ui-select-choices-group");if(1!==h.length)throw n("rows","Expected 1 .ui-select-choices-group but got '{0}'.",h.length);h.attr("ng-repeat",t.getGroupNgRepeatExpression())}var p=t.parse(l.repeat),y=r.querySelectorAll(".ui-select-choices-row");if(1!==y.length)throw n("rows","Expected 1 .ui-select-choices-row but got '{0}'.",y.length);y.attr("ng-repeat",p.repeatExpression(f)).attr("ng-if","$select.open");var w=r.querySelectorAll(".ui-select-choices-row-inner");if(1!==w.length)throw n("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",w.length);return w.attr("uis-transclude-append",""),(a.document.addEventListener?y:w).attr("ng-click","$select.select("+p.itemName+",$select.skipFocusser,$event)"),function(t,n,a,l){l.parseRepeatAttr(a.repeat,f,d),l.disableChoiceExpression=a.uiDisableChoice,l.onHighlightCallback=a.onHighlight,l.minimumInputLength=parseInt(a.minimumInputLength)||0,l.dropdownPosition=a.position?a.position.toLowerCase():e.dropdownPosition,t.$watch("$select.search",(function(e){e&&!l.open&&l.multiple&&l.activate(!1,!0),l.activeIndex=l.tagging.isActivated?-1:0,!a.minimumInputLength||l.search.length>=a.minimumInputLength?l.refresh(a.refresh):l.items=[]})),a.$observe("refreshDelay",(function(){var n=t.$eval(a.refreshDelay);l.refreshDelay=void 0!==n?n:e.refreshDelay})),t.$watch("$select.open",(function(e){e?(r.attr("role","listbox"),l.refresh(a.refresh)):n.removeAttr("role")}))}}}}]),r.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(n,r,a,l,f,d,h,p,y,w,x){var _,S=this,k="";if(S.placeholder=p.placeholder,S.searchEnabled=p.searchEnabled,S.sortable=p.sortable,S.refreshDelay=p.refreshDelay,S.paste=p.paste,S.resetSearchInput=p.resetSearchInput,S.refreshing=!1,S.spinnerEnabled=p.spinnerEnabled,S.spinnerClass=p.spinnerClass,S.removeSelected=p.removeSelected,S.closeOnSelect=!0,S.skipFocusser=!1,S.search=k,S.activeIndex=0,S.items=[],S.open=!1,S.focus=!1,S.disabled=!1,S.selected=void 0,S.dropdownPosition="auto",S.focusser=void 0,S.multiple=void 0,S.disableChoiceExpression=void 0,S.tagging={isActivated:!1,fct:void 0},S.taggingTokens={isActivated:!1,tokens:void 0},S.lockChoiceExpression=void 0,S.clickTriggeredSelect=!1,S.$filter=l,S.$element=r,S.$animate=function(){try{return w.get("$animate")}catch(e){return null}}(),S.searchInput=r.querySelectorAll("input.ui-select-search"),1!==S.searchInput.length)throw h("searchInput","Expected 1 input.ui-select-search but got '{0}'.",S.searchInput.length);function C(){S.resetSearchInput&&(S.search=k,S.selected&&S.items.length&&!S.multiple&&(S.activeIndex=function(e,t,n){if(e.findIndex)return e.findIndex(t,n);for(var r,a=Object(e),l=a.length>>>0,f=0;f<l;f++)if(r=a[f],t.call(n,r,f,a))return f;return-1}(S.items,(function(e){return angular.equals(this,e)}),S.selected)))}S.isEmpty=function(){return t(S.selected)||""===S.selected||S.multiple&&0===S.selected.length},S.activate=function(e,t){if(S.disabled||S.open)S.open&&!S.searchEnabled&&S.close();else{t||C(),n.$broadcast("uis:activate"),S.open=!0,S.activeIndex=S.activeIndex>=S.items.length?0:S.activeIndex,-1===S.activeIndex&&!1!==S.taggingLabel&&(S.activeIndex=0);var l=r.querySelectorAll(".ui-select-choices-content"),f=r.querySelectorAll(".ui-select-search");if(S.$animate&&S.$animate.on&&S.$animate.enabled(l[0])){var d=function(t,n){"start"===n&&0===S.items.length?(S.$animate.off("removeClass",f[0],d),a((function(){S.focusSearchInput(e)}))):"close"===n&&(S.$animate.off("enter",l[0],d),a((function(){S.focusSearchInput(e)})))};S.items.length>0?S.$animate.on("enter",l[0],d):S.$animate.on("removeClass",f[0],d)}else a((function(){S.focusSearchInput(e),!S.tagging.isActivated&&S.items.length>1&&P()}))}},S.focusSearchInput=function(e){S.search=e||S.search,S.searchInput[0].focus()},S.findGroupByName=function(e){return S.groups&&S.groups.filter((function(t){return t.name===e}))[0]},S.parseRepeatAttr=function(e,t,r){S.setItemsFn=t?function(e){var a=n.$eval(t);if(S.groups=[],angular.forEach(e,(function(e){var t=angular.isFunction(a)?a(e):e[a],n=S.findGroupByName(t);n?n.items.push(e):S.groups.push({name:t,items:[e]})})),r){var l=n.$eval(r);angular.isFunction(l)?S.groups=l(S.groups):angular.isArray(l)&&(S.groups=function(e,t){var n,r,a=[];for(n=0;n<t.length;n++)for(r=0;r<e.length;r++)e[r].name==[t[n]]&&a.push(e[r]);return a}(S.groups,l))}S.items=[],S.groups.forEach((function(e){S.items=S.items.concat(e.items)}))}:function(e){S.items=e||[]},S.parserResult=d.parse(e),S.isGrouped=!!t,S.itemProperty=S.parserResult.itemName;var a=S.parserResult.source,l=function(){var e=a(n);n.$uisSource=Object.keys(e).map((function(t){var n={};return n[S.parserResult.keyName]=t,n.value=e[t],n}))};S.parserResult.keyName&&(l(),S.parserResult.source=y("$uisSource"+S.parserResult.filters),n.$watch(a,(function(e,t){e!==t&&l()}),!0)),S.refreshItems=function(e){e=e||S.parserResult.source(n);var t=S.selected;if(S.isEmpty()||angular.isArray(t)&&!t.length||!S.multiple||!S.removeSelected)S.setItemsFn(e);else if(null!=e){var r=e.filter((function(e){return angular.isArray(t)?t.every((function(t){return!angular.equals(e,t)})):!angular.equals(e,t)}));S.setItemsFn(r)}"auto"!==S.dropdownPosition&&"up"!==S.dropdownPosition||n.calculateDropdownPos(),n.$broadcast("uis:refresh")},n.$watchCollection(S.parserResult.source,(function(e){if(null==e)S.items=[];else{if(!angular.isArray(e))throw h("items","Expected an array but got '{0}'.",e);S.refreshItems(e),angular.isDefined(S.ngModel.$modelValue)&&(S.ngModel.$modelValue=null)}}))},S.refresh=function(e){void 0!==e&&(_&&a.cancel(_),_=a((function(){if(n.$select.search.length>=n.$select.minimumInputLength){var t=n.$eval(e);t&&angular.isFunction(t.then)&&!S.refreshing&&(S.refreshing=!0,t.finally((function(){S.refreshing=!1})))}}),S.refreshDelay))},S.isActive=function(e){if(!S.open)return!1;var t=S.items.indexOf(e[S.itemProperty]),n=t==S.activeIndex;return!(!n||t<0)&&(n&&!angular.isUndefined(S.onHighlightCallback)&&e.$eval(S.onHighlightCallback),n)};var E=function(e){return S.selected&&angular.isArray(S.selected)&&S.selected.filter((function(t){return angular.equals(t,e)})).length>0},O=[];function j(e){return O.indexOf(e)>-1}S.isDisabled=function(e){if(S.open){var t=e[S.itemProperty],n=!1;if(S.items.indexOf(t)>=0&&(angular.isDefined(S.disableChoiceExpression)||S.multiple)){if(t.isTag)return!1;S.multiple&&(n=E(t)),!n&&angular.isDefined(S.disableChoiceExpression)&&(n=!!e.$eval(S.disableChoiceExpression)),function(e,t){var n=O.indexOf(e);t&&-1===n&&O.push(e),!t&&n>-1&&O.splice(n,1)}(t,n)}return n}},S.select=function(e,r,a){if(t(e)||!j(e)){if(!S.items&&!S.search&&!S.tagging.isActivated)return;if(!e||!j(e)){if(S.clickTriggeredSelect=!1,a&&("click"===a.type||"touchend"===a.type)&&e&&(S.clickTriggeredSelect=!0),S.tagging.isActivated&&!1===S.clickTriggeredSelect){if(!1===S.taggingLabel)if(S.activeIndex<0){if(void 0===e&&(e=void 0!==S.tagging.fct?S.tagging.fct(S.search):S.search),!e||angular.equals(S.items[0],e))return}else e=S.items[S.activeIndex];else if(0===S.activeIndex){if(void 0===e)return;if(void 0!==S.tagging.fct&&"string"==typeof e){if(!(e=S.tagging.fct(e)))return}else"string"==typeof e&&(e=e.replace(S.taggingLabel,"").trim())}if(E(e))return void S.close(r)}C(),n.$broadcast("uis:select",e),S.closeOnSelect&&S.close(r)}}},S.close=function(e){S.open&&(S.ngModel&&S.ngModel.$setTouched&&S.ngModel.$setTouched(),S.open=!1,C(),n.$broadcast("uis:close",e))},S.setFocus=function(){S.focus||S.focusInput[0].focus()},S.clear=function(e){S.select(null),e.stopPropagation(),a((function(){S.focusser[0].focus()}),0,!1)},S.toggle=function(e){S.open?(S.close(),e.preventDefault(),e.stopPropagation()):S.activate()},S.isLocked=function(){return!1},n.$watch((function(){return angular.isDefined(S.lockChoiceExpression)&&""!==S.lockChoiceExpression}),(function(e){if(!e)return;var t=[];S.isLocked=function(e,n){var r=!1,a=S.selected[n];return a&&(e?function(e,n){var r=t.indexOf(e);n&&-1===r&&t.push(e),!n&&r>-1&&t.splice(r,1)}(a,r=!!e.$eval(S.lockChoiceExpression)):r=function(e){return t.indexOf(e)>-1}(a)),r}}));var T=null,A=!1;function P(){var e=r.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw h("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(!(S.activeIndex<0)){var n=t[S.activeIndex],a=n.offsetTop+n.clientHeight-e[0].scrollTop,l=e[0].offsetHeight;a>l?e[0].scrollTop+=a-l:a<n.clientHeight&&(S.isGrouped&&0===S.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=n.clientHeight-a)}}S.sizeSearchInput=function(){var e=S.searchInput[0],t=S.$element[0],r=function(){return t.clientWidth*!!e.offsetParent},l=function(t){if(0===t)return!1;var n=t-e.offsetLeft;return n<50&&(n=t),S.searchInput.css("width",n+"px"),!0};S.searchInput.css("width","10px"),a((function(){null!==T||l(r())||(T=n.$watch((function(){A||(A=!0,n.$$postDigest((function(){A=!1,l(r())&&(T(),T=null)})))}),angular.noop))}))},S.searchInput.on("keydown",(function(t){var r=t.which;~[e.ENTER,e.ESC].indexOf(r)&&(t.preventDefault(),t.stopPropagation()),n.$apply((function(){var n=!1;if((S.items.length>0||S.tagging.isActivated)&&(function(t){var n=!0;switch(t){case e.DOWN:if(!S.open&&S.multiple)S.activate(!1,!0);else if(S.activeIndex<S.items.length-1)for(var r=++S.activeIndex;j(S.items[r])&&r<S.items.length;)S.activeIndex=++r;break;case e.UP:var a=0===S.search.length&&S.tagging.isActivated?-1:0;if(!S.open&&S.multiple)S.activate(!1,!0);else if(S.activeIndex>a)for(var l=--S.activeIndex;j(S.items[l])&&l>a;)S.activeIndex=--l;break;case e.TAB:S.multiple&&!S.open||S.select(S.items[S.activeIndex],!0);break;case e.ENTER:S.open&&(S.tagging.isActivated||S.activeIndex>=0)?S.select(S.items[S.activeIndex],S.skipFocusser):S.activate(!1,!0);break;case e.ESC:S.close();break;default:n=!1}return n}(r)||S.searchEnabled||(t.preventDefault(),t.stopPropagation()),S.taggingTokens.isActivated)){for(var l=0;l<S.taggingTokens.tokens.length;l++)S.taggingTokens.tokens[l]===e.MAP[t.keyCode]&&S.search.length>0&&(n=!0);n&&a((function(){S.searchInput.triggerHandler("tagged");var n=S.search.replace(e.MAP[t.keyCode],"").trim();S.tagging.fct&&(n=S.tagging.fct(n)),n&&S.select(n,!0)}))}})),e.isVerticalMovement(r)&&S.items.length>0&&P(),r!==e.ENTER&&r!==e.ESC||(t.preventDefault(),t.stopPropagation())})),S.searchInput.on("paste",(function(t){var n;if(n=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(t.originalEvent||t).clipboardData.getData("text/plain"),(n=S.search+n)&&n.length>0)if(S.taggingTokens.isActivated){for(var r=[],a=0;a<S.taggingTokens.tokens.length;a++){var l=e.toSeparator(S.taggingTokens.tokens[a])||S.taggingTokens.tokens[a];if(n.indexOf(l)>-1){r=n.split(l);break}}0===r.length&&(r=[n]);var f=S.search;angular.forEach(r,(function(e){var t=S.tagging.fct?S.tagging.fct(e):e;t&&S.select(t,!0)})),S.search=f||k,t.preventDefault(),t.stopPropagation()}else S.paste&&(S.paste(n),S.search=k,t.preventDefault(),t.stopPropagation())})),S.searchInput.on("tagged",(function(){a((function(){C()}))}));var D=f((function(){S.sizeSearchInput()}),50);angular.element(x).bind("resize",D),n.$on("$destroy",(function(){S.searchInput.off("keyup keydown tagged blur paste"),angular.element(x).off("resize",D)})),n.$watch("$select.activeIndex",(function(e){e&&r.find("input").attr("aria-activedescendant","ui-select-choices-row-"+S.generatedId+"-"+e)})),n.$watch("$select.open",(function(e){e||r.find("input").removeAttr("aria-activedescendant")}))}]),r.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,n,r,a,l,f){return{restrict:"EA",templateUrl:function(e,n){return(n.theme||t.theme)+(angular.isDefined(n.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(a,d){var h=/{(.*)}\s*{(.*)}/.exec(d.ngClass);if(h){var p="{"+h[1]+", "+h[2]+"}";d.ngClass=p,a.attr("ng-class",p)}return angular.isDefined(d.multiple)?a.append("<ui-select-multiple/>").removeAttr("multiple"):a.append("<ui-select-single/>"),d.inputId&&(a.querySelectorAll("input.ui-select-search")[0].id=d.inputId),function(a,d,h,p,y){var w=p[0],x=p[1];function _(e){if(w.open){if(!(window.jQuery?window.jQuery.contains(d[0],e.target):d[0].contains(e.target))&&!w.clickTriggeredSelect){var t;if(w.skipFocusser)t=!0;else{var n=angular.element(e.target).controller("uiSelect");(t=n&&n!==w)||(t=~["input","button","textarea","select"].indexOf(e.target.tagName.toLowerCase()))}w.close(t),a.$digest()}w.clickTriggeredSelect=!1}}w.generatedId=t.generateId(),w.baseTitle=h.title||"Select box",w.focusserTitle=w.baseTitle+" focus",w.focusserId="focusser-"+w.generatedId,w.closeOnSelect=angular.isDefined(h.closeOnSelect)?l(h.closeOnSelect)():t.closeOnSelect,a.$watch("skipFocusser",(function(){var e=a.$eval(h.skipFocusser);w.skipFocusser=void 0!==e?e:t.skipFocusser})),w.onSelectCallback=l(h.onSelect),w.onRemoveCallback=l(h.onRemove),w.ngModel=x,w.choiceGrouped=function(e){return w.isGrouped&&e&&e.name},h.tabindex&&h.$observe("tabindex",(function(e){w.focusInput.attr("tabindex",e),d.removeAttr("tabindex")})),a.$watch((function(){return a.$eval(h.searchEnabled)}),(function(e){w.searchEnabled=void 0!==e?e:t.searchEnabled})),a.$watch("sortable",(function(){var e=a.$eval(h.sortable);w.sortable=void 0!==e?e:t.sortable})),h.$observe("backspaceReset",(function(){var e=a.$eval(h.backspaceReset);w.backspaceReset=void 0===e||e})),h.$observe("limit",(function(){w.limit=angular.isDefined(h.limit)?parseInt(h.limit,10):void 0})),a.$watch("removeSelected",(function(){var e=a.$eval(h.removeSelected);w.removeSelected=void 0!==e?e:t.removeSelected})),h.$observe("disabled",(function(){w.disabled=void 0!==h.disabled&&h.disabled})),h.$observe("resetSearchInput",(function(){var e=a.$eval(h.resetSearchInput);w.resetSearchInput=void 0===e||e})),h.$observe("paste",(function(){w.paste=a.$eval(h.paste)})),h.$observe("tagging",(function(){if(void 0!==h.tagging){var e=a.$eval(h.tagging);w.tagging={isActivated:!0,fct:!0!==e?e:void 0}}else w.tagging={isActivated:!1,fct:void 0}})),h.$observe("taggingLabel",(function(){void 0!==h.tagging&&("false"===h.taggingLabel?w.taggingLabel=!1:w.taggingLabel=void 0!==h.taggingLabel?h.taggingLabel:"(new)")})),h.$observe("taggingTokens",(function(){if(void 0!==h.tagging){var e=void 0!==h.taggingTokens?h.taggingTokens.split("|"):[",","ENTER"];w.taggingTokens={isActivated:!0,tokens:e}}})),h.$observe("spinnerEnabled",(function(){var e=a.$eval(h.spinnerEnabled);w.spinnerEnabled=void 0!==e?e:t.spinnerEnabled})),h.$observe("spinnerClass",(function(){var e=h.spinnerClass;w.spinnerClass=void 0!==e?h.spinnerClass:t.spinnerClass})),angular.isDefined(h.autofocus)&&f((function(){w.setFocus()})),angular.isDefined(h.focusOn)&&a.$on(h.focusOn,(function(){f((function(){w.setFocus()}))})),e.on("click",_),a.$on("$destroy",(function(){e.off("click",_)})),y(a,(function(e){var t=angular.element("<div>").append(e),r=t.querySelectorAll(".ui-select-match");if(r.removeAttr("ui-select-match"),r.removeAttr("data-ui-select-match"),1!==r.length)throw n("transcluded","Expected 1 .ui-select-match but got '{0}'.",r.length);d.querySelectorAll(".ui-select-match").replaceWith(r);var a=t.querySelectorAll(".ui-select-choices");if(a.removeAttr("ui-select-choices"),a.removeAttr("data-ui-select-choices"),1!==a.length)throw n("transcluded","Expected 1 .ui-select-choices but got '{0}'.",a.length);d.querySelectorAll(".ui-select-choices").replaceWith(a);var l=t.querySelectorAll(".ui-select-no-choice");l.removeAttr("ui-select-no-choice"),l.removeAttr("data-ui-select-no-choice"),1==l.length&&d.querySelectorAll(".ui-select-no-choice").replaceWith(l)}));var S=a.$eval(h.appendToBody);(void 0!==S?S:t.appendToBody)&&(a.$watch("$select.open",(function(t){var n;t?(n=r(d),(k=angular.element('<div class="ui-select-placeholder"></div>'))[0].style.width=n.width+"px",k[0].style.height=n.height+"px",d.after(k),C=d[0].style.width,e.find("body").append(d),d[0].style.position="absolute",d[0].style.left=n.left+"px",d[0].style.top=n.top+"px",d[0].style.width=n.width+"px"):E()})),a.$on("$destroy",(function(){E()})));var k=null,C="";function E(){null!==k&&(k.replaceWith(d),k=null,d[0].style.position="",d[0].style.left="",d[0].style.top="",d[0].style.width=C,w.setFocus())}var O=null,j="direction-up";a.$watch("$select.open",(function(){"auto"!==w.dropdownPosition&&"up"!==w.dropdownPosition||a.calculateDropdownPos()}));var T=function(e,t){e=e||r(d),t=t||r(O),O[0].style.position="absolute",O[0].style.top=-1*t.height+"px",d.addClass(j)},A=function(){f((function(){if("up"===w.dropdownPosition)T();else{d.removeClass(j);var t=r(d),n=r(O),a=e[0].documentElement.scrollTop||e[0].body.scrollTop;t.top+t.height+n.height>a+e[0].documentElement.clientHeight?T(t,n):function(e,t){d.removeClass(j),e=e||r(d),t=t||r(O),O[0].style.position="",O[0].style.top=""}(t,n)}O[0].style.opacity=1}))},P=!1;a.calculateDropdownPos=function(){if(w.open){if(0===(O=angular.element(d).querySelectorAll(".ui-select-dropdown")).length)return;if(""!==w.search||P||(O[0].style.opacity=0,P=!0),!r(O).height&&w.$animate&&w.$animate.on&&w.$animate.enabled(O)){var e=!0;w.$animate.on("enter",O,(function(t,n){"close"===n&&e&&(A(),e=!1)}))}else A()}else{if(null===O||0===O.length)return;O[0].style.opacity=0,O[0].style.position="",O[0].style.top="",d.removeClass(j)}}}}}}]),r.directive("uiSelectMatch",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(n){n.addClass("ui-select-match");var r=n.parent();return(t(r,"theme")||e.theme)+(angular.isDefined(t(r,"multiple"))?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,n,r,a){function l(e){a.allowClear=!!angular.isDefined(e)&&(""===e||"true"===e.toLowerCase())}a.lockChoiceExpression=r.uiLockChoice,r.$observe("placeholder",(function(t){a.placeholder=void 0!==t?t:e.placeholder})),r.$observe("allowClear",l),l(r.allowClear),a.multiple&&a.sizeSearchInput()}};function t(e,t){return e[0].hasAttribute(t)?e.attr(t):e[0].hasAttribute("data-"+t)?e.attr("data-"+t):e[0].hasAttribute("x-"+t)?e.attr("x-"+t):void 0}}]),r.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(n,r){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var n,r=this,a=e.$select;angular.isUndefined(a.selected)&&(a.selected=[]),e.$evalAsync((function(){n=e.ngModel})),r.activeMatchIndex=-1,r.updateModel=function(){n.$setViewValue(Date.now()),r.refreshComponent()},r.refreshComponent=function(){a.refreshItems&&a.refreshItems(),a.sizeSearchInput&&a.sizeSearchInput()},r.removeChoice=function(n){if(a.isLocked(null,n))return!1;var l=a.selected[n],f={};return f[a.parserResult.itemName]=l,a.selected.splice(n,1),r.activeMatchIndex=-1,a.sizeSearchInput(),t((function(){a.onRemoveCallback(e,{$item:l,$model:a.parserResult.modelMapper(e,f)})})),r.updateModel(),!0},r.getPlaceholder=function(){if(!a.selected||!a.selected.length)return a.placeholder}}],controllerAs:"$selectMultiple",link:function(a,l,f,d){var h=d[0],p=a.ngModel=d[1],y=a.$selectMultiple;function w(e){return void 0!==e&&void 0!==h.search&&e.filter((function(e){return void 0!==h.search.toUpperCase()&&void 0!==e&&e.toUpperCase()===h.search.toUpperCase()})).length>0}function x(e,t){var n=-1;if(angular.isArray(e))for(var r=angular.copy(e),a=0;a<r.length;a++)if(void 0===h.tagging.fct)r[a]+" "+h.taggingLabel===t&&(n=a);else{var l=r[a];angular.isObject(l)&&(l.isTag=!0),angular.equals(l,t)&&(n=a)}return n}h.multiple=!0,h.focusInput=h.searchInput,p.$isEmpty=function(e){return!e||0===e.length},p.$parsers.unshift((function(){for(var e,t={},n=[],r=h.selected.length-1;r>=0;r--)(t={})[h.parserResult.itemName]=h.selected[r],e=h.parserResult.modelMapper(a,t),n.unshift(e);return n})),p.$formatters.unshift((function(e){var t,n=h.parserResult&&h.parserResult.source(a,{$select:{search:""}}),r={};if(!n)return e;var l=[],f=function(e,n){if(e&&e.length){for(var f=e.length-1;f>=0;f--){if(r[h.parserResult.itemName]=e[f],t=h.parserResult.modelMapper(a,r),h.parserResult.trackByExp){var d=/(\w*)\./.exec(h.parserResult.trackByExp),p=/\.([^\s]+)/.exec(h.parserResult.trackByExp);if(d&&d.length>0&&d[1]==h.parserResult.itemName&&p&&p.length>0&&t[p[1]]==n[p[1]])return l.unshift(e[f]),!0}if(angular.equals(t,n))return l.unshift(e[f]),!0}return!1}};if(!e)return l;for(var d=e.length-1;d>=0;d--)f(h.selected,e[d])||f(n,e[d])||l.unshift(e[d]);return l})),a.$watchCollection((function(){return p.$modelValue}),(function(e,t){t!=e&&(angular.isDefined(p.$modelValue)&&(p.$modelValue=null),y.refreshComponent())})),p.$render=function(){if(!angular.isArray(p.$viewValue)){if(!t(p.$viewValue))throw n("multiarr","Expected model value to be array but got '{0}'",p.$viewValue);p.$viewValue=[]}h.selected=p.$viewValue,y.refreshComponent(),a.$evalAsync()},a.$on("uis:select",(function(e,t){if(!(h.selected.length>=h.limit)){h.selected.push(t);var n={};n[h.parserResult.itemName]=t,r((function(){h.onSelectCallback(a,{$item:t,$model:h.parserResult.modelMapper(a,n)})})),y.updateModel()}})),a.$on("uis:activate",(function(){y.activeMatchIndex=-1})),a.$watch("$select.disabled",(function(e,t){t&&!e&&h.sizeSearchInput()})),h.searchInput.on("keydown",(function(t){var n=t.which;a.$apply((function(){var r=!1;e.isHorizontalMovement(n)&&(r=function(t){var n=(x=h.searchInput[0],angular.isNumber(x.selectionStart)?x.selectionStart:x.value.length),r=h.selected.length,a=0,l=r-1,f=y.activeMatchIndex,d=y.activeMatchIndex+1,p=y.activeMatchIndex-1,w=f;var x;if(n>0||h.search.length&&t==e.RIGHT)return!1;function _(){switch(t){case e.LEFT:return~y.activeMatchIndex?p:l;case e.RIGHT:return~y.activeMatchIndex&&f!==l?d:(h.activate(),!1);case e.BACKSPACE:return~y.activeMatchIndex?y.removeChoice(f)?p:f:l;case e.DELETE:return!!~y.activeMatchIndex&&(y.removeChoice(y.activeMatchIndex),f)}}h.close(),w=_(),h.selected.length&&!1!==w?y.activeMatchIndex=Math.min(l,Math.max(a,w)):y.activeMatchIndex=-1;return!0}(n)),r&&n!=e.TAB&&(t.preventDefault(),t.stopPropagation())}))})),h.searchInput.on("keyup",(function(t){if(e.isVerticalMovement(t.which)||a.$evalAsync((function(){h.activeIndex=!1===h.taggingLabel?-1:0})),h.tagging.isActivated&&h.search.length>0){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||e.isVerticalMovement(t.which))return;if(h.activeIndex=!1===h.taggingLabel?-1:0,!1===h.taggingLabel)return;var n,r,l,f=angular.copy(h.items),d=angular.copy(h.items),p=!1,y=-1;if(void 0!==h.tagging.fct){if((r=h.$filter("filter")(f,{isTag:!0})).length>0&&(l=r[0]),f.length>0&&l&&(p=!0,f=f.slice(1,f.length),d=d.slice(1,d.length)),n=h.tagging.fct(h.search),d.some((function(e){return angular.equals(e,n)}))||h.selected.some((function(e){return angular.equals(e,n)})))return void a.$evalAsync((function(){h.activeIndex=0,h.items=f}));n&&(n.isTag=!0)}else{if(r=h.$filter("filter")(f,(function(e){return e.match(h.taggingLabel)})),r.length>0&&(l=r[0]),void 0!==f[0]&&f.length>0&&l&&(p=!0,f=f.slice(1,f.length),d=d.slice(1,d.length)),n=h.search+" "+h.taggingLabel,x(h.selected,h.search)>-1)return;if(w(d.concat(h.selected)))return void(p&&(f=d,a.$evalAsync((function(){h.activeIndex=0,h.items=f}))));if(w(d))return void(p&&(h.items=d.slice(1,d.length)))}p&&(y=x(h.selected,n)),y>-1?f=f.slice(y+1,f.length-1):(f=[],n&&f.push(n),f=f.concat(d)),a.$evalAsync((function(){if(h.activeIndex=0,h.items=f,h.isGrouped){var e=n?f.slice(1):f;h.setItemsFn(e),n&&(h.items.unshift(n),h.groups.unshift({name:"",items:[n],tagging:!0}))}}))}})),h.searchInput.on("blur",(function(){r((function(){y.activeMatchIndex=-1}))}))}}}]),r.directive("uiSelectNoChoice",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){return t.addClass("ui-select-no-choice"),(t.parent().attr("theme")||e.theme)+"/no-choice.tpl.html"}}}]),r.directive("uiSelectSingle",["$timeout","$compile",function(n,r){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(a,l,f,d){var h=d[0],p=d[1];p.$parsers.unshift((function(e){if(t(e))return e;var n={};return n[h.parserResult.itemName]=e,h.parserResult.modelMapper(a,n)})),p.$formatters.unshift((function(e){if(t(e))return e;var n=h.parserResult&&h.parserResult.source(a,{$select:{search:""}}),r={};if(n){var l=function(t){return r[h.parserResult.itemName]=t,h.parserResult.modelMapper(a,r)===e};if(h.selected&&l(h.selected))return h.selected;for(var f=n.length-1;f>=0;f--)if(l(n[f]))return n[f]}return e})),a.$watch("$select.selected",(function(e){p.$viewValue!==e&&p.$setViewValue(e)})),p.$render=function(){h.selected=p.$viewValue},a.$on("uis:select",(function(e,r){h.selected=r;var l={};l[h.parserResult.itemName]=r,n((function(){h.onSelectCallback(a,{$item:r,$model:t(r)?r:h.parserResult.modelMapper(a,l)})}))})),a.$on("uis:close",(function(e,t){n((function(){h.focusser.prop("disabled",!1),t||h.focusser[0].focus()}),0,!1)})),a.$on("uis:activate",(function(){y.prop("disabled",!0)}));var y=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");r(y)(a),h.focusser=y,h.focusInput=y,l.parent().append(y),y.bind("focus",(function(){a.$evalAsync((function(){h.focus=!0}))})),y.bind("blur",(function(){a.$evalAsync((function(){h.focus=!1}))})),y.bind("keydown",(function(t){if(t.which===e.BACKSPACE&&!1!==h.backspaceReset)return t.preventDefault(),t.stopPropagation(),h.select(void 0),void a.$apply();t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||(t.which!=e.DOWN&&t.which!=e.UP&&t.which!=e.ENTER&&t.which!=e.SPACE||(t.preventDefault(),t.stopPropagation(),h.activate()),a.$digest())})),y.bind("keyup input",(function(t){t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||t.which==e.ENTER||t.which===e.BACKSPACE||(h.activate(y.val()),y.val(""),a.$digest())}))}}}]),r.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,n){return{require:["^^uiSelect","^ngModel"],link:function(t,r,a,l){if(null===t[a.uiSelectSort])throw n("sort","Expected a list to sort");var f=l[0],d=l[1],h=angular.extend({axis:"horizontal"},t.$eval(a.uiSelectSortOptions)).axis,p="dragging",y="dropping",w="dropping-before",x="dropping-after";t.$watch((function(){return f.sortable}),(function(e){e?r.attr("draggable",!0):r.removeAttr("draggable")})),r.on("dragstart",(function(e){r.addClass(p),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text",t.$index.toString())})),r.on("dragend",(function(){k(p)}));var _,S=function(e,t){this.splice(t,0,this.splice(e,1)[0])},k=function(e){angular.forEach(f.$element.querySelectorAll("."+e),(function(t){angular.element(t).removeClass(e)}))},C=function(e){e.preventDefault(),("vertical"===h?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0))<this["vertical"===h?"offsetHeight":"offsetWidth"]/2?(k(x),r.addClass(w)):(k(w),r.addClass(x))},E=function(t){t.preventDefault();var n=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text"),10);e.cancel(_),_=e((function(){O(n)}),20)},O=function(e){var n=t.$eval(a.uiSelectSort),l=n[e],f=null;f=r.hasClass(w)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,S.apply(n,[e,f]),d.$setViewValue(Date.now()),t.$apply((function(){t.$emit("uiSelectSort:change",{array:n,item:l,from:e,to:f})})),k(y),k(w),k(x),r.off("drop",E)};r.on("dragenter",(function(){r.hasClass(p)||(r.addClass(y),r.on("dragover",C),r.on("drop",E))})),r.on("dragleave",(function(e){e.target==r&&(k(y),k(w),k(x),r.off("dragover",C),r.off("drop",E))}))}}}]),r.directive("uisOpenClose",["$parse","$timeout",function(e,t){return{restrict:"A",require:"uiSelect",link:function(n,r,a,l){l.onOpenCloseCallback=e(a.uisOpenClose),n.$watch("$select.open",(function(e,r){e!==r&&t((function(){l.onOpenCloseCallback(n,{isOpen:e})}))}))}}}]),r.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){this.parse=function(n){var r;if(!(r=n.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/)))throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var a=r[5],l="";if(r[3]){a=r[5].replace(/(^\()|(\)$)/g,"");var f=r[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);f&&f[1].trim()&&(l=f[1],a=a.replace(l,""))}return{itemName:r[4]||r[2],keyName:r[3],source:t(a),filters:l,trackByExp:r[6],modelMapper:t(r[1]||r[4]||r[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}},this.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"></span></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""></li></ul>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-expanded="{{$select.open}}" aria-label="{{$select.baseTitle}}" ng-class="{\'spinner\': $select.refreshing}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><span ng-show="$select.open && $select.refreshing && $select.spinnerEnabled" class="ui-select-refreshing {{$select.spinnerClass}}"></span> <input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-class="{\'select2-active\': $select.refreshing}" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown" ng-class="{\'single\': !$select.multiple, \'multi\': $select.multiple}"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match-multiple.tpl.html",'<div class="ui-select-match" data-value="" ng-repeat="$item in $select.selected track by $index" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'active\':$selectMultiple.activeMatchIndex === $index}" ui-select-sort="$select.selected"><span class="ui-select-match-item" ng-class="{\'select-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""></span> <span class="remove ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&times;</span></span></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""></span></div>'),e.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("selectize/select-multiple.tpl.html",'<div class="ui-select-container selectize-control multi plugin-remove_button" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-model="$select.search" ng-disabled="$select.disabled" aria-expanded="{{$select.open}}" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>')}])},58976:function(e,t,n){var r,a,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(a)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r=[n(95095),n(81637)],a=function(e,t){var n,r,a,p=void 0;window.sharejs=p={};var y=p.types={};p._bt=r=function(e,t,n,r){var a=void 0;return e.transformX=e.transformX=a=function(e,l){n(e),n(l);var f,h,p,y=[],w=!0,x=!1,_=void 0;try{for(var S,k=Array.from(l)[Symbol.iterator]();!(w=(S=k.next()).done);w=!0){for(var C=S.value,E=[],O=0;O<e.length;){var j,T=[];if(f=e[O],p=T,t(E,f,h=C,"left"),t(p,h,f,"right"),O++,1!==T.length){if(0===T.length){var A=!0,P=!1,D=void 0;try{for(var R,I=Array.from(e.slice(O))[Symbol.iterator]();!(A=(R=I.next()).done);A=!0)j=R.value,r(E,j)}catch(e){P=!0,D=e}finally{try{!A&&I.return&&I.return()}finally{if(P)throw D}}C=null;break}var M=Array.from(a(e.slice(O),T)),L=d(M,2),N=L[0],F=L[1],q=!0,B=!1,U=void 0;try{for(var H,z=Array.from(N)[Symbol.iterator]();!(q=(H=z.next()).done);q=!0)j=H.value,r(E,j)}catch(e){B=!0,U=e}finally{try{!q&&z.return&&z.return()}finally{if(B)throw U}}var V=!0,W=!1,Z=void 0;try{for(var G,K=Array.from(F)[Symbol.iterator]();!(V=(G=K.next()).done);V=!0){var Y=G.value;r(y,Y)}}catch(e){W=!0,Z=e}finally{try{!V&&K.return&&K.return()}finally{if(W)throw Z}}C=null;break}C=T[0]}null!=C&&r(y,C),e=E}}catch(e){x=!0,_=e}finally{try{!w&&k.return&&k.return()}finally{if(x)throw _}}return[e,y]},e.transform=e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");if(0===n.length)return e;if(1===e.length&&1===n.length)return t([],e[0],n[0],r);if("left"===r){var l,f=Array.from(a(e,n)),h=d(f,2);return l=h[0],h[1],l}var p=Array.from(a(n,e)),y=d(p,2);return y[0],y[1]}};var w={name:"text",create:function(){return""}},x=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},_=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if(!("string"===f(e.i)^"string"===f(e.d)^"string"===f(e.c)))throw new Error("component needs an i, d or c field");if(!(e.p>=0))throw new Error("position cannot be negative")},S=function(e){var t=!0,n=!1,r=void 0;try{for(var a,l=Array.from(e)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var f=a.value;_(f)}}catch(e){n=!0,r=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw r}}return!0};w.apply=function(e,t){S(t);var n=!0,r=!1,a=void 0;try{for(var l,f=Array.from(t)[Symbol.iterator]();!(n=(l=f.next()).done);n=!0){var d=l.value;if(null!=d.i)e=x(e,d.p,d.i);else if(null!=d.d){var h=e.slice(d.p,d.p+d.d.length);if(d.d!==h)throw new Error("Delete component '"+d.d+"' does not match deleted text '"+h+"'");e=e.slice(0,d.p)+e.slice(d.p+d.d.length)}else{if(null==d.c)throw new Error("Unknown op type");var p=e.slice(d.p,d.p+d.c.length);if(d.c!==p)throw new Error("Comment component '"+d.c+"' does not match commented text '"+p+"'")}}}catch(e){r=!0,a=e}finally{try{!n&&f.return&&f.return()}finally{if(r)throw a}}return e};var k=function(e,t){var n=void 0,r={};for(var a in e)n=e[a],r[a]=n;for(a in t)n=t[a],r[a]=n;return r};w._append=n=function(e,t){if(""!==t.i&&""!==t.d){if(0===e.length)return e.push(t);var n=e[e.length-1];return null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length&&n.u===t.u?e[e.length-1]=k(n,{i:x(n.i,t.p-n.p,t.i)}):null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length&&n.u===t.u?e[e.length-1]=k(n,{d:x(t.d,n.p-t.p,n.d),p:t.p}):e.push(t)}},w.compose=function(e,t){S(e),S(t);var r=e.slice(),a=!0,l=!1,f=void 0;try{for(var d,h=Array.from(t)[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){var p=d.value;n(r,p)}}catch(e){l=!0,f=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw f}}return r},w.compress=function(e){return w.compose([],e)},w.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);var r=!0,a=!1,l=void 0;try{for(var f,d=Array.from(e)[Symbol.iterator]();!(r=(f=d.next()).done);r=!0){var h=f.value;null==h.p&&(h.p=0),n(t,h)}}catch(e){a=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(a)throw l}}return t};var C=function(e,t,n){if(null!=t.i)return t.p<e||t.p===e&&n?e+t.i.length:e;if(null!=t.d)return e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length;if(null!=t.c)return e;throw new Error("unknown op type")};w.transformCursor=function(e,t,n){var r="right"===n,a=!0,l=!1,f=void 0;try{for(var d,h=Array.from(t)[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){var p=d.value;e=C(e,p,r)}}catch(e){l=!0,f=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw f}}return e},w._tc=a=function(e,t,r,a){var l=void 0,f=void 0,d=void 0;if(S([t]),S([r]),null!=t.i)n(e,k(t,{p:C(t.p,r,"right"===a)}));else if(null!=t.d)if(null!=r.i){var h=t.d;t.p<r.p&&(n(e,k(t,{d:h.slice(0,r.p-t.p)})),h=h.slice(r.p-t.p)),""!==h&&n(e,k(t,{d:h,p:t.p+r.i.length}))}else if(null!=r.d)if(t.p>=r.p+r.d.length)n(e,k(t,{p:t.p-r.d.length}));else if(t.p+t.d.length<=r.p)n(e,t);else{if(d=k(t,{d:""}),t.p<r.p&&(d.d=t.d.slice(0,r.p-t.p)),t.p+t.d.length>r.p+r.d.length&&(d.d+=t.d.slice(r.p+r.d.length-t.p)),f=Math.max(t.p,r.p),l=Math.min(t.p+t.d.length,r.p+r.d.length),t.d.slice(f-t.p,l-t.p)!==r.d.slice(f-r.p,l-r.p))throw new Error("Delete ops delete different text in the same region of the document");""!==d.d&&(d.p=C(d.p,r),n(e,d))}else{if(null==r.c)throw new Error("unknown op type");n(e,t)}else if(null!=t.c)if(null!=r.i)if(t.p<r.p&&r.p<t.p+t.c.length){var p=r.p-t.p,y=t.c.slice(0,+(p-1)+1||void 0)+r.i+t.c.slice(p);n(e,k(t,{c:y}))}else n(e,k(t,{p:C(t.p,r,!0)}));else if(null!=r.d)if(t.p>=r.p+r.d.length)n(e,k(t,{p:t.p-r.d.length}));else if(t.p+t.c.length<=r.p)n(e,t);else{if(d=k(t,{c:""}),t.p<r.p&&(d.c=t.c.slice(0,r.p-t.p)),t.p+t.c.length>r.p+r.d.length&&(d.c+=t.c.slice(r.p+r.d.length-t.p)),f=Math.max(t.p,r.p),l=Math.min(t.p+t.c.length,r.p+r.d.length),t.c.slice(f-t.p,l-t.p)!==r.d.slice(f-r.p,l-r.p))throw new Error("Delete ops delete different text in the same region of the document");d.p=C(d.p,r),n(e,d)}else{if(null==r.c)throw new Error("unknown op type");n(e,t)}return e};w.invert=function(e){return Array.from(e.slice().reverse()).map((function(e){return function(e){return null!=e.i?{d:e.i,p:e.p}:{i:e.d,p:e.p}}(e)}))},p.types||(p.types={}),r(w,a,S,n),p.types.text=w,w.api={provides:{text:!0},getLength:function(){return this.snapshot.length},getText:function(){return this.snapshot},insert:function(e,t,n,r){var a={p:e,i:t};return n&&(a.u=!0),a=[a],this.submitOp(a,r),a},del:function(e,t,n,r){var a={p:e,d:this.snapshot.slice(e,e+t)};return n&&(a.u=!0),a=[a],this.submitOp(a,r),a},_register:function(){return this.on("remoteop",(function(e){var t=this;return function(){var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=Array.from(e)[Symbol.iterator]();!(r=(f=d.next()).done);r=!0){var h=f.value;void 0!==h.i?n.push(t.emit("insert",h.p,h.i)):void 0!==h.d?n.push(t.emit("delete",h.p,h.d)):n.push(void 0)}}catch(e){a=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(a)throw l}}return n}()}))}};var E=function(e){return setTimeout(e,0)},O=function(){function e(){h(this,e)}return l(e,[{key:"on",value:function(e,t){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(t),this}},{key:"removeListener",value:function(e,t){var n=this;this._events||(this._events={});for(var r=this._events[e]||(this._events[e]=[]),a=0;a<r.length;)r[a]===t&&(r[a]=void 0),a++;return E((function(){return n._events[e]=Array.from(n._events[e]).filter((function(e){return e}))})),this}},{key:"emit",value:function(e){if(!(null!=this._events?this._events[e]:void 0))return this;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=!0,l=!1,f=void 0;try{for(var d,h=Array.from(this._events[e])[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){var p=d.value;p&&p.apply(this,n)}}catch(e){l=!0,f=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw f}}return this}}]),e}();O.mixin=function(e){var t=e.prototype||e;return t.on=O.prototype.on,t.removeListener=O.prototype.removeListener,t.emit=O.prototype.emit,e},p.extendDoc=function(e,t){return j.prototype[e]=t};var j=function(){function e(t,n,r){h(this,e),this.flush=this.flush.bind(this),this.setFlushDelay=this.setFlushDelay.bind(this),this.shout=this.shout.bind(this),this.connection=t,this.name=n,r||(r={}),this.version=r.v,this.snapshot=r.snaphot,r.type&&this._setType(r.type),this.state="closed",this.autoOpen=!1,this._create=r.create,this.inflightOp=null,this.inflightCallbacks=[],this.inflightSubmittedIds=[],this.pendingOp=null,this.pendingCallbacks=[]}return l(e,[{key:"_xf",value:function(e,t){return this.type.transformX?this.type.transformX(e,t):[this.type.transform(e,t,"left"),this.type.transform(t,e,"right")]}},{key:"_otApply",value:function(e,t,n){var r=this.snapshot;if(this.snapshot=this.type.apply(this.snapshot,e),this.emit("change",e,r,n),t)return this.emit("remoteop",e,r,n)}},{key:"_connectionStateChanged",value:function(e,t){switch(e){case"disconnected":this.state="closed",this.inflightOp&&this.inflightSubmittedIds.push(this.connection.id),this.emit("closed");break;case"ok":this.autoOpen&&this.open();break;case"stopped":"function"==typeof this._openCallback&&this._openCallback(t)}return this.emit(e,t)}},{key:"_setType",value:function(e){if("string"==typeof e&&(e=y[e]),!e||!e.compose)throw new Error("Support for types without compose() is not implemented");if(this.type=e,e.api){for(var t in e.api){var n=e.api[t];this[t]=n}return"function"==typeof this._register?this._register():void 0}return this.provides={}}},{key:"_onMessage",value:function(e){if(!0===e.open){if(this.state="open",this._create=!1,null==this.created&&(this.created=!!e.create),e.type&&this._setType(e.type),e.create?(this.created=!0,this.snapshot=this.type.create()):(!0!==this.created&&(this.created=!1),void 0!==e.snapshot&&(this.snapshot=e.snapshot)),null!=e.v&&(this.version=e.v),this.inflightOp){var t={doc:this.name,op:this.inflightOp,v:this.version};this.inflightSubmittedIds.length&&(t.dupIfSource=this.inflightSubmittedIds),this.connection.send(t)}else this.flush();return this.emit("open"),"function"==typeof this._openCallback?this._openCallback(null):void 0}if(!1===e.open)return e.error&&("undefined"!=typeof console&&null!==console&&console.error("Could not open document: "+e.error),this.emit("error",e.error),"function"==typeof this._openCallback&&this._openCallback(e.error)),this.state="closed",this.emit("closed"),"function"==typeof this._closeCallback&&this._closeCallback(),this._closeCallback=null;if(null!==e.op||"Op already submitted"!==r){if(void 0===e.op&&void 0!==e.v||e.op&&Array.from(this.inflightSubmittedIds).includes(e.meta.source)){var n=this.inflightOp;this.inflightOp=null,this.inflightSubmittedIds.length=0,null===this.pendingOp&&this.emit("saved");var r=e.error;if(r){if(this.type.invert){var a=this.type.invert(n);if(this.pendingOp){var l=Array.from(this._xf(this.pendingOp,a)),f=d(l,2);this.pendingOp=f[0],a=f[1]}this._otApply(a,!0,e)}else this.emit("error","Op apply failed ("+r+") and the op could not be reverted");var h=!0,p=!1,y=void 0;try{for(var w,x=Array.from(this.inflightCallbacks)[Symbol.iterator]();!(h=(w=x.next()).done);h=!0)(0,w.value)(r)}catch(e){p=!0,y=e}finally{try{!h&&x.return&&x.return()}finally{if(p)throw y}}}else{if(e.v<this.version)return;if(e.v!==this.version)throw new Error("Invalid version from server");this.version++,this.emit("acknowledge",n);var _=!0,S=!1,k=void 0;try{for(var C,E=Array.from(this.inflightCallbacks)[Symbol.iterator]();!(_=(C=E.next()).done);_=!0)(0,C.value)(null,n)}catch(e){S=!0,k=e}finally{try{!_&&E.return&&E.return()}finally{if(S)throw k}}}return this.delayedFlush()}if(e.op){if(e.v<this.version)return;if(e.doc!==this.name)return this.emit("error","Expected docName '"+this.name+"' but got "+e.doc);if(e.v!==this.version)return this.emit("error","Expected version "+this.version+" but got "+e.v);var O=e.op;if(null!==this.inflightOp){var j=Array.from(this._xf(this.inflightOp,O)),T=d(j,2);this.inflightOp=T[0],O=T[1]}if(null!==this.pendingOp){var A=Array.from(this._xf(this.pendingOp,O)),P=d(A,2);this.pendingOp=P[0],O=P[1]}return this.version++,this._otApply(O,!0,e)}if(e.meta){var D=e.meta,R=D.path,I=D.value;return"shout"===(null!=R?R[0]:void 0)?this.emit("shout",I):"undefined"!=typeof console&&null!==console?console.warn("Unhandled meta op:",e):void 0}return"undefined"!=typeof console&&null!==console?console.warn("Unhandled document message:",e):void 0}}},{key:"flush",value:function(){if(this.flushTimeout=null,"ok"===this.connection.state&&null===this.inflightOp&&null!==this.pendingOp){if(this.inflightOp=this.pendingOp,this.inflightCallbacks=this.pendingCallbacks,this.pendingOp=null,this.pendingCallbacks=[],this.emit("flipped_pending_to_inflight"),window.useShareJsHash||window.sl_debugging){var e=Date.now(),n=this.__lastSubmitTimestamp&&e-this.__lastSubmitTimestamp;if(!this.__lastSubmitTimestamp||n>5e3||n<0||window.sl_debugging){var r=t("blob "+this.snapshot.length+"\0"+this.snapshot).toString();this.__lastSubmitTimestamp=e}}var a=this.__lastVersion;return this.__lastVersion=this.version,this.connection.send({doc:this.name,op:this.inflightOp,v:this.version,lastV:a,hash:r})}}},{key:"submitOp",value:function(e,t){null!=this.type.normalize&&(e=this.type.normalize(e));var n=this.snapshot;return this.snapshot=this.type.apply(this.snapshot,e),null!==this.pendingOp?this.pendingOp=this.type.compose(this.pendingOp,e):this.pendingOp=e,t&&this.pendingCallbacks.push(t),this.emit("change",e,n),this.delayedFlush()}},{key:"delayedFlush",value:function(){if(null==this.flushTimeout)return this.flushTimeout=setTimeout(this.flush,this._flushDelay||0)}},{key:"setFlushDelay",value:function(e){return this._flushDelay=e}},{key:"shout",value:function(e){return this.connection.send({doc:this.name,meta:{path:["shout"],value:e}})}},{key:"open",value:function(e){var t=this;if(this.autoOpen=!0,"closed"===this.state){var n={doc:this.name,open:!0};return void 0===this.snapshot&&(n.snapshot=null),this.type&&(n.type=this.type.name),null!=this.version&&(n.v=this.version),this._create&&(n.create=!0),this.connection.send(n),this.state="opening",this._openCallback=function(n){return t._openCallback=null,"function"==typeof e?e(n):void 0}}}},{key:"close",value:function(e){return this.autoOpen=!1,"closed"===this.state?"function"==typeof e?e():void 0:(this.connection.send({doc:this.name,open:!1}),this.state="closed",this.emit("closing"),this._closeCallback=e)}}]),e}();O.mixin(j),p.Doc=j;var T=ace.require("ace/range").Range;window.sharejs.extendDoc("attach_ace",(function(e,t){if(!this.provides.text)throw new Error("Only text documents can be attached to ace");var n=this,r=e.getSession().getDocument();function a(){return window.setTimeout((function(){var e=r.getValue(),t=n.getText();if(e!==t)return n.emit("error","Text does not match in ace"),console.error("Text does not match!"),console.error("editor: "+e),console.error("ot:     "+t)}),0)}function l(l){if("remote"!==l.origin){if(!(null!=t&&r.getValue().length>=t)){var f=!(!e.getSession().$fromUndo&&!e.getSession().$fromReject);return function(e,t,n,r){var a=function(t){for(var n=e.getLines(0,t.row),r=0,a=0;a<n.length;a++){var l=n[a];r+=a<t.row?l.length:t.column}return r+t.row}(t.start);switch(t.action){case"insert":w=t.lines.join("\n"),n.insert(a,w,r);break;case"remove":w=t.lines.join("\n"),n.del(a,w.length,r);break;default:throw new Error("unknown action: "+t.action)}}(r,l,n,f),a()}n.emit("error",new Error("document length is greater than maxDocLength"))}}function f(e){var t=r.getAllLines(),n=0;for(n=0;n<t.length;n++){if(e<=t[n].length)break;e-=t[n].length+1}return{row:n,column:e}}function d(e,t){r.getLength()<=1&&r.$detectNewLine(t);var n=r.$split(t),l=f(e),d=r.clippedPos(l.row,l.column),h={row:d.row+n.length-1,column:(1===n.length?d.column:0)+n[n.length-1].length};return r.applyDelta({start:d,end:h,action:"insert",lines:n,origin:"remote"}),a()}function h(e,t){var n=T.fromPoints(f(e),f(e+t.length)),l=r.clippedPos(n.start.row,n.start.column),d=r.clippedPos(n.end.row,n.end.column);return r.applyDelta({start:l,end:d,action:"remove",lines:r.getLinesForRange({start:l,end:d}),origin:"remote"}),a()}r.setNewLineMode("unix"),h(0,r.getValue()),d(0,n.getText()),a(),r.on("change",l),n.on("insert",d),n.on("delete",h),n.detach_ace=function(){return n.removeListener("insert",d),n.removeListener("delete",h),r.removeListener("change",l),delete n.detach_ace}}));return window.sharejs.extendDoc("attach_cm",(function(e,t){if(!this.provides.text)throw new Error("Only text documents can be attached to CodeMirror2");var n=this,r=e.getDoc();function a(){return window.setTimeout((function(){var t=e.getValue(),r=n.getText();if(t!==r)return n.emit("error","Text does not match in CodeMirror"),console.error("Text does not match!"),console.error("editor: "+t),console.error("ot:     "+r)}),0)}function l(e,l){if("remote"!==l.origin){if(!(null!=t&&r.getValue().length>=t)){var f="undo"===l.origin;return function(e,t,n,r){for(var a=0,l=0,f=n.snapshot.split("\n",t.from.line);l<t.from.line;)a+=f[l].length+1,l++;if(a+=t.from.ch,t.removed&&n.del(a,t.removed.join("\n").length,r),t.text)n.insert(a,t.text.join("\n"),r)}(0,l,n,f),a()}n.emit("error",new Error("document length is greater than maxDocLength"))}}function f(t,n){return e.replaceRange(n,e.posFromIndex(t),void 0,"remote"),e.clearHistory(),a()}function d(t,n){var r=e.posFromIndex(t),l=e.posFromIndex(t+n.length);return e.replaceRange("",r,l,"remote"),e.clearHistory(),a()}d(0,e.getValue()),f(0,n.getText()),a(),r.on("change",l),this.on("insert",f),this.on("delete",d),this.detach_cm=function(){return this.removeListener("insert",f),this.removeListener("delete",d),r.off("change",l),delete this.detach_cm}})),window.sharejs}.apply(t,r),void 0===a||(e.exports=a)},63733:function(){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("collapse",["$animate",function(e){return{link:function(t,n,r){function a(){n.removeClass("collapse").addClass("collapsing"),e.addClass(n,"in",{to:{height:n[0].scrollHeight+"px"}}).then(l)}function l(){n.removeClass("collapsing"),n.css({height:"auto"})}function f(){n.css({height:n[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing"),e.removeClass(n,"in",{to:{height:"0"}}).then(d)}function d(){n.css({height:"0"}),n.removeClass("collapsing"),n.addClass("collapse")}t.$watch(r.collapse,(function(e){e?f():a()}))}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(r){(angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers)&&angular.forEach(this.groups,(function(e){e!==r&&(e.isOpen=!1)}))},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",(function(){t.removeGroup(e)}))},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",(function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}})).directive("accordionGroup",(function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,r){r.addGroup(e),e.$watch("isOpen",(function(t){t&&r.closeOthers(e)})),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}})).directive("accordionHeading",(function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,r,a){r.setHeading(a(e,angular.noop))}}})).directive("accordionTransclude",(function(){return{require:"^accordionGroup",link:function(e,t,n,r){e.$watch((function(){return r[n.accordionTransclude]}),(function(e){e&&(t.html(""),t.append(e))}))}}})),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",(function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}})).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,n,r,a){e((function(){a.close()}),parseInt(r.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",(function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,(function(e){t.html(e||"")}))}})),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",(function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,r){var a=r[0],l=r[1];l.$render=function(){t.toggleClass(a.activeClass,angular.equals(l.$modelValue,e.$eval(n.btnRadio)))},t.bind(a.toggleEvent,(function(){var r=t.hasClass(a.activeClass);(!r||angular.isDefined(n.uncheckable))&&e.$apply((function(){l.$setViewValue(r?null:e.$eval(n.btnRadio)),l.$render()}))}))}}})).directive("btnCheckbox",(function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,r){function a(){return l(n.btnCheckboxTrue,!0)}function l(t,n){var r=e.$eval(t);return angular.isDefined(r)?r:n}var f=r[0],d=r[1];d.$render=function(){t.toggleClass(f.activeClass,angular.equals(d.$modelValue,a()))},t.bind(f.toggleEvent,(function(){e.$apply((function(){d.$setViewValue(t.hasClass(f.activeClass)?l(n.btnCheckboxFalse,!1):a()),d.$render()}))}))}}})),angular.module("ui.bootstrap.carousel",[]).controller("CarouselController",["$scope","$interval","$animate",function(e,t,n){function r(e){if(angular.isUndefined(y[e].index))return y[e];var t;for(y.length,t=0;t<y.length;++t)if(y[t].index==e)return y[t]}function a(){l();var n=+e.interval;!isNaN(n)&&n>0&&(d=t(f,n))}function l(){d&&(t.cancel(d),d=null)}function f(){var t=+e.interval;h&&!isNaN(t)&&t>0?e.next():e.pause()}var d,h,p=this,y=p.slides=e.slides=[],w=-1;p.currentSlide=null;var x=!1;p.select=e.select=function(t,r){var l=p.indexOfSlide(t);void 0===r&&(r=l>p.getCurrentIndex()?"next":"prev"),t&&t!==p.currentSlide&&(x||(angular.extend(t,{direction:r,active:!0}),angular.extend(p.currentSlide||{},{direction:r,active:!1}),n.enabled()&&!e.noTransition&&t.$element&&(e.$currentTransition=!0,t.$element.one("$animate:close",(function(){e.$currentTransition=null}))),p.currentSlide=t,w=l,a()))},e.$on("$destroy",(function(){x=!0})),p.getCurrentIndex=function(){return p.currentSlide&&angular.isDefined(p.currentSlide.index)?+p.currentSlide.index:w},p.indexOfSlide=function(e){return angular.isDefined(e.index)?+e.index:y.indexOf(e)},e.next=function(){var t=(p.getCurrentIndex()+1)%y.length;return e.$currentTransition?void 0:p.select(r(t),"next")},e.prev=function(){var t=p.getCurrentIndex()-1<0?y.length-1:p.getCurrentIndex()-1;return e.$currentTransition?void 0:p.select(r(t),"prev")},e.isActive=function(e){return p.currentSlide===e},e.$watch("interval",a),e.$on("$destroy",l),e.play=function(){h||(h=!0,a())},e.pause=function(){e.noPause||(h=!1,l())},p.addSlide=function(t,n){t.$element=n,y.push(t),1===y.length||t.active?(p.select(y[y.length-1]),1==y.length&&e.play()):t.active=!1},p.removeSlide=function(e){angular.isDefined(e.index)&&y.sort((function(e,t){return+e.index>+t.index}));var t=y.indexOf(e);y.splice(t,1),y.length>0&&e.active?p.select(t>=y.length?y[t-1]:y[t]):w>t&&w--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",(function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?",index:"=?"},link:function(e,t,n,r){r.addSlide(e,t),e.$on("$destroy",(function(){r.removeSlide(e)})),e.$watch("active",(function(t){t&&r.select(e)}))}}})).animation(".item",["$animate",function(e){return{beforeAddClass:function(t,n,r){if("active"==n&&t.parent()&&!t.parent().scope().noTransition){var a=!1,l=t.isolateScope().direction,f="next"==l?"left":"right";return t.addClass(l),e.addClass(t,f).then((function(){a||t.removeClass(f+" "+l),r()})),function(){a=!0}}r()},beforeRemoveClass:function(t,n,r){if("active"==n&&t.parent()&&!t.parent().scope().noTransition){var a=!1,l="next"==t.isolateScope().direction?"left":"right";return e.addClass(t,l).then((function(){a||t.removeClass(l),r()})),function(){a=!0}}r()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function n(e){var n=[],r=e.split("");return angular.forEach(a,(function(t,a){var l=e.indexOf(a);if(l>-1){e=e.split(""),r[l]="("+t.regex+")",e[l]="$";for(var f=l+1,d=l+a.length;d>f;f++)r[f]="",e[f]="$";e=e.join(""),n.push({index:l,apply:t.apply})}})),{regex:new RegExp("^"+r.join("")+"$"),map:t(n,"index")}}var r=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var a={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e}},H:{regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e}},mm:{regex:"[0-5][0-9]",apply:function(e){this.minutes=+e}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e}},sss:{regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e}},ss:{regex:"[0-5][0-9]",apply:function(e){this.seconds=+e}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e}}};this.parse=function(t,a,l){if(!angular.isString(t)||!a)return t;a=(a=e.DATETIME_FORMATS[a]||a).replace(r,"\\$&"),this.parsers[a]||(this.parsers[a]=n(a));var f=this.parsers[a],d=f.regex,h=f.map,p=t.match(d);if(p&&p.length){var y,w;y=l?{year:l.getFullYear(),month:l.getMonth(),date:l.getDate(),hours:l.getHours(),minutes:l.getMinutes(),seconds:l.getSeconds(),milliseconds:l.getMilliseconds()}:{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0};for(var x=1,_=p.length;_>x;x++){var S=h[x-1];S.apply&&S.apply.call(y,p[x])}return function(e,t,n){return!(1>n)&&(1===t&&n>28?29===n&&(e%4==0&&e%100!=0||e%400==0):3!==t&&5!==t&&8!==t&&10!==t||31>n)}(y.year,y.month,y.date)&&(w=new Date(y.year,y.month,y.date,y.hours,y.minutes,y.seconds,y.milliseconds||0)),w}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e){return"static"===(function(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}(e,"position")||"static")}var r=function(t){for(var r=e[0],a=t.offsetParent||r;a&&a!==r&&n(a);)a=a.offsetParent;return a||r};return{position:function(t){var n=this.offset(t),a={top:0,left:0},l=r(t[0]);l!=e[0]&&((a=this.offset(angular.element(l))).top+=l.clientTop-l.scrollTop,a.left+=l.clientLeft-l.scrollLeft);var f=t[0].getBoundingClientRect();return{width:f.width||t.prop("offsetWidth"),height:f.height||t.prop("offsetHeight"),top:n.top-a.top,left:n.left-a.left}},offset:function(n){var r=n[0].getBoundingClientRect();return{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,r){var a,l,f,d,h=n.split("-"),p=h[0],y=h[1]||"center";a=r?this.offset(e):this.position(e),l=t.prop("offsetWidth"),f=t.prop("offsetHeight");var w={center:function(){return a.left+a.width/2-l/2},left:function(){return a.left},right:function(){return a.left+a.width}},x={center:function(){return a.top+a.height/2-f/2},top:function(){return a.top},bottom:function(){return a.top+a.height}};switch(p){case"right":d={top:x[y](),left:w[p]()};break;case"left":d={top:x[y](),left:a.left-l};break;case"bottom":d={top:x[p](),left:w[y]()};break;default:d={top:a.top-f,left:w[y]()}}return d}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,n,r,a,l,f,d){var h=this,p={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange","shortcutPropagation"],(function(n,a){h[n]=angular.isDefined(t[n])?8>a?r(t[n])(e.$parent):e.$parent.$eval(t[n]):d[n]})),angular.forEach(["minDate","maxDate"],(function(r){t[r]?e.$parent.$watch(n(t[r]),(function(e){h[r]=e?new Date(e):null,h.refreshView()})):h[r]=d[r]?new Date(d[r]):null})),e.datepickerMode=e.datepickerMode||d.datepickerMode,e.maxMode=h.maxMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(t.initDate)?(this.activeDate=e.$parent.$eval(t.initDate)||new Date,e.$parent.$watch(t.initDate,(function(e){e&&(p.$isEmpty(p.$modelValue)||p.$invalid)&&(h.activeDate=e,h.refreshView())}))):this.activeDate=new Date,e.isActive=function(t){return 0===h.compare(t.date,h.activeDate)&&(e.activeDateId=t.uid,!0)},this.init=function(e){(p=e).$render=function(){h.render()}},this.render=function(){if(p.$viewValue){var e=new Date(p.$viewValue),t=!isNaN(e);t?this.activeDate=e:l.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),p.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=p.$viewValue?new Date(p.$viewValue):null;p.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=p.$viewValue?new Date(p.$viewValue):null;return{date:e,label:f(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date),customClass:this.customClass(e)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===h.minMode){var n=p.$viewValue?new Date(p.$viewValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),p.$setViewValue(n),p.$render()}else h.activeDate=t,e.datepickerMode=h.modes[h.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=h.activeDate.getFullYear()+e*(h.step.years||0),n=h.activeDate.getMonth()+e*(h.step.months||0);h.activeDate.setFullYear(t,n,1),h.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===h.maxMode&&1===t||e.datepickerMode===h.minMode&&-1===t||(e.datepickerMode=h.modes[h.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var y=function(){a((function(){h.element[0].focus()}),0,!1)};e.$on("datepicker.focus",y),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),h.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(h.isDisabled(h.activeDate))return;e.select(h.activeDate),y()}else!t.ctrlKey||"up"!==n&&"down"!==n?(h.handleKeyDown(n,t),h.refreshView()):(e.toggleMode("up"===n?1:-1),y())}}]).directive("datepicker",(function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,r){var a=r[0],l=r[1];l&&a.init(l)}}})).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,n,r,a){function l(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?d[t]:29}function f(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}t.showWeeks=a.showWeeks,a.step={months:1},a.element=n;var d=[31,28,31,30,31,30,31,31,30,31,30,31];a._refreshView=function(){var n=a.activeDate.getFullYear(),r=a.activeDate.getMonth(),l=new Date(n,r,1),d=a.startingDay-l.getDay(),h=d>0?7-d:-d,p=new Date(l);h>0&&p.setDate(1-h);for(var y=function(e,t){var n=new Array(t),r=new Date(e),a=0;for(r.setHours(12);t>a;)n[a++]=new Date(r),r.setDate(r.getDate()+1);return n}(p,42),w=0;42>w;w++)y[w]=angular.extend(a.createDateObject(y[w],a.formatDay),{secondary:y[w].getMonth()!==r,uid:t.uniqueId+"-"+w});t.labels=new Array(7);for(var x=0;7>x;x++)t.labels[x]={abbr:e(y[x].date,a.formatDayHeader),full:e(y[x].date,"EEEE")};if(t.title=e(a.activeDate,a.formatDayTitle),t.rows=a.split(y,7),t.showWeeks){t.weekNumbers=[];for(var _=(11-a.startingDay)%7,S=t.rows.length,k=0;S>k;k++)t.weekNumbers.push(f(t.rows[k][_].date))}},a.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},a.handleKeyDown=function(e){var t=a.activeDate.getDate();if("left"===e)t-=1;else if("up"===e)t-=7;else if("right"===e)t+=1;else if("down"===e)t+=7;else if("pageup"===e||"pagedown"===e){var n=a.activeDate.getMonth()+("pageup"===e?-1:1);a.activeDate.setMonth(n,1),t=Math.min(l(a.activeDate.getFullYear(),a.activeDate.getMonth()),t)}else"home"===e?t=1:"end"===e&&(t=l(a.activeDate.getFullYear(),a.activeDate.getMonth()));a.activeDate.setDate(t)},a.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,n,r,a){a.step={years:1},a.element=n,a._refreshView=function(){for(var n=new Array(12),r=a.activeDate.getFullYear(),l=0;12>l;l++)n[l]=angular.extend(a.createDateObject(new Date(r,l,1),a.formatMonth),{uid:t.uniqueId+"-"+l});t.title=e(a.activeDate,a.formatMonthTitle),t.rows=a.split(n,3)},a.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},a.handleKeyDown=function(e){var t=a.activeDate.getMonth();if("left"===e)t-=1;else if("up"===e)t-=3;else if("right"===e)t+=1;else if("down"===e)t+=3;else if("pageup"===e||"pagedown"===e){var n=a.activeDate.getFullYear()+("pageup"===e?-1:1);a.activeDate.setFullYear(n)}else"home"===e?t=0:"end"===e&&(t=11);a.activeDate.setMonth(t)},a.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,n,r){function a(e){return parseInt((e-1)/l,10)*l+1}var l=r.yearRange;r.step={years:l},r.element=t,r._refreshView=function(){for(var t=new Array(l),n=0,f=a(r.activeDate.getFullYear());l>n;n++)t[n]=angular.extend(r.createDateObject(new Date(f+n,0,1),r.formatYear),{uid:e.uniqueId+"-"+n});e.title=[t[0].label,t[l-1].label].join(" - "),e.rows=r.split(t,5)},r.compare=function(e,t){return e.getFullYear()-t.getFullYear()},r.handleKeyDown=function(e){var t=r.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=5:"right"===e?t+=1:"down"===e?t+=5:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*r.step.years:"home"===e?t=a(r.activeDate.getFullYear()):"end"===e&&(t=a(r.activeDate.getFullYear())+l-1),r.activeDate.setFullYear(t)},r.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,n,r,a,l,f){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(d,h,p,y){function w(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))}var x,_=angular.isDefined(p.closeOnDateSelection)?d.$parent.$eval(p.closeOnDateSelection):f.closeOnDateSelection,S=angular.isDefined(p.datepickerAppendToBody)?d.$parent.$eval(p.datepickerAppendToBody):f.appendToBody;d.showButtonBar=angular.isDefined(p.showButtonBar)?d.$parent.$eval(p.showButtonBar):f.showButtonBar,d.getText=function(e){return d[e+"Text"]||f[e+"Text"]};var k=!1;if(f.html5Types[p.type]?(x=f.html5Types[p.type],k=!0):(x=p.datepickerPopup||f.datepickerPopup,p.$observe("datepickerPopup",(function(e){var t=e||f.datepickerPopup;if(t!==x&&(x=t,y.$modelValue=null,!x))throw new Error("datepickerPopup must have a date format specified.")}))),!x)throw new Error("datepickerPopup must have a date format specified.");if(k&&p.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var C=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");C.attr({"ng-model":"date","ng-change":"dateSelection()"});var E=angular.element(C.children()[0]);if(k&&"month"==p.type&&(E.attr("datepicker-mode",'"month"'),E.attr("min-mode","month")),p.datepickerOptions){var O=d.$parent.$eval(p.datepickerOptions);O.initDate&&(d.initDate=O.initDate,E.attr("init-date","initDate"),delete O.initDate),angular.forEach(O,(function(e,t){E.attr(w(t),e)}))}d.watchData={},angular.forEach(["minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],(function(e){if(p[e]){var n=t(p[e]);if(d.$parent.$watch(n,(function(t){d.watchData[e]=t})),E.attr(w(e),"watchData."+e),"datepickerMode"===e){var r=n.assign;d.$watch("watchData."+e,(function(e,t){e!==t&&r(d.$parent,e)}))}}})),p.dateDisabled&&E.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),p.showWeeks&&E.attr("show-weeks",p.showWeeks),p.customClass&&E.attr("custom-class","customClass({ date: date, mode: mode })"),k?y.$formatters.push((function(e){return d.date=e,e})):(y.$$parserName="date",y.$validators.date=function(e,t){var n=e||t;if(angular.isNumber(n)&&(n=new Date(n)),n){if(angular.isDate(n)&&!isNaN(n))return!0;if(angular.isString(n)){var r=l.parse(n,x)||new Date(n);return!isNaN(r)}return!1}return!0},y.$parsers.unshift((function(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=l.parse(e,x,d.date)||new Date(e);return isNaN(t)?void 0:t}})),y.$formatters.push((function(e){return d.date=e,y.$isEmpty(e)?e:a(e,x)}))),d.dateSelection=function(e){angular.isDefined(e)&&(d.date=e);var t=d.date?a(d.date,x):"";h.val(t),y.$setViewValue(t),_&&(d.isOpen=!1,h[0].focus())},y.$viewChangeListeners.push((function(){d.date=l.parse(y.$viewValue,x,d.date)||new Date(y.$viewValue)}));var j=function(e){d.isOpen&&e.target!==h[0]&&d.$apply((function(){d.isOpen=!1}))},T=function(e){d.keydown(e)};h.bind("keydown",T),d.keydown=function(e){27===e.which?(e.preventDefault(),d.isOpen&&e.stopPropagation(),d.close()):40!==e.which||d.isOpen||(d.isOpen=!0)},d.$watch("isOpen",(function(e){e?(d.$broadcast("datepicker.focus"),d.position=S?r.offset(h):r.position(h),d.position.top=d.position.top+h.prop("offsetHeight"),n.bind("click",j)):n.unbind("click",j)})),d.select=function(e){if("today"===e){var t=new Date;angular.isDate(d.date)?(e=new Date(d.date)).setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):e=new Date(t.setHours(0,0,0,0))}d.dateSelection(e)},d.close=function(){d.isOpen=!1,h[0].focus()};var A=e(C)(d);C.remove(),S?n.find("body").append(A):h.after(A),d.$on("$destroy",(function(){A.remove(),h.unbind("keydown",T),n.unbind("click",j)}))}}}]).directive("datepickerPopupWrap",(function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",(function(e){e.preventDefault(),e.stopPropagation()}))}}})),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function(e,t){var n=null;this.open=function(t){n||(e.bind("click",r),e.bind("keydown",a)),n&&n!==t&&(n.isOpen=!1),n=t},this.close=function(t){n===t&&(n=null,e.unbind("click",r),e.unbind("keydown",a))};var r=function(e){if(n&&(!e||"disabled"!==n.getAutoClose())){var r=n.getToggleElement();if(!(e&&r&&r[0].contains(e.target))){var a=n.getElement();e&&"outsideClick"===n.getAutoClose()&&a&&a[0].contains(e.target)||(n.isOpen=!1,t.$$phase||n.$apply())}}},a=function(e){27===e.which&&(n.focusToggleElement(),r())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document",function(e,t,n,r,a,l,f,d){var h,p=this,y=e.$new(),w=r.openClass,x=angular.noop,_=t.onToggle?n(t.onToggle):angular.noop,S=!1;this.init=function(r){p.$element=r,t.isOpen&&(h=n(t.isOpen),x=h.assign,e.$watch(h,(function(e){y.isOpen=!!e}))),(S=angular.isDefined(t.dropdownAppendToBody))&&p.dropdownMenu&&(d.find("body").append(p.dropdownMenu),r.on("$destroy",(function(){p.dropdownMenu.remove()})))},this.toggle=function(e){return y.isOpen=arguments.length?!!e:!y.isOpen},this.isOpen=function(){return y.isOpen},y.getToggleElement=function(){return p.toggleElement},y.getAutoClose=function(){return t.autoClose||"always"},y.getElement=function(){return p.$element},y.focusToggleElement=function(){p.toggleElement&&p.toggleElement[0].focus()},y.$watch("isOpen",(function(t,n){if(S&&p.dropdownMenu){var r=f.positionElements(p.$element,p.dropdownMenu,"bottom-left",!0);p.dropdownMenu.css({top:r.top+"px",left:r.left+"px",display:t?"block":"none"})}l[t?"addClass":"removeClass"](p.$element,w),t?(y.focusToggleElement(),a.open(y)):a.close(y),x(e,t),angular.isDefined(t)&&t!==n&&_(e,{open:!!t})})),e.$on("$locationChangeSuccess",(function(){y.isOpen=!1})),e.$on("$destroy",(function(){y.$destroy()}))}]).directive("dropdown",(function(){return{controller:"DropdownController",link:function(e,t,n,r){r.init(t)}}})).directive("dropdownMenu",(function(){return{restrict:"AC",require:"?^dropdown",link:function(e,t,n,r){r&&(r.dropdownMenu=t)}}})).directive("dropdownToggle",(function(){return{require:"?^dropdown",link:function(e,t,n,r){if(r){r.toggleElement=t;var a=function(a){a.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply((function(){r.toggle()}))};t.bind("click",a),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(r.isOpen,(function(e){t.attr("aria-expanded",!!e)})),e.$on("$destroy",(function(){t.unbind("click",a)}))}}}})),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",(function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,r=0;r<e.length;r++)if(t==e[r].key){n=r;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}})).directive("modalBackdrop",["$timeout",function(e){function t(t){t.animate=!1,e((function(){t.animate=!0}))}return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(e,n){return e.addClass(n.backdropClass),t}}}]).directive("modalWindow",["$modalStack","$q",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(n,r,a){r.addClass(a.windowClass||""),n.size=a.size,n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},n.$isRendered=!0;var l=t.defer();a.$observe("modalRender",(function(e){"true"==e&&l.resolve()})),l.promise.then((function(){n.animate=!0;var t=r[0].querySelectorAll("[autofocus]");t.length?t[0].focus():r[0].focus();var a=e.getTop();a&&e.modalRendered(a.key)}))}}}]).directive("modalAnimationClass",[function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.modalAnimationClass)}}}]).directive("modalTransclude",(function(){return{link:function(e,t,n,r,a){a(e.$parent,(function(e){t.empty(),t.append(e)}))}}})).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,r,a,l){function f(){for(var e=-1,t=_.keys(),n=0;n<t.length;n++)_.get(t[n]).value.backdrop&&(e=n);return e}function d(e){var t=n.find("body").eq(0),r=_.get(e).value;_.remove(e),h(r.modalDomEl,r.modalScope,(function(){t.toggleClass(x,_.length()>0),function(){if(y&&-1==f()){h(y,w,(function(){null})),y=void 0,w=void 0}}()}))}function h(n,r,l){function f(){f.done||(f.done=!0,n.remove(),r.$destroy(),l&&l())}r.animate=!1,n.attr("modal-animation")&&e.enabled()?n.one("$animate:close",(function(){a.$evalAsync(f)})):t(f)}function p(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}var y,w,x="modal-open",_=l.createNew(),S={};return a.$watch(f,(function(e){w&&(w.index=e)})),n.bind("keydown",(function(e){var t;27===e.which&&((t=_.top())&&t.value.keyboard&&(e.preventDefault(),a.$apply((function(){S.dismiss(t.key,"escape key press")}))))})),S.open=function(e,t){var l=n[0].activeElement;_.add(e,{deferred:t.deferred,renderDeferred:t.renderDeferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var d=n.find("body").eq(0),h=f();if(h>=0&&!y){(w=a.$new(!0)).index=h;var p=angular.element('<div modal-backdrop="modal-backdrop"></div>');p.attr("backdrop-class",t.backdropClass),t.animation&&p.attr("modal-animation","true"),y=r(p)(w),d.append(y)}var S=angular.element('<div modal-window="modal-window"></div>');S.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:_.length()-1,animate:"animate"}).html(t.content),t.animation&&S.attr("modal-animation","true");var k=r(S)(t.scope);_.top().value.modalDomEl=k,_.top().value.modalOpener=l,d.append(k),d.addClass(x)},S.close=function(e,t){var n=_.get(e);return n&&p(n,t,!0)?(n.value.deferred.resolve(t),d(e),n.value.modalOpener.focus(),!0):!n},S.dismiss=function(e,t){var n=_.get(e);return n&&p(n,t,!1)?(n.value.deferred.reject(t),d(e),n.value.modalOpener.focus(),!0):!n},S.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},S.getTop=function(){return _.top()},S.modalRendered=function(e){var t=_.get(e);t&&t.value.renderDeferred.resolve()},S}]).provider("$modal",(function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function(t,n,r,a,l,f){function d(e){return e.template?r.when(e.template):a(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}function h(e){var n=[];return angular.forEach(e,(function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(r.when(t.invoke(e)))})),n}var p={open:function(t){var a=r.defer(),p=r.defer(),y=r.defer(),w={result:a.promise,opened:p.promise,rendered:y.promise,close:function(e){return f.close(w,e)},dismiss:function(e){return f.dismiss(w,e)}};if((t=angular.extend({},e.options,t)).resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var x=r.all([d(t)].concat(h(t.resolve)));return x.then((function(e){var r=(t.scope||n).$new();r.$close=w.close,r.$dismiss=w.dismiss;var d,h={},p=1;t.controller&&(h.$scope=r,h.$modalInstance=w,angular.forEach(t.resolve,(function(t,n){h[n]=e[p++]})),d=l(t.controller,h),t.controllerAs&&(r[t.controllerAs]=d)),f.open(w,{scope:r,deferred:a,renderDeferred:y,content:e[0],animation:t.animation,backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})}),(function(e){a.reject(e)})),x.then((function(){p.resolve(!0)}),(function(e){p.reject(e)})),w}};return p}]};return e})),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,n){var r=this,a={$setViewValue:angular.noop},l=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(f,d){a=f,this.config=d,a.$render=function(){r.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),(function(t){r.itemsPerPage=parseInt(t,10),e.totalPages=r.calculateTotalPages()})):this.itemsPerPage=d.itemsPerPage,e.$watch("totalItems",(function(){e.totalPages=r.calculateTotalPages()})),e.$watch("totalPages",(function(t){l(e.$parent,t),e.page>t?e.selectPage(t):a.$render()}))},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(a.$viewValue,10)||1},e.selectPage=function(t,n){e.page!==t&&t>0&&t<=e.totalPages&&(n&&n.target&&n.target.blur(),a.$setViewValue(t),a.$render())},e.getText=function(t){return e[t+"Text"]||r.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages}}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,r,a,l){function f(e,t,n){return{number:e,text:t,active:n}}var d=l[0],h=l[1];if(h){var p=angular.isDefined(a.maxSize)?n.$parent.$eval(a.maxSize):t.maxSize,y=angular.isDefined(a.rotate)?n.$parent.$eval(a.rotate):t.rotate;n.boundaryLinks=angular.isDefined(a.boundaryLinks)?n.$parent.$eval(a.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(a.directionLinks)?n.$parent.$eval(a.directionLinks):t.directionLinks,d.init(h,t),a.maxSize&&n.$parent.$watch(e(a.maxSize),(function(e){p=parseInt(e,10),d.render()}));var w=d.render;d.render=function(){w(),n.page>0&&n.page<=n.totalPages&&(n.pages=function(e,t){var n=[],r=1,a=t,l=angular.isDefined(p)&&t>p;l&&(y?(a=(r=Math.max(e-Math.floor(p/2),1))+p-1)>t&&(r=(a=t)-p+1):(r=(Math.ceil(e/p)-1)*p+1,a=Math.min(r+p-1,t)));for(var d=r;a>=d;d++){var h=f(d,d,d===e);n.push(h)}if(l&&!y){if(r>1){var w=f(r-1,"...",!1);n.unshift(w)}if(t>a){var x=f(a+1,"...",!1);n.push(x)}}return n}(n.page,n.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,r,a){var l=a[0],f=a[1];f&&(t.align=angular.isDefined(r.align)?t.$parent.$eval(r.align):e.align,l.init(f,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",(function(){var e={placement:"top",animation:!0,popupDelay:0,useContentExp:!1},t={mouseenter:"mouseleave",click:"click",focus:"blur"},n={};this.options=function(e){angular.extend(n,e)},this.setTriggers=function(e){angular.extend(t,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(r,a,l,f,d,h){return function(r,p,y,w){function x(e){var n=e||w.trigger||y;return{show:n,hide:t[n]||n}}w=angular.extend({},e,n,w);var _=function(e){return e.replace(/[A-Z]/g,(function(e,t){return(t?"-":"")+e.toLowerCase()}))}(r),S=h.startSymbol(),k=h.endSymbol(),C="<div "+_+'-popup title="'+S+"title"+k+'" '+(w.useContentExp?'content-exp="contentExp()" ':'content="'+S+"content"+k+'" ')+'placement="'+S+"placement"+k+'" popup-class="'+S+"popupClass"+k+'" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';return{restrict:"EA",compile:function(){var e=a(C);return function(t,n,a){function h(){R.isOpen?_():y()}function y(){(!D||t.$eval(a[p+"Enable"]))&&(R.popupClass=a[p+"Class"],function(){var e=a[p+"Placement"];R.placement=angular.isDefined(e)?e:w.placement}(),function(){var e=a[p+"PopupDelay"],t=parseInt(e,10);R.popupDelay=isNaN(t)?w.popupDelay:t}(),R.popupDelay?T||(T=l(S,R.popupDelay,!1)).then((function(e){e()})):S()())}function _(){t.$apply((function(){k()}))}function S(){return T=null,j&&(l.cancel(j),j=null),(w.useContentExp?R.contentExp():R.content)?(E&&C(),O=R.$new(),E=e(O,(function(e){A?f.find("body").append(e):n.after(e)})),O.$watch((function(){l(I,0,!1)})),w.useContentExp&&O.$watch("contentExp()",(function(e){!e&&R.isOpen&&k()})),E.css({top:0,left:0,display:"block"}),R.$digest(),I(),R.isOpen=!0,R.$apply(),I):angular.noop}function k(){R.isOpen=!1,l.cancel(T),T=null,R.animation?j||(j=l(C,500)):C()}function C(){j=null,E&&(E.remove(),E=null),O&&(O.$destroy(),O=null)}var E,O,j,T,A=!!angular.isDefined(w.appendToBody)&&w.appendToBody,P=x(void 0),D=angular.isDefined(a[p+"Enable"]),R=t.$new(!0),I=function(){if(E){var e=d.positionElements(n,E,R.placement,A);e.top+="px",e.left+="px",E.css(e)}};R.origScope=t,R.isOpen=!1,R.contentExp=function(){return t.$eval(a[r])},w.useContentExp||a.$observe(r,(function(e){R.content=e,!e&&R.isOpen&&k()})),a.$observe("disabled",(function(e){e&&R.isOpen&&k()})),a.$observe(p+"Title",(function(e){R.title=e}));var M=function(){n.unbind(P.show,y),n.unbind(P.hide,_)};!function(){var e=a[p+"Trigger"];M(),(P=x(e)).show===P.hide?n.bind(P.show,h):(n.bind(P.show,y),n.bind(P.hide,_))}();var L=t.$eval(a[p+"Animation"]);R.animation=angular.isDefined(L)?!!L:w.animation;var N=t.$eval(a[p+"AppendToBody"]);(A=angular.isDefined(N)?N:A)&&t.$on("$locationChangeSuccess",(function(){R.isOpen&&k()})),t.$on("$destroy",(function(){l.cancel(j),l.cancel(T),M(),C(),R=null}))}}}}}]})).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(e,t,n,r){return{link:function(a,l,f){var d,h,p,y=a.$eval(f.tooltipTemplateTranscludeScope),w=0,x=function(){h&&(h.remove(),h=null),d&&(d.$destroy(),d=null),p&&(e.leave(p).then((function(){h=null})),h=p,p=null)};a.$watch(t.parseAsResourceUrl(f.tooltipTemplateTransclude),(function(t){var f=++w;t?(r(t,!0).then((function(r){if(f===w){var a=y.$new(),h=n(r)(a,(function(t){x(),e.enter(t,l)}));p=h,(d=a).$emit("$includeContentLoaded",t)}}),(function(){f===w&&(x(),a.$emit("$includeContentError",t))})),a.$emit("$includeContentRequested",t)):x()})),a.$on("$destroy",x)}}}]).directive("tooltipClasses",(function(){return{restrict:"A",link:function(e,t,n){e.placement&&t.addClass(e.placement),e.popupClass&&t.addClass(e.popupClass),e.animation()&&t.addClass(n.tooltipAnimationClass)}}})).directive("tooltipPopup",(function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}})).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",(function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html"}})).directive("tooltipTemplate",["$tooltip",function(e){return e("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",(function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html"}})).directive("tooltipHtml",["$tooltip",function(e){return e("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlUnsafePopup",(function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}})).value("tooltipHtmlUnsafeSuppressDeprecated",!1).directive("tooltipHtmlUnsafe",["$tooltip","tooltipHtmlUnsafeSuppressDeprecated","$log",function(e,t,n){return t||n.warn("tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead."),e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverTemplatePopup",(function(){return{restrict:"EA",replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html"}})).directive("popoverTemplate",["$tooltip",function(e){return e("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverPopup",(function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}})).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,n){var r=this,a=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(e.max)?e.max:n.max,this.addBar=function(t,n){a||n.css({transition:"none"}),this.bars.push(t),t.$watch("value",(function(n){t.percent=+(100*n/e.max).toFixed(2)})),t.$on("$destroy",(function(){n=null,r.removeBar(t)}))},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",(function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}})).directive("bar",(function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,r){r.addBar(e,t)}}})).directive("progressbar",(function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,r){r.addBar(e,angular.element(t.children()[0]))}}})),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,n){var r={$setViewValue:angular.noop};this.init=function(a){(r=a).$render=this.render,r.$formatters.push((function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e})),this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var l=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(l)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(r.$setViewValue(t),r.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=r.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=r.$viewValue}}]).directive("rating",(function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,r){var a=r[0],l=r[1];a.init(l)}}})),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t,n=this,r=n.tabs=e.tabs=[];n.select=function(e){angular.forEach(r,(function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())})),e.active=!0,e.onSelect()},n.addTab=function(e){r.push(e),1===r.length&&!1!==e.active?e.active=!0:e.active?n.select(e):e.active=!1},n.removeTab=function(e){var a=r.indexOf(e);if(e.active&&r.length>1&&!t){var l=a==r.length-1?a-1:a+1;n.select(r[l])}r.splice(a,1)},e.$on("$destroy",(function(){t=!0}))}]).directive("tabset",(function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=!!angular.isDefined(n.vertical)&&e.$parent.$eval(n.vertical),e.justified=!!angular.isDefined(n.justified)&&e.$parent.$eval(n.justified)}}})).directive("tab",["$parse","$log",function(e,t){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(n,r,a){return function(n,r,l,f){n.$watch("active",(function(e){e&&f.select(n)})),n.disabled=!1,l.disable&&n.$parent.$watch(e(l.disable),(function(e){n.disabled=!!e})),l.disabled&&(t.warn('Use of "disabled" attribute has been deprecated, please use "disable"'),n.$parent.$watch(e(l.disabled),(function(e){n.disabled=!!e}))),n.select=function(){n.disabled||(n.active=!0)},f.addTab(n),n.$on("$destroy",(function(){f.removeTab(n)})),n.$transcludeFn=a}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t){e.$watch("headingElement",(function(e){e&&(t.html(""),t.append(e))}))}}}]).directive("tabContentTransclude",(function(){return{restrict:"A",require:"^tabset",link:function(e,t,n){var r=e.$eval(n.tabContentTransclude);r.$transcludeFn(r.$parent,(function(e){angular.forEach(e,(function(e){!function(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}(e)?t.append(e):r.headingElement=e}))}))}}})),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,n,r,a,l){function f(){var t=parseInt(e.hours,10);return(e.showMeridian?t>0&&13>t:t>=0&&24>t)?(e.showMeridian&&(12===t&&(t=0),e.meridian===k[1]&&(t+=12)),t):void 0}function d(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function h(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e.toString()}function p(e){y(),S.$setViewValue(new Date(_)),w(e)}function y(){S.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function w(t){var n=_.getHours(),r=_.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:h(n),"m"!==t&&(e.minutes=h(r)),e.meridian=_.getHours()<12?k[0]:k[1]}function x(e){var t=new Date(_.getTime()+6e4*e);_.setHours(t.getHours(),t.getMinutes()),p()}var _=new Date,S={$setViewValue:angular.noop},k=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):l.meridians||a.DATETIME_FORMATS.AMPMS;this.init=function(n,r){(S=n).$render=this.render,S.$formatters.unshift((function(e){return e?new Date(e):null}));var a=r.eq(0),f=r.eq(1);(angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):l.mousewheel)&&this.setupMousewheelEvents(a,f),(angular.isDefined(t.arrowkeys)?e.$parent.$eval(t.arrowkeys):l.arrowkeys)&&this.setupArrowkeyEvents(a,f),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):l.readonlyInput,this.setupInputEvents(a,f)};var C=l.hourStep;t.hourStep&&e.$parent.$watch(n(t.hourStep),(function(e){C=parseInt(e,10)}));var E=l.minuteStep;t.minuteStep&&e.$parent.$watch(n(t.minuteStep),(function(e){E=parseInt(e,10)})),e.showMeridian=l.showMeridian,t.showMeridian&&e.$parent.$watch(n(t.showMeridian),(function(t){if(e.showMeridian=!!t,S.$error.time){var n=f(),r=d();angular.isDefined(n)&&angular.isDefined(r)&&(_.setHours(n),p())}else w()})),this.setupMousewheelEvents=function(t,n){var r=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",(function(t){e.$apply(r(t)?e.incrementHours():e.decrementHours()),t.preventDefault()})),n.bind("mousewheel wheel",(function(t){e.$apply(r(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()}))},this.setupArrowkeyEvents=function(t,n){t.bind("keydown",(function(t){38===t.which?(t.preventDefault(),e.incrementHours(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementHours(),e.$apply())})),n.bind("keydown",(function(t){38===t.which?(t.preventDefault(),e.incrementMinutes(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementMinutes(),e.$apply())}))},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var r=function(t,n){S.$setViewValue(null),S.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=f();angular.isDefined(e)?(_.setHours(e),p("h")):r(!0)},t.bind("blur",(function(){!e.invalidHours&&e.hours<10&&e.$apply((function(){e.hours=h(e.hours)}))})),e.updateMinutes=function(){var e=d();angular.isDefined(e)?(_.setMinutes(e),p("m")):r(void 0,!0)},n.bind("blur",(function(){!e.invalidMinutes&&e.minutes<10&&e.$apply((function(){e.minutes=h(e.minutes)}))}))},this.render=function(){var e=S.$viewValue;isNaN(e)?(S.$setValidity("time",!1),r.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(_=e),y(),w())},e.incrementHours=function(){x(60*C)},e.decrementHours=function(){x(60*-C)},e.incrementMinutes=function(){x(E)},e.decrementMinutes=function(){x(-E)},e.toggleMeridian=function(){x(720*(_.getHours()<12?1:-1))}}]).directive("timepicker",(function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,r){var a=r[0],l=r[1];l&&a.init(l,t.find("input"))}}})),angular.module("ui.bootstrap.transition",[]).value("$transitionSuppressDeprecated",!1).factory("$transition",["$q","$timeout","$rootScope","$log","$transitionSuppressDeprecated",function(e,t,n,r,a){function l(e){for(var t in e)if(void 0!==d.style[t])return e[t]}a||r.warn("$transition is now deprecated. Use $animate from ngAnimate instead.");var f=function(r,a,l){l=l||{};var d=e.defer(),h=f[l.animation?"animationEndEventName":"transitionEndEventName"],p=function(){n.$apply((function(){r.unbind(h,p),d.resolve(r)}))};return h&&r.bind(h,p),t((function(){angular.isString(a)?r.addClass(a):angular.isFunction(a)?a(r):angular.isObject(a)&&r.css(a),h||d.resolve(r)})),d.promise.cancel=function(){h&&r.unbind(h,p),d.reject("Transition cancelled")},d.promise},d=document.createElement("trans");return f.transitionEndEventName=l({WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}),f.animationEndEventName=l({WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"}),f}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var r=n.match(t);if(!r)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:r[3],source:e(r[4]),viewMapper:e(r[2]||r[1]),modelMapper:e(r[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,r,a,l,f){var d=[9,13,27,38,40];return{require:"ngModel",link:function(h,p,y,w){var x,_=h.$eval(y.typeaheadMinLength)||1,S=h.$eval(y.typeaheadWaitMs)||0,k=!1!==h.$eval(y.typeaheadEditable),C=t(y.typeaheadLoading).assign||angular.noop,E=t(y.typeaheadOnSelect),O=y.typeaheadInputFormatter?t(y.typeaheadInputFormatter):void 0,j=!!y.typeaheadAppendToBody&&h.$eval(y.typeaheadAppendToBody),T=!1!==h.$eval(y.typeaheadFocusFirst),A=t(y.ngModel).assign,P=f.parse(y.typeahead),D=h.$new();h.$on("$destroy",(function(){D.$destroy()}));var R="typeahead-"+D.$id+"-"+Math.floor(1e4*Math.random());p.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":R});var I=angular.element("<div typeahead-popup></div>");I.attr({id:R,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(y.typeaheadTemplateUrl)&&I.attr("template-url",y.typeaheadTemplateUrl);var M=function(){D.matches=[],D.activeIdx=-1,p.attr("aria-expanded",!1)},L=function(e){return R+"-option-"+e};D.$watch("activeIdx",(function(e){0>e?p.removeAttr("aria-activedescendant"):p.attr("aria-activedescendant",L(e))}));var N=function(e){var t={$viewValue:e};C(h,!0),n.when(P.source(h,t)).then((function(n){var r=e===w.$viewValue;if(r&&x)if(n&&n.length>0){D.activeIdx=T?0:-1,D.matches.length=0;for(var a=0;a<n.length;a++)t[P.itemName]=n[a],D.matches.push({id:L(a),label:P.viewMapper(D,t),model:n[a]});D.query=e,D.position=j?l.offset(p):l.position(p),D.position.top=D.position.top+p.prop("offsetHeight"),p.attr("aria-expanded",!0)}else M();r&&C(h,!1)}),(function(){M(),C(h,!1)}))};M(),D.query=void 0;var F,q=function(){F&&r.cancel(F)};w.$parsers.unshift((function(e){return x=!0,e&&e.length>=_?S>0?(q(),function(e){F=r((function(){N(e)}),S)}(e)):N(e):(C(h,!1),q(),M()),k?e:e?void w.$setValidity("editable",!1):(w.$setValidity("editable",!0),e)})),w.$formatters.push((function(e){var t,n={};return k||w.$setValidity("editable",!0),O?(n.$model=e,O(h,n)):(n[P.itemName]=e,t=P.viewMapper(h,n),n[P.itemName]=void 0,t!==P.viewMapper(h,n)?t:e)})),D.select=function(e){var t,n,a={};a[P.itemName]=n=D.matches[e].model,t=P.modelMapper(h,a),A(h,t),w.$setValidity("editable",!0),w.$setValidity("parse",!0),E(h,{$item:n,$model:t,$label:P.viewMapper(h,a)}),M(),r((function(){p[0].focus()}),0,!1)},p.bind("keydown",(function(e){0!==D.matches.length&&-1!==d.indexOf(e.which)&&(-1!=D.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(D.activeIdx=(D.activeIdx+1)%D.matches.length,D.$digest()):38===e.which?(D.activeIdx=(D.activeIdx>0?D.activeIdx:D.matches.length)-1,D.$digest()):13===e.which||9===e.which?D.$apply((function(){D.select(D.activeIdx)})):27===e.which&&(e.stopPropagation(),M(),D.$digest()))})),p.bind("blur",(function(){x=!1}));var B=function(e){p[0]!==e.target&&(M(),D.$digest())};a.bind("click",B),h.$on("$destroy",(function(){a.unbind("click",B),j&&U.remove(),I.remove()}));var U=e(I)(D);j?a.find("body").append(U):p.after(U)}}}]).directive("typeaheadPopup",(function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}})).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(r,a,l){var f=n(l.templateUrl)(r.$parent)||"template/typeahead/typeahead-match.html";e(f).then((function(e){t(e.trim())(r,(function(e){a.replaceWith(e)}))}))}}}]).filter("typeaheadHighlight",(function(){return function(e,t){return t?(""+e).replace(new RegExp(function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(t),"gi"),"<strong>$&</strong>"):e}})),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href="javascript:void(0)" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" collapse="!isOpen">\n\t  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides | orderBy:\'index\' track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}" ng-class="dt.customClass">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n\tng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1, $event)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1, $event)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1, $event)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1, $event)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages, $event)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-window.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover-window.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen, fade: animation }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" tooltip-template-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n\t<tbody>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td class="form-group" ng-class="{\'has-error\': invalidHours}">\n\t\t\t\t<input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td>:</td>\n\t\t\t<td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n\t\t\t\t<input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n\t\t</tr>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>')},88135:function(e,t,n){var r={"./cs.json":[62199,7519],"./da.json":[48229,5806],"./de.json":[59045,6901],"./en.json":[65661,320],"./es.json":[99764,8367],"./fi.json":[27923,8671],"./fr.json":[8746,8006],"./it.json":[86078,6817],"./ja.json":[52722,1312],"./ko.json":[94457,1377],"./nl.json":[6915,2671],"./no.json":[6993,4507],"./pl.json":[3172,7846],"./pt.json":[92050,3340],"./ru.json":[10742,123],"./sv.json":[75378,9303],"./tr.json":[24050,395],"./zh-CN.json":[75138,46]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n.t(a,19)}))}a.keys=function(){return Object.keys(r)},a.id=88135,e.exports=a},4031:function(e,t,n){const r=n(29324),a=n(50180);e.exports=function(e,t){var n;let{logDropError:l=(()=>{})}=void 0===t?{}:t;return null!=(n=e.items)&&n[0]&&"webkitGetAsEntry"in e.items[0]?r(e,l):a(e)}},50180:function(e,t,n){const r=n(26361);e.exports=function(e){const t=r(e.files);return Promise.resolve(t)}},29083:function(e){e.exports=function e(t,n,r,a){let{onSuccess:l}=a;t.readEntries((a=>{const f=[...n,...a];a.length?setTimeout((()=>{e(t,f,r,{onSuccess:l})}),0):l(f)}),(e=>{r(e),l(n)}))}},72871:function(e){e.exports=function(e){return e.fullPath&&e.fullPath!==`/${e.name}`?e.fullPath:null}},29324:function(e,t,n){const r=n(26361),a=n(72871),l=n(29083);e.exports=function(e,t){const n=[],f=[],d=e=>new Promise((r=>{if(e.isFile)e.file((t=>{t.relativePath=a(e),n.push(t),r()}),(e=>{t(e),r()}));else if(e.isDirectory){const n=e.createReader();l(n,[],t,{onSuccess:e=>r(Promise.all(e.map(d)))})}}));return r(e.items).forEach((e=>{const t=e.webkitGetAsEntry();t&&f.push(d(t))})),Promise.all(f).then((()=>n))}},26361:function(e){e.exports=Array.from},77028:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},71600:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},10435:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},28845:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(72005);function a(){return a=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}},84080:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(8633),a=n(72899);function l(e,t){e.prototype=r(t.prototype),e.prototype.constructor=e,(0,a.Z)(e,t)}},45466:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(98839);function a(e,t){if(null==e)return{};var n,a,l={},f=r(e);for(a=0;a<f.length;a++)n=f[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}},72899:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7746);function a(e,t){return a=r||function(e,t){return e.__proto__=t,e},a(e,t)}},926:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},39868:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},9249:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},87371:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(53795);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,r.Z)(a.key),a)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},56666:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(53795);function a(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7896:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},93431:function(e,t,n){"use strict";function r(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}n.d(t,{Z:function(){return r}})},34434:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},59740:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(31461);function a(e,t){if(null==e)return{};var n,a,l=(0,r.Z)(e,t);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(a=0;a<f.length;a++)n=f[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}},31461:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},36073:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(39868),a=n(93431),l=n(59147),f=n(34434);function d(e,t){return(0,r.Z)(e)||(0,a.Z)(e,t)||(0,l.Z)(e,t)||(0,f.Z)()}},39745:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(86522);function a(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},53795:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(86522),a=n(39745);function l(e){var t=(0,a.Z)(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},86522:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},59147:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(926);function a(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},64100:function(e,t,n){"use strict";n.d(t,{$t:function(){return Pe},DB:function(){return de},GA:function(){return Te},Gn:function(){return ye},Mb:function(){return h},Rn:function(){return pe},WA:function(){return I},_B:function(){return M},dk:function(){return R},eC:function(){return y},gq:function(){return D},s1:function(){return Ue},sp:function(){return De},vQ:function(){return ke},xV:function(){return p},ys:function(){return Fe}});var r=n(1727),a=n(11445),l=n(77120);class f{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=(0,l.qz)(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),a=r.search(_(e,!1));return a<0?null:{from:n+a,to:this.pos,text:r.slice(a)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function d(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function h(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=d(t)+d(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let a=e.matchBefore(r);return a||e.explicit?{from:a?a.from:e.pos,options:t,validFor:n}:null}}function p(e,t){return n=>{for(let r=(0,l.qz)(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(e.indexOf(r.name)>-1)return t(n);if(r.type.isTop)break}return null}}function y(e,t){return n=>{for(let t=(0,l.qz)(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}class w{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function x(e){return e.selection.main.from}function _(e,t){var n;let{source:r}=e,a=t&&"^"!=r[0],l="$"!=r[r.length-1];return a||l?new RegExp(`${a?"^":""}(?:${r})${l?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const S=r.q6.define();const k=new WeakMap;function C(e){if(!Array.isArray(e))return e;let t=k.get(e);return t||k.set(e,t=h(e)),t}const E=r.Py.define(),O=r.Py.define();class j{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=(0,r.gm)(e,t),a=(0,r.nZ)(n);this.chars.push(n);let l=e.slice(t,t+a),f=l.toUpperCase();this.folded.push((0,r.gm)(f==l?l.toLowerCase():f,0)),t+=a}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:a,precise:l,byWord:f}=this;if(1==t.length){let a=(0,r.gm)(e,0),l=(0,r.nZ)(a),f=l==e.length?0:-100;if(a==t[0]);else{if(a!=n[0])return null;f+=-200}return[f,0,l]}let d=e.indexOf(this.pattern);if(0==d)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let h=t.length,p=0;if(d<0){for(let l=0,f=Math.min(e.length,200);l<f&&p<h;){let f=(0,r.gm)(e,l);f!=t[p]&&f!=n[p]||(a[p++]=l),l+=(0,r.nZ)(f)}if(p<h)return null}let y=0,w=0,x=!1,_=0,S=-1,k=-1,C=/[a-z]/.test(e),E=!0;for(let a=0,p=Math.min(e.length,200),O=0;a<p&&w<h;){let p=(0,r.gm)(e,a);d<0&&(y<h&&p==t[y]&&(l[y++]=a),_<h&&(p==t[_]||p==n[_]?(0==_&&(S=a),k=a+1,_++):_=0));let j,T=p<255?p>=48&&p<=57||p>=97&&p<=122?2:p>=65&&p<=90?1:0:(j=(0,r.bg)(p))!=j.toLowerCase()?1:j!=j.toUpperCase()?2:0;(!a||1==T&&C||0==O&&0!=T)&&(t[w]==p||n[w]==p&&(x=!0)?f[w++]=a:f.length&&(E=!1)),O=T,a+=(0,r.nZ)(p)}return w==h&&0==f[0]&&E?this.result((x?-200:0)-100,f,e):_==h&&0==S?[-200-e.length+(k==e.length?0:-100),0,k]:d>-1?[-700-e.length,d,d+this.pattern.length]:_==h?[-900-e.length,S,k]:w==h?this.result((x?-200:0)-100-700+(E?0:-1100),f,e):2==t.length?null:this.result((a[0]?-700:0)-200-1100,a,e)}result(e,t,n){let a=[e-n.length],l=1;for(let e of t){let t=e+(this.astral?(0,r.nZ)((0,r.gm)(n,e)):1);l>1&&a[l-1]==e?a[l-1]=t:(a[l++]=e,a[l++]=t)}return a}}const T=r.r$.define({combine(e){return(0,r.BO)(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:P,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>A(e(n),t(n)),optionClass:(e,t)=>n=>A(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})}});function A(e,t){return e?t?e+" "+t:e:t}function P(e,t,n,r,l){let f,d,h=e.textDirection==a.Nm.RTL,p=h,y=!1,w="top",x=t.left-l.left,_=l.right-t.right,S=r.right-r.left,k=r.bottom-r.top;if(p&&x<Math.min(S,_)?p=!1:!p&&_<Math.min(S,x)&&(p=!0),S<=(p?x:_))f=Math.max(l.top,Math.min(n.top,l.bottom-k))-t.top,d=Math.min(400,p?x:_);else{y=!0,d=Math.min(400,(h?t.right:l.right-t.left)-30);let e=l.bottom-t.bottom;e>=k||e>t.top?f=n.bottom-t.top:(w="bottom",f=t.bottom-n.top)}return{style:`${w}: ${f}px; max-width: ${d}px`,class:"cm-completionInfo-"+(y?h?"left-narrow":"right-narrow":p?"left":"right")}}function D(e,t="option"){return n=>{let r=n.state.field(Q,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(T).interactionDelay)return!1;let l,f=1;"page"==t&&(l=(0,a.gB)(n,r.open.tooltip))&&(f=Math.max(2,Math.floor(l.dom.offsetHeight/l.dom.querySelector("li").offsetHeight)-1));let{length:d}=r.open.options,h=r.open.selected>-1?r.open.selected+f*(e?1:-1):e?0:d-1;return h<0?h="page"==t?0:d-1:h>=d&&(h="page"==t?d-1:0),n.dispatch({effects:J.of(h)}),!0}}const R=e=>{let t=e.state.field(Q,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(T).interactionDelay)&&(!!t.open.disabled||F(e,t.open.options[t.open.selected]))},I=e=>!!e.state.field(Q,!1)&&(e.dispatch({effects:E.of(!0)}),!0),M=e=>{let t=e.state.field(Q,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:O.of(null)}),!0)};class L{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const N=a.lg.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(Q).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(Q);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Q)==t)return;let n=e.transactions.some((e=>(e.selection||e.docChanged)&&!G(e)));for(let t=0;t<this.running.length;t++){let r=this.running[t];if(n||r.updates.length+e.transactions.length>50&&Date.now()-r.time>1e3){for(let e of r.context.abortListeners)try{e()}catch(e){(0,a.OO)(this.view.state,e)}r.context.abortListeners=null,this.running.splice(t--,1)}else r.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let t of e.transactions)"input"==G(t)?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(Q);for(let e of t.active)1!=e.state||this.running.some((t=>t.active.source==e.source))||this.startQuery(e)}startQuery(e){let{state:t}=this.view,n=x(t),r=new f(t,n,e.explicitPos==n),l=new L(e,r);this.running.push(l),Promise.resolve(e.source(r)).then((e=>{l.context.aborted||(l.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:O.of(null)}),(0,a.OO)(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(T);for(let r=0;r<this.running.length;r++){let a=this.running[r];if(void 0===a.done)continue;if(this.running.splice(r--,1),a.done){let r=new Y(a.active.source,a.active.explicitPos,a.done,a.done.from,null!==(e=a.done.to)&&void 0!==e?e:x(a.updates.length?a.updates[0].startState:this.view.state));for(let e of a.updates)r=r.update(e,n);if(r.hasResult()){t.push(r);continue}}let l=this.view.state.field(Q).active.find((e=>e.source==a.active.source));if(l&&1==l.state)if(null==a.done){let e=new K(a.active.source,0);for(let t of a.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(l)}t.length&&this.view.dispatch({effects:X.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(Q,!1);if(t&&t.tooltip&&this.view.state.facet(T).closeOnBlur){let n=t.open&&(0,a.gB)(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||this.view.dispatch({effects:O.of(null)})}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:E.of(!1)})),20),this.composing=0}}});function F(e,t){const n=t.completion.apply||t.completion.label;let a=e.state.field(Q).active.find((e=>e.source==t.source));return a instanceof Y&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},function(e,t,n,a,l){let{main:f}=e.selection,d=n-f.from,h=a-f.from;return Object.assign(Object.assign({},e.changeByRange((p=>{if(p!=f&&n!=a&&e.sliceDoc(p.from+d,p.from+h)!=e.sliceDoc(n,a))return{range:p};let y={from:p.from+d,to:a==f.from?p.to:p.from+h,insert:t};return l&&l(e,y),{changes:y,range:r.jT.cursor(p.from+d+t.length)}}))),{userEvent:"input.complete"})}(e.state,n,a.from,a.to,t.completion.extend)),{annotations:S.of(t.completion)})):n(e,t.completion,a.from,a.to),!0)}function q(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class B{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:r,selected:a}=n.open,l=e.state.facet(T);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:a}=e,l=0;for(let e=1;e<n.length;){let t=n[e++],f=n[e++];t>l&&r.appendChild(document.createTextNode(a.slice(l,t)));let d=r.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(a.slice(t,f))),d.className="cm-completionMatchedText",l=f}return l<a.length&&r.appendChild(document.createTextNode(a.slice(l))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=q(r.length,a,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(t=>{for(let n,a=t.target;a&&a!=this.dom;a=a.parentNode)if("LI"==a.nodeName&&(n=/-(\d+)$/.exec(a.id))&&+n[1]<r.length)return F(e,r[+n[1]]),void t.preventDefault()})),this.dom.addEventListener("focusout",(t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(T).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:O.of(null)})})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}mount(){this.updateSel()}update(e){var t,n,r;let a=e.state.field(this.stateField),l=e.startState.field(this.stateField);this.updateTooltipClass(e.state),a!=l&&(this.updateSel(),(null===(t=a.open)||void 0===t?void 0:t.disabled)!=(null===(n=l.open)||void 0===n?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(r=a.open)||void 0===r?void 0:r.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=q(t.options.length,t.selected,this.view.state.facet(T).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let l="string"==typeof r?document.createTextNode(r):r(n);if(!l)return;"then"in l?l.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>(0,a.OO)(this.view.state,e,"completion info"))):this.addInfoPane(l)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)"LI"==n.nodeName&&n.id?r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):r--;return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),a=this.space;if(!a){let e=this.dom.ownerDocument.defaultView||window;a={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}return r.top>Math.min(a.bottom,t.bottom)-10||r.bottom<Math.max(a.top,t.top)+10?null:this.view.state.facet(T).positionInfo(this.view,t,r,n,a)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let a=null;for(let l=n.from;l<n.to;l++){let{completion:f,match:d}=e[l],{section:h}=f;if(h){let e="string"==typeof h?h:h.name;if(e!=a&&(l>n.from||0==n.from))if(a=e,"string"!=typeof h&&h.header)r.appendChild(h.header(h));else{r.appendChild(document.createElement("completion-section")).textContent=e}}const p=r.appendChild(document.createElement("li"));p.id=t+"-"+l,p.setAttribute("role","option");let y=this.optionClass(f);y&&(p.className=y);for(let e of this.optionContent){let t=e(f,this.view.state,d);t&&p.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function U(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class H{constructor(e,t,n,r,a,l){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=a,this.disabled=l}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new H(this.options,W(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,a){let l=function(e,t){let n=[],r=null,a=e=>{n.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some((t=>t.name==e))||r.push("string"==typeof t?{name:e}:t)}};for(let r of e)if(r.hasResult())if(!1===r.result.filter){let e=r.result.getMatch;for(let t of r.result.options){let l=[1e9-n.length];if(e)for(let n of e(t))l.push(n);a(new w(t,r.source,l,l[0]))}}else{let e,n=new j(t.sliceDoc(r.from,r.to));for(let t of r.result.options)(e=n.match(t.label))&&a(new w(t,r.source,e,e[0]+(t.boost||0)))}if(r){let e=Object.create(null),t=0,a=(e,t)=>{var n,r;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(r=t.rank)&&void 0!==r?r:1e9)||(e.name<t.name?-1:1)};for(let n of r.sort(a))t-=1e5,e[n.name]=t;for(let t of n){let{section:n}=t.completion;n&&(t.score+=e["string"==typeof n?n:n.name])}}let l=[],f=null,d=t.facet(T).compareCompletions;for(let e of n.sort(((e,t)=>t.score-e.score||d(e.completion,t.completion))))f&&f.label==e.completion.label?(U(e.completion)>U(f)||e.completion.info)&&(l[l.length-1]=e):l.push(e),f=e.completion;return l}(e,t);if(!l.length)return r&&e.some((e=>1==e.state))?new H(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let f=t.facet(T).selectOnOpen?0:-1;if(r&&r.selected!=f&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<l.length;t++)if(l[t].completion==e){f=t;break}}return new H(l,W(n,f),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:(d=Q,e=>new B(e,d)),above:a.aboveCursor},r?r.timestamp:Date.now(),f,!1);var d}map(e){return new H(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class z{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new z(Z,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(T),r=(n.override||t.languageDataAt("autocomplete",x(t)).map(C)).map((t=>(this.active.find((e=>e.source==t))||new K(t,this.active.some((e=>0!=e.state))?1:0)).update(e,n)));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let a=n==e.length,l=r==t.length;if(a||l)return a==l;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)?a=H.build(r,t,this.id,a,n):a&&a.disabled&&!r.some((e=>1==e.state))&&(a=null),!a&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new K(e.source,0):e)));for(let t of e.effects)t.is(J)&&(a=a&&a.setSelected(t.value,this.id));return r==this.active&&a==this.open?this:new z(r,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:V}}const V={"aria-autocomplete":"list"};function W(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const Z=[];function G(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class K{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=G(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new K(r.source,0));for(let t of e.effects)if(t.is(E))r=new K(r.source,1,t.value?x(e.state):-1);else if(t.is(O))r=new K(r.source,0);else if(t.is(X))for(let e of t.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new K(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(x(e.startState))?new K(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new K(this.source,this.state,e.mapPos(this.explicitPos))}}class Y extends K{constructor(e,t,n,r,a){super(e,2,t),this.result=n,this.from=r,this.to=a}hasResult(){return!0}handleUserEvent(e,t,n){var r;let a=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),d=x(e.state);if((this.explicitPos<0?d<=a:d<this.from)||d>l||"delete"==t&&x(e.startState)==this.from)return new K(this.source,"input"==t&&n.activateOnTyping?1:0);let h,p=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,r){if(!e)return!1;let a=t.sliceDoc(n,r);return"function"==typeof e?e(a,n,r,t):_(e,!0).test(a)}(this.result.validFor,e.state,a,l)?new Y(this.source,p,this.result,a,l):this.result.update&&(h=this.result.update(this.result,a,l,new f(e.state,d,p>=0)))?new Y(this.source,p,h,h.from,null!==(r=h.to)&&void 0!==r?r:x(e.state)):new K(this.source,1,p)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new K(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Y(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const X=r.Py.define({map(e,t){return e.map((e=>e.map(t)))}}),J=r.Py.define(),Q=r.QQ.define({create(){return z.start()},update(e,t){return e.update(t)},provide:e=>[a.hJ.from(e,(e=>e.tooltip)),a.tk.contentAttributes.from(e,(e=>e.attrs))]}),ee=a.tk.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class te{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class ne{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,r.gc.TrackDel),n=e.mapPos(this.to,1,r.gc.TrackDel);return null==t||null==n?null:new ne(this.field,t,n)}}class re{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],a=e.doc.lineAt(t),f=/^\s*/.exec(a.text)[0];for(let a of this.lines){if(n.length){let n=f,d=/^\t*/.exec(a)[0].length;for(let t=0;t<d;t++)n+=e.facet(l.c);r.push(t+n.length-d),a=n+a.slice(d)}n.push(a),t+=a.length+1}let d=this.fieldPositions.map((e=>new ne(e.field,r[e.line]+e.from,r[e.line]+e.to)));return{text:n,ranges:d}}static parse(e){let t,n=[],r=[],a=[];for(let l of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(l);){let e=t[1]?+t[1]:null,f=t[2]||t[3]||"",d=-1;for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:f&&n[t].name==f)&&(d=t);if(d<0){let t=0;for(;t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e);)t++;n.splice(t,0,{seq:e,name:f}),d=t;for(let e of a)e.field>=d&&e.field++}a.push(new te(d,r.length,t.index,t.index+f.length)),l=l.slice(0,t.index)+f+l.slice(t.index+t[0].length)}for(let e;e=/\\([{}])/.exec(l);){l=l.slice(0,e.index)+e[1]+l.slice(e.index+e[0].length);for(let t of a)t.line==r.length&&t.from>e.index&&(t.from--,t.to--)}r.push(l)}return new re(r,a)}}let oe=a.p.widget({widget:new class extends a.l9{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),ae=a.p.mark({class:"cm-snippetField"});class se{constructor(e,t){this.ranges=e,this.active=t,this.deco=a.p.set(e.map((e=>(e.from==e.to?oe:ae).range(e.from,e.to))))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new se(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const le=r.Py.define({map(e,t){return e&&e.map(t)}}),ce=r.Py.define(),ue=r.QQ.define({create(){return null},update(e,t){for(let n of t.effects){if(n.is(le))return n.value;if(n.is(ce)&&e)return new se(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>a.tk.decorations.from(e,(e=>e?e.deco:a.p.none))});function fe(e,t){return r.jT.create(e.filter((e=>e.field==t)).map((e=>r.jT.range(e.from,e.to))))}function de(e){let t=re.parse(e);return(e,n,a,l)=>{let{main:f}=e.state.selection,d=a-f.from,h=l-f.from,p=[],y=0,w=Object.assign(Object.assign({},e.state.changeByRange((w=>{if(w!=f&&a!=l&&e.state.sliceDoc(w.from+d,w.from+h)!=e.state.sliceDoc(a,l))return{range:w};let{text:x,ranges:_}=t.instantiate(e.state,w.from+d),S={from:w.from+d,to:w.from+h,insert:r.xv.of(x)},k=S.to,C=S.insert.length+d;n.extend&&(n.extend(e.state,S),C+=k-S.to);for(const e of _)p.push(new ne(e.field,e.from+y,e.to+y));return y+=C,{changes:S,range:r.jT.cursor(S.from+S.insert.length)}}))),{scrollIntoView:!0,annotations:n?S.of(n):void 0,effects:[]});if(p.length&&(w.selection=fe(p,0)),p.length>1){let t=new se(p,0);w.effects.push(le.of(t)),void 0===e.state.field(ue,!1)&&w.effects.push(r.Py.appendConfig.of([ue,ve,be,ee]))}e.dispatch(e.state.update(w))}}function he(e){return({state:t,dispatch:n})=>{let r=t.field(ue,!1);if(!r||e<0&&0==r.active)return!1;let a=r.active+e,l=e>0&&!r.ranges.some((t=>t.field==a+e));return n(t.update({selection:fe(r.ranges,a),effects:le.of(l?null:new se(r.ranges,a))})),!0}}const pe=({state:e,dispatch:t})=>!!e.field(ue,!1)&&(t(e.update({effects:le.of(null)})),!0),me=[{key:"Tab",run:he(1),shift:he(-1)},{key:"Escape",run:pe}],ge=r.r$.define({combine(e){return e.length?e[0]:me}}),ve=r.Wl.highest(a.$f.compute([ge],(e=>e.facet(ge))));function ye(e,t){return Object.assign(Object.assign({},t),{apply:de(e)})}const be=a.tk.domEventHandlers({mousedown(e,t){let n,r=t.state.field(ue,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let a=r.ranges.find((e=>e.from<=n&&e.to>=n));return!(!a||a.field==r.active)&&(t.dispatch({selection:fe(r.ranges,a.field),effects:le.of(r.ranges.some((e=>e.field>a.field))?new se(r.ranges,a.field):null)}),!0)}});const we={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[],buildInsert:(e,t,n,r)=>n+r},xe=r.Py.define({map(e,t){let n=t.mapPos(e,-1,r.gc.TrackAfter);return null==n?void 0:n}}),_e=new class extends r.uU{};_e.startSide=1,_e.endSide=-1;const Se=r.QQ.define({create(){return r.Xs.empty},update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,a=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(a,-1)&&(e=r.Xs.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(xe)&&(e=e.update({add:[_e.range(n.value,n.value+1)]}));return e}});function ke(){return[$e,Se]}const Ce="()[]{}<>";function Ee(e){for(let t=0;t<Ce.length;t+=2)if(Ce.charCodeAt(t)==e)return Ce.charAt(t+1);return(0,r.bg)(e<128?e:e+1)}function Oe(e,t){return e.languageDataAt("closeBrackets",t)[0]||we}const je="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),$e=a.tk.inputHandler.of(((e,t,n,a)=>{if((je?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let l=e.state.selection.main;if(a.length>2||2==a.length&&1==(0,r.nZ)((0,r.gm)(a,0))||t!=l.from||n!=l.to)return!1;let f=function(e,t){let n=Oe(e,e.selection.main.head),a=n.brackets||we.brackets;for(let l of a){let f=Ee((0,r.gm)(l,0));if(t==l)return f==l?Me(e,l,a.indexOf(l+l)>-1,a.indexOf(l+l+l)>-1,n):Re(e,l,f,n.before||we.before,n);if(t==f&&Ae(e,e.selection.main.from))return Ie(e,l,f)}return null}(e.state,a);return!!f&&(e.dispatch(f),!0)})),Te=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Oe(e,e.selection.main.head).brackets||we.brackets,a=null,l=e.changeByRange((t=>{if(t.empty){let a=De(e.doc,t.head);for(let l of n)if(l==a&&Pe(e.doc,t.head)==Ee((0,r.gm)(l,0)))return{changes:{from:t.head-l.length,to:t.head+l.length},range:r.jT.cursor(t.head-l.length)}}return{range:a=t}}));return a||t(e.update(l,{scrollIntoView:!0,userEvent:"delete.backward"})),!a}}];function Ae(e,t){let n=!1;return e.field(Se).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function Pe(e,t){let n=e.sliceString(t,t+2);return n.slice(0,(0,r.nZ)((0,r.gm)(n,0)))}function De(e,t){let n=e.sliceString(t-2,t);return(0,r.nZ)((0,r.gm)(n,0))==n.length?n:n.slice(1)}function Re(e,t,n,a,l){let f=l.buildInsert||we.buildInsert,d=null,h=e.changeByRange((l=>{var h;if(!l.empty)return{changes:[{insert:t,from:l.from},{insert:n,from:l.to}],effects:xe.of(l.to+t.length),range:r.jT.range(l.anchor+t.length,l.head+t.length)};let p=Pe(e.doc,l.head);if(!p||/\s/.test(p)||a.indexOf(p)>-1){const a=null!==(h=f(e,l,t,n))&&void 0!==h?h:t+n;return{changes:{insert:a,from:l.head},effects:a===t?[]:xe.of(l.head+t.length),range:r.jT.cursor(l.head+t.length)}}return{range:d=l}}));return d?null:e.update(h,{scrollIntoView:!0,userEvent:"input.type"})}function Ie(e,t,n){let a=null,l=e.changeByRange((t=>t.empty&&Pe(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:r.jT.cursor(t.head+n.length)}:a={range:t}));return a?null:e.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function Me(e,t,n,a,f){let d=f.stringPrefixes||we.stringPrefixes,h=f.buildInsert||we.buildInsert,p=null,y=e.changeByRange((f=>{var y,w,x;if(!f.empty)return{changes:[{insert:t,from:f.from},{insert:t,from:f.to}],effects:xe.of(f.to+t.length),range:r.jT.range(f.anchor+t.length,f.head+t.length)};let _,S=f.head,k=Pe(e.doc,S);if(a&&e.sliceDoc(S-2*t.length,S)==t+t&&(_=Ne(e,S-2*t.length,d))>-1&&Le(e,_))return{changes:{insert:t+t+t+t,from:S},effects:xe.of(S+t.length),range:r.jT.cursor(S+t.length)};if(n&&e.sliceDoc(S-t.length,S)==t&&(_=Ne(e,S-t.length,d))>-1&&Le(e,_)){let n=null!==(y=h(e,f,t,t))&&void 0!==y?y:t+t;return{changes:{insert:n,from:S},effects:n===t?[]:xe.of(S+t.length),range:r.jT.cursor(S+t.length)}}if(k==t){if(Le(e,S)){let n=null!==(w=h(e,f,t,t))&&void 0!==w?w:t+t;return{changes:{insert:n,from:S},effects:n===t?[]:xe.of(S+t.length),range:r.jT.cursor(S+t.length)}}if(Ae(e,S)){let n=a&&e.sliceDoc(S,S+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:S,to:S+n.length,insert:n},range:r.jT.cursor(S+n.length)}}}else if(e.charCategorizer(S)(k)!=r.D0.Word&&Ne(e,S,d)>-1&&!function(e,t,n,r){let a=(0,l.qz)(e).resolveInner(t,-1),f=r.reduce(((e,t)=>Math.max(e,t.length)),0);for(let l=0;l<5;l++){let l=e.sliceDoc(a.from,Math.min(a.to,a.from+n.length+f)),d=l.indexOf(n);if(!d||d>-1&&r.indexOf(l.slice(0,d))>-1){let t=a.firstChild;for(;t&&t.from==a.from&&t.to-t.from>n.length+d;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let h=a.to==t&&a.parent;if(!h)break;a=h}return!1}(e,S,t,d)){const n=null!==(x=h(e,f,t,t))&&void 0!==x?x:t+t;return{changes:{insert:n,from:S},effects:n===t?[]:xe.of(S+t.length),range:r.jT.cursor(S+t.length)}}return{range:p=f}}));return p?null:e.update(y,{scrollIntoView:!0,userEvent:"input.type"})}function Le(e,t){let n=(0,l.qz)(e).resolveInner(t+1);return n.parent&&n.from==t}function Ne(e,t,n){let a=e.charCategorizer(t);if(a(e.sliceDoc(t-1,t))!=r.D0.Word)return t;for(let l of n){let n=t-l.length;if(e.sliceDoc(n,t)==l&&a(e.sliceDoc(n-1,n))!=r.D0.Word)return n}return-1}function Fe(e={}){return[Q,T.of(e),N,Be,ee]}const qe=[{key:"Ctrl-Space",run:I},{key:"Escape",run:M},{key:"ArrowDown",run:D(!0)},{key:"ArrowUp",run:D(!1)},{key:"PageDown",run:D(!0,"page")},{key:"PageUp",run:D(!1,"page")},{key:"Enter",run:R}],Be=r.Wl.highest(a.$f.computeN([T],(e=>e.facet(T).defaultKeymap?[qe]:[])));function Ue(e){var t;let n=null===(t=e.field(Q,!1))||void 0===t?void 0:t.open;return n&&!n.disabled&&n.selected>=0?n.options[n.selected].completion:null}},77120:function(e,t,n){"use strict";n.d(t,{Be:function(){return A},DB:function(){return O},Dv:function(){return se},Gn:function(){return V},K0:function(){return z},Qf:function(){return Re},RU:function(){return Ce},SQ:function(){return x},SS:function(){return H},SW:function(){return fe},Um:function(){return Qe},c:function(){return B},c6:function(){return F},gY:function(){return nt},g_:function(){return _e},jZ:function(){return Se},kU:function(){return y},l:function(){return C},mi:function(){return Pe},n$:function(){return Ke},nF:function(){return Ne},nY:function(){return re},pp:function(){return p},q2:function(){return me},qj:function(){return E},qp:function(){return S},qz:function(){return k},ri:function(){return N},rs:function(){return oe},tC:function(){return te},tK:function(){return q},uj:function(){return W},vw:function(){return J},wf:function(){return be},x0:function(){return ae},y1:function(){return U},zI:function(){return we},ze:function(){return ee}});var r,a=n(21649),l=n(1727),f=n(11445),d=n(86253),h=n(37207);const p=new a.md;function y(e){return l.r$.define({combine:e?t=>t.concat(e):void 0})}const w=new a.md;class x{constructor(e,t,n=[],r=""){this.data=e,this.name=r,l.yy.prototype.hasOwnProperty("tree")||Object.defineProperty(l.yy.prototype,"tree",{get(){return k(this)}}),this.parser=t,this.extension=[L.of(this),l.yy.languageData.of(((e,t,n)=>{let r=_(e,t,n),a=r.type.prop(p);if(!a)return[];let l=e.facet(a),f=r.type.prop(w);if(f){let a=r.resolve(t-r.from,n);for(let t of f)if(t.test(a,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(l)}}return l}))].concat(n)}isActiveAt(e,t,n=-1){return _(e,t,n).type.prop(p)==this.data}findRegions(e){let t=e.facet(L);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(p)==this.data)return void n.push({from:t,to:t+e.length});let l=e.prop(a.md.mounted);if(l){if(l.tree.prop(p)==this.data){if(l.overlay)for(let e of l.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(l.overlay){let e=n.length;if(r(l.tree,l.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let l=e.children[n];l instanceof a.mp&&r(l,e.positions[n]+t)}};return r(k(e),0),n}get allowsNesting(){return!0}}function _(e,t,n){let r=e.facet(L),l=k(e).topNode;if(!r||r.allowsNesting)for(let e=l;e;e=e.enter(t,n,a.vj.ExcludeBuffers))e.type.isTop&&(l=e);return l}x.setState=l.Py.define();class S extends x{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=y(e.languageData);return new S(t,e.parser.configure({props:[p.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new S(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function k(e){let t=e.field(x.state,!1);return t?t.tree:a.mp.empty}function C(e,t,n=50){var r;let a=null===(r=e.field(x.state,!1))||void 0===r?void 0:r.context;if(!a)return null;let l=a.viewport;a.updateViewport({from:0,to:t});let f=a.isDone(t)||a.work(n,t)?a.tree:null;return a.updateViewport(l),f}function E(e,t=e.doc.length){var n;return(null===(n=e.field(x.state,!1))||void 0===n?void 0:n.context.isDone(t))||!1}function O(e,t=e.viewport.to,n=100){let r=C(e.state,t,n);return r!=k(e.state)&&e.dispatch({}),!!r}class j{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let T=null;class A{constructor(e,t,n=[],r,a,l,f,d){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=a,this.viewport=l,this.skipped=f,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new A(e,t,[],a.mp.empty,0,n,[],null)}startParse(){return this.parser.startParse(new j(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=a.mp.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(a.i9.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(a.i9.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=T;T=this;try{return e()}finally{T=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=P(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:l,viewport:f,skipped:d}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,a)=>t.push({fromA:e,toA:n,fromB:r,toB:a}))),n=a.i9.applyChanges(n,t),r=a.mp.empty,l=0,f={from:e.mapPos(f.from,-1),to:e.mapPos(f.to,1)},this.skipped.length){d=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&d.push({from:n,to:r})}}}return new A(this.parser,t,n,r,l,f,d,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=P(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends a._b{createParse(t,n,r){let l=r[0].from,f=r[r.length-1].to;return{parsedPos:l,advance(){let t=T;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=f,new a.mp(a.Jq.none,[],[],f-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return T}}function P(e,t,n){return a.i9.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class D{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new D(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=A.create(e.facet(L).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new D(n)}}x.state=l.QQ.define({create:D.init,update(e,t){for(let e of t.effects)if(e.is(x.setState))return e.value;return t.startState.facet(L)!=t.state.facet(L)?D.init(t.state):e.apply(t)}});let R=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(R=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const I="undefined"!=typeof navigator&&(null===(r=navigator.scheduling)||void 0===r?void 0:r.isInputPending)?()=>navigator.scheduling.isInputPending():null,M=f.lg.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(x.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(x.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=R(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,a=n.field(x.state);if(a.tree==a.context.tree&&a.context.isDone(r+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!I?Math.max(25,e.timeRemaining()-5):1e9),f=a.context.treeLen<r&&n.doc.length>r+1e3,d=a.context.work((()=>I&&I()||Date.now()>l),r+(f?0:1e5));this.chunkBudget-=Date.now()-t,(d||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:x.setState.of(new D(a.context))})),this.chunkBudget>0&&(!d||f)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>(0,f.OO)(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),L=l.r$.define({combine(e){return e.length?e[0]:null},enables:e=>[x.state,M,f.tk.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class N{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class F{constructor(e,t,n,r,a,l=undefined){this.name=e,this.alias=t,this.extensions=n,this.filename=r,this.loadFunc=a,this.support=l,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then((e=>this.support=e),(e=>{throw this.loading=null,e})))}static of(e){let{load:t,support:n}=e;if(!t){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(n)}return new F(e.name,(e.alias||[]).concat(e.name).map((e=>e.toLowerCase())),e.extensions||[],e.filename,t,n)}static matchFilename(e,t){for(let n of e)if(n.filename&&n.filename.test(t))return n;let n=/\.([^.]+)$/.exec(t);if(n)for(let t of e)if(t.extensions.indexOf(n[1])>-1)return t;return null}static matchLanguageName(e,t,n=!0){t=t.toLowerCase();for(let n of e)if(n.alias.some((e=>e==t)))return n;if(n)for(let n of e)for(let e of n.alias){let r=t.indexOf(e);if(r>-1&&(e.length>2||!/\w/.test(t[r-1])&&!/\w/.test(t[r+e.length])))return n}return null}}const q=l.r$.define(),B=l.r$.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function U(e){let t=e.facet(B);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function H(e,t){let n="",r=e.tabSize,a=e.facet(B)[0];if("\t"==a){for(;t>=r;)n+="\t",t-=r;a=" "}for(let e=0;e<t;e++)n+=a;return n}function z(e,t){e instanceof l.yy&&(e=new V(e));for(let n of e.state.facet(q)){let r=n(e,t);if(void 0!==r)return r}let n=k(e.state);return n?function(e,t,n){return G(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,n,t):null}class V{constructor(e,t={}){this.state=e,this.options=t,this.unit=U(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:a}=this.options;return null!=r&&r>=n.from&&r<=n.to?a&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),a=this.countColumn(n,e-r),l=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return l>-1&&(a+=l-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,t=e.length){return(0,l.IS)(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let e=a(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const W=new a.md;function Z(e){let t=e.type.prop(W);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(a.md.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>Q(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?K:null}function G(e,t,n){for(;e;e=e.parent){let r=Z(e);if(r)return r(Y.create(n,t,e))}return null}function K(){return 0}class Y extends V{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new Y(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(X(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?G(e,this.pos,this.base):0}}function X(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function J({closing:e,align:t=!0,units:n=1}){return r=>Q(r,t,n,e)}function Q(e,t,n,r,a){let l=e.textAfter,f=l.match(/^\s*/)[0].length,d=r&&l.slice(f,f+r.length)==r||a==e.pos+f,h=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let a=e.options.simulateBreak,l=e.state.doc.lineAt(n.from),f=null==a||a<=l.from?l.to:Math.min(l.to,a);for(let e=n.to;;){let a=t.childAfter(e);if(!a||a==r)return null;if(!a.type.isSkipped)return a.from<f?n:null;e=a.to}}(e):null;return h?d?e.column(h.from):e.column(h.to):e.baseIndent+(d?0:e.unit*n)}const ee=e=>e.baseIndent;function te({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}const ne=200;function re(){return l.yy.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,a=n.lineAt(r);if(r>a.from+ne)return e;let l=n.sliceString(a.from,r);if(!t.some((e=>e.test(l))))return e;let{state:f}=e,d=-1,h=[];for(let{head:e}of f.selection.ranges){let t=f.doc.lineAt(e);if(t.from==d)continue;d=t.from;let n=z(f,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],a=H(f,n);r!=a&&h.push({from:t.from,to:t.from+r.length,insert:a})}return h.length?[e,{changes:h,sequential:!0}]:e}))}const oe=l.r$.define(),ae=new a.md;function se(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}function le(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function ce(e,t,n){for(let r of e.facet(oe)){let a=r(e,t,n);if(a)return a}return function(e,t,n){let r=k(e);if(r.length<n)return null;let a=null;for(let l=r.resolveInner(n,1);l;l=l.parent){if(l.to<=n||l.from>n)continue;if(a&&l.from<t)break;let f=l.type.prop(ae);if(f&&(l.to<r.length-50||r.length==e.doc.length||!le(l))){let r=f(l,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(a=r)}}return a}(e,t,n)}function ue(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const fe=l.Py.define({map:ue}),de=l.Py.define({map:ue});function he(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const pe=l.QQ.define({create(){return f.p.none},update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(fe)&&!ve(e,n.value.from,n.value.to)?e=e.update({add:[$e.range(n.value.from,n.value.to)]}):n.is(de)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>f.tk.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,((e,t)=>{n.push(e,t)})),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let r=e[n++],a=e[n++];if("number"!=typeof r||"number"!=typeof a)throw new RangeError("Invalid JSON for fold state");t.push($e.range(r,a))}return f.p.set(t,!0)}});function me(e){return e.field(pe,!1)||l.Xs.empty}function ge(e,t,n){var r;let a=null;return null===(r=e.field(pe,!1))||void 0===r||r.between(t,n,((e,t)=>{(!a||a.from>e)&&(a={from:e,to:t})})),a}function ve(e,t,n){let r=!1;return e.between(t,t,((e,a)=>{e==t&&a==n&&(r=!0)})),r}function ye(e,t){return e.field(pe,!1)?t:t.concat(l.Py.appendConfig.of(je()))}const be=e=>{for(let t of he(e)){let n=ce(e.state,t.from,t.to);if(n)return e.dispatch({effects:ye(e.state,[fe.of(n),xe(e,n)])}),!0}return!1},we=e=>{if(!e.state.field(pe,!1))return!1;let t=[];for(let n of he(e)){let r=ge(e.state,n.from,n.to);r&&t.push(de.of(r),xe(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function xe(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,a=e.state.doc.lineAt(t.to).number;return f.tk.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${a}.`)}const _e=e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let a=e.lineBlockAt(r),l=ce(t,a.from,a.to);l&&n.push(fe.of(l)),r=(l?e.lineBlockAt(l.to):a).to+1}return n.length&&e.dispatch({effects:ye(e.state,n)}),!!n.length},Se=e=>{let t=e.state.field(pe,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(de.of({from:e,to:t}))})),e.dispatch({effects:n}),!0};function ke(e,t){for(let n=t;;){let r=ce(e.state,n.from,n.to);if(r&&r.to>t.from)return r;if(!n.from)return null;n=e.lineBlockAt(n.from-1)}}const Ce=e=>{let t=[];for(let n of he(e)){let r=ge(e.state,n.from,n.to);if(r)t.push(de.of(r),xe(e,r,!1));else{let r=ke(e,n);r&&t.push(fe.of(r),xe(e,r))}}return t.length>0&&e.dispatch({effects:ye(e.state,t)}),!!t.length},Ee={placeholderDOM:null,placeholderText:"…"},Oe=l.r$.define({combine(e){return(0,l.BO)(e,Ee)}});function je(e){let t=[pe,De];return e&&t.push(Oe.of(e)),t}const $e=f.p.replace({widget:new class extends f.l9{toDOM(e){let{state:t}=e,n=t.facet(Oe),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=ge(e.state,n.from,n.to);r&&e.dispatch({effects:de.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",t.phrase("folded code")),a.title=t.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=r,a}}}),Te={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ae extends f.SJ{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function Pe(e={}){let t=Object.assign(Object.assign({},Te),e),n=new Ae(t,!0),r=new Ae(t,!1),a=f.lg.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(L)!=e.state.facet(L)||e.startState.field(pe,!1)!=e.state.field(pe,!1)||k(e.startState)!=k(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new l.f_;for(let a of e.viewportLineBlocks){let l=ge(e.state,a.from,a.to)?r:ce(e.state,a.from,a.to)?n:null;l&&t.add(a.from,a.from,l)}return t.finish()}}),{domEventHandlers:d}=t;return[a,(0,f.v5)({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(a))||void 0===t?void 0:t.markers)||l.Xs.empty},initialSpacer(){return new Ae(t,!1)},domEventHandlers:Object.assign(Object.assign({},d),{click:(e,t,n)=>{if(d.click&&d.click(e,t,n))return!0;let r=ge(e.state,t.from,t.to);if(r)return e.dispatch({effects:de.of(r)}),!0;let a=ce(e.state,t.from,t.to);return!!a&&(e.dispatch({effects:fe.of(a)}),!0)}})}),je()]}const De=f.tk.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Re{constructor(e,t){let n;function r(e){let t=h.V.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const a="string"==typeof t.all?t.all:t.all?r(t.all):void 0,l=t.scope;this.scope=l instanceof x?e=>e.prop(p)==l.data:l?e=>e==l:void 0,this.style=(0,d.QR)(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:a}).style,this.module=n?new h.V(n):null,this.themeType=t.themeType}static define(e,t){return new Re(e,t||{})}}const Ie=l.r$.define(),Me=l.r$.define({combine(e){return e.length?[e[0]]:null}});function Le(e){let t=e.facet(Ie);return t.length?t:e.facet(Me)}function Ne(e,t){let n,r=[qe];return e instanceof Re&&(e.module&&r.push(f.tk.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?r.push(Me.of(e)):n?r.push(Ie.computeN([f.tk.darkTheme],(t=>t.facet(f.tk.darkTheme)==("dark"==n)?[e]:[]))):r.push(Ie.of(e)),r}class Fe{constructor(e){this.markCache=Object.create(null),this.tree=k(e.state),this.decorations=this.buildDeco(e,Le(e.state))}update(e){let t=k(e.state),n=Le(e.state),r=n!=Le(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return f.p.none;let n=new l.f_;for(let{from:r,to:a}of e.visibleRanges)(0,d.bW)(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=f.p.mark({class:r})))}),r,a);return n.finish()}}const qe=l.Wl.high(f.lg.fromClass(Fe,{decorations:e=>e.decorations})),Be=(d.pJ.meta,d.pJ.link,d.pJ.heading,d.pJ.emphasis,d.pJ.strong,d.pJ.strikethrough,d.pJ.keyword,d.pJ.atom,d.pJ.bool,d.pJ.url,d.pJ.contentSeparator,d.pJ.labelName,d.pJ.literal,d.pJ.inserted,d.pJ.string,d.pJ.deleted,d.pJ.regexp,d.pJ.escape,d.pJ.string,d.pJ.variableName,d.pJ.variableName,d.pJ.typeName,d.pJ.namespace,d.pJ.className,d.pJ.variableName,d.pJ.macroName,d.pJ.propertyName,d.pJ.comment,d.pJ.invalid,f.tk.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}})),Ue=1e4,He="()[]{}",ze=l.r$.define({combine(e){return(0,l.BO)(e,{afterCursor:!0,brackets:He,maxScanDistance:Ue,renderMatch:Ze})}}),Ve=f.p.mark({class:"cm-matchingBracket"}),We=f.p.mark({class:"cm-nonmatchingBracket"});function Ze(e){let t=[],n=e.matched?Ve:We;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const Ge=[l.QQ.define({create(){return f.p.none},update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(ze);for(let e of t.state.selection.ranges){if(!e.empty)continue;let a=Qe(t.state,e.head,-1,r)||e.head>0&&Qe(t.state,e.head-1,1,r)||r.afterCursor&&(Qe(t.state,e.head,1,r)||e.head<t.state.doc.length&&Qe(t.state,e.head+1,-1,r));a&&(n=n.concat(r.renderMatch(a,t.state)))}return f.p.set(n,!0)},provide:e=>f.tk.decorations.from(e)}),Be];function Ke(e={}){return[ze.of(e),Ge]}const Ye=new a.md;function Xe(e,t,n){let r=e.prop(t<0?a.md.openedBy:a.md.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function Je(e){let t=e.type.prop(Ye);return t?t(e.node):e}function Qe(e,t,n,r={}){let a=r.maxScanDistance||Ue,l=r.brackets||He,f=k(e),d=f.resolveInner(t,n);for(let r=d;r;r=r.parent){let a=Xe(r.type,n,l);if(a&&r.from<r.to){let f=Je(r);if(f&&(n>0?t>=f.from&&t<f.to:t>f.from&&t<=f.to))return et(e,t,n,r,f,a,l)}}return function(e,t,n,r,a,l,f){let d=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),h=f.indexOf(d);if(h<0||h%2==0!=n>0)return null;let p={from:n<0?t-1:t,to:n>0?t+1:t},y=e.doc.iterRange(t,n>0?e.doc.length:0),w=0;for(let e=0;!y.next().done&&e<=l;){let l=y.value;n<0&&(e+=l.length);let d=t+e*n;for(let e=n>0?0:l.length-1,t=n>0?l.length:-1;e!=t;e+=n){let t=f.indexOf(l[e]);if(!(t<0||r.resolveInner(d+e,1).type!=a))if(t%2==0==n>0)w++;else{if(1==w)return{start:p,end:{from:d+e,to:d+e+1},matched:t>>1==h>>1};w--}}n>0&&(e+=l.length)}return y.done?{start:p,matched:!1}:null}(e,t,n,f,d.type,a,l)}function et(e,t,n,r,a,l,f){let d=r.parent,h={from:a.from,to:a.to},p=0,y=null==d?void 0:d.cursor();if(y&&(n<0?y.childBefore(r.from):y.childAfter(r.to)))do{if(n<0?y.to<=r.from:y.from>=r.to){if(0==p&&l.indexOf(y.type.name)>-1&&y.from<y.to){let e=Je(y);return{start:h,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(Xe(y.type,n,f))p++;else if(Xe(y.type,-n,f)){if(0==p){let e=Je(y);return{start:h,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}p--}}}while(n<0?y.prevSibling():y.nextSibling());return{start:h,matched:!1}}function tt(e,t,n,r=0,a=0){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);let l=a;for(let a=r;a<t;a++)9==e.charCodeAt(a)?l+=n-l%n:l++;return l}class nt{constructor(e,t,n,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t,n=this.string.charAt(this.pos);if(t="string"==typeof e?n==e:n&&(e instanceof RegExp?e.test(n):e(n)),t)return++this.pos,n}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=tt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return null!==(e=this.overrideIndent)&&void 0!==e?e:tt(this.string,null,this.tabSize)}match(e,t,n){if("string"==typeof e){let r=e=>n?e.toLowerCase():e;return r(this.string.substr(this.pos,e.length))==r(e)?(!1!==t&&(this.pos+=e.length),!0):null}{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}const rt=Object.create(null),it=[a.Jq.none],ot=[],at=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])at[e]=lt(rt,t);function st(e,t){ot.indexOf(e)>-1||(ot.push(e),console.warn(t))}function lt(e,t){let n=null;for(let r of t.split(".")){let t=e[r]||d.pJ[r];t?"function"==typeof t?n?n=t(n):st(r,`Modifier ${r} used at start of tag`):n?st(r,`Tag ${r} used as modifier`):n=t:st(r,`Unknown highlighting tag ${r}`)}if(!n)return 0;let r=t.replace(/ /g,"_"),l=a.Jq.define({id:it.length,name:r,props:[(0,d.Gv)({[r]:n})]});return it.push(l),l.id}},8580:function(e,t,n){"use strict";n.d(t,{E3:function(){return fe},Ep:function(){return Q},FH:function(){return d},Jb:function(){return B},K9:function(){return ce},Lp:function(){return ve},N$:function(){return ge},Zg:function(){return y},Zp:function(){return Y},a7:function(){return se},g:function(){return ae},ko:function(){return ue},nx:function(){return me},ql:function(){return K},rJ:function(){return N},sW:function(){return P},uP:function(){return J},yC:function(){return q},zo:function(){return O}});var r=n(11445),a=n(1727),l=n(30656);const f="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class d{constructor(e,t,n=0,r=e.length,a,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=a?e=>a(f(e)):f,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,a.gm)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=(0,a.bg)(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=(0,a.nZ)(e);let r=this.normalize(t);for(let e=0,a=n;;e++){let l=r.charCodeAt(e),f=this.match(l,a);if(f)return this.value=f,this;if(e==r.length-1)break;a==n&&e<t.length&&t.charCodeAt(e)==l&&a++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let a=this.matches[r],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}"undefined"!=typeof Symbol&&(d.prototype[Symbol.iterator]=function(){return this});const h={from:-1,to:-1,match:/.*/.exec("")},p="gm"+(null==/x/.unicode?"":"u");class y{constructor(e,t,n,r=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=h,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new _(e,t,n,r,a);this.re=new RegExp(t,p+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();let l=e.lineAt(r);this.curLineStart=l.from,this.matchPos=S(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=S(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const w=new WeakMap;class x{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=w.get(e);if(!r||r.from>=n||r.to<=t){let r=new x(t,e.sliceString(t,n));return w.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:a,from:l}=r;return l>t&&(a=e.sliceString(t,l)+a,l=t),r.to<n&&(a+=e.sliceString(r.to,n)),w.set(e,new x(l,a)),new x(t,a.slice(t-l,n-l))}}class _{constructor(e,t,n,r,a){this.text=e,this.to=a,this.done=!1,this.value=h,this.matchPos=S(e,r),this.re=new RegExp(t,p+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=x.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=S(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=x.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function S(e,t){if(t>=e.length)return t;let n,r=e.lineAt(t);for(;t<r.to&&(n=r.text.charCodeAt(t-r.from))>=56320&&n<57344;)t++;return t}function k(e){let t=(0,l.Z)("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,l=r.doc.lineAt(r.selection.main.head),[,f,d,h,p]=n,y=h?+h.slice(1):0,w=d?+d:l.number;if(d&&p){let e=w/100;f&&(e=e*("-"==f?-1:1)+l.number/r.doc.lines),w=Math.round(r.doc.lines*e)}else d&&f&&(w=w*("-"==f?-1:1)+l.number);let x=r.doc.line(Math.max(1,Math.min(r.doc.lines,w)));e.dispatch({effects:C.of(!1),selection:a.jT.cursor(x.from+Math.max(0,Math.min(y,x.length))),scrollIntoView:!0}),e.focus()}return{dom:(0,l.Z)("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:C.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},(0,l.Z)("label",e.state.phrase("Go to line"),": ",t)," ",(0,l.Z)("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(y.prototype[Symbol.iterator]=_.prototype[Symbol.iterator]=function(){return this});const C=a.Py.define(),E=a.QQ.define({create(){return!0},update(e,t){for(let n of t.effects)n.is(C)&&(e=n.value);return e},provide:e=>r.mH.from(e,(e=>e?k:null))}),O=e=>{let t=(0,r.Sd)(e,k);if(!t){let n=[C.of(!0)];null==e.state.field(E,!1)&&n.push(a.Py.appendConfig.of([E,j])),e.dispatch({effects:n}),t=(0,r.Sd)(e,k)}return t&&t.dom.querySelector("input").focus(),!0},j=r.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),T={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},A=a.r$.define({combine(e){return(0,a.BO)(e,T,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function P(e){let t=[L,M];return e&&t.push(A.of(e)),t}const D=r.p.mark({class:"cm-selectionMatch"}),R=r.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function I(e,t,n,r){return!(0!=n&&e(t.sliceDoc(n-1,n))==a.D0.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==a.D0.Word)}const M=r.lg.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(A),{state:n}=e,l=n.selection;if(l.ranges.length>1)return r.p.none;let f,h=l.main,p=null;if(h.empty){if(!t.highlightWordAroundCursor)return r.p.none;let e=n.wordAt(h.head);if(!e)return r.p.none;p=n.charCategorizer(h.head),f=n.sliceDoc(e.from,e.to)}else{let e=h.to-h.from;if(e<t.minSelectionLength||e>200)return r.p.none;if(t.wholeWords){if(f=n.sliceDoc(h.from,h.to),p=n.charCategorizer(h.head),!I(p,n,h.from,h.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==a.D0.Word&&e(t.sliceDoc(r-1,r))==a.D0.Word}(p,n,h.from,h.to))return r.p.none}else if(f=n.sliceDoc(h.from,h.to).trim(),!f)return r.p.none}let y=[];for(let a of e.visibleRanges){let e=new d(n.doc,f,a.from,a.to);for(;!e.next().done;){let{from:a,to:l}=e.value;if((!p||I(p,n,a,l))&&(h.empty&&a<=h.from&&l>=h.to?y.push(R.range(a,l)):(a>=h.to||l<=h.from)&&y.push(D.range(a,l)),y.length>t.maxMatches))return r.p.none}}return r.p.set(y)}},{decorations:e=>e.decorations}),L=r.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const N=({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some((e=>e.from===e.to)))return(({state:e,dispatch:t})=>{let{selection:n}=e,r=a.jT.create(n.ranges.map((t=>e.wordAt(t.head)||a.jT.cursor(t.head))),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let l=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=l)))return!1;let f=function(e,t){let{main:n,ranges:r}=e.selection,a=e.wordAt(n.head),l=a&&a.from==n.from&&a.to==n.to;for(let n=!1,a=new d(e.doc,t,r[r.length-1].to);;){if(a.next(),!a.done){if(n&&r.some((e=>e.from==a.value.from)))continue;if(l){let t=e.wordAt(a.value.from);if(!t||t.from!=a.value.from||t.to!=a.value.to)continue}return a.value}if(n)return null;a=new d(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(e,l);return!!f&&(t(e.update({selection:e.selection.addRange(a.jT.range(f.from,f.to),!1),effects:r.tk.scrollIntoView(f.to)})),!0)},F=a.r$.define({combine(e){return(0,a.BO)(e,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new ye(e),scrollToMatch:e=>r.tk.scrollIntoView(e)})}});function q(e){return e?[F.of(e),ke]:ke}class B{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,p),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.scope=e.scope}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.scope==e.scope}create(){return this.regexp?new G(this):new z(this)}getCursor(e,t=0,n){let r=e.doc?e:a.yy.create({doc:e});return null==n&&(n=r.doc.length),this.regexp?V(this,r,t,n):H(this,r,t,n)}}class U{constructor(e){this.spec=e}}function H(e,t,n,r){const l=e.wholeWord?(f=t.doc,h=t.charCategorizer(t.selection.main.head),(e,t,n,r)=>((r>e||r+n.length<t)&&(r=Math.max(0,e-2),n=f.sliceString(r,Math.min(f.length,t+2))),!(h(W(n,e-r))==a.D0.Word&&h(Z(n,e-r))==a.D0.Word||h(Z(n,t-r))==a.D0.Word&&h(W(n,t-r))==a.D0.Word))):void 0;var f,h;return new d(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase(),((t,n,r,a)=>(!l||l(t,n,r,a))&&(!e.scope||e.scope.some((e=>t>=e.from&&t<=e.to&&n>=e.from&&n<=e.to)))))}class z extends U{constructor(e){super(e)}nextMatch(e,t,n){let r=H(this.spec,e,n,e.doc.length).nextOverlapping();return r.done&&(r=H(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),a=H(this.spec,e,n,r),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=H(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let a=H(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)r(a.value.from,a.value.to)}}function V(e,t,n,r){const l=e.wholeWord?(f=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(f(W(n.input,n.index))!=a.D0.Word||f(Z(n.input,n.index))!=a.D0.Word)&&(f(Z(n.input,n.index+n[0].length))!=a.D0.Word||f(W(n.input,n.index+n[0].length))!=a.D0.Word)):void 0;var f;return new y(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:(t,n,r)=>(!l||l(t,n,r))&&(!e.scope||e.scope.some((e=>t>=e.from&&t<=e.to&&n>=e.from&&n<=e.to)))},n,r)}function W(e,t){return e.slice((0,a.cp)(e,t,!1),t)}function Z(e,t){return e.slice(t,(0,a.cp)(e,t))}class G extends U{nextMatch(e,t,n){let r=V(this.spec,e,n,e.doc.length).next();return r.done&&(r=V(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let a=Math.max(t,n-1e4*r),l=V(this.spec,e,a,n),f=null;for(;!l.next().done;)f=l.value;if(f&&(a==t||f.from>a+10))return f;if(a==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t)))}matchAll(e,t){let n=V(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let a=V(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)r(a.value.from,a.value.to)}}const K=a.Py.define(),Y=a.Py.define(),X=a.QQ.define({create(e){return new ee(de(e).create(),null)},update(e,t){for(let n of t.effects)n.is(K)?e=new ee(n.value.create(),e.panel):n.is(Y)&&(e=new ee(e.query,n.value?fe:null));return e},provide:e=>r.mH.from(e,(e=>e.panel))});function J(e){let t=e.field(X,!1);return t?t.query.spec:de(e)}function Q(e){var t;return null!=(null===(t=e.field(X,!1))||void 0===t?void 0:t.panel)}class ee{constructor(e,t){this.query=e,this.panel=t}}const te=r.p.mark({class:"cm-searchMatch"}),ne=r.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),re=r.lg.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(X))}update(e){let t=e.state.field(X);(t!=e.startState.field(X)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return r.p.none;let{view:n}=this,l=new a.f_;for(let t=0,r=n.visibleRanges,a=r.length;t<a;t++){let{from:f,to:d}=r[t];for(;t<a-1&&d>r[t+1].from-500;)d=r[++t].to;e.highlight(n.state,f,d,((e,t)=>{let r=n.state.selection.ranges.some((n=>n.from==e&&n.to==t));l.add(e,t,r?ne:te)}))}return l.finish()}},{decorations:e=>e.decorations});function oe(e){return t=>{let n=t.state.field(X,!1);return n&&n.query.spec.valid?e(t,n):me(t)}}const ae=oe(((e,{query:t})=>{let{to:n}=e.state.selection.main,r=t.nextMatch(e.state,n,n);if(!r)return!1;let l=a.jT.single(r.from,r.to),f=e.state.facet(F);return e.dispatch({selection:l,effects:[_e(e,r),f.scrollToMatch(l.main,e)],userEvent:"select.search"}),pe(e),!0})),se=oe(((e,{query:t})=>{let{state:n}=e,{from:r}=n.selection.main,l=t.prevMatch(n,r,r);if(!l)return!1;let f=a.jT.single(l.from,l.to),d=e.state.facet(F);return e.dispatch({selection:f,effects:[_e(e,l),d.scrollToMatch(f.main,e)],userEvent:"select.search"}),pe(e),!0})),le=oe(((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!(!n||!n.length)&&(e.dispatch({selection:a.jT.create(n.map((e=>a.jT.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),ce=oe(((e,{query:t})=>{let{state:n}=e,{from:l,to:f}=n.selection.main;if(n.readOnly)return!1;let d=t.nextMatch(n,l,l);if(!d)return!1;let h,p,y=[],w=[];if(d.from==l&&d.to==f&&(p=n.toText(t.getReplacement(d)),y.push({from:d.from,to:d.to,insert:p}),d=t.nextMatch(n,d.from,d.to),w.push(r.tk.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(l).number)+"."))),d){let t=0==y.length||y[0].from>=d.to?0:d.to-d.from-p.length;h=a.jT.single(d.from-t,d.to-t),w.push(_e(e,d)),w.push(n.facet(F).scrollToMatch(h.main,e))}return e.dispatch({changes:y,selection:h,effects:w,userEvent:"input.replace"}),!0})),ue=oe(((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map((e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}}));if(!n.length)return!1;let a=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:r.tk.announce.of(a),userEvent:"input.replace.all"}),!0}));function fe(e){return e.state.facet(F).createPanel(e)}function de(e,t){var n,r,a,l;let f=e.selection.main,d=f.empty||f.to>f.from+100?"":e.sliceDoc(f.from,f.to);if(t&&!d)return t;let h=e.facet(F);return new B({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:h.literal)?d:d.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null==t?void 0:t.caseSensitive)&&void 0!==r?r:h.caseSensitive,literal:null!==(a=null==t?void 0:t.literal)&&void 0!==a?a:h.literal,wholeWord:null!==(l=null==t?void 0:t.wholeWord)&&void 0!==l?l:h.wholeWord})}function he(e){let t=(0,r.Sd)(e,fe);return t&&t.dom.querySelector("[main-field]")}function pe(e){let t=he(e);t&&t==e.root.activeElement&&t.select()}const me=e=>{let t=e.state.field(X,!1);if(t&&t.panel){let n=he(e);if(n&&n!=e.root.activeElement){let r=de(e.state,t.query.spec);r.valid&&e.dispatch({effects:K.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[Y.of(!0),t?K.of(de(e.state,t.query.spec)):a.Py.appendConfig.of(ke)]});return!0},ge=e=>{let t=e.state.field(X,!1);if(!t||!t.panel)return!1;let n=(0,r.Sd)(e,fe);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Y.of(!1)}),!0},ve=[{key:"Mod-f",run:me,scope:"editor search-panel"},{key:"F3",run:ae,shift:se,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ae,shift:se,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:ge,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:l}=n.main,f=[],h=0;for(let t=new d(e.doc,e.sliceDoc(r,l));!t.next().done;){if(f.length>1e3)return!1;t.value.from==r&&(h=f.length),f.push(a.jT.range(t.value.from,t.value.to))}return t(e.update({selection:a.jT.create(f,h),userEvent:"select.search.matches"})),!0}},{key:"Mod-d",run:N,preventDefault:!0}];class ye{constructor(e){this.view=e;let t=this.query=e.state.field(X).query.spec;function n(e,t,n){return(0,l.Z)("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=(0,l.Z)("input",{value:t.search,placeholder:be(e,"Find"),"aria-label":be(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=(0,l.Z)("input",{value:t.replace,placeholder:be(e,"Replace"),"aria-label":be(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=(0,l.Z)("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=(0,l.Z)("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=(0,l.Z)("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=(0,l.Z)("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>ae(e)),[be(e,"next")]),n("prev",(()=>se(e)),[be(e,"previous")]),n("select",(()=>le(e)),[be(e,"all")]),(0,l.Z)("label",null,[this.caseField,be(e,"match case")]),(0,l.Z)("label",null,[this.reField,be(e,"regexp")]),(0,l.Z)("label",null,[this.wordField,be(e,"by word")]),...e.state.readOnly?[]:[(0,l.Z)("br"),this.replaceField,n("replace",(()=>ce(e)),[be(e,"replace")]),n("replaceAll",(()=>ue(e)),[be(e,"replace all")])],(0,l.Z)("button",{name:"close",onclick:()=>ge(e),"aria-label":be(e,"close"),type:"button"},["×"])])}commit(){let e=new B({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:K.of(e)}))}keydown(e){(0,r.$1)(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?se:ae)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),ce(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(K)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(F).top}}function be(e,t){return e.state.phrase(t)}const we=30,xe=/[\s\.,:;?!]/;function _e(e,{from:t,to:n}){let a=e.state.doc.lineAt(t),l=e.state.doc.lineAt(n).to,f=Math.max(a.from,t-we),d=Math.min(l,n+we),h=e.state.sliceDoc(f,d);if(f!=a.from)for(let e=0;e<we;e++)if(!xe.test(h[e+1])&&xe.test(h[e])){h=h.slice(e);break}if(d!=l)for(let e=h.length-1;e>h.length-we;e--)if(!xe.test(h[e-1])&&xe.test(h[e])){h=h.slice(0,e);break}return r.tk.announce.of(`${e.state.phrase("current match")}. ${h} ${e.state.phrase("on line")} ${a.number}.`)}const Se=r.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ke=[X,a.Wl.lowest(re),Se]},1727:function(e,t,n){"use strict";n.d(t,{BO:function(){return Ne},D0:function(){return De},F6:function(){return ue},Gz:function(){return nt},IS:function(){return tt},Py:function(){return Ce},QQ:function(){return te},Wl:function(){return le},Xs:function(){return He},YW:function(){return Ee},as:function(){return L},bg:function(){return P},cp:function(){return C},f_:function(){return ze},gc:function(){return I},gm:function(){return A},jT:function(){return V},n0:function(){return M},nZ:function(){return D},q6:function(){return _e},r$:function(){return G},uU:function(){return Fe},xv:function(){return r},yy:function(){return Le}});class r{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),l.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),l.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new h(this),a=new h(e);for(let e=t,l=t;;){if(r.next(e),a.next(e),e=0,r.lineBreak!=a.lineBreak||r.done!=a.done||r.value!=a.value)return!1;if(l+=r.value.length,r.done||l>=n)return!0}}iter(e=1){return new h(this,e)}iterRange(e,t=this.length){return new p(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new y(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new a(e):l.from(a.split(e,[])):r.empty}}class a extends r{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let a=0;;a++){let l=this.text[a],f=r+l.length;if((t?n:f)>=e)return new w(r,f,n,l);r=f+1,n++}}decompose(e,t,n,r){let l=e<=0&&t>=this.length?this:new a(d(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=f(l.text,e.text.slice(),0,l.length);if(t.length<=32)n.push(new a(t,e.length+l.length));else{let e=t.length>>1;n.push(new a(t.slice(0,e)),new a(t.slice(e)))}}else n.push(l)}replace(e,t,n){if(!(n instanceof a))return super.replace(e,t,n);let r=f(this.text,f(n.text,d(this.text,0,e)),t),h=this.length+n.length-(t-e);return r.length<=32?new a(r,h):l.from(a.split(r,[]),h)}sliceString(e,t=this.length,n="\n"){let r="";for(let a=0,l=0;a<=t&&l<this.text.length;l++){let f=this.text[l],d=a+f.length;a>e&&l&&(r+=n),e<d&&t>a&&(r+=f.slice(Math.max(0,e-a),t-a)),a=d+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let l of e)n.push(l),r+=l.length+1,32==n.length&&(t.push(new a(n,r)),n=[],r=-1);return r>-1&&t.push(new a(n,r)),t}}class l extends r{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let a=0;;a++){let l=this.children[a],f=r+l.length,d=n+l.lines-1;if((t?d:f)>=e)return l.lineInner(e,t,n,r);r=f+1,n=d+1}}decompose(e,t,n,r){for(let a=0,l=0;l<=t&&a<this.children.length;a++){let f=this.children[a],d=l+f.length;if(e<=d&&t>=l){let a=r&((l<=e?1:0)|(d>=t?2:0));l>=e&&d<=t&&!a?n.push(f):f.decompose(e-l,t-l,n,a)}l=d+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,a=0;r<this.children.length;r++){let f=this.children[r],d=a+f.length;if(e>=a&&t<=d){let h=f.replace(e-a,t-a,n),p=this.lines-f.lines+h.lines;if(h.lines<p>>4&&h.lines>p>>6){let a=this.children.slice();return a[r]=h,new l(a,this.length-(t-e)+n.length)}return super.replace(a,d,h)}a=d+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){let r="";for(let a=0,l=0;a<this.children.length&&l<=t;a++){let f=this.children[a],d=l+f.length;l>e&&a&&(r+=n),e<d&&t>l&&(r+=f.sliceString(e-l,t-l,n)),l=d+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof l))return 0;let n=0,[r,a,f,d]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,a+=t){if(r==f||a==d)return n;let l=this.children[r],h=e.children[a];if(l!=h)return n+l.scanIdentical(h,t);n+=l.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new a(n,t)}let r=Math.max(32,n>>5),f=r<<1,d=r>>1,h=[],p=0,y=-1,w=[];function x(e){let t;if(e.lines>f&&e instanceof l)for(let t of e.children)x(t);else e.lines>d&&(p>d||!p)?(_(),h.push(e)):e instanceof a&&p&&(t=w[w.length-1])instanceof a&&e.lines+t.lines<=32?(p+=e.lines,y+=e.length+1,w[w.length-1]=new a(t.text.concat(e.text),t.length+1+e.length)):(p+e.lines>r&&_(),p+=e.lines,y+=e.length+1,w.push(e))}function _(){0!=p&&(h.push(1==w.length?w[0]:l.from(w,y)),y=-1,p=w.length=0)}for(let t of e)x(t);return _(),1==h.length?h[0]:new l(h,t)}}function f(e,t,n=0,r=1e9){for(let a=0,l=0,f=!0;l<e.length&&a<=r;l++){let d=e[l],h=a+d.length;h>=n&&(h>r&&(d=d.slice(0,r-a)),a<n&&(d=d.slice(n-a)),f?(t[t.length-1]+=d,f=!1):t.push(d)),a=h+1}return t}function d(e,t,n){return f(e,[""],t,n)}r.empty=new a([""],0);class h{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof a?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],l=this.offsets[n],f=l>>1,d=r instanceof a?r.text.length:r.children.length;if(f==(t>0?d:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&l)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof a){let a=r.text[f+(t<0?-1:0)];if(this.offsets[n]+=t,a.length>Math.max(0,e))return this.value=0==e?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let l=r.children[f+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof a?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class p{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new h(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class y{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(r.prototype[Symbol.iterator]=function(){return this.iter()},h.prototype[Symbol.iterator]=p.prototype[Symbol.iterator]=y.prototype[Symbol.iterator]=function(){return this});class w{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let x="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<x.length;e++)x[e]+=x[e-1];function _(e){for(let t=1;t<x.length;t+=2)if(x[t]>e)return x[t-1]<=e;return!1}function S(e){return e>=127462&&e<=127487}const k=8205;function C(e,t,n=!0,r=!0){return(n?E:O)(e,t,r)}function E(e,t,n){if(t==e.length)return t;t&&j(e.charCodeAt(t))&&T(e.charCodeAt(t-1))&&t--;let r=A(e,t);for(t+=D(r);t<e.length;){let a=A(e,t);if(r==k||a==k||n&&_(a))t+=D(a),r=a;else{if(!S(a))break;{let n=0,r=t-2;for(;r>=0&&S(A(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function O(e,t,n){for(;t>0;){let r=E(e,t-2,n);if(r<t)return r;t--}return 0}function j(e){return e>=56320&&e<57344}function T(e){return e>=55296&&e<56320}function A(e,t){let n=e.charCodeAt(t);if(!T(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return j(r)?r-56320+(n-55296<<10)+65536:n}function P(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function D(e){return e<65536?1:2}const R=/\r\n?|\n/;var I=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(I||(I={}));class M{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let a=this.sections[t++],l=this.sections[t++];l<0?(e(n,r,a),r+=a):r+=l,n+=a}}iterChangedRanges(e,t=!1){q(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new M(e)}composeDesc(e){return this.empty?e:e.empty?this:U(this,e)}mapDesc(e,t=!1){return e.empty?this:B(this,e,t)}mapPos(e,t=-1,n=I.Simple){let r=0,a=0;for(let l=0;l<this.sections.length;){let f=this.sections[l++],d=this.sections[l++],h=r+f;if(d<0){if(h>e)return a+(e-r);a+=f}else{if(n!=I.Simple&&h>=e&&(n==I.TrackDel&&r<e&&h>e||n==I.TrackBefore&&r<e||n==I.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!f)return e==r||t<0?a:a+d;a+=d}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return a}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let a=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&a>=e)return!(r<e&&a>t)||"cover";r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new M(e)}static create(e){return new M(e)}}class L extends M{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return q(this,((t,n,r,a,l)=>e=e.replace(r,r+(n-t),l)),!1),e}mapDesc(e,t=!1){return B(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let a=0,l=0;a<t.length;a+=2){let f=t[a],d=t[a+1];if(d>=0){t[a]=d,t[a+1]=f;let h=a>>1;for(;n.length<h;)n.push(r.empty);n.push(f?e.slice(l,l+f):r.empty)}l+=f}return new L(t,n)}compose(e){return this.empty?e:e.empty?this:U(this,e,!0)}map(e,t=!1){return e.empty?this:B(this,e,t,!0)}iterChanges(e,t=!1){q(this,e,t)}get desc(){return M.create(this.sections)}filter(e){let t=[],n=[],r=[],a=new H(this);e:for(let l=0,f=0;;){let d=l==e.length?1e9:e[l++];for(;f<d||f==d&&0==a.len;){if(a.done)break e;let e=Math.min(a.len,d-f);N(r,e,-1);let l=-1==a.ins?-1:0==a.off?a.ins:0;N(t,e,l),l>0&&F(n,t,a.text),a.forward(e),f+=e}let h=e[l++];for(;f<h;){if(a.done)break e;let e=Math.min(a.len,h-f);N(t,e,-1),N(r,e,-1==a.ins?-1:0==a.off?a.ins:0),a.forward(e),f+=e}}return{changes:new L(t,n),filtered:M.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let a=[],l=[],f=0,d=null;function h(e=!1){if(!e&&!a.length)return;f<t&&N(a,t-f,-1);let n=new L(a,l);d=d?d.compose(n.map(d)):n,a=[],l=[],f=0}return function e(p){if(Array.isArray(p))for(let t of p)e(t);else if(p instanceof L){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);h(),d=d?d.compose(p.map(d)):p}else{let{from:e,to:d=e,insert:y}=p;if(e>d||e<0||d>t)throw new RangeError(`Invalid change range ${e} to ${d} (in doc of length ${t})`);let w=y?"string"==typeof y?r.of(y.split(n||R)):y:r.empty,x=w.length;if(e==d&&0==x)return;e<f&&h(),e>f&&N(a,e-f,-1),N(a,d-e,x),F(l,a,w),f=d}}(e),h(!d),d}static empty(e){return new L(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let a=0;a<e.length;a++){let l=e[a];if("number"==typeof l)t.push(l,-1);else{if(!Array.isArray(l)||"number"!=typeof l[0]||l.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==l.length)t.push(l[0],0);else{for(;n.length<a;)n.push(r.empty);n[a]=r.of(l.slice(1)),t.push(l[0],n[a].length)}}}return new L(t,n)}static createSet(e,t){return new L(e,t)}}function N(e,t,n,r=!1){if(0==t&&n<=0)return;let a=e.length-2;a>=0&&n<=0&&n==e[a+1]?e[a]+=t:0==t&&0==e[a]?e[a+1]+=n:r?(e[a]+=t,e[a+1]+=n):e.push(t,n)}function F(e,t,n){if(0==n.length)return;let a=t.length-2>>1;if(a<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<a;)e.push(r.empty);e.push(n)}}function q(e,t,n){let a=e.inserted;for(let l=0,f=0,d=0;d<e.sections.length;){let h=e.sections[d++],p=e.sections[d++];if(p<0)l+=h,f+=h;else{let y=l,w=f,x=r.empty;for(;y+=h,w+=p,p&&a&&(x=x.append(a[d-2>>1])),!(n||d==e.sections.length||e.sections[d+1]<0);)h=e.sections[d++],p=e.sections[d++];t(l,y,f,w,x),l=y,f=w}}}function B(e,t,n,r=!1){let a=[],l=r?[]:null,f=new H(e),d=new H(t);for(let e=-1;;)if(-1==f.ins&&-1==d.ins){let e=Math.min(f.len,d.len);N(a,e,-1),f.forward(e),d.forward(e)}else if(d.ins>=0&&(f.ins<0||e==f.i||0==f.off&&(d.len<f.len||d.len==f.len&&!n))){let t=d.len;for(N(a,d.ins,-1);t;){let n=Math.min(f.len,t);f.ins>=0&&e<f.i&&f.len<=n&&(N(a,0,f.ins),l&&F(l,a,f.text),e=f.i),f.forward(n),t-=n}d.next()}else{if(!(f.ins>=0)){if(f.done&&d.done)return l?L.createSet(a,l):M.create(a);throw new Error("Mismatched change set lengths")}{let t=0,n=f.len;for(;n;)if(-1==d.ins){let e=Math.min(n,d.len);t+=e,n-=e,d.forward(e)}else{if(!(0==d.ins&&d.len<n))break;n-=d.len,d.next()}N(a,t,e<f.i?f.ins:0),l&&e<f.i&&F(l,a,f.text),e=f.i,f.forward(f.len-n)}}}function U(e,t,n=!1){let r=[],a=n?[]:null,l=new H(e),f=new H(t);for(let e=!1;;){if(l.done&&f.done)return a?L.createSet(r,a):M.create(r);if(0==l.ins)N(r,l.len,0,e),l.next();else if(0!=f.len||f.done){if(l.done||f.done)throw new Error("Mismatched change set lengths");{let t=Math.min(l.len2,f.len),n=r.length;if(-1==l.ins){let n=-1==f.ins?-1:f.off?0:f.ins;N(r,t,n,e),a&&n&&F(a,r,f.text)}else-1==f.ins?(N(r,l.off?0:l.len,t,e),a&&F(a,r,l.textBit(t))):(N(r,l.off?0:l.len,f.off?0:f.ins,e),a&&!f.off&&F(a,r,f.text));e=(l.ins>t||f.ins>=0&&f.len>t)&&(e||r.length>n),l.forward2(t),f.forward(t)}}else N(r,0,f.ins,e),a&&F(a,r,f.text),f.next()}}class H{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?r.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?r.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class z{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new z(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return V.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return V.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return V.range(e.anchor,e.head)}static create(e,t,n){return new z(e,t,n)}}class V{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:V.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new V([this.main],0)}addRange(e,t=!0){return V.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,V.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new V(e.ranges.map((e=>z.fromJSON(e))),e.main)}static single(e,t=e){return new V([V.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let a=e[r];if(a.empty?a.from<=n:a.from<n)return V.normalized(e.slice(),t);n=a.to}return new V(e,t)}static cursor(e,t=0,n,r){return z.create(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(e,t,n,r){let a=(null!=n?n:33554431)<<5|(null==r?3:Math.min(2,r));return t<e?z.create(t,e,24|a):z.create(e,t,(t>e?4:0)|a)}static normalized(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],a=e[n-1];if(r.empty?r.from<=a.to:r.from<a.to){let l=a.from,f=Math.max(r.to,a.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?V.range(f,l):V.range(l,f))}}return new V(e,t)}}function W(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let Z=0;class G{constructor(e,t,n,r,a){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=Z++,this.default=e([]),this.extensions="function"==typeof a?a(this):a}static define(e={}){return new G(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:K),!!e.static,e.enables)}of(e){return new Y([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Y(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Y(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function K(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class Y{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=Z++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,a=this.id,l=e[a]>>1,f=2==this.type,d=!1,h=!1,p=[];for(let n of this.dependencies)"doc"==n?d=!0:"selection"==n?h=!0:0==(1&(null!==(t=e[n.id])&&void 0!==t?t:1))&&p.push(e[n.id]);return{create(e){return e.values[l]=n(e),1},update(e,t){if(d&&t.docChanged||h&&(t.docChanged||t.selection)||J(e,p)){let t=n(e);if(f?!X(t,e.values[l],r):!r(t,e.values[l]))return e.values[l]=t,1}return 0},reconfigure:(e,t)=>{let d,h=t.config.address[a];if(null!=h){let a=pe(t,h);if(this.dependencies.every((n=>n instanceof G?t.facet(n)===e.facet(n):!(n instanceof te)||t.field(n,!1)==e.field(n,!1)))||(f?X(d=n(e),a,r):r(d=n(e),a)))return e.values[l]=a,0}else d=n(e);return e.values[l]=d,1}}}}function X(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function J(e,t){let n=!1;for(let r of t)1&he(e,r)&&(n=!0);return n}function Q(e,t,n){let r=n.map((t=>e[t.id])),a=n.map((e=>e.type)),l=r.filter((e=>!(1&e))),f=e[t.id]>>1;function d(e){let n=[];for(let t=0;t<r.length;t++){let l=pe(e,r[t]);if(2==a[t])for(let e of l)n.push(e);else n.push(l)}return t.combine(n)}return{create(e){for(let t of r)he(e,t);return e.values[f]=d(e),1},update(e,n){if(!J(e,l))return 0;let r=d(e);return t.compare(r,e.values[f])?0:(e.values[f]=r,1)},reconfigure(e,a){let l=J(e,r),h=a.config.facets[t.id],p=a.facet(t);if(h&&!l&&K(n,h))return e.values[f]=p,0;let y=d(e);return t.compare(y,p)?(e.values[f]=p,0):(e.values[f]=y,1)}}}const ee=G.define({static:!0});class te{constructor(e,t,n,r,a){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=a,this.provides=void 0}static define(e){let t=new te(Z++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(ee).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],a=this.updateF(r,n);return this.compareF(r,a)?0:(e.values[t]=a,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,ee.of({field:this,create:e})]}get extension(){return this}}const ne=4,re=3,oe=2,ae=1;function se(e){return t=>new ce(t,e)}const le={highest:se(0),high:se(ae),default:se(oe),low:se(re),lowest:se(ne)};class ce{constructor(e,t){this.inner=e,this.prec=t}}class ue{of(e){return new fe(this,e)}reconfigure(e){return ue.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class fe{constructor(e,t){this.compartment=e,this.inner=t}}class de{constructor(e,t,n,r,a,l){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=a,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],a=Object.create(null),l=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],a=new Map;function l(e,f){let d=a.get(e);if(null!=d){if(d<=f)return;let t=r[d].indexOf(e);t>-1&&r[d].splice(t,1),e instanceof fe&&n.delete(e.compartment)}if(a.set(e,f),Array.isArray(e))for(let t of e)l(t,f);else if(e instanceof fe){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),l(r,f)}else if(e instanceof ce)l(e.inner,e.prec);else if(e instanceof te)r[f].push(e),e.provides&&l(e.provides,f);else if(e instanceof Y)r[f].push(e),e.facet.extensions&&l(e.facet.extensions,oe);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(t,f)}}return l(e,oe),r.reduce(((e,t)=>e.concat(t)))}(e,t,l))n instanceof te?r.push(n):(a[n.facet.id]||(a[n.facet.id]=[])).push(n);let f=Object.create(null),d=[],h=[];for(let e of r)f[e.id]=h.length<<1,h.push((t=>e.slot(t)));let p=null==n?void 0:n.config.facets;for(let e in a){let t=a[e],r=t[0].facet,l=p&&p[e]||[];if(t.every((e=>0==e.type)))if(f[r.id]=d.length<<1|1,K(l,t))d.push(n.facet(r));else{let e=r.combine(t.map((e=>e.value)));d.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(f[e.id]=d.length<<1|1,d.push(e.value)):(f[e.id]=h.length<<1,h.push((t=>e.dynamicSlot(t))));f[r.id]=h.length<<1,h.push((e=>Q(e,r,t)))}}let y=h.map((e=>e(f)));return new de(e,l,y,f,d,a)}}function he(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let a=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|a}function pe(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const me=G.define(),ge=G.define({combine:e=>e.some((e=>e)),static:!0}),ve=G.define({combine:e=>e.length?e[0]:void 0,static:!0}),ye=G.define(),be=G.define(),we=G.define(),xe=G.define({combine:e=>!!e.length&&e[0]});class _e{constructor(e,t){this.type=e,this.value=t}static define(){return new Se}}class Se{of(e){return new _e(this,e)}}class ke{constructor(e){this.map=e}of(e){return new Ce(this,e)}}class Ce{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Ce(this.type,t)}is(e){return this.type==e}static define(e={}){return new ke(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}Ce.reconfigure=Ce.define(),Ce.appendConfig=Ce.define();class Ee{constructor(e,t,n,r,a,l){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=a,this.scrollIntoView=l,this._doc=null,this._state=null,n&&W(n,t.newLength),a.some((e=>e.type==Ee.time))||(this.annotations=a.concat(Ee.time.of(Date.now())))}static create(e,t,n,r,a,l){return new Ee(e,t,n,r,a,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ee.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function Oe(e,t){let n=[];for(let r=0,a=0;;){let l,f;if(r<e.length&&(a==t.length||t[a]>=e[r]))l=e[r++],f=e[r++];else{if(!(a<t.length))return n;l=t[a++],f=t[a++]}!n.length||n[n.length-1]<l?n.push(l,f):n[n.length-1]<f&&(n[n.length-1]=f)}}function je(e,t,n){var r;let a,l,f;return n?(a=t.changes,l=L.empty(t.changes.length),f=e.changes.compose(t.changes)):(a=t.changes.map(e.changes),l=e.changes.mapDesc(t.changes,!0),f=e.changes.compose(a)),{changes:f,selection:t.selection?t.selection.map(l):null===(r=e.selection)||void 0===r?void 0:r.map(a),effects:Ce.mapEffects(e.effects,a).concat(Ce.mapEffects(t.effects,l)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function $e(e,t,n){let r=t.selection,a=Pe(t.annotations);return t.userEvent&&(a=a.concat(Ee.userEvent.of(t.userEvent))),{changes:t.changes instanceof L?t.changes:L.of(t.changes||[],n,e.facet(ve)),selection:r&&(r instanceof V?r:V.single(r.anchor,r.head)),effects:Pe(t.effects),annotations:a,scrollIntoView:!!t.scrollIntoView}}function Te(e,t,n){let r=$e(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let a=1;a<t.length;a++){!1===t[a].filter&&(n=!1);let l=!!t[a].sequential;r=je(r,$e(e,t[a],l?r.changes.newLength:e.doc.length),l)}let a=Ee.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(we),r=e;for(let a=n.length-1;a>=0;a--){let l=n[a](e);l&&Object.keys(l).length&&(r=je(r,$e(t,l,e.changes.newLength),!0))}return r==e?e:Ee.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(ye)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:Oe(n,t))}if(!0!==n){let r,a;if(!1===n)a=e.changes.invertedDesc,r=L.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,a=t.filtered.mapDesc(t.changes).invertedDesc}e=Ee.create(t,r,e.selection&&e.selection.map(a),Ce.mapEffects(e.effects,a),e.annotations,e.scrollIntoView)}let r=t.facet(be);for(let n=r.length-1;n>=0;n--){let a=r[n](e);e=a instanceof Ee?a:Array.isArray(a)&&1==a.length&&a[0]instanceof Ee?a[0]:Te(t,Pe(a),!1)}return e}(a):a)}Ee.time=_e.define(),Ee.userEvent=_e.define(),Ee.addToHistory=_e.define(),Ee.remote=_e.define();const Ae=[];function Pe(e){return null==e?Ae:Array.isArray(e)?e:[e]}var De=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(De||(De={}));const Re=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ie;try{Ie=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function Me(e){return t=>{if(!/\S/.test(t))return De.Space;if(function(e){if(Ie)return Ie.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Re.test(n)))return!0}return!1}(t))return De.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return De.Word;return De.Other}}class Le{constructor(e,t,n,r,a,l){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=a,l&&(l._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)he(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return he(this,n),pe(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return Te(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:a}=n;for(let t of e.effects)t.is(ue.reconfigure)?(n&&(a=new Map,n.compartments.forEach(((e,t)=>a.set(t,e))),n=null),a.set(t.value.compartment,t.value.extension)):t.is(Ce.reconfigure)?(n=null,r=t.value):t.is(Ce.appendConfig)&&(n=null,r=Pe(r).concat(t.value));if(n)t=e.startState.values.slice();else{n=de.resolve(r,a,this),t=new Le(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}new Le(n,e.newDoc,e.newSelection,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:V.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),a=[n.range],l=Pe(n.effects);for(let n=1;n<t.ranges.length;n++){let f=e(t.ranges[n]),d=this.changes(f.changes),h=d.map(r);for(let e=0;e<n;e++)a[e]=a[e].map(h);let p=r.mapDesc(d,!0);a.push(f.range.map(p)),r=r.compose(h),l=Ce.mapEffects(l,h).concat(Ce.mapEffects(Pe(f.effects),p))}return{changes:r,selection:V.create(a,t.mainIndex),effects:l}}changes(e=[]){return e instanceof L?e:L.of(e,this.doc.length,this.facet(Le.lineSeparator))}toText(e){return r.of(e.split(this.facet(Le.lineSeparator)||R))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(he(this,t),pe(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof te&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n)if(Object.prototype.hasOwnProperty.call(e,t)){let a=n[t],l=e[t];r.push(a.init((e=>a.spec.fromJSON(l,e))))}return Le.create({doc:e.doc,selection:V.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=de.resolve(e.extensions||[],new Map),n=e.doc instanceof r?e.doc:r.of((e.doc||"").split(t.staticFacet(Le.lineSeparator)||R)),a=e.selection?e.selection instanceof V?e.selection:V.single(e.selection.anchor,e.selection.head):V.single(0);return W(a,n.length),t.staticFacet(ge)||(a=a.asSingle()),new Le(t,n,a,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Le.tabSize)}get lineBreak(){return this.facet(Le.lineSeparator)||"\n"}get readOnly(){return this.facet(xe)}phrase(e,...t){for(let t of this.facet(Le.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>t.length?e:t[r-1]}))),e}languageDataAt(e,t,n=-1){let r=[];for(let a of this.facet(me))for(let l of a(this,t,n))Object.prototype.hasOwnProperty.call(l,e)&&r.push(l[e]);return r}charCategorizer(e){return Me(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),a=this.charCategorizer(e),l=e-n,f=e-n;for(;l>0;){let e=C(t,l,!1);if(a(t.slice(e,l))!=De.Word)break;l=e}for(;f<r;){let e=C(t,f);if(a(t.slice(f,e))!=De.Word)break;f=e}return l==f?null:V.range(l+n,f+n)}}function Ne(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let a=t[e],l=r[e];if(void 0===l)r[e]=a;else if(l===a||void 0===a);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](l,a)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}Le.allowMultipleSelections=ge,Le.tabSize=G.define({combine:e=>e.length?e[0]:4}),Le.lineSeparator=ve,Le.readOnly=xe,Le.phrases=G.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((n=>e[n]==t[n]))}}),Le.languageData=me,Le.changeFilter=ye,Le.transactionFilter=be,Le.transactionExtender=we,ue.reconfigure=Ce.define();class Fe{eq(e){return this==e}range(e,t=e){return qe.create(e,t,this)}}Fe.prototype.startSide=Fe.prototype.endSide=0,Fe.prototype.point=!1,Fe.prototype.mapMode=I.TrackDel;class qe{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new qe(e,t,n)}}function Be(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Ue{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let a=n?this.to:this.from;for(let l=r,f=a.length;;){if(l==f)return l;let r=l+f>>1,d=a[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==l)return d>=0?l:f;d>=0?f=r:l=r+1}}between(e,t,n,r){for(let a=this.findIndex(t,-1e9,!0),l=this.findIndex(n,1e9,!1,a);a<l;a++)if(!1===r(this.from[a]+e,this.to[a]+e,this.value[a]))return!1}map(e,t){let n=[],r=[],a=[],l=-1,f=-1;for(let d=0;d<this.value.length;d++){let h,p,y=this.value[d],w=this.from[d]+e,x=this.to[d]+e;if(w==x){let e=t.mapPos(w,y.startSide,y.mapMode);if(null==e)continue;if(h=p=e,y.startSide!=y.endSide&&(p=t.mapPos(w,y.endSide),p<h))continue}else if(h=t.mapPos(w,y.startSide),p=t.mapPos(x,y.endSide),h>p||h==p&&y.startSide>0&&y.endSide<=0)continue;(p-h||y.endSide-y.startSide)<0||(l<0&&(l=h),y.point&&(f=Math.max(f,p-h)),n.push(y),r.push(h-l),a.push(p-l))}return{mapped:n.length?new Ue(r,a,n,f):null,pos:l}}}class He{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new He(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:a=this.length}=e,l=e.filter;if(0==t.length&&!l)return this;if(n&&(t=t.slice().sort(Be)),this.isEmpty)return t.length?He.of(t):this;let f=new We(this,null,-1).goto(0),d=0,h=[],p=new ze;for(;f.value||d<t.length;)if(d<t.length&&(f.from-t[d].from||f.startSide-t[d].value.startSide)>=0){let e=t[d++];p.addInner(e.from,e.to,e.value)||h.push(e)}else 1==f.rangeIndex&&f.chunkIndex<this.chunk.length&&(d==t.length||this.chunkEnd(f.chunkIndex)<t[d].from)&&(!l||r>this.chunkEnd(f.chunkIndex)||a<this.chunkPos[f.chunkIndex])&&p.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])?f.nextChunk():((!l||r>f.to||a<f.from||l(f.from,f.to,f.value))&&(p.addInner(f.from,f.to,f.value)||h.push(qe.create(f.from,f.to,f.value))),f.next());return p.finishInner(this.nextLayer.isEmpty&&!h.length?He.empty:this.nextLayer.update({add:h,filter:l,filterFrom:r,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],f=this.chunk[a],d=e.touchesRange(l,l+f.length);if(!1===d)r=Math.max(r,f.maxPoint),t.push(f),n.push(e.mapPos(l));else if(!0===d){let{mapped:a,pos:d}=f.map(l,e);a&&(r=Math.max(r,a.maxPoint),t.push(a),n.push(d))}}let a=this.nextLayer.map(e);return 0==t.length?a:new He(n,t,a||He.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let a=this.chunkPos[r],l=this.chunk[r];if(t>=a&&e<=a+l.length&&!1===l.between(a,e-a,t-a,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return Ze.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Ze.from(e).goto(t)}static compare(e,t,n,r,a=-1){let l=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=a)),f=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=a)),d=Ve(l,f,n),h=new Ke(l,d,a),p=new Ke(f,d,a);n.iterGaps(((e,t,n)=>Ye(h,e,p,t,n,r))),n.empty&&0==n.length&&Ye(h,0,p,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=999999999);let a=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),l=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(a.length!=l.length)return!1;if(!a.length)return!0;let f=Ve(a,l),d=new Ke(a,f,0).goto(n),h=new Ke(l,f,0).goto(n);for(;;){if(d.to!=h.to||!Xe(d.active,h.active)||d.point&&(!h.point||!d.point.eq(h.point)))return!1;if(d.to>r)return!0;d.next(),h.next()}}static spans(e,t,n,r,a=-1){let l=new Ke(e,null,a).goto(t),f=t,d=l.openStart;for(;;){let e=Math.min(l.to,n);if(l.point){let n=l.activeForPoint(l.to),a=l.pointFrom<t?n.length+1:Math.min(n.length,d);r.point(f,e,l.point,n,a,l.pointRank),d=Math.min(l.openEnd(e),n.length)}else e>f&&(r.span(f,e,l.active,d),d=l.openEnd(e));if(l.to>n)return d+(l.point&&l.to>n?1:0);f=l.to,l.next()}}static of(e,t=!1){let n=new ze;for(let r of e instanceof qe?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(Be(t,r)>0)return e.slice().sort(Be);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}}He.empty=new He([],[],null,-1),He.empty.nextLayer=He.empty;class ze{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Ue(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new ze)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(He.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=He.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Ve(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let a=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let l=r.get(e.chunk[t]);null==l||(n?n.mapPos(l):l)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(l,l+e.chunk[t].length))||a.add(e.chunk[t])}return a}class We{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ze{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let a=0;a<e.length;a++)for(let l=e[a];!l.isEmpty;l=l.nextLayer)l.maxPoint>=n&&r.push(new We(l,t,n,a));return 1==r.length?r[0]:new Ze(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Ge(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Ge(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ge(this.heap,0)}}}function Ge(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let a=e[r];if(r+1<e.length&&a.compare(e[r+1])>=0&&(a=e[r+1],r++),n.compare(a)<0)break;e[r]=n,e[t]=a,t=r}}class Ke{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ze.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Je(this.active,e),Je(this.activeTo,e),Je(this.activeRank,e),this.minActive=et(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:a}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=a;)t++;Qe(this.active,t,n),Qe(this.activeTo,t,r),Qe(this.activeRank,t,a),e&&Qe(e,t,this.cursor.from),this.minActive=et(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&Je(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function Ye(e,t,n,r,a,l){e.goto(t),n.goto(r);let f=r+a,d=r,h=r-t;for(;;){let t=e.to+h-n.to||e.endSide-n.endSide,r=t<0?e.to+h:n.to,a=Math.min(r,f);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&Xe(e.activeForPoint(e.to+h),n.activeForPoint(n.to))||l.comparePoint(d,a,e.point,n.point):a>d&&!Xe(e.active,n.active)&&l.compareRange(d,a,e.active,n.active),r>f)break;d=r,t<=0&&e.next(),t>=0&&n.next()}}function Xe(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function Je(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function Qe(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function et(e,t){let n=-1,r=1e9;for(let a=0;a<t.length;a++)(t[a]-r||e[a].endSide-e[n].endSide)<0&&(n=a,r=t[a]);return n}function tt(e,t,n=e.length){let r=0;for(let a=0;a<n;)9==e.charCodeAt(a)?(r+=t-r%t,a++):(r++,a=C(e,a));return r}function nt(e,t,n,r){for(let r=0,a=0;;){if(a>=t)return r;if(r==e.length)break;a+=9==e.charCodeAt(r)?n-a%n:1,r=C(e,r)}return!0===r?-1:e.length}},11445:function(e,t,n){"use strict";n.d(t,{kH:function(){return Se},p:function(){return ke},Nm:function(){return at},tk:function(){return ir},SJ:function(){return bi},dc:function(){return br},lg:function(){return Ke},l9:function(){return _e},S2:function(){return Gr},qr:function(){return Tr},Sd:function(){return pi},gB:function(){return fi},v5:function(){return Si},v7:function(){return wi},HQ:function(){return Bi},AE:function(){return Nr},bF:function(){return ui},$f:function(){return dr},EY:function(){return kr},Eu:function(){return Li},OO:function(){return logException},Zs:function(){return Vr},$1:function(){return mr},mH:function(){return yi},hJ:function(){return ii},jH:function(){return Xr}});for(var r=n(1727),a=n(37207),l={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},f={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},d="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),h=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),p="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),y=h||d&&+d[1]<57,w=0;w<10;w++)l[48+w]=l[96+w]=String(w);for(w=1;w<=24;w++)l[w+111]="F"+w;for(w=65;w<=90;w++)l[w]=String.fromCharCode(w+32),f[w]=String.fromCharCode(w);for(var x in l)f.hasOwnProperty(x)||(f[x]=l[x]);function _(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function S(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function k(e,t){if(!t.anchorNode)return!1;try{return S(e,t.anchorNode)}catch(e){return!1}}function C(e){return 3==e.nodeType?L(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function E(e,t,n,r){return!!n&&(j(e,t,n,r,-1)||j(e,t,n,r,1))}function O(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function j(e,t,n,r,a){for(;;){if(e==n&&t==r)return!0;if(t==(a<0?0:T(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=O(e)+(a<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(a<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=a<0?T(e):0}}}function T(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function A(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function P(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class D{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?T(t):0),n,Math.min(e.focusOffset,n?T(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let R,I=null;function M(e){if(e.setActive)return e.setActive();if(I)return e.focus(I);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==I?{get preventScroll(){return I={preventScroll:!0},!0}}:void 0),!I){I=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],a=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=a&&(n.scrollLeft=a)}}}function L(e,t,n=t){let r=R||(R=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function N(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},a=new KeyboardEvent("keydown",r);a.synthetic=!0,e.dispatchEvent(a);let l=new KeyboardEvent("keyup",r);return l.synthetic=!0,e.dispatchEvent(l),a.defaultPrevented||l.defaultPrevented}function F(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class q{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new q(e.parentNode,O(e),t)}static after(e,t){return new q(e.parentNode,O(e)+1,t)}}const B=[];class U{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.dirty){let n,r=this.dom,a=null;for(let l of this.children){if(l.dirty){if(!l.dom&&(n=a?a.nextSibling:r.firstChild)){let e=U.get(n);(!e||!e.parent&&e.canReuseDOM(l))&&l.reuseDOM(n)}l.sync(e,t),l.dirty=0}if(n=a?a.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&n!=l.dom&&(t.written=!0),l.dom.parentNode==r)for(;n&&n!=l.dom;)n=H(n);else r.insertBefore(l.dom,n);a=l.dom}for(n=a?a.nextSibling:r.firstChild,n&&t&&t.node==r&&(t.written=!0);n;)n=H(n)}else if(1&this.dirty)for(let n of this.children)n.dirty&&(n.sync(e,t),n.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==T(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!U.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,a=-1,l=-1,f=-1;for(let d=0,h=n,p=n;d<this.children.length;d++){let n=this.children[d],y=h+n.length;if(h<e&&y>t)return n.domBoundsAround(e,t,h);if(y>=e&&-1==r&&(r=d,a=h),h>t&&n.dom.parentNode==this.dom){l=d,f=p;break}p=y,h=y+n.breakAfter}return{from:a,to:f<0?n+this.length:f,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=B){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new z(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,a,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function H(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}U.prototype.breakAfter=0;class z{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function V(e,t,n,r,a,l,f,d,h){let{children:p}=e,y=p.length?p[t]:null,w=l.length?l[l.length-1]:null,x=w?w.breakAfter:f;if(!(t==r&&y&&!f&&!x&&l.length<2&&y.merge(n,a,l.length?w:null,0==n,d,h))){if(r<p.length){let e=p[r];e&&a<e.length?(t==r&&(e=e.split(a),a=0),!x&&w&&e.merge(0,a,w,!0,0,h)?l[l.length-1]=e:(a&&e.merge(0,a,null,!1,0,h),l.push(e))):(null==e?void 0:e.breakAfter)&&(w?w.breakAfter=1:f=1),r++}for(y&&(y.breakAfter=f,n>0&&(!f&&l.length&&y.merge(n,y.length,l[0],!1,d,0)?y.breakAfter=l.shift().breakAfter:(n<y.length||y.children.length&&0==y.children[y.children.length-1].length)&&y.merge(n,y.length,null,!1,d,0),t++));t<r&&l.length;)if(p[r-1].become(l[l.length-1]))r--,l.pop(),h=l.length?0:d;else{if(!p[t].become(l[0]))break;t++,l.shift(),d=l.length?0:h}!l.length&&t&&r<p.length&&!p[t-1].breakAfter&&p[r].merge(0,0,p[t-1],!1,d,h)&&t--,(t<r||l.length)&&e.replaceChildren(t,r,l)}}function W(e,t,n,r,a,l){let f=e.childCursor(),{i:d,off:h}=f.findPos(n,1),{i:p,off:y}=f.findPos(t,-1),w=t-n;for(let e of r)w+=e.length;e.length+=w,V(e,p,y,d,h,r,0,a,l)}let Z="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},G="undefined"!=typeof document?document:{documentElement:{style:{}}};const K=/Edge\/(\d+)/.exec(Z.userAgent),Y=/MSIE \d/.test(Z.userAgent),X=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Z.userAgent),J=!!(Y||X||K),Q=!J&&/gecko\/(\d+)/i.test(Z.userAgent),ee=!J&&/Chrome\/(\d+)/.exec(Z.userAgent),te="webkitFontSmoothing"in G.documentElement.style,ne=!J&&/Apple Computer/.test(Z.vendor),re=ne&&(/Mobile\/\w+/.test(Z.userAgent)||Z.maxTouchPoints>2);var oe={mac:re||/Mac/.test(Z.platform),windows:/Win/.test(Z.platform),linux:/Linux|X11/.test(Z.platform),ie:J,ie_version:Y?G.documentMode||6:X?+X[1]:K?+K[1]:0,gecko:Q,gecko_version:Q?+(/Firefox\/(\d+)/.exec(Z.userAgent)||[0,0])[1]:0,chrome:!!ee,chrome_version:ee?+ee[1]:0,ios:re,android:/Android\b/.test(Z.userAgent),webkit:te,safari:ne,webkit_version:te?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=G.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class ae extends U{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return(!n||n instanceof ae&&!(this.length-(t-e)+n.length>256))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ae(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new q(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return le(this.dom,e,t)}}class se extends U{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(F(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,a,l){return(!n||!(!(n instanceof se&&n.mark.eq(this.mark))||e&&a<=0||t<this.length&&l<=0))&&(W(this,e,t,n?n.children:[],a-1,l-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,a=0;for(let l of this.children){let f=n+l.length;f>e&&t.push(n<e?l.split(e-n):l),r<0&&n>=e&&(r=a),n=f,a++}let l=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new se(this.mark,t,l)}domAtPos(e){return ge(this,e)}coordsAt(e,t){return ye(this,e,t)}}function le(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let a=t,l=t,f=0;0==t&&n<0||t==r&&n>=0?oe.chrome||oe.gecko||(t?(a--,f=1):l<r&&(l++,f=-1)):n<0?a--:l<r&&l++;let d=L(e,a,l).getClientRects();if(!d.length)return null;let h=d[(f?f<0:n>=0)?0:d.length-1];return oe.safari&&!f&&0==h.width&&(h=Array.prototype.find.call(d,(e=>e.width))||h),f?A(h,f<0):h||null}class ce extends U{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||ce)(e,t,n)}split(e){let t=ce.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,a,l){return!(n&&(!(n instanceof ce&&this.widget.compare(n.widget))||e>0&&a<=0||t<this.length&&l<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof ce&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return r.xv.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,a=this.posAtStart;return n?n.slice(a,a+this.length):r.xv.empty}domAtPos(e){return(this.length?0==e:this.side>0)?q.before(this.dom):q.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),a=null;if(!r.length)return null;let l=this.side?this.side<0:e>0;for(let t=l?r.length-1:0;a=r[t],!(e>0?0==t:t==r.length-1||a.top<a.bottom);t+=l?-1:1);return A(a,!l)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ue extends ce{domAtPos(e){let{topView:t,text:n}=this.widget;return t?fe(e,0,t,n,this.length-t.length,((e,t)=>e.domAtPos(t)),((e,t)=>new q(e,Math.min(t,e.nodeValue.length)))):new q(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?he(e,t,n,r,this.length-n.length):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?fe(e,t,n,r,this.length-n.length,((e,t,n)=>e.coordsAt(t,n)),((e,t,n)=>le(e,t,n))):le(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function fe(e,t,n,r,a,l,f){if(n instanceof se){for(let d=n.dom.firstChild;d;d=d.nextSibling){let n=U.get(d);if(n){let h=S(d,r),p=n.length+(h?a:0);if(e<p||e==p&&n.getSide()<=0)return h?fe(e,t,n,r,a,l,f):l(n,e,t);e-=p}else{let n=de(e,t,d,f);if("number"!=typeof n)return n;e=n}}return l(n,n.length,-1)}return n.dom==r?f(r,e,t):l(n,e,t)}function de(e,t,n,r){if(3==n.nodeType){let a=n.nodeValue.length;if(e<=a)return r(n,e,t);e-=a}else if(1==n.nodeType&&"false"!=n.contentEditable)for(let a=n.firstChild;a;a=a.nextSibling){let n=de(e,t,a,r);if("number"!=typeof n)return n;e=n}return e}function he(e,t,n,r,a){if(n instanceof se){let l=0;for(let f=n.dom.firstChild;f;f=f.nextSibling){let n=U.get(f);if(n){let d=S(f,r);if(S(f,e))return l+(d?he(e,t,n,r,a):n.localPosFromDOM(e,t));l+=n.length+(d?a:0)}else{let n=pe(e,t,f);if(null!=n.result)return l+n.result;l+=n.size}}}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}function pe(e,t,n){if(3==n.nodeType)return e==n?{result:t}:{size:n.nodeValue.length};if(1!=n.nodeType||"false"==n.contentEditable)return n.contains(e)?{result:0}:{size:0};{let r=0;for(let a=n.firstChild,l=0;;a=a.nextSibling,l++){if(e==n&&l==t)return{result:r};if(!a)return{size:r};let f=pe(e,t,a);if(null!=f.result)return{result:t+f.result};r+=f.size}}}class me extends U{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof me&&e.side==this.side}split(){return new me(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?q.before(this.dom):q.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return r.xv.empty}get isHidden(){return!0}}function ge(e,t){let n=e.dom,{children:r}=e,a=0;for(let e=0;a<r.length;a++){let l=r[a],f=e+l.length;if(!(f==e&&l.getSide()<=0)){if(t>e&&t<f&&l.dom.parentNode==n)return l.domAtPos(t-e);if(t<=e)break;e=f}}for(let e=a;e>0;e--){let t=r[e-1];if(t.dom.parentNode==n)return t.domAtPos(t.length)}for(let e=a;e<r.length;e++){let t=r[e];if(t.dom.parentNode==n)return t.domAtPos(0)}return new q(n,0)}function ve(e,t,n){let r,{children:a}=e;n>0&&t instanceof se&&a.length&&(r=a[a.length-1])instanceof se&&r.mark.eq(t.mark)?ve(r,t.children[0],n-1):(a.push(t),t.setParent(e)),e.length+=t.length}function ye(e,t,n){let r=null,a=-1,l=null,f=-1;!function e(t,d){for(let h=0,p=0;h<t.children.length&&p<=d;h++){let y=t.children[h],w=p+y.length;w>=d&&(y.children.length?e(y,d-p):(!l||l.isHidden&&n>0)&&(w>d||p==w&&y.getSide()>0)?(l=y,f=d-p):(p<d||p==w&&y.getSide()<0&&!y.isHidden)&&(r=y,a=d-p)),p=w}}(e,t);let d=(n<0?r:l)||r||l;return d?d.coordsAt(Math.max(0,d==r?a:f),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=C(t);return n[n.length-1]||null}(e)}function be(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function we(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let a of n)if(-1==r.indexOf(a)||e[a]!==t[a])return!1;return!0}function xe(e,t,n){let r=null;if(t)for(let a in t)n&&a in n||e.removeAttribute(r=a);if(n)for(let a in n)t&&t[a]==n[a]||e.setAttribute(r=a,n[a]);return!!r}ae.prototype.children=ce.prototype.children=me.prototype.children=B;class _e{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get customView(){return null}get isHidden(){return!1}destroy(e){}}var Se=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Se||(Se={}));class ke extends r.uU{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Ce(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new Oe(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:a,end:l}=je(e,r);t=(a?r?-3e8:-1:5e8)-1,n=1+(l?r?2e8:1:-6e8)}return new Oe(e,t,n,r,e.widget||null,!0)}static line(e){return new Ee(e)}static set(e,t=!1){return r.Xs.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}ke.none=r.Xs.empty;class Ce extends ke{constructor(e){let{start:t,end:n}=je(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Ce&&this.tagName==e.tagName&&this.class==e.class&&we(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Ce.prototype.point=!1;class Ee extends ke{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ee&&this.spec.class==e.spec.class&&we(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ee.prototype.mapMode=r.gc.TrackBefore,Ee.prototype.point=!0;class Oe extends ke{constructor(e,t,n,a,l,f){super(t,n,l,e),this.block=a,this.isReplace=f,this.mapMode=a?t<=0?r.gc.TrackBefore:r.gc.TrackAfter:r.gc.TrackDel}get type(){return this.startSide<this.endSide?Se.WidgetRange:this.startSide<=0?Se.WidgetBefore:Se.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Oe&&(t=this.widget,n=e.widget,t==n||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function je(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function $e(e,t,n,r=0){let a=n.length-1;a>=0&&n[a]+r>=e?n[a]=Math.max(n[a],t):n.push(e,t)}Oe.prototype.point=!0;class Te extends U{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,a,l){if(n){if(!(n instanceof Te))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),W(this,e,t,n?n.children:[],a,l),!0}split(e){let t=new Te;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){we(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ve(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=be(t,this.attrs||{})),n&&(this.attrs=be({class:n},this.attrs||{}))}domAtPos(e){return ge(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var n;this.dom?4&this.dirty&&(F(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(xe(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&U.get(r)instanceof se;)r=r.lastChild;if(!(r&&this.length&&("BR"==r.nodeName||0!=(null===(n=U.get(r))||void 0===n?void 0:n.isEditable)||oe.ios&&this.children.some((e=>e instanceof ae))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof ae)||/[^ -~]/.test(n.text))return null;let r=C(n.dom);if(1!=r.length)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=ye(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let r=(t-e.textHeight)/2;return{top:n.top+r,bottom:n.bottom-r,left:n.left,right:n.left}}}return n}become(e){return!1}get type(){return Se.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let a=e.children[n],l=r+a.length;if(l>=t){if(a instanceof Te)return a;if(l>t)break}r=l+a.breakAfter}return null}}class Ae extends U{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,a,l){return!(n&&(!(n instanceof Ae&&this.widget.compare(n.widget))||e>0&&a<=0||t<this.length&&l<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?q.before(this.dom):q.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Ae(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return B}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):r.xv.empty}domBoundsAround(){return null}become(e){return e instanceof Ae&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Pe{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ae&&e.type==Se.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Te),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(De(new me(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(De(new ae(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,a,l){if(this.disallowBlockEffectsFor[l]&&n instanceof Oe){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let f=t-e;if(n instanceof Oe)if(n.block){let{type:e}=n;e!=Se.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Ae(n.widget||new Re("div"),f,e))}else{let l=ce.create(n.widget||new Re("span"),f,f?0:n.startSide),d=this.atCursorPos&&!l.isEditable&&a<=r.length&&(e<t||n.startSide>0),h=!l.isEditable&&(e<t||a>r.length||n.startSide<=0),p=this.getLine();2!=this.pendingBuffer||d||l.isEditable||(this.pendingBuffer=0),this.flushBuffer(r),d&&(p.append(De(new me(1),r),a),a=r.length+Math.max(0,a-r.length)),p.append(De(l,r),a),this.atCursorPos=h,this.pendingBuffer=h?e<t||a>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);f&&(this.textOff+f<=this.text.length?this.textOff+=f:(this.skip+=f-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,n,a,l){let f=new Pe(e,t,n,l);return f.openEnd=r.Xs.spans(a,t,n,f),f.openStart<0&&(f.openStart=f.openEnd),f.finish(f.openEnd),f}}function De(e,t){for(let n of t)e=new se(n,[e],e.length);return e}class Re extends _e{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const Ie=r.r$.define(),Me=r.r$.define(),Le=r.r$.define(),Ne=r.r$.define(),Fe=r.r$.define(),qe=r.r$.define(),Be=r.r$.define(),Ue=r.r$.define({combine:e=>e.some((e=>e))}),He=r.r$.define({combine:e=>e.some((e=>e))});class ze{constructor(e,t="nearest",n="nearest",r=5,a=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=a}map(e){return e.empty?this:new ze(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Ve=r.Py.define({map:(e,t)=>e.map(t)});function logException(e,t,n){let r=e.facet(Ne);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const We=r.r$.define({combine:e=>!e.length||e[0]});let Ze=0;const Ge=r.r$.define();class Ke{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:n,provide:r,decorations:a}=t||{};return new Ke(Ze++,e,n,(e=>{let t=[Ge.of(e)];return a&&t.push(Qe.of((t=>{let n=t.plugin(e);return n?a(n):ke.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return Ke.define((t=>new e(t)),t)}}class Ye{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(logException(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){logException(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){logException(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Xe=r.r$.define(),Je=r.r$.define(),Qe=r.r$.define(),et=r.r$.define(),tt=r.r$.define();function nt(e){let t=0,n=0,r=0,a=0;for(let l of e.state.facet(tt)){let f=l(e);f&&(null!=f.left&&(t=Math.max(t,f.left)),null!=f.right&&(n=Math.max(n,f.right)),null!=f.top&&(r=Math.max(r,f.top)),null!=f.bottom&&(a=Math.max(a,f.bottom)))}return{left:t,right:n,top:r,bottom:a}}const rt=r.r$.define();class it{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new it(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,a=0,l=0,f=0;;r++){let d=r==e.length?null:e[r],h=l-f,p=d?d.fromB:1e9;for(;a<t.length&&t[a]<p;){let e=t[a],r=t[a+1],l=Math.max(f,e),d=Math.min(p,r);if(l<=d&&new it(l+h,d+h,l,d).addToSet(n),r>p)break;a+=2}if(!d)return n;new it(d.fromA,d.toA,d.fromB,d.toB).addToSet(n),l=d.toA,f=d.toB}}}class ot{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=r.as.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let a=[];this.changes.iterChangedRanges(((e,t,n,r)=>a.push(new it(e,t,n,r)))),this.changedRanges=a}static create(e,t,n){return new ot(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var at=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(at||(at={}));const st=at.LTR,lt=at.RTL;function ct(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const ut=ct("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ft=ct("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),dt=Object.create(null),ht=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);dt[t]=n,dt[n]=-t}const pt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class mt{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?lt:st}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let a=-1;for(let l=0;l<e.length;l++){let f=e[l];if(f.from<=t&&f.to>=t){if(f.level==n)return l;(a<0||(0!=r?r<0?f.from<t:f.to>t:e[a].level>f.level))&&(a=l)}}if(a<0)throw new RangeError("Index out of range");return a}}const gt=[];function vt(e,t){let n=e.length,r=t==st?1:2,a=t==st?2:1;if(!e||1==r&&!pt.test(e))return yt(n);for(let t=0,a=r,f=r;t<n;t++){let n=(l=e.charCodeAt(t))<=247?ut[l]:1424<=l&&l<=1524?2:1536<=l&&l<=1785?ft[l-1536]:1774<=l&&l<=2220?4:8192<=l&&l<=8203?256:64336<=l&&l<=65023?4:8204==l?256:1;512==n?n=a:8==n&&4==f&&(n=16),gt[t]=4==n?2:n,7&n&&(f=n),a=n}var l;for(let e=0,t=r,a=r;e<n;e++){let r=gt[e];if(128==r)e<n-1&&t==gt[e+1]&&24&t?r=gt[e]=t:gt[e]=256;else if(64==r){let r=e+1;for(;r<n&&64==gt[r];)r++;let l=e&&8==t||r<n&&8==gt[r]?1==a?1:8:256;for(let t=e;t<r;t++)gt[t]=l;e=r-1}else 8==r&&1==a&&(gt[e]=1);t=r,7&r&&(a=r)}for(let t,l,f,d=0,h=0,p=0;d<n;d++)if(l=dt[t=e.charCodeAt(d)])if(l<0){for(let e=h-3;e>=0;e-=3)if(ht[e+1]==-l){let t=ht[e+2],n=2&t?r:4&t?1&t?a:r:0;n&&(gt[d]=gt[ht[e]]=n),h=e;break}}else{if(189==ht.length)break;ht[h++]=d,ht[h++]=t,ht[h++]=p}else if(2==(f=gt[d])||1==f){let e=f==r;p=e?0:1;for(let t=h-3;t>=0;t-=3){let n=ht[t+2];if(2&n)break;if(e)ht[t+2]|=2;else{if(4&n)break;ht[t+2]|=4}}}for(let e=0;e<n;e++)if(256==gt[e]){let t=e+1;for(;t<n&&256==gt[t];)t++;let a=1==(e?gt[e-1]:r),l=a==(1==(t<n?gt[t]:r))?a?1:2:r;for(let n=e;n<t;n++)gt[n]=l;e=t-1}let f=[];if(1==r)for(let e=0;e<n;){let t=e,r=1!=gt[e++];for(;e<n&&r==(1!=gt[e]);)e++;if(r)for(let n=e;n>t;){let e=n,r=2!=gt[--n];for(;n>t&&r==(2!=gt[n-1]);)n--;f.push(new mt(n,e,r?2:1))}else f.push(new mt(t,e,0))}else for(let e=0;e<n;){let t=e,r=2==gt[e++];for(;e<n&&r==(2==gt[e]);)e++;f.push(new mt(t,e,r?1:2))}return f}function yt(e){return[new mt(0,e,0)]}let bt="";function wt(e,t,n,a,l){var f;let d=a.head-e.from,h=-1;if(0==d){if(!l||!e.length)return null;t[0].level!=n&&(d=t[0].side(!1,n),h=0)}else if(d==e.length){if(l)return null;let e=t[t.length-1];e.level!=n&&(d=e.side(!0,n),h=t.length-1)}h<0&&(h=mt.find(t,d,null!==(f=a.bidiLevel)&&void 0!==f?f:-1,a.assoc));let p=t[h];d==p.side(l,n)&&(p=t[h+=l?1:-1],d=p.side(!l,n));let y=l==(p.dir==n),w=(0,r.cp)(e.text,d,y);if(bt=e.text.slice(Math.min(d,w),Math.max(d,w)),w!=p.side(l,n))return r.jT.cursor(w+e.from,y?-1:1,p.level);let x=h==(l?t.length-1:0)?null:t[h+(l?1:-1)];return x||p.level==n?x&&x.level<p.level?r.jT.cursor(x.side(!l,n)+e.from,l?1:-1,x.level):r.jT.cursor(w+e.from,l?-1:1,p.level):r.jT.cursor(l?e.to:e.from,l?-1:1,n)}const xt="￿";class _t{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(r.yy.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=xt}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let e=this.text.length;this.readNode(r);let a=r.nextSibling;if(a==t)break;let l=U.get(r),f=U.get(a);(l&&f?l.breakAfter:(l?l.breakAfter:St(r))||St(a)&&("BR"!=r.nodeName||r.cmIgnore)&&this.text.length>e)&&this.lineBreak(),r=a}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let a,l=-1,f=1;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,n),f=this.lineSeparator.length):(a=r.exec(t))&&(l=a.index,f=a[0].length),this.append(t.slice(n,l<0?t.length:l)),l<0)break;if(this.lineBreak(),f>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=f-1);n=l+f}}readNode(e){if(e.cmIgnore)return;let t=U.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function St(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class kt{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Ct extends U{constructor(e){super(),this.view=e,this.compositionDeco=ke.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Te],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new it(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=ke.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let n=Ot(e);if(!n)return ke.none;let{from:r,to:a,node:l,text:f}=n,d=t.mapPos(r,1),h=Math.max(d,t.mapPos(a,-1)),{state:p}=e,y=new _t([],p);3==l.nodeType?y.readTextNode(l):y.readRange(l.firstChild,null);let{text:w}=y;if(w.indexOf(xt)>-1)return ke.none;if(h-d<w.length)if(p.doc.sliceString(d,Math.min(p.doc.length,d+w.length))==w)h=d+w.length;else{if(p.doc.sliceString(Math.max(0,h-w.length),h)!=w)return ke.none;d=h-w.length}else if(p.doc.sliceString(d,h)!=w)return ke.none;let x=U.get(l);x instanceof ue?x=x.widget.topView:x&&(x.parent=null);return ke.set(ke.replace({widget:new jt(l,f,x),inclusive:!0}).range(d,h))}(this.view,e.changes)),(oe.ie||oe.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=function(e,t,n){let a=new Tt;return r.Xs.compare(e,t,n,a),a.changes}(this.decorations,this.updateDeco(),e.changes);return t=it.extendWithRanges(t,n),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=oe.chrome||oe.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.dirty=0,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof Ae&&e.widget instanceof Et&&r.push(e.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let t=e.length-1;;t--){let r=t>=0?e[t]:null;if(!r)break;let{fromA:a,toA:l,fromB:f,toB:d}=r,{content:h,breakAtStart:p,openStart:y,openEnd:w}=Pe.build(this.view.state.doc,f,d,this.decorations,this.dynamicDecorationMap),{i:x,off:_}=n.findPos(l,1),{i:S,off:k}=n.findPos(a,-1);V(this,S,k,x,_,h,p,y,w)}}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,a=!r&&k(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||t||a))return;let l=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,d=this.domAtPos(f.anchor),h=f.empty?d:this.domAtPos(f.head);if(oe.gecko&&f.empty&&!this.compositionDeco.size&&(1==(p=d).node.nodeType&&p.node.firstChild&&(0==p.offset||"false"==p.node.childNodes[p.offset-1].contentEditable)&&(p.offset==p.node.childNodes.length||"false"==p.node.childNodes[p.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>d.node.insertBefore(e,d.node.childNodes[d.offset]||null))),d=h=new q(e,0),l=!0}var p;let y=this.view.observer.selectionRange;!l&&y.focusNode&&E(d.node,d.offset,y.anchorNode,y.anchorOffset)&&E(h.node,h.offset,y.focusNode,y.focusOffset)||(this.view.observer.ignore((()=>{oe.android&&oe.chrome&&this.dom.contains(y.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(y.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=_(this.view.root);if(e)if(f.empty){if(oe.gecko){let e=(t=d.node,r=d.offset,1!=t.nodeType?0:(r&&"false"==t.childNodes[r-1].contentEditable?1:0)|(r<t.childNodes.length&&"false"==t.childNodes[r].contentEditable?2:0));if(e&&3!=e){let t=$t(d.node,d.offset,1==e?1:-1);t&&(d=new q(t,1==e?0:t.nodeValue.length))}}e.collapse(d.node,d.offset),null!=f.bidiLevel&&null!=y.cursorBidiLevel&&(y.cursorBidiLevel=f.bidiLevel)}else if(e.extend){e.collapse(d.node,d.offset);try{e.extend(h.node,h.offset)}catch(e){}}else{let t=document.createRange();f.anchor>f.head&&([d,h]=[h,d]),t.setEnd(h.node,h.offset),t.setStart(d.node,d.offset),e.removeAllRanges(),e.addRange(t)}else;var t,r;a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(d,h)),this.impreciseAnchor=d.precise?null:new q(y.anchorNode,y.anchorOffset),this.impreciseHead=h.precise?null:new q(y.focusNode,y.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,n=_(e.root),{anchorNode:r,anchorOffset:a}=e.observer.selectionRange;if(!(n&&t.empty&&t.assoc&&n.modify))return;let l=Te.find(this,t.head);if(!l)return;let f=l.posAtStart;if(t.head==f||t.head==f+l.length)return;let d=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!d||!h||d.bottom>h.top)return;let p=this.domAtPos(t.head+t.assoc);n.collapse(p.node,p.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let y=e.observer.selectionRange;e.docView.posFromDOM(y.anchorNode,y.anchorOffset)!=t.from&&n.collapse(r,a)}nearest(e){for(let t=e;t;){let e=U.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof Te)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let a=this.children[r],l=n-a.breakAfter-a.length;if(e>l||e==l&&a.type!=Se.WidgetBefore&&a.type!=Se.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==Se.WidgetBefore&&t>-2))return a.coordsAt(e-l,t);n=l}}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,a=this.view.contentDOM.clientWidth,l=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,f=-1,d=this.view.textDirection==at.LTR;for(let e=0,h=0;h<this.children.length;h++){let p=this.children[h],y=e+p.length;if(y>r)break;if(e>=n){let n=p.dom.getBoundingClientRect();if(t.push(n.height),l){let t=p.dom.lastChild,r=t?C(t):[];if(r.length){let t=r[r.length-1],l=d?t.right-n.left:n.right-t.left;l>f&&(f=l,this.minWidth=a,this.minWidthFrom=e,this.minWidthTo=y)}}}e=y+p.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?at.RTL:at.LTR}measureTextSize(){for(let e of this.children)if(e instanceof Te){let t=e.measureTextSize();if(t)return t}let e,t,n,r=document.createElement("div");return r.className="cm-line",r.style.width="99999px",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(r);let a=C(r.firstChild)[0];e=r.getBoundingClientRect().height,t=a?a.width/27:7,n=a?a.height:e,r.remove()})),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new z(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let a=r==t.viewports.length?null:t.viewports[r],l=a?a.from-1:this.length;if(l>n){let r=t.lineBlockAt(l).bottom-t.lineBlockAt(n).top;e.push(ke.replace({widget:new Et(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,l))}if(!a)break;n=a.to+1}return ke.set(e)}updateDeco(){let e=this.view.state.facet(Qe).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let a=nt(this.view),l={left:r.left-a.left,top:r.top-a.top,right:r.right+a.right,bottom:r.bottom+a.bottom};!function(e,t,n,r,a,l,f,d){let h=e.ownerDocument,p=h.defaultView||window;for(let y=e;y;)if(1==y.nodeType){let e,w=y==h.body;if(w)e=P(p);else{if(y.scrollHeight<=y.clientHeight&&y.scrollWidth<=y.clientWidth){y=y.assignedSlot||y.parentNode;continue}let t=y.getBoundingClientRect();e={left:t.left,right:t.left+y.clientWidth,top:t.top,bottom:t.top+y.clientHeight}}let x=0,_=0;if("nearest"==a)t.top<e.top?(_=-(e.top-t.top+f),n>0&&t.bottom>e.bottom+_&&(_=t.bottom-e.bottom+_+f)):t.bottom>e.bottom&&(_=t.bottom-e.bottom+f,n<0&&t.top-_<e.top&&(_=-(e.top+_-t.top+f)));else{let r=t.bottom-t.top,l=e.bottom-e.top;_=("center"==a&&r<=l?t.top+r/2-l/2:"start"==a||"center"==a&&n<0?t.top-f:t.bottom-l+f)-e.top}if("nearest"==r?t.left<e.left?(x=-(e.left-t.left+l),n>0&&t.right>e.right+x&&(x=t.right-e.right+x+l)):t.right>e.right&&(x=t.right-e.right+l,n<0&&t.left<e.left+x&&(x=-(e.left+x-t.left+l))):x=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==d?t.left-l:t.right-(e.right-e.left)+l)-e.left,x||_)if(w)p.scrollBy(x,_);else{let e=0,n=0;if(_){let e=y.scrollTop;y.scrollTop+=_,n=y.scrollTop-e}if(x){let t=y.scrollLeft;y.scrollLeft+=x,e=y.scrollLeft-t}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-x)<1&&(r="nearest"),n&&Math.abs(n-_)<1&&(a="nearest")}if(w)break;y=y.assignedSlot||y.parentNode}else{if(11!=y.nodeType)break;y=y.host}}(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==at.LTR)}}class Et extends _e{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Ot(e){let t=e.observer.selectionRange,n=t.focusNode&&$t(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e.docView.nearest(n);if(!r)return null;if(r instanceof Te){let e=n;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!U.get(t);)t=t.previousSibling;let a=t?U.get(t).posAtEnd:r.posAtStart;return{from:a,to:a,node:e,text:n}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof Te)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:n}}}class jt extends _e{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return ue}}function $t(e,t,n){if(n<=0)for(let n=e,r=t;;){if(3==n.nodeType)return n;if(!(1==n.nodeType&&r>0))break;n=n.childNodes[r-1],r=T(n)}if(n>=0)for(let r=e,a=t;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&a<r.childNodes.length&&n>=0))break;r=r.childNodes[a],a=0}return null}class Tt{constructor(){this.changes=[]}compareRange(e,t){$e(e,t,this.changes)}comparePoint(e,t){$e(e,t,this.changes)}}function At(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Pt(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function Dt(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Rt(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function It(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Mt(e,t,n){let r,a,l,f,d,h,p,y,w=!1;for(let x=e.firstChild;x;x=x.nextSibling){let e=C(x);for(let _=0;_<e.length;_++){let S=e[_];a&&Dt(a,S)&&(S=Rt(It(S,a.bottom),a.top));let k=At(t,S),C=Pt(n,S);if(0==k&&0==C)return 3==x.nodeType?Lt(x,t,n):Mt(x,t,n);if(!r||f>C||f==C&&l>k){r=x,a=S,l=k,f=C;let d=C?n<S.top?-1:1:k?t<S.left?-1:1:0;w=!d||(d>0?_<e.length-1:_>0)}0==k?n>S.bottom&&(!p||p.bottom<S.bottom)?(d=x,p=S):n<S.top&&(!y||y.top>S.top)&&(h=x,y=S):p&&Dt(p,S)?p=It(p,S.bottom):y&&Dt(y,S)&&(y=Rt(y,S.top))}}if(p&&p.bottom>=n?(r=d,a=p):y&&y.top<=n&&(r=h,a=y),!r)return{node:e,offset:0};let x=Math.max(a.left,Math.min(a.right,t));return 3==r.nodeType?Lt(r,x,n):w&&"false"!=r.contentEditable?Mt(r,x,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(a.left+a.right)/2?1:0)}}function Lt(e,t,n){let r=e.nodeValue.length,a=-1,l=1e9,f=0;for(let d=0;d<r;d++){let r=L(e,d,d+1).getClientRects();for(let h=0;h<r.length;h++){let p=r[h];if(p.top==p.bottom)continue;f||(f=t-p.left);let y=(p.top>n?p.top-n:n-p.bottom)-1;if(p.left-1<=t&&p.right+1>=t&&y<l){let n=t>=(p.left+p.right)/2,r=n;if(oe.chrome||oe.gecko){L(e,d).getBoundingClientRect().left==p.right&&(r=!n)}if(y<=0)return{node:e,offset:d+(r?1:0)};a=d+(r?1:0),l=y}}}return{node:e,offset:a>-1?a:f>0?e.nodeValue.length:0}}function Nt(e,t,n,r=-1){var a,l;let f,d=e.contentDOM.getBoundingClientRect(),h=d.top+e.viewState.paddingTop,{docHeight:p}=e.viewState,{x:y,y:w}=t,x=w-h;if(x<0)return 0;if(x>p)return e.state.doc.length;for(let t=e.defaultLineHeight/2,a=!1;f=e.elementAtHeight(x),f.type!=Se.Text;)for(;x=r>0?f.bottom+t:f.top-t,!(x>=0&&x<=p);){if(a)return n?null:0;a=!0,r=-r}w=h+x;let _=f.from;if(_<e.viewport.from)return 0==e.viewport.from?0:n?null:Ft(e,d,f,y,w);if(_>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:Ft(e,d,f,y,w);let S=e.dom.ownerDocument,k=e.root.elementFromPoint?e.root:S,C=k.elementFromPoint(y,w);C&&!e.contentDOM.contains(C)&&(C=null),C||(y=Math.max(d.left+1,Math.min(d.right-1,y)),C=k.elementFromPoint(y,w),C&&!e.contentDOM.contains(C)&&(C=null));let E,O=-1;if(C&&0!=(null===(a=e.docView.nearest(C))||void 0===a?void 0:a.isEditable))if(S.caretPositionFromPoint){let e=S.caretPositionFromPoint(y,w);e&&({offsetNode:E,offset:O}=e)}else if(S.caretRangeFromPoint){let t=S.caretRangeFromPoint(y,w);t&&(({startContainer:E,startOffset:O}=t),(!e.contentDOM.contains(E)||oe.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return L(e,r-1,r).getBoundingClientRect().left>n}(E,O,y)||oe.chrome&&function(e,t,n){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}let r=1==e.nodeType?e.getBoundingClientRect():L(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}(E,O,y))&&(E=void 0))}if(!E||!e.docView.dom.contains(E)){let t=Te.find(e.docView,_);if(!t)return x>f.top+f.height/2?f.to:f.from;({node:E,offset:O}=Mt(t.dom,y,w))}let j=e.docView.nearest(E);if(!j)return null;if(j.isWidget&&1==(null===(l=j.dom)||void 0===l?void 0:l.nodeType)){let e=j.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?j.posAtStart:j.posAtEnd}return j.localPosFromDOM(E,O)+j.posAtStart}function Ft(e,t,n,a,l){let f=Math.round((a-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){f+=Math.floor((l-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let d=e.state.sliceDoc(n.from,n.to);return n.from+(0,r.Gz)(d,f,e.state.tabSize)}function qt(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==Se.Text))return e;return n}function Bt(e,t,n,a){let l=e.state.doc.lineAt(t.head),f=e.bidiSpans(l),d=e.textDirectionAt(l.from);for(let h=t,p=null;;){let t=wt(l,f,d,h,n),y=bt;if(!t){if(l.number==(n?e.state.doc.lines:1))return h;y="\n",l=e.state.doc.line(l.number+(n?1:-1)),f=e.bidiSpans(l),t=r.jT.cursor(n?l.from:l.to)}if(p){if(!p(y))return h}else{if(!a)return t;p=a(y)}h=t}}function Ut(e,t,n){for(;;){let r=0;for(let a of e)a.between(t-1,t+1,((e,a,l)=>{if(t>e&&t<a){let l=r||n||(t-e<a-t?-1:1);t=l<0?e:a,r=l}}));if(!r)return t}}function Ht(e,t,n){let a=Ut(e.state.facet(et).map((t=>t(e))),n.from,t.head>n.from?-1:1);return a==n.from?n:r.jT.cursor(a,a<n.from?1:-1)}class zt{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(t,n)=>{this.ignoreDuringComposition(n)||"keydown"==n.type&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(n.type,e,n)?n.preventDefault():t(e,n))};for(let n in Xt){let r=Xt[n];e.contentDOM.addEventListener(n,(n=>{Yt(e,n)&&t(r,n)}),Jt[n]),this.registeredEvents.push(n)}e.scrollDOM.addEventListener("mousedown",(n=>{if(n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(Xt.mousedown,n),!n.defaultPrevented&&2==n.button)){let t=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout((()=>e.contentDOM.style.minHeight=t),200)}})),e.scrollDOM.addEventListener("drop",(n=>{n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(Xt.drop,n)})),oe.chrome&&102==oe.chrome_version&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,oe.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;this.customHandlers=[];for(let a of t)if(r=null===(n=a.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:a.value,handlers:r});for(let t in r)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(n=>{Yt(e,n)&&this.runCustomHandlers(t,e,n)&&n.preventDefault()})))}}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let a=r.handlers[e];if(a)try{if(a.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(e){logException(t.state,e)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(t){logException(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(27!=t.keyCode&&Zt.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0),oe.android&&oe.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!oe.ios||t.synthetic||t.altKey||t.metaKey||!((n=Vt.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||Wt.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey))&&(this.pendingIOSKey=n||t,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,N(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(oe.safari&&!oe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Vt=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Wt="dthko",Zt=[16,17,18,20,91,92,224,225];function Gt(e){return.7*Math.max(0,e)+8}class Kt{constructor(e,t,n,a){this.view=e,this.style=n,this.mustSelect=a,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=function(e){let t=e.ownerDocument;for(let n=e.parentNode;n&&n!=t.body;)if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}return null}(e.contentDOM),this.atoms=e.state.facet(et).map((t=>t(e)));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(r.yy.allowMultipleSelections)&&function(e,t){let n=e.state.facet(Ie);return n.length?n[0](t):oe.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let n=e.state.facet(Me);return n.length?n[0](t):oe.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=_(e.root);if(!r||0==r.rangeCount)return!0;let a=r.getRangeAt(0).getClientRects();for(let e=0;e<a.length;e++){let n=a[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=dn(t))&&null}start(e){!1===this.dragging&&(e.preventDefault(),this.select(e))}move(e){var t;if(0==e.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=e);let n=0,r=0,a=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},l=nt(this.view);e.clientX-l.left<=a.left+6?n=-Gt(a.left-e.clientX):e.clientX+l.right>=a.right-6&&(n=Gt(e.clientX-a.right)),e.clientY-l.top<=a.top+6?r=-Gt(a.top-e.clientY):e.clientY+l.bottom>=a.bottom-6&&(r=Gt(e.clientY-a.bottom)),this.setScrollSpeed(n,r)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let a=e.ranges[n],l=null;if(a.empty){let e=Ut(this.atoms,a.from,0);e!=a.from&&(l=r.jT.cursor(e,-1))}else{let e=Ut(this.atoms,a.from,-1),t=Ut(this.atoms,a.to,1);e==a.from&&t==a.to||(l=r.jT.range(a.from==a.anchor?e:t,a.from==a.head?e:t))}l&&(t||(t=e.ranges.slice()),t[n]=l)}return t?r.jT.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection)&&n.main.assoc==t.state.selection.main.assoc||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function Yt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=U.get(r))&&n.ignoreEvent(t))return!1;return!0}const Xt=Object.create(null),Jt=Object.create(null),Qt=oe.ie&&oe.ie_version<15||oe.ios&&oe.webkit_version<604;function en(e,t){let n,{state:a}=e,l=1,f=a.toText(t),d=f.lines==a.selection.ranges.length;if(null!=pn&&a.selection.ranges.every((e=>e.empty))&&pn==f.toString()){let e=-1;n=a.changeByRange((n=>{let h=a.doc.lineAt(n.from);if(h.from==e)return{range:n};e=h.from;let p=a.toText((d?f.line(l++).text:t)+a.lineBreak);return{changes:{from:h.from,insert:p},range:r.jT.cursor(n.from+p.length)}}))}else n=d?a.changeByRange((e=>{let t=f.line(l++);return{changes:{from:e.from,to:e.to,insert:t.text},range:r.jT.cursor(e.from+t.length)}})):a.replaceSelection(f);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function tn(e,t,n,a){if(1==a)return r.jT.cursor(t,n);if(2==a)return function(e,t,n=1){let a=e.charCategorizer(t),l=e.doc.lineAt(t),f=t-l.from;if(0==l.length)return r.jT.cursor(t);0==f?n=1:f==l.length&&(n=-1);let d=f,h=f;n<0?d=(0,r.cp)(l.text,f,!1):h=(0,r.cp)(l.text,f);let p=a(l.text.slice(d,h));for(;d>0;){let e=(0,r.cp)(l.text,d,!1);if(a(l.text.slice(e,d))!=p)break;d=e}for(;h<l.length;){let e=(0,r.cp)(l.text,h);if(a(l.text.slice(h,e))!=p)break;h=e}return r.jT.range(d+l.from,h+l.from)}(e.state,t,n);{let n=Te.find(e.docView,t),a=e.state.doc.lineAt(n?n.posAtEnd:t),l=n?n.posAtStart:a.from,f=n?n.posAtEnd:a.to;return f<e.state.doc.length&&f==a.to&&f++,r.jT.range(l,f)}}Xt.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode&&(e.inputState.lastEscPress=Date.now())},Xt.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Xt.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Jt.touchstart=Jt.touchmove={passive:!0},Xt.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of e.state.facet(Le))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=an(e,t),a=dn(t),l=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),l=l.map(e.changes))},get(t,f,d){let h,p=an(e,t),y=tn(e,p.pos,p.bias,a);if(n.pos!=p.pos&&!f){let t=tn(e,n.pos,n.bias,a),l=Math.min(t.from,y.from),f=Math.max(t.to,y.to);y=l<y.from?r.jT.range(l,f):r.jT.range(f,l)}return f?l.replaceRange(l.main.extend(y.from,y.to)):d&&1==a&&l.ranges.length>1&&(h=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:a,to:l}=e.ranges[n];if(a<=t&&l>=t)return r.jT.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(l,p.pos))?h:d?l.addRange(y):r.jT.create([y])}}}(e,t)),n){let r=e.root.activeElement!=e.contentDOM;e.inputState.startMouseSelection(new Kt(e,t,n,r)),r&&e.observer.ignore((()=>M(e.contentDOM))),e.inputState.mouseSelection&&e.inputState.mouseSelection.start(t)}};let nn=(e,t)=>e>=t.top&&e<=t.bottom,rn=(e,t,n)=>nn(t,n)&&e>=n.left&&e<=n.right;function on(e,t,n,r){let a=Te.find(e.docView,t);if(!a)return 1;let l=t-a.posAtStart;if(0==l)return 1;if(l==a.length)return-1;let f=a.coordsAt(l,-1);if(f&&rn(n,r,f))return-1;let d=a.coordsAt(l,1);return d&&rn(n,r,d)?1:f&&nn(r,f)?-1:1}function an(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:on(e,n,t.clientX,t.clientY)}}const sn=oe.ie&&oe.ie_version<=11;let ln=null,cn=0,un=0;function dn(e){if(!sn)return e.detail;let t=ln,n=un;return ln=e,un=Date.now(),cn=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(cn+1)%3:1}function hn(e,t,n,r){if(!n)return;let a=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:l}=e.inputState,f=r&&l&&l.dragging&&l.dragMove?{from:l.dragging.from,to:l.dragging.to}:null,d={from:a,insert:n},h=e.state.changes(f?[f,d]:d);e.focus(),e.dispatch({changes:h,selection:{anchor:h.mapPos(a,-1),head:h.mapPos(a,1)},userEvent:f?"move.drop":"input.drop"})}Xt.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},Xt.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),a=0,l=()=>{++a==n.length&&hn(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=l,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),l()},t.readAsText(n[e])}}else hn(e,t,t.dataTransfer.getData("Text"),!0)},Xt.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=Qt?null:t.clipboardData;n?(en(e,n.getData("text/plain")||n.getData("text/uri-text")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),en(e,n.value)}),50)}(e)};let pn=null;Xt.copy=Xt.cut=(e,t)=>{let{text:n,ranges:r,linewise:a}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let a=-1;for(let{from:r}of e.selection.ranges){let l=e.doc.lineAt(r);l.number>a&&(t.push(l.text),n.push({from:l.from,to:Math.min(e.doc.length,l.to+1)})),a=l.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!a)return;pn=a?n:null;let l=Qt?null:t.clipboardData;l?(t.preventDefault(),l.clearData(),l.setData("text/plain",n)):function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,n),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const mn=r.q6.define();function gn(e,t){let n=[];for(let r of e.facet(Be)){let a=r(e,t);a&&n.push(a)}return n?e.update({effects:n,annotations:mn.of(!0)}):null}function vn(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=gn(e.state,t);n?e.dispatch(n):e.update([])}}),10)}Xt.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),vn(e)},Xt.blur=e=>{e.observer.clearSelectionRange(),vn(e)},Xt.compositionstart=Xt.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},Xt.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,oe.chrome&&oe.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])}),50)},Xt.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Xt.beforeinput=(e,t)=>{var n;let r;if(oe.chrome&&oe.android&&(r=Vt.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const yn=["pre-wrap","normal","pre-line","break-spaces"];class bn{constructor(e){this.lineWrapping=e,this.doc=r.xv.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return yn.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,a,l){let f=yn.indexOf(e)>-1,d=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=f;if(this.lineWrapping=f,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=a,d){this.heightSamples={};for(let e=0;e<l.length;e++){let t=l[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return d}}class wn{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class xn{constructor(e,t,n,r,a){this.from=e,this.length=t,this.top=n,this.height=r,this._content=a}get type(){return"number"==typeof this._content?Se.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Oe?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new xn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var _n=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(_n||(_n={}));const Sn=.001;class kn{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Sn&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return kn.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let a=this,l=n.doc;for(let f=r.length-1;f>=0;f--){let{fromA:d,toA:h,fromB:p,toB:y}=r[f],w=a.lineAt(d,_n.ByPosNoHeight,n.setDoc(t),0,0),x=w.to>=h?w:a.lineAt(h,_n.ByPosNoHeight,n,0,0);for(y+=x.to-h,h=x.to;f>0&&w.from<=r[f-1].toA;)d=r[f-1].fromA,p=r[f-1].fromB,f--,d<w.from&&(w=a.lineAt(d,_n.ByPosNoHeight,n,0,0));p+=w.from-d,d=w.from;let _=Tn.build(n.setDoc(l),e,p,y);a=a.replace(d,h,_)}return a.updateHeight(n,0)}static empty(){return new En(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,a=0;for(;;)if(t==n)if(r>2*a){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),n+=1+a.break,r-=a.size}else{if(!(a>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,a-=t.size}}else if(r<a){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(a+=t.size)}let l=0;return null==e[t-1]?(l=1,t--):null==e[t]&&(l=1,n++),new jn(kn.of(e.slice(0,t)),l,kn.of(e.slice(n)))}}kn.prototype.size=1;class Cn extends kn{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new xn(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,a){return this.blockAt(0,n,r,a)}forEachLine(e,t,n,r,a,l){e<=a+this.length&&t>=a&&l(this.blockAt(0,n,r,a))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class En extends Cn{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new xn(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof En||r instanceof On&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof On?r=new En(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):kn.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class On extends kn{constructor(e){super(e,0)}heightMetrics(e,t){let n,r=e.doc.lineAt(t).number,a=e.doc.lineAt(t+this.length).number,l=a-r+1,f=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*l);n=t/l,this.length>l+1&&(f=(this.height-t)/(this.length-l-1))}else n=this.height/l;return{firstLine:r,lastLine:a,perLine:n,perChar:f}}blockAt(e,t,n,r){let{firstLine:a,lastLine:l,perLine:f,perChar:d}=this.heightMetrics(t,r);if(t.lineWrapping){let a=r+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),l=t.doc.lineAt(a),h=f+l.length*d,p=Math.max(n,e-h/2);return new xn(l.from,l.length,p,h,0)}{let r=Math.max(0,Math.min(l-a,Math.floor((e-n)/f))),{from:d,length:h}=t.doc.line(a+r);return new xn(d,h,n+f*r,f,0)}}lineAt(e,t,n,r,a){if(t==_n.ByHeight)return this.blockAt(e,n,r,a);if(t==_n.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new xn(t,r-t,0,0,0)}let{firstLine:l,perLine:f,perChar:d}=this.heightMetrics(n,a),h=n.doc.lineAt(e),p=f+h.length*d,y=h.number-l,w=r+f*y+d*(h.from-a-y);return new xn(h.from,h.length,Math.max(r,Math.min(w,r+this.height-p)),p,0)}forEachLine(e,t,n,r,a,l){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:f,perLine:d,perChar:h}=this.heightMetrics(n,a);for(let p=e,y=r;p<=t;){let t=n.doc.lineAt(p);if(p==e){let n=t.number-f;y+=d*n+h*(e-a-n)}let r=d+h*t.length;l(new xn(t.from,t.length,y,r,0)),y+=r,p=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof On?n[n.length-1]=new On(e.length+r):n.push(null,new On(r-1))}if(e>0){let t=n[0];t instanceof On?n[0]=new On(e+t.length):n.unshift(new On(e-1),null)}return kn.of(n)}decomposeLeft(e,t){t.push(new On(e-1),null)}decomposeRight(e,t){t.push(null,new On(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let a=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],l=Math.max(t,r.from),f=-1;for(r.from>t&&n.push(new On(r.from-t-1).updateHeight(e,t));l<=a&&r.more;){let t=e.doc.lineAt(l).length;n.length&&n.push(null);let a=r.heights[r.index++];-1==f?f=a:Math.abs(a-f)>=Sn&&(f=-2);let d=new En(t,a);d.outdated=!1,n.push(d),l+=t+1}l<=a&&n.push(null,new On(a-l).updateHeight(e,l));let d=kn.of(n);return(f<0||Math.abs(d.height-this.height)>=Sn||Math.abs(f-this.heightMetrics(e,t).perLine)>=Sn)&&(e.heightChanged=!0),d}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class jn extends kn{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let a=n+this.left.height;return e<a?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,a,r+this.left.length+this.break)}lineAt(e,t,n,r,a){let l=r+this.left.height,f=a+this.left.length+this.break,d=t==_n.ByHeight?e<l:e<f,h=d?this.left.lineAt(e,t,n,r,a):this.right.lineAt(e,t,n,l,f);if(this.break||(d?h.to<f:h.from>f))return h;let p=t==_n.ByPosNoHeight?_n.ByPosNoHeight:_n.ByPos;return d?h.join(this.right.lineAt(f,p,n,l,f)):this.left.lineAt(f,p,n,r,a).join(h)}forEachLine(e,t,n,r,a,l){let f=r+this.left.height,d=a+this.left.length+this.break;if(this.break)e<d&&this.left.forEachLine(e,t,n,r,a,l),t>=d&&this.right.forEachLine(e,t,n,f,d,l);else{let h=this.lineAt(d,_n.ByPos,n,r,a);e<h.from&&this.left.forEachLine(e,h.from-1,n,r,a,l),h.to>=e&&h.from<=t&&l(h),t>h.to&&this.right.forEachLine(h.to+1,t,n,f,d,l)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let a=[];e>0&&this.decomposeLeft(e,a);let l=a.length;for(let e of n)a.push(e);if(e>0&&$n(a,l-1),t<this.length){let e=a.length;this.decomposeRight(t,a),$n(a,e)}return kn.of(a)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?kn.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:a,right:l}=this,f=t+a.length+this.break,d=null;return r&&r.from<=t+a.length&&r.more?d=a=a.updateHeight(e,t,n,r):a.updateHeight(e,t,n),r&&r.from<=f+l.length&&r.more?d=l=l.updateHeight(e,f,n,r):l.updateHeight(e,f,n),d?this.balanced(a,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function $n(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof On&&(r=e[t+1])instanceof On&&e.splice(t-1,3,new On(n.length+1+r.length))}class Tn{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof En?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new En(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let l=t-e;n.block?this.addBlock(new Cn(l,r,n)):(l||a||r>=5)&&this.addLineDeco(r,a,l)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new En(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new On(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof En)return e;let t=new En(0,-1);return this.nodes.push(t),t}addBlock(e){var t;this.enterLine();let n=null===(t=e.deco)||void 0===t?void 0:t.type;n!=Se.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n!=Se.WidgetBefore&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof En||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new En(0,-1));let n=e;for(let e of this.nodes)e instanceof En&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,a){let l=new Tn(n,e);return r.Xs.spans(t,n,a,l,0),l.finish(n)}}class An{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&$e(e,t,this.changes,5)}}function Pn(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,a=r.defaultView||window,l=Math.max(0,n.left),f=Math.min(a.innerWidth,n.right),d=Math.max(0,n.top),h=Math.min(a.innerHeight,n.bottom);for(let t=e.parentNode;t&&t!=r.body;)if(1==t.nodeType){let n=t,r=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=r.overflow){let r=n.getBoundingClientRect();l=Math.max(l,r.left),f=Math.min(f,r.right),d=Math.max(d,r.top),h=t==e.parentNode?r.bottom:Math.min(h,r.bottom)}t="absolute"==r.position||"fixed"==r.position?n.offsetParent:n.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:l-n.left,right:Math.max(l,f)-n.left,top:d-(n.top+t),bottom:Math.max(d,h)-(n.top+t)}}function Dn(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class Rn{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],a=t[n];if(r.from!=a.from||r.to!=a.to||r.size!=a.size)return!1}return!0}draw(e){return ke.replace({widget:new In(this.size,e)}).range(this.from,this.to)}}class In extends _e{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Mn{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Bn,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=at.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Je).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new bn(t),this.stateDeco=e.facet(Qe).filter((e=>"function"!=typeof e)),this.heightMap=kn.empty().applyChanges(this.stateDeco,r.xv.empty,this.heightOracle.setDoc(e.doc),[new it(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ke.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new Ln(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?Bn:new Un(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:Hn(e,this.scaler))}))}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Qe).filter((e=>"function"!=typeof e));let a=e.changedRanges,l=it.extendWithRanges(a,function(e,t,n){let a=new An;return r.Xs.compare(e,t,n,a,0),a.changes}(n,this.stateDeco,e?e.changes:r.as.empty(this.state.doc.length))),f=this.heightMap.height,d=this.scrolledToBottom?null:this.lineBlockAtHeight(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),this.heightMap.height!=f&&(e.flags|=2),d?(this.scrollAnchorPos=e.changes.mapPos(d.from,-1),this.scrollAnchorHeight=d.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let p=!e.changes.empty||2&e.flags||h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,this.updateForViewport(),p&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(He)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),a=this.heightOracle,l=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?at.RTL:at.LTR;let f=this.heightOracle.mustRefreshForWrapping(l),d=t.getBoundingClientRect(),h=f||this.mustMeasureContent||this.contentDOMHeight!=d.height;this.contentDOMHeight=d.height,this.mustMeasureContent=!1;let p=0,y=0,w=parseInt(n.paddingTop)||0,x=parseInt(n.paddingBottom)||0;this.paddingTop==w&&this.paddingBottom==x||(this.paddingTop=w,this.paddingBottom=x,p|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(a.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,p|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=this.scrollTop>e.scrollDOM.scrollHeight-e.scrollDOM.clientHeight-4;let _=(this.printing?Dn:Pn)(t,this.paddingTop),S=_.top-this.pixelViewport.top,k=_.bottom-this.pixelViewport.bottom;this.pixelViewport=_;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let E=d.width;if(this.contentDOMWidth==E&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=d.width,this.editorHeight=e.scrollDOM.clientHeight,p|=8),h){let t=e.docView.measureVisibleLineHeights(this.viewport);if(a.mustRefreshForHeights(t)&&(f=!0),f||a.lineWrapping&&Math.abs(E-this.contentDOMWidth)>a.charWidth){let{lineHeight:n,charWidth:r,textHeight:d}=e.docView.measureTextSize();f=n>0&&a.refresh(l,n,r,d,E/r,t),f&&(e.docView.minWidth=0,p|=8)}S>0&&k>0?y=Math.max(S,k):S<0&&k<0&&(y=Math.min(S,k)),a.heightChanged=!1;for(let n of this.viewports){let l=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(f?kn.empty().applyChanges(this.stateDeco,r.xv.empty,this.heightOracle,[new it(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(a,0,f,new wn(n.from,l))}a.heightChanged&&(p|=2)}let O=!this.viewportIsAppropriate(this.viewport,y)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return O&&(this.viewport=this.getViewport(y,this.scrollTarget)),this.updateForViewport(),(2&p||O)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(f?[]:this.lineGaps,e)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,a=this.heightOracle,{visibleTop:l,visibleBottom:f}=this,d=new Ln(r.lineAt(l-1e3*n,_n.ByHeight,a,0,0).from,r.lineAt(f+1e3*(1-n),_n.ByHeight,a,0,0).to);if(t){let{head:e}=t.range;if(e<d.from||e>d.to){let n,l=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=r.lineAt(e,_n.ByPos,a,0,0);n="center"==t.y?(f.top+f.bottom)/2-l/2:"start"==t.y||"nearest"==t.y&&e<d.from?f.top:f.bottom-l,d=new Ln(r.lineAt(n-500,_n.ByHeight,a,0,0).from,r.lineAt(n+l+500,_n.ByHeight,a,0,0).to)}}return d}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Ln(this.heightMap.lineAt(n,_n.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,_n.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,_n.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(t,_n.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:f}=this;return(0==e||r<=l-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||a>=f+Math.max(10,Math.min(n,250)))&&r>l-2e3&&a<f+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new Rn(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,a=n?1e4:2e3,l=a>>1,f=a<<1;if(this.defaultTextDirection!=at.LTR&&!n)return[];let d=[],h=(a,f,p,y)=>{if(f-a<l)return;let w=this.state.selection.main,x=[w.from];w.empty||x.push(w.to);for(let e of x)if(e>a&&e<f)return h(a,e-10,p,y),void h(e+10,f,p,y);let _=function(e,t){for(let n of e)if(t(n))return n;return}(e,(e=>e.from>=p.from&&e.to<=p.to&&Math.abs(e.from-a)<l&&Math.abs(e.to-f)<l&&!x.some((t=>e.from<t&&e.to>t))));if(!_){if(f<p.to&&t&&n&&t.visibleRanges.some((e=>e.from<=f&&e.to>=f))){let e=t.moveToLineBoundary(r.jT.cursor(f),!1,!0).head;e>a&&(f=e)}_=new Rn(a,f,this.gapSize(p,a,f,y))}d.push(_)};for(let e of this.viewportLines){if(e.length<f)continue;let t=Nn(e.from,e.to,this.stateDeco);if(t.total<f)continue;let r,l,d=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,f,h=a/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=d){let r=qn(t,d),a=((this.visibleBottom-this.visibleTop)/2+h)/e.height;n=r-a,f=r+a}else n=(this.visibleTop-e.top-h)/e.height,f=(this.visibleBottom-e.top+h)/e.height;r=Fn(t,n),l=Fn(t,f)}else{let e,n,f=t.total*this.heightOracle.charWidth,h=a*this.heightOracle.charWidth;if(null!=d){let r=qn(t,d),a=((this.pixelViewport.right-this.pixelViewport.left)/2+h)/f;e=r-a,n=r+a}else e=(this.pixelViewport.left-h)/f,n=(this.pixelViewport.right+h)/f;r=Fn(t,e),l=Fn(t,n)}r>e.from&&h(e.from,r,e,t),l<e.to&&h(l,e.to,e,t)}return d}gapSize(e,t,n,r){let a=qn(r,n)-qn(r,t);return this.heightOracle.lineWrapping?e.height*a:r.total*this.heightOracle.charWidth*a}updateLineGaps(e){Rn.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ke.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];r.Xs.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||Hn(this.heightMap.lineAt(e,_n.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Hn(this.heightMap.lineAt(this.scaler.fromDOM(e),_n.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return Hn(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ln{constructor(e,t){this.from=e,this.to=t}}function Nn(e,t,n){let a=[],l=e,f=0;return r.Xs.spans(n,e,t,{span(){},point(e,t){e>l&&(a.push({from:l,to:e}),f+=e-l),l=t}},20),l<t&&(a.push({from:l,to:t}),f+=t-l),{total:f,ranges:a}}function Fn({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:a}=t[e],l=a-n;if(r<=l)return n+r;r-=l}}function qn(e,t){let n=0;for(let{from:r,to:a}of e.ranges){if(t<=a){n+=t-r;break}n+=a-r}return n/e.total}const Bn={toDOM(e){return e},fromDOM(e){return e},scale:1};class Un{constructor(e,t,n){let r=0,a=0,l=0;this.viewports=n.map((({from:n,to:a})=>{let l=t.lineAt(n,_n.ByPos,e,0,0).top,f=t.lineAt(a,_n.ByPos,e,0,0).bottom;return r+=f-l,{from:n,to:a,top:l,bottom:f,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=l+(e.top-a)*this.scale,l=e.domBottom=e.domTop+(e.bottom-e.top),a=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return r+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,r=a.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return n+(e-r)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,r=a.domBottom}}}function Hn(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new xn(e.from,e.length,n,r-n,Array.isArray(e._content)?e._content.map((e=>Hn(e,t))):e._content)}const zn=r.r$.define({combine:e=>e.join(" ")}),Vn=r.r$.define({combine:e=>e.indexOf(!0)>-1}),Wn=a.V.newName(),Zn=a.V.newName(),Gn=a.V.newName(),Kn={"&light":"."+Zn,"&dark":"."+Gn};function Yn(e,t,n){return new a.V(t,{finish(t){return/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t}})}const Xn=Yn("."+Wn,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Kn);class Jn{constructor(e,t,n,a){this.typeOver=a,this.bounds=null,this.text="";let{impreciseHead:l,impreciseAnchor:f}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=l||f?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:a,focusOffset:l}=e.observer.selectionRange;n&&(t.push(new kt(n,r)),a==n&&l==r||t.push(new kt(a,l)));return t}(e),n=new _t(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,a=2==e.length?e[1].pos:n;return n>-1&&a>-1?r.jT.single(n+t,a+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=l&&l.node==t.focusNode&&l.offset==t.focusOffset||!S(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),a=f&&f.node==t.anchorNode&&f.offset==t.anchorOffset||!S(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);this.newSel=r.jT.single(a,n)}}}function Qn(e,t){let n,{newSel:a}=t,l=e.state.selection.main,f=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:a,to:d}=t.bounds,h=l.from,p=null;(8===f||oe.android&&t.text.length<d-a)&&(h=l.to,p="end");let y=function(e,t,n,r){let a=Math.min(e.length,t.length),l=0;for(;l<a&&e.charCodeAt(l)==t.charCodeAt(l);)l++;if(l==a&&e.length==t.length)return null;let f=e.length,d=t.length;for(;f>0&&d>0&&e.charCodeAt(f-1)==t.charCodeAt(d-1);)f--,d--;if("end"==r){n-=f+Math.max(0,l-Math.min(f,d))-l}if(f<l&&e.length<t.length){l-=n<=l&&n>=f?l-n:0,d=l+(d-f),f=l}else if(d<l){l-=n<=l&&n>=d?l-n:0,f=l+(f-d),d=l}return{from:l,toA:f,toB:d}}(e.state.doc.sliceString(a,d,xt),t.text,h-a,p);y&&(oe.chrome&&13==f&&y.toB==y.from+2&&t.text.slice(y.from,y.toB)==xt+xt&&y.toB--,n={from:a+y.from,to:a+y.toA,insert:r.xv.of(t.text.slice(y.from,y.toB).split(xt))})}else a&&(!e.hasFocus&&e.state.facet(We)||a.main.eq(l))&&(a=null);if(!n&&!a)return!1;if(!n&&t.typeOver&&!l.empty&&a&&a.main.empty?n={from:l.from,to:l.to,insert:e.state.doc.slice(l.from,l.to)}:n&&n.from>=l.from&&n.to<=l.to&&(n.from!=l.from||n.to!=l.to)&&l.to-l.from-(n.to-n.from)<=4?n={from:l.from,to:l.to,insert:e.state.doc.slice(l.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,l.to))}:(oe.mac||oe.android)&&n&&n.from==n.to&&n.from==l.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(a&&2==n.insert.length&&(a=r.jT.single(a.main.anchor-1,a.main.head-1)),n={from:l.from,to:l.to,insert:r.xv.of([" "])}):oe.chrome&&n&&n.from==n.to&&n.from==l.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(a&&(a=r.jT.single(a.main.anchor-1,a.main.head-1)),n={from:l.from,to:l.to,insert:r.xv.of([" "])}),n){let t=e.state;if(oe.ios&&e.inputState.flushIOSKey(e))return!0;if(oe.android&&(n.from==l.from&&n.to==l.to&&1==n.insert.length&&2==n.insert.lines&&N(e.contentDOM,"Enter",13)||(n.from==l.from-1&&n.to==l.to&&0==n.insert.length||8==f&&n.insert.length<n.to-n.from)&&N(e.contentDOM,"Backspace",8)||n.from==l.from&&n.to==l.to+1&&0==n.insert.length&&N(e.contentDOM,"Delete",46)))return!0;let d,h=n.insert.toString();if(e.state.facet(qe).some((t=>t(e,n.from,n.to,h))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,n.from>=l.from&&n.to<=l.to&&n.to-n.from>=(l.to-l.from)/3&&(!a||a.main.empty&&a.main.from==n.from+n.insert.length)&&e.inputState.composing<0){let r=l.from<n.from?t.sliceDoc(l.from,n.from):"",a=l.to>n.to?t.sliceDoc(n.to,l.to):"";d=t.replaceSelection(e.state.toText(r+n.insert.sliceString(0,void 0,e.state.lineBreak)+a))}else{let f=t.changes(n),h=a&&a.main.to<=f.newLength?a.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=l.to&&n.to>=l.to-10){let a=e.state.sliceDoc(n.from,n.to),p=Ot(e)||e.state.doc.lineAt(l.head),y=l.to-n.to,w=l.to-l.from;d=t.changeByRange((d=>{if(d.from==l.from&&d.to==l.to)return{changes:f,range:h||d.map(f)};let x=d.to-y,_=x-a.length;if(d.to-d.from!=w||e.state.sliceDoc(_,x)!=a||p&&d.to>=p.from&&d.from<=p.to)return{range:d};let S=t.changes({from:_,to:x,insert:n.insert}),k=d.to-l.to;return{changes:S,range:h?r.jT.range(Math.max(0,h.anchor+k),Math.max(0,h.head+k)):d.map(S)}}))}else d={changes:f,selection:h&&t.selection.replaceRange(h)}}let p="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,p+=".compose",e.inputState.compositionFirstChange&&(p+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(d,{scrollIntoView:!0,userEvent:p}),!0}if(a&&!a.main.eq(l)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:a,scrollIntoView:t,userEvent:n}),!0}return!1}const er={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},tr=oe.ie&&oe.ie_version<=11;class nr{constructor(e){this.view=e,this.active=!1,this.selectionRange=new D,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(oe.ie&&oe.ie_version<=11||oe.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),tr&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver((()=>this.view.requestMeasure())),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(We)?n.root.activeElement!=this.dom:!k(n.dom,r))return;let a=r.anchorNode&&n.docView.nearest(r.anchorNode);a&&a.ignoreEvent(e)?t||(this.selectionChanged=!1):(oe.ie&&oe.ie_version<=11||oe.android&&oe.chrome)&&!n.state.selection.main.empty&&r.focusNode&&E(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=oe.safari&&11==e.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,a=t.startOffset,l=t.endContainer,f=t.endOffset,d=e.docView.domAtPos(e.state.selection.main.anchor);E(d.node,d.offset,l,f)&&([r,a,l,f]=[l,f,r,a]);return{anchorNode:r,anchorOffset:a,focusNode:l,focusOffset:f}}(this.view)||_(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=k(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(r=Math.min(r,T(n));;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=T(n))}else{if(n==e)return!0;r=O(n),n=n.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,er),tr&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),tr&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&N(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let a of e){let e=this.readMutation(a);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&k(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Jn(this.view,e,t,n))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let n=this.view.state,r=Qn(this.view,t);return this.view.state==n&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let n=rr(t,e.previousSibling||e.target.previousSibling,-1),r=rr(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n,r;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),null===(r=this.resizeContent)||void 0===r||r.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function rr(e,t,n){for(;t;){let r=U.get(t);if(r&&r.parent==e)return r;let a=t.parentNode;t=a!=e.dom?a:n>0?t.nextSibling:t.previousSibling}return null}class ir{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new Mn(e.state||r.yy.create(e)),this.plugins=this.state.facet(Ge).map((e=>new Ye(e)));for(let e of this.plugins)e.update(this);this.observer=new nr(this),this.inputState=new zt(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Ct(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let t=1==e.length&&e[0]instanceof r.YW?e[0]:this.state.update(...e);this._dispatch(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,a=!1,l=this.state;for(let t of e){if(t.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=t.state}if(this.destroyed)return void(this.viewState.state=l);let f=this.hasFocus,d=0,h=null;e.some((e=>e.annotation(mn)))?(this.inputState.notifiedFocused=f,d=1):f!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=f,h=gn(l,f),h||(d=1));let p=this.observer.delayedAndroidKey,y=null;if(p?(this.observer.clearDelayedAndroidKey(),y=this.observer.readChange(),(y&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(y=null)):this.observer.clear(),l.facet(r.yy.phrases)!=this.state.facet(r.yy.phrases))return this.setState(l);t=ot.create(this,l,e),t.flags|=d;let w=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(w&&(w=w.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;w=new ze(e.empty?e:r.jT.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Ve)&&(w=e.value)}this.viewState.update(t,w),this.bidiCache=sr.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(rt)!=this.styleModules&&this.mountStyles(),a=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(zn)!=t.state.facet(zn)&&(this.viewState.mustMeasureContent=!0),(n||a||w||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(Fe))e(t);(h||y)&&Promise.resolve().then((()=>{h&&this.state==h.startState&&this.dispatch(h),y&&!Qn(this,y)&&p.force&&N(this.contentDOM,p.key,p.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Mn(e),this.plugins=e.facet(Ge).map((e=>new Ye(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new Ct(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Ge),n=e.state.facet(Ge);if(t!=n){let r=[];for(let a of n){let n=t.indexOf(a);if(n<0)r.push(new Ye(a));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,{scrollTop:r}=n,{scrollAnchorPos:a,scrollAnchorHeight:l}=this.viewState;if(this.viewState.scrollAnchorHeight=-1,l<0||r!=this.viewState.scrollTop)if(r>n.scrollHeight-n.clientHeight-4)a=-1,l=this.viewState.heightMap.height;else{let e=this.viewState.lineBlockAtHeight(r);a=e.from,l=e.top}try{for(let e=0;;e++){this.updateState=1;let f=this.viewport,d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];4&d||([this.measureRequests,h]=[h,this.measureRequests]);let p=h.map((e=>{try{return e.read(this)}catch(e){return logException(this.state,e),ar}})),y=ot.create(this,this.state,[]),w=!1,x=!1;y.flags|=d,t?t.flags|=d:t=y,this.updateState=2,y.empty||(this.updatePlugins(y),this.inputState.update(y),this.updateAttrs(),w=this.docView.update(y));for(let e=0;e<h.length;e++)if(p[e]!=ar)try{let t=h[e];t.write&&t.write(p[e],this)}catch(e){logException(this.state,e)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,x=!0;else if(l>-1){let e=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-l;(e>1||e<-1)&&(n.scrollTop=r+e,x=!0)}if(w&&this.docView.updateSelection(!0),this.viewport.from==f.from&&this.viewport.to==f.to&&!x&&0==this.measureRequests.length)break;l=-1}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(Fe))e(t)}get themeClasses(){return Wn+" "+(this.state.facet(Vn)?Gn:Zn)+" "+this.state.facet(zn)}updateAttrs(){let e=lr(this,Xe,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(We)?"true":"false",class:"cm-content",style:`${oe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),lr(this,Je,t);let n=this.observer.ignore((()=>{let n=xe(this.contentDOM,this.contentAttrs,t),r=xe(this.dom,this.editorAttrs,e);return n||r}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(ir.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(rt),a.V.mount(this.root,this.styleModules.concat(Xn).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Ht(this,e,Bt(this,e,t,n))}moveByGroup(e,t){return Ht(this,e,Bt(this,e,t,(t=>function(e,t,n){let a=e.state.charCategorizer(t),l=a(n);return e=>{let t=a(e);return l==r.D0.Space&&(l=t),l==t}}(this,e.head,t))))}moveToLineBoundary(e,t,n=!0){return function(e,t,n,a){let l=qt(e,t.head),f=a&&l.type==Se.Text&&(e.lineWrapping||l.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>l.from?t.head-1:t.head):null;if(f){let t=e.dom.getBoundingClientRect(),a=e.textDirectionAt(l.from),d=e.posAtCoords({x:n==(a==at.LTR)?t.right-1:t.left+1,y:(f.top+f.bottom)/2});if(null!=d)return r.jT.cursor(d,n?-1:1)}return r.jT.cursor(n?l.to:l.from,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return Ht(this,e,function(e,t,n,a){let l=t.head,f=n?1:-1;if(l==(n?e.state.doc.length:0))return r.jT.cursor(l,t.assoc);let d,h=t.goalColumn,p=e.contentDOM.getBoundingClientRect(),y=e.coordsAtPos(l),w=e.documentTop;if(y)null==h&&(h=y.left-p.left),d=f<0?y.top:y.bottom;else{let t=e.viewState.lineBlockAt(l);null==h&&(h=Math.min(p.right-p.left,e.defaultCharacterWidth*(l-t.from))),d=(f<0?t.top:t.bottom)+w}let x=p.left+h,_=null!=a?a:e.defaultLineHeight>>1;for(let n=0;;n+=10){let a=d+(_+n)*f,y=Nt(e,{x:x,y:a},!1,f);if(a<p.top||a>p.bottom||(f<0?y<l:y>l))return r.jT.cursor(y,t.assoc,void 0,h)}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Nt(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),a=this.bidiSpans(r);return A(n,a[mt.find(a,e-r.from,-1,t)].dir==at.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Ue)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>or)return yt(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let n=vt(e.text,t);return this.bidiCache.push(new sr(e.from,e.to,t,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||oe.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{M(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ve.of(new ze("number"==typeof e?r.jT.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Ke.define((()=>({})),{eventHandlers:e})}static theme(e,t){let n=a.V.newName(),r=[zn.of(n),rt.of(Yn(`.${n}`,e))];return t&&t.dark&&r.push(Vn.of(!0)),r}static baseTheme(e){return r.Wl.lowest(rt.of(Yn("."+Wn,e,Kn)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&U.get(n)||U.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}ir.styleModule=rt,ir.inputHandler=qe,ir.focusChangeEffect=Be,ir.perLineTextDirection=Ue,ir.exceptionSink=Ne,ir.updateListener=Fe,ir.editable=We,ir.mouseSelectionStyle=Le,ir.dragMovesSelection=Me,ir.clickAddsSelectionRange=Ie,ir.decorations=Qe,ir.atomicRanges=et,ir.scrollMargins=tt,ir.darkTheme=Vn,ir.contentAttributes=Je,ir.editorAttributes=Xe,ir.lineWrapping=ir.contentAttributes.of({class:"cm-lineWrapping"}),ir.announce=r.Py.define();const or=4096,ar={};class sr{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:at.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let l=e[a];l.dir!=r||t.touchesRange(l.from,l.to)||n.push(new sr(t.mapPos(l.from,1),t.mapPos(l.to,-1),l.dir,l.order))}return n}}function lr(e,t,n){for(let r=e.state.facet(t),a=r.length-1;a>=0;a--){let t=r[a],l="function"==typeof t?t(e):t;l&&be(l,n)}return n}const cr=oe.mac?"mac":oe.windows?"win":oe.linux?"linux":"key";function ur(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const fr=r.Wl.default(ir.domEventHandlers({keydown(e,t){return yr(pr(t.state),e,t,"editor")}})),dr=r.r$.define({enables:fr}),hr=new WeakMap;function pr(e){let t=e.facet(dr),n=hr.get(t);return n||hr.set(t,n=function(e,t=cr){let n=Object.create(null),r=Object.create(null),a=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},l=(e,r,l,f)=>{var d,h;let p=n[e]||(n[e]=Object.create(null)),y=r.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let r,a,l,f,d=n[n.length-1];"Space"==d&&(d=" ");for(let e=0;e<n.length-1;++e){const d=n[e];if(/^(cmd|meta|m)$/i.test(d))f=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))l=!0;else{if(!/^mod$/i.test(d))throw new Error("Unrecognized modifier name: "+d);"mac"==t?f=!0:a=!0}}return r&&(d="Alt-"+d),a&&(d="Ctrl-"+d),f&&(d="Meta-"+d),l&&(d="Shift-"+d),d}(e,t)));for(let t=1;t<y.length;t++){let n=y.slice(0,t).join(" ");a(n,!0),p[n]||(p[n]={preventDefault:!0,run:[t=>{let r=gr={view:t,prefix:n,scope:e};return setTimeout((()=>{gr==r&&(gr=null)}),vr),!0}]})}let w=y.join(" ");a(w,!1);let x=p[w]||(p[w]={preventDefault:!1,run:(null===(h=null===(d=p._any)||void 0===d?void 0:d.run)||void 0===h?void 0:h.slice())||[]});l&&x.run.push(l),f&&(x.preventDefault=!0)};for(let r of e){let e=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,run:[]});for(let t in e)e[t].run.push(r.any)}let a=r[t]||r.key;if(a)for(let t of e)l(t,a,r.run,r.preventDefault),r.shift&&l(t,"Shift-"+a,r.shift,r.preventDefault)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}function mr(e,t,n){return yr(pr(e.state),t,e,n)}let gr=null;const vr=4e3;function yr(e,t,n,a){let d=function(e){var t=!(y&&(e.ctrlKey||e.altKey||e.metaKey)||p&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?f:l)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),h=(0,r.gm)(d,0),w=(0,r.nZ)(h)==d.length&&" "!=d,x="",_=!1;gr&&gr.view==n&&gr.scope==a&&(x=gr.prefix+" ",(_=Zt.indexOf(t.keyCode)<0)&&(gr=null));let S,k,C=new Set,E=e=>{if(e){for(let r of e.run)if(!C.has(r)&&(C.add(r),r(n,t)))return!0;e.preventDefault&&(_=!0)}return!1},O=e[a];if(O){if(E(O[x+ur(d,t,!w)]))return!0;if(w&&(t.altKey||t.metaKey||t.ctrlKey)&&!(oe.windows&&t.ctrlKey&&t.altKey)&&(S=l[t.keyCode])&&S!=d){if(E(O[x+ur(S,t,!0)]))return!0;if(t.shiftKey&&(k=f[t.keyCode])!=d&&k!=S&&E(O[x+ur(k,t,!1)]))return!0}else if(w&&t.shiftKey&&E(O[x+ur(d,t,!0)]))return!0;if(E(O._any))return!0}return _}class br{constructor(e,t,n,r,a){this.className=e,this.left=t,this.top=n,this.width=r,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let a=wr(e);return[new br(t,r.left-a.left,r.top-a.top,null,r.bottom-r.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let r=Math.max(n.from,e.viewport.from),a=Math.min(n.to,e.viewport.to),l=e.textDirection==at.LTR,f=e.contentDOM,d=f.getBoundingClientRect(),h=wr(e),p=f.querySelector(".cm-line"),y=p&&window.getComputedStyle(p),w=d.left+(y?parseInt(y.paddingLeft)+Math.min(0,parseInt(y.textIndent)):0),x=d.right-(y?parseInt(y.paddingRight):0),_=qt(e,r),S=qt(e,a),k=_.type==Se.Text?_:null,C=S.type==Se.Text?S:null;k&&(e.lineWrapping||_.widgetLineBreaks)&&(k=xr(e,r,k));C&&(e.lineWrapping||S.widgetLineBreaks)&&(C=xr(e,a,C));if(k&&C&&k.from==C.from)return O(j(n.from,n.to,k));{let t=k?j(n.from,null,k):T(_,!1),r=C?j(null,n.to,C):T(S,!0),a=[];return(k||_).to<(C||S).from-(k&&C?1:0)||_.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<r.top?a.push(E(w,t.bottom,x,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==Se.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),O(t).concat(a).concat(O(r))}function E(e,n,r,a){return new br(t,e-h.left,n-h.top-.01,r-e,a-n+.01)}function O({top:e,bottom:t,horizontal:n}){let r=[];for(let a=0;a<n.length;a+=2)r.push(E(n[a],e,n[a+1],t));return r}function j(t,n,r){let a=1e9,f=-1e9,d=[];function h(t,n,h,p,y){let _=e.coordsAtPos(t,t==r.to?-2:2),S=e.coordsAtPos(h,h==r.from?2:-2);_&&S&&(a=Math.min(_.top,S.top,a),f=Math.max(_.bottom,S.bottom,f),y==at.LTR?d.push(l&&n?w:_.left,l&&p?x:S.right):d.push(!l&&p?w:S.left,!l&&n?x:_.right))}let p=null!=t?t:r.from,y=null!=n?n:r.to;for(let r of e.visibleRanges)if(r.to>p&&r.from<y)for(let a=Math.max(r.from,p),l=Math.min(r.to,y);;){let r=e.state.doc.lineAt(a);for(let f of e.bidiSpans(r)){let e=f.from+r.from,d=f.to+r.from;if(e>=l)break;d>a&&h(Math.max(e,a),null==t&&e<=p,Math.min(d,l),null==n&&d>=y,f.dir)}if(a=r.to+1,a>=l)break}return 0==d.length&&h(p,null==t,y,null==n,e.textDirection),{top:a,bottom:f,horizontal:d}}function T(e,t){let n=d.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n)}}function wr(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==at.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function xr(e,t,n){let a=r.jT.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(a,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(a,!0,!0).from),type:Se.Text}}class _r{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Sr)!=e.state.facet(Sr)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(Sr);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>{return n=e,r=this.drawn[t],!(n.constructor==r.constructor&&n.eq(r));var n,r}))){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Sr=r.r$.define();function kr(e){return[Ke.define((t=>new _r(t,e))),Sr.of(e)]}const Cr=!oe.ios;const Er={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Cr&&(Er[".cm-line"].caretColor="transparent !important");const Or=r.Py.define({map(e,t){return null==e?null:t.mapPos(e)}}),jr=r.QQ.define({create(){return null},update(e,t){return null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(Or)?t.value:e),e)}}),$r=Ke.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(jr);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(jr)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(jr),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(jr)!=e&&this.view.dispatch({effects:Or.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Tr(){return[jr,$r]}function Ar(e,t,n,r,a){t.lastIndex=0;for(let l,f=e.iterRange(n,r),d=n;!f.next().done;d+=f.value.length)if(!f.lineBreak)for(;l=t.exec(f.value);)a(d+l.index,l)}class Pr{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:a,maxLength:l=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,n,a)=>r(a,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,r,a)=>{let l=n(e,t,r);l&&a(r,r+e[0].length,l)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,r,a)=>a(r,r+e[0].length,n)}this.boundary=a,this.maxLength=l}createDeco(e){let t=new r.f_,n=t.add.bind(t);for(let{from:t,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:a,to:l}of n)a=Math.max(e.state.doc.lineAt(a).from,a-t),l=Math.min(e.state.doc.lineAt(l).to,l+t),r.length&&r[r.length-1].to>=a?r[r.length-1].to=l:r.push({from:a,to:l});return r}(e,this.maxLength))Ar(e.state.doc,this.regexp,t,r,((t,r)=>this.addMatch(r,e,t,n)));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,a,l,f)=>{f>e.view.viewport.from&&l<e.view.viewport.to&&(n=Math.min(l,n),r=Math.max(f,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let a of e.visibleRanges){let l=Math.max(a.from,n),f=Math.min(a.to,r);if(f>l){let n=e.state.doc.lineAt(l),r=n.to<f?e.state.doc.lineAt(f):n,d=Math.max(a.from,n.from),h=Math.min(a.to,r.to);if(this.boundary){for(;l>n.from;l--)if(this.boundary.test(n.text[l-1-n.from])){d=l;break}for(;f<r.to;f++)if(this.boundary.test(r.text[f-r.from])){h=f;break}}let p,y=[],w=(e,t,n)=>y.push(n.range(e,t));if(n==r)for(this.regexp.lastIndex=d-n.from;(p=this.regexp.exec(n.text))&&p.index<h-n.from;)this.addMatch(p,e,p.index+n.from,w);else Ar(e.state.doc,this.regexp,d,h,((t,n)=>this.addMatch(n,e,t,w)));t=t.update({filterFrom:d,filterTo:h,filter:(e,t)=>e<d||t>h,add:y})}}return t}}const Dr=null!=/x/.unicode?"gu":"g",Rr=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",Dr),Ir={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Mr=null;const Lr=r.r$.define({combine(e){let t=(0,r.BO)(e,{render:null,specialChars:Rr,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Mr&&"undefined"!=typeof document&&document.body){let t=document.body.style;Mr=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Mr||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Dr)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Dr)),t}});function Nr(e={}){return[Lr.of(e),Fr||(Fr=Ke.fromClass(class{constructor(e){this.view=e,this.decorations=ke.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(Lr)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Pr({regexp:e.specialChars,decoration:(t,n,a)=>{let{doc:l}=n.state,f=(0,r.gm)(t[0],0);if(9==f){let e=l.lineAt(a),t=n.state.tabSize,f=(0,r.IS)(e.text,t,a-e.from);return ke.replace({widget:new Br((t-f%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[f]||(this.decorationCache[f]=ke.replace({widget:new qr(e,f)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(Lr);e.startState.facet(Lr)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let Fr=null;class qr extends _e{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(Ir[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let a=document.createElement("span");return a.textContent=t,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class Br extends _e{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const Ur=2e3;function Hr(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),a=e.state.doc.lineAt(n),l=n-a.from,f=l>Ur?-1:l==a.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):(0,r.IS)(a.text,e.state.tabSize,n-a.from);return{line:a.number,col:f,off:l}}function zr(e,t){let n=Hr(e,t),a=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),r=e.state.doc.lineAt(t);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},a=a.map(e.changes)}},get(t,l,f){let d=Hr(e,t);if(!d)return a;let h=function(e,t,n){let a=Math.min(t.line,n.line),l=Math.max(t.line,n.line),f=[];if(t.off>Ur||n.off>Ur||t.col<0||n.col<0){let d=Math.min(t.off,n.off),h=Math.max(t.off,n.off);for(let t=a;t<=l;t++){let n=e.doc.line(t);n.length<=h&&f.push(r.jT.range(n.from+d,n.to+h))}}else{let d=Math.min(t.col,n.col),h=Math.max(t.col,n.col);for(let t=a;t<=l;t++){let n=e.doc.line(t),a=(0,r.Gz)(n.text,d,e.tabSize,!0);if(a<0)f.push(r.jT.cursor(n.to));else{let t=(0,r.Gz)(n.text,h,e.tabSize);f.push(r.jT.range(n.from+a,n.from+t))}}}return f}(e.state,n,d);return h.length?f?r.jT.create(h.concat(a.ranges)):r.jT.create(h):a}}:null}function Vr(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return ir.mouseSelectionStyle.of(((e,n)=>t(n)?zr(e,n):null))}const Wr={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},Zr={style:"cursor: crosshair"};function Gr(e={}){let[t,n]=Wr[e.key||"Alt"],r=Ke.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventHandlers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[r,ir.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?Zr:null}))]}const Kr="-10000px";class Yr{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(n)}update(e){var t;let n=e.state.facet(this.facet),r=n.filter((e=>e));if(n===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let a=[];for(let t=0;t<r.length;t++){let n=r[t],l=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(l=e)}if(l<0)a[t]=this.createTooltipView(n);else{let n=a[t]=this.tooltipViews[l];n.update&&n.update(e)}}}for(let e of this.tooltipViews)a.indexOf(e)<0&&(e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e));return this.input=n,this.tooltips=r,this.tooltipViews=a,!0}}function Xr(e={}){return Qr.of(e)}function Jr(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const Qr=r.r$.define({combine:e=>{var t,n,r;return{position:oe.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||Jr}}}),ei=new WeakMap,ti=Ke.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(Qr);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Yr(e,ii,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(Qr);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=Kr,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(Qr).tooltipSpace(this.view)}}writeMeasure(e){var t;let{editor:n,space:r}=e,a=[];for(let l=0;l<this.manager.tooltips.length;l++){let f=this.manager.tooltips[l],d=this.manager.tooltipViews[l],{dom:h}=d,p=e.pos[l],y=e.size[l];if(!p||p.bottom<=Math.max(n.top,r.top)||p.top>=Math.min(n.bottom,r.bottom)||p.right<Math.max(n.left,r.left)-.1||p.left>Math.min(n.right,r.right)+.1){h.style.top=Kr;continue}let w=f.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,x=w?7:0,_=y.right-y.left,S=null!==(t=ei.get(d))&&void 0!==t?t:y.bottom-y.top,k=d.offset||ri,C=this.view.textDirection==at.LTR,E=y.width>r.right-r.left?C?r.left:r.right-y.width:C?Math.min(p.left-(w?14:0)+k.x,r.right-_):Math.max(r.left,p.left-_+(w?14:0)-k.x),O=!!f.above;!f.strictSide&&(O?p.top-(y.bottom-y.top)-k.y<r.top:p.bottom+(y.bottom-y.top)+k.y>r.bottom)&&O==r.bottom-p.bottom>p.top-r.top&&(O=!O);let j=(O?p.top-r.top:r.bottom-p.bottom)-x;if(j<S&&!1!==d.resize){if(j<this.view.defaultLineHeight){h.style.top=Kr;continue}ei.set(d,S),h.style.height=(S=j)+"px"}else h.style.height&&(h.style.height="");let T=O?p.top-S-x-k.y:p.bottom+x+k.y,A=E+_;if(!0!==d.overlap)for(let e of a)e.left<A&&e.right>E&&e.top<T+S&&e.bottom>T&&(T=O?e.top-S-2-x:e.bottom+x+2);"absolute"==this.position?(h.style.top=T-e.parent.top+"px",h.style.left=E-e.parent.left+"px"):(h.style.top=T+"px",h.style.left=E+"px"),w&&(w.style.left=p.left+(C?k.x:-k.x)-(E+14-7)+"px"),!0!==d.overlap&&a.push({left:E,top:T,right:A,bottom:T+S}),h.classList.toggle("cm-tooltip-above",O),h.classList.toggle("cm-tooltip-below",!O),d.positioned&&d.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Kr}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),ni=ir.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ri={x:0,y:0},ii=r.r$.define({enables:[ti,ni]}),oi=r.r$.define();class ai{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Yr(e,oi,(e=>this.createHostedView(e)))}static create(e){return new ai(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}}const si=ii.compute([oi],(e=>{let t=e.facet(oi).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:ai.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class li{constructor(e,t,n,r,a){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let n=this.view.coordsAtPos(t);if(null==n||e.y<n.top||e.y>n.bottom||e.x<n.left-this.view.defaultCharacterWidth||e.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find((e=>e.from<=t&&e.to>=t)),a=r&&r.dir==at.RTL?-1:1,l=this.source(this.view,t,e.x<n.left?-a:a);if(null==l?void 0:l.then){let e=this.pending={pos:t};l.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>logException(this.view.state,e,"hover tooltip")))}else l&&this.view.dispatch({effects:this.setHover.of(l)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!ci(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,a=null!==(t=null==n?void 0:n.end)&&void 0!==t?t:r;(r==a?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,r,a,l){let f=document.createRange(),d=e.domAtPos(t),h=e.domAtPos(n);f.setEnd(h.node,h.offset),f.setStart(d.node,d.offset);let p=f.getClientRects();f.detach();for(let e=0;e<p.length;e++){let t=p[e];if(Math.max(t.top-a,a-t.bottom,t.left-r,r-t.right)<=l)return!0}return!1}(this.view,r,a,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!ci(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function ci(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}function ui(e,t={}){let n=r.Py.define(),a=r.QQ.define({create(){return null},update(e,a){if(e&&(t.hideOnChange&&(a.docChanged||a.selection)||t.hideOn&&t.hideOn(a,e)))return null;if(e&&a.docChanged){let t=a.changes.mapPos(e.pos,-1,r.gc.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);n.pos=t,null!=e.end&&(n.end=a.changes.mapPos(e.end)),e=n}for(let t of a.effects)t.is(n)&&(e=t.value),t.is(di)&&(e=null);return e},provide:e=>oi.from(e)});return[a,Ke.define((r=>new li(r,e,a,n,t.hoverTime||300))),si]}function fi(e,t){let n=e.plugin(ti);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}const di=r.Py.define();const hi=r.r$.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function pi(e,t){let n=e.plugin(mi),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const mi=Ke.fromClass(class{constructor(e){this.input=e.state.facet(yi),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(hi);this.top=new gi(e,!0,t.topContainer),this.bottom=new gi(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(hi);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new gi(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new gi(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(yi);if(n!=this.input){let t=n.filter((e=>e)),r=[],a=[],l=[],f=[];for(let n of t){let t,d=this.specs.indexOf(n);d<0?(t=n(e.view),f.push(t)):(t=this.panels[d],t.update&&t.update(e)),r.push(t),(t.top?a:l).push(t)}this.specs=t,this.panels=r,this.top.sync(a),this.bottom.sync(l);for(let e of f)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>ir.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class gi{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=vi(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=vi(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function vi(e){let t=e.nextSibling;return e.remove(),t}const yi=r.r$.define({enables:mi});class bi extends r.uU{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}bi.prototype.elementClass="",bi.prototype.toDOM=void 0,bi.prototype.mapMode=r.gc.TrackBefore,bi.prototype.startSide=bi.prototype.endSide=-1,bi.prototype.point=!0;const wi=r.r$.define(),xi={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>r.Xs.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},_i=r.r$.define();function Si(e){return[Ci(),_i.of(Object.assign(Object.assign({},xi),e))]}const ki=r.r$.define({combine:e=>e.some((e=>e))});function Ci(e){let t=[Ei];return e&&!1===e.fixed&&t.push(ki.of(!0)),t}const Ei=Ke.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(_i).map((t=>new Ti(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(ki),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ki)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=r.Xs.iter(this.view.state.facet(wi),this.view.viewport.from),a=[],l=this.gutters.map((e=>new $i(e,this.view.viewport,-this.view.documentPadding.top)));for(let e of this.view.viewportLineBlocks)if(a.length&&(a=[]),Array.isArray(e.type)){let t=!0;for(let r of e.type)if(r.type==Se.Text&&t){ji(n,a,r.from);for(let e of l)e.line(this.view,r,a);t=!1}else if(r.widget)for(let e of l)e.widget(this.view,r)}else if(e.type==Se.Text){ji(n,a,e.from);for(let t of l)t.line(this.view,e,a)}for(let e of l)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(_i),n=e.state.facet(_i),a=e.docChanged||e.heightChanged||e.viewportChanged||!r.Xs.eq(e.startState.facet(wi),e.state.facet(wi),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(a=!0);else{a=!0;let r=[];for(let a of n){let n=t.indexOf(a);n<0?r.push(new Ti(this.view,a)):(this.gutters[n].update(e),r.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),r.indexOf(e)<0&&e.destroy();for(let e of r)this.dom.appendChild(e.dom);this.gutters=r}return a}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>ir.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==at.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))});function Oi(e){return Array.isArray(e)?e:[e]}function ji(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class $i{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=r.Xs.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,a=t.top-this.height;if(this.i==r.elements.length){let l=new Ai(e,t.height,a,n);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,t.height,a,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];ji(this.cursor,r,t.from),n.length&&(r=r.concat(n));let a=this.gutter.config.lineMarker(e,t,r);a&&r.unshift(a);let l=this.gutter;(0!=r.length||l.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Ti{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(r=>{let a,l=r.target;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let e=l.getBoundingClientRect();a=(e.top+e.bottom)/2}else a=r.clientY;let f=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[n](e,f,r)&&r.preventDefault()}));this.markers=Oi(t.markers(e)),t.initialSpacer&&(this.spacer=new Ai(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Oi(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!r.Xs.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class Ai{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let a=0,l=0;;){let f=l,d=a<t.length?t[a++]:null,h=!1;if(d){let e=d.elementClass;e&&(n+=" "+e);for(let e=l;e<this.markers.length;e++)if(this.markers[e].compare(d)){f=e,h=!0;break}}else f=this.markers.length;for(;l<f;){let e=this.markers[l++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!d)break;d.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(d.toDOM(e),r)),h&&l++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const Pi=r.r$.define(),Di=r.r$.define({combine(e){return(0,r.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let r=n[e],a=t[e];n[e]=r?(e,t,n)=>r(e,t,n)||a(e,t,n):a}return n}})}});class Ri extends bi{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ii(e,t){return e.state.facet(Di).formatNumber(t,e.state)}const Mi=_i.compute([Di],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Pi)},lineMarker(e,t,n){return n.some((e=>e.toDOM))?null:new Ri(Ii(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Di)!=e.state.facet(Di),initialSpacer(e){return new Ri(Ii(e,Ni(e.state.doc.lines)))},updateSpacer(e,t){let n=Ii(t.view,Ni(t.view.state.doc.lines));return n==e.number?e:new Ri(n)},domEventHandlers:e.facet(Di).domEventHandlers})));function Li(e={}){return[Di.of(e),Ci(),Mi]}function Ni(e){let t=9;for(;t<e;)t=10*t+9;return t}const Fi=new class extends bi{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},qi=wi.compute(["selection"],(e=>{let t=[],n=-1;for(let r of e.selection.ranges){let a=e.doc.lineAt(r.head).from;a>n&&(n=a,t.push(Fi.range(a)))}return r.Xs.of(t)}));function Bi(){return qi}},21649:function(e,t,n){"use strict";n.d(t,{FE:function(){return z},Jq:function(){return p},L3:function(){return r},Lj:function(){return y},_b:function(){return U},hr:function(){return q},i9:function(){return B},md:function(){return f},mp:function(){return S},vj:function(){return _}});const r=1024;let a=0;class l{constructor(e,t){this.from=e,this.to=t}}class f{constructor(e={}){this.id=a++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=p.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}f.closedBy=new f({deserialize:e=>e.split(" ")}),f.openedBy=new f({deserialize:e=>e.split(" ")}),f.group=new f({deserialize:e=>e.split(" ")}),f.contextHash=new f({perNode:!0}),f.lookAhead=new f({perNode:!0}),f.mounted=new f({perNode:!0});class d{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}}const h=Object.create(null);class p{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):h,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new p(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(f.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(f.group),r=-1;r<(n?n.length:0);r++){let a=t[r<0?e.name:n[r]];if(a)return a}}}}p.none=new p("",Object.create(null),0,8);class y{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new p(n.name,r,n.id,n.flags):n)}return new y(t)}}const w=new WeakMap,x=new WeakMap;var _;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(_||(_={}));class S{constructor(e,t,n,r,a){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,a&&a.length){this.props=Object.create(null);for(let[e,t]of a)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(f.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new I(this.topNode,e)}cursorAt(e,t=0,n=0){let r=w.get(this)||this.topNode,a=new I(r);return a.moveTo(e,t),w.set(this,a._tree),a}get topNode(){return new T(this,0,0,null)}resolve(e,t=0){let n=j(w.get(this)||this.topNode,e,t,!1);return w.set(this,n),n}resolveInner(e,t=0){let n=j(x.get(this)||this.topNode,e,t,!0);return x.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:a=this.length}=e;for(let l=this.cursor((e.mode||0)|_.IncludeAnonymous);;){let e=!1;if(l.from<=a&&l.to>=r&&(l.type.isAnonymous||!1!==t(l))){if(l.firstChild())continue;e=!0}for(;e&&n&&!l.type.isAnonymous&&n(l),!l.nextSibling();){if(!l.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:F(p.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new S(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new S(p.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:a,maxBufferLength:l=r,reused:d=[],minRepeatType:h=a.types.length}=e,p=Array.isArray(n)?new k(n,n.length):n,y=a.types,w=0,x=0;function _(e,t,n,r,f){let{id:S,start:k,end:P,size:D}=p,R=x;for(;D<0;){if(p.next(),-1==D){let t=d[S];return n.push(t),void r.push(k-e)}if(-3==D)return void(w=S);if(-4==D)return void(x=S);throw new RangeError(`Unrecognized record size: ${D}`)}let I,M,L=y[S],N=k-e;if(P-k<=l&&(M=T(p.pos-t,f))){let t=new Uint16Array(M.size-M.skip),n=p.pos-M.size,r=t.length;for(;p.pos>n;)r=A(M.start,t,r);I=new C(t,P-M.start,a),N=M.start-e}else{let e=p.pos-D;p.next();let t=[],n=[],r=S>=h?S:-1,a=0,f=P;for(;p.pos>e;)r>=0&&p.id==r&&p.size>=0?(p.end<=f-l&&(O(t,n,k,a,p.end,f,r,R),a=t.length,f=p.end),p.next()):_(k,e,t,n,r);if(r>=0&&a>0&&a<t.length&&O(t,n,k,a,k,f,r,R),t.reverse(),n.reverse(),r>-1&&a>0){let e=E(L);I=F(L,t,n,0,t.length,0,P-k,e,e)}else I=j(L,t,n,P-k,R-P)}n.push(I),r.push(N)}function E(e){return(t,n,r)=>{let a,l,d=0,h=t.length-1;if(h>=0&&(a=t[h])instanceof S){if(!h&&a.type==e&&a.length==r)return a;(l=a.prop(f.lookAhead))&&(d=n[h]+a.length+l)}return j(e,t,n,r,d)}}function O(e,t,n,r,l,f,d,h){let p=[],y=[];for(;e.length>r;)p.push(e.pop()),y.push(t.pop()+n-l);e.push(j(a.types[d],p,y,f-l,h-f)),t.push(l-n)}function j(e,t,n,r,a=0,l){if(w){let e=[f.contextHash,w];l=l?[e].concat(l):[e]}if(a>25){let e=[f.lookAhead,a];l=l?[e].concat(l):[e]}return new S(e,t,n,r,l)}function T(e,t){let n=p.fork(),r=0,a=0,f=0,d=n.end-l,y={size:0,start:0,skip:0};e:for(let l=n.pos-e;n.pos>l;){let e=n.size;if(n.id==t&&e>=0){y.size=r,y.start=a,y.skip=f,f+=4,r+=4,n.next();continue}let p=n.pos-e;if(e<0||p<l||n.start<d)break;let w=n.id>=h?4:0,x=n.start;for(n.next();n.pos>p;){if(n.size<0){if(-3!=n.size)break e;w+=4}else n.id>=h&&(w+=4);n.next()}a=x,r+=e,f+=w}return(t<0||r==e)&&(y.size=r,y.start=a,y.skip=f),y.size>4?y:void 0}function A(e,t,n){let{id:r,start:a,end:l,size:f}=p;if(p.next(),f>=0&&r<h){let d=n;if(f>4){let r=p.pos-(f-4);for(;p.pos>r;)n=A(e,t,n)}t[--n]=d,t[--n]=l-e,t[--n]=a-e,t[--n]=r}else-3==f?w=r:-4==f&&(x=r);return n}let P=[],D=[];for(;p.pos>0;)_(e.start||0,e.bufferStart||0,P,D,-1);let R=null!==(t=e.length)&&void 0!==t?t:P.length?D[0]+P[0].length:0;return new S(y[e.topID],P.reverse(),D.reverse(),R)}(e)}}S.empty=new S(p.none,[],[],0);class k{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new k(this.buffer,this.index)}}class C{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return p.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],a=r.name;if(/\W/.test(a)&&!r.isError&&(a=JSON.stringify(a)),n==(e+=4))return a;let l=[];for(;e<n;)l.push(this.childString(e)),e=this.buffer[e+3];return a+"("+l.join(",")+")"}findChild(e,t,n,r,a){let{buffer:l}=this,f=-1;for(let d=e;d!=t&&!(E(a,r,l[d+1],l[d+2])&&(f=d,n>0));d=l[d+3]);return f}slice(e,t,n){let r=this.buffer,a=new Uint16Array(t-e),l=0;for(let f=e,d=0;f<t;){a[d++]=r[f++],a[d++]=r[f++]-n;let t=a[d++]=r[f++]-n;a[d++]=r[f++]-e,l=Math.max(l,t)}return new C(a,l,this.set)}}function E(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function O(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function j(e,t,n,r){for(var a;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof T&&e.index<0?null:e.parent;if(!t)return e;e=t}let l=r?0:_.IgnoreOverlays;if(r)for(let r=e,f=r.parent;f;r=f,f=r.parent)r instanceof T&&r.index<0&&(null===(a=f.enter(t,n,l))||void 0===a?void 0:a.from)!=r.from&&(e=f);for(;;){let r=e.enter(t,n,l);if(!r)return e;e=r}}class T{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,a=0){for(let l=this;;){for(let{children:d,positions:h}=l._tree,p=t>0?d.length:-1;e!=p;e+=t){let p=d[e],y=h[e]+l.from;if(E(r,n,y,y+p.length))if(p instanceof C){if(a&_.ExcludeBuffers)continue;let f=p.findChild(0,p.buffer.length,t,n-y,r);if(f>-1)return new R(new D(l,p,e,y),null,f)}else if(a&_.IncludeAnonymous||!p.type.isAnonymous||M(p)){let d;if(!(a&_.IgnoreMounts)&&p.props&&(d=p.prop(f.mounted))&&!d.overlay)return new T(d.tree,y,e,l);let h=new T(p,y,e,l);return a&_.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(t<0?p.children.length-1:0,t,n,r)}}if(a&_.IncludeAnonymous||!l.type.isAnonymous)return null;if(e=l.index>=0?l.index+t:t<0?-1:l._parent._tree.children.length,l=l._parent,!l)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&_.IgnoreOverlays)&&(r=this._tree.prop(f.mounted))&&r.overlay){let n=e-this.from;for(let{from:e,to:a}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?a>=n:a>n))return new T(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new I(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return j(this,e,t,!1)}resolveInner(e,t=0){return j(this,e,t,!0)}enterUnfinishedNodesBefore(e){return O(this,e)}getChild(e,t=null,n=null){let r=A(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return A(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return P(this,e)}}function A(e,t,n,r){let a=e.cursor(),l=[];if(!a.firstChild())return l;if(null!=n)for(;!a.type.is(n);)if(!a.nextSibling())return l;for(;;){if(null!=r&&a.type.is(r))return l;if(a.type.is(t)&&l.push(a.node),!a.nextSibling())return null==r?l:[]}}function P(e,t,n=t.length-1){for(let r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class D{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class R{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,a=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return a<0?null:new R(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&_.ExcludeBuffers)return null;let{buffer:r}=this.context,a=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new R(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new R(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new R(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new I(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,a=n.buffer[this.index+3];if(a>r){let l=n.buffer[this.index+1];e.push(n.slice(r,a,l)),t.push(0)}return new S(this.type,e,t,this.to-this.from)}resolve(e,t=0){return j(this,e,t,!1)}resolveInner(e,t=0){return j(this,e,t,!0)}enterUnfinishedNodesBefore(e){return O(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=A(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return A(this,e,t,n)}get node(){return this}matchContext(e){return P(this,e)}}class I{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof T)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof T?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,a=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(a<0)&&(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&_.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&_.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&_.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,a=e<0?-1:n._tree.children.length;r!=a;r+=e){let e=n._tree.children[r];if(this.mode&_.IncludeAnonymous||e instanceof C||!e.type.isAnonymous||M(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,a=this.stack.length;a>=0;){for(let l=e;l;l=l._parent)if(l.index==r){if(r==this.index)return l;t=l,n=a+1;break e}r=this.stack[--a]}for(let e=n;e<this.stack.length;e++)t=new R(this.buffer,t,this.stack[e]);return this.bufferNode=new R(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return P(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,a=this.stack.length-1;r>=0;a--){if(a<0)return P(this.node,e,r);let l=n[t.buffer[this.stack[a]]];if(!l.isAnonymous){if(e[r]&&e[r]!=l.name)return!1;r--}}return!0}}function M(e){return e.children.some((e=>e instanceof C||!e.type.isAnonymous||M(e)))}const L=new WeakMap;function N(e,t){if(!e.isAnonymous||t instanceof C||t.type!=e)return 1;let n=L.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof S)){n=1;break}n+=N(e,r)}L.set(t,n)}return n}function F(e,t,n,r,a,l,f,d,h){let p=0;for(let n=r;n<a;n++)p+=N(e,t[n]);let y=Math.ceil(1.5*p/8),w=[],x=[];return function t(n,r,a,f,d){for(let p=a;p<f;){let a=p,_=r[p],S=N(e,n[p]);for(p++;p<f;p++){let t=N(e,n[p]);if(S+t>=y)break;S+=t}if(p==a+1){if(S>y){let e=n[a];t(e.children,e.positions,0,e.children.length,r[a]+d);continue}w.push(n[a])}else{let t=r[p-1]+n[p-1].length-_;w.push(F(e,n,r,a,p,_,t,null,h))}x.push(_+d-l)}}(t,n,r,a,0),(d||h)(w,x,f)}class q{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof R?this.setBuffer(e.context.buffer,e.index,t):e instanceof T&&this.map.set(e.tree,t)}get(e){return e instanceof R?this.getBuffer(e.context.buffer,e.index):e instanceof T?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class B{constructor(e,t,n,r,a=!1,l=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(a?1:0)|(l?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new B(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],a=1,l=e.length?e[0]:null;for(let f=0,d=0,h=0;;f++){let p=f<t.length?t[f]:null,y=p?p.fromA:1e9;if(y-d>=n)for(;l&&l.from<y;){let t=l;if(d>=t.from||y<=t.to||h){let e=Math.max(t.from,d)-h,n=Math.min(t.to,y)-h;t=e>=n?null:new B(e,n,t.tree,t.offset+h,f>0,!!p)}if(t&&r.push(t),l.to>y)break;l=a<e.length?e[a++]:null}if(!p)break;d=p.toA,h=p.toA-p.toB}return r}}class U{startParse(e,t,n){return"string"==typeof e&&(e=new H(e)),n=n?n.length?n.map((e=>new l(e.from,e.to))):[new l(0,0)]:[new l(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class H{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function z(e){return(t,n,r,a)=>new G(t,e,n,r,a)}class V{constructor(e,t,n,r,a){this.parser=e,this.parse=t,this.overlay=n,this.target=r,this.ranges=a}}class W{constructor(e,t,n,r,a,l,f){this.parser=e,this.predicate=t,this.mounts=n,this.index=r,this.start=a,this.target=l,this.prev=f,this.depth=0,this.ranges=[]}}const Z=new f({perNode:!0});class G{constructor(e,t,n,r,a){this.nest=t,this.input=n,this.fragments=r,this.ranges=a,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(let e of this.inner)e.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let e=this.baseTree;return null!=this.stoppedAt&&(e=new S(e.type,e.children,e.positions,e.length,e.propValues.concat([[Z,this.stoppedAt]]))),e}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[f.mounted.id]=new d(t,e.overlay,e.parser),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new Q(this.fragments),t=null,n=null,r=new I(new T(this.baseTree,this.ranges[0].from,0,null),_.IncludeAnonymous|_.IgnoreMounts);e:for(let a,f;null==this.stoppedAt||r.from<this.stoppedAt;){let d,h=!0;if(e.hasNode(r)){if(t){let e=t.mounts.find((e=>e.frag.from<=r.from&&e.frag.to>=r.to&&e.mount.overlay));if(e)for(let n of e.mount.overlay){let a=n.from+e.pos,l=n.to+e.pos;a>=r.from&&l<=r.to&&!t.ranges.some((e=>e.from<l&&e.to>a))&&t.ranges.push({from:a,to:l})}}h=!1}else if(n&&(f=K(n.ranges,r.from,r.to)))h=2!=f;else if(!r.type.isAnonymous&&r.from<r.to&&(a=this.nest(r,this.input))){r.tree||X(r);let f=e.findMounts(r.from,a.parser);if("function"==typeof a.overlay)t=new W(a.parser,a.overlay,f,this.inner.length,r.from,r.tree,t);else{let e=ee(this.ranges,a.overlay||[new l(r.from,r.to)]);e.length&&this.inner.push(new V(a.parser,a.parser.startParse(this.input,ne(f,e),e),a.overlay?a.overlay.map((e=>new l(e.from-r.from,e.to-r.from))):null,r.tree,e)),a.overlay?e.length&&(n={ranges:e,depth:0,prev:n}):h=!1}}else t&&(d=t.predicate(r))&&(!0===d&&(d=new l(r.from,r.to)),d.from<d.to&&t.ranges.push(d));if(h&&r.firstChild())t&&t.depth++,n&&n.depth++;else for(;!r.nextSibling();){if(!r.parent())break e;if(t&&!--t.depth){let e=ee(this.ranges,t.ranges);e.length&&this.inner.splice(t.index,0,new V(t.parser,t.parser.startParse(this.input,ne(t.mounts,e),e),t.ranges.map((e=>new l(e.from-t.start,e.to-t.start))),t.target,e)),t=t.prev}n&&!--n.depth&&(n=n.prev)}}}}function K(e,t,n){for(let r of e){if(r.from>=n)break;if(r.to>t)return r.from<=t&&r.to>=n?2:1}return 0}function Y(e,t,n,r,a,l){if(t<n){let f=e.buffer[t+1];r.push(e.slice(t,n,f)),a.push(f-l)}}function X(e){let{node:t}=e,n=0;do{e.parent(),n++}while(!e.tree);let r=0,a=e.tree,l=0;for(;l=a.positions[r]+e.from,!(l<=t.from&&l+a.children[r].length>=t.to);r++);let f=a.children[r],d=f.buffer;a.children[r]=function e(n,r,a,h,p){let y=n;for(;d[y+2]+l<=t.from;)y=d[y+3];let w=[],x=[];Y(f,n,y,w,x,h);let _=d[y+1],k=d[y+2],C=_+l==t.from&&k+l==t.to&&d[y]==t.type.id;return w.push(C?t.toTree():e(y+4,d[y+3],f.set.types[d[y]],_,k-_)),x.push(_-h),Y(f,d[y+3],r,w,x,h),new S(a,w,x,p)}(0,d.length,p.none,0,f.length);for(let r=0;r<=n;r++)e.childAfter(t.from)}class J{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(_.IncludeAnonymous|_.IgnoreMounts)}moveTo(e){let{cursor:t}=this,n=e-this.offset;for(;!this.done&&t.from<n;)t.to>=e&&t.enter(n,1,_.IgnoreOverlays|_.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(!(t.children.length&&0==t.positions[0]&&t.children[0]instanceof S))break;t=t.children[0]}return!1}}class Q{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=null!==(t=n.tree.prop(Z))&&void 0!==t?t:n.to,this.inner=new J(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(e=t.tree.prop(Z))&&void 0!==e?e:t.to,this.inner=new J(t.tree,-t.offset)}}findMounts(e,t){var n;let r=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let e=this.inner.cursor.node;e;e=e.parent){let a=null===(n=e.tree)||void 0===n?void 0:n.prop(f.mounted);if(a&&a.parser==t)for(let t=this.fragI;t<this.fragments.length;t++){let n=this.fragments[t];if(n.from>=e.to)break;n.tree==this.curFrag.tree&&r.push({frag:n,pos:e.from-n.offset,mount:a})}}}return r}}function ee(e,t){let n=null,r=t;for(let a=1,f=0;a<e.length;a++){let d=e[a-1].to,h=e[a].from;for(;f<r.length;f++){let e=r[f];if(e.from>=h)break;e.to<=d||(n||(r=n=t.slice()),e.from<d?(n[f]=new l(e.from,d),e.to>h&&n.splice(f+1,0,new l(h,e.to))):e.to>h?n[f--]=new l(h,e.to):n.splice(f--,1))}}return r}function te(e,t,n,r){let a=0,f=0,d=!1,h=!1,p=-1e9,y=[];for(;;){let w=a==e.length?1e9:d?e[a].to:e[a].from,x=f==t.length?1e9:h?t[f].to:t[f].from;if(d!=h){let e=Math.max(p,n),t=Math.min(w,x,r);e<t&&y.push(new l(e,t))}if(p=Math.min(w,x),1e9==p)break;w==p&&(d?(d=!1,a++):d=!0),x==p&&(h?(h=!1,f++):h=!0)}return y}function ne(e,t){let n=[];for(let{pos:r,mount:a,frag:f}of e){let e=r+(a.overlay?a.overlay[0].from:0),d=e+a.tree.length,h=Math.max(f.from,e),p=Math.min(f.to,d);if(a.overlay){let d=te(t,a.overlay.map((e=>new l(e.from+r,e.to+r))),h,p);for(let t=0,r=h;;t++){let l=t==d.length,h=l?p:d[t].from;if(h>r&&n.push(new B(r,h,a.tree,-e,f.from>=r||f.openStart,f.to<=h||f.openEnd)),l)break;r=d[t].to}}else n.push(new B(h,p,a.tree,-e,f.from>=e||f.openStart,f.to<=d||f.openEnd))}return n}},86253:function(e,t,n){"use strict";n.d(t,{Gv:function(){return h},QR:function(){return w},Vp:function(){return l},bW:function(){return x},pJ:function(){return F}});var r=n(21649);let a=0;class l{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=a++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new l([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new d;return t=>t.modified.indexOf(e)>-1?t:d.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let f=0;class d{constructor(){this.instances=[],this.id=f++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>{return n.base==e&&(r=t,a=n.modified,r.length==a.length&&r.every(((e,t)=>e==a[t])));var r,a}));if(n)return n;let r=[],a=new l(r,e,t);for(let e of t)e.instances.push(a);let f=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,a=t.length;r<a;r++)t.push(t[r].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let t of e.set)if(!t.modified.length)for(let e of f)r.push(d.get(t,e));return a}}function h(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],a=2,l=e;for(let t=0;;){if("..."==l&&t>0&&t+3==e.length){a=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let f=e[t++];if(t==e.length&&"!"==f){a=0;break}if("/"!=f)throw new RangeError("Invalid path: "+e);l=e.slice(t)}let f=n.length-1,d=n[f];if(!d)throw new RangeError("Invalid path: "+e);let h=new y(r,a,f>0?n.slice(0,f):null);t[d]=h.sort(t[d])}}return p.add(t)}const p=new r.md;class y{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function w(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:a=null}=t||{};return{style:e=>{let t=a;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function x(e,t,n,r=0,a=e.length){let l=new _(r,Array.isArray(t)?t:[t],n);l.highlightRange(e.cursor(),r,a,"",l.highlighters),l.flush(a)}y.empty=new y([],2,null);class _{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,a,l){let{type:f,from:d,to:h}=e;if(d>=n||h<=t)return;f.isTop&&(l=this.highlighters.filter((e=>!e.scope||e.scope(f))));let w=a,x=function(e){let t=e.type.prop(p);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||y.empty,_=function(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}(l,x.tags);if(_&&(w&&(w+=" "),w+=_,1==x.mode&&(a+=(a?" ":"")+_)),this.startSpan(e.from,w),x.opaque)return;let S=e.tree&&e.tree.prop(r.md.mounted);if(S&&S.overlay){let r=e.node.enter(S.overlay[0].from+d,1),f=this.highlighters.filter((e=>!e.scope||e.scope(S.tree.type))),p=e.firstChild();for(let y=0,x=d;;y++){let _=y<S.overlay.length?S.overlay[y]:null,k=_?_.from+d:h,C=Math.max(t,x),E=Math.min(n,k);if(C<E&&p)for(;e.from<E&&(this.highlightRange(e,C,E,a,l),this.startSpan(Math.min(E,e.to),w),!(e.to>=k)&&e.nextSibling()););if(!_||k>n)break;x=_.to+d,x>t&&(this.highlightRange(r.cursor(),Math.max(t,_.from+d),Math.min(n,x),a,f),this.startSpan(x,w))}p&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,a,l),this.startSpan(Math.min(n,e.to),w)}}while(e.nextSibling());e.parent()}}}const S=l.define,k=S(),C=S(),E=S(C),O=S(C),j=S(),T=S(j),A=S(j),P=S(),D=S(P),R=S(),I=S(),M=S(),L=S(M),N=S(),F={comment:k,lineComment:S(k),blockComment:S(k),docComment:S(k),name:C,variableName:S(C),typeName:E,tagName:S(E),propertyName:O,attributeName:S(O),className:S(C),labelName:S(C),namespace:S(C),macroName:S(C),literal:j,string:T,docString:S(T),character:S(T),attributeValue:S(T),number:A,integer:S(A),float:S(A),bool:S(j),regexp:S(j),escape:S(j),color:S(j),url:S(j),keyword:R,self:S(R),null:S(R),atom:S(R),unit:S(R),modifier:S(R),operatorKeyword:S(R),controlKeyword:S(R),definitionKeyword:S(R),moduleKeyword:S(R),operator:I,derefOperator:S(I),arithmeticOperator:S(I),logicOperator:S(I),bitwiseOperator:S(I),compareOperator:S(I),updateOperator:S(I),definitionOperator:S(I),typeOperator:S(I),controlOperator:S(I),punctuation:M,separator:S(M),bracket:L,angleBracket:S(L),squareBracket:S(L),paren:S(L),brace:S(L),content:P,heading:D,heading1:S(D),heading2:S(D),heading3:S(D),heading4:S(D),heading5:S(D),heading6:S(D),contentSeparator:S(P),list:S(P),quote:S(P),emphasis:S(P),strong:S(P),link:S(P),monospace:S(P),strikethrough:S(P),inserted:S(),deleted:S(),changed:S(),invalid:S(),meta:N,documentMeta:S(N),annotation:S(N),processingInstruction:S(N),definition:l.defineModifier(),constant:l.defineModifier(),function:l.defineModifier(),standard:l.defineModifier(),local:l.defineModifier(),special:l.defineModifier()};w([{tag:F.link,class:"tok-link"},{tag:F.heading,class:"tok-heading"},{tag:F.emphasis,class:"tok-emphasis"},{tag:F.strong,class:"tok-strong"},{tag:F.keyword,class:"tok-keyword"},{tag:F.atom,class:"tok-atom"},{tag:F.bool,class:"tok-bool"},{tag:F.url,class:"tok-url"},{tag:F.labelName,class:"tok-labelName"},{tag:F.inserted,class:"tok-inserted"},{tag:F.deleted,class:"tok-deleted"},{tag:F.literal,class:"tok-literal"},{tag:F.string,class:"tok-string"},{tag:F.number,class:"tok-number"},{tag:[F.regexp,F.escape,F.special(F.string)],class:"tok-string2"},{tag:F.variableName,class:"tok-variableName"},{tag:F.local(F.variableName),class:"tok-variableName tok-local"},{tag:F.definition(F.variableName),class:"tok-variableName tok-definition"},{tag:F.special(F.variableName),class:"tok-variableName2"},{tag:F.definition(F.propertyName),class:"tok-propertyName tok-definition"},{tag:F.typeName,class:"tok-typeName"},{tag:F.namespace,class:"tok-namespace"},{tag:F.className,class:"tok-className"},{tag:F.macroName,class:"tok-macroName"},{tag:F.propertyName,class:"tok-propertyName"},{tag:F.operator,class:"tok-operator"},{tag:F.comment,class:"tok-comment"},{tag:F.meta,class:"tok-meta"},{tag:F.invalid,class:"tok-invalid"},{tag:F.punctuation,class:"tok-punctuation"}])},40807:function(e,t,n){"use strict";n.d(t,{C:function(){return k}});var r=n(77120),a=n(1727),l=n(11445);function f(e){const t=e.selection.main.head;return e.doc.lineAt(t)}function d(e,t){let n=0;e:for(let r=0;r<e.length;r++)switch(e[r]){case" ":n+=1;continue e;case"\t":n+=t-n%t;continue e;case"\r":continue e;default:break e}return n}class h{constructor(e,t,n){this.lines=e,this.state=t,this.map=new Map,this.unitWidth=n;for(const e of this.lines)this.add(e);this.state.facet(_).highlightActiveBlock&&this.findAndSetActiveLines()}has(e){return this.map.has("number"==typeof e?e:e.number)}get(e){const t=this.map.get("number"==typeof e?e:e.number);if(!t)throw new Error("Line not found in indentation map");return t}set(e,t,n){const r=!e.text.trim().length,a={line:e,col:t,level:n,empty:r};return this.map.set(a.line.number,a),a}add(e){if(this.has(e))return this.get(e);if(!e.length||!e.text.trim().length){if(1===e.number)return this.set(e,0,0);if(e.number===this.state.doc.lines){const t=this.closestNonEmpty(e,-1);return this.set(e,0,t.level)}const t=this.closestNonEmpty(e,-1),n=this.closestNonEmpty(e,1);return t.level>=n.level?this.set(e,0,t.level):t.empty&&0===t.level&&0!==n.level?this.set(e,0,0):n.level>t.level?this.set(e,0,t.level+1):this.set(e,0,n.level)}const t=d(e.text,this.state.tabSize),n=Math.floor(t/this.unitWidth);return this.set(e,t,n)}closestNonEmpty(e,t){let n=e.number+t;for(;-1===t?n>=1:n<=this.state.doc.lines;){if(this.has(n)){const e=this.get(n);if(!e.empty)return e}const e=this.state.doc.line(n);if(e.text.trim().length){const t=d(e.text,this.state.tabSize),n=Math.floor(t/this.unitWidth);return this.set(e,t,n)}n+=t}const r=this.state.doc.line(-1===t?1:this.state.doc.lines);return this.set(r,0,0)}findAndSetActiveLines(){const e=f(this.state);if(!this.has(e))return;let t,n,r=this.get(e);if(this.has(r.line.number+1)){const e=this.get(r.line.number+1);e.level>r.level&&(r=e)}if(this.has(r.line.number-1)){const e=this.get(r.line.number-1);e.level>r.level&&(r=e)}if(0!==r.level){for(r.active=r.level,t=r.line.number;t>1;t--){if(!this.has(t-1))continue;const e=this.get(t-1);if(e.level<r.level)break;e.active=r.level}for(n=r.line.number;n<this.state.doc.lines;n++){if(!this.has(n+1))continue;const e=this.get(n+1);if(e.level<r.level)break;e.active=r.level}}}}const p=1,y=l.tk.baseTheme({"&light":{"--indent-marker-bg-color":"#F0F1F2","--indent-marker-active-bg-color":"#E4E5E6"},"&dark":{"--indent-marker-bg-color":"#2B3245","--indent-marker-active-bg-color":"#3C445C"},".cm-line":{position:"relative"},".cm-indent-markers::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"var(--indent-markers)",pointerEvents:"none",zIndex:"-1"}});function w(e,t,n,r){return`${`repeating-linear-gradient(to right, var(${e}) 0 ${p}px, transparent ${p+.2}px ${t}ch)`} ${n*t}.5ch/calc(${t*r}ch - 1px) no-repeat`}function x(e,t,n){const{level:r,active:a}=e;if(n&&0===r)return[];const l=n?1:0,f=[];if(void 0!==a){const e=a-l-1;e>0&&f.push(w("--indent-marker-bg-color",t,l,e)),f.push(w("--indent-marker-active-bg-color",t,a-1,1)),a!==r&&f.push(w("--indent-marker-bg-color",t,a,r-a))}else f.push(w("--indent-marker-bg-color",t,l,r-l));return f.join(",")}const _=a.r$.define({combine(e){return(0,a.BO)(e,{highlightActiveBlock:!0,hideFirstIndent:!1})}});class S{constructor(e){this.view=e,this.unitWidth=(0,r.y1)(e.state),this.currentLineNumber=f(e.state).number,this.generate(e.state)}update(e){const t=(0,r.y1)(e.state),n=t!==this.unitWidth;n&&(this.unitWidth=t);const a=f(e.state).number,l=a!==this.currentLineNumber;this.currentLineNumber=a;const d=e.state.facet(_).highlightActiveBlock&&l;(e.docChanged||e.viewportChanged||n||d)&&this.generate(e.state)}generate(e){const t=new a.f_,n=function(e,t=e.state){const n=new Set;for(const{from:r,to:a}of e.visibleRanges){let e=r;for(;e<=a;){const r=t.doc.lineAt(e);n.has(r)||n.add(r),e=r.to+1}}return n}(this.view,e),r=new h(n,e,this.unitWidth),{hideFirstIndent:f}=e.facet(_);for(const e of n){const n=r.get(e.number);if(!(null==n?void 0:n.level))continue;const a=x(n,this.unitWidth,f);t.add(e.from,e.from,l.p.line({class:"cm-indent-markers",attributes:{style:`--indent-markers: ${a}`}}))}this.decorations=t.finish()}}function k(e={}){return[_.of(e),y,l.lg.fromClass(S,{decorations:e=>e.decorations})]}},175:function(e,t,n){"use strict";n.d(t,{A:function(){return r},vo:function(){return a}});var r=n(91977),a=(n(91484),n(37615),n(46379),n(40826),n(88594),n(31033))},30656:function(e,t,n){"use strict";function r(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var l=n[r];"string"==typeof l?e.setAttribute(r,l):null!=l&&(e[r]=l)}t++}for(;t<arguments.length;t++)a(e,arguments[t]);return e}function a(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)a(e,t[n])}}n.d(t,{Z:function(){return r}})},37207:function(e,t,n){"use strict";n.d(t,{V:function(){return f}});const r="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),a="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class f{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function a(e,t,l,f){let d=[],h=/^@(\w+)\b/.exec(e[0]),p=h&&"keyframes"==h[1];if(h&&null==t)return l.push(e[0]+";");for(let n in t){let f=t[n];if(/&/.test(n))a(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),f,l);else if(f&&"object"==typeof f){if(!h)throw new RangeError("The value of a property ("+n+") should be a primitive value.");a(r(n),f,d,p)}else null!=f&&d.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+f+";")}(d.length||p)&&l.push((!n||h||f?e:e.map(n)).join(", ")+" {"+d.join(" ")+"}")}for(let t in e)a(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=l[r]||1;return l[r]=e+1,"ͼ"+e.toString(36)}static mount(e,t){(e[a]||new h(e)).mount(Array.isArray(t)?t:[t])}}let d=null;class h{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(d)return e.adoptedStyleSheets=[d.sheet].concat(e.adoptedStyleSheets),e[a]=d;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),d=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[a]=this}mount(e){let t=this.sheet,n=0,r=0;for(let a=0;a<e.length;a++){let l=e[a],f=this.modules.indexOf(l);if(f<r&&f>-1&&(this.modules.splice(f,1),r--,f=-1),-1==f){if(this.modules.splice(r++,0,l),t)for(let e=0;e<l.rules.length;e++)t.insertRule(l.rules[e],n++)}else{for(;r<f;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}},90784:function(e){"use strict";e.exports=JSON.parse('["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","budapest","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","اتصالات","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","诺基亚","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"]')}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var a=2&t&&e;"object"==typeof a&&!~leafPrototypes.indexOf(a);a=getProto(a))Object.getOwnPropertyNames(a).forEach((function(t){r[t]=function(){return e[t]}}));return r.default=function(){return e},__webpack_require__.d(n,r),n},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,n){return __webpack_require__.f[n](e,t),t}),[]))},__webpack_require__.u=function(e){return"js/"+({46:"zh-CN-json",123:"ru-json",320:"en-json",395:"tr-json",562:"cm6-theme8",588:"cm6-theme26",809:"cm6-theme1",929:"cm6-theme17",1312:"ja-json",1333:"cm6-theme4",1369:"cm6-theme27",1377:"ko-json",1379:"rich-text",1787:"cm6-theme19",1897:"cm6-theme36",1921:"cm6-theme22",1949:"cm6-theme39",2231:"cm6-theme3",2268:"cm6-theme11",2671:"nl-json",2834:"cm6-theme18",3340:"pt-json",3359:"cm6-theme6",3506:"cm6-theme9",3552:"cm6-theme32",3778:"cm6-theme0",4288:"cm6-theme16",4412:"cm6-theme31",4507:"no-json",4608:"cm6-theme13",4701:"cm6-theme2",4934:"cm6-theme20",5277:"pdf-js-viewer",5777:"cm6-theme15",5806:"da-json",5848:"cm6-theme12",6108:"cm6-theme5",6144:"cm6-theme35",6817:"it-json",6901:"de-json",6975:"cm6-theme33",7157:"cm6-theme10",7223:"cm6-theme25",7479:"cm6-theme7",7519:"cs-json",7530:"cm6-theme37",7846:"pl-json",7895:"cm6-theme14",8006:"fr-json",8166:"cm6-theme24",8244:"cm6-theme28",8367:"es-json",8671:"fi-json",8812:"cm6-theme23",8863:"cm6-theme34",8895:"cm6-theme30",8967:"cm6-theme38",9190:"cm6-theme29",9192:"cm6-theme21",9303:"sv-json",9516:"codemirror-editor"}[e]||e)+"-"+{46:"66c5fd3c89cb0e62b856",123:"2a76fed71c7b6eb41e3c",320:"279a519afc1ad717690f",395:"f7d03699ce9c8d014511",562:"1f528507e3cf66b4a3a2",588:"4d6d8c9a0c56f670ad18",809:"f6afc861f6f71dc8a046",929:"b3179f416508ddb8e803",1215:"f624abf3d8316e76eac2",1312:"105190be0b62de20e7b1",1333:"1ed03e1ac162feb781d8",1369:"83fb3cbb7deddec367e9",1377:"5722a042d429c93b583e",1379:"89b9f3114866043cbfbd",1392:"27f10453d313d12f12e2",1514:"ef4971f4e2d8678b5dcc",1787:"77eddc04c3dc45c226ca",1859:"c3fcbd45c7ffe212ccf8",1897:"396b52df86a364fa80dc",1921:"c9201aa47642cff4a79d",1949:"657755e5eb289dcecccf",2231:"b0828f37548b7cd9a5e7",2268:"d8c0eac4a234ad18cd79",2671:"ba74adfdca1dd68ce93d",2834:"3ce23cff17c541f0169b",2878:"6c108b55fb048f987e50",3148:"74f59966bdaea20c49f1",3340:"40532d1b4244aed18815",3359:"1c878b33067a3c96e906",3390:"db53feb365d3b6ac1212",3506:"7e697b05655f5c319a31",3552:"c11aca6a63c79c02f780",3568:"ce1cc9ac610ce40a6038",3778:"846e23fef6e212b77aec",3948:"fdbca3817ff849755a6c",4083:"24e1f9b559fd4df82c16",4288:"06f87a6cc0c84070cf2a",4383:"4c941cb66243d254b39a",4412:"073b484afda9b373b3fd",4507:"5a9d5303aa0cc7c0024f",4580:"3b2a3c44effc47de97fb",4608:"82779acab146d190138a",4701:"0caef38351691c6d968b",4934:"2b655579ac69b618952d",5277:"cf344658b03c9b7c070f",5593:"37ec7e9629e43e283d3a",5777:"d56558c5f17e2a14dfcb",5806:"8f5eb4bb96b829dd46b1",5848:"3231276d88db380fb420",6042:"14fb78b2156fff75fef7",6108:"ca7f2a550497fe425f46",6144:"5aa1a05537326290c46f",6146:"80110a44beb11aa9e49b",6219:"8e5f703480d328881fc6",6376:"97bb44cbf9193c4403f3",6817:"cce9d1122f3c4460df66",6849:"20ec8f5961bdb4d8542d",6901:"5c33ea5f50da591ec9c9",6975:"3d6ce9297448ca9dbee4",7157:"31d40809844c4d00b806",7223:"a3db98b7b9571c6d74ce",7329:"938c74f1aa39fdecbc59",7479:"70186a97c19ade699b6a",7519:"b84d32d98e8cd2cf489f",7530:"37b0e7a0abdee7ca66e8",7544:"f4e2f53b39cd16c12217",7610:"79564746711085978198",7710:"f7a3b6d191f945f02cc9",7846:"db00ba603a73b46536b6",7895:"068f5bcfe8422e85581e",7956:"52b0bdb3ee89a0b54e32",7960:"1f128f3a3866cd449362",8006:"eaf983ed181e0cf21dcb",8166:"b05bba741081d97d6dce",8244:"3e4eae5dc817067c218b",8367:"681b65f9e4a261182f9c",8671:"0db0310c8bc4ab6c8dc1",8812:"f625176b8ee1ab30a1e0",8863:"70e849c3b4934a1e597f",8895:"66f6715df3a63774e9ce",8967:"8d5471ee59a209cff20e",9190:"692a22ec5ef0f93073f2",9192:"7974ac05e98ae4ceb922",9303:"68780f82394ac289fde6",9516:"857f67f98bc547ae3d6c"}[e]+".js"},__webpack_require__.miniCssF=function(e){return"stylesheets/"+e+"-"+{6146:"c0e469c0d89a9a502208",6219:"e88824631fea5aac4685"}[e]+".css"},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},inProgress={},dataWebpackPrefix="Frontend:",__webpack_require__.l=function(e,t,n,r){if(inProgress[e])inProgress[e].push(t);else{var a,l;if(void 0!==n)for(var f=document.getElementsByTagName("script"),d=0;d<f.length;d++){var h=f[d];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==dataWebpackPrefix+n){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",dataWebpackPrefix+n),a.src=e),inProgress[e]=[t];var p=function(t,n){a.onerror=a.onload=null,clearTimeout(y);var r=inProgress[e];if(delete inProgress[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(n)})),t)return t(n)},y=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.p="/",function(){if("undefined"!=typeof document){var e=function(e){return new Promise((function(t,n){var r=__webpack_require__.miniCssF(e),a=__webpack_require__.p+r;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=(f=n[r]).getAttribute("data-href")||f.getAttribute("href");if("stylesheet"===f.rel&&(a===e||a===t))return f}var l=document.getElementsByTagName("style");for(r=0;r<l.length;r++){var f;if((a=(f=l[r]).getAttribute("data-href"))===e||a===t)return f}}(r,a))return t();!function(e,t,n,r,a){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onerror=l.onload=function(n){if(l.onerror=l.onload=null,"load"===n.type)r();else{var f=n&&("load"===n.type?"missing":n.type),d=n&&n.target&&n.target.href||t,h=new Error("Loading CSS chunk "+e+" failed.\n("+d+")");h.code="CSS_CHUNK_LOAD_FAILED",h.type=f,h.request=d,l.parentNode&&l.parentNode.removeChild(l),a(h)}},l.href=t,n?n.parentNode.insertBefore(l,n.nextSibling):document.head.appendChild(l)}(e,a,null,t,n)}))},t={8696:0,3399:0};__webpack_require__.f.miniCss=function(n,r){t[n]?r.push(t[n]):0!==t[n]&&{6146:1,6219:1}[n]&&r.push(t[n]=e(n).then((function(){t[n]=0}),(function(e){throw delete t[n],e})))}}}(),function(){__webpack_require__.b=document.baseURI||self.location.href;var e={8696:0,3399:0};__webpack_require__.f.j=function(t,n){var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise((function(n,a){r=e[t]=[n,a]}));n.push(r[2]=a);var l=__webpack_require__.p+__webpack_require__.u(t),f=new Error;__webpack_require__.l(l,(function(n){if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;f.message="Loading chunk "+t+" failed.\n("+a+": "+l+")",f.name="ChunkLoadError",f.type=a,f.request=l,r[1](f)}}),"chunk-"+t,t)}};var t=function(t,n){var r,a,l=n[0],f=n[1],d=n[2],h=0;if(l.some((function(t){return 0!==e[t]}))){for(r in f)__webpack_require__.o(f,r)&&(__webpack_require__.m[r]=f[r]);if(d)d(__webpack_require__)}for(t&&t(n);h<l.length;h++)a=l[h],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkFrontend=self.webpackChunkFrontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__={};return function(){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return gM}});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{FILE:function(){return Mr},TEXT:function(){return Nr},URL:function(){return Lr}});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{CreateFileMode:function(){return Ts},CreateFilePane:function(){return As}});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{CreateFileMode:function(){return Ps},CreateFilePane:function(){return Ds}});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{default:function(){return Mg}});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{default:function(){return mv}});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{default:function(){return Qv}});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{default:function(){return qy}});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{default:function(){return xb}});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{LinkedFileRefreshError:function(){return LinkedFileRefreshError}});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{LinkedFileInfo:function(){return Cw}});var y={};__webpack_require__.r(y),__webpack_require__.d(y,{default:function(){return k_}});var w={};__webpack_require__.r(w),__webpack_require__.d(w,{default:function(){return IE}});__webpack_require__(77950),__webpack_require__(94908),__webpack_require__(74069),__webpack_require__(32501),__webpack_require__(39529),__webpack_require__(31235),__webpack_require__(27233),__webpack_require__(28673),__webpack_require__(21850);var x=__webpack_require__(27481);__webpack_require__(36728),__webpack_require__(26936),__webpack_require__(16781),__webpack_require__(18178),__webpack_require__(43450),__webpack_require__(43430),__webpack_require__(58188),__webpack_require__(73439),__webpack_require__(21515),__webpack_require__(71372),__webpack_require__(99805),__webpack_require__(9575),__webpack_require__(96264),__webpack_require__(34115),__webpack_require__(634),__webpack_require__(71245),__webpack_require__(20796),__webpack_require__(15735),__webpack_require__(6886),x.Z.directive("fileEntity",["RecursionHelper",function(e){return{restrict:"E",scope:{entity:"=",permissions:"=",depth:"=?"},templateUrl:"entityListItemTemplate",compile:function(t){return e.compile(t,(function(e,t,n,r){return e.$originalApply=e.$apply,e.$apply=function(e){null==e&&(e=function(){});var t=this.$root.$$phase;return"$apply"===t||"$digest"===t?e():this.$originalApply(e)}}))}}}]);x.Z.controller("FileTreeController",["$scope",function(e){e.openNewDocModal=function(){window.dispatchEvent(new CustomEvent("file-tree.start-creating",{detail:{mode:"doc"}}))},e.orderByFoldersFirst=function(e){return"folder"===(null!=e?e.type:void 0)?"0":"1"}}]);var _=function(e){var t,n,r=(t=e.split(".").pop(),n=function(e){return e.toLowerCase()},null!=t?n(t):void 0);return["png","pdf","jpg","jpeg","gif"].includes(r)?"image":["csv","xls","xlsx"].includes(r)?"table":["py","r"].includes(r)?"file-text":["bib"].includes(r)?"book":"file"};x.Z.controller("FileTreeEntityController",["$scope","ide","$modal","$element",function(e,t,n,r){e.MAX_DEPTH=8,e.select=function(n){if(!n.ctrlKey&&!n.metaKey)return t.fileTreeManager.selectEntity(e.entity),e.$emit("entity:selected",e.entity);n.stopPropagation();var r=t.fileTreeManager.multiSelectedCount();return t.fileTreeManager.toggleMultiSelectEntity(e.entity),0===r?t.fileTreeManager.multiSelectSelectedEntity():void 0},"doc"===e.entity.type&&e.$watch("entity.selected",(function(t){var n,a,l,f,d,h;t&&(e.$emit("entity-file:selected",e.entity),n=r,a=$(".file-tree-list"),l=n.offset().top,f=l+n.outerHeight(),d=a.offset().top,h=d+a.height(),l>=d&&f<=h||e.$applyAsync((function(){r[0].scrollIntoView()})))})),e.iconTypeFromName=_}]);x.Z.controller("FileTreeFolderController",["$scope","ide","$modal","localStorage",function(e,t,n,r){e.expanded=r("folder.".concat(e.entity.id,".expanded"))||!1,e.toggleExpanded=function(){e.expanded=!e.expanded,e._storeCurrentStateInLocalStorage()},e.$on("entity-file:selected",(function(){e.expanded=!0,e._storeCurrentStateInLocalStorage()})),e._storeCurrentStateInLocalStorage=function(){r("folder.".concat(e.entity.id,".expanded"),e.expanded)}}]),__webpack_require__(34769),__webpack_require__(95342),__webpack_require__(68625),__webpack_require__(1939),__webpack_require__(62775);var S=__webpack_require__(46353),k=__webpack_require__(76635),C=__webpack_require__.n(k),E=__webpack_require__(2784),O=__webpack_require__(13980),j=__webpack_require__.n(O),T=__webpack_require__(1281),A=__webpack_require__(14951),P=__webpack_require__(47204),D=__webpack_require__(52322);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=(0,E.createContext)();function L(){var e=(0,E.useContext)(M);if(!e)throw new Error("useFileTreeMainContext is only available inside FileTreeMainProvider");return e}var N=function(e){var t=e.refProviders,n=e.reindexReferences,r=e.setRefProviderEnabled,a=e.setStartedFreeTrial,l=e.children,f=R((0,E.useState)(),2),d=f[0],h=f[1];return(0,D.jsx)(M.Provider,{value:{refProviders:t,reindexReferences:n,setRefProviderEnabled:r,setStartedFreeTrial:a,contextMenuCoords:d,setContextMenuCoords:h},children:l})};N.propTypes={reindexReferences:j().func.isRequired,refProviders:j().object.isRequired,setRefProviderEnabled:j().func.isRequired,setStartedFreeTrial:j().func.isRequired,children:j().oneOfType([j().arrayOf(j().node),j().node]).isRequired};__webpack_require__(49228);function F(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){return e.reduce((function(e,n){return e.then((function(e){return t(n).then((function(t){return[].concat(F(e),[t])}))}))}),Promise.resolve([]))}var U=__webpack_require__(28684);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}var z=["endpoint"];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==H(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===H(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function K(e){return"fileRef"===e?"file":e}var Y=__webpack_require__(38113);function X(e,t,n){return e._id!==t&&(e=(0,Y.Z7)(e,t).entity),!e.docs.some((function(e){return e.name===n}))&&(!e.fileRefs.some((function(e){return e.name===n}))&&!e.folders.some((function(e){return e.name===n})))}__webpack_require__(17368),__webpack_require__(24471),__webpack_require__(51172),__webpack_require__(88233),__webpack_require__(85940);var J=new RegExp("[\\/\\\\\\*\\u0000-\\u001F\\u007F\\u0080-\\u009F\\uD800-\\uDFFF]","g"),Q=new RegExp("(^\\.$)|(^\\.\\.$)|(^\\s+)|(\\s+$)","g"),ee=new RegExp("^(prototype|constructor|toString|toLocaleString|valueOf|hasOwnProperty|isPrototypeOf|propertyIsEnumerable|__defineGetter__|__lookupGetter__|__defineSetter__|__lookupSetter__|__proto__)$"),te=1024;function ne(e){return(t=e).length>0&&t.length<=te&&!e.match(J)&&!e.match(Q);var t}function re(e){return ee.test(e)}var oe=__webpack_require__(32025),ae=(__webpack_require__(93244),__webpack_require__(72779)),se=__webpack_require__.n(ae),le=__webpack_require__(86701),ce=__webpack_require__(18977),ue=__webpack_require__(44694);function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he=(0,E.createContext)(),pe={SELECT:"SELECT",MULTI_SELECT:"MULTI_SELECT",UNSELECT:"UNSELECT"};function me(e,t){switch(t.type){case pe.SELECT:return new Set([t.id]);case pe.MULTI_SELECT:var n=new Set(e);return n.has(t.id)?n.size>1&&n.delete(t.id):n.add(t.id),n;case pe.UNSELECT:var r=new Set(e);return r.delete(t.id),r;default:throw new Error("Unknown selectable action type: ".concat(t.type))}}function ge(e,t){switch(t.type){case pe.SELECT:return new Set([t.id]);case pe.MULTI_SELECT:case pe.UNSELECT:return e;default:throw new Error("Unknown selectable action type: ".concat(t.type))}}function ve(e){var t=e.onSelect,n=e.children,r=(0,A.d2)(ye),a=r._id,l=r.rootDocId,f=(0,oe._i)(be).permissionsLevel,d=fe((0,ce.Z)("doc.open_id.".concat(a),l),1)[0],h=(0,P.O)(),p=h.fileTreeData,y=h.setSelectedEntities,w=fe((0,E.useReducer)("readOnly"===f?ge:me,null,(function(){return d&&(0,Y.Z7)(p,d)?new Set([d]):new Set})),2),x=w[0],_=w[1],S=fe((0,E.useState)(new Set),2),k=S[0],O=S[1];(0,E.useEffect)((function(){var e=new Set;x.forEach((function(t){var n=(0,Y.Z7)(p,t);n&&n.path.forEach((function(t){return e.add(t)}))})),O(e)}),[p,x]);var j=(0,ue.Z)(x);(0,E.useEffect)((function(){if(!C().isEqual(x,j)){var e=Array.from(x).map((function(e){return(0,Y.Z7)(p,e)})).filter(Boolean);t(e),y(e)}}),[p,x,j,t,y]),(0,E.useEffect)((function(){function e(e){var t=(0,Y.Z7)(p,e.detail);t&&_({type:pe.SELECT,id:t.entity._id})}return window.addEventListener("editor.openDoc",e),function(){return window.removeEventListener("editor.openDoc",e)}}),[p]);var T=(0,E.useCallback)((function(e){_({type:pe.SELECT,id:e})}),[]),R=(0,E.useCallback)((function(e){_({type:pe.UNSELECT,id:e})}),[]),I=(0,E.useCallback)((function(e,t){var n=t?pe.MULTI_SELECT:pe.SELECT;_({type:n,id:e})}),[]),M={selectedEntityIds:x,selectedEntityParentIds:k,select:T,unselect:R,selectOrMultiSelectEntity:I};return(0,D.jsx)(he.Provider,{value:M,children:n})}ve.propTypes={onSelect:j().func.isRequired,children:j().oneOfType([j().arrayOf(j().node),j().node]).isRequired};var ye={_id:j().string.isRequired,rootDocId:j().string},be={permissionsLevel:j().oneOf(["readOnly","readAndWrite","owner"])};function we(e,t){var n=(0,le.l5)(xe),r=n.view,a=n.setView,l=(0,E.useContext)(he),f=l.selectedEntityIds,d=l.selectOrMultiSelectEntity,h=f.has(e),p=(0,E.useCallback)((function(n){d(e,n.ctrlKey||n.metaKey),a(t?"file":"editor")}),[e,d,a,t]),y=(0,E.useCallback)((function(e){p(e)}),[p]),w=(0,E.useCallback)((function(e){"Enter"!==e.key&&" "!==e.key||p(e)}),[p]),x=(0,E.useCallback)((function(t){f.has(e)||p(t)}),[e,p,f]),_=h&&"pdf"!==r;return{isSelected:h,props:(0,E.useMemo)((function(){return{className:se()({selected:_}),"aria-selected":_,onClick:y,onContextMenu:x,onKeyPress:w}}),[y,x,w,_])}}var xe={view:j().string,setView:j().func.isRequired};function _e(){var e=(0,E.useContext)(he);if(!e)throw new Error("useFileTreeSelectable is only available inside FileTreeSelectableProvider");return e}__webpack_require__(96928),__webpack_require__(92215),__webpack_require__(61229),__webpack_require__(79321);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Se(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Se(l)?l:String(l)),r)}var a,l}function Ce(e,t,n){return t&&ke(e.prototype,t),n&&ke(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}function je(e){var t=Ae();return function(){var n,r=De(e);if(t){var a=De(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $e(e){var t="function"==typeof Map?new Map:void 0;return $e=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Te(e,arguments,De(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Pe(r,e)},$e(e)}function Te(e,t,n){return Te=Ae()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Pe(a,n.prototype),a},Te.apply(null,arguments)}function Ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}var Re=function(e){Oe(InvalidFilenameError,e);var t=je(InvalidFilenameError);function InvalidFilenameError(){return Ee(this,InvalidFilenameError),t.call(this,"invalid filename")}return Ce(InvalidFilenameError)}($e(Error)),Ie=function(e){Oe(BlockedFilenameError,e);var t=je(BlockedFilenameError);function BlockedFilenameError(){return Ee(this,BlockedFilenameError),t.call(this,"blocked filename")}return Ce(BlockedFilenameError)}($e(Error)),Me=function(e){Oe(DuplicateFilenameError,e);var t=je(DuplicateFilenameError);function DuplicateFilenameError(){return Ee(this,DuplicateFilenameError),t.call(this,"duplicate filename")}return Ce(DuplicateFilenameError)}($e(Error)),Le=function(e){Oe(DuplicateFilenameMoveError,e);var t=je(DuplicateFilenameMoveError);function DuplicateFilenameMoveError(){return Ee(this,DuplicateFilenameMoveError),t.call(this,"duplicate filename on move")}return Ce(DuplicateFilenameMoveError)}($e(Error));function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ne(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ne(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze=(0,E.createContext)(),Ve={START_RENAME:"START_RENAME",START_DELETE:"START_DELETE",DELETING:"DELETING",START_CREATE_FILE:"START_CREATE_FILE",START_CREATE_FOLDER:"START_CREATE_FOLDER",CREATING_FILE:"CREATING_FILE",CREATING_FOLDER:"CREATING_FOLDER",MOVING:"MOVING",CANCEL:"CANCEL",CLEAR:"CLEAR",ERROR:"ERROR"},We={isDeleting:!1,isRenaming:!1,isCreatingFile:!1,isCreatingFolder:!1,isMoving:!1,inFlight:!1,actionedEntities:null,newFileCreateMode:null,error:null};function Ze(e){return e}function Ge(e,t){switch(t.type){case Ve.START_RENAME:return Ue(Ue({},We),{},{isRenaming:!0});case Ve.START_DELETE:return Ue(Ue({},We),{},{isDeleting:!0,actionedEntities:t.actionedEntities});case Ve.START_CREATE_FILE:return Ue(Ue({},We),{},{isCreatingFile:!0,newFileCreateMode:t.newFileCreateMode});case Ve.START_CREATE_FOLDER:return Ue(Ue({},We),{},{isCreatingFolder:!0});case Ve.CREATING_FILE:return Ue(Ue({},We),{},{isCreatingFile:!0,newFileCreateMode:e.newFileCreateMode,inFlight:!0});case Ve.CREATING_FOLDER:return Ue(Ue({},We),{},{isCreatingFolder:!0,inFlight:!0});case Ve.DELETING:return Ue(Ue({},We),{},{isDeleting:!0,inFlight:!0,actionedEntities:e.actionedEntities});case Ve.MOVING:return Ue(Ue({},We),{},{isMoving:!0,inFlight:!0});case Ve.CLEAR:return Ue({},We);case Ve.CANCEL:return e.inFlight?e:Ue({},We);case Ve.ERROR:return Ue(Ue({},e),{},{inFlight:!1,error:t.error});default:throw new Error("Unknown user action type: ".concat(t.type))}}function Ke(e){var t=e.children,n=(0,A.d2)(Ye)._id,r=(0,oe._i)(Xe).permissionsLevel,a=Fe((0,E.useReducer)("readOnly"===r?Ze:Ge,We),2),l=a[0],f=a[1],d=(0,P.O)(),h=d.fileTreeData,p=d.dispatchRename,y=d.dispatchMove,w=_e().selectedEntityIds,x=Fe((0,E.useState)(null),2),_=x[0],S=x[1],k=(0,E.useCallback)((function(){f({type:Ve.START_RENAME})}),[]),C=(0,E.useCallback)((function(e){var t=Array.from(w)[0],r=(0,Y.we)(h,t),a=r.entity.name;if(e===a)return f({type:Ve.CLEAR});var l=function(e,t,n){if(!ne(n))return new Re;if(!X(e,t.parentFolderId,n))return new Me;var r=1===t.path.length,a="folder"===t.type;if(r&&!a&&re(n))return new Ie}(h,r,e);return l?f({type:Ve.ERROR,error:l}):(f({type:Ve.CLEAR}),p(t,e),function(e,t,n,r){return(0,U.ty)("/project/".concat(e,"/").concat(K(t),"/").concat(n,"/rename"),{body:{name:r}})}(n,r.type,r.entity._id,e).catch((function(e){p(t,a),f({type:Ve.ERROR,error:e})})))}),[p,h,n,w]),O=(0,E.useCallback)((function(e,t){return!X(h,e,t)}),[h]),j=(0,E.useCallback)((function(){var e=Array.from(w).map((function(e){return(0,Y.we)(h,e).entity}));f({type:Ve.START_DELETE,actionedEntities:e})}),[h,w]),T=(0,E.useCallback)((function(){return f({type:Ve.DELETING}),B(Array.from(w),(function(e){var t=(0,Y.we)(h,e);return function(e,t,n){return(0,U.K$)("/project/".concat(e,"/").concat(K(t),"/").concat(n))}(n,t.type,t.entity._id).catch((function(e){if(404!==e.info.statusCode)throw e}))})).then((function(){f({type:Ve.CLEAR})})).catch((function(e){f({type:Ve.ERROR,error:e})}))}),[h,n,w]),R=(0,E.useCallback)((function(e,t){f({type:Ve.MOVING});var r=Array.from(t).map((function(e){return(0,Y.we)(h,e)})).filter((function(t){return t.parentFolderId!==e})),a=e===h._id,l=r.map((function(t){return function(e,t,n,r){if(!X(e,t,n.entity.name)){var a=new Le;return a.entityName=n.entity.name,a}var l="folder"===n.type;if(r&&!l&&re(n.entity.name))return new Ie}(h,e,t,a)})).find((function(e){return e}));return l?f({type:Ve.ERROR,error:l}):(r.forEach((function(t){return y(t.entity._id,e)})),B(r,(function(t){return function(e,t,n,r){return(0,U.ty)("/project/".concat(e,"/").concat(K(t),"/").concat(n,"/move"),{body:{folder_id:r}})}(n,t.type,t.entity._id,e)})).then((function(){f({type:Ve.CLEAR})})).catch((function(e){f({type:Ve.ERROR,error:e})})))}),[y,h,n]),I=(0,E.useCallback)((function(){f({type:Ve.START_CREATE_FOLDER})}),[]),M=(0,E.useMemo)((function(){return function(e,t){var n=Array.from(t)[0];if(!n)return e._id;var r=(0,Y.Z7)(e,n);if(!r)return e._id;return"folder"===r.type?r.entity._id:r.parentFolderId}(h,w)}),[h,w]),L=(0,E.useCallback)((function(e){var t=function(e,t,n){if(!ne(n.name))return new Re;if(!X(e,t,n.name))return new Me;var r=t===e._id,a="folder"===n.endpoint;if(r&&!a&&re(n.name))return new Ie}(h,M,e);return t?Promise.reject(t):function(e,t,n){var r=n.endpoint,a=G(n,z);return(0,U.ty)("/project/".concat(e,"/").concat(r),{body:W({parent_folder_id:t},a)})}(n,M,e)}),[h,M,n]),N=(0,E.useCallback)((function(e){return f({type:Ve.CREATING_FOLDER}),L({endpoint:"folder",name:e}).then((function(){f({type:Ve.CLEAR})})).catch((function(e){f({type:Ve.ERROR,error:e})}))}),[L]),F=(0,E.useCallback)((function(e){f({type:Ve.START_CREATE_FILE,newFileCreateMode:e})}),[]),q=(0,E.useCallback)((function(){F("doc")}),[F]),H=(0,E.useCallback)((function(){F("upload")}),[F]),V=(0,E.useCallback)((function(e){return f({type:Ve.CREATING_FILE}),L(e).then((function(){f({type:Ve.CLEAR})})).catch((function(e){f({type:Ve.ERROR,error:e})}))}),[L]),Z=(0,E.useCallback)((function(e){return e.endpoint="doc",V(e)}),[V]),J=(0,E.useCallback)((function(e){return e.endpoint="linked_file",V(e)}),[V]),Q=(0,E.useCallback)((function(){f({type:Ve.CANCEL})}),[]);(0,E.useEffect)((function(){function e(e){f({type:Ve.START_CREATE_FILE,newFileCreateMode:e.detail.mode})}return window.addEventListener("file-tree.start-creating",e),function(){window.removeEventListener("file-tree.start-creating",e)}}),[]);var ee=(0,E.useMemo)((function(){if(1===w.size){var e=Fe(w,1)[0],t=(0,Y.Z7)(h,e);if("fileRef"===(null==t?void 0:t.type))return"/project/".concat(n,"/file/").concat(e)}}),[h,n,w]),te=Ue(Ue({canDelete:w.size>0,canRename:1===w.size,canCreate:w.size<2},l),{},{parentFolderId:M,isDuplicate:O,startRenaming:k,finishRenaming:C,startDeleting:j,finishDeleting:T,finishMoving:R,startCreatingFile:F,startCreatingFolder:I,finishCreatingFolder:N,startCreatingDocOrFile:q,startUploadingDocOrFile:H,finishCreatingDoc:Z,finishCreatingLinkedFile:J,cancel:Q,droppedFiles:_,setDroppedFiles:S,downloadPath:ee});return(0,D.jsx)(ze.Provider,{value:te,children:t})}Ke.propTypes={children:j().oneOfType([j().arrayOf(j().node),j().node]).isRequired};var Ye={_id:j().string.isRequired},Xe={permissionsLevel:j().oneOf(["readOnly","readAndWrite","owner"])};function Je(){var e=(0,E.useContext)(ze);if(!e)throw new Error("useFileTreeActionable is only available inside FileTreeActionableProvider");return e}var Qe=__webpack_require__(76699),et=__webpack_require__(4031),tt=__webpack_require__.n(et);function nt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var rt="function"==typeof Symbol&&Symbol.observable||"@@observable",it=function(){return Math.random().toString(36).substring(7).split("").join(".")},ot={INIT:"@@redux/INIT"+it(),REPLACE:"@@redux/REPLACE"+it(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+it()}};function at(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function st(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(nt(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(nt(1));return n(st)(e,t)}if("function"!=typeof e)throw new Error(nt(2));var a=e,l=t,f=[],d=f,h=!1;function p(){d===f&&(d=f.slice())}function y(){if(h)throw new Error(nt(3));return l}function w(e){if("function"!=typeof e)throw new Error(nt(4));if(h)throw new Error(nt(5));var t=!0;return p(),d.push(e),function(){if(t){if(h)throw new Error(nt(6));t=!1,p();var n=d.indexOf(e);d.splice(n,1),f=null}}}function x(e){if(!at(e))throw new Error(nt(7));if(void 0===e.type)throw new Error(nt(8));if(h)throw new Error(nt(9));try{h=!0,l=a(l,e)}finally{h=!1}for(var t=f=d,n=0;n<t.length;n++){(0,t[n])()}return e}return x({type:ot.INIT}),(r={dispatch:x,subscribe:w,getState:y,replaceReducer:function(e){if("function"!=typeof e)throw new Error(nt(10));a=e,x({type:ot.REPLACE})}})[rt]=function(){var e,t=w;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(nt(11));function n(){e.next&&e.next(y())}return n(),{unsubscribe:t(n)}}})[rt]=function(){return this},e},r}var lt="dnd-core/INIT_COORDS",ct="dnd-core/BEGIN_DRAG",ut="dnd-core/PUBLISH_DRAG_SOURCE",ft="dnd-core/HOVER",dt="dnd-core/DROP",ht="dnd-core/END_DRAG",pt=function(e,t){return e===t};function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function bt(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,r=arguments.length>1?arguments[1]:void 0,a=r.payload;switch(r.type){case lt:case ct:return{initialSourceClientOffset:a.sourceClientOffset,initialClientOffset:a.clientOffset,clientOffset:a.clientOffset};case ft:return e=n.clientOffset,t=a.clientOffset,!e&&!t||e&&t&&e.x===t.x&&e.y===t.y?n:gt(gt({},n),{},{clientOffset:a.clientOffset});case ht:case dt:return yt;default:return n}}var wt="dnd-core/ADD_SOURCE",xt="dnd-core/ADD_TARGET",_t="dnd-core/REMOVE_SOURCE",St="dnd-core/REMOVE_TARGET";function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function Ct(e){return"object"===kt(e)}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Tt(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,r=arguments.length>1?arguments[1]:void 0,a=r.payload;switch(r.type){case ct:return Ot(Ot({},n),{},{itemType:a.itemType,item:a.item,sourceId:a.sourceId,isSourcePublic:a.isSourcePublic,dropResult:null,didDrop:!1});case ut:return Ot(Ot({},n),{},{isSourcePublic:!0});case ft:return Ot(Ot({},n),{},{targetIds:a.targetIds});case St:return-1===n.targetIds.indexOf(a.targetId)?n:Ot(Ot({},n),{},{targetIds:(e=n.targetIds,t=a.targetId,e.filter((function(e){return e!==t})))});case dt:return Ot(Ot({},n),{},{dropResult:a.dropResult,didDrop:!0,targetIds:[]});case ht:return Ot(Ot({},n),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function At(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case wt:case xt:return e+1;case _t:case St:return e-1;default:return e}}var Pt=[],Dt=[];function Rt(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ft:break;case wt:case xt:case St:case _t:return Pt;default:return Dt}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,a=t.prevTargetIds,l=void 0===a?[]:a,f=function(e,t){var n=new Map,r=function(e){n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var a=[];return n.forEach((function(e,t){1===e&&a.push(t)})),a}(r,l),d=f.length>0||!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pt;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(r,l);if(!d)return Pt;var h=l[l.length-1],p=r[r.length-1];return h!==p&&(h&&f.push(h),p&&f.push(p)),f}function It(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Rt(r.dirtyHandlerIds,{type:a.type,payload:Lt(Lt({},a.payload),{},{prevTargetIds:(e=r,t="dragOperation.targetIds",n=[],t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e))})}),dragOffset:bt(r.dragOffset,a),refCount:At(r.refCount,a),dragOperation:Tt(r.dragOperation,a),stateId:It(r.stateId)}}function qt(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=0;(l=new Error(t.replace(/%s/g,(function(){return r[f++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}function Bt(e,t){return{type:lt,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}Pt.__IS_NONE__=!0,Dt.__IS_ALL__=!0;var Ut={type:lt,payload:{clientOffset:null,sourceClientOffset:null}};function Ht(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,a=void 0===r||r,l=n.clientOffset,f=n.getSourceClientOffset,d=e.getMonitor(),h=e.getRegistry();e.dispatch(Bt(l)),function(e,t,n){qt(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){qt(n.getSource(e),"Expected sourceIds to be registered.")}))}(t,d,h);var p=function(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,d);if(null!==p){var y=null;if(l){if(!f)throw new Error("getSourceClientOffset must be defined");!function(e){qt("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(f),y=f(p)}e.dispatch(Bt(l,y));var w=h.getSource(p).beginDrag(d,p);!function(e){qt(Ct(e),"Item must be an object.")}(w),h.pinSource(p);var x=h.getSourceType(p);return{type:ct,payload:{itemType:x,item:w,sourceId:p,clientOffset:l||null,sourceClientOffset:y||null,isSourcePublic:!!a}}}e.dispatch(Ut)}}function zt(e){return function(){if(e.getMonitor().isDragging())return{type:ut}}}function Vt(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}function Wt(e){return function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clientOffset;!function(e){qt(Array.isArray(e),"Expected targetIds to be an array.")}(t);var r=t.slice(0),a=e.getMonitor(),l=e.getRegistry();return function(e,t,n){qt(t.isDragging(),"Cannot call hover while not dragging."),qt(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var a=e[r];qt(e.lastIndexOf(a)===r,"Expected targetIds to be unique in the passed array."),qt(n.getTarget(a),"Expected targetIds to be registered.")}}(r,a,l),function(e,t,n){for(var r=e.length-1;r>=0;r--){var a=e[r];Vt(t.getTargetType(a),n)||e.splice(r,1)}}(r,l,a.getItemType()),function(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}(r,a,l),{type:ft,payload:{targetIds:r,clientOffset:n||null}}}}function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){Kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yt(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();!function(e){qt(e.isDragging(),"Cannot call drop while not dragging."),qt(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);var a=function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);a.forEach((function(a,l){var f=function(e,t,n,r){var a=n.getTarget(e),l=a?a.drop(r,e):void 0;(function(e){qt(void 0===e||Ct(e),"Drop result must either be an object or undefined.")})(l),void 0===l&&(l=0===t?{}:r.getDropResult());return l}(a,l,r,n),d={type:dt,payload:{dropResult:Gt(Gt({},t),f)}};e.dispatch(d)}))}}function Xt(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){qt(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();null!=r&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource());return{type:ht}}}function Jt(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var en,tn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=n}var t,n,r;return t=e,n=[{key:"subscribeToStateChange",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0}).handlerIds;qt("function"==typeof e,"listener must be a function."),qt(void 0===n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var r=this.store.getState().stateId;return this.store.subscribe((function(){var a=t.store.getState(),l=a.stateId;try{var f=l===r||l===r+1&&!function(e,t){return e!==Pt&&(e===Dt||void 0===t||(n=e,t.filter((function(e){return n.indexOf(e)>-1}))).length>0);var n}(a.dirtyHandlerIds,n);f||e()}finally{r=l}}))}},{key:"subscribeToOffsetChange",value:function(e){var t=this;qt("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return qt(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return qt(t,"Expected to find a valid target."),!(!this.isDragging()||this.didDrop())&&Vt(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return qt(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}},{key:"isOverTarget",value:function(e){if(!e)return!1;var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1}).shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();if(r&&!Vt(n,r))return!1;var a=this.getTargetIds();if(!a.length)return!1;var l=a.indexOf(e);return t?l===a.length-1:l>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return e=this.store.getState().dragOffset,r=e.clientOffset,a=e.initialClientOffset,l=e.initialSourceClientOffset,r&&a&&l?Jt((n=l,{x:(t=r).x+n.x,y:t.y+n.y}),a):null;var e,t,n,r,a,l}},{key:"getDifferenceFromInitialOffset",value:function(){return e=this.store.getState().dragOffset,t=e.clientOffset,n=e.initialClientOffset,t&&n?Jt(t,n):null;var e,t,n}}],n&&Qt(t.prototype,n),r&&Qt(t,r),e}(),nn=0;function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function on(e,t){t&&Array.isArray(e)?e.forEach((function(e){return on(e,!1)})):qt("string"==typeof e||"symbol"===rn(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function an(e){ln.length||(sn(),!0),ln[ln.length]=e}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(en||(en={}));var sn,ln=[],cn=0;function un(){for(;cn<ln.length;){var e=cn;if(cn+=1,ln[e].call(),cn>1024){for(var t=0,n=ln.length-cn;t<n;t++)ln[t]=ln[t+cn];ln.length-=cn,cn=0}}ln.length=0,cn=0,!1}var dn,hn,pn,mn=void 0!==__webpack_require__.g?__webpack_require__.g:self,gn=mn.MutationObserver||mn.WebKitMutationObserver;function vn(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof gn?(dn=1,hn=new gn(un),pn=document.createTextNode(""),hn.observe(pn,{characterData:!0}),sn=function(){dn=-dn,pn.data=dn}):sn=vn(un),an.requestFlush=sn,an.makeRequestCallFromTimer=vn;var yn=[],bn=[],wn=an.makeRequestCallFromTimer((function throwFirstError(){if(bn.length)throw bn.shift()}));function xn(e){var t;(t=yn.length?yn.pop():new _n).task=e,an(t)}var _n=function(){function e(){}return e.prototype.call=function(){try{this.task.call()}catch(e){xn.onerror?xn.onerror(e):(bn.push(e),wn())}finally{this.task=null,yn[yn.length]=this}},e}();function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function En(e){var t=(nn++).toString();switch(e){case en.SOURCE:return"S".concat(t);case en.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function On(e){switch(e[0]){case"S":return en.SOURCE;case"T":return en.TARGET;default:qt(!1,"Cannot parse handler ID: ".concat(e))}}function jn(e,t){var n=e.entries(),r=!1;do{var a=n.next(),l=a.done;if(kn(a.value,2)[1]===t)return!0;r=!!l}while(!r);return!1}var $n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}var t,n,r;return t=e,n=[{key:"addSource",value:function(e,t){on(e),function(e){qt("function"==typeof e.canDrag,"Expected canDrag to be a function."),qt("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),qt("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(en.SOURCE,e,t);return this.store.dispatch(function(e){return{type:wt,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function(e,t){on(e,!0),function(e){qt("function"==typeof e.canDrop,"Expected canDrop to be a function."),qt("function"==typeof e.hover,"Expected hover to be a function."),qt("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(en.TARGET,e,t);return this.store.dispatch(function(e){return{type:xt,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function(e){return jn(this.dragSources,e)||jn(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return qt(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}},{key:"getTarget",value:function(e){return qt(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return qt(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return qt(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return On(e)===en.SOURCE}},{key:"isTargetId",value:function(e){return On(e)===en.TARGET}},{key:"removeSource",value:function(e){var t=this;qt(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:_t,payload:{sourceId:e}}}(e)),xn((function(){t.dragSources.delete(e),t.types.delete(e)}))}},{key:"removeTarget",value:function(e){qt(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:St,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);qt(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){qt(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,n){var r=En(e);return this.types.set(r,t),e===en.SOURCE?this.dragSources.set(r,n):e===en.TARGET&&this.dropTargets.set(r,n),r}}],n&&Sn(t.prototype,n),r&&Sn(t,r),e}();function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var An=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSetUp=!1,this.handleRefCountChange=function(){var e=t.store.getState().refCount>0;t.backend&&(e&&!t.isSetUp?(t.backend.setup(),t.isSetUp=!0):!e&&t.isSetUp&&(t.backend.teardown(),t.isSetUp=!1))};var r=function(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return st(Ft,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n);this.store=r,this.monitor=new tn(r,new $n(r)),r.subscribe(this.handleRefCountChange)}var t,n,r;return t=e,n=[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch,n=function(e){return{beginDrag:Ht(e),publishDragSource:zt(e),hover:Wt(e),drop:Yt(e),endDrag:Xt(e)}}(this);return Object.keys(n).reduce((function(r,a){var l,f=n[a];return r[a]=(l=f,function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var f=l.apply(e,r);void 0!==f&&t(f)}),r}),{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}],n&&Tn(t.prototype,n),r&&Tn(t,r),e}();function Pn(e,t,n,r){var a=new An(r),l=e(a,t,n);return a.receiveBackend(l),a}var Dn=E.createContext({dragDropManager:void 0});function Rn(e,t,n,r){return{dragDropManager:Pn(e,t,n,r)}}function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ln(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Nn=0,Fn=(0,E.memo)((function(e){var t=e.children,n=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bn(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=t;a[qn]||(a[qn]=Rn(e,t,n,r));return a[qn]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(Ln(e,["children"])),r=In(n,2),a=r[0],l=r[1];return E.useEffect((function(){return l&&Nn++,function(){l&&(0===--Nn&&(Bn()[qn]=null))}}),[]),E.createElement(Dn.Provider,{value:a},t)}));Fn.displayName="DndProvider";var qn=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function Bn(){return void 0!==__webpack_require__.g?__webpack_require__.g:window}var Un="undefined"!=typeof window?E.useLayoutEffect:E.useEffect;function Hn(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var l=Object.keys(e),f=Object.keys(t);if(l.length!==f.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(t),h=0;h<l.length;h++){var p=l[h];if(!d(p))return!1;var y=e[p],w=t[p];if(!1===(a=n?n.call(r,y,w,p):void 0)||void 0===a&&y!==w)return!1}return!0}function zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wn(e,t,n){var r=zn((0,E.useState)((function(){return t(e)})),2),a=r[0],l=r[1],f=(0,E.useCallback)((function(){var r=t(e);Hn(a,r)||(l(r),n&&n())}),[a,e,n]);return Un(f,[]),[a,f]}function Zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kn(e,t,n){var r=Zn(Wn(e,t,n),2),a=r[0],l=r[1];return Un((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(l,{handlerIds:[t]})}),[e,l]),a}function Yn(){var e=(0,E.useContext)(Dn).dragDropManager;return qt(null!=e,"Expected drag drop context"),e}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Jn=!1,Qn=!1,er=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceId=null,this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,n=[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){qt(!Jn,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Jn=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Jn=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;qt(!Qn,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Qn=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Qn=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}],n&&Xn(t.prototype,n),r&&Xn(t,r),e}();__webpack_require__(96708);function tr(e,t){"function"==typeof e?e(t):e.current=t}function nr(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,E.isValidElement)(t)){var r=t;return e(r,n),r}var a=t;!function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}(a);var l=n?function(t){return e(t,n)}:e;return function(e,t){var n=e.ref;return qt("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?(0,E.cloneElement)(e,{ref:function(e){tr(n,e),tr(t,e)}}):(0,E.cloneElement)(e,{ref:t})}(a,l)}}function rr(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var a=nr(r);t[n]=function(){return a}}})),t}function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function or(e){return null!==e&&"object"===ir(e)&&Object.prototype.hasOwnProperty.call(e,"current")}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var sr=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=rr({dragSource:function(e,t){n.clearDragSource(),n.dragSourceOptions=t||null,or(e)?n.dragSourceRef=e:n.dragSourceNode=e,n.reconnectDragSource()},dragPreview:function(e,t){n.clearDragPreview(),n.dragPreviewOptions=t||null,or(e)?n.dragPreviewRef=e:n.dragPreviewNode=e,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}var t,n,r;return t=e,n=[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!Hn(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!Hn(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}],n&&ar(t.prototype,n),r&&ar(t,r),e}();function lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hr(e){var t=(0,E.useRef)(e);t.current=e,qt(null!=e.item,"item must be defined"),qt(null!=e.item.type,"item type must be defined");var n,r=fr((n=Yn(),[(0,E.useMemo)((function(){return new er(n)}),[n]),(0,E.useMemo)((function(){return new sr(n.getBackend())}),[n])]),2),a=r[0],l=r[1];!function(e,t,n){var r=Yn(),a=(0,E.useMemo)((function(){return{beginDrag:function(){var n=e.current,r=n.begin,a=n.item;if(r){var l=r(t);return qt(null==l||"object"===ur(l),"dragSpec.begin() must either return an object, undefined, or null"),l||a||{}}return a||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(n,r){var a=e.current.isDragging;return a?a(t):r===n.getSourceId()},endDrag:function(){var r=e.current.end;r&&r(t.getItem(),t),n.reconnect()}}}),[]);Un((function(){var l=function(e,t,n){var r=n.getRegistry(),a=r.addSource(e,t);return[a,function(){return r.removeSource(a)}]}(e.current.item.type,a,r),f=lr(l,2),d=f[0],h=f[1];return t.receiveHandlerId(d),n.receiveHandlerId(d),h}),[])}(t,a,l);var f=Kn(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),d=(0,E.useMemo)((function(){return l.hooks.dragSource()}),[l]),h=(0,E.useMemo)((function(){return l.hooks.dragPreview()}),[l]);return Un((function(){l.dragSourceOptions=t.current.options||null,l.reconnect()}),[l]),Un((function(){l.dragPreviewOptions=t.current.previewOptions||null,l.reconnect()}),[l]),[f,d,h]}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var mr=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=rr({dropTarget:function(e,t){n.clearDropTarget(),n.dropTargetOptions=t,or(e)?n.dropTargetRef=e:n.dropTargetNode=e,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var t,n,r;return t=e,n=[{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!Hn(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}},{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}],n&&pr(t.prototype,n),r&&pr(t,r),e}();function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var vr=!1,yr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetId=null,this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,n=[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;qt(!vr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return vr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{vr=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}],n&&gr(t.prototype,n),r&&gr(t,r),e}();function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sr(e){var t=(0,E.useRef)(e);t.current=e,qt(null!=e.accept,"accept must be defined");var n,r=xr((n=Yn(),[(0,E.useMemo)((function(){return new yr(n)}),[n]),(0,E.useMemo)((function(){return new mr(n.getBackend())}),[n])]),2),a=r[0],l=r[1];!function(e,t,n){var r=Yn(),a=(0,E.useMemo)((function(){return{canDrop:function(){var n=e.current.canDrop;return!n||n(t.getItem(),t)},hover:function(){var n=e.current.hover;n&&n(t.getItem(),t)},drop:function(){var n=e.current.drop;if(n)return n(t.getItem(),t)}}}),[t]);Un((function(){var l=function(e,t,n){var r=n.getRegistry(),a=r.addTarget(e,t);return[a,function(){return r.removeTarget(a)}]}(e.current.accept,a,r),f=br(l,2),d=f[0],h=f[1];return t.receiveHandlerId(d),n.receiveHandlerId(d),h}),[t,n])}(t,a,l);var f=Kn(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),d=(0,E.useMemo)((function(){return l.hooks.dropTarget()}),[l]);return Un((function(){l.dropTargetOptions=e.options||null,l.reconnect()}),[e.options]),[f,d]}function kr(e){var t=null;return function(){return null==t&&(t=e()),t}}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Er=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[],this.isNodeInDocument=t}var t,n,r;return t=e,n=[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var a=[];return n.forEach((function(e){return a.push(e)})),a}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}],n&&Cr(t.prototype,n),r&&Cr(t,r),e}(),Or=kr((function(){return/firefox/i.test(navigator.userAgent)})),jr=kr((function(){return Boolean(window.safari)}));function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Tr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,a=[],l=0;l<r;l++)a.push(l);a.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var f,d,h=[],p=[],y=[],w=0;w<r-1;w++)f=t[w+1]-t[w],d=n[w+1]-n[w],p.push(f),h.push(d),y.push(d/f);for(var x=[y[0]],_=0;_<p.length-1;_++){var S=y[_],k=y[_+1];if(S*k<=0)x.push(0);else{f=p[_];var C=p[_+1],E=f+C;x.push(3*E/((E+C)/S+(E+f)/k))}}x.push(y[y.length-1]);for(var O,j=[],T=[],A=0;A<x.length-1;A++){O=y[A];var P=x[A],D=1/p[A],R=P+x[A+1]-O-O;j.push((O-P-R)*D),T.push(R*D*D)}this.xs=t,this.ys=n,this.c1s=x,this.c2s=j,this.c3s=T}var t,n,r;return t=e,n=[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,a=this.c2s,l=this.c3s,f=t.length-1;if(e===t[f])return n[f];for(var d,h=0,p=l.length-1;h<=p;){var y=t[d=Math.floor(.5*(h+p))];if(y<e)h=d+1;else{if(!(y>e))return n[d];p=d-1}}var w=e-t[f=Math.max(0,p)],x=w*w;return n[f]+r[f]*w+a[f]*x+l[f]*w*x}}],n&&$r(t.prototype,n),r&&$r(t,r),e}(),Ar=1;function Pr(e){var t=e.nodeType===Ar?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function Dr(e){return{x:e.clientX,y:e.clientY}}function Rr(e,t,n,r,a){var l,f=function(e){var t;return"IMG"===e.nodeName&&(Or()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),d=Pr(f?e:t),h={x:n.x-d.x,y:n.y-d.y},p=e.offsetWidth,y=e.offsetHeight,w=r.anchorX,x=r.anchorY,_=function(e,t,n,r){var a=e?t.width:n,l=e?t.height:r;return jr()&&e&&(l/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:l}}(f,t,p,y),S=_.dragPreviewWidth,k=_.dragPreviewHeight,C=a.offsetX,E=a.offsetY,O=0===E||E;return{x:0===C||C?C:new Tr([0,.5,1],[h.x,h.x/p*S,h.x+S-p]).interpolate(w),y:O?E:(l=new Tr([0,.5,1],[h.y,h.y/y*k,h.y+k-y]).interpolate(x),jr()&&f&&(l+=(window.devicePixelRatio-1)*k),l)}}var Ir,Mr="__NATIVE_FILE__",Lr="__NATIVE_URL__",Nr="__NATIVE_TEXT__";function Fr(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Br=(qr(Ir={},Mr,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),qr(Ir,Lr,{exposeProperties:{urls:function(e,t){return Fr(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]}),qr(Ir,Nr,{exposeProperties:{text:function(e,t){return Fr(e,t,"")}},matchesTypes:["Text","text/plain"]}),Ir);function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Hr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.item={},this.initializeExposedProperties()}var t,n,r;return t=e,(n=[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}])&&Ur(t.prototype,n),r&&Ur(t,r),e}();function zr(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(Br).filter((function(e){return Br[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function Vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalContext=t}var t,n,r;return t=e,(n=[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}},{key:"document",get:function(){if(this.window)return this.window.document}}])&&Vr(t.prototype,n),r&&Vr(t,r),e}();function Zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(n),!0).forEach((function(t){Kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Xr,Jr=function(){function t(e,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){var t=r.sourceNodes.get(e);return t&&Pr(t)||null},this.endDragNativeItem=function(){r.isDraggingNativeItem()&&(r.actions.endDrag(),r.currentNativeHandle&&r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)},this.isNodeInDocument=function(e){return Boolean(e&&r.document&&r.document.body&&document.body.contains(e))},this.endDragIfSourceWasRemovedFromDOM=function(){var e=r.currentDragSourceNode;r.isNodeInDocument(e)||r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragStartCapture=function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]},this.handleTopDragStart=function(e){if(!e.defaultPrevented){var t=r.dragStartSourceIds;r.dragStartSourceIds=null;var n=Dr(e);r.monitor.isDragging()&&r.actions.endDrag(),r.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:n});var a=e.dataTransfer,l=zr(a);if(r.monitor.isDragging()){if(a&&"function"==typeof a.setDragImage){var f=r.monitor.getSourceId(),d=r.sourceNodes.get(f),h=r.sourcePreviewNodes.get(f)||d;if(h){var p=r.getCurrentSourcePreviewNodeOptions(),y=Rr(d,h,n,{anchorX:p.anchorX,anchorY:p.anchorY},{offsetX:p.offsetX,offsetY:p.offsetY});a.setDragImage(h,y.x,y.y)}}try{null==a||a.setData("application/json",{})}catch(e){}r.setCurrentDragSourceNode(e.target),r.getCurrentSourcePreviewNodeOptions().captureDraggingState?r.actions.publishDragSource():setTimeout((function(){return r.actions.publishDragSource()}),0)}else if(l)r.beginDragNativeItem(l);else{if(a&&!a.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}},this.handleTopDragEndCapture=function(){r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(r.dragEnterTargetIds=[],r.enterLeaveCounter.enter(e.target)&&!r.monitor.isDragging()){var t=e.dataTransfer,n=zr(t);n&&r.beginDragNativeItem(n,t)}},this.handleTopDragEnter=function(e){var t=r.dragEnterTargetIds;(r.dragEnterTargetIds=[],r.monitor.isDragging())&&(r.altKeyPressed=e.altKey,Or()||r.actions.hover(t,{clientOffset:Dr(e)}),t.some((function(e){return r.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){r.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var t=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));r.altKeyPressed=e.altKey,r.actions.hover(t||[],{clientOffset:Dr(e)}),(t||[]).some((function(e){return r.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){r.isDraggingNativeItem()&&e.preventDefault(),r.enterLeaveCounter.leave(e.target)&&r.isDraggingNativeItem()&&r.endDragNativeItem()},this.handleTopDropCapture=function(e){var t;(r.dropTargetIds=[],e.preventDefault(),r.isDraggingNativeItem())&&(null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));r.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var t=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(t,{clientOffset:Dr(e)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new Wr(n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Er(this.isNodeInDocument)}var n,r,a;return n=t,r=[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var a=function(t){return r.handleDragStart(t,e)},l=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",a),t.addEventListener("selectstart",l),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",a),t.removeEventListener("selectstart",l),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},a=function(t){return n.handleDragOver(t,e)},l=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",a),t.addEventListener("drop",l),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",a),t.removeEventListener("drop",l)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Gr({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return Gr({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var t=this.monitor.getItemType();return Object.keys(e).some((function(n){return e[n]===t}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new Hr(Br[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}],r&&Yr(n.prototype,r),a&&Yr(n,a),t}(),Qr=function(e,t){return new Jr(e,t)};function ei(e){return ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ei(e)}function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach((function(t){ri(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ri(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ei(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ei(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ei(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ai(e,t,n){return ai=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&si(a,n.prototype),a},ai.apply(null,arguments)}function si(e,t){return si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},si(e,t)}var li=Rn((function(){function e(t){return!(!t.getAttribute||!t.getAttribute("dnd-container"))||!!t.parentNode&&e(t.parentNode)}for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=ai(Qr,n);return["handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture"].forEach((function(t){var n=a[t];a[t]=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];e(t.target)&&n.apply(void 0,[t].concat(a))}})),a})),ci="ENTITY";function ui(e){var t=e.children,n=(0,E.useRef)(li);return(0,D.jsx)(Fn,{manager:n.current.dragDropManager,children:t})}function fi(e){var t=(0,Qe.$)().t,n=(0,oe._i)(di).permissionsLevel,r=(0,P.O)().fileTreeData,a=_e().selectedEntityIds,l=ii((0,E.useState)(!0),2),f=l[0],d=l[1],h={type:ci},p=hr({item:h,begin:function(){var n=function(e,t){return e.size>1&&e.has(t)?new Set(e):new Set([t])}(a,e),l=(0,Y.gl)(r,n),f=function(e,t){if(1===e.size){return Array.from(e)[0].entity.name}return t("n_items",{count:e.size})}(l,t),d=function(e){var t=Array.from(e).filter((function(e){return"folder"===e.type})).map((function(e){return e.entity})),n=new Set(t);return(0,Y.mz)(n)}(l);return ni(ni({},h),{},{title:f,forbiddenFolderIds:d,draggedEntityIds:n})},collect:function(e){return{isDragging:!!e.isDragging()}},canDrag:function(){return"readOnly"!==n&&f}}),y=ii(p,3),w=y[0].isDragging,x=y[1],_=y[2];return(0,E.useEffect)((function(){_((Xr||((Xr=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Xr))}),[_]),{dragRef:x,isDragging:w,setIsDraggable:d}}ui.propTypes={children:j().oneOfType([j().arrayOf(j().node),j().node]).isRequired};var di={permissionsLevel:j().oneOf(["readOnly","readAndWrite","owner"])};function hi(e){var t=Je(),n=t.finishMoving,r=t.setDroppedFiles,a=t.startUploadingDocOrFile,l=Sr({accept:[ci,Mr],canDrop:function(t,n){return!!n.isOver({shallow:!0})&&(t.type!==ci||!t.forbiddenFolderIds.has(e))},drop:function(t,l){l.didDrop()||(t.type===ci?n(e,t.draggedEntityIds):tt()(t).then((function(t){r({files:t,targetFolderId:e}),a()})))},collect:function(e){return{isOver:e.canDrop()}}}),f=ii(l,2),d=f[0].isOver;return{dropRef:f[1],isOver:d}}function pi(e){var t=e.refProviders,n=e.reindexReferences,r=e.setRefProviderEnabled,a=e.setStartedFreeTrial,l=e.onSelect,f=e.children;return(0,D.jsx)(N,{refProviders:t,setRefProviderEnabled:r,setStartedFreeTrial:a,reindexReferences:n,children:(0,D.jsx)(ve,{onSelect:l,children:(0,D.jsx)(Ke,{children:(0,D.jsx)(ui,{children:f})})})})}pi.propTypes={reindexReferences:j().func.isRequired,refProviders:j().object.isRequired,setRefProviderEnabled:j().func.isRequired,setStartedFreeTrial:j().func.isRequired,onSelect:j().func.isRequired,children:j().oneOfType([j().arrayOf(j().node),j().node]).isRequired};var mi=pi;function gi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,l=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yi(e){var t,n,r,a,l,f=e.isOver,d=(t=function(e){return{isDragging:e.isDragging(),item:e.getItem(),clientOffset:e.getClientOffset()}},n=Yn().getMonitor(),r=gi(Wn(n,t),2),a=r[0],l=r[1],(0,E.useEffect)((function(){return n.subscribeToOffsetChange(l)})),(0,E.useEffect)((function(){return n.subscribeToStateChange(l)})),a),h=d.isDragging,p=d.item,y=d.clientOffset,w=(0,E.useRef)(),x=w.current?w.current.getBoundingClientRect():null;return h&&p.title?(0,D.jsx)("div",{ref:w,className:se()("dnd-draggable-preview-layer",{"dnd-droppable-hover":f}),children:(0,D.jsx)("div",{style:wi(y,x),children:(0,D.jsx)(bi,{title:p.title})})}):null}function bi(e){var t=e.title;return(0,D.jsx)("div",{className:"dnd-draggable-preview-item",children:t})}function wi(e,t){if(!t||!e)return{display:"none"};var n=t.x,r=t.y,a=e.x,l=e.y-r-15,f="translate(".concat(a-n-15,"px, ").concat(l,"px)");return{transform:f,WebkitTransform:f}}yi.propTypes={isOver:j().bool.isRequired},bi.propTypes={title:j().string.isRequired};var xi=yi,_i=__webpack_require__(93057);function Si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ki(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ci(){var e=(0,E.useRef)(null),t=Si((0,E.useState)(!1),2),n=t[0],r=t[1],a=(0,E.useCallback)((function(){return r(!1)}),[]);return(0,E.useEffect)((function(){if(!n){var t=null;return e.current&&(t=window.requestAnimationFrame((function(){e.current&&(e.current.focus(),r(!0),t=null)}))),function(){null!==t&&window.cancelAnimationFrame(t)}}})),{autoFocusedRef:e,resetAutoFocus:a}}function Ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ji(e){var t=e.name,n=e.isSelected,r=e.setIsDraggable,a=Je(),l=a.isRenaming,f=a.startRenaming,d=a.finishRenaming,h=a.error,p=a.cancel,y=l&&n&&!h;return(0,E.useEffect)((function(){r(!y)}),[r,y]),y?(0,D.jsx)(Ti,{initialValue:t,finishRenaming:d,cancel:p}):(0,D.jsx)($i,{name:t,isSelected:n,startRenaming:f})}function $i(e){var t=e.name,n=e.isSelected,r=e.startRenaming,a=Ei((0,E.useState)(0),2),l=a[0],f=a[1];return(0,D.jsx)("button",{className:"item-name-button",onClick:function(){f(l+1),n||f(0)},onDoubleClick:function(){l<2||r()},children:(0,D.jsx)("span",{children:t})})}function Ti(e){var t=e.initialValue,n=e.finishRenaming,r=e.cancel,a=Ei((0,E.useState)(t),2),l=a[0],f=a[1],d=Ci().autoFocusedRef;return(0,D.jsx)("span",{className:"rename-input",children:(0,D.jsx)("input",{type:"text",value:l,onKeyDown:function(e){"Enter"===e.key&&n(l),"Escape"===e.key&&r()},onChange:function(e){f(e.target.value)},onBlur:function(){n(l)},onFocus:function(e){var t=e.target.value.lastIndexOf(".");e.target.setSelectionRange(0,t)},ref:d})})}ji.propTypes={name:j().string.isRequired,isSelected:j().bool.isRequired,setIsDraggable:j().func.isRequired},$i.propTypes={name:j().string.isRequired,startRenaming:j().func.isRequired,isSelected:j().bool.isRequired},Ti.propTypes={initialValue:j().string.isRequired,finishRenaming:j().func.isRequired,cancel:j().func.isRequired};var Ai=ji,Pi=__webpack_require__(28316);function Di(e){return function(t){t.stopPropagation(),e&&e(t)}}var Ri=__webpack_require__(63584),Ii=__webpack_require__(10280);function Mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Li(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ni(e){var t=e.id,n=(0,Qe.$)().t,r=L(),a=r.contextMenuCoords,l=r.setContextMenuCoords,f=Mi((0,E.useState)(),2),d=f[0],h=f[1];return(0,D.jsx)("div",{className:"menu-button btn-group",children:(0,D.jsx)(Ri.Z,{className:"entity-menu-toggle",bsSize:"sm",id:"menu-button-".concat(t),onClick:Di((function(e){var t=d.getBoundingClientRect();l(a?null:{top:t.top+t.height/2,left:t.right})})),ref:function(e){e&&h((0,Pi.findDOMNode)(e))},bsStyle:null,children:(0,D.jsx)(Ii.Z,{type:"ellipsis-v",accessibilityLabel:n("menu")})})})}Ni.propTypes={id:j().string.isRequired};var Fi=Ni;function qi(e){var t=e.id,n=e.name,r=e.isSelected,a=e.icons,l=(0,oe._i)(Bi).permissionsLevel,f=L().setContextMenuCoords,d=Je().isRenaming,h=_e().selectedEntityIds,p="readOnly"!==l&&r&&1===h.size,y=fi(t),w=y.isDragging,x=y.dragRef,_=y.setIsDraggable,S=(0,E.useRef)();return(0,E.useEffect)((function(){var e=S.current;r&&e&&setTimeout((function(){e&&(0,_i.Z)(e,{scrollMode:"if-needed"})}),100)}),[r,S]),(0,D.jsx)("div",{className:se()("entity",{"dnd-draggable-dragging":w}),role:"presentation",ref:x,draggable:!d,onContextMenu:function(e){e.preventDefault(),f({top:e.pageY,left:e.pageX})},children:(0,D.jsxs)("div",{className:"entity-name entity-name-react",role:"presentation",ref:S,children:[a,(0,D.jsx)(Ai,{name:n,isSelected:r,setIsDraggable:_}),p?(0,D.jsx)(Fi,{id:t}):null]})})}qi.propTypes={id:j().string.isRequired,name:j().string.isRequired,isSelected:j().bool.isRequired,icons:j().node};var Bi={permissionsLevel:j().oneOf(["readOnly","readAndWrite","owner"])},Ui=qi;function Hi(e){var t=e.split(".").pop();return t=t?t.toLowerCase():t,["png","pdf","jpg","jpeg","gif"].includes(t)?"image":["csv","xls","xlsx"].includes(t)?"table":["py","r"].includes(t)?"file-text":["bib"].includes(t)?"book":"file"}function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach((function(t){Zi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==zi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zi(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gi(e){var t=e.name,n=e.id,r=e.isFile,a=e.isLinkedFile,l=we(n,r),f=l.isSelected,d=l.props;return(0,D.jsx)("li",Wi(Wi({role:"treeitem"},d),{},{"aria-label":t,tabIndex:"0",children:(0,D.jsx)(Ui,{id:n,name:t,isSelected:f,icons:(0,D.jsx)(Ki,{isLinkedFile:a,name:t})})}))}Gi.propTypes={name:j().string.isRequired,id:j().string.isRequired,isFile:j().bool,isLinkedFile:j().bool};var Ki=function(e){var t=e.isLinkedFile,n=e.name,r=(0,Qe.$)().t,a=se()("spaced","file-tree-icon",{"linked-file-icon":t});return(0,D.jsxs)(D.Fragment,{children:[" ",(0,D.jsx)(Ii.Z,{type:Hi(n),fw:!0,className:a}),t&&(0,D.jsx)(Ii.Z,{type:"external-link-square",modifier:"rotate-180",className:"linked-file-highlight",accessibilityLabel:r("linked_file")})]})};Ki.propTypes={name:j().string.isRequired,isLinkedFile:j().bool};var Yi=Gi;function Xi(e){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(e)}function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach((function(t){eo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Xi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xi(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function to(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return no(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return no(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ro(e){var t=e.name,n=e.id,r=e.folders,a=e.docs,l=e.files,f=(0,Qe.$)().t,d=we(n),h=d.isSelected,p=d.props,y=_e().selectedEntityParentIds,w=to((0,ce.Z)("folder.".concat(n,".expanded"),!1),2),x=w[0],_=w[1];(0,E.useEffect)((function(){y.has(n)&&_(!0)}),[n,y,_]);var S=hi(n),k=S.isOver,C=S.dropRef,O=hi(n),j=O.isOver,T=O.dropRef,A=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("button",{onClick:function(){_(!x)},"aria-label":f(x?"collapse":"expand"),children:(0,D.jsx)(Ii.Z,{type:x?"angle-down":"angle-right",fw:!0,className:"file-tree-expand-icon"})}),(0,D.jsx)(Ii.Z,{type:x?"folder-open":"folder",fw:!0,className:"file-tree-folder-icon"})]});return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("li",Qi(Qi({role:"treeitem"},p),{},{"aria-expanded":x,"aria-label":t,tabIndex:"0",ref:C,className:se()(p.className,{"dnd-droppable-hover":k||j}),children:(0,D.jsx)(Ui,{id:n,name:t,isSelected:h,icons:A})})),x?(0,D.jsx)(go,{folders:r,docs:a,files:l,dropRef:T}):null]})}ro.propTypes={name:j().string.isRequired,id:j().string.isRequired,folders:j().array.isRequired,docs:j().array.isRequired,files:j().array.isRequired};var oo=ro,ao=__webpack_require__(50325);function so(e){return so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},so(e)}function lo(e){return function(e){if(Array.isArray(e))return co(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return co(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){ho(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ho(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==so(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==so(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===so(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function po(e){var t=e.folders,n=e.docs,r=e.files,a=e.classes,l=void 0===a?{}:a,f=e.dropRef,d=void 0===f?null:f,h=e.children;r=r.map((function(e){return fo(fo({},e),{},{isFile:!0})}));var p=[].concat(lo(n),lo(r));return(0,D.jsxs)("ul",{className:se()("list-unstyled",l.root),role:"tree",ref:d,"dnd-container":"true",children:[t.sort(mo).map((function(e){return(0,D.jsx)(oo,{name:e.name,id:e._id,folders:e.folders,docs:e.docs,files:e.fileRefs},e._id)})),p.sort(mo).map((function(e){return(0,D.jsx)(Yi,{name:e.name,id:e._id,isFile:e.isFile,isLinkedFile:e.linkedFileData&&!!e.linkedFileData.provider},e._id)})),h]})}function mo(e,t){return ao.W.compare(e.name,t.name)}po.propTypes={folders:j().array.isRequired,docs:j().array.isRequired,files:j().array.isRequired,classes:j().exact({root:j().string}),dropRef:j().func,children:j().node};var go=po,vo=__webpack_require__(24958);var yo={permissionsLevel:j().oneOf(["readOnly","readAndWrite","owner"])};function bo(){var e=(0,Qe.$)().t,t=Je(),n=t.canCreate,r=t.startCreatingFolder,a=t.startCreatingDocOrFile,l=t.startUploadingDocOrFile;return n?(0,D.jsxs)("div",{className:"toolbar-left",children:[(0,D.jsx)(vo.Z,{id:"new-file",description:e("new_file"),overlayProps:{placement:"bottom"},children:(0,D.jsx)(Ri.Z,{onClick:a,bsStyle:null,children:(0,D.jsx)(Ii.Z,{type:"file",fw:!0,accessibilityLabel:e("new_file")})})}),(0,D.jsx)(vo.Z,{id:"new-folder",description:e("new_folder"),overlayProps:{placement:"bottom"},children:(0,D.jsx)(Ri.Z,{onClick:r,bsStyle:null,children:(0,D.jsx)(Ii.Z,{type:"folder",fw:!0,accessibilityLabel:e("new_folder")})})}),(0,D.jsx)(vo.Z,{id:"upload",description:e("upload"),overlayProps:{placement:"bottom"},children:(0,D.jsx)(Ri.Z,{onClick:l,children:(0,D.jsx)(Ii.Z,{type:"upload",fw:!0,accessibilityLabel:e("upload")})})})]}):null}function wo(){var e=(0,Qe.$)().t,t=Je(),n=t.canRename,r=t.canDelete,a=t.startRenaming,l=t.startDeleting;return n||r?(0,D.jsxs)("div",{className:"toolbar-right",children:[n?(0,D.jsx)(vo.Z,{id:"rename",description:e("rename"),overlayProps:{placement:"bottom"},children:(0,D.jsx)(Ri.Z,{onClick:a,children:(0,D.jsx)(Ii.Z,{type:"pencil",fw:!0,accessibilityLabel:e("rename")})})}):null,r?(0,D.jsx)(vo.Z,{id:"delete",description:e("delete"),overlayProps:{placement:"bottom"},children:(0,D.jsx)(Ri.Z,{onClick:l,children:(0,D.jsx)(Ii.Z,{type:"trash-o",fw:!0,accessibilityLabel:e("delete")})})}):null]}):null}var xo=function(){return"readOnly"===(0,oe._i)(yo).permissionsLevel?null:(0,D.jsxs)("div",{className:"toolbar toolbar-filetree",children:[(0,D.jsx)(bo,{}),(0,D.jsx)(wo,{})]})},_o=__webpack_require__(24578),So=__webpack_require__(11685);var ko=function(){var e=(0,Qe.$)().t,t=Je(),n=t.isDeleting,r=t.inFlight,a=t.finishDeleting,l=t.actionedEntities,f=t.cancel,d=t.error;if(!n)return null;function h(){f()}return(0,D.jsxs)(So.Z,{show:!0,onHide:h,children:[(0,D.jsx)(_o.Z.Header,{children:(0,D.jsx)(_o.Z.Title,{children:e("delete")})}),(0,D.jsxs)(_o.Z.Body,{children:[(0,D.jsx)("p",{children:e("sure_you_want_to_delete")}),(0,D.jsx)("ul",{children:l.map((function(e){return(0,D.jsx)("li",{children:e.name},e._id)}))}),d&&(0,D.jsx)("div",{className:"alert alert-danger file-tree-modal-alert",children:e("generic_something_went_wrong")})]}),(0,D.jsx)(_o.Z.Footer,{children:r?(0,D.jsxs)(Ri.Z,{bsStyle:"danger",disabled:!0,children:[e("deleting"),"…"]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",onClick:h,children:e("cancel")}),(0,D.jsx)(Ri.Z,{bsStyle:"danger",onClick:function(){a()},children:e("delete")})]})})]})};__webpack_require__(45794);function Co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oo(e){var t=e.name,n=e.setName,r=e.validName,a=e.setValidName,l=e.handleCreateFolder,f=Ci().autoFocusedRef;return(0,D.jsx)("input",{ref:f,className:"form-control",type:"text",value:t,onKeyDown:function(e){"Enter"===e.key&&r&&l()},onChange:function(e){a(ne(e.target.value.trim())),n(e.target.value)},onFocus:function(e){e.target.setSelectionRange(0,-1)}})}Oo.propTypes={name:j().string.isRequired,setName:j().func.isRequired,validName:j().bool.isRequired,setValidName:j().func.isRequired,handleCreateFolder:j().func.isRequired};var jo=function(){var e=(0,Qe.$)().t,t=Co((0,E.useState)(""),2),n=t[0],r=t[1],a=Co((0,E.useState)(!0),2),l=a[0],f=a[1],d=Je(),h=d.isCreatingFolder,p=d.inFlight,y=d.finishCreatingFolder,w=d.cancel,x=d.error;if((0,E.useEffect)((function(){h||r("")}),[h]),!h)return null;function _(){w()}function S(){y(n)}function k(){return x.constructor===Me?e("file_already_exists"):e("generic_something_went_wrong")}return(0,D.jsxs)(So.Z,{show:!0,onHide:_,children:[(0,D.jsx)(_o.Z.Header,{children:(0,D.jsx)(_o.Z.Title,{children:e("new_folder")})}),(0,D.jsxs)(_o.Z.Body,{children:[(0,D.jsx)(Oo,{name:n,setName:r,validName:l,setValidName:f,handleCreateFolder:S}),l?null:(0,D.jsx)("div",{role:"alert","aria-label":e("files_cannot_include_invalid_characters"),className:"alert alert-danger file-tree-modal-alert",children:e("files_cannot_include_invalid_characters")}),x?(0,D.jsx)("div",{role:"alert","aria-label":k(),className:"alert alert-danger file-tree-modal-alert",children:k()}):null]}),(0,D.jsx)(_o.Z.Footer,{children:p?(0,D.jsxs)(Ri.Z,{bsStyle:"primary",disabled:!0,children:[e("creating"),"…"]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",onClick:_,children:e("cancel")}),(0,D.jsx)(Ri.Z,{bsStyle:"primary",onClick:S,disabled:!l,children:e("create")})]})})]})},$o=__webpack_require__(86814);var To=function FileTreeModalError(){var e=(0,Qe.$)().t,t=Je(),n=t.isRenaming,r=t.isMoving,a=t.cancel,l=t.error;if(!l)return null;if(!n&&!r)return null;function f(){a()}function d(){switch(l.constructor){case Me:return e("file_already_exists");case Le:return(0,D.jsx)($o.c,{i18nKey:"file_already_exists_in_this_location",components:[(0,D.jsx)("strong",{})],values:{fileName:l.entityName}});case Re:return e("files_cannot_include_invalid_characters");case Ie:return e("blocked_filename");default:return e("generic_something_went_wrong")}}return(0,D.jsxs)(_o.Z,{show:!0,onHide:f,children:[(0,D.jsx)(_o.Z.Header,{children:(0,D.jsx)(_o.Z.Title,{children:function(){switch(l.constructor){case Me:case Le:return e("duplicate_file");case Re:case Ie:return e("invalid_file_name");default:return e("error")}}()})}),(0,D.jsx)(_o.Z.Body,{children:(0,D.jsx)("div",{role:"alert","aria-label":d(),children:d()})}),(0,D.jsx)(_o.Z.Footer,{children:(0,D.jsx)(Ri.Z,{onClick:f,bsStyle:"primary",children:e("ok")})})]})},Ao=__webpack_require__(28845),Po=__webpack_require__(45466),Do=__webpack_require__(84080),Ro=__webpack_require__(10435),Io=__webpack_require__(47718),Mo=__webpack_require__.n(Io),Lo=__webpack_require__(71009),No=__webpack_require__.n(Lo),Fo=__webpack_require__(29620),qo=__webpack_require__.n(Fo),Bo=__webpack_require__(70688),Uo=__webpack_require__.n(Bo),Ho=__webpack_require__(51904),zo=__webpack_require__.n(Ho),Vo=__webpack_require__(40368),Wo=__webpack_require__.n(Vo),Zo=__webpack_require__(47677),Go=__webpack_require__.n(Zo),Ko=function(){};function Yo(e,t){return void 0!==e[t]}function Xo(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}var Jo=__webpack_require__(31461),Qo=__webpack_require__(7896);function ea(e,t){return ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ea(e,t)}var ta=__webpack_require__(46847);__webpack_require__(92564);var na=__webpack_require__(42919),ra=__webpack_require__(57058),ia=__webpack_require__.n(ra),oa=__webpack_require__(13667),aa=__webpack_require__.n(oa),sa=__webpack_require__(8558),la=__webpack_require__(26394),ca=__webpack_require__(96877),ua={open:j().bool,pullRight:j().bool,onClose:j().func,labelledBy:j().oneOfType([j().string,j().number]),onSelect:j().func,rootCloseEvent:j().oneOf(["click","mousedown"])},fa=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleRootClose=n.handleRootClose.bind((0,Ro.Z)((0,Ro.Z)(n))),n.handleKeyDown=n.handleKeyDown.bind((0,Ro.Z)((0,Ro.Z)(n))),n}(0,Do.Z)(t,e);var n=t.prototype;return n.getFocusableMenuItems=function(){var e=Pi.findDOMNode(this);return e?ia()(e.querySelectorAll('[tabIndex="-1"]')):[]},n.getItemsAndActiveIndex=function(){var e=this.getFocusableMenuItems(),t=e.indexOf(document.activeElement);return{items:e,activeIndex:t}},n.focusNext=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;0!==t.length&&t[n===t.length-1?0:n+1].focus()},n.focusPrevious=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;0!==t.length&&t[0===n?t.length-1:n-1].focus()},n.handleKeyDown=function(e){switch(e.keyCode){case qo().codes.down:this.focusNext(),e.preventDefault();break;case qo().codes.up:this.focusPrevious(),e.preventDefault();break;case qo().codes.esc:case qo().codes.tab:this.props.onClose(e,{source:"keydown"})}},n.handleRootClose=function(e){this.props.onClose(e,{source:"rootClose"})},n.render=function(){var e,t=this,n=this.props,r=n.open,a=n.pullRight,l=n.labelledBy,f=n.onSelect,d=n.className,h=n.rootCloseEvent,p=n.children,y=(0,Po.Z)(n,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),w=(0,sa.vD)(y,["onClose"]),x=w[0],_=w[1],S=(0,Ao.Z)({},(0,sa.Nj)(x),((e={})[(0,sa.O4)(x,"right")]=a,e));return E.createElement(aa(),{disabled:!r,onRootClose:this.handleRootClose,event:h},E.createElement("ul",(0,Ao.Z)({},_,{role:"menu",className:se()(d,S),"aria-labelledby":l}),ca.Z.map(p,(function(e){return E.cloneElement(e,{onKeyDown:(0,la.Z)(e.props.onKeyDown,t.handleKeyDown),onSelect:(0,la.Z)(e.props.onSelect,f)})}))))},t}(E.Component);fa.propTypes=ua,fa.defaultProps={bsRole:"menu",pullRight:!1};var da=(0,sa.Pn)("dropdown-menu",fa),ha=__webpack_require__(49909),pa={noCaret:j().bool,open:j().bool,title:j().string,useAnchor:j().bool},ma=function(e){function t(){return e.apply(this,arguments)||this}return(0,Do.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.noCaret,n=e.open,r=e.useAnchor,a=e.bsClass,l=e.className,f=e.children,d=(0,Po.Z)(e,["noCaret","open","useAnchor","bsClass","className","children"]);delete d.bsRole;var h=r?ha.Z:Ri.Z,p=!t;return E.createElement(h,(0,Ao.Z)({},d,{role:"button",className:se()(l,a),"aria-haspopup":!0,"aria-expanded":n}),f||d.title,p&&" ",p&&E.createElement("span",{className:"caret"}))},t}(E.Component);ma.propTypes=pa,ma.defaultProps={open:!1,useAnchor:!1,bsRole:"toggle"};var va=(0,sa.Pn)("dropdown-toggle",ma),ya=__webpack_require__(57965),ba=__webpack_require__.n(ya);j().oneOfType([j().string,j().number]);var wa=va.defaultProps.bsRole,xa=da.defaultProps.bsRole,_a={dropup:j().bool,id:Wo()(j().oneOfType([j().string,j().number])),componentClass:zo(),children:Uo()(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ba()((function(e,n,r){var a;return t.every((function(t){return!!ca.Z.some(e.children,(function(e){return e.props.bsRole===t}))||(a=t,!1)})),a?new Error("(children) "+r+" - Missing a required child with bsRole: "+a+". "+r+" must have at least one child of each of the following bsRoles: "+t.join(", ")):null}))}(wa,xa),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ba()((function(e,n,r){var a;return t.every((function(t){return!(ca.Z.filter(e.children,(function(e){return e.props.bsRole===t})).length>1)||(a=t,!1)})),a?new Error("(children) "+r+" - Duplicate children detected of bsRole: "+a+". Only one child each allowed with the following bsRoles: "+t.join(", ")):null}))}(xa)),disabled:j().bool,pullRight:j().bool,open:j().bool,defaultOpen:j().bool,onToggle:j().func,onSelect:j().func,role:j().string,rootCloseEvent:j().oneOf(["click","mousedown"]),onMouseEnter:j().func,onMouseLeave:j().func},Sa={componentClass:na.Z},ka=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind((0,Ro.Z)((0,Ro.Z)(r))),r.handleKeyDown=r.handleKeyDown.bind((0,Ro.Z)((0,Ro.Z)(r))),r.handleClose=r.handleClose.bind((0,Ro.Z)((0,Ro.Z)(r))),r._focusInDropdown=!1,r.lastOpenEventType=null,r}(0,Do.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.focusNextOnOpen()},n.UNSAFE_componentWillUpdate=function(e){!e.open&&this.props.open&&(this._focusInDropdown=No()(Pi.findDOMNode(this.menu),Mo()(document)))},n.componentDidUpdate=function(e){var t=this.props.open,n=e.open;t&&!n&&this.focusNextOnOpen(),!t&&n&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},n.focus=function(){var e=Pi.findDOMNode(this.toggle);e&&e.focus&&e.focus()},n.focusNextOnOpen=function(){var e=this.menu;e&&e.focusNext&&("keydown"!==this.lastOpenEventType&&"menuitem"!==this.props.role||e.focusNext())},n.handleClick=function(e){this.props.disabled||this.toggleOpen(e,{source:"click"})},n.handleClose=function(e,t){this.props.open&&this.toggleOpen(e,t)},n.handleKeyDown=function(e){if(!this.props.disabled)switch(e.keyCode){case qo().codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(e,{source:"keydown"}),e.preventDefault();break;case qo().codes.esc:case qo().codes.tab:this.handleClose(e,{source:"keydown"})}},n.toggleOpen=function(e,t){var n=!this.props.open;n&&(this.lastOpenEventType=t.source),this.props.onToggle&&this.props.onToggle(n,e,t)},n.renderMenu=function(e,t){var n=this,r=t.id,a=t.onSelect,l=t.rootCloseEvent,f=(0,Po.Z)(t,["id","onSelect","rootCloseEvent"]),d=function(e){n.menu=e};return"string"==typeof e.ref||(d=(0,la.Z)(e.ref,d)),(0,E.cloneElement)(e,(0,Ao.Z)({},f,{ref:d,labelledBy:r,bsClass:(0,sa.O4)(f,"menu"),onClose:(0,la.Z)(e.props.onClose,this.handleClose),onSelect:(0,la.Z)(e.props.onSelect,a,(function(e,t){return n.handleClose(t,{source:"select"})})),rootCloseEvent:l}))},n.renderToggle=function(e,t){var n=this,r=function(e){n.toggle=e};return"string"==typeof e.ref||(r=(0,la.Z)(e.ref,r)),(0,E.cloneElement)(e,(0,Ao.Z)({},t,{ref:r,bsClass:(0,sa.O4)(t,"toggle"),onClick:(0,la.Z)(e.props.onClick,this.handleClick),onKeyDown:(0,la.Z)(e.props.onKeyDown,this.handleKeyDown)}))},n.render=function(){var e,t=this,n=this.props,r=n.componentClass,a=n.id,l=n.dropup,f=n.disabled,d=n.pullRight,h=n.open,p=n.onSelect,y=n.role,w=n.bsClass,x=n.className,_=n.rootCloseEvent,S=n.children,k=(0,Po.Z)(n,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete k.onToggle;var C=((e={})[w]=!0,e.open=h,e.disabled=f,e);return l&&(C[w]=!1,C.dropup=!0),E.createElement(r,(0,Ao.Z)({},k,{className:se()(x,C)}),ca.Z.map(S,(function(e){switch(e.props.bsRole){case wa:return t.renderToggle(e,{id:a,disabled:f,open:h,role:y,bsClass:w});case xa:return t.renderMenu(e,{id:a,open:h,pullRight:d,bsClass:w,onSelect:p,rootCloseEvent:_});default:return e}})))},t}(E.Component);ka.propTypes=_a,ka.defaultProps=Sa,(0,sa.Pn)("dropdown",ka);var Ca=function e(t,n,r){void 0===r&&(r=[]);var a,l=t.displayName||t.name||"Component",f=!!(a=t)&&("function"!=typeof a||a.prototype&&a.prototype.isReactComponent),d=Object.keys(n),h=d.map(Xo);!f&&r.length&&Go()(!1);var p=function(e){var a,l;function f(){for(var t,a=arguments.length,l=new Array(a),f=0;f<a;f++)l[f]=arguments[f];(t=e.call.apply(e,[this].concat(l))||this).handlers=Object.create(null),d.forEach((function(e){var r=n[e];t.handlers[r]=function(n){if(t.props[r]){var a;t._notifying=!0;for(var l=arguments.length,f=new Array(l>1?l-1:0),d=1;d<l;d++)f[d-1]=arguments[d];(a=t.props)[r].apply(a,[n].concat(f)),t._notifying=!1}t.unmounted||t.setState((function(t){var r,a=t.values;return{values:(0,Qo.Z)(Object.create(null),a,(r={},r[e]=n,r))}}))}})),r.length&&(t.attachRef=function(e){t.inner=e});var h=Object.create(null);return d.forEach((function(e){h[e]=t.props[Xo(e)]})),t.state={values:h,prevProps:{}},t}l=e,(a=f).prototype=Object.create(l.prototype),a.prototype.constructor=a,ea(a,l);var p=f.prototype;return p.shouldComponentUpdate=function(){return!this._notifying},f.getDerivedStateFromProps=function(e,t){var n=t.values,r=t.prevProps,a={values:(0,Qo.Z)(Object.create(null),n),prevProps:{}};return d.forEach((function(t){a.prevProps[t]=e[t],!Yo(e,t)&&Yo(r,t)&&(a.values[t]=e[Xo(t)])})),a},p.componentWillUnmount=function(){this.unmounted=!0},p.render=function(){var e=this,n=this.props,r=n.innerRef,a=(0,Jo.Z)(n,["innerRef"]);h.forEach((function(e){delete a[e]}));var l={};return d.forEach((function(t){var n=e.props[t];l[t]=void 0!==n?n:e.state.values[t]})),E.createElement(t,(0,Qo.Z)({},a,l,this.handlers,{ref:r||this.attachRef}))},f}(E.Component);(0,ta.polyfill)(p),p.displayName="Uncontrolled("+l+")",p.propTypes=(0,Qo.Z)({innerRef:function(){}},function(e,t){var n={};return Object.keys(e).forEach((function(e){n[Xo(e)]=Ko})),n}(n)),r.forEach((function(e){p.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}}));var y=p;return E.forwardRef&&((y=E.forwardRef((function(e,t){return E.createElement(p,(0,Qo.Z)({},e,{innerRef:t,__source:{fileName:"/Users/jquense/src/uncontrollable/src/uncontrollable.js",lineNumber:128},__self:this}))}))).propTypes=p.propTypes),y.ControlledComponent=t,y.deferControlTo=function(t,r,a){return void 0===r&&(r={}),e(t,(0,Qo.Z)({},n,r),a)},y}(ka,{open:"onToggle"});Ca.Toggle=va,Ca.Menu=da;var Ea=Ca,Oa={active:j().bool,disabled:j().bool,divider:Uo()(j().bool,(function(e){var t=e.divider,n=e.children;return t&&n?new Error("Children will not be rendered for dividers"):null})),eventKey:j().any,header:j().bool,href:j().string,onClick:j().func,onSelect:j().func},ja=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind((0,Ro.Z)((0,Ro.Z)(r))),r}(0,Do.Z)(t,e);var n=t.prototype;return n.handleClick=function(e){var t=this.props,n=t.href,r=t.disabled,a=t.onSelect,l=t.eventKey;n&&!r||e.preventDefault(),r||a&&a(l,e)},n.render=function(){var e=this.props,t=e.active,n=e.disabled,r=e.divider,a=e.header,l=e.onClick,f=e.className,d=e.style,h=(0,Po.Z)(e,["active","disabled","divider","header","onClick","className","style"]),p=(0,sa.vD)(h,["eventKey","onSelect"]),y=p[0],w=p[1];return r?(w.children=void 0,E.createElement("li",(0,Ao.Z)({},w,{role:"separator",className:se()(f,"divider"),style:d}))):a?E.createElement("li",(0,Ao.Z)({},w,{role:"heading",className:se()(f,(0,sa.O4)(y,"header")),style:d})):E.createElement("li",{role:"presentation",className:se()(f,{active:t,disabled:n}),style:d},E.createElement(ha.Z,(0,Ao.Z)({},w,{role:"menuitem",tabIndex:"-1",onClick:(0,la.Z)(l,this.handleClick)})))},t}(E.Component);ja.propTypes=Oa,ja.defaultProps={divider:!1,disabled:!1,header:!1};var $a=(0,sa.Pn)("dropdown",ja);var Ta=function(){var e=(0,Qe.$)().t,t=Je(),n=t.canRename,r=t.canDelete,a=t.canCreate,l=t.startRenaming,f=t.startDeleting,d=t.startCreatingFolder,h=t.startCreatingDocOrFile,p=t.startUploadingDocOrFile,y=t.downloadPath;return(0,D.jsxs)(D.Fragment,{children:[n?(0,D.jsx)($a,{onClick:l,children:e("rename")}):null,y?(0,D.jsx)($a,{href:y,download:!0,children:e("download")}):null,r?(0,D.jsx)($a,{onClick:f,children:e("delete")}):null,a?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)($a,{divider:!0}),(0,D.jsx)($a,{onClick:h,children:e("new_file")}),(0,D.jsx)($a,{onClick:d,children:e("new_folder")}),(0,D.jsx)($a,{onClick:p,children:e("upload")})]}):null]})};var Aa={permissionsLevel:j().oneOf(["readOnly","readAndWrite","owner"])},Pa=E.forwardRef((function(e,t){return null}));Pa.displayName="FakeDropDownToggle";var Da=function(){var e=(0,oe._i)(Aa).permissionsLevel,t=L(),n=t.contextMenuCoords,r=t.setContextMenuCoords;if("readOnly"===e||!n)return null;function a(e){e||r(null)}return Pi.createPortal((0,D.jsxs)(Ea,{onClick:function(){a(!1)},open:!0,id:"dropdown-file-tree-context-menu",onToggle:a,children:[(0,D.jsx)(Pa,{bsRole:"toggle"}),(0,D.jsx)(Ea.Menu,{className:"context-menu",style:n,children:(0,D.jsx)(Ta,{})})]}),document.querySelector("body"))},Ra=__webpack_require__(49169),Ia=function(){var e=(0,Ra.Z)(),t=(0,E.useCallback)((function(t){e.current&&window.location.assign(t)}),[e]),n=(0,E.useCallback)((function(){e.current&&window.location.reload()}),[e]);return(0,E.useMemo)((function(){return{assign:t,reload:n}}),[t,n])};var Ma=function FileTreeError(){var e=(0,Qe.$)().t,t=Ia().reload;return(0,D.jsxs)("div",{className:"file-tree-error",children:[(0,D.jsx)("p",{children:e("generic_something_went_wrong")}),(0,D.jsx)("p",{children:e("please_refresh")}),(0,D.jsx)(Ri.Z,{bsStyle:"primary",onClick:t,children:e("refresh")})]})},La=__webpack_require__(33592);function Na(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fa(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ba(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ua=(0,E.createContext)(),Ha=function(){var e=(0,E.useContext)(Ua);if(!e)throw new Error("useFileTreeCreateForm is only available inside FileTreeCreateFormProvider");return e};function za(e){var t=e.children,n=qa((0,E.useState)(!1),2),r=n[0],a=n[1];return(0,D.jsx)(Ua.Provider,{value:{valid:r,setValid:a},children:t})}function Va(e){var t=e.mode,n=e.icon,r=e.label,a=Je(),l=a.newFileCreateMode,f=a.startCreatingFile;return(0,D.jsx)("li",{className:se()({active:l===t}),children:(0,D.jsxs)(Ri.Z,{bsStyle:"link",block:!0,onClick:function(){f(t)},className:"modal-new-file-mode",children:[(0,D.jsx)(Ii.Z,{type:n,fw:!0})," ",r]})})}function Wa(e){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wa(e)}function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){Ka(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ka(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Wa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Wa(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ya(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}za.propTypes={children:j().oneOfType([j().arrayOf(j().node),j().node]).isRequired},Va.propTypes={mode:j().string.isRequired,icon:j().string.isRequired,label:j().string.isRequired};var Ja=(0,E.createContext)(),Qa=function(){var e=(0,E.useContext)(Ja);if(!e)throw new Error("useFileTreeCreateName is only available inside FileTreeCreateNameProvider");return e};function es(e){var t=e.children,n=e.initialName,r=void 0===n?"":n,a=Ya((0,E.useReducer)((function(e,t){return{name:t,touchedName:!0}}),{name:r,touchedName:!1}),2),l=a[0],f=a[1],d=(0,E.useMemo)((function(){return ne(l.name.trim())}),[l]);return(0,D.jsx)(Ja.Provider,{value:Ga(Ga({},l),{},{setName:f,validName:d}),children:t})}es.propTypes={children:j().oneOfType([j().arrayOf(j().node),j().node]).isRequired,initialName:j().string};var ts=__webpack_require__(86186),ns=__webpack_require__(99262),rs=__webpack_require__(72300),is=__webpack_require__(87731),os=__webpack_require__(30286);function as(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ss(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ls=__webpack_require__(10726),cs=__webpack_require__.n(ls),us=__webpack_require__(88664),fs=__webpack_require__.n(us);function ds(e){var t=e.label,n=e.focusName,r=void 0!==n&&n,a=e.classes,l=void 0===a?{}:a,f=e.placeholder,d=e.error,h=(0,Qe.$)().t,p=Qa(),y=p.name,w=p.setName,x=p.touchedName,_=p.validName,S=(0,E.useCallback)((function(e){e&&r&&window.requestAnimationFrame((function(){e.focus(),e.setSelectionRange(0,e.value.lastIndexOf("."))}))}),[r]);return(0,D.jsxs)(fs(),{controlId:"new-doc-name",className:l.formGroup,children:[(0,D.jsx)(cs(),{children:t||h("file_name")}),(0,D.jsx)(is.Z,{type:"text",placeholder:f||h("file_name"),required:!0,value:y,onChange:function(e){return w(e.target.value)},inputRef:S}),(0,D.jsx)(is.Z.Feedback,{}),x&&!_&&(0,D.jsx)(ts.Z,{bsStyle:"danger",className:"row-spaced-small",children:(0,D.jsx)($o.c,{i18nKey:"files_cannot_include_invalid_characters"})}),d&&(0,D.jsx)(hs,{error:d})]})}function hs(e){switch(e.error.constructor){case Me:return(0,D.jsx)(ts.Z,{bsStyle:"danger",className:"row-spaced-small",children:(0,D.jsx)($o.c,{i18nKey:"file_already_exists"})});case Re:return(0,D.jsx)(ts.Z,{bsStyle:"danger",className:"row-spaced-small",children:(0,D.jsx)($o.c,{i18nKey:"files_cannot_include_invalid_characters"})});case Ie:return(0,D.jsx)(ts.Z,{bsStyle:"danger",className:"row-spaced-small",children:(0,D.jsx)($o.c,{i18nKey:"blocked_filename"})});default:return null}}function ps(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ms(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gs(){var e=(0,A.d2)(vs)._id,t=ps((0,E.useState)(10),2),n=t[0],r=t[1],a=Ia();return(0,E.useEffect)((function(){r(10);var t=window.setInterval((function(){r((function(n){return 0===n?(window.clearInterval(t),a.assign("/login?redir=/project/".concat(e)),0):n-1}))}),1e3);return function(){window.clearInterval(t)}}),[e,a]),(0,D.jsx)($o.c,{i18nKey:"session_expired_redirecting_to_login",values:{seconds:n}})}ds.propTypes={focusName:j().bool,label:j().string,classes:j().shape({formGroup:j().string}),placeholder:j().string,error:j().oneOfType([j().object,j().string])},hs.propTypes={error:j().oneOfType([j().object,j().string]).isRequired};var vs={_id:j().string.isRequired};function ys(e){var t=e.children;return(0,D.jsx)(ts.Z,{bsStyle:"danger",children:t})}function bs(e){var t=e.error,n=(0,Qe.$)().t;if("string"==typeof t)switch(t){case"name-exists":return(0,D.jsx)(ys,{children:n("file_already_exists")});case"too-many-files":return(0,D.jsx)(ys,{children:n("project_has_too_many_files")});case"remote-service-error":return(0,D.jsx)(ys,{children:n("remote_service_error")});case"invalid_filename":return(0,D.jsx)(ys,{children:(0,D.jsx)($o.c,{i18nKey:"invalid_filename",values:{nameLimit:150}})});case"rate-limit-hit":return(0,D.jsx)(ys,{children:n("too_many_files_uploaded_throttled_short_period")});case"not-logged-in":return(0,D.jsx)(ys,{children:(0,D.jsx)(gs,{})});case"linked-project-compile-error":return(0,D.jsx)(ys,{children:n("generic_linked_file_compile_error")});default:return(0,D.jsx)(ys,{children:n("generic_something_went_wrong")})}switch(t.constructor){case U.kp:var r,a,l=null===(r=t.data)||void 0===r?void 0:r.message;if(l)return(0,D.jsx)(ys,{children:l.text||l});switch(null===(a=t.response)||void 0===a?void 0:a.status){case 400:return(0,D.jsx)(ys,{children:n("invalid_request")});case 403:return(0,D.jsx)(ys,{children:n("session_error")});case 429:return(0,D.jsx)(ys,{children:n("too_many_attempts")});default:return(0,D.jsx)(ys,{children:n("something_went_wrong_server")})}case Me:case Re:case Ie:return null;default:return(0,D.jsx)(ys,{children:n("generic_something_went_wrong")})}}ys.propTypes={children:j().any.isRequired},bs.propTypes={error:j().oneOfType([j().string,j().object]).isRequired};var ws=__webpack_require__(92910);function xs(e){var t=e.provider,n=e.data,r=e.selectedGroupId,a=e.setSelectedGroupId;switch(t){case"mendeley":return(0,D.jsxs)(ns.Z,{controlId:"group-select",children:[(0,D.jsx)(rs.Z,{children:"Select a Group (optional)"}),(0,D.jsxs)(is.Z,{className:"form-control",componentClass:"select",placeholder:"Select a Group (optional)",value:r||"",onChange:function(e){return a(e.target.value)},children:[(0,D.jsx)("option",{disabled:!0,value:"",children:"- Select a Group (optional)"}),n.map((function(e){return(0,D.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]});case"zotero":return(0,D.jsxs)(ns.Z,{controlId:"group-select",children:[(0,D.jsx)(rs.Z,{children:"Library"}),(0,D.jsxs)(is.Z,{className:"form-control",componentClass:"select",value:r||"",onChange:function(e){return a(e.target.value)},children:[(0,D.jsx)("option",{value:"",children:"My Library"}),(0,D.jsx)("option",{disabled:!0,value:"_",children:"Group Libraries"}),n.map((function(e){return(0,D.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]});default:throw new Error('Unknown reference provider "'.concat(t,'"'))}}function _s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ss(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ks(e){var t,n=e.provider,r=e.providerName,a=e.supportsGroups,l=void 0!==a&&a,f=e.supportsFormat,d=void 0!==f&&f,h=(0,Qe.$)().t,p=Qa(),y=p.name,w=p.validName,x=Ha().setValid,_=(0,A.d2)(Cs).features,S=L(),k=S.refProviders,C=S.setStartedFreeTrial,O=S.setRefProviderEnabled,j=Je(),T=j.error,P=j.finishCreatingLinkedFile,R=j.inFlight,I=L().reindexReferences,M=_s((0,E.useState)(""),2),N=M[0],F=M[1],q=_s((0,E.useState)("bibtex"),2),B=q[0],H=q[1],z=_.references||_[n],V=z&&k[n],W=(0,E.useCallback)((function(){var e=window.open("/".concat(n,"/oauth"),"reference-auth","width=700,height=500"),t=window.setInterval((function(){var r;"/user/settings"===((null==e||null===(r=e.location)||void 0===r?void 0:r.pathname)||null)&&(e.close(),O(n,!1),window.setTimeout((function(){O(n,!0)})),window.clearInterval(t))}),1e3)}),[n,O]),Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=as((0,E.useState)(!1),2),r=n[0],a=n[1],l=as((0,E.useState)(null),2),f=l[0],d=l[1],h=as((0,E.useState)(null),2),p=h[0],y=h[1],w=(0,os.Z)().signal;return(0,E.useEffect)((function(){t&&(a(!0),y(null),d(null),(0,U.xA)("/".concat(e,"/groups"),{signal:w}).then((function(e){d(e.groups)})).catch((function(e){400===e.response.status?e.data.relink&&y("relink"):y("loading_groups")})).finally((function(){a(!1)})))}),[t,e,w]),{loading:r,data:f,error:p}}(n,l&&V);(0,E.useEffect)((function(){x(w&&V&&!Z.error)}),[x,w,V,Z.error]);var G=(0,E.useCallback)((function(e){e.preventDefault();var t={};N&&(t.group_id=N),d&&(t.format=B),P({name:y,provider:n,data:t}).then(I)}),[y,N,n,P,B,I,d]);return z?(0,D.jsxs)("div",{className:"referencesImportModal",children:[V?(0,D.jsxs)("div",{children:[Z.loading?(0,D.jsx)("div",{children:(0,D.jsx)("h2",{className:"text-center",children:(0,D.jsxs)("small",{children:[(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0,fw:!0})," Loading…"]})})}):(0,D.jsxs)("div",{children:[(0,D.jsxs)("p",{children:["Import a BibTeX file from your ",r," account"]}),(0,D.jsxs)("form",{noValidate:!0,id:"create-file",onSubmit:G,children:[Z.error&&(0,D.jsx)(Os,{provider:n,error:Z.error,linkAccount:W}),Z.data&&Z.data.length>0&&(0,D.jsx)("div",{className:"row-spaced-small",children:(0,D.jsx)(xs,{provider:n,data:Z.data,selectedGroupId:N,setSelectedGroupId:F})}),(0,D.jsx)("div",{className:"row-spaced-small",children:(0,D.jsx)(ds,{label:h("file_name_in_this_project"),focusName:!0,error:T})}),d&&(0,D.jsx)("div",{className:"row-spaced-small",children:(0,D.jsxs)(ns.Z,{controlId:"format",children:[(0,D.jsx)(rs.Z,{children:"Format"}),(0,D.jsxs)(is.Z,{className:"form-control",componentClass:"select",value:B,onChange:function(e){return H(e.target.value)},children:[(0,D.jsx)("option",{value:"bibtex",children:"BibTeX"}),(0,D.jsx)("option",{value:"biblatex",children:"BibLaTeX"})]})]})})]})]}),R&&(0,D.jsx)("h3",{className:"text-center",children:(0,D.jsxs)("small",{children:[(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0,fw:!0})," Importing…"]})})]}):(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{children:Es[n].sync_description}),(0,D.jsx)("p",{children:(0,D.jsx)(Ri.Z,{bsStyle:"info",type:"button",onClick:W,children:Es[n].link_to})})]}),T&&(0,D.jsx)(D.Fragment,{children:"string"==typeof T?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("hr",{}),(0,D.jsx)(Os,{error:T,provider:n,linkAccount:W})]}),(0,D.jsx)($s,{error:T,provider:n,linkAccount:W})]}):null!==(t=T.data)&&void 0!==t&&t.relink?(0,D.jsx)(js,{provider:n,linkAccount:W}):(0,D.jsx)(bs,{error:T})})]}):(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"small",children:Es[n].sync_description}),(0,D.jsxs)(ts.Z,{bsStyle:"info",children:[(0,D.jsx)("p",{children:Es[n].is_premium}),(0,D.jsx)("p",{children:(0,D.jsx)(ws.Z,{source:n,buttonProps:{bsStyle:"info"},handleClick:function(){return C(!0)}})})]})]})}xs.propTypes={provider:j().string.isRequired,data:j().arrayOf(j().object).isRequired,selectedGroupId:j().string,setSelectedGroupId:j().func.isRequired},ks.propTypes={provider:j().string.isRequired,providerName:j().string.isRequired,supportsGroups:j().bool,supportsFormat:j().bool};var Cs={features:j().shape({references:j().bool,mendeley:j().bool,zotero:j().bool})},Es={mendeley:{default:(0,D.jsx)($o.c,{i18nKey:"mendeley_reference_loading_error"}),expired:(0,D.jsx)($o.c,{i18nKey:"mendeley_reference_loading_error_expired"}),forbidden:(0,D.jsx)($o.c,{i18nKey:"mendeley_reference_loading_error_forbidden"}),"refresh-failed":(0,D.jsx)($o.c,{i18nKey:"mendeley_reference_loading_error_expired"}),sync_description:(0,D.jsx)($o.c,{i18nKey:"mendeley_sync_description"}),link_to:(0,D.jsx)($o.c,{i18nKey:"link_to_mendeley"}),is_premium:(0,D.jsx)($o.c,{i18nKey:"mendeley_is_premium"}),loading_groups:(0,D.jsx)($o.c,{i18nKey:"mendeley_groups_loading_error"}),relink:(0,D.jsx)($o.c,{i18nKey:"mendeley_groups_relink"})},zotero:{default:(0,D.jsx)($o.c,{i18nKey:"zotero_reference_loading_error"}),expired:(0,D.jsx)($o.c,{i18nKey:"zotero_reference_loading_error_expired"}),forbidden:(0,D.jsx)($o.c,{i18nKey:"zotero_reference_loading_error_forbidden"}),"refresh-failed":(0,D.jsx)($o.c,{i18nKey:"zotero_reference_loading_error_expired"}),sync_description:(0,D.jsx)($o.c,{i18nKey:"zotero_sync_description"}),link_to:(0,D.jsx)($o.c,{i18nKey:"link_to_zotero"}),is_premium:(0,D.jsx)($o.c,{i18nKey:"zotero_is_premium"}),loading_groups:(0,D.jsx)($o.c,{i18nKey:"zotero_groups_loading_error"}),relink:(0,D.jsx)($o.c,{i18nKey:"zotero_groups_relink"})}};function Os(e){var t=e.provider,n=e.error,r=e.linkAccount;return"relink"===n?(0,D.jsx)(js,{provider:t,linkAccount:r}):n in Es[t]?(0,D.jsx)(ys,{children:Es[t][n]}):(0,D.jsx)(bs,{error:n})}function js(e){var t=e.provider,n=e.linkAccount,r=(0,Qe.$)().t;return(0,D.jsxs)(ys,{children:[(0,D.jsx)("div",{children:Es[t].relink}),(0,D.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:(0,D.jsx)(Ri.Z,{bsStyle:"danger",type:"button",onClick:n,children:r("relink_your_account")})})]})}function $s(e){var t=e.error,n=e.provider,r=e.linkAccount,a=(0,Qe.$)().t;switch(t){case"refresh-failed":return(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{children:Es[n].sync_description}),(0,D.jsx)("p",{children:(0,D.jsx)(Ri.Z,{bsStyle:"info",type:"button",onClick:r,children:Es[n].link_to})})]});case"default":case"expired":case"forbidden":return(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{children:[a("reference_error_relink_hint"),"  "]}),(0,D.jsx)("div",{children:(0,D.jsx)("a",{href:"/user/settings",target:"_blank",rel:"noopener",style:{fontWeight:"bold"},children:a("account_settings")})})]})}}function Ts(){var e=(0,Qe.$)().t;return(0,D.jsx)(Va,{mode:"mendeley",icon:"book",label:e("from_provider",{provider:"Mendeley"})})}function As(){return"mendeley"!==Je().newFileCreateMode?null:(0,D.jsx)(es,{initialName:"references.bib",children:(0,D.jsx)(ks,{provider:"mendeley",providerName:"Mendeley",supportsGroups:!0})})}function Ps(){var e=(0,Qe.$)().t;return(0,D.jsx)(Va,{mode:"zotero",icon:"book",label:e("from_provider",{provider:"Zotero"})})}function Ds(){return"zotero"!==Je().newFileCreateMode?null:(0,D.jsx)(es,{initialName:"references.bib",children:(0,D.jsx)(ks,{provider:"zotero",providerName:"Zotero",supportsGroups:!0,supportsFormat:!0})})}function Rs(){var e=Qa(),t=e.name,n=e.validName,r=Ha().setValid,a=Je(),l=a.error,f=a.finishCreatingDoc;(0,E.useEffect)((function(){r(n)}),[r,n]);var d=(0,E.useCallback)((function(e){e.preventDefault(),f({name:t})}),[f,t]);return(0,D.jsxs)("form",{noValidate:!0,id:"create-file",onSubmit:d,children:[(0,D.jsx)(ds,{focusName:!0,error:l}),l&&(0,D.jsx)(bs,{error:l})]})}function Is(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ms(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ls(){var e=(0,Qe.$)().t,t=Qa(),n=t.name,r=t.setName,a=t.validName,l=Ha().setValid,f=Je(),d=f.finishCreatingLinkedFile,h=f.error,p=Is((0,E.useState)(""),2),y=p[0],w=p[1],x=(0,E.useCallback)((function(e){w(e.target.value)}),[]);(0,E.useEffect)((function(){if(y){var e=y.match(/^\s*https?:\/\/.+\/([^/]+\.(\w+))\s*$/);r(e?e[1]:"")}}),[r,y]),(0,E.useEffect)((function(){l(a&&!!y)}),[l,a,y]);return(0,D.jsxs)("form",{className:"form-controls",id:"create-file",noValidate:!0,onSubmit:function(e){e.preventDefault(),d({name:n,provider:"url",data:{url:y.trim()}})},children:[(0,D.jsxs)(ns.Z,{controlId:"import-from-url",children:[(0,D.jsx)(rs.Z,{children:e("url_to_fetch_the_file_from")}),(0,D.jsx)(is.Z,{type:"url",placeholder:"https://example.com/my-file.png",required:!0,value:y,onChange:x})]}),(0,D.jsx)(ds,{label:e("file_name_in_this_project"),placeholder:"my_file",error:h}),h&&(0,D.jsx)(bs,{error:h})]})}Os.propTypes={error:j().string.isRequired,provider:j().string.isRequired,linkAccount:j().func.isRequired},js.propTypes={provider:j().string.isRequired,linkAccount:j().func.isRequired},$s.propTypes={error:j().string.isRequired,provider:j().string.isRequired,linkAccount:j().func.isRequired};var Ns=__webpack_require__(87983),Fs=__webpack_require__(15270),qs=__webpack_require__(25137);function Bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Us(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Us(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Us(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hs(){var e=(0,Qe.$)().t,t=window.ExposedSettings,n=t.hasLinkedProjectFileFeature,r=t.hasLinkedProjectOutputFileFeature,a=n&&r,l=Qa(),f=l.name,d=l.setName,h=l.validName,p=Ha().setValid,y=Je(),w=y.error,x=y.finishCreatingLinkedFile,_=Bs((0,E.useState)(),2),S=_[0],k=_[1],C=Bs((0,E.useState)(),2),O=C[0],j=C[1],T=Bs((0,E.useState)(),2),A=T[0],P=T[1],R=Bs((0,E.useState)(!n),2),I=R[0],M=R[1],L=(0,E.useCallback)((function(e){var t=e.split("/").pop();t&&d(t)}),[d]);(0,E.useEffect)((function(){A&&("output.pdf"===A.path&&S.name?d("".concat(S.name,".pdf")):L(A.path))}),[S,A,d,L]),(0,E.useEffect)((function(){O&&L(O.path)}),[O,L]),(0,E.useEffect)((function(){var e=Boolean(I?A:O);p(h&&e)}),[p,h,I,O,A]);return(0,D.jsxs)("form",{className:"form-controls",id:"create-file",onSubmit:function(e){e.preventDefault(),x(I?{name:f,provider:"project_output_file",data:{source_project_id:S._id,source_output_file_path:A.path,build_id:A.build,clsiServerId:A.clsiServerId}}:{name:f,provider:"project_file",data:{source_project_id:S._id,source_entity_path:O.path}})},children:[(0,D.jsx)(zs,{selectedProject:S,setSelectedProject:k}),I?(0,D.jsx)(Ws,{selectedProjectId:null==S?void 0:S._id,selectedProjectOutputFile:A,setSelectedProjectOutputFile:P}):(0,D.jsx)(Zs,{selectedProjectId:null==S?void 0:S._id,selectedProjectEntity:O,setSelectedProjectEntity:j}),a&&(0,D.jsxs)("div",{className:"toggle-file-type-button",children:["or ",(0,D.jsx)(Ri.Z,{bsStyle:"link",type:"button",onClick:function(){return M((function(e){return!e}))},children:(0,D.jsx)("span",{children:e(I?"select_from_source_files":"select_from_output_files")})})]}),(0,D.jsx)(ds,{label:e("file_name_in_this_project"),classes:{formGroup:"form-controls row-spaced-small"},placeholder:"example.tex",error:w}),w&&(0,D.jsx)(bs,{error:w})]})}function zs(e){var t=e.selectedProject,n=e.setSelectedProject,r=(0,Qe.$)().t,a=(0,A.d2)(Vs)._id,l=(0,Ns.Z)(),f=l.data,d=l.error,h=l.loading,p=(0,E.useMemo)((function(){return f?f.filter((function(e){return e._id!==a})):null}),[f,a]);return d?(0,D.jsx)(bs,{error:d}):(0,D.jsxs)(ns.Z,{className:"form-controls",controlId:"project-select",children:[(0,D.jsx)(rs.Z,{children:r("select_a_project")}),h&&(0,D.jsxs)("span",{children:[" ",(0,D.jsx)(Ii.Z,{type:"spinner",spin:!0})]}),(0,D.jsxs)(is.Z,{componentClass:"select",disabled:!f,value:t?t._id:"",onChange:function(e){var t=e.target.value,r=f.find((function(e){return e._id===t}));n(r)},children:[(0,D.jsxs)("option",{disabled:!0,value:"",children:["- ",r("please_select_a_project")]}),p&&p.map((function(e){return(0,D.jsx)("option",{value:e._id,children:e.name},e._id)}))]}),p&&!p.length&&(0,D.jsx)("small",{children:r("no_other_projects_found")})]})}zs.propTypes={selectedProject:j().object,setSelectedProject:j().func.isRequired};var Vs={_id:j().string.isRequired};function Ws(e){var t=e.selectedProjectId,n=e.selectedProjectOutputFile,r=e.setSelectedProjectOutputFile,a=(0,Qe.$)().t,l=(0,qs.h)(t),f=l.data,d=l.error,h=l.loading;return d?(0,D.jsx)(bs,{error:d}):(0,D.jsxs)(ns.Z,{className:"form-controls row-spaced-small",controlId:"project-output-file-select",children:[(0,D.jsx)(rs.Z,{children:a("select_an_output_file")}),h&&(0,D.jsxs)("span",{children:[" ",(0,D.jsx)(Ii.Z,{type:"spinner",spin:!0})]}),(0,D.jsxs)(is.Z,{componentClass:"select",disabled:!f,value:(null==n?void 0:n.path)||"",onChange:function(e){var t=e.target.value,n=f.find((function(e){return e.path===t}));r(n)},children:[(0,D.jsxs)("option",{disabled:!0,value:"",children:["- ",a("please_select_an_output_file")]}),f&&f.map((function(e){return(0,D.jsx)("option",{value:e.path,children:e.path},e.path)}))]})]})}function Zs(e){var t=e.selectedProjectId,n=e.selectedProjectEntity,r=e.setSelectedProjectEntity,a=(0,Qe.$)().t,l=(0,Fs.t)(t),f=l.data,d=l.error,h=l.loading;return d?(0,D.jsx)(bs,{error:d}):(0,D.jsxs)(ns.Z,{className:"form-controls row-spaced-small",controlId:"project-entity-select",children:[(0,D.jsx)(rs.Z,{children:a("select_a_file")}),h&&(0,D.jsxs)("span",{children:[" ",(0,D.jsx)(Ii.Z,{type:"spinner",spin:!0})]}),(0,D.jsxs)(is.Z,{componentClass:"select",disabled:!f,value:(null==n?void 0:n.path)||"",onChange:function(e){var t=e.target.value,n=f.find((function(e){return e.path===t}));r(n)},children:[(0,D.jsxs)("option",{disabled:!0,value:"",children:["- ",a("please_select_a_file")]}),f&&f.map((function(e){return(0,D.jsx)("option",{value:e.path,children:e.path.slice(1)},e.path)}))]})]})}Ws.propTypes={selectedProjectId:j().string,selectedProjectOutputFile:j().object,setSelectedProjectOutputFile:j().func.isRequired},Zs.propTypes={selectedProjectId:j().string,selectedProjectEntity:j().object,setSelectedProjectEntity:j().func.isRequired};__webpack_require__(67890);var Gs=__webpack_require__(7924),Ks=__webpack_require__.n(Gs),Ys=__webpack_require__(55675),Xs=__webpack_require__.n(Ys),Js=__webpack_require__(175),Qs=__webpack_require__(45445);function el(e){return el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(e)}function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){rl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==el(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==el(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===el(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function il(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||ol(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ol(e,t){if(e){if("string"==typeof e)return al(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?al(e,t):void 0}}function al(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sl(){var e=Je(),t=e.parentFolderId,n=e.cancel,r=e.isDuplicate,a=e.droppedFiles,l=e.setDroppedFiles,f=(0,A.d2)(ll)._id,d=il((0,E.useState)(),2),h=d[0],p=d[1],y=il((0,E.useState)([]),2),w=y[0],x=y[1],_=il((0,E.useState)(!1),2),S=_[0],k=_[1],C=window.ExposedSettings.maxUploadSize,O=function(e,t){var n="/project/".concat(e,"/upload");return t&&(n+="?folder_id=".concat(t)),n},j=(0,Js.vo)((function(){var e=O(f,t);return new(Ks())({allowMultipleUploads:!1,restrictions:{maxNumberOfFiles:40,maxFileSize:C||null},onBeforeUpload:function(e){var n=!0;return k((function(a){return a||x((function(){var a=function(e){return Object.values(e).filter((function(e){var n;return r(null!==(n=e.meta.targetFolderId)&&void 0!==n?n:t,e.meta.name)}))}(e);return n=0===a.length,a})),a})),n},autoProceed:!0}).use(Xs(),{endpoint:e,headers:{"X-CSRF-TOKEN":window.csrfToken},limit:1,fieldName:"qqfile"}).on("complete",(function(e){e.failed.length||n()})).on("upload-success",(function(e,t){"doc"===t.body.entity_type&&window.setTimeout((function(){(0,Qs.j)(f,t.body.entity_id)}),250)})).on("upload-error",(function(e,t,n){var r;switch(null==n?void 0:n.status){case 429:p("rate-limit-hit");break;case 403:p("not-logged-in");break;default:console.error(t),p((null==n||null===(r=n.body)||void 0===r?void 0:r.error)||"generic_something_went_wrong")}}))}));(0,E.useEffect)((function(){if(j&&a){j.setOptions({autoProceed:!1});var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ol(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}(a.files);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=j.addFile({name:n.name,type:n.type,data:n,source:"Local",isRemote:!1,meta:{targetFolderId:a.targetFolderId}}),d=j.getFile(r);j.setFileState(r,{xhrUpload:nl(nl({},d.xhrUpload),{},{endpoint:O(f,a.targetFolderId)})})}}catch(e){t.e(e)}finally{t.f()}}return function(){l(null)}}),[j,a,l,f]);var T=(0,E.useCallback)((function(){k(!0),window.setTimeout((function(){j.upload()}),10)}),[j]),P=!S&&w.length>0;return(0,D.jsxs)(D.Fragment,{children:[h&&(0,D.jsx)(cl,{error:h,maxNumberOfFiles:40}),P?(0,D.jsx)(ul,{cancel:n,conflicts:w,handleOverwrite:T}):(0,D.jsx)(Js.A,{uppy:j,showProgressDetails:!0,height:400,width:"100%",showLinkToFileUploadResult:!1,proudlyDisplayPoweredByUppy:!1,locale:{strings:{dropPasteFiles:"Drag here, paste an image or file, or %{browseFiles}",browseFiles:"select from your computer"}}})]})}var ll={_id:j().string.isRequired};function cl(e){var t=e.error,n=e.maxNumberOfFiles;return"too-many-files"===t?(0,D.jsx)($o.c,{i18nKey:"maximum_files_uploaded_together",values:{max:n}}):(0,D.jsx)(bs,{error:t})}function ul(e){var t=e.cancel,n=e.conflicts,r=e.handleOverwrite,a=(0,Qe.$)().t;return(0,D.jsxs)("div",{className:"small modal-new-file--body-conflict",children:[(0,D.jsx)("p",{className:"text-center mb-0",children:a("the_following_files_already_exist_in_this_project")}),(0,D.jsx)("ul",{className:"text-center list-unstyled row-spaced-small mt-1",children:n.map((function(e,t){return(0,D.jsx)("li",{children:(0,D.jsx)("strong",{children:e.meta.name})},t)}))}),(0,D.jsx)("p",{className:"text-center row-spaced-small",children:a("do_you_want_to_overwrite_them")}),(0,D.jsxs)("p",{className:"text-center",children:[(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",onClick:t,children:a("cancel")})," ",(0,D.jsx)(Ri.Z,{bsStyle:"danger",onClick:r,children:a("overwrite")})]})]})}cl.propTypes={error:j().string.isRequired,maxNumberOfFiles:j().number.isRequired},ul.propTypes={cancel:j().func.isRequired,conflicts:j().array.isRequired,handleOverwrite:j().func.isRequired};var fl=[{import:t,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/create-file-mode-mendeley.js"},{import:n,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/create-file-mode-zotero.js"}];function dl(){var e=(0,Qe.$)().t,t=Je().newFileCreateMode,n=(0,P.O)().fileCount;return n&&"error"!==n.status?(0,D.jsx)("table",{children:(0,D.jsx)("tbody",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"modal-new-file--list",children:(0,D.jsxs)("ul",{className:"list-unstyled",children:[(0,D.jsx)(Va,{mode:"doc",icon:"file",label:e("new_file")}),(0,D.jsx)(Va,{mode:"upload",icon:"upload",label:e("upload")}),(window.ExposedSettings.hasLinkedProjectFileFeature||window.ExposedSettings.hasLinkedProjectOutputFileFeature)&&(0,D.jsx)(Va,{mode:"project",icon:"folder-open",label:e("from_another_project")}),window.ExposedSettings.hasLinkUrlFeature&&(0,D.jsx)(Va,{mode:"url",icon:"globe",label:e("from_external_url")}),fl.map((function(e){var t=e.import.CreateFileMode,n=e.path;return(0,D.jsx)(t,{},n)}))]})}),(0,D.jsxs)("td",{className:"modal-new-file--body modal-new-file--body-".concat(t),children:["doc"===t&&(0,D.jsx)(es,{initialName:"name.tex",children:(0,D.jsx)(Rs,{})}),"url"===t&&(0,D.jsx)(es,{children:(0,D.jsx)(Ls,{})}),"project"===t&&(0,D.jsx)(es,{children:(0,D.jsx)(Hs,{})}),"upload"===t&&(0,D.jsx)(sl,{}),fl.map((function(e){var t=e.import.CreateFilePane,n=e.path;return(0,D.jsx)(t,{},n)}))]})]})})}):null}function hl(){var e=Ha().valid,t=Je(),n=t.newFileCreateMode,r=t.inFlight,a=t.cancel,l=(0,P.O)().fileCount;return(0,D.jsx)(pl,{valid:e,cancel:a,newFileCreateMode:n,inFlight:r,fileCount:l})}function pl(e){var t=e.valid,n=e.fileCount,r=e.inFlight,a=e.newFileCreateMode,l=e.cancel,f=(0,Qe.$)().t;return(0,D.jsxs)(D.Fragment,{children:["warning"===n.status&&(0,D.jsxs)("div",{className:"modal-footer-left approaching-file-limit",children:[f("project_approaching_file_limit")," (",n.value,"/",n.limit,")"]}),"error"===n.status&&(0,D.jsx)(ts.Z,{bsStyle:"warning",className:"at-file-limit",children:f("project_has_too_many_files")}),(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",type:"button",disabled:r,onClick:l,children:f("cancel")}),"upload"!==a&&(0,D.jsx)(Ri.Z,{bsStyle:"primary",type:"submit",form:"create-file",disabled:r||!t,children:(0,D.jsx)("span",{children:r?"".concat(f("creating"),"…"):f("create")})})]})}function ml(){var e=(0,Qe.$)().t,t=Je(),n=t.isCreatingFile,r=t.cancel;return n?(0,D.jsx)(za,{children:(0,D.jsxs)(So.Z,{bsSize:"large",onHide:r,show:!0,children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:e("add_files")})}),(0,D.jsx)(_o.Z.Body,{className:"modal-new-file",children:(0,D.jsx)(dl,{})}),(0,D.jsx)(_o.Z.Footer,{children:(0,D.jsx)(hl,{})})]})}):null}pl.propTypes={cancel:j().func.isRequired,fileCount:j().shape({limit:j().number.isRequired,status:j().string.isRequired,value:j().number.isRequired}).isRequired,inFlight:j().bool.isRequired,newFileCreateMode:j().string,valid:j().bool.isRequired};var gl=E.memo((function(e){var t=e.refProviders,n=e.reindexReferences,r=e.setRefProviderEnabled,a=e.setStartedFreeTrial,l=e.onSelect,f=e.onInit,d=e.isConnected,h=(0,A.d2)(bl)._id,p=(0,P.O)().fileTreeData,y=h&&p;return(0,E.useEffect)((function(){y&&f()}),[y,f]),y?(0,D.jsxs)(mi,{refProviders:t,setRefProviderEnabled:r,setStartedFreeTrial:a,reindexReferences:n,onSelect:l,children:[d?null:(0,D.jsx)("div",{className:"disconnected-overlay"}),(0,D.jsx)(xo,{}),(0,D.jsx)(Da,{}),(0,D.jsx)("div",{className:"file-tree-inner",children:(0,D.jsx)(vl,{})}),(0,D.jsx)(ko,{}),(0,D.jsx)(ml,{}),(0,D.jsx)(jo,{}),(0,D.jsx)(To,{})]}):null}));function vl(){!function(){var e=(0,La.SE)({id:j().string.isRequired}),t=(0,P.O)(),n=t.dispatchRename,r=t.dispatchDelete,a=t.dispatchMove,l=t.dispatchCreateFolder,f=t.dispatchCreateDoc,d=t.dispatchCreateFile,h=t.fileTreeData,p=_e(),y=p.selectedEntityIds,w=p.selectedEntityParentIds,x=p.select,_=p.unselect,S=window._ide&&window._ide.socket,k=(0,E.useCallback)((function(t,n,r){r&&(null==e?void 0:e.id)===r&&window.expectingLinkedFileRefreshedSocketFor===n&&(x(t),window.expectingLinkedFileRefreshedSocketFor=null)}),[e,x]);(0,E.useEffect)((function(){function e(e,t){n(e,t)}return S&&S.on("reciveEntityRename",e),function(){S&&S.removeListener("reciveEntityRename",e)}}),[S,n]),(0,E.useEffect)((function(){function e(e){if(_(e),w.has(e)){var t,n=Na(y);try{for(n.s();!(t=n.n()).done;){var a=t.value;(0,Y.we)(h,a).path.includes(e)&&_(a)}}catch(e){n.e(e)}finally{n.f()}}r(e)}return S&&S.on("removeEntity",e),function(){S&&S.removeListener("removeEntity",e)}}),[S,_,r,h,y,w]),(0,E.useEffect)((function(){function e(e,t){a(e,t)}return S&&S.on("reciveEntityMove",e),function(){S&&S.removeListener("reciveEntityMove",e)}}),[S,a]),(0,E.useEffect)((function(){function e(e,t,n){l(e,t)}return S&&S.on("reciveNewFolder",e),function(){S&&S.removeListener("reciveNewFolder",e)}}),[S,l]),(0,E.useEffect)((function(){function e(e,t,n,r){f(e,t)}return S&&S.on("reciveNewDoc",e),function(){S&&S.removeListener("reciveNewDoc",e)}}),[S,f]),(0,E.useEffect)((function(){function e(e,t,n,r,a){d(e,t),r&&k(t._id,t.name,a)}return S&&S.on("reciveNewFile",e),function(){S&&S.removeListener("reciveNewFile",e)}}),[S,d,k])}();var e=(0,P.O)().fileTreeData,t=hi(e._id),n=t.isOver,r=t.dropRef;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(xi,{isOver:n}),(0,D.jsx)(go,{folders:e.folders,docs:e.docs,files:e.fileRefs,classes:{root:"file-tree-list"},dropRef:r,isOver:n,children:(0,D.jsx)("li",{className:"bottom-buffer"})})]})}gl.propTypes={onSelect:j().func.isRequired,onInit:j().func.isRequired,isConnected:j().bool.isRequired,setRefProviderEnabled:j().func.isRequired,setStartedFreeTrial:j().func.isRequired,reindexReferences:j().func.isRequired,refProviders:j().object.isRequired};var yl,bl={_id:j().string.isRequired},wl=(0,T.Z)(gl,Ma),xl=new Uint8Array(16);function _l(){if(!yl&&!(yl="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yl(xl)}var Sl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var kl=function(e){return"string"==typeof e&&Sl.test(e)},Cl=[],El=0;El<256;++El)Cl.push((El+256).toString(16).substr(1));var Ol=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Cl[e[t+0]]+Cl[e[t+1]]+Cl[e[t+2]]+Cl[e[t+3]]+"-"+Cl[e[t+4]]+Cl[e[t+5]]+"-"+Cl[e[t+6]]+Cl[e[t+7]]+"-"+Cl[e[t+8]]+Cl[e[t+9]]+"-"+Cl[e[t+10]]+Cl[e[t+11]]+Cl[e[t+12]]+Cl[e[t+13]]+Cl[e[t+14]]+Cl[e[t+15]]).toLowerCase();if(!kl(n))throw TypeError("Stringified UUID is invalid");return n};var jl=function(e,t,n){var r=(e=e||{}).random||(e.rng||_l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return Ol(r)},$l=function(e){var t;void 0===e&&(e=E.Fragment);return{component:function(n){var r=(0,E.useState)([]),a=r[0],l=r[1];return(0,E.useEffect)((function(){t=function(e){return l((function(t){return t.push(e),[].concat(t)})),{update:function(t){l((function(n){var r=n.find((function(t){return(null==t?void 0:t.key)===e.key}));return r?(r.props=t,[].concat(n)):n}))},remove:function(){l((function(t){var n=t.findIndex((function(t){return(null==t?void 0:t.key)===e.key}));return-1===n?t:(t[n]=void 0,[].concat(t))}))}}}}),[]),E.createElement(e,Object.assign({},n),a.map((function(e){if(!e)return null;var t=e.key,n=e.node,r=e.component,a=e.props;return(0,Pi.createPortal)(E.createElement(r,Object.assign({key:t},a)),n)})))},use:function(e){return function(n){var r=(0,E.useRef)(jl()),a=(0,E.useRef)(null),l=(0,E.useRef)();return(0,E.useEffect)((function(){l.current&&l.current.update(n)}),[n]),(0,E.useEffect)((function(){if(a.current&&a.current.parentElement)return l.current=t({key:r.current,node:a.current.parentElement,component:e,props:n}),l.current.remove}),[]),E.createElement("div",{ref:a,style:{display:"none"}})}}}},Tl=__webpack_require__(61917),Al=__webpack_require__(76725),Pl=__webpack_require__(76621),Dl=__webpack_require__(11528),Rl=(__webpack_require__(60523),__webpack_require__(98022));__webpack_require__(1951);function Il(e){return Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Il(e)}function Ml(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ml(Object(n),!0).forEach((function(t){Nl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ml(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Il(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Il(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Il(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fl=3e5;function ql(e,t,n){if(n.includes(t.id))return{messages:e,uniqueMessageIds:n};(n=n.slice(0)).push(t.id);var r=e[e.length-1];return{messages:e=r&&t&&t.user&&t.user.id&&t.user.id===r.user.id&&t.timestamp-r.timestamp<Fl?e.slice(0,e.length-1).concat(Ll(Ll({},r),{},{id:t.id,timestamp:t.timestamp,contents:r.contents.concat(t.content)})):e.slice(0).concat({id:t.id,user:t.user,timestamp:t.timestamp,contents:[t.content]}),uniqueMessageIds:n}}var Bl=__webpack_require__(73091);function Ul(e){return Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(e)}function Hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vl(Object(n),!0).forEach((function(t){Zl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ul(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ul(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ul(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gl=50;function Kl(e,t){switch(t.type){case"INITIAL_FETCH_MESSAGES":return Wl(Wl({},e),{},{status:"pending",initialMessagesLoaded:!0});case"FETCH_MESSAGES":return Wl(Wl({},e),{},{status:"pending"});case"FETCH_MESSAGES_SUCCESS":return Wl(Wl(Wl({},e),{},{status:"idle"},(n=e.messages,r=t.messages,a=e.uniqueMessageIds,l=n.slice(0),a=a.slice(0),r.slice(0).reverse().forEach((function(e){if(!a.includes(e.id)){a.push(e.id);var t=l[0];t&&e&&e.user&&e.user.id===t.user.id&&t.timestamp-e.timestamp<Fl?(t.id=e.id,t.timestamp=e.timestamp,t.contents=[e.content].concat(t.contents)):l.unshift({id:e.id,user:e.user,timestamp:e.timestamp,contents:[e.content]})}})),{messages:l,uniqueMessageIds:a})),{},{lastTimestamp:t.messages[0]?t.messages[0].timestamp:null,atEnd:t.messages.length<Gl});case"SEND_MESSAGE":return Wl(Wl({},e),ql(e.messages,{id:(0,Rl.v4)(),user:t.user,content:t.content,timestamp:Date.now()},e.uniqueMessageIds));case"RECEIVE_MESSAGE":return Wl(Wl(Wl({},e),ql(e.messages,t.message,e.uniqueMessageIds)),{},{unreadMessageCount:e.unreadMessageCount+1});case"MARK_MESSAGES_AS_READ":return Wl(Wl({},e),{},{unreadMessageCount:0});case"CLEAR":return Wl({},Yl);case"ERROR":return Wl(Wl({},e),{},{status:"error",error:t.error});default:throw new Error("Unknown action")}var n,r,a,l}var Yl={status:"idle",messages:[],initialMessagesLoaded:!1,lastTimestamp:null,atEnd:!1,unreadMessageCount:0,error:null,uniqueMessageIds:[]},Xl=(0,E.createContext)();function Jl(e){var t,n=e.children,r=(0,E.useRef)((0,Rl.v4)()),a=(0,La.SE)({id:j().string.isRequired}),l=(0,A.d2)({_id:j().string.isRequired})._id,f=(0,le.l5)({chatIsOpen:j().bool}).chatIsOpen,d=(0,Bl.Z)(),h=d.hasFocus,p=d.flashTitle,y=d.stopFlashingTitle,w=Hl((0,E.useReducer)(Kl,Yl),2),x=w[0],_=w[1],S=(0,E.useMemo)((function(){function e(){if(!x.atEnd){var e={limit:Gl};x.lastTimestamp&&(e.before=x.lastTimestamp);var t=new URLSearchParams(e),n="/project/".concat(l,"/messages?").concat(t.toString());(0,U.xA)(n).then((function(){_({type:"FETCH_MESSAGES_SUCCESS",messages:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reverse()})})).catch((function(e){_({type:"ERROR",error:e})}))}}return{loadInitialMessages:function(){x.initialMessagesLoaded||(_({type:"INITIAL_FETCH_MESSAGES"}),e())},loadMoreMessages:function(){_({type:"FETCH_MESSAGES"}),e()},reset:function(){_({type:"CLEAR"}),e()}}}),[l,x.atEnd,x.initialMessagesLoaded,x.lastTimestamp]),k=S.loadInitialMessages,C=S.loadMoreMessages,O=S.reset,T=(0,E.useCallback)((function(e){if(e){_({type:"SEND_MESSAGE",user:a,content:e});var t="/project/".concat(l,"/messages");(0,U.ty)(t,{body:{content:e,client_id:r.current}}).catch((function(e){_({type:"ERROR",error:e})}))}}),[l,a]),P=(0,E.useCallback)((function(){_({type:"MARK_MESSAGES_AS_READ"})}),[]),R=null===(t=window._ide)||void 0===t?void 0:t.socket;(0,E.useEffect)((function(){if(R)return R.on("new-chat-message",e),function(){R&&R.removeListener("new-chat-message",e)};function e(e){e.clientId!==r.current&&_({type:"RECEIVE_MESSAGE",message:e})}}),[R]),(0,E.useEffect)((function(){h&&(y(),f&&P()),!h&&x.unreadMessageCount>0&&p("New Message")}),[h,f,x.unreadMessageCount,p,y,P]);var I=(0,E.useMemo)((function(){return{status:x.status,messages:x.messages,initialMessagesLoaded:x.initialMessagesLoaded,atEnd:x.atEnd,unreadMessageCount:x.unreadMessageCount,loadInitialMessages:k,loadMoreMessages:C,reset:O,sendMessage:T,markMessagesAsRead:P,error:x.error}}),[k,C,P,O,T,x.atEnd,x.error,x.initialMessagesLoaded,x.messages,x.status,x.unreadMessageCount]);return(0,D.jsx)(Xl.Provider,{value:I,children:n})}function Ql(e){var t=(0,E.useContext)(Xl);return j().checkPropTypes(e,t,"data","ChatContext.Provider"),t}Xl.Provider.propTypes={value:j().shape({status:j().string.isRequired,messages:j().array.isRequired,initialMessagesLoaded:j().bool.isRequired,atEnd:j().bool.isRequired,unreadMessageCount:j().number.isRequired,loadInitialMessages:j().func.isRequired,loadMoreMessages:j().func.isRequired,sendMessage:j().func.isRequired,markMessagesAsRead:j().func.isRequired,reset:j().func.isRequired,error:j().object}).isRequired},Jl.propTypes={children:j().any};var ec=__webpack_require__(40687),tc=__webpack_require__(37246),nc=(__webpack_require__(96882),__webpack_require__(38859),__webpack_require__(17525),__webpack_require__(18275),__webpack_require__(96227));function rc(e){return rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(e)}function ic(){ic=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==rc(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){lc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sc(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function lc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==rc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rc(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cc(e,t){(0,nc.sendMB)("setting-changed",{changedSetting:e,changedSettingVal:t}),(0,U.ty)("/user/settings",{body:lc({},e,t)}).catch(console.error)}var uc=function(){var e,t=(e=ic().mark((function e(t,n){return ic().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,U.ty)("/project/".concat(t,"/settings"),{body:ac({},n)});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){sc(l,r,a,f,d,"next",e)}function d(e){sc(l,r,a,f,d,"throw",e)}f(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();function fc(e){return fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(e)}function dc(){dc=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==fc(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hc(Object(n),!0).forEach((function(t){mc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==fc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fc(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gc(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function vc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bc(){var e=vc((0,tc.Z)("project",!0),2),t=e[0],n=e[1],r=(0,A.d2)()._id;return function(){var e,a=(e=dc().mark((function e(a,l){return dc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}if(t[a]===l){e.next=6;break}return e.next=5,uc(r,mc({},a,l));case 5:n(pc(pc({},t),{},mc({},a,l)));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){gc(l,r,a,f,d,"next",e)}function d(e){gc(l,r,a,f,d,"throw",e)}f(void 0)}))});return function(e,t){return a.apply(this,arguments)}}()}function wc(e){return wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wc(e)}function xc(){xc=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==wc(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function Sc(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function kc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ec(){var e=kc((0,tc.Z)("project.rootDoc_id"),1)[0],t=(0,oe._i)().permissionsLevel,n=bc(),r=(0,E.useCallback)(function(){var r,a=(r=xc().mark((function r(a){return xc().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||"readOnly"===t){r.next=9;break}return r.prev=2,r.next=5,n("rootDocId",a);case 5:r.next=9;break;case 7:r.prev=7,r.t0=r.catch(2);case 9:case"end":return r.stop()}}),r,null,[[2,7]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var l=r.apply(e,t);function f(e){Sc(l,n,a,f,d,"next",e)}function d(e){Sc(l,n,a,f,d,"throw",e)}f(void 0)}))});return function(e){return a.apply(this,arguments)}}(),[t,e,n]);return{rootDocId:e,setRootDocId:r}}function Oc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ac(){var e=$c((0,tc.Z)("project",!0),1)[0],t=bc(),n=(0,E.useCallback)((function(e){t("compiler",e).catch(console.error)}),[t]),r=(0,E.useCallback)((function(e){t("imageName",e).catch(console.error)}),[t]),a=Ec(),l=a.setRootDocId,f=a.rootDocId,d=function(){var e=Oc((0,tc.Z)("project.spellCheckLanguage"),2),t=e[0],n=e[1],r=bc();return(0,E.useCallback)((function(e){null!=t&&e!==t&&(n(e),r("spellCheckLanguage",e),cc("spellCheckLanguage",e))}),[n,t,r])}();return{compiler:null==e?void 0:e.compiler,setCompiler:n,imageName:null==e?void 0:e.imageName,setImageName:r,rootDocId:f,setRootDocId:l,spellCheckLanguage:null==e?void 0:e.spellCheckLanguage,setSpellCheckLanguage:d}}function Pc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rc(){var e=Pc((0,E.useState)(null),2),t=e[0],n=e[1],r=Pc((0,tc.Z)("ui.loadingStyleSheet"),2),a=r[0],l=r[1],f=Pc((0,tc.Z)("settings.overallTheme"),2),d=f[0],h=f[1];return(0,E.useEffect)((function(){var e,n=document.querySelector("head"),r=document.getElementById("main-stylesheet"),f=document.createElement("link");f.setAttribute("rel","stylesheet"),f.setAttribute("id","main-stylesheet"),f.setAttribute("href",null!==(e=null==t?void 0:t.path)&&void 0!==e?e:"");var d=function(){l(!1),n&&r&&n.removeChild(r)};return a&&(f.addEventListener("load",d,{once:!0}),null==n||n.appendChild(f)),function(){f.removeEventListener("load",d)}}),[a,l,null==t?void 0:t.path]),(0,E.useCallback)((function(e){if(d!==e){var t=C().find(window.overallThemes,(function(t){return t.val===e}));t&&(l(!0),n(t),h(e),cc("overallTheme",e))}}),[d,l,h])}function Ic(e){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(e)}function Mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(n),!0).forEach((function(t){Nc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ic(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ic(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ic(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bc(){var e=Fc((0,tc.Z)("settings",!0),2),t=e[0],n=e[1];return function(e,r){t[e]!==r&&(n(Lc(Lc({},t),{},Nc({},e,r))),cc(e,r))}}function Uc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zc(e){return zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(e)}function Vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vc(Object(n),!0).forEach((function(t){Zc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==zc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zc(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yc=(0,E.createContext)(void 0);function Xc(e){var t=e.children,n=Ac(),r=n.compiler,a=n.setCompiler,l=n.imageName,f=n.setImageName,d=n.rootDocId,h=n.setRootDocId,p=n.spellCheckLanguage,y=n.setSpellCheckLanguage,w=function(){var e=Bc(),t=Uc((0,tc.Z)("settings",!0),1)[0],n=Rc(),r=(0,E.useCallback)((function(t){e("autoComplete",t)}),[e]),a=(0,E.useCallback)((function(t){e("autoPairDelimiters",t)}),[e]),l=(0,E.useCallback)((function(t){e("syntaxValidation",t)}),[e]),f=(0,E.useCallback)((function(t){e("editorTheme",t)}),[e]),d=(0,E.useCallback)((function(t){e("mode",t)}),[e]),h=(0,E.useCallback)((function(t){e("fontSize",t)}),[e]),p=(0,E.useCallback)((function(t){e("fontFamily",t)}),[e]),y=(0,E.useCallback)((function(t){e("lineHeight",t)}),[e]),w=(0,E.useCallback)((function(t){e("pdfViewer",t)}),[e]);return{autoComplete:null==t?void 0:t.autoComplete,setAutoComplete:r,autoPairDelimiters:null==t?void 0:t.autoPairDelimiters,setAutoPairDelimiters:a,syntaxValidation:null==t?void 0:t.syntaxValidation,setSyntaxValidation:l,editorTheme:null==t?void 0:t.editorTheme,setEditorTheme:f,overallTheme:null==t?void 0:t.overallTheme,setOverallTheme:n,mode:null==t?void 0:t.mode,setMode:d,fontSize:null==t?void 0:t.fontSize,setFontSize:h,fontFamily:null==t?void 0:t.fontFamily,setFontFamily:p,lineHeight:null==t?void 0:t.lineHeight,setLineHeight:y,pdfViewer:null==t?void 0:t.pdfViewer,setPdfViewer:w}}(),x=w.autoComplete,_=w.setAutoComplete,S=w.autoPairDelimiters,k=w.setAutoPairDelimiters,C=w.syntaxValidation,O=w.setSyntaxValidation,j=w.editorTheme,T=w.setEditorTheme,A=w.overallTheme,P=w.setOverallTheme,R=w.mode,I=w.setMode,M=w.fontSize,L=w.setFontSize,N=w.fontFamily,F=w.setFontFamily,q=w.lineHeight,B=w.setLineHeight,U=w.pdfViewer,H=w.setPdfViewer;!function(){var e=(0,Tl.I)(),t=Gc((0,tc.Z)("project",!0),2),n=t[0],r=t[1],a=(0,E.useCallback)((function(e){n&&r(Wc(Wc({},n),{},{compiler:e}))}),[n,r]),l=(0,E.useCallback)((function(e){n&&r(Wc(Wc({},n),{},{imageName:e}))}),[n,r]),f=(0,E.useCallback)((function(e){n&&r(Wc(Wc({},n),{},{spellCheckLanguage:e}))}),[n,r]);(0,E.useEffect)((function(){if(n&&null!=e&&e.socket)return e.socket.on("compilerUpdated",a),e.socket.on("imageNameUpdated",l),e.socket.on("spellCheckLanguageUpdated",f),function(){e.socket.removeListener("compilerUpdated",a),e.socket.removeListener("imageNameUpdated",l),e.socket.removeListener("spellCheckLanguageUpdated",f)}}),[null==e?void 0:e.socket,n,a,l,f])}();var z=(0,E.useMemo)((function(){return{compiler:r,setCompiler:a,imageName:l,setImageName:f,rootDocId:d,setRootDocId:h,spellCheckLanguage:p,setSpellCheckLanguage:y,autoComplete:x,setAutoComplete:_,autoPairDelimiters:S,setAutoPairDelimiters:k,syntaxValidation:C,setSyntaxValidation:O,editorTheme:j,setEditorTheme:T,overallTheme:A,setOverallTheme:P,mode:R,setMode:I,fontSize:M,setFontSize:L,fontFamily:N,setFontFamily:F,lineHeight:q,setLineHeight:B,pdfViewer:U,setPdfViewer:H}}),[r,a,l,f,d,h,p,y,x,_,S,k,C,O,j,T,A,P,R,I,M,L,N,F,q,B,U,H]);return(0,D.jsx)(Yc.Provider,{value:z,children:t})}function Jc(){var e=(0,E.useContext)(Yc);if(!e)throw new Error("useProjectSettingsContext is only available inside ProjectSettingsProvider");return e}function Qc(e){var t=e.children,n=e.ide,r=e.settings;return(0,D.jsx)(ec._8,{children:(0,D.jsx)(Tl.P,{ide:n,children:(0,D.jsx)(La.dr,{children:(0,D.jsx)(A.jI,{children:(0,D.jsx)(P.T,{children:(0,D.jsx)(Dl.dn,{children:(0,D.jsx)(oe.KU,{settings:r,children:(0,D.jsx)(Xc,{children:(0,D.jsx)(le.aM,{children:(0,D.jsx)(Al.gy,{children:(0,D.jsx)(Pl.in,{children:(0,D.jsx)(Jl,{children:t})})})})})})})})})})})})}Qc.propTypes={children:j().any,ide:j().object,settings:j().object};var eu=$l(Qc);function tu(e){return tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tu(e)}function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ru(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(n),!0).forEach((function(t){iu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iu(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==tu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tu(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ou(e){return ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ou(e)}function au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==ou(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ou(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===ou(l)?l:String(l)),r)}var a,l}x.Z.controller("ReactFileTreeController",["$scope","$timeout","ide",function(e,t,n){function r(){if(e.connection){var t="ready"===e.connection.state,n="waitingCountdown"===e.connection.state&&null===e.connection.reconnection_countdown;e.isConnected=t||n}else e.isConnected=!1}e.isConnected=!0,e.$on("project:joined",(function(){e.$emit("file-tree:initialized")})),e.$watch("editor.open_doc_id",(function(e){window.dispatchEvent(new CustomEvent("editor.openDoc",{detail:e}))})),e.$on("file-tree.reselectDoc",(function(e,t){window.dispatchEvent(new CustomEvent("editor.openDoc",{detail:t}))})),e.$watch("connection.state",r),e.$watch("connection.reconnection_countdown",r),e.onInit=function(){t((function(){e.$emit("left-pane-resize-all")}))},e.onSelect=function(t){if(1===t.length){var n=t[0],r="fileRef"===n.type?"file":n.type;e.$emit("entity:selected",ru(ru({},n.entity),{},{id:n.entity._id,type:r})),e.$emit("entities:multiSelected",{count:0})}else t.length>1?e.$emit("entities:multiSelected",{count:t.length}):e.$emit("entity:no-selection")},e.refProviders=n.$scope.user.refProviders||{},n.$scope.$watch("user.refProviders",(function(t){e.refProviders=(0,k.cloneDeep)(t)}),!0),e.setRefProviderEnabled=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.$scope.$applyAsync((function(){n.$scope.user.refProviders[e]=t}))},e.setStartedFreeTrial=function(t){e.$applyAsync((function(){e.startedFreeTrial=t}))},e.reindexReferences=function(){n.$scope.$emit("references:should-reindex",{})}}]),x.Z.component("fileTreeRoot",(0,S.react2angular)(eu.use(wl),Object.keys(wl.propTypes)));var su=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.$on("project:joined",(function(){return r.loadRootFolder(),r.loadDeletedDocs(),r.$scope.$emit("file-tree:initialized")})),this.$scope.$on("entities:multiSelected",(function(e,t){r.$scope.$apply((function(){r.$scope.multiSelectedCount=t.count,r.$scope.editor.multiSelectedCount=t.count}))})),this.$scope.$watch("rootFolder",(function(e){if(null!=e)return r.recalculateDocList()})),this._bindToSocketEvents(),this.$scope.multiSelectedCount=0,$(document).on("click",(function(){r.clearMultiSelectedEntities(),setTimeout((function(){return r.$scope.$digest()}),0)}))}var t,n,r;return t=e,n=[{key:"_bindToSocketEvents",value:function(){var e=this;return this.ide.socket.on("reciveNewDoc",(function(t,n){var r=e.findEntityById(t)||e.$scope.rootFolder;return e.$scope.$apply((function(){return r.children.push({name:n.name,id:n._id,type:"doc"}),e.recalculateDocList()}))})),this.ide.socket.on("reciveNewFile",(function(t,n,r,a){var l=e.findEntityById(t)||e.$scope.rootFolder;return e.$scope.$apply((function(){return l.children.push({name:n.name,id:n._id,type:"file",linkedFileData:a,created:n.created}),e.recalculateDocList()}))})),this.ide.socket.on("reciveNewFolder",(function(t,n){var r=e.findEntityById(t)||e.$scope.rootFolder;return e.$scope.$apply((function(){return r.children.push({name:n.name,id:n._id,type:"folder",children:[]}),e.recalculateDocList()}))})),this.ide.socket.on("reciveEntityRename",(function(t,n){var r=e.findEntityById(t);if(null!=r)return e.$scope.$apply((function(){return r.name=n,e.recalculateDocList()}))})),this.ide.socket.on("removeEntity",(function(t){var n=e.findEntityById(t);if(null!=n)return e.$scope.$apply((function(){return e._deleteEntityFromScope(n),e.recalculateDocList()})),e.$scope.$broadcast("entity:deleted",n)})),this.ide.socket.on("reciveEntityMove",(function(t,n){var r=e.findEntityById(t),a=e.findEntityById(n);return e.$scope.$apply((function(){return e._moveEntityInScope(r,a),e.recalculateDocList()}))}))}},{key:"selectEntity",value:function(e){return this.selected_entity_id=e.id,this.ide.fileTreeManager.forEachEntity((function(e){return e.selected=!1})),e.selected=!0}},{key:"toggleMultiSelectEntity",value:function(e){e.multiSelected=!e.multiSelected,this.$scope.multiSelectedCount=this.multiSelectedCount(),this.$scope.editor.multiSelectedCount=this.$scope.multiSelectedCount}},{key:"multiSelectedCount",value:function(){var e=0;return this.forEachEntity((function(t){if(t.multiSelected)return e++})),e}},{key:"getMultiSelectedEntities",value:function(){var e=[];return this.forEachEntity((function(t){if(t.multiSelected)return e.push(t)})),e}},{key:"getFullCount",value:function(){var e=[];return this.forEachEntity((function(t){t.deleted||e.push(t)})),e.length}},{key:"getMultiSelectedEntityChildNodes",value:function(){for(var e=this.getMultiSelectedEntities(),t={},n=0,r=Array.from(e);n<r.length;n++){var a=r[n];t["/"+this.getEntityPath(a)]=a}var l={};for(var f in t){t[f];var d=f.split("/");if(!(d.length<=2))for(var h=1,p=d.length-1,y=p>=1;y?h<=p:h>=p;y?h++:h--)l["/"+d.slice(0,h).join("/")]=!0}var w=[];for(var x in t){var _=t[x];null==l[x]&&w.push(_)}return w}},{key:"clearMultiSelectedEntities",value:function(){if(0!==this.$scope.multiSelectedCount)return this.forEachEntity((function(e){return e.multiSelected=!1})),this.$scope.multiSelectedCount=0}},{key:"multiSelectSelectedEntity",value:function(){var e=this.findSelectedEntity();e&&(e.multiSelected=!0),this.$scope.multiSelectedCount=this.multiSelectedCount()}},{key:"existsInFolder",value:function(e,t){var n=this.findEntityById(e);return null!=n&&null!=this._findEntityByPathInFolder(n,t)}},{key:"findSelectedEntity",value:function(){var e=null;return this.forEachEntity((function(t){if(t.selected)return e=t})),e}},{key:"findEntityById",value:function(e,t){if(null==t&&(t={}),this.$scope.rootFolder.id===e)return this.$scope.rootFolder;var n=this._findEntityByIdInFolder(this.$scope.rootFolder,e);if(null!=n)return n;if(t.includeDeleted)for(var r=0,a=Array.from(this.$scope.deletedDocs);r<a.length;r++)if((n=a[r]).id===e)return n;return null}},{key:"_findEntityByIdInFolder",value:function(e,t){for(var n=0,r=Array.from(e.children||[]);n<r.length;n++){var a=r[n];if(a.id===t)return a;if(null!=a.children){var l=this._findEntityByIdInFolder(a,t);if(null!=l)return l}}return null}},{key:"findEntityByPath",value:function(e){return this._findEntityByPathInFolder(this.$scope.rootFolder,e)}},{key:"getPreviewByPath",value:function(e){for(var t=0,n=["",".png",".jpg",".jpeg",".pdf",".PNG",".JPG",".JPEG",".PDF"];t<n.length;t++){var r=n[t],a=this.findEntityByPath(e+r);if(a)return{url:"/project/".concat(this.$scope.project._id,"/file/").concat(a.id),extension:a.name.split(".").pop()}}return null}},{key:"_findEntityByPathInFolder",value:function(e,t){if(null==t||null==e)return null;if(""===t)return e;var n=t.split("/"),r=n.shift(),a=n.join("/");if("."===r)return this._findEntityByPathInFolder(e,a);for(var l=0,f=Array.from(e.children);l<f.length;l++){var d=f[l];if(d.name===r){if(""===a)return d;if("folder"===d.type)return this._findEntityByPathInFolder(d,a)}}return null}},{key:"forEachEntity",value:function(e){var t=this;return null==e&&(e=function(){}),this._forEachEntityInFolder(this.$scope.rootFolder,null,e),function(){for(var n=[],r=0,a=Array.from(t.$scope.deletedDocs||[]);r<a.length;r++){var l=a[r];n.push(e(l))}return n}()}},{key:"_forEachEntityInFolder",value:function(e,t,n){var r=this;return function(){for(var a=[],l=0,f=Array.from(e.children||[]);l<f.length;l++){var d=f[l],h=void 0;h=null!=t?t+"/"+d.name:d.name,n(d,e,h),null!=d.children?a.push(r._forEachEntityInFolder(d,h,n)):a.push(void 0)}return a}()}},{key:"getEntityPath",value:function(e){return this._getEntityPathInFolder(this.$scope.rootFolder,e)}},{key:"_getEntityPathInFolder",value:function(e,t){for(var n=0,r=Array.from(e.children||[]);n<r.length;n++){var a=r[n];if(a===t)return t.name;if("folder"===a.type){var l=this._getEntityPathInFolder(a,t);if(null!=l)return a.name+"/"+l}}return null}},{key:"getRootDocDirname",value:function(){var e=this.findEntityById(this.$scope.project.rootDoc_id);if(null!=e)return this._getEntityDirname(e)}},{key:"_getEntityDirname",value:function(e){var t=this.getEntityPath(e);if(null!=t)return t.split("/").slice(0,-1).join("/")}},{key:"_findParentFolder",value:function(e){var t=this._getEntityDirname(e);if(null!=t)return this.findEntityByPath(t)}},{key:"loadRootFolder",value:function(){return this.$scope.rootFolder=this._parseFolder((e=null!=this.$scope?this.$scope.project:void 0,t=function(e){return e.rootFolder[0]},null!=e?t(e):void 0));var e,t}},{key:"_parseFolder",value:function(e){for(var t={name:e.name,id:e._id,type:"folder",children:[],selected:e._id===this.selected_entity_id},n=0,r=Array.from(e.docs||[]);n<r.length;n++){var a=r[n];t.children.push({name:a.name,id:a._id,type:"doc",selected:a._id===this.selected_entity_id})}for(var l=0,f=Array.from(e.fileRefs||[]);l<f.length;l++){var d=f[l];t.children.push({name:d.name,id:d._id,type:"file",selected:d._id===this.selected_entity_id,linkedFileData:d.linkedFileData,created:d.created})}for(var h=0,p=Array.from(e.folders||[]);h<p.length;h++){var y=p[h];t.children.push(this._parseFolder(y))}return t}},{key:"loadDeletedDocs",value:function(){var e=this;return this.$scope.deletedDocs=[],Array.from(this.$scope.project.deletedDocs||[]).map((function(t){return e.$scope.deletedDocs.push({name:t.name,id:t._id,type:"doc",deleted:!0})}))}},{key:"recalculateDocList",value:function(){var e=this;return this.$scope.docs=[],this.forEachEntity((function(t,n,r){if("doc"===t.type&&!t.deleted)return e.$scope.docs.push({doc:t,path:r})})),this.$scope.docs.sort((function(e,t){var n=(e.path.match(/\//g)||[]).length,r=(t.path.match(/\//g)||[]).length;return n-r!=0?-(n-r):e.path<t.path?-1:e.path>t.path?1:0}))}},{key:"getCurrentFolder",value:function(){return this._getCurrentFolder(this.$scope.rootFolder)||this.$scope.rootFolder}},{key:"_getCurrentFolder",value:function(e){null==e&&(e=this.$scope.rootFolder);for(var t=0,n=Array.from(e.children||[]);t<n.length;t++){var r=n[t];if(r.selected)return"folder"===r.type?r:e;if("folder"===r.type){var a=this._getCurrentFolder(r);if(null!=a)return a}}return null}},{key:"projectContainsFolder",value:function(){for(var e=0,t=Array.from(this.$scope.rootFolder.children);e<t.length;e++)if("folder"===t[e].type)return!0;return!1}},{key:"existsInThisFolder",value:function(e,t){for(var n=0,r=Array.from((null!=e?e.children:void 0)||[]);n<r.length;n++)if(r[n].name===t)return!0;return!1}},{key:"nameExistsError",value:function nameExistsError(e){null==e&&(e="already exists");var t=this.ide.$q.defer();return t.reject({data:e}),t.promise}},{key:"createDoc",value:function(e,t){return null==t&&(t=this.getCurrentFolder()),this.existsInThisFolder(t,e)?this.nameExistsError():this.ide.$http.post("/project/".concat(this.ide.project_id,"/doc"),{name:e,parent_folder_id:null!=t?t.id:void 0,_csrf:window.csrfToken})}},{key:"createFolder",value:function(e,t){return null==t&&(t=this.getCurrentFolder()),this.existsInThisFolder(t,e)?this.nameExistsError():this.ide.$http.post("/project/".concat(this.ide.project_id,"/folder"),{name:e,parent_folder_id:null!=t?t.id:void 0,_csrf:window.csrfToken})}},{key:"createLinkedFile",value:function(e,t,n,r){return null==t&&(t=this.getCurrentFolder()),this.existsInThisFolder(t,e)?this.nameExistsError():this.ide.$http.post("/project/".concat(this.ide.project_id,"/linked_file"),{name:e,parent_folder_id:null!=t?t.id:void 0,provider:n,data:r,_csrf:window.csrfToken},{disableAutoLoginRedirect:!0})}},{key:"refreshLinkedFile",value:function(e){if(this._findParentFolder(e),null!=(null!=e.linkedFileData?e.linkedFileData.provider:void 0))return this.ide.$http.post("/project/".concat(this.ide.project_id,"/linked_file/").concat(e.id,"/refresh"),{_csrf:window.csrfToken},{disableAutoLoginRedirect:!0});console.warn(">> no provider for ".concat(e.name),e)}},{key:"renameEntity",value:function(e,t,n){if(null==n&&(n=function(){}),e.name!==t&&!(t.length>=150)){var r=this.getCurrentFolder();return this.existsInThisFolder(r,t)?this.nameExistsError():(e.renamingToName=t,this.ide.$http.post("/project/".concat(this.ide.project_id,"/").concat(e.type,"/").concat(e.id,"/rename"),{name:t,_csrf:window.csrfToken}).then((function(){return e.name=t})).finally((function(){return e.renamingToName=null})))}}},{key:"deleteEntity",value:function(e,t){return null==t&&(t=function(){}),this.ide.queuedHttp({method:"DELETE",url:"/project/".concat(this.ide.project_id,"/").concat(e.type,"/").concat(e.id),headers:{"X-Csrf-Token":window.csrfToken}})}},{key:"moveEntity",value:function(e,t){var n=this;if(!this._isChildFolder(e,t)){if(this.existsInThisFolder(t,e.name))throw new Error("file exists in this location");this.ide.queuedHttp.post("/project/".concat(this.ide.project_id,"/").concat(e.type,"/").concat(e.id,"/move"),{folder_id:t.id,_csrf:window.csrfToken}).then((function(){n._moveEntityInScope(e,t)}))}}},{key:"_isChildFolder",value:function(e,t){var n=this.getEntityPath(e)||"";return(this.getEntityPath(t)||"").slice(0,n.length)===n}},{key:"_deleteEntityFromScope",value:function(e,t){if(null==t&&(t={moveToDeleted:!0}),null!=e){var n=null;if(this.forEachEntity((function(t,r){if(t===e)return n=r})),null!=n){var r=n.children.indexOf(e);r>-1&&n.children.splice(r,1)}return"folder"!==e.type&&e.selected&&(this.$scope.ui.view=null),"doc"===e.type&&t.moveToDeleted?(e.deleted=!0,this.$scope.deletedDocs.push(e)):void 0}}},{key:"_moveEntityInScope",value:function(e,t){if(!Array.from(t.children).includes(e))return this._deleteEntityFromScope(e,{moveToDeleted:!1}),t.children.push(e)}}],n&&au(t.prototype,n),r&&au(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var lu=__webpack_require__(86522),cu=__webpack_require__(56666);function uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){(0,cu.Z)(e,t,n[t])}))}return e}var fu=__webpack_require__(9249),du=__webpack_require__(87371);function hu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pu(e,t){if(t&&("object"===(0,lu.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hu(e)}function mu(e){return mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mu(e)}function gu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ea(e,t)}var vu={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},yu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,fu.Z)(this,e),this.init(t,n)}return(0,du.Z)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||vu,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,uu({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}(),bu=new yu,wu=function(){function e(){(0,fu.Z)(this,e),this.observers={}}return(0,du.Z)(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)}));this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function xu(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function _u(e){return null==e?"":""+e}function Su(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function a(){return!e||"string"==typeof e}for(var l="string"!=typeof t?[].concat(t):t.split(".");l.length>1;){if(a())return{};var f=r(l.shift());!e[f]&&n&&(e[f]=new n),e=Object.prototype.hasOwnProperty.call(e,f)?e[f]:{}}return a()?{}:{obj:e,k:r(l.shift())}}function ku(e,t,n){var r=Su(e,t,Object);r.obj[r.k]=n}function Cu(e,t){var n=Su(e,t),r=n.obj,a=n.k;if(r)return r[a]}function Eu(e,t,n){var r=Cu(e,n);return void 0!==r?r:Cu(t,n)}function Ou(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):Ou(e[r],t[r],n):e[r]=t[r]);return e}function ju(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var $u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Tu(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return $u[e]})):e}var Au="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Pu=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(0,fu.Z)(this,t),n=pu(this,mu(t).call(this)),Au&&wu.call(hu(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return gu(t,e),(0,du.Z)(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,l=[e,t];return n&&"string"!=typeof n&&(l=l.concat(n)),n&&"string"==typeof n&&(l=l.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(l=e.split(".")),Cu(this.data,l)}},{key:"addResource",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},l=this.options.keySeparator;void 0===l&&(l=".");var f=[e,t];n&&(f=f.concat(l?n.split(l):n)),e.indexOf(".")>-1&&(r=t,t=(f=e.split("."))[1]),this.addNamespaces(t),ku(this.data,f,r),a.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var a in n)"string"!=typeof n[a]&&"[object Array]"!==Object.prototype.toString.apply(n[a])||this.addResource(e,t,a,n[a],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},f=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(f=e.split("."))[1]),this.addNamespaces(t);var d=Cu(this.data,f)||{};r?Ou(d,n,a):d=uu({},d,n),ku(this.data,f,d),l.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?uu({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(wu),Du={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,a){var l=this;return e.forEach((function(e){l.processors[e]&&(t=l.processors[e].process(t,n,r,a))})),t}},Ru={},Iu=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,fu.Z)(this,t),n=pu(this,mu(t).call(this)),Au&&wu.call(hu(n)),function(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,hu(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=bu.create("translator"),n}return gu(t,e),(0,du.Z)(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,a=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:a};var f=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(f[0])>-1)&&(a=f.shift()),e=f.join(r)}return"string"==typeof a&&(a=[a]),{key:e,namespaces:a}}},{key:"translate",value:function(e,n,r){var a=this;if("object"!==(0,lu.Z)(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var l=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,f=this.extractFromKey(e[e.length-1],n),d=f.key,h=f.namespaces,p=h[h.length-1],y=n.lng||this.language,w=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y&&"cimode"===y.toLowerCase()){if(w){var x=n.nsSeparator||this.options.nsSeparator;return p+x+d}return d}var _=this.resolve(e,n),S=_&&_.res,k=_&&_.usedKey||d,C=_&&_.exactUsedKey||d,E=Object.prototype.toString.apply(S),O=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,j=!this.i18nFormat||this.i18nFormat.handleAsObject;if(j&&S&&("string"!=typeof S&&"boolean"!=typeof S&&"number"!=typeof S)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(E)<0&&("string"!=typeof O||"[object Array]"!==E)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,S,n):"key '".concat(d," (").concat(this.language,")' returned an object instead of string.");if(l){var T="[object Array]"===E,A=T?[]:{},P=T?C:k;for(var D in S)if(Object.prototype.hasOwnProperty.call(S,D)){var R="".concat(P).concat(l).concat(D);A[D]=this.translate(R,uu({},n,{joinArrays:!1,ns:h})),A[D]===R&&(A[D]=S[D])}S=A}}else if(j&&"string"==typeof O&&"[object Array]"===E)(S=S.join(O))&&(S=this.extendTranslation(S,e,n,r));else{var I=!1,M=!1,L=void 0!==n.count&&"string"!=typeof n.count,N=t.hasDefaultValue(n),F=L?this.pluralResolver.getSuffix(y,n.count):"",q=n["defaultValue".concat(F)]||n.defaultValue;!this.isValidLookup(S)&&N&&(I=!0,S=q),this.isValidLookup(S)||(M=!0,S=d);var B=N&&q!==S&&this.options.updateMissing;if(M||I||B){if(this.logger.log(B?"updateKey":"missingKey",y,p,d,B?q:S),l){var U=this.resolve(d,uu({},n,{keySeparator:!1}));U&&U.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var H=[],z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&z&&z[0])for(var V=0;V<z.length;V++)H.push(z[V]);else"all"===this.options.saveMissingTo?H=this.languageUtils.toResolveHierarchy(n.lng||this.language):H.push(n.lng||this.language);var W=function(e,t,r){a.options.missingKeyHandler?a.options.missingKeyHandler(e,p,t,B?r:S,B,n):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(e,p,t,B?r:S,B,n),a.emit("missingKey",e,p,t,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?H.forEach((function(e){a.pluralResolver.getSuffixes(e).forEach((function(t){W([e],d+t,n["defaultValue".concat(t)]||q)}))})):W(H,d,q))}S=this.extendTranslation(S,e,n,_,r),M&&S===d&&this.options.appendNamespaceToMissingKey&&(S="".concat(p,":").concat(d)),M&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(S))}return S}},{key:"extendTranslation",value:function(e,t,n,r,a){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(uu({},n,{interpolation:uu({},this.options.interpolation,n.interpolation)}));var f,d=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(d){var h=e.match(this.interpolator.nestingRegexp);f=h&&h.length}var p=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(p=uu({},this.options.interpolation.defaultVariables,p)),e=this.interpolator.interpolate(e,p,n.lng||this.language,n),d){var y=e.match(this.interpolator.nestingRegexp);f<(y&&y.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),f=0;f<e;f++)r[f]=arguments[f];return a&&a[0]===r[0]&&!n.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):l.translate.apply(l,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var w=n.postProcess||this.options.postProcess,x="string"==typeof w?[w]:w;return null!=e&&x&&x.length&&!1!==n.applyPostProcessor&&(e=Du.handle(x,e,t,this.options&&this.options.postProcessPassResolved?uu({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,a,l,f=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!f.isValidLookup(t)){var h=f.extractFromKey(e,d),p=h.key;n=p;var y=h.namespaces;f.options.fallbackNS&&(y=y.concat(f.options.fallbackNS));var w=void 0!==d.count&&"string"!=typeof d.count,x=void 0!==d.context&&"string"==typeof d.context&&""!==d.context,_=d.lngs?d.lngs:f.languageUtils.toResolveHierarchy(d.lng||f.language,d.fallbackLng);y.forEach((function(e){f.isValidLookup(t)||(l=e,!Ru["".concat(_[0],"-").concat(e)]&&f.utils&&f.utils.hasLoadedNamespace&&!f.utils.hasLoadedNamespace(l)&&(Ru["".concat(_[0],"-").concat(e)]=!0,f.logger.warn('key "'.concat(n,'" for languages "').concat(_.join(", "),'" won\'t get resolved as namespace "').concat(l,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),_.forEach((function(n){if(!f.isValidLookup(t)){a=n;var l,h,y=p,_=[y];if(f.i18nFormat&&f.i18nFormat.addLookupKeys)f.i18nFormat.addLookupKeys(_,p,n,e,d);else w&&(l=f.pluralResolver.getSuffix(n,d.count)),w&&x&&_.push(y+l),x&&_.push(y+="".concat(f.options.contextSeparator).concat(d.context)),w&&_.push(y+=l);for(;h=_.pop();)f.isValidLookup(t)||(r=h,t=f.getResource(n,e,h,d))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:a,usedNS:l}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}(wu);function Mu(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Lu=function(){function e(t){(0,fu.Z)(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=bu.create("languageUtils")}return(0,du.Z)(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Mu(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Mu(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=Mu(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),a=[],l=function(e){e&&(n.isSupportedCode(e)?a.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&l(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&l(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&l(this.getLanguagePartFromCode(e))):"string"==typeof e&&l(this.formatLanguageCode(e)),r.forEach((function(e){a.indexOf(e)<0&&l(n.formatLanguageCode(e))})),a}}]),e}(),Nu=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Fu={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};var qu=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,fu.Z)(this,e),this.languageUtils=t,this.options=r,this.logger=bu.create("pluralResolver"),this.rules=(n={},Nu.forEach((function(e){e.lngs.forEach((function(t){n[t]={numbers:e.nr,plurals:Fu[e.fc]}}))})),n)}return(0,du.Z)(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var a=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),l=r.numbers[a];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===l?l="plural":1===l&&(l=""));var f=function(){return n.options.prepend&&l.toString()?n.options.prepend+l.toString():l.toString()};return"v1"===this.options.compatibilityJSON?1===l?"":"number"==typeof l?"_plural_".concat(l.toString()):f():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?f():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),Bu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,fu.Z)(this,e),this.logger=bu.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return(0,du.Z)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:Tu,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?ju(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?ju(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?ju(t.nestingPrefix):t.nestingPrefixEscaped||ju("$t("),this.nestingSuffix=t.nestingSuffix?ju(t.nestingSuffix):t.nestingSuffixEscaped||ju(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var a,l,f,d=this,h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function p(e){return e.replace(/\$/g,"$$$$")}var y=function(e){if(e.indexOf(d.formatSeparator)<0){var a=Eu(t,h,e);return d.alwaysFormat?d.format(a,void 0,n):a}var l=e.split(d.formatSeparator),f=l.shift().trim(),p=l.join(d.formatSeparator).trim();return d.format(Eu(t,h,f),p,n,r)};this.resetRegExp();var w=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,x=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return p(e)}},{regex:this.regexp,safeValue:function(e){return d.escapeValue?p(d.escape(e)):p(e)}}].forEach((function(t){for(f=0;a=t.regex.exec(e);){if(void 0===(l=y(a[1].trim())))if("function"==typeof w){var n=w(e,a,r);l="string"==typeof n?n:""}else{if(x){l=a[0];continue}d.logger.warn("missed to pass in variable ".concat(a[1]," for interpolating ").concat(e)),l=""}else"string"==typeof l||d.useRawValueToEscape||(l=_u(l));if(e=e.replace(a[0],t.safeValue(l)),t.regex.lastIndex=0,++f>=d.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,a=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=uu({},l);function d(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),a="{".concat(r[1]);e=r[0],a=(a=this.interpolate(a,f)).replace(/'/g,'"');try{f=JSON.parse(a),t&&(f=uu({},t,f))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(a)}return delete f.defaultValue,e}for(f.applyPostProcessor=!1,delete f.defaultValue;n=this.nestingRegexp.exec(e);){var h=[],p=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var y=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=y.shift(),h=y,p=!0}if((r=t(d.call(this,n[1].trim(),f),f))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=_u(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),p&&(r=h.reduce((function(e,t){return a.format(e,t,l.lng,l)}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var Uu=function(e){function t(e,n,r){var a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,fu.Z)(this,t),a=pu(this,mu(t).call(this)),Au&&wu.call(hu(a)),a.backend=e,a.store=n,a.services=r,a.languageUtils=r.languageUtils,a.options=l,a.logger=bu.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(r,l.backend,l),a}return gu(t,e),(0,du.Z)(t,[{key:"queueLoad",value:function(e,t,n,r){var a=this,l=[],f=[],d=[],h=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var d="".concat(e,"|").concat(t);!n.reload&&a.store.hasResourceBundle(e,t)?a.state[d]=2:a.state[d]<0||(1===a.state[d]?f.indexOf(d)<0&&f.push(d):(a.state[d]=1,r=!1,f.indexOf(d)<0&&f.push(d),l.indexOf(d)<0&&l.push(d),h.indexOf(t)<0&&h.push(t)))})),r||d.push(e)})),(l.length||f.length)&&this.queue.push({pending:f,loaded:{},errors:[],callback:r}),{toLoad:l,pending:f,toLoadLanguages:d,toLoadNamespaces:h}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),a=r[0],l=r[1];t&&this.emit("failedLoading",a,l,t),n&&this.store.addResourceBundle(a,l,n),this.state[e]=t?-1:2;var f={};this.queue.forEach((function(n){var r,d,h,p,y,w;r=n.loaded,d=l,p=Su(r,[a],Object),y=p.obj,w=p.k,y[w]=y[w]||[],h&&(y[w]=y[w].concat(d)),h||y[w].push(d),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){f[e]||(f[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){f[e].indexOf(t)<0&&f[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",f),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,f=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(d,h){d&&h&&a<5?setTimeout((function(){r.read.call(r,e,t,n,a+1,2*l,f)}),l):f(d,h)})):f(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var l=this.queueLoad(e,t,r,a);if(!l.toLoad.length)return l.pending.length||a(),null;l.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),a=r[0],l=r[1];this.read(a,l,"read",void 0,void 0,(function(r,f){r&&t.logger.warn("".concat(n,"loading namespace ").concat(l," for language ").concat(a," failed"),r),!r&&f&&t.logger.log("".concat(n,"loaded namespace ").concat(l," for language ").concat(a),f),t.loaded(e,r,f)}))}},{key:"saveMissing",value:function(e,t,n,r,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,uu({},l,{isUpdate:a})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}(wu);function Hu(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function zu(){}var Vu=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if((0,fu.Z)(this,t),e=pu(this,mu(t).call(this)),Au&&wu.call(hu(e)),e.options=Hu(n),e.services={},e.logger=bu,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),pu(e,hu(e));setTimeout((function(){e.init(n,r)}),0)}return e}return gu(t,e),(0,du.Z)(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=uu({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===(0,lu.Z)(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===(0,lu.Z)(e[2])||"object"===(0,lu.Z)(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}},this.options,Hu(t)),this.format=this.options.interpolation.format,n||(n=zu),!this.options.isClone){this.modules.logger?bu.init(r(this.modules.logger),this.options):bu.init(null,this.options);var a=new Lu(this.options);this.store=new Pu(this.options.resources,this.options);var l=this.services;l.logger=bu,l.resourceStore=this.store,l.languageUtils=a,l.pluralResolver=new qu(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l.interpolator=new Bu(this.options),l.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},l.backendConnector=new Uu(r(this.modules.backend),l.resourceStore,l,this.options),l.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(l.languageDetector=r(this.modules.languageDetector),l.languageDetector.init(l,this.options.detection,this.options)),this.modules.i18nFormat&&(l.i18nFormat=r(this.modules.i18nFormat),l.i18nFormat.init&&l.i18nFormat.init(this)),this.translator=new Iu(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&"dev"!==f[0]&&(this.options.lng=f[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var d=xu(),h=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),d.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),d}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zu,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var a=[],l=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){a.indexOf(e)<0&&a.push(e)}))};if(r)l(r);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return l(e)}));this.options.preload&&this.options.preload.forEach((function(e){return l(e)})),this.services.backendConnector.load(a,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=xu();return e||(e=this.languages),t||(t=this.options.ns),n||(n=zu),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Du.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=xu();this.emit("languageChanging",e);var a=function(e){var a="string"==typeof e?e:n.services.languageUtils.getBestMatchFromCodes(e);a&&(n.language||(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a)),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,(function(e){!function(e,a){a?(n.language=a,n.languages=n.services.languageUtils.toResolveHierarchy(a),n.translator.changeLanguage(a),n.isLanguageChangingTo=void 0,n.emit("languageChanged",a),n.logger.log("languageChanged",a)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,a)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var a;if("object"!==(0,lu.Z)(r)){for(var l=arguments.length,f=new Array(l>2?l-2:0),d=2;d<l;d++)f[d-2]=arguments[d];a=n.options.overloadTranslationOptionHandler([t,r].concat(f))}else a=uu({},r);return a.lng=a.lng||e.lng,a.lngs=a.lngs||e.lngs,a.ns=a.ns||e.ns,n.t(t,a)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],a=!!this.options&&this.options.fallbackLng,l=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var f=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var d=n.precheck(this,f);if(void 0!==d)return d}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!f(r,e)||a&&!f(l,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=xu();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=xu();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],a=e.filter((function(e){return r.indexOf(e)<0}));return a.length?(this.options.preload=r.concat(a),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zu,a=uu({},this.options,n,{isClone:!0}),l=new t(a);return["store","services","language"].forEach((function(t){l[t]=e[t]})),l.services=uu({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new Iu(l.services,l.options),l.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l.emit.apply(l,[e].concat(n))})),l.init(a,r),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}}]),t}(wu),Wu=new Vu,Zu=__webpack_require__(71648),Gu=window.i18n.currentLangCode;Wu.use(Zu.Db).init({lng:Gu,react:{useSuspense:!1,bindI18nStore:"added"},interpolation:{prefix:"__",suffix:"__",unescapeSuffix:"HTML",skipOnVariables:!0,defaultVariables:{appName:window.ExposedSettings.appName}}});var Ku=__webpack_require__(88135)("./".concat(Gu,".json")).then((function(e){Wu.addResourceBundle(Gu,"translation",e)}));function Yu(e){return Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yu(e)}function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Yu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Yu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Yu(l)?l:String(l)),r)}var a,l}var Ju=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=t;var r=new Promise((function(e){n.resolveSocketPromise=e}));Promise.all([r,Ku]).then((function(){n.$scope.$apply((function(){n.$scope.state.load_progress=100,n.$scope.state.loading=!1,n.$scope.$emit("editor:loaded")}))})).catch((function(){n.$scope.$apply((function(){n.$scope.state.error="Could not load translations."}))}))}var t,n,r;return t=e,(n=[{key:"socketLoaded",value:function(){this.resolveSocketPromise()}}])&&Xu(t.prototype,n),r&&Xu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();__webpack_require__(14121);function Qu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ef(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tf(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nf(e,t)}function nf(e,t){return nf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nf(e,t)}function rf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=af(e);if(t){var a=af(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return of(e)}(this,n)}}function of(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function af(e){return af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},af(e)}function sf(e){return sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(e)}function lf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==sf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===sf(l)?l:String(l)),r)}var a,l}function uf(e,t,n){return t&&cf(e.prototype,t),n&&cf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}for(var ff=function(){function e(t){lf(this,e),this._socket=t}return uf(e,null,[{key:"connect",value:function(t,n){return new e}}]),e}(),df=function(){var e=pf[hf];ff.prototype[e]=function(){this._socket[e].apply(this._socket,arguments)}},hf=0,pf=["connect","disconnect","emit","on","removeListener"];hf<pf.length;hf++)df();var mf,gf=function(e){tf(n,e);var t=rf(n);function n(e){var r;return lf(this,n),(r=t.call(this,e)).socket={get connected(){return!1},get sessionid(){},get transport(){return{}},connect:function(){},disconnect:function(e){}},r}return uf(n,[{key:"connect",value:function(){}},{key:"disconnect",value:function(e){}},{key:"emit",value:function(){}},{key:"on",value:function(){}},{key:"removeListener",value:function(){}}],[{key:"connect",value:function(){return new n}}]),n}(ff),vf=function(e){tf(n,e);var t=rf(n);function n(e){var r;return lf(this,n),(r=t.call(this,e)).socket=r._socket.socket,r}return uf(n,null,[{key:"connect",value:function(e,t){return new n(io.connect(e,t))}}]),n}(ff),yf=function(e){tf(n,e);var t=rf(n);function n(e,r){var a;lf(this,n),(a=t.call(this,n.createNewSocket(e,r)))._url=e,a._options=r,a._events=new Map;var l=of(a);function f(){return l._socket.io&&l._socket.io.engine||{}}return a.socket={get connected(){return l._socket.connected},get sessionid(){return l._socket.id?l._socket.id:f().id},get transport(){return f().transport},connect:function(){l._replaceSocketWithNewInstance()},disconnect:function(e){return l._socket.disconnect(e)}},a}return uf(n,[{key:"_on",value:function(e,t){this._events.has(e)?this._events.get(e).push(t):this._events.set(e,[t]),this._socket.on(e,t)}},{key:"on",value:function(e,t){if(n.EVENT_MAP.has(e)){var r,a=Qu(n.EVENT_MAP.get(e));try{for(a.s();!(r=a.n()).done;){var l=r.value;this._on(l,t)}}catch(e){a.e(e)}finally{a.f()}}else this._on(e,t)}},{key:"_removeListener",value:function(e,t){if(this._events.has(e)){var n=this._events.get(e),r=n.indexOf(t);-1!==r&&n.splice(r,1)}this._socket.removeListener(e,t)}},{key:"removeListener",value:function(e,t){if(n.EVENT_MAP.has(e)){var r,a=Qu(n.EVENT_MAP.get(e));try{for(a.s();!(r=a.n()).done;){var l=r.value;this._removeListener(l,t)}}catch(e){a.e(e)}finally{a.f()}}else this._removeListener(e,t)}},{key:"_replaceSocketWithNewInstance",value:function(){var e=this._socket,t=n.createNewSocket(this._url,this._options);this._events.forEach((function(n,r){var a,l=Qu(n);try{for(l.s();!(a=l.n()).done;){var f=a.value;e.removeListener(r,f),t.on(r,f)}}catch(e){l.e(e)}finally{l.f()}})),e.connected&&e.disconnect(),this._socket=t}},{key:"connect",value:function(){this._replaceSocketWithNewInstance()}}],[{key:"connect",value:function(e,t){return t.forceNew=t["force new connection"],t.path="/"+t.resource,t.reconnection=t.reconnect,t.timeout=t["connect timeout"],new n(e,t)}},{key:"EVENT_MAP",get:function(){var e=["connect_error","connect_timeout","error"];return new Map([["connect_failed",e],["error",e]])}},{key:"createNewSocket",value:function(e,t){return io.Manager(e,t).socket("/",t)}}]),n}(ff);"undefined"!=typeof io&&io?"string"==typeof io.version&&"0"===io.version.slice(0,1)?(sl_console.log("[socket.io] Shim: detected v0"),mf=vf):(sl_console.log("[socket.io] Shim: detected v2"),mf=yf):(sl_console.log("[socket.io] Shim: socket.io is not loaded, returning noop"),mf=gf);var bf,wf={SocketShimNoop:gf,SocketShimV0:vf,SocketShimV2:yf,current:mf,connect:mf.connect,stub:function(){return new gf}},xf=__webpack_require__(99618);function _f(e){return _f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(e)}function Sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sf(Object(n),!0).forEach((function(t){Cf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cf(e,t,n){return(t=Of(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Of(r.key),r)}}function Of(e){var t=function(e,t){if("object"!==_f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_f(t)?t:String(t)}var jf=36e5,$f=(bf=function(){function e(t,n){var r,a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.wsUrl=t.wsUrl||null,"undefined"==typeof io||null===io)return this.wsUrl&&!window.location.href.match(/ws=fallback/)&&(window.location=window.location.href+"?ws=fallback"),console.error("Socket.io javascript not loaded. Please check that the real-time service is running and accessible."),this.ide.socket=wf.stub(),void this.$scope.$apply((function(){return a.$scope.state.error="Could not connect to websocket server :("}));setInterval((function(){return a.disconnectIfInactive()}),jf),window.addEventListener("online",(function(){if(sl_console.log("[online] browser notified online"),!a.connected)return a.tryReconnectWithRateLimit({force:!0})})),this.userIsLeavingPage=!1,window.addEventListener("beforeunload",(function(){a.userIsLeavingPage=!0})),this.connected=!1,this.userIsInactive=!1,this.gracefullyReconnecting=!1,this.shuttingDown=!1,this.joinProjectRetryInterval=this.JOIN_PROJECT_RETRY_INTERVAL,this.$scope.connection={debug:sl_debugging,reconnecting:!1,stillReconnecting:!1,forced_disconnect:!1,inactive_disconnect:!1,jobId:0},this.$scope.tryReconnectNow=function(){return a.tryReconnectWithRateLimit({force:!0})},this.$scope.$on("cursor:editor:update",(function(){if(a.lastUserAction=new Date,!a.connected)return a.tryReconnectWithRateLimit()})),document.querySelector("body").addEventListener("click",(function(e){if(!a.shuttingDown&&!a.connected&&"try-reconnect-now-button"!==e.target.id)return a.tryReconnectWithRateLimit()})),this.updateConnectionManagerState("connecting");try{r=new URL(this.wsUrl||"/socket.io",window.location)}catch(e){this.wsUrl&&0!==this.wsUrl.indexOf("/")&&!window.location.href.match(/ws=fallback/)&&(window.location=window.location.href+"?ws=fallback"),r={origin:null,pathname:this.wsUrl||"/socket.io"}}var l=new URLSearchParams({projectId:(0,xf.Z)("ol-project_id")}).toString();this.ide.socket=wf.connect(r.origin,{resource:r.pathname.slice(1),reconnect:!1,"connect timeout":3e4,"force new connection":!0,query:l});var f=1,d=function(e){return window.wsRetryHandshake&&f++<window.wsRetryHandshake?setTimeout((function(){return a.ide.socket.socket.connect()}),100):(a.updateConnectionManagerState("error"),sl_console.log("socket.io error",e),!a.wsUrl||window.location.href.match(/ws=fallback/)?(a.connected=!1,a.$scope.$apply((function(){return a.$scope.state.error="Unable to connect, please view the <u><a href='/learn/Kb/Connection_problems'>connection problems guide</a></u> to fix the issue."}))):void(window.location=window.location.href+"?ws=fallback"))};this.ide.socket.on("error",d),this.ide.socket.on("connect",(function(){a.ide.socket.removeListener("error",d),sl_console.log("[socket.io connect] Connected"),a.updateConnectionManagerState("authenticating")})),this.ide.socket.on("connectionAccepted",(function(e,t){a.ide.socket.publicId=t||a.ide.socket.socket.sessionid,sl_console.log("[socket.io connectionAccepted] allowed to connect"),a.connected=!0,a.gracefullyReconnecting=!1,a.ide.pushEvent("connected"),a.updateConnectionManagerState("joining"),a.$scope.$apply((function(){a.$scope.state.loading&&(a.$scope.state.load_progress=70)}));var n=a.$scope.connection.jobId;setTimeout((function(){a.joinProject(n)}),100)})),this.ide.socket.on("joinProjectResponse",(function(e){var t=e.publicId,n=e.project,r=e.permissionsLevel,l=e.protocolVersion;a.ide.socket.publicId=t,sl_console.log("[socket.io bootstrap] ready for joinDoc"),a.connected=!0,a.gracefullyReconnecting=!1,a.ide.pushEvent("connected"),a.ide.pushEvent("joinProjectResponse"),a.updateConnectionManagerState("joining"),a.$scope.$apply((function(){a.$scope.state.loading&&(a.$scope.state.load_progress=70)}));var f=a.$scope.connection.jobId;a.handleJoinProjectResponse({connectionJobId:f,project:n,permissionsLevel:r,protocolVersion:l})})),this.ide.socket.on("connectionRejected",(function(e){return sl_console.log("[socket.io connectionRejected] session not valid or other connection error"),"retry"===(null==e?void 0:e.message)||"TooManyRequests"===(null==e?void 0:e.code)?a.tryReconnectWithRateLimit():"ProjectNotFound"!==(null==e?void 0:e.code)?a.reportConnectionError(e):void a.ide.showGenericMessageModal("Project has been deleted","This project has been deleted by the owner.").result.then((function(){return location.reload(!0)}))})),this.ide.socket.on("connect_failed",(function(){return a.updateConnectionManagerState("error"),a.connected=!1,a.$scope.$apply((function(){return a.$scope.state.error="Unable to connect, please view the <u><a href='/learn/Kb/Connection_problems'>connection problems guide</a></u> to fix the issue."}))})),this.ide.socket.on("disconnect",(function(){sl_console.log("[socket.io disconnect] Disconnected"),a.connected=!1,a.ide.pushEvent("disconnected"),a.$scope.connection.state.match(/^waiting/)||(a.$scope.connection.forced_disconnect||a.userIsInactive||a.shuttingDown?a.updateConnectionManagerState("inactive"):a.startAutoReconnectCountdown())})),this.ide.socket.on("forceDisconnect",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.updateConnectionManagerState("inactive"),a.shuttingDown=!0,a.$scope.$apply((function(){return a.$scope.permissions.write=!1,a.$scope.connection.forced_disconnect=!0})),a.ide.$scope.$broadcast("flush-changes"),setTimeout((function(){return a.ide.socket.disconnect()}),1e3),a.ide.showLockEditorMessageModal("Please wait","We're performing maintenance on Overleaf and you need to wait a moment.\nSorry for any inconvenience.\nThe editor will refresh automatically in ".concat(t," seconds.")),setTimeout((function(){return location.reload()}),1e3*t)})),this.ide.socket.on("reconnectGracefully",(function(){sl_console.log("Reconnect gracefully"),a.reconnectGracefully()}))}var t,n,r;return t=e,n=[{key:"updateConnectionManagerState",value:function(e){var t=this;this.$scope.$apply((function(){t.$scope.connection.jobId+=1;var n=t.$scope.connection.jobId;sl_console.log("[updateConnectionManagerState ".concat(n,"] from ").concat(t.$scope.connection.state," to ").concat(e)),t.$scope.connection.state=e,t.$scope.connection.reconnecting=!1,t.$scope.connection.stillReconnecting=!1,t.$scope.connection.inactive_disconnect=!1,t.$scope.connection.joining=!1,t.$scope.connection.reconnection_countdown=null,"connecting"===e||("reconnecting"===e?(t.stopReconnectCountdownTimer(),t.$scope.connection.reconnecting=!0,setTimeout((function(){t.$scope.connection.reconnecting&&t.$scope.connection.jobId===n&&(t.$scope.connection.stillReconnecting=!0)}),1e3)):"reconnectFailed"===e||"authenticating"===e||("joining"===e?t.$scope.connection.joining=!0:"ready"===e||("waitingCountdown"===e||"waitingGracefully"===e?t.stopReconnectCountdownTimer():"inactive"===e||"error"===e||sl_console.log("[WARN] [updateConnectionManagerState ".concat(n,"] got unrecognised state ").concat(e)))))}))}},{key:"expectConnectionManagerState",value:function(e,t){return!(this.$scope.connection.state!==e||t&&t!==this.$scope.connection.jobId)||(sl_console.log("[WARN] [state mismatch] expected state ".concat(e).concat(t?"/"+t:""," when in ").concat(this.$scope.connection.state,"/").concat(this.$scope.connection.jobId)),!1)}},{key:"reportConnectionError",value:function reportConnectionError(e){return sl_console.log("[socket.io] reporting connection error"),this.updateConnectionManagerState("error"),"not authorized"===(null!=e?e.message:void 0)||"invalid session"===(null!=e?e.message:void 0)?window.location="/login?redir=".concat(encodeURI(window.location.pathname)):(this.ide.socket.disconnect(),this.ide.showGenericMessageModal("Something went wrong connecting","Something went wrong connecting to your project. Please refresh if this continues to happen."))}},{key:"joinProject",value:function(e){var t=this;if(sl_console.log("[joinProject ".concat(e,"] joining...")),this.expectConnectionManagerState("joining",e)){var n={project_id:this.ide.project_id};window.anonymousAccessToken&&(n.anonymousAccessToken=window.anonymousAccessToken),this.ide.socket.emit("joinProject",n,(function(n,r,a,l){t.handleJoinProjectResponse({connectionId:e,err:n,project:r,permissionsLevel:a,protocolVersion:l})}))}else sl_console.log("[joinProject ".concat(e,"] aborting with stale connection"))}},{key:"handleJoinProjectResponse",value:function(e){var t=this,n=e.connectionId,r=e.err,a=e.project,l=e.permissionsLevel,f=e.protocolVersion;if(null!=r||null==a)return"ProjectNotFound"===(r=r||{}).code?void this.ide.showGenericMessageModal("Project has been deleted","This project has been deleted by the owner.").result.then((function(){return location.reload(!0)})):"TooManyRequests"===r.code?(sl_console.log("[joinProject ".concat(n,"] retrying: ").concat(r.message)),setTimeout((function(){return t.joinProject(n)}),this.joinProjectRetryInterval),void(this.joinProjectRetryInterval<this.JOIN_PROJECT_MAX_RETRY_INTERVAL&&(this.joinProjectRetryInterval+=this.JOIN_PROJECT_RETRY_INTERVAL))):this.reportConnectionError(r);this.joinProjectRetryInterval=this.JOIN_PROJECT_RETRY_INTERVAL,null!=this.$scope.protocolVersion&&this.$scope.protocolVersion!==f&&location.reload(!0),this.$scope.$apply((function(){t.updateConnectionManagerState("ready"),t.$scope.protocolVersion=f,t.$scope.project=kf(kf({},{rootDoc_id:null}),a),t.$scope.permissionsLevel=l,t.ide.loadingManager.socketLoaded(),window.dispatchEvent(new CustomEvent("project:joined",{detail:t.$scope.project})),t.$scope.$broadcast("project:joined")}))}},{key:"reconnectImmediately",value:function(){return this.disconnect(),this.tryReconnect()}},{key:"disconnect",value:function(e){if(e&&e.permanent)sl_console.log("[disconnect] shutting down ConnectionManager"),this.updateConnectionManagerState("inactive"),this.shuttingDown=!0;else if(this.ide.socket.socket&&!this.ide.socket.socket.connected)return void sl_console.log("[socket.io] skipping disconnect because socket.io has not connected");return sl_console.log("[socket.io] disconnecting client"),this.ide.socket.disconnect()}},{key:"startAutoReconnectCountdown",value:function(){var e=this;this.updateConnectionManagerState("waitingCountdown");var t,n=this.$scope.connection.jobId;sl_console.log("[ConnectionManager] starting autoreconnect countdown"),t=null!=this.lastUserAction&&new Date-this.lastUserAction>12e4?60+Math.floor(120*Math.random()):3+Math.floor(7*Math.random()),this.userIsLeavingPage||(this.$scope.$apply((function(){e.$scope.connection.reconnecting=!1,e.$scope.connection.stillReconnecting=!1,e.$scope.connection.joining=!1,e.$scope.connection.reconnection_countdown=t})),setTimeout((function(){e.connected||e.countdownTimeoutId||(e.countdownTimeoutId=setTimeout((function(){return e.decreaseCountdown(n)}),1e3))}),200))}},{key:"stopReconnectCountdownTimer",value:function(){null!=this.countdownTimeoutId&&(sl_console.log("[ConnectionManager] cancelling existing reconnect timer"),clearTimeout(this.countdownTimeoutId),this.countdownTimeoutId=null)}},{key:"decreaseCountdown",value:function(e){var t=this;this.countdownTimeoutId=null,null!=this.$scope.connection.reconnection_countdown&&(this.expectConnectionManagerState("waitingCountdown",e)?(sl_console.log("[ConnectionManager] decreasing countdown",this.$scope.connection.reconnection_countdown),this.$scope.$apply((function(){t.$scope.connection.reconnection_countdown--})),this.$scope.connection.reconnection_countdown<=0?(this.$scope.connection.reconnecting=!1,this.$scope.$apply((function(){t.tryReconnect()}))):this.countdownTimeoutId=setTimeout((function(){return t.decreaseCountdown(e)}),1e3)):sl_console.log("[ConnectionManager] Aborting stale countdown ".concat(e)))}},{key:"tryReconnect",value:function(){var e=this;if(sl_console.log("[ConnectionManager] tryReconnect"),!(this.connected||this.shuttingDown||this.$scope.connection.reconnecting)){this.updateConnectionManagerState("reconnecting"),sl_console.log("[ConnectionManager] Starting new connection");var t=function(){e.ide.socket.removeListener("error",n),e.ide.socket.removeListener("connect",r)},n=function(){sl_console.log("[ConnectionManager] tryReconnect: failed"),t(),e.updateConnectionManagerState("reconnectFailed"),e.tryReconnectWithRateLimit({force:!0})},r=function(){sl_console.log("[ConnectionManager] tryReconnect: success"),t()};this.ide.socket.on("error",n),this.ide.socket.on("connect",r),this.ide.socket.socket.connect(),this.lastConnectionAttempt=new Date}}},{key:"tryReconnectWithRateLimit",value:function(e){if(!this.$scope.connection.reconnecting&&!this.connected){var t=null!=this.$scope.connection.reconnection_countdown&&this.$scope.connection.reconnection_countdown<=5,n=null!=e?e.force:void 0;if(!t||n){var r=n?this.MIN_RETRY_INTERVAL:this.BACKGROUND_RETRY_INTERVAL;null!=this.lastConnectionAttempt&&new Date-this.lastConnectionAttempt<r?"waitingCountdown"!==this.$scope.connection.state&&this.startAutoReconnectCountdown():this.tryReconnect()}}}},{key:"disconnectIfInactive",value:function(){var e=this;if(this.userIsInactive=new Date-this.lastUserAction>this.disconnectAfterMs,this.userIsInactive&&this.connected)return this.disconnect(),this.$scope.$apply((function(){return e.$scope.connection.inactive_disconnect=!0}))}},{key:"reconnectGracefully",value:function(e){var t=this;if(null==this.reconnectGracefullyStarted)this.reconnectGracefullyStarted=new Date;else if(!e)return void sl_console.log("[reconnectGracefully] reconnection is already in process, so skipping");var n=new Date-this.lastUserAction>this.RECONNECT_GRACEFULLY_RETRY_INTERVAL,r=new Date-this.reconnectGracefullyStarted>this.MAX_RECONNECT_GRACEFULLY_INTERVAL;n||r?(sl_console.log("[reconnectGracefully] User didn't do anything for last 5 seconds, reconnecting"),this._reconnectGracefullyNow()):(sl_console.log("[reconnectGracefully] User is working, will try again in 5 seconds"),this.updateConnectionManagerState("waitingGracefully"),setTimeout((function(){t.reconnectGracefully(!0)}),this.RECONNECT_GRACEFULLY_RETRY_INTERVAL))}},{key:"_reconnectGracefullyNow",value:function(){return this.gracefullyReconnecting=!0,this.reconnectGracefullyStarted=null,$.cookie("SERVERID","",{expires:-1,path:"/"}),this.reconnectImmediately()}}],r=[{key:"initClass",value:function(){this.prototype.disconnectAfterMs=864e5,this.prototype.lastUserAction=new Date,this.prototype.MIN_RETRY_INTERVAL=1e3,this.prototype.BACKGROUND_RETRY_INTERVAL=5e3,this.prototype.JOIN_PROJECT_RETRY_INTERVAL=5e3,this.prototype.JOIN_PROJECT_MAX_RETRY_INTERVAL=6e4,this.prototype.RECONNECT_GRACEFULLY_RETRY_INTERVAL=5e3,this.prototype.MAX_RECONNECT_GRACEFULLY_INTERVAL=45e3}}],n&&Ef(t.prototype,n),r&&Ef(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),bf.initClass(),bf),Tf=__webpack_require__(54411),Af=__webpack_require__.n(Tf);function Pf(e){return Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(e)}function Df(e){return function(e){if(Array.isArray(e))return Mf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||If(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||If(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function If(e,t){if(e){if("string"==typeof e)return Mf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mf(e,t):void 0}}function Mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Pf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Pf(l)?l:String(l)),r)}var a,l}var Nf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"on",value:function(e,t){var n;this.events||(this.events={});var r=Rf(Array.from(e.split(".")),2);return e=r[0],n=r[1],this.events[e]||(this.events[e]=[]),this.events[e].push({callback:t,namespace:n})}},{key:"off",value:function(e){if(this.events||(this.events={}),null!=e){var t,n=Rf(Array.from(e.split(".")),2);if(e=n[0],null==(t=n[1]))return delete this.events[e];for(var r=[],a=0,l=Array.from(this.events[e]||[]);a<l.length;a++){var f=l[a];f.namespace!==t&&r.push(f)}return this.events[e]=r}return this.events={}}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.events||(this.events={}),Array.from(this.events[e]||[]).map((function(e){return e.callback.apply(e,Df(Array.from(n||[])))}))}},{key:"emit",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.trigger.apply(this,Df(Array.from(t||[])))}}],n&&Lf(t.prototype,n),r&&Lf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ff=__webpack_require__(58976),qf=__webpack_require__.n(Ff);function Bf(e){return Bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(e)}function Uf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Hf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hf(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function Hf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Bf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Bf(l)?l:String(l)),r)}var a,l}function Wf(e,t,n){return t&&Vf(e.prototype,t),n&&Vf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Zf,Gf="ShareJsDoc",Kf=function(){function e(t){zf(this,e),this._onTimeoutHandler=t,this._lastReport=void 0,this._queue=[]}return Wf(e,[{key:"_getMetaPreferLocal",value:function(){var e,t=Uf(this._queue);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.scope===Gf)return n}}catch(e){t.e(e)}finally{t.f()}return this._queue.pop()}},{key:"onTimeout",value:function(e){var t=this;this._queue.push(e),setTimeout((function(){if(t._queue.length){var e=t._getMetaPreferLocal();t._queue.length=0;var n=Date.now();n-t._lastReport<6e4||(t._lastReport=n,t._onTimeoutHandler(e))}}))}}]),e}(),Yf=function(){function e(t){var n=t.parent,r=t.onTimeoutHandler;zf(this,e),this.scope=n?Gf:"global",this.timeout=6e4,this.parent=n,this.reporter=n?n.reporter:new Kf(r),this.lastAck=null,this.lastUnackedEdit=null}return Wf(e,[{key:"onAck",value:function(){this.lastAck=performance.now(),this.parent&&this.parent.onAck()}},{key:"onEdit",value:function(){var e=performance.now();this.lastAck>this.lastUnackedEdit&&(this.lastUnackedEdit=null),this.lastUnackedEdit||(this.lastUnackedEdit=e);var t=e-this.lastUnackedEdit;if(t>this.timeout){var n=Date.now()-e,r={scope:this.scope,delay:t,lastAck:new Date(this.lastAck?n+this.lastAck:0),lastUnackedEdit:new Date(n+this.lastUnackedEdit)};this._log("timedOut",r),this.reporter.onTimeout(r)}}},{key:"attachToEditor",value:function(e,t){var n,r=this;if("CM6"===e){this._log("attach to editor",e),n=function(e,t){"remote"!==t.origin&&(t.removed||t.inserted)&&r.onEdit()},t.on("change",n);return function(){r._log("detach from editor",e),t.off("change",n)}}n="CM"===e?function(e,t){"remote"!==t.origin&&(t.removed||t.text)&&r.onEdit()}:function(e){"remote"!==e.origin&&("remove"!==e.action&&"insert"!==e.action||r.onEdit())},this._log("attach to editor",e),t.on("change",n);return function(){r._log("detach from editor",e),t.off("change",n)}}},{key:"_log",value:function(){var e;(e=sl_console).log.apply(e,["[EditorWatchdogManager] ".concat(this.scope,":")].concat(Array.prototype.slice.call(arguments)))}}]),e}();function Xf(e){return Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(e)}function Jf(e){return function(e){if(Array.isArray(e))return Qf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qf(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ed(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Xf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Xf(l)?l:String(l)),r)}var a,l}function td(e,t){return td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},td(e,t)}function nd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rd(e);if(t){var a=rd(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rd(e){return rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rd(e)}var id,od=(Zf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&td(e,t)}(l,e);var t,n,r,a=nd(l);function l(e,t,n,r,f){var d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(d=a.call(this)).doc_id=e,d.socket=r,d.type="text";var h=(t=Array.from(t).map((function(e){return decodeURIComponent(escape(e))}))).join("\n");return d.track_changes=!1,d.connection={send:function(e){if(d._startInflightOpTimeout(e),null!=window.disconnectOnUpdate&&Math.random()<window.disconnectOnUpdate&&(sl_console.log("Disconnecting on update",e),window._ide.socket.socket.disconnect()),!(null!=window.dropUpdates&&Math.random()<window.dropUpdates))return d.track_changes&&(null==e.meta&&(e.meta={}),e.meta.tc=d.track_changes_id_seeds.inflight),d.socket.emit("applyOtUpdate",d.doc_id,e,(function(e){if(null!=e)return d._handleError(e)}));sl_console.log("Simulating a lost update",e)},state:"ok",id:d.socket.publicId},d._doc=new(qf().Doc)(d.connection,d.doc_id,{type:d.type}),d._doc.setFlushDelay(2e3),d._doc.on("change",(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=d).trigger.apply(e,["change"].concat(Jf(Array.from(n))))})),d.EditorWatchdogManager=new Yf({parent:f}),d._doc.on("acknowledge",(function(){return d.lastAcked=new Date,d.EditorWatchdogManager.onAck(),d.trigger("acknowledge")})),d._doc.on("remoteop",(function(){var e;d._doc.setFlushDelay(500);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=d).trigger.apply(e,["remoteop"].concat(Jf(Array.from(n))))})),d._doc.on("flipped_pending_to_inflight",(function(){return d.trigger("flipped_pending_to_inflight")})),d._doc.on("saved",(function(){return d.trigger("saved")})),d._doc.on("error",(function(e){return d._handleError(e)})),d._bindToDocChanges(d._doc),d.processUpdateFromServer({open:!0,v:n,snapshot:h}),d._removeCarriageReturnCharFromShareJsDoc(),d}return t=l,n=[{key:"_removeCarriageReturnCharFromShareJsDoc",value:function(){var e,t=this._doc;if(-1!==t.snapshot.indexOf("\r"))for(window._ide.pushEvent("remove-carriage-return-char",{doc_id:this.doc_id});-1!==(e=t.snapshot.indexOf("\r"));)sl_console.log("[ShareJsDoc] remove-carriage-return-char",e),t.del(e,1)}},{key:"submitOp",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this._doc).submitOp.apply(e,Jf(Array.from(n||[])))}},{key:"_isAheadOfExpectedVersion",value:function(e){return this._doc.version>0&&e.v>this._doc.version}},{key:"_pushOntoQueue",value:function(e){var t=this;sl_console.log("[processUpdate] push onto queue ".concat(e.v)),this.queuedMessageTimer||(this.queuedMessageTimer=setTimeout((function(){sl_console.log("[processUpdate] queue timeout fired for ".concat(e.v)),t.processUpdateFromServer(e)}),this.INFLIGHT_OP_TIMEOUT)),this.queuedMessages.push(e),this.queuedMessages.sort((function(e,t){return e.v-t.v}))}},{key:"_clearQueue",value:function(){this.queuedMessages=[]}},{key:"_processQueue",value:function(){if(this.queuedMessages.length>0){var e=this.queuedMessages[0].v;e>this._doc.version||(sl_console.log("[processUpdate] taken from queue ".concat(e)),this.processUpdateFromServerInOrder(this.queuedMessages.shift()),0===this.queuedMessages.length&&this.queuedMessageTimer&&(sl_console.log("[processUpdate] queue is empty, cleared timeout"),clearTimeout(this.queuedMessageTimer),this.queuedMessageTimer=null))}}},{key:"processUpdateFromServerInOrder",value:function(e){if(this.queuedMessages||(this.queuedMessages=[]),this._isAheadOfExpectedVersion(e))this._pushOntoQueue(e);else{var t=this.processUpdateFromServer(e);t instanceof Error&&"Invalid version from server"===t.message?this._clearQueue():this._processQueue()}}},{key:"processUpdateFromServer",value:function(e){try{this._doc._onMessage(e)}catch(e){return console.log(e),this._handleError(e),e}if("external"===(t=null!=e?e.meta:void 0,n=function(e){return e.type},null!=t?n(t):void 0))return this.trigger("externalUpdate",e);var t,n}},{key:"catchUp",value:function(e){var t=this;return function(){for(var n=[],r=0;r<e.length;r++){var a=e[r];a.v=t._doc.version,a.doc=t.doc_id,n.push(t.processUpdateFromServer(a))}return n}()}},{key:"getSnapshot",value:function(){return this._doc.snapshot}},{key:"getVersion",value:function(){return this._doc.version}},{key:"getType",value:function(){return this.type}},{key:"clearInflightAndPendingOps",value:function(){return this._clearFatalTimeoutTimer(),this._doc.inflightOp=null,this._doc.inflightCallbacks=[],this._doc.pendingOp=null,this._doc.pendingCallbacks=[]}},{key:"flushPendingOps",value:function(){return this._doc.flush()}},{key:"updateConnectionState",value:function(e){return sl_console.log("[updateConnectionState] Setting state to ".concat(e)),this.connection.state=e,this.connection.id=this.socket.publicId,this._doc.autoOpen=!1,this._doc._connectionStateChanged(e),this.lastAcked=null}},{key:"hasBufferedOps",value:function(){return null!=this._doc.inflightOp||null!=this._doc.pendingOp}},{key:"getInflightOp",value:function(){return this._doc.inflightOp}},{key:"getPendingOp",value:function(){return this._doc.pendingOp}},{key:"getRecentAck",value:function(){return null!=this.lastAcked&&new Date-this.lastAcked<4e3}},{key:"getOpSize",value:function(e){for(var t=0,n=0,r=Array.from(e||[]);n<r.length;n++){var a=r[n];null!=(null!=a?a.i:void 0)&&(t+=a.i.length),null!=(null!=a?a.d:void 0)&&(t+=a.d.length)}return t}},{key:"_attachEditorWatchdogManager",value:function(e,t){this._detachEditorWatchdogManager=this.EditorWatchdogManager.attachToEditor(e,t)}},{key:"_attachToEditor",value:function(e,t,n){this._attachEditorWatchdogManager(e,t),n()}},{key:"_maybeDetachEditorWatchdogManager",value:function(){this._detachEditorWatchdogManager&&(this._detachEditorWatchdogManager(),delete this._detachEditorWatchdogManager)}},{key:"attachToAce",value:function(e){var t=this;this._attachToEditor("Ace",e,(function(){t._doc.attach_ace(e,window.maxDocLength)}))}},{key:"detachFromAce",value:function(){return this._maybeDetachEditorWatchdogManager(),"function"==typeof this._doc.detach_ace?this._doc.detach_ace():void 0}},{key:"attachToCM",value:function(e){var t=this;this._attachToEditor("CM",e,(function(){t._doc.attach_cm(e,window.maxDocLength)}))}},{key:"detachFromCM",value:function(){return this._maybeDetachEditorWatchdogManager(),"function"==typeof this._doc.detach_cm?this._doc.detach_cm():void 0}},{key:"attachToCM6",value:function(e){var t=this;this._attachToEditor("CM6",e,(function(){e.attachShareJs(t._doc,window.maxDocLength)}))}},{key:"detachFromCM6",value:function(){this._maybeDetachEditorWatchdogManager(),this._doc.detach_cm6&&this._doc.detach_cm6()}},{key:"_startInflightOpTimeout",value:function(e){var t=this;this._startFatalTimeoutTimer(e);var n=setTimeout((function n(){if(sl_console.log("[inflightOpTimeout] Trying op again"),null!=t._doc.inflightOp)return e.dupIfSource=[t.connection.id].concat(Jf(Array.from(t._doc.inflightSubmittedIds))),"ok"!==t.connection.state?(sl_console.log("[inflightOpTimeout] Not connected, retrying in 0.5s"),setTimeout(n,t.WAIT_FOR_CONNECTION_TIMEOUT)):(sl_console.log("[inflightOpTimeout] Sending"),t.connection.send(e))}),this.INFLIGHT_OP_TIMEOUT);return this._doc.inflightCallbacks.push((function(){return t._clearFatalTimeoutTimer(),clearTimeout(n)}))}},{key:"_startFatalTimeoutTimer",value:function(e){var t=this;if(null==this._timeoutTimer)return this._timeoutTimer=setTimeout((function(){return t._clearFatalTimeoutTimer(),t.trigger("op:timeout",e)}),this.FATAL_OP_TIMEOUT)}},{key:"_clearFatalTimeoutTimer",value:function(){if(null!=this._timeoutTimer)return clearTimeout(this._timeoutTimer),this._timeoutTimer=null}},{key:"_handleError",value:function _handleError(e,t){return null==t&&(t={}),this.trigger("error",e,t)}},{key:"_bindToDocChanges",value:function(e){var t=this,n=e.submitOp;e.submitOp=function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t.trigger.apply(t,["op:sent"].concat(Jf(Array.from(a)))),e.pendingCallbacks.push((function(){return t.trigger.apply(t,["op:acknowledged"].concat(Jf(Array.from(a))))})),n.apply(e,a)};var r=e.flush;return e.flush=function(){t.trigger("flush",e.inflightOp,e.pendingOp,e.version);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return r.apply(e,a)}}}],r=[{key:"initClass",value:function(){this.prototype.INFLIGHT_OP_TIMEOUT=5e3,this.prototype.WAIT_FOR_CONNECTION_TIMEOUT=500,this.prototype.FATAL_OP_TIMEOUT=3e4}}],n&&ed(t.prototype,n),r&&ed(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(Nf),Zf.initClass(),Zf);function ad(e){return ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ad(e)}function sd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=cd(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function ld(e){return function(e){if(Array.isArray(e))return ud(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cd(e,t){if(e){if("string"==typeof e)return ud(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ud(e,t):void 0}}function ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==ad(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ad(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===ad(l)?l:String(l)),r)}var a,l}function dd(e,t){return dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dd(e,t)}function hd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pd(e);if(t){var a=pd(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ad(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pd(e){return pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pd(e)}var md=(id=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dd(e,t)}(l,e);var t,n,r,a=hd(l);function l(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=a.call(this)).ide=e,n.doc_id=t,n.connected=n.ide.socket.socket.connected,n.joined=!1,n.wantToBeJoined=!1,n._checkAceConsistency=function(){return n._checkConsistency(n.ace)},n._checkCMConsistency=function(){return n._checkConsistency(n.cm)},n._checkCM6Consistency=function(){return n._checkConsistency(n.cm6)},n._bindToEditorEvents(),n._bindToSocketEvents(),n}return t=l,n=[{key:"editorType",value:function(){return this.ace?"ace":this.cm6?"cm6":this.cm?"cm-rich-text":null}},{key:"attachToAce",value:function(e){return this.ace=e,null!=this.doc&&this.doc.attachToAce(this.ace),this.ace.getSession().getDocument().on("change",this._checkAceConsistency),this.ide.$scope.$emit("document:opened",this.doc)}},{key:"detachFromAce",value:function(){null!=this.doc&&this.doc.detachFromAce();var e=null!=this.ace?this.ace.getSession().getDocument():void 0;return null!=e&&e.off("change",this._checkAceConsistency),delete this.ace,this.clearChaosMonkey(),this.ide.$scope.$emit("document:closed",this.doc)}},{key:"attachToCM",value:function(e){return this.cm=e,null!=this.doc&&this.doc.attachToCM(this.cm),null!=this.cm&&this.cm.on("change",this._checkCMConsistency),this.ide.$scope.$emit("document:opened",this.doc)}},{key:"detachFromCM",value:function(){return null!=this.doc&&this.doc.detachFromCM(),null!=this.cm&&this.cm.off("change",this._checkCMConsistency),delete this.cm,this.clearChaosMonkey(),this.ide.$scope.$emit("document:closed",this.doc)}},{key:"attachToCM6",value:function(e){return this.cm6=e,null!=this.doc&&this.doc.attachToCM6(this.cm6),null!=this.cm6&&this.cm6.on("change",this._checkCM6Consistency),this.ide.$scope.$emit("document:opened",this.doc)}},{key:"detachFromCM6",value:function(){return null!=this.doc&&this.doc.detachFromCM6(),null!=this.cm6&&this.cm6.off("change",this._checkCM6Consistency),delete this.cm6,this.clearChaosMonkey(),this.ide.$scope.$emit("document:closed",this.doc)}},{key:"submitOp",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null!=this.doc?(e=this.doc).submitOp.apply(e,ld(Array.from(n||[]))):void 0}},{key:"_checkConsistency",value:function(e){var t=this;return setTimeout((function(){var n=null!=e?e.getValue():void 0;if(n!==(null!=t.doc?t.doc.getSnapshot():void 0))return t._onError(new Error("Editor text does not match server text"),{},n)}),0)}},{key:"getSnapshot",value:function(){return null!=this.doc?this.doc.getSnapshot():void 0}},{key:"getType",value:function(){return null!=this.doc?this.doc.getType():void 0}},{key:"getInflightOp",value:function(){return null!=this.doc?this.doc.getInflightOp():void 0}},{key:"getPendingOp",value:function(){return null!=this.doc?this.doc.getPendingOp():void 0}},{key:"getRecentAck",value:function(){return null!=this.doc?this.doc.getRecentAck():void 0}},{key:"getOpSize",value:function(e){return null!=this.doc?this.doc.getOpSize(e):void 0}},{key:"hasBufferedOps",value:function(){return null!=this.doc?this.doc.hasBufferedOps():void 0}},{key:"setTrackingChanges",value:function(e){return this.doc.track_changes=e}},{key:"getTrackingChanges",value:function(){return!!this.doc.track_changes}},{key:"setTrackChangesIdSeeds",value:function(e){return this.doc.track_changes_id_seeds=e}},{key:"_bindToSocketEvents",value:function(){var e=this;return this._onUpdateAppliedHandler=function(t){return e._onUpdateApplied(t)},this.ide.socket.on("otUpdateApplied",this._onUpdateAppliedHandler),this._onErrorHandler=function(t,n){n.doc_id===e.doc_id&&e._onError(t,n)},this.ide.socket.on("otUpdateError",this._onErrorHandler),this._onDisconnectHandler=function(t){return e._onDisconnect(t)},this.ide.socket.on("disconnect",this._onDisconnectHandler)}},{key:"_bindToEditorEvents",value:function(){var e=this;return this._unsubscribeReconnectHandler=this.ide.$scope.$on("project:joined",(function(t){return e._onReconnect(t)}))}},{key:"_unBindFromEditorEvents",value:function(){return this._unsubscribeReconnectHandler()}},{key:"_unBindFromSocketEvents",value:function(){return this.ide.socket.removeListener("otUpdateApplied",this._onUpdateAppliedHandler),this.ide.socket.removeListener("otUpdateError",this._onErrorHandler),this.ide.socket.removeListener("disconnect",this._onDisconnectHandler)}},{key:"leaveAndCleanUp",value:function(e){var t=this;return this.leave((function(n){t._cleanUp(),e&&e(n)}))}},{key:"join",value:function(e){return null==e&&(e=function(){}),this.wantToBeJoined=!0,this._cancelLeave(),this.connected?this._joinDoc(e):(this._joinCallbacks||(this._joinCallbacks=[]),this._joinCallbacks.push(e))}},{key:"leave",value:function(e){return null==e&&(e=function(){}),this.flush(),this.wantToBeJoined=!1,this._cancelJoin(),null!=this.doc&&this.doc.hasBufferedOps()?(sl_console.log("[leave] Doc has buffered ops, pushing callback for later"),this._leaveCallbacks||(this._leaveCallbacks=[]),this._leaveCallbacks.push(e)):this.connected?(sl_console.log("[leave] Leaving now"),this._leaveDoc(e)):(sl_console.log("[leave] Not connected, returning now"),e())}},{key:"flush",value:function(){return null!=this.doc?this.doc.flushPendingOps():void 0}},{key:"chaosMonkey",value:function(e,t){var n=this;null==e&&(e=0),null==t&&(t="a");var r=t,a=null,l=0;return this._cm=function f(){return null!=a&&a.length||(a=r.slice()+" "+new Date+"\n",(e+=Math.random()>.1?1:-2)<0&&(e=0),l=0),t=a[0],a=a.slice(1),n.ace?n.ace.session.insert({row:e,column:l},t):n.cm6&&n.cm6.view.dispatch({changes:{from:Math.min(l,n.cm6.view.state.doc.length),insert:t}}),l+=1,n._cm=setTimeout(f,100+(Math.random()<.1?1e3:0))}()}},{key:"clearChaosMonkey",value:function(){var e=this._cm;if(e)return delete this._cm,clearTimeout(e)}},{key:"pollSavedStatus",value:function(){var e,t=this.getInflightOp(),n=this.getPendingOp(),r=this.getRecentAck(),a=null!=n&&this.getOpSize(n);return null==t&&null==n?(e=!0,sl_console.log("[pollSavedStatus] no inflight or pending ops")):null!=t&&t===this.oldInflightOp?(e=!1,sl_console.log("[pollSavedStatus] inflight op is same as before")):null!=n&&r&&a<this.MAX_PENDING_OP_SIZE?(e=!0,sl_console.log("[pollSavedStatus] pending op (small with recent ack) assume ok",n,a)):(e=!1,sl_console.log("[pollSavedStatus] assuming not saved (inflightOp?: ".concat(null!=t,", pendingOp?: ").concat(null!=n,")"))),this.oldInflightOp=t,e}},{key:"_cancelLeave",value:function(){if(null!=this._leaveCallbacks)return delete this._leaveCallbacks}},{key:"_cancelJoin",value:function(){if(null!=this._joinCallbacks)return delete this._joinCallbacks}},{key:"_onUpdateApplied",value:function(e){return this.ide.pushEvent("received-update",{doc_id:this.doc_id,remote_doc_id:null!=e?e.doc:void 0,wantToBeJoined:this.wantToBeJoined,update:e,hasDoc:null!=this.doc}),null!=window.disconnectOnAck&&Math.random()<window.disconnectOnAck?(sl_console.log("Disconnecting on ack",e),void window._ide.socket.socket.disconnect()):null!=window.dropAcks&&Math.random()<window.dropAcks&&null==e.op?void sl_console.log("Simulating a lost ack",e):(null!=e?e.doc:void 0)!==this.doc_id||null==this.doc||(this.ide.pushEvent("received-update:processing",{update:e}),this.doc.processUpdateFromServerInOrder(e),this.wantToBeJoined)?void 0:this.leave()}},{key:"_onDisconnect",value:function(){return sl_console.log("[onDisconnect] disconnecting"),this.connected=!1,this.joined=!1,null!=this.doc?this.doc.updateConnectionState("disconnected"):void 0}},{key:"_onReconnect",value:function(){var e=this;if(sl_console.log("[onReconnect] reconnected (joined project)"),this.ide.pushEvent("reconnected:afterJoinProject"),this.connected=!0,this.wantToBeJoined||(null!=this.doc?this.doc.hasBufferedOps():void 0))return sl_console.log("[onReconnect] Rejoining (wantToBeJoined: ".concat(this.wantToBeJoined," OR hasBufferedOps: ").concat(null!=this.doc?this.doc.hasBufferedOps():void 0,")")),this._joinDoc((function(t){return null!=t?e._onError(t):(e.doc.updateConnectionState("ok"),e.doc.flushPendingOps(),e._callJoinCallbacks())}))}},{key:"_callJoinCallbacks",value:function(){for(var e=0,t=Array.from(this._joinCallbacks||[]);e<t.length;e++)(0,t[e])();return delete this._joinCallbacks}},{key:"_joinDoc",value:function(e){var t=this;return null==e&&(e=function(){}),null!=this.doc?(this.ide.pushEvent("joinDoc:existing",{doc_id:this.doc_id,version:this.doc.getVersion()}),this.ide.socket.emit("joinDoc",this.doc_id,this.doc.getVersion(),{encodeRanges:!0},(function(n,r,a,l,f){return null!=n?e(n):(t.joined=!0,t.doc.catchUp(l),t._decodeRanges(f),t._catchUpRanges(null!=f?f.changes:void 0,null!=f?f.comments:void 0),e())}))):(this.ide.pushEvent("joinDoc:new",{doc_id:this.doc_id}),this.ide.socket.emit("joinDoc",this.doc_id,{encodeRanges:!0},(function(n,r,a,l,f){return null!=n?e(n):(t.joined=!0,t.ide.pushEvent("joinDoc:inited",{doc_id:t.doc_id,version:a}),t.doc=new od(t.doc_id,r,a,t.ide.socket,t.ide.globalEditorWatchdogManager),t._decodeRanges(f),t.ranges=new(Af())(null!=f?f.changes:void 0,null!=f?f.comments:void 0),t._bindToShareJsDocEvents(),e())})))}},{key:"_decodeRanges",value:function(e){var t=function(e){return decodeURIComponent(escape(e))};try{for(var n=0,r=Array.from(e.changes||[]);n<r.length;n++){var a=r[n];null!=a.op.i&&(a.op.i=t(a.op.i)),null!=a.op.d&&(a.op.d=t(a.op.d))}return function(){for(var n=[],r=0,a=Array.from(e.comments||[]);r<a.length;r++){var l=a[r];null!=l.op.c?n.push(l.op.c=t(l.op.c)):n.push(void 0)}return n}()}catch(e){return console.log(e)}}},{key:"_leaveDoc",value:function(e){var t=this;return null==e&&(e=function(){}),this.ide.pushEvent("leaveDoc",{doc_id:this.doc_id}),sl_console.log("[_leaveDoc] Sending leaveDoc request"),this.ide.socket.emit("leaveDoc",this.doc_id,(function(n){if(null!=n)return e(n);t.joined=!1;for(var r=0,a=Array.from(t._leaveCallbacks||[]);r<a.length;r++)e=a[r],sl_console.log("[_leaveDoc] Calling buffered callback",e),e(n);return delete t._leaveCallbacks,e(n)}))}},{key:"_cleanUp",value:function(){if(!this.hasBufferedOps())return l.openDocs[this.doc_id]===this?(sl_console.log("[_cleanUp] Removing self (".concat(this.doc_id,") from in openDocs")),delete l.openDocs[this.doc_id]):sl_console.log("[_cleanUp] New instance of (".concat(this.doc_id,") created. Not removing")),this._unBindFromEditorEvents(),this._unBindFromSocketEvents();sl_console.log("[_cleanUp] Document (".concat(this.doc_id,") has buffered ops, refusing to remove from openDocs"))}},{key:"_bindToShareJsDocEvents",value:function(){var e,t,n=this;this.doc.on("error",(function(e,t){return n._onError(e,t)})),this.doc.on("externalUpdate",(function(e){return n.ide.pushEvent("externalUpdate",{doc_id:n.doc_id}),n.trigger("externalUpdate",e)})),this.doc.on("remoteop",(function(){n.ide.pushEvent("remoteop",{doc_id:n.doc_id});for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.trigger.apply(n,["remoteop"].concat(ld(Array.from(t))))})),this.doc.on("op:sent",(function(e){return n.ide.pushEvent("op:sent",{doc_id:n.doc_id,op:e}),n.trigger("op:sent")})),this.doc.on("op:acknowledged",(function(e){return n.ide.pushEvent("op:acknowledged",{doc_id:n.doc_id,op:e}),n.ide.$scope.$emit("ide:opAcknowledged",{doc_id:n.doc_id,op:e}),n.trigger("op:acknowledged")})),this.doc.on("op:timeout",(function(e){return n.ide.pushEvent("op:timeout",{doc_id:n.doc_id,op:e}),n.trigger("op:timeout"),n._onError(new Error("op timed out"))})),this.doc.on("flush",(function(e,t,r){return n.ide.pushEvent("flush",{doc_id:n.doc_id,inflightOp:e,pendingOp:t,v:r})})),this.doc.on("change",(function(t,r,a){n._applyOpsToRanges(t,r,a),e&&window.clearTimeout(e),e=window.setTimeout((function(){window.dispatchEvent(new CustomEvent("doc:changed",{detail:{id:n.doc_id}})),n.ide.$scope.$emit("doc:changed",{doc_id:n.doc_id})}),50)})),this.doc.on("flipped_pending_to_inflight",(function(){return n.trigger("flipped_pending_to_inflight")})),this.doc.on("saved",(function(){t&&window.clearTimeout(t),t=window.setTimeout((function(){window.dispatchEvent(new CustomEvent("doc:saved",{detail:{id:n.doc_id}})),n.ide.$scope.$emit("doc:saved",{doc_id:n.doc_id})}),50)}))}},{key:"_onError",value:function _onError(e,t,n){if(null==t&&(t={}),t.doc_id=this.doc_id,sl_console.log("ShareJS error",e,t),"no project_id found on client"!==e.message)return null!=this.doc&&this.doc.clearInflightAndPendingOps(),this.trigger("error",e,t,n),this._cleanUp();sl_console.log("ignoring error, will wait to join project")}},{key:"_applyOpsToRanges",value:function(e,t,n){var r,a=this;null==e&&(e=[]);var l,f,d=null,h=null!=n;null!=(l=null!=n?n.meta:void 0,f=function(e){return e.tc},null!=l?f(l):void 0)&&(r=this.ranges.getIdSeed(),this.ranges.setIdSeed(n.meta.tc)),h&&(null!=n.meta?n.meta.tc:void 0)?d=n.meta.user_id:h||null==this.track_changes_as||(d=this.track_changes_as),this.ranges.track_changes=null!=d;var p,y=sd(this._filterOps(e));try{for(y.s();!(p=y.n()).done;){var w=p.value;this.ranges.applyOp(w,{user_id:d})}}catch(e){y.e(e)}finally{y.f()}return null!=r&&this.ranges.setIdSeed(r),h?setTimeout((function(){return a.emit("ranges:dirty")})):this.emit("ranges:dirty")}},{key:"_catchUpRanges",value:function(e,t){null==e&&(e=[]),null==t&&(t=[]),this.emit("ranges:clear"),this.ranges.changes=e,this.ranges.comments=t,this.ranges.track_changes=this.doc.track_changes;var n,r=sd(this._filterOps(this.doc.getInflightOp()||[]));try{for(r.s();!(n=r.n()).done;){var a=n.value;this.ranges.setIdSeed(this.doc.track_changes_id_seeds.inflight),this.ranges.applyOp(a,{user_id:this.track_changes_as})}}catch(e){r.e(e)}finally{r.f()}var l,f=sd(this._filterOps(this.doc.getPendingOp()||[]));try{for(f.s();!(l=f.n()).done;){var d=l.value;this.ranges.setIdSeed(this.doc.track_changes_id_seeds.pending),this.ranges.applyOp(d,{user_id:this.track_changes_as})}}catch(e){f.e(e)}finally{f.f()}return this.emit("ranges:redraw")}},{key:"_filterOps",value:function(e){return window.isRestrictedTokenMember?e.filter((function(e){return null==e.c})):e}}],r=[{key:"initClass",value:function(){this.prototype.MAX_PENDING_OP_SIZE=64}},{key:"getDocument",value:function(e,t){return this.openDocs||(this.openDocs={}),this.openDocs[t]&&(sl_console.log("[getDocument] Cleaning up existing document instance for ".concat(t)),this.openDocs[t]._cleanUp()),null==this.openDocs[t]?(sl_console.log("[getDocument] Creating new document instance for ".concat(t)),this.openDocs[t]=new l(e,t)):sl_console.log("[getDocument] Returning existing document instance for ".concat(t)),this.openDocs[t]}},{key:"hasUnsavedChanges",value:function(){var e=this.openDocs||{};for(var t in e)if(e[t].hasBufferedOps())return!0;return!1}},{key:"flushAll",value:function(){var e=this;return function(){var t=[];for(var n in e.openDocs){var r=e.openDocs[n];t.push(r.flush())}return t}()}}],n&&fd(t.prototype,n),r&&fd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(Nf),id.initClass(),id);x.Z.component("spellMenu",{bindings:{open:"<",top:"<",left:"<",layoutFromBottom:"<",highlight:"<",replaceWord:"&",learnWord:"&"},template:'<div\nclass="dropdown context-menu spell-check-menu"\nng-show="$ctrl.open"\nng-style="{top: $ctrl.top, left: $ctrl.left}"\nng-class="{open: $ctrl.open, \'spell-check-menu-from-bottom\': $ctrl.layoutFromBottom}"\n>\n<ul class="dropdown-menu">\n  <li ng-repeat="suggestion in $ctrl.highlight.suggestions | limitTo:8">\n    <button\n      class="btn-link text-left dropdown-menu-button"\n      ng-click="$ctrl.replaceWord({ highlight: $ctrl.highlight, suggestion: suggestion })"\n    >\n      {{ suggestion }}\n    </a>\n  </li>\n  <li class="divider"></li>\n  <li>\n    <a href ng-click="$ctrl.learnWord({ highlight: $ctrl.highlight })">Add to Dictionary</a>\n  </li>\n</ul>\n</div>'}),__webpack_require__(95095);function gd(e){return gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(e)}function vd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==gd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===gd(l)?l:String(l)),r)}var a,l}var yd=ace.require("ace/undomanager").UndoManager,bd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=t,this.onChangeSession=this.onChangeSession.bind(this),this.onChange=this.onChange.bind(this)}var t,n,r;return t=e,(n=[{key:"onChangeSession",value:function(e){e.setUndoManager(new yd)}},{key:"onChange",value:function(e){var t=this;"remote"===e.origin&&setTimeout((function(){t.editor.getSession().getUndoManager().reset()}))}}])&&vd(t.prototype,n),r&&vd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),wd=[{caption:"\\begin{}",snippet:"\\begin{$1}",meta:"env",score:7.849662248028187},{caption:"\\end{}",snippet:"\\end{$1}",meta:"env",score:7.847906405228455},{caption:"\\usepackage[]{}",snippet:"\\usepackage[$1]{$2}",meta:"pkg",score:5.427890758130527},{caption:"\\item",snippet:"\\item ",meta:"cmd",score:3.800886892251021},{caption:"\\item[]",snippet:"\\item[$1] ",meta:"cmd",score:3.800886892251021},{caption:"\\section{}",snippet:"\\section{$1}",meta:"cmd",score:3.0952612541683835},{caption:"\\textbf{}",snippet:"\\textbf{$1}",meta:"cmd",score:2.627755982816738},{caption:"\\cite{}",snippet:"\\cite{$1}",meta:"cmd",score:2.341195220791228},{caption:"\\label{}",snippet:"\\label{$1}",meta:"cmd",score:1.897791904799601},{caption:"\\textit{}",snippet:"\\textit{$1}",meta:"cmd",score:1.6842996195493385},{caption:"\\includegraphics[]{}",snippet:"\\includegraphics[$1]{$2}",meta:"cmd",score:1.4595731795525781},{caption:"\\documentclass[]{}",snippet:"\\documentclass[$1]{$2}",meta:"cmd",score:1.4425339817971206},{caption:"\\documentclass{}",snippet:"\\documentclass{$1}",meta:"cmd",score:1.4425339817971206},{caption:"\\ref{}",snippet:"\\ref{$1}",meta:"cross-reference",score:.014379554883991673},{caption:"\\frac{}{}",snippet:"\\frac{$1}{$2}",meta:"cmd",score:1.4341091141105058},{caption:"\\subsection{}",snippet:"\\subsection{$1}",meta:"cmd",score:1.3890912739512353},{caption:"\\hline",snippet:"\\hline",meta:"cmd",score:1.3209538327406387},{caption:"\\caption{}",snippet:"\\caption{$1}",meta:"cmd",score:1.2569477427490174},{caption:"\\centering",snippet:"\\centering",meta:"cmd",score:1.1642881814937829},{caption:"\\vspace{}",snippet:"\\vspace{$1}",meta:"cmd",score:.9533807826673939},{caption:"\\title{}",snippet:"\\title{$1}",meta:"cmd",score:.9202908262245683},{caption:"\\author{}",snippet:"\\author{$1}",meta:"cmd",score:.8973590434087177},{caption:"\\author[]{}",snippet:"\\author[$1]{$2}",meta:"cmd",score:.8973590434087177},{caption:"\\maketitle",snippet:"\\maketitle",meta:"cmd",score:.7504160124360846},{caption:"\\textwidth",snippet:"\\textwidth",meta:"cmd",score:.7355328080889112},{caption:"\\newcommand{}{}",snippet:"\\newcommand{$1}{$2}",meta:"cmd",score:.7264891987129375},{caption:"\\newcommand{}[]{}",snippet:"\\newcommand{$1}[$2]{$3}",meta:"cmd",score:.7264891987129375},{caption:"\\date{}",snippet:"\\date{$1}",meta:"cmd",score:.7225518453076786},{caption:"\\emph{}",snippet:"\\emph{$1}",meta:"cmd",score:.7060308784832261},{caption:"\\textsc{}",snippet:"\\textsc{$1}",meta:"cmd",score:.6926466355384758},{caption:"\\multicolumn{}{}{}",snippet:"\\multicolumn{$1}{$2}{$3}",meta:"cmd",score:.5473606021405326},{caption:"\\input{}",snippet:"\\input{$1}",meta:"cmd",score:.4966021927742672},{caption:"\\alpha",snippet:"\\alpha",meta:"cmd",score:.49520006391384913},{caption:"\\in",snippet:"\\in",meta:"cmd",score:.4716039670146658},{caption:"\\mathbf{}",snippet:"\\mathbf{$1}",meta:"cmd",score:.4682018419466319},{caption:"\\right",snippet:"\\right",meta:"cmd",score:.4299239459457309},{caption:"\\left",snippet:"\\left",meta:"cmd",score:.42937815279867964},{caption:"\\sum",snippet:"\\sum",meta:"cmd",score:.42607994509619934},{caption:"\\chapter{}",snippet:"\\chapter{$1}",meta:"cmd",score:.422097569591803},{caption:"\\par",snippet:"\\par",meta:"cmd",score:.413853376001159},{caption:"\\lambda",snippet:"\\lambda",meta:"cmd",score:.39389600578684125},{caption:"\\subsubsection{}",snippet:"\\subsubsection{$1}",meta:"cmd",score:.3727781330132016},{caption:"\\bibitem{}",snippet:"\\bibitem{$1}",meta:"cmd",score:.3689547570562042},{caption:"\\bibitem[]{}",snippet:"\\bibitem[$1]{$2}",meta:"cmd",score:.3689547570562042},{caption:"\\text{}",snippet:"\\text{$1}",meta:"cmd",score:.3608680734736821},{caption:"\\setlength{}{}",snippet:"\\setlength{$1}{$2}",meta:"cmd",score:.354445763583904},{caption:"\\mathcal{}",snippet:"\\mathcal{$1}",meta:"cmd",score:.35084018920966636},{caption:"\\newpage",snippet:"\\newpage",meta:"cmd",score:.3277033727934986},{caption:"\\renewcommand{}{}",snippet:"\\renewcommand{$1}{$2}",meta:"cmd",score:.3267437011085663},{caption:"\\theta",snippet:"\\theta",meta:"cmd",score:.3210417159232142},{caption:"\\hspace{}",snippet:"\\hspace{$1}",meta:"cmd",score:.3147206476372336},{caption:"\\beta",snippet:"\\beta",meta:"cmd",score:.3061799530337638},{caption:"\\texttt{}",snippet:"\\texttt{$1}",meta:"cmd",score:.3019066753744355},{caption:"\\times",snippet:"\\times",meta:"cmd",score:.2957960629411553},{caption:"\\color{}",snippet:"\\color{$1}",meta:"cmd",score:.2864294797053033},{caption:"\\mu",snippet:"\\mu",meta:"cmd",score:.27635652476799255},{caption:"\\bibliography{}",snippet:"\\bibliography{$1}",meta:"cmd",score:.2659628337907604},{caption:"\\linewidth",snippet:"\\linewidth",meta:"cmd",score:.2639498312518439},{caption:"\\delta",snippet:"\\delta",meta:"cmd",score:.2620578600722735},{caption:"\\sigma",snippet:"\\sigma",meta:"cmd",score:.25940147926344487},{caption:"\\pi",snippet:"\\pi",meta:"cmd",score:.25920934567729714},{caption:"\\hat{}",snippet:"\\hat{$1}",meta:"cmd",score:.25264309033778715},{caption:"\\bibliographystyle{}",snippet:"\\bibliographystyle{$1}",meta:"cmd",score:.25122317941387773},{caption:"\\small",snippet:"\\small",meta:"cmd",score:.2447632045426295},{caption:"\\LaTeX",snippet:"\\LaTeX",meta:"cmd",score:.2334089308452787},{caption:"\\cdot",snippet:"\\cdot",meta:"cmd",score:.23029085545522762},{caption:"\\footnote{}",snippet:"\\footnote{$1}",meta:"cmd",score:.2253056071787701},{caption:"\\newtheorem{}{}",snippet:"\\newtheorem{$1}{$2}",meta:"cmd",score:.215689795055434},{caption:"\\Delta",snippet:"\\Delta",meta:"cmd",score:.21386475063892618},{caption:"\\tau",snippet:"\\tau",meta:"cmd",score:.21236188205859796},{caption:"\\hfill",snippet:"\\hfill",meta:"cmd",score:.2058248088519886},{caption:"\\leq",snippet:"\\leq",meta:"cmd",score:.20498894440637172},{caption:"\\footnotesize",snippet:"\\footnotesize",meta:"cmd",score:.2038592081252624},{caption:"\\large",snippet:"\\large",meta:"cmd",score:.20377416734108866},{caption:"\\sqrt{}",snippet:"\\sqrt{$1}",meta:"cmd",score:.20240160977404634},{caption:"\\epsilon",snippet:"\\epsilon",meta:"cmd",score:.2005136761359043},{caption:"\\Large",snippet:"\\Large",meta:"cmd",score:.1987771081149759},{caption:"\\rho",snippet:"\\rho",meta:"cmd",score:.1959287380541684},{caption:"\\omega",snippet:"\\omega",meta:"cmd",score:.19326783415115262},{caption:"\\mathrm{}",snippet:"\\mathrm{$1}",meta:"cmd",score:.19117752976172653},{caption:"\\boldsymbol{}",snippet:"\\boldsymbol{$1}",meta:"cmd",score:.18137737738638837},{caption:"\\gamma",snippet:"\\gamma",meta:"cmd",score:.17940276535431304},{caption:"\\clearpage",snippet:"\\clearpage",meta:"cmd",score:.1789117552185788},{caption:"\\infty",snippet:"\\infty",meta:"cmd",score:.17837290019711305},{caption:"\\phi",snippet:"\\phi",meta:"cmd",score:.17405809173097808},{caption:"\\partial",snippet:"\\partial",meta:"cmd",score:.17168102367966637},{caption:"\\include{}",snippet:"\\include{$1}",meta:"cmd",score:.1547080054979312},{caption:"\\address{}",snippet:"\\address{$1}",meta:"cmd",score:.1525055392611109},{caption:"\\quad",snippet:"\\quad",meta:"cmd",score:.15242755832392743},{caption:"\\paragraph{}",snippet:"\\paragraph{$1}",meta:"cmd",score:.152074250347974},{caption:"\\varepsilon",snippet:"\\varepsilon",meta:"cmd",score:.05411564201390573},{caption:"\\zeta",snippet:"\\zeta",meta:"cmd",score:.023330249803752954},{caption:"\\eta",snippet:"\\eta",meta:"cmd",score:.11088718379889091},{caption:"\\vartheta",snippet:"\\vartheta",meta:"cmd",score:.0025822992078068712},{caption:"\\iota",snippet:"\\iota",meta:"cmd",score:.0024774003791525486},{caption:"\\kappa",snippet:"\\kappa",meta:"cmd",score:.04887876299369008},{caption:"\\nu",snippet:"\\nu",meta:"cmd",score:.09206962821059342},{caption:"\\xi",snippet:"\\xi",meta:"cmd",score:.06496042899265699},{caption:"\\varpi",snippet:"\\varpi",meta:"cmd",score:.0007039358167790341},{caption:"\\varrho",snippet:"\\varrho",meta:"cmd",score:.0011279491613898612},{caption:"\\varsigma",snippet:"\\varsigma",meta:"cmd",score:.0010424880711234978},{caption:"\\upsilon",snippet:"\\upsilon",meta:"cmd",score:.00420715572598688},{caption:"\\varphi",snippet:"\\varphi",meta:"cmd",score:.03351251516668212},{caption:"\\chi",snippet:"\\chi",meta:"cmd",score:.043373492287805675},{caption:"\\psi",snippet:"\\psi",meta:"cmd",score:.09994508706163642},{caption:"\\Gamma",snippet:"\\Gamma",meta:"cmd",score:.04801549269801977},{caption:"\\Theta",snippet:"\\Theta",meta:"cmd",score:.038090902146599444},{caption:"\\Lambda",snippet:"\\Lambda",meta:"cmd",score:.032206594305977686},{caption:"\\Xi",snippet:"\\Xi",meta:"cmd",score:.01060997225400494},{caption:"\\Pi",snippet:"\\Pi",meta:"cmd",score:.021264671817473237},{caption:"\\Sigma",snippet:"\\Sigma",meta:"cmd",score:.05769642802079917},{caption:"\\Upsilon",snippet:"\\Upsilon",meta:"cmd",score:.00032875192955749566},{caption:"\\Phi",snippet:"\\Phi",meta:"cmd",score:.0538724950042562},{caption:"\\Psi",snippet:"\\Psi",meta:"cmd",score:.03056589143021648},{caption:"\\Omega",snippet:"\\Omega",meta:"cmd",score:.09490387997853639}];function xd(e){return xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(e)}function _d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==xd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===xd(l)?l:String(l)),r)}var a,l}function kd(e,t,n){return t&&Sd(e.prototype,t),n&&Sd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Cd=function(){function e(t,n){_d(this,e),this.doc=t,this.prefix=n}return kd(e,[{key:"parse",value:function(){var e,t,n,r=null;t="undefined"!=typeof window&&null!==window?window._ide:void 0,n=function(e){return e.browserIsSafari},(null!=t?n(t):void 0)&&(r=5e3);for(var a=[],l=[],f={},d=0;e=this.nextCommand();){if(d+=1,r&&d>r)return a;for(var h=this.doc,p=0;this.consumeArgument("[","]");)p++;for(var y=0;this.consumeArgument("{","}");)y++;var w="".concat(e,"\\").concat(p,"\\").concat(y);null!=this.prefix&&"\\".concat(e)===this.prefix?l.push([e,p,y]):null==f[w]&&(f[w]=!0,a.push([e,p,y])),this.doc=h}if(l.length>1){var x=l.sort((function(e,t){return t[1]+t[2]-(e[1]+e[2])}))[0];a.push(x)}return a}},{key:"nextCommand",value:function(){var e=this.doc.search(this.commandRegex);if(-1===e)return!1;var t=this.doc.match(this.commandRegex)[1];return this.doc=this.doc.substr(e+t.length+1),t}},{key:"consumeWhitespace",value:function(){var e=this.doc.match(/^[ \t\n]*/m)[0];return this.doc=this.doc.substr(e.length)}},{key:"consumeArgument",value:function(e,t){if(this.consumeWhitespace(),this.doc[0]===e){for(var n=1,r=1;r>0&&n<this.doc.length;)this.doc[n]===e?r++:this.doc[n]===t&&r--,n++;return 0===r&&(this.doc=this.doc.substr(n),!0)}return!1}}],[{key:"initClass",value:function(){this.prototype.commandRegex=/\\([a-zA-Z]{2,})/}}]),e}();Cd.initClass();var Ed=function(){function e(t){_d(this,e),this.metadataManager=t}return kd(e,[{key:"getCompletions",value:function(e,t,n,r,a){for(var l={},f=0,d=Array.from(wd);f<d.length;f++){var h=d[f];l[h.caption.match(/\w+/)[0]]=!0}var p=this.metadataManager.getAllPackages(),y=[];for(var w in p)for(var x=p[w],_=0,S=Array.from(x);_<S.length;_++){var k=S[_];y.push(k),l[k.caption.match(/\w+/)[0]]=!0}for(var E=t.getValue(),O=new Cd(E,r).parse(),j=[],T=function(){var e=P[A];if(!l[e[0]]){var t="\\".concat(e[0]),n=t===r?99:50,a=t,f=1;C().times(e[1],(function(){return a+="[${".concat(f,"}]"),t+="[]",f++})),C().times(e[2],(function(){return a+="{${".concat(f,"}}"),t+="{}",f++})),j.push({caption:t,snippet:a,meta:"cmd",score:n})}},A=0,P=Array.from(O);A<P.length;A++)T();return a(null,j=j.concat(wd,y))}},{key:"loadCommandsFromDoc",value:function(e){var t=new Cd(e);return this.commands=t.parse()}},{key:"getSuggestions",value:function(e){var t=C().filter(this.commands,(function(t){return t[0].slice(0,e.length)===e}));return C().map(t,(function(t){var n,r,a="\\".concat(e),l="";C().times(t[1],(function(){return l+="[]"})),C().times(t[2],(function(){return l+="{}"}));var f=t[0].slice(e.length);return 0===t[1]+t[2]?(r=f,n=""):(r=f+l[0],n=l.slice(1)),{base:a,completion:f+l,completionBeforeCursor:r,completionAfterCursor:n}}))}}]),e}();var Od=["abstract","align","align*","equation","equation*","gather","gather*","multline","multline*","split","verbatim","quote","center"],jd={all:Od.concat(["array","figure","tabular","table","list","enumerate","itemize","frame","thebibliography"]),withoutSnippets:Od};function $d(e){return $d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$d(e)}function Td(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==$d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===$d(l)?l:String(l)),r)}var a,l}var Ad=Array.from(jd.withoutSnippets).map((function(e){return{caption:"\\begin{".concat(e,"}..."),snippet:"\\begin{".concat(e,"}\n\t$1\n\\end{").concat(e,"}"),meta:"env"}}));Ad=Ad.concat([{caption:"\\begin{array}...",snippet:"\\begin{array}{${1:cc}}\n\t$2 & $3 \\\\\\\\\n\t$4 & $5\n\\end{array}",meta:"env"},{caption:"\\begin{figure}...",snippet:"\\begin{figure}\n\t\\centering\n\t\\includegraphics{$1}\n\t\\caption{${2:Caption}}\n\t\\label{${3:fig:my_label}}\n\\end{figure}",meta:"env"},{caption:"\\begin{tabular}...",snippet:"\\begin{tabular}{${1:c|c}}\n\t$2 & $3 \\\\\\\\\n\t$4 & $5\n\\end{tabular}",meta:"env"},{caption:"\\begin{table}...",snippet:"\\begin{table}[$1]\n\t\\centering\n\t\\begin{tabular}{${2:c|c}}\n\t\t$3 & $4 \\\\\\\\\n\t\t$5 & $6\n\t\\end{tabular}\n\t\\caption{${7:Caption}}\n\t\\label{${8:tab:my_label}}\n\\end{table}",meta:"env"},{caption:"\\begin{list}...",snippet:"\\begin{list}\n\t\\item $1\n\\end{list}",meta:"env"},{caption:"\\begin{enumerate}...",snippet:"\\begin{enumerate}\n\t\\item $1\n\\end{enumerate}",meta:"env"},{caption:"\\begin{itemize}...",snippet:"\\begin{itemize}\n\t\\item $1\n\\end{itemize}",meta:"env"},{caption:"\\begin{frame}...",snippet:"\\begin{frame}{${1:Frame Title}}\n\t$2\n\\end{frame}",meta:"env"}]);var Pd={caption:"\\begin{document}...",snippet:"\\begin{document}\n$1\n\\end{document}",meta:"env"},Dd={caption:"\\begin{thebibliography}...",snippet:"\\begin{thebibliography}{$1}\n\\bibitem{$2}\n$3\n\\end{thebibliography}",meta:"env"};Ad.push(Pd);var Rd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"getCompletions",value:function(e,t,n,r,a){var l,f=t.getValue(),d=function(e){for(var t,n=/^\\newenvironment{(\w+)}.*$/gm,r=[],a=0;t=n.exec(e);)if(r.push({name:t[1],whitespace:null}),(a+=1)>=1e3)return r;return r}(f),h=function(e){for(var t,n=/^([\t ]*)\\begin{(\w+)}.*\n([\t ]*)/gm,r=[],a=0;t=n.exec(e);){var l=t[3].replace(t[1]||"","");if(!Array.from(jd.all).includes(t[2])&&"document"!==t[2]&&(r.push({name:t[2],whitespace:l}),(a+=1)>=1e3))return r;n.lastIndex=t.index+1}return r}(f);null!==/^\\begin{document}/m.exec(f)?-1!==(l=Ad.indexOf(Pd))&&Ad.splice(l,1):Ad.push(Pd),function(e){return null!==/^\\begin{thebibliography}/m.exec(e)}(f)?-1!==(l=Ad.indexOf(Dd))&&Ad.splice(l,1):Ad.push(Dd);for(var p={},y=0,w=Array.from(d);y<w.length;y++){var x=w[y];p[x.name]=x}for(var _=0,S=Array.from(h);_<S.length;_++){var k=S[_];p[k.name]=k}var E=C().values(p);return a(null,Ad.concat(E.map((function(e){return{caption:"\\begin{".concat(e.name,"}..."),snippet:"\\begin{".concat(e.name,"}\n").concat(e.whitespace||"","$0\n\\end{").concat(e.name,"}"),meta:"env"}}))).concat(E.map((function(e){return{caption:"\\end{".concat(e.name,"}"),value:"\\end{".concat(e.name,"}"),meta:"env"}}))))}}],n&&Td(t.prototype,n),r&&Td(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Id=Rd;function Md(e){return Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Md(e)}function Ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Md(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Md(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Md(l)?l:String(l)),r)}var a,l}var Nd=["inputenc","graphicx","amsmath","geometry","amssymb","hyperref","babel","color","xcolor","url","natbib","fontenc","fancyhdr","amsfonts","booktabs","amsthm","float","tikz","caption","setspace","multirow","array","multicol","titlesec","enumitem","ifthen","listings","blindtext","subcaption","times","bm","subfigure","algorithm","fontspec","biblatex","tabularx","microtype","etoolbox","parskip","calc","verbatim","mathtools","epsfig","wrapfig","lipsum","cite","textcomp","longtable","textpos","algpseudocode","enumerate","subfig","pdfpages","epstopdf","latexsym","lmodern","pifont","ragged2e","rotating","dcolumn","xltxtra","marvosym","indentfirst","xspace","csquotes","xparse","changepage","soul","xunicode","comment","mathrsfs","tocbibind","lastpage","algorithm2e","pgfplots","lineno","graphics","algorithmic","fullpage","mathptmx","todonotes","ulem","tweaklist","moderncvstyleclassic","collection","moderncvcompatibility","gensymb","helvet","siunitx","adjustbox","placeins","colortbl","appendix","makeidx","supertabular","ifpdf","framed","aliascnt","layaureo","authblk"],Fd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadataManager=t}var t,n,r;return t=e,n=[{key:"getCompletions",value:function(e,t,n,r,a){for(var l=Object.keys(this.metadataManager.getAllPackages()),f=[],d=0,h=Array.from(Nd);d<h.length;d++){var p=h[d];Array.from(l).includes(p)||f.push({caption:"\\usepackage{".concat(p,"}"),snippet:"\\usepackage{".concat(p,"}"),meta:"pkg"})}return f.push({caption:"\\usepackage{}",snippet:"\\usepackage{$1}",meta:"pkg",score:70}),a(null,f)}}],n&&Ld(t.prototype,n),r&&Ld(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),qd=Fd,Bd=(__webpack_require__(59910),ace.require("ace/range").Range),Ud={getLastCommandFragment:function(e){var t;return(t=Ud.getLastCommandFragmentIndex(e))>-1?e.slice(t):null},getLastCommandFragmentIndex:function(e){var t;return(t=e.replace(/\[([^\]]*)\]/g,(function(e){return Array(e.length+1).join(".")})).match(/(\\[^\\]*)$/))?t.index:-1},getCommandNameFromFragment:function(e){return t=null!=e?e.match(/\\(\w+)\{/):void 0,n=function(e){return e[1]},null!=t?n(t):void 0;var t,n},getContext:function(e,t){var n=new Bd(t.row,0,t.row,t.column),r=e.getSession().getTextRange(n),a=Ud.getLastCommandFragment(r),l=Ud.getCommandNameFromFragment(a),f=new Bd(t.row,t.column,t.row,99999);return{lineUpToCursor:r,commandFragment:a,commandName:l,lineBeyondCursor:e.getSession().getTextRange(f)}}},Hd=Ud;function zd(e){return zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(e)}function Vd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||Zd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Zd(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function Zd(e,t){if(e){if("string"==typeof e)return Gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gd(e,t):void 0}}function Gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==zd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===zd(l)?l:String(l)),r)}var a,l}var Yd=ace.require("ace/range").Range,Xd=ace.require("ace/snippets").snippetManager,Jd=function(){function e(t,n,r,a,l,f,d){var h=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=t,this.editor=n,this.element=r,this.metadataManager=a,this.graphics=l,this.preamble=f,this.files=d,this.monkeyPatchAutocomplete(),this.$scope.$watch("autoComplete",(function(e){e?h.enable():h.disable()}));var p=function(e){h.onChange(e)};this.editor.on("changeSession",(function(e){e.oldSession.off("change",p),e.session.on("change",p)}))}var t,n,r;return t=e,n=[{key:"enable",value:function(){var e=this;this.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!1});var t=new Ed(this.metadataManager),n=new Id,r=new qd(this.metadataManager,Hd),a=this.graphics,l=this.preamble,f=this.files,d={getCompletions:function(e,t,n,r,f){var d=Hd.getContext(e,n).commandFragment;if(d){var h=d.match(/^~?\\(includegraphics(?:\[.*])?){([^}]*, *)?(\w*)/);if(h){var p,y=h[1],w=l.getGraphicsPaths(),x=[],_=Wd(a.getGraphicsFiles());try{for(_.s();!(p=_.n()).done;){var S,k=p.value.path,C=Wd(w);try{for(C.s();!(S=C.n()).done;){var E=S.value;if(0===k.indexOf(E)){k=k.slice(E.length);break}}}catch(e){C.e(e)}finally{C.f()}x.push({caption:"\\".concat(y,"{").concat(k,"}"),value:"\\".concat(y,"{").concat(k,"}"),meta:"graphic",score:50})}}catch(e){_.e(e)}finally{_.f()}f(null,x)}}}},h=this.metadataManager,p={getCompletions:function(t,n,r,a,l){var d=Hd.getContext(t,r).commandFragment;if(d){var h=d.match(/^\\(input|include){(\w*)/);if(h){var p,y=h[1],w=[],x=Wd(f.getTeXFiles());try{for(x.s();!(p=x.n()).done;){var _=p.value;if(_.id!==e.$scope.docId&&!_.deleted&&_.path){var S=_.path,k=S.replace(/(.+)\.tex$/i,"$1");w.push({caption:"\\".concat(y,"{").concat(S,"}"),value:"\\".concat(y,"{").concat(k,"}"),meta:"file",score:50})}}}catch(e){x.e(e)}finally{x.f()}l(null,w)}}}},y={getCompletions:function(e,t,n,r,a){var l=Hd.getContext(e,n).commandFragment;if(l){var f=l.match(/^~?\\([a-zA-Z]*ref){([^}]*, *)?(\w*)/);if(f){var d=f[1],p=[];"ref"!==d&&p.push({caption:"\\".concat(d,"{}"),snippet:"\\".concat(d,"{}"),meta:"cross-reference",score:60});var y,w=Wd(h.getAllLabels());try{for(w.s();!(y=w.n()).done;){var x=y.value;p.push({caption:"\\".concat(d,"{").concat(x,"}"),value:"\\".concat(d,"{").concat(x,"}"),meta:"cross-reference",score:50})}}catch(e){w.e(e)}finally{w.f()}a(null,p)}}}},w=this.$scope.$root._references,x={getCompletions:function(e,t,n,r,a){var l=Hd.getContext(e,n).commandFragment;if(l){var f=l.match(/^~?\\([a-z]*cite[a-z]*(?:\[.*])?){([^}]*, *)?(\w*)/);if(f){var d=Vd(f,3),h=(d[0],d[1]),p=d[2];null==p&&(p="");var y=p.length>8?"…,":p,x=[];x.push({caption:"\\".concat(h,"{}"),snippet:"\\".concat(h,"{}"),meta:"reference",score:60}),w.keys&&w.keys.length>0?(w.keys.forEach((function(e){null!=e&&x.push({caption:"\\".concat(h,"{").concat(y).concat(e,"}"),value:"\\".concat(h,"{").concat(p).concat(e,"}"),meta:"reference",score:50})})),a(null,x)):a(null,x)}}}};this.editor.completers=[t,n,r,x,y,d,p]}},{key:"disable",value:function(){return this.editor.setOptions({enableBasicAutocompletion:!1,enableSnippets:!1})}},{key:"onChange",value:function(e){var t,n=this,r=this.editor.getCursorPosition(),a=e.end,l=Hd.getContext(this.editor,a),f=l.lineUpToCursor,d=l.commandFragment;if(!((t=f.indexOf("%"))>-1&&"\\"!==f[t-1])){var h="\\"===f.slice(-1),p=f.slice(-2);if(!/^\\[^a-zA-Z]$/.test(p)){"remote"!==e.origin&&"insert"===e.action&&a.row===r.row&&a.column===r.column+1&&((null!=d?d.length:void 0)>2||h)&&setTimeout((function(){n.editor.execCommand("startAutocomplete")}),0);var y=e.lines[0].match(/\\(\w+){}/);return"insert"===e.action&&y&&y[1]&&/(begin|end|[a-zA-Z]*ref|usepackage|[a-z]*cite[a-z]*|input|include)/.test(y[1])?setTimeout((function(){n.editor.execCommand("startAutocomplete")}),0):void 0}this.editor.completer&&this.editor.completer.detach()}}},{key:"monkeyPatchAutocomplete",value:function(){var e=this,t=ace.require("ace/autocomplete").Autocomplete,n=ace.require("ace/autocomplete/util");null==t.prototype._insertMatch&&(t.prototype._insertMatch=t.prototype.insertMatch,t.prototype.insertMatch=function(e){var n=this.editor,r=n.getCursorPosition(),a=new Yd(r.row,r.column,r.row,r.column+1),l=n.session.getTextRange(a);if(/^\\\w+(\[[\w\\,=. ]*\])?{/.test(this.completions.filterText)&&"}"===l&&n.session.remove(a),null==e){var f=this.completions,d=this.popup;(e=d.getData(d.getRow())).completer={insertMatch:function(e,t){var n,r=Wd(e.selection.getAllRanges());try{for(r.s();!(n=r.n()).done;){a=n.value;var l=C().clone(a),d=C().clone(a),h=e.getSession().getTextRange(new Yd(a.start.row,0,a.start.row,a.start.column)),p=Hd.getLastCommandFragmentIndex(h);-1!==p?l.start.column=p:l.start.column-=f.filterText.length,e.session.remove(l);var y=e.getSession().getTextRange(new Yd(d.start.row,d.start.column,d.end.row,99999));if(y){var w=y.match(/^([a-zA-Z0-9]+)\{/);if(w){var x=w[1];d.end.column+=x.length-f.filterText.length,e.session.remove(d),null!=t.snippet&&(t.snippet=t.snippet.replace(/[{[].*[}\]]/,"")),null!=t.caption&&(t.caption=t.caption.replace(/[{[].*[}\]]/,"")),null!=t.value&&(t.value=t.value.replace(/[{[].*[}\]]/,""))}var _=y.match(/^([\w._-]+)\}(.*)/);if(_){var S=_[1];_[2]&&(d.end.column=d.start.column+S.length+1),e.session.remove(d)}}}}catch(e){r.e(e)}finally{r.f()}t.snippet?Xd.insertSnippet(e,t.snippet):e.execCommand("insertstring",t.value||t)}}}t.prototype._insertMatch.call(this,e)},t.startCommand={name:"startAutocomplete",exec:function(n){n.completer||(n.completer=new t),n.completer.autoInsert=!1,n.completer.autoSelect=!0,n.completer.showPopup(n),n.completer.cancelContextMenu();var r=$(null!=n.completer.popup?n.completer.popup.container:void 0);r.css({"font-size":e.$scope.fontSize+"px"});var a=n.completer.completions&&n.completer.completions.filtered;if(a){var l=C().max(a.map((function(e){return e.caption.length}))),f=C().max(a.map((function(e){return e.meta.length}))),d=n.renderer.characterWidth,h=Math.max(Math.min(Math.round(l*d+f*d+5*d),700),280);r.css({width:"".concat(h,"px")})}0===a.length&&n.completer.detach()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"}),n.retrievePrecedingIdentifier=function(e,t,n){for(var r=0,a=t-1;a<=0;a++)if("\n"===e[a]){r=a+1;break}var l=e.slice(r,t);return Hd.getLastCommandFragment(l)||""}}}],n&&Kd(t.prototype,n),r&&Kd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Qd=Jd,eh=(__webpack_require__(92656),__webpack_require__(3690));function th(e){return th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(e)}function nh(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return rh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rh(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function rh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ih(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==th(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==th(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===th(l)?l:String(l)),r)}var a,l}var oh=new RegExp("\\\\(label|[a-z]{0,16}ref|usepackage|begin|end|[a-z]{0,16}cite|input|include|includegraphics)(\\[[^\\]]*\\])?\\{[^}]*\\}","g"),ah=/\\?(?:['A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])+/g,sh=500,lh=function(){function e(t,n,r,a,l){var f=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onChange=this.onChange.bind(this),this.onSessionChange=this.onSessionChange.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onScroll=this.onScroll.bind(this),this.learnWord=this.learnWord.bind(this),this.$scope=t,this.$http=r,this.$q=a,this.adapter=l,this.$scope.spellMenu={open:!1,top:"0px",left:"0px",suggestions:[]},this.inProgressRequest=null,this.changedLines=[],this.firstCheck=!0,this.$scope.$watch("spellCheckLanguage",(function(e,t){if(e!==t&&null!=t)return f.reInitForLangChange()})),this.$scope.replaceWord=this.adapter.replaceWord,this.$scope.learnWord=this.learnWord,this.cache=n.get("spellCheck-cache")||n("spellCheck-cache",{capacity:15e3}),this.selectedHighlightContents=null,window.addEventListener("learnedWords:reset",(function(){return f.reset()})),window.addEventListener("learnedWords:remove",(function(e){var t=e.detail;return f.removeWordFromCache(t)})),$(document).on("click",(function(e){if(!window._ide.browserIsSafari||!e.ctrlKey)return 3!==e.which&&f.closeContextMenu(),!0}))}var t,n,r;return t=e,n=[{key:"init",value:function(){this.changedLines=Array(this.adapter.getLineCount()).fill(!0),this.firstCheck=!0,this.isSpellCheckEnabled()&&this.runSpellCheckSoon(sh)}},{key:"reset",value:function(){this.adapter.highlightedWordManager.reset(),this.init()}},{key:"reInitForLangChange",value:function(){this.reset()}},{key:"isSpellCheckEnabled",value:function(){return!(!this.$scope.spellCheck||!this.$scope.spellCheckLanguage||""===this.$scope.spellCheckLanguage)}},{key:"onChange",value:function(e){var t=this;this.isSpellCheckEnabled()&&(this.$scope.$applyAsync((function(){t.selectedHighlightContents&&t.selectedHighlightContents!==t.adapter.getSelectionContents()&&t.closeContextMenu()})),this.markLinesAsUpdated(this.adapter.normalizeChangeEvent(e)),this.adapter.highlightedWordManager.clearHighlightTouchingRange(e),this.runSpellCheckSoon(sh))}},{key:"onSessionChange",value:function(){this.adapter.highlightedWordManager.reset(),null!=this.inProgressRequest&&this.inProgressRequest.abort(),this.isSpellCheckEnabled()&&this.runSpellCheckSoon(sh)}},{key:"onContextMenu",value:function(e){this.closeContextMenu(),this.openContextMenu(e)}},{key:"onScroll",value:function(){this.isSpellCheckEnabled()&&this.runSpellCheckSoon(sh),this.closeContextMenu()}},{key:"openContextMenu",value:function(e){var t=this,n=this.adapter.getCoordsFromContextMenuEvent(e),r=this.adapter.getHighlightFromCoords(n),a=this.adapter.isContextMenuEventOnBottomHalf(e);r&&(this.adapter.preventContextMenuEventDefault(e),this.adapter.selectHighlightedWord(r),this.$scope.$applyAsync((function(){t.selectedHighlightContents=t.adapter.getSelectionContents(),t.$scope.spellMenu={open:!0,top:n.y+"px",left:n.x+"px",layoutFromBottom:a,highlight:r}})))}},{key:"closeContextMenu",value:function(){var e=this;(null!=this.$scope?this.$scope.spellMenu:void 0)&&!1!==this.$scope.spellMenu.open&&(this.selectedHighlightContents=null,this.$scope.$applyAsync((function(){e.$scope.spellMenu.open=!1})))}},{key:"removeWordFromCache",value:function(e){var t=this.$scope.spellCheckLanguage;this.cache.remove("".concat(t,":").concat(e))}},{key:"learnWord",value:function(e){this.apiRequest("/learn",{word:e.word}),this.adapter.highlightedWordManager.removeWord(e.word);var t=this.$scope.spellCheckLanguage;this.cache.put("".concat(t,":").concat(e.word),!0),eh.Z.add(e.word)}},{key:"markLinesAsUpdated",value:function(e){var t=this,n=e.start,r=e.end;"insert"===e.action?(this.changedLines[n.row]=!0,function(){for(var e=r.row-n.row;e--;)t.changedLines.splice(n.row,0,!0)}()):"remove"===e.action&&(this.changedLines[n.row]=!0,function(){for(var e=r.row-n.row;e--;)t.changedLines.splice(n.row+1,1)}())}},{key:"runSpellCheckSoon",value:function(e){var t=this;null==e&&(e=1e3),null!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){delete t.timeoutId,t.runSpellCheck()}),e)}},{key:"runSpellCheck",value:function(){var e,t,n,r,a=this,l=this.getRowNumsToCheck(),f=this.$scope.spellCheckLanguage,d=this.getWords(l),h=d.words,p=d.positions,y=[],w={},x=[],_=[];for(t=e=0;e<h.length;e++,t=e){r=h[t],n="".concat(f,":").concat(r),null==w[n]&&(w[n]=this.cache.get(n));var S=w[n];null==S?(x.push(h[t]),_.push(p[t])):!0===S||y.push({column:p[t].column,row:p[t].row,word:r,suggestions:S})}p=_;var k=function(e){null==a.timeoutId&&(a.firstCheck=!1,l.forEach((function(e){a.changedLines[e]=!1,a.adapter.highlightedWordManager.clearRow(e)})),e.map((function(e){return a.adapter.highlightedWordManager.addHighlight(e)})))};(h=x).length?this.inProgressRequest=this.apiRequest("/check",{language:f,words:h,skipLearnedWords:!0},(function(e,l){if(delete a.inProgressRequest,null!=e||null==l||null==l.misspellings)return null;var d,x=[],_=nh(l.misspellings);try{for(_.s();!(d=_.n()).done;){var S=d.value;r=h[S.index];var C=p[S.index];x[S.index]=!0,y.push({column:C.column,row:C.row,word:r,suggestions:S.suggestions}),n="".concat(f,":").concat(r),w[n]||(a.cache.put(n,S.suggestions),w[n]=!0)}}catch(e){_.e(e)}finally{_.f()}for(t=0;t<h.length;t++)r=h[t],x[t]||(n="".concat(f,":").concat(r),w[n]||(a.cache.put(n,!0),w[n]=!0));k(y)})):k(y)}},{key:"apiRequest",value:function(e,t,n){null==n&&(n=function(e,t){e&&console.error(e)}),t.token=window.user.id,t._csrf=window.csrfToken;var r=this.$q.defer(),a={timeout:r.promise};return this.$http.post("/spelling".concat(e),t,a).then((function(e){return n(null,e.data)})).catch((function(e){return n(new Error("api failure"))})),{abort:function(){return r.resolve()}}}},{key:"getWords",value:function(e){for(var t=this.adapter.getLinesByRows(e),n=[],r=[],a=0;a<t.length;a++){var l=t[a],f=e[a];l=this.blankOutBlacklistedCommands(l);var d=void 0;for(ah.lastIndex=0;d=ah.exec(l);){var h=d[0];"\\"!==h.slice(0,1)&&("'"===h[0]&&(h=h.slice(1)),"'"===h[h.length-1]&&(h=h.slice(0,-1)),eh.Z.has(h)||(r.push({row:f,column:d.index}),n.push(h)))}}return{words:n,positions:r}}},{key:"getRowNumsToCheck",value:function(){var e=this.adapter.getFirstVisibleRowNum(),t=this.adapter.getLastVisibleRowNum(),n=e,r=t;if(this.firstCheck){var a=this.adapter.getLineCount()-1,l=t-e+1;n=Math.max(0,e-2*l),r=Math.min(t+2*l,a)}return this.changedLines.reduce((function(e,t,a){return t&&a>=n&&a<=r&&e.push(a),e}),[])}},{key:"blankOutBlacklistedCommands",value:function(e){return e.replace(oh,(function(e){return Array(e.length+1).join(".")}))}}],n&&ih(t.prototype,n),r&&ih(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ch=lh;function uh(e){return uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(e)}function fh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==uh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==uh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===uh(l)?l:String(l)),r)}var a,l}function dh(e,t,n){return t&&fh(e.prototype,t),n&&fh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ph=ace.require("ace/range").Range,mh=dh((function e(t,n,r){hh(this,e),this.markerId=t,this.range=n,this.word=r.word,this.suggestions=r.suggestions})),gh=function(){function e(t){hh(this,e),this.editor=t,this.reset()}return dh(e,[{key:"reset",value:function(){var e=this;return null!=this.highlights&&this.highlights.forEach((function(t){return e.editor.getSession().removeMarker(t.markerId)})),this.highlights=[]}},{key:"addHighlight",value:function(e){var t=this.editor.getSession(),n=t.getDocument(),r=new ph;r.start=n.createAnchor({row:e.row,column:e.column}),r.end=n.createAnchor({row:e.row,column:e.column+e.word.length}),r.end.$insertRight=!0;var a=t.addMarker(r,"spelling-highlight","text",!1);return this.highlights.push(new mh(a,r,e))}},{key:"removeHighlight",value:function(e){return this.editor.getSession().removeMarker(e.markerId),this.highlights=this.highlights.filter((function(t){return t!==e}))}},{key:"removeWord",value:function(e){var t=this;return this.highlights.filter((function(t){return t.word===e})).forEach((function(e){return t.removeHighlight(e)}))}},{key:"clearRow",value:function(e){var t=this;return this.highlights.filter((function(t){return t.range.start.row===e})).forEach((function(e){return t.removeHighlight(e)}))}},{key:"findHighlightWithinRange",value:function(e){var t=this;return C().find(this.highlights,(function(n){return t._doesHighlightOverlapRange(n,e.start,e.end)}))}},{key:"_doesHighlightOverlapRange",value:function(e,t,n){var r=e.range.start.row,a=e.range.start.column,l=e.range.end.column,f=r<t.row||r===t.row&&l<=t.column,d=r>n.row||r===n.row&&a>=n.column;return!(f||d)}},{key:"clearHighlightTouchingRange",value:function(e){var t=this,n=C().find(this.highlights,(function(n){return t._doesHighlightTouchRange(n,e.start,e.end)}));if(n)return this.removeHighlight(n)}},{key:"_doesHighlightTouchRange",value:function(e,t,n){var r=e.range.start.row,a=e.range.start.column,l=e.range.end.column,f=a<=t.column&&l>=t.column,d=a<=n.column&&l>=n.column;return r===t.row&&(f||d)}}]),e}();function vh(e){return vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(e)}function yh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==vh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===vh(l)?l:String(l)),r)}var a,l}var bh=ace.require("ace/range").Range,wh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.replaceWord=this.replaceWord.bind(this),this.editor=t,this.highlightedWordManager=new gh(this.editor)}var t,n,r;return t=e,(n=[{key:"getLines",value:function(){return this.editor.getValue().split("\n")}},{key:"getLineCount",value:function(){return this.editor.session.getLength()}},{key:"getFirstVisibleRowNum",value:function(){return this.editor.renderer.layerConfig.firstRow}},{key:"getLastVisibleRowNum",value:function(){return this.editor.renderer.layerConfig.lastRow}},{key:"getLinesByRows",value:function(e){var t=this;return e.map((function(e){return t.editor.session.doc.getLine(e)}))}},{key:"getSelectionContents",value:function(){return this.editor.getSelectedText()}},{key:"normalizeChangeEvent",value:function(e){return e}},{key:"getCoordsFromContextMenuEvent",value:function(e){return e.domEvent.stopPropagation(),{x:e.domEvent.clientX,y:e.domEvent.clientY}}},{key:"preventContextMenuEventDefault",value:function(e){e.domEvent.preventDefault()}},{key:"getHighlightFromCoords",value:function(e){var t=this.editor.renderer.screenToTextCoordinates(e.x,e.y);return this.highlightedWordManager.findHighlightWithinRange({start:t,end:t})}},{key:"isContextMenuEventOnBottomHalf",value:function(e){var t=e.domEvent.clientY,n=e.target.container.getBoundingClientRect();return(t-n.top)/n.height>.5}},{key:"selectHighlightedWord",value:function(e){var t=e.range.start.row,n=e.range.start.column,r=e.range.end.column;this.editor.getSession().getSelection().setSelectionRange(new bh(t,n,t,r))}},{key:"replaceWord",value:function(e,t){var n=e.range.start.row,r=e.range.start.column,a=e.range.end.column;this.editor.getSession().replace(new bh(n,r,n,a),t),this.editor.focus()}}])&&yh(t.prototype,n),r&&yh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),xh=__webpack_require__(79174),_h=__webpack_require__.n(xh);function Sh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ch={getColorScheme:function(e,t){return this.isDarkTheme(t)?{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 100%, 28%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 100%, 20%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 100%, 60%);")}:{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 70%, 85%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 70%, 95%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 70%, 40%);")}},isDarkTheme:function(e){var t=e.find(".ace_editor").css("background-color"),n=Sh(Array.from(t.match(/rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)/)),4),r=(n[0],n[1]),a=n[2],l=n[3];return(r=parseInt(r,10))+(a=parseInt(a,10))+(l=parseInt(l,10))<384},ANONYMOUS_HUE:100,OWN_HUE:200,OWN_HUE_BLOCKED_SIZE:20,TOTAL_HUES:360,getHueForUserId:function(e){if(null==e||"anonymous-user"===e)return this.ANONYMOUS_HUE;if(window.user.id===e)return this.OWN_HUE;var t=this.getHueForId(e);return t>this.OWN_HUE-this.OWN_HUE_BLOCKED_SIZE&&t<this.OWN_HUE+this.OWN_HUE_BLOCKED_SIZE&&(t=(t-=this.OWN_HUE)+this.TOTAL_HUES-this.OWN_HUE_BLOCKED_SIZE),t},getHueForTagId:function(e){return this.getHueForId(e)},getHueForId:function(e){var t=_h()(e);return parseInt(t.toString().slice(0,8),16)%(this.TOTAL_HUES-2*this.OWN_HUE_BLOCKED_SIZE)}};function Eh(e){return Eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(e)}function Oh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Eh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Eh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Eh(l)?l:String(l)),r)}var a,l}var jh=ace.require("ace/range").Range,$h=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=t,this.editor=n,this.element=r,this.markerIds=[],this.labels=[],this.$scope.annotationLabel={show:!1,right:"auto",left:"auto",top:"auto",bottom:"auto",backgroundColor:"black",text:""},this.$scope.updateLabels={updatesAbove:0,updatesBelow:0},this.$scope.$watch("highlights",(function(e){return a.redrawAnnotations()})),this.$scope.$watch("theme",(function(e){return a.redrawAnnotations()})),this.editor.on("mousemove",(function(e){var t=a.editor.renderer.screenToTextCoordinates(e.clientX,e.clientY);return e.position=t,a.showAnnotationLabels(t)}));var l=function(){return a.updateShowMoreLabels()};this.editor.getSession().on("changeScrollTop",l),this.$scope.$watch("text",(function(){if(a.$scope.navigateHighlights)return setTimeout((function(){return a.scrollToFirstHighlight()}),0)})),this.editor.on("changeSession",(function(e){return null!=e.oldSession&&e.oldSession.off("changeScrollTop",l),e.session.on("changeScrollTop",l),a.redrawAnnotations()})),this.$scope.gotoHighlightBelow=function(){if(null!=a.firstHiddenHighlightAfter)return a.editor.scrollToLine(a.firstHiddenHighlightAfter.end.row,!0,!1)},this.$scope.gotoHighlightAbove=function(){if(null!=a.lastHiddenHighlightBefore)return a.editor.scrollToLine(a.lastHiddenHighlightBefore.start.row,!0,!1)}}var t,n,r;return t=e,n=[{key:"redrawAnnotations",value:function(){var e=this;this._clearMarkers(),this._clearLabels();for(var t=0,n=Array.from(this.$scope.highlights||[]);t<n.length;t++)!function(t){var n=Ch.getColorScheme(t.hue,e.element);null!=t.cursor?(e.labels.push({text:t.label,range:new jh(t.cursor.row,t.cursor.column,t.cursor.row,t.cursor.column+1),colorScheme:n,snapToStartOfRange:!0}),e._drawCursor(t,n)):null!=t.highlight?(e.labels.push({text:t.label,range:new jh(t.highlight.start.row,t.highlight.start.column,t.highlight.end.row,t.highlight.end.column),colorScheme:n}),e._drawHighlight(t,n)):null!=t.strikeThrough&&(e.labels.push({text:t.label,range:new jh(t.strikeThrough.start.row,t.strikeThrough.start.column,t.strikeThrough.end.row,t.strikeThrough.end.column),colorScheme:n}),e._drawStrikeThrough(t,n))}(n[t]);return this.updateShowMoreLabels()}},{key:"showAnnotationLabels",value:function(e){for(var t,n,r=this,a=null,l=0,f=Array.from(this.labels||[]);l<f.length;l++){var d=f[l];d.range.contains(e.row,e.column)&&(a=d)}if(null!=a){var h,p,y,w,x,_=$(this.editor.renderer.container).find(".ace_scroller");_.append(this.element.find(".annotation-label")),p=a.snapToStartOfRange?this.editor.renderer.textToScreenCoordinates(a.range.start.row,a.range.start.column):this.editor.renderer.textToScreenCoordinates(e.row,e.column);var S=_.offset(),k=_.height();p.pageX=p.pageX-S.left,p.pageY=p.pageY-S.top,p.pageY>2*this.editor.renderer.lineHeight?(x="auto",h=k-p.pageY):(x=p.pageY+this.editor.renderer.lineHeight,h="auto"),this.$scope.$apply((function(){return r.$scope.annotationLabel.text=a.text,r.$scope.annotationLabel.show=!0}));var C=this.element.find(".annotation-label");return p.pageX+C.outerWidth()<_.width()?(y=p.pageX,w="auto"):(w=0,y="auto"),this.$scope.$apply((function(){return r.$scope.annotationLabel={show:!0,left:y,right:w,bottom:h,top:x,backgroundColor:a.colorScheme.labelBackgroundColor,text:a.text}}))}if(!1!==(t=null!=this.$scope?this.$scope.annotationLabel:void 0,n=function(e){return e.show},null!=t?n(t):void 0))return this.$scope.$apply((function(){return r.$scope.annotationLabel.show=!1}))}},{key:"updateShowMoreLabels",value:function(){var e=this;if(this.$scope.navigateHighlights)return setTimeout((function(){var t=e.editor.getFirstVisibleRow(),n=e.editor.getLastVisibleRow(),r=0,a=0;e.lastHiddenHighlightBefore=null,e.firstHiddenHighlightAfter=null;for(var l=0,f=Array.from(e.$scope.highlights||[]);l<f.length;l++){var d=f[l],h=d.highlight||d.strikeThrough;null!=h&&(h.start.row<t&&(r+=1,e.lastHiddenHighlightBefore=h),h.end.row>n&&(a+=1,e.firstHiddenHighlightAfter||(e.firstHiddenHighlightAfter=h)))}return e.$scope.$apply((function(){return e.$scope.updateLabels={highlightsBefore:r,highlightsAfter:a}}))}),100)}},{key:"scrollToFirstHighlight",value:function(){var e=this;return function(){for(var t=0,n=Array.from(e.$scope.highlights||[]);t<n.length;t++){var r=n[t],a=r.highlight||r.strikeThrough;if(null!=a){e.editor.scrollToLine(a.start.row,!0,!1);break}}return[]}()}},{key:"_clearMarkers",value:function(){for(var e=0,t=Array.from(this.markerIds);e<t.length;e++){var n=t[e];this.editor.getSession().removeMarker(n)}return this.markerIds=[]}},{key:"_clearLabels",value:function(){return this.labels=[]}},{key:"_drawCursor",value:function(e,t){return this._addMarkerWithCustomStyle(new jh(e.cursor.row,e.cursor.column,e.cursor.row,e.cursor.column+1),"annotation remote-cursor",!1,"border-color: ".concat(t.cursor,";"))}},{key:"_drawHighlight",value:function(e,t){return this._addMarkerWithCustomStyle(new jh(e.highlight.start.row,e.highlight.start.column,e.highlight.end.row,e.highlight.end.column),"annotation highlight",!1,"background-color: ".concat(t.highlightBackgroundColor))}},{key:"_drawStrikeThrough",value:function(e,t){return this._addMarkerWithCustomStyle(new jh(e.strikeThrough.start.row,e.strikeThrough.start.column,e.strikeThrough.end.row,e.strikeThrough.end.column),"annotation strike-through-background",!1,"background-color: ".concat(t.strikeThroughBackgroundColor)),this._addMarkerWithCustomStyle(new jh(e.strikeThrough.start.row,e.strikeThrough.start.column,e.strikeThrough.end.row,e.strikeThrough.end.column),"annotation strike-through-foreground",!0,"color: ".concat(t.strikeThroughForegroundColor,";"))}},{key:"_addMarkerWithCustomStyle",value:function(e,t,n,r){var a;return a=n?this.editor.renderer.$markerFront:this.editor.renderer.$markerBack,this.markerIds.push(this.editor.getSession().addMarker(e,t,(function(e,n,l,f,d){return n.isMultiLine()?a.drawTextMarker(e,n,t,d,r):a.drawSingleLineMarker(e,n,"".concat(t," ace_start"),d,0,r)}),n))}}],n&&Oh(t.prototype,n),r&&Oh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Th(e){return Th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(e)}function Ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Th(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Th(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Th(l)?l:String(l)),r)}var a,l}var Ph,Dh=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storePositionAndLine=this.storePositionAndLine.bind(this),this.jumpToPositionInNewDoc=this.jumpToPositionInNewDoc.bind(this),this.onUnload=this.onUnload.bind(this),this.onCursorChange=this.onCursorChange.bind(this),this.onSyncToPdf=this.onSyncToPdf.bind(this),this.$scope=t,this.adapter=n,this.localStorage=r,this.$scope.$on("editorInit",this.jumpToPositionInNewDoc),this.$scope.$on("store-doc-position",this.storePositionAndLine),this.$scope.$on("afterChangeDocument",this.jumpToPositionInNewDoc),this.$scope.$on("changeEditor",this.storePositionAndLine),this.$scope.$on("".concat(this.$scope.name,":gotoLine"),(function(e,t,n,r){if(null!=t)return setTimeout((function(){a.adapter.gotoLine(t,n),r&&a.onSyncToPdf()}),10)})),this.$scope.$on("".concat(this.$scope.name,":gotoOffset"),(function(e,t){if(null!=t)return setTimeout((function(){return a.adapter.gotoOffset(t)}),10)})),this.$scope.$on("".concat(this.$scope.name,":clearSelection"),(function(e){return a.adapter.clearSelection()}))}var t,n,r;return t=e,(n=[{key:"storePositionAndLine",value:function(){return this.storeCursorPosition(),this.storeFirstVisibleLine()}},{key:"jumpToPositionInNewDoc",value:function(){var e=this;return this.doc_id=null!=this.$scope.sharejsDoc?this.$scope.sharejsDoc.doc_id:void 0,setTimeout((function(){return e.gotoStoredPosition()}),0)}},{key:"onUnload",value:function(){return this.storeCursorPosition(),this.storeFirstVisibleLine()}},{key:"onCursorChange",value:function(){return this.emitCursorUpdateEvent()}},{key:"onSyncToPdf",value:function(){return this.$scope.$emit("cursor:".concat(this.$scope.name,":syncToPdf"))}},{key:"storeFirstVisibleLine",value:function(){if(null!=this.doc_id){var e=this.localStorage("doc.position.".concat(this.doc_id))||{};return e.firstVisibleLine=this.adapter.getEditorScrollPosition(),this.localStorage("doc.position.".concat(this.doc_id),e)}}},{key:"storeCursorPosition",value:function(){if(null!=this.doc_id){var e=this.localStorage("doc.position.".concat(this.doc_id))||{};return e.cursorPosition=this.adapter.getCursor(),this.localStorage("doc.position.".concat(this.doc_id),e)}}},{key:"emitCursorUpdateEvent",value:function(){var e=this.adapter.getCursor();this.$scope.$emit("cursor:".concat(this.$scope.name,":update"),e),window.dispatchEvent(new CustomEvent("cursor:".concat(this.$scope.name,":update"),{detail:e}))}},{key:"gotoStoredPosition",value:function(){if(null!=this.doc_id){var e=this.localStorage("doc.position.".concat(this.doc_id))||{};this.adapter.setCursor(e),this.adapter.setEditorScrollPosition(e),this.adapter.focus()}}}])&&Ah(t.prototype,n),r&&Ah(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Rh=Ph={rangeToShareJs:function(e,t){for(var n=0,r=0;r<t.length;r++){var a=t[r];n+=r<e.row?a.length:e.column}return n+=e.row},changeToShareJs:function(e,t){var n=Ph.rangeToShareJs(e.start,t),r=e.lines.join("\n");switch(e.action){case"insert":return{i:r,p:n};case"remove":return{d:r,p:n};default:throw new Error("unknown action: ".concat(e.action))}},shareJsOffsetToRowColumn:function(e,t){var n=0;for(n=0;n<t.length;n++){if(e<=t[n].length)break;e-=t[n].length+1}return{row:n,column:e}}};function Ih(e){return Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(e)}function Mh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Ih(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ih(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Ih(l)?l:String(l)),r)}var a,l}var Lh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=t}var t,n,r;return t=e,(n=[{key:"getCursor",value:function(){return this.editor.getCursorPosition()}},{key:"getEditorScrollPosition",value:function(){return this.editor.getFirstVisibleRow()}},{key:"setCursor",value:function(e){return e=e.cursorPosition||{row:0,column:0},this.editor.moveCursorToPosition(e)}},{key:"setEditorScrollPosition",value:function(e){return e=e.firstVisibleLine||0,this.editor.scrollToLine(e)}},{key:"clearSelection",value:function(){return this.editor.selection.clearSelection()}},{key:"gotoLine",value:function(e,t){return this.editor.gotoLine(e,t),this.editor.scrollToLine(e,!0,!0),this.editor.focus()}},{key:"gotoOffset",value:function(e){var t=this.editor.getSession().getDocument().getAllLines(),n=Rh.shareJsOffsetToRowColumn(e,t);return this.gotoLine(n.row+1,n.column)}},{key:"focus",value:function(){this.editor.focus()}}])&&Mh(t.prototype,n),r&&Mh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();__webpack_require__(6710);function Nh(e){return Nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(e)}function Fh(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qh(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function qh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Nh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Nh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Nh(l)?l:String(l)),r)}var a,l}var Uh=ace.require("ace/range").Range,Hh=function(){function e(t,n,r,a){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._doneUpdateThisLoop=!1,this._pendingUpdates=!1,this.onChangeSession=this.onChangeSession.bind(this),this.onChangeSelection=this.onChangeSelection.bind(this),this.onCut=this.onCut.bind(this),this.onPaste=this.onPaste.bind(this),this.onResize=this.onResize.bind(this),this.tearDown=this.tearDown.bind(this),this.$scope=t,this.editor=n,this.element=r,this.adapter=a,this._scrollTimeout=null,this.changingSelection=!1,null==window.trackChangesManager&&(window.trackChangesManager=this),this.$scope.$watch("trackChanges",(function(e){null!=e&&l.setTrackChanges(e)})),this.$scope.$watch("sharejsDoc",(function(e,t){null!=e&&(null!=t&&l.disconnectFromDoc(t),l.setTrackChanges(l.$scope.trackChanges),l.connectToDoc(e))})),this.$scope.$on("comment:add",(function(e,t,n,r){l.addCommentToSelection(t,n,r)})),this.$scope.$on("comment:select_line",(function(e){l.selectLineIfNoSelection()})),this.$scope.$on("changes:accept",(function(e,t){l.acceptChangeIds(t)})),this.$scope.$on("changes:reject",(function(e,t){l.rejectChangeIds(t)})),this.$scope.$on("comment:remove",(function(e,t){l.removeCommentId(t)})),this.$scope.$on("comment:resolve_threads",(function(e,t){l.hideCommentsByThreadIds(t)})),this.$scope.$on("comment:unresolve_thread",(function(e,t){l.showCommentByThreadId(t)})),this.$scope.$on("review-panel:recalculate-screen-positions",(function(){l.recalculateReviewEntriesScreenPositions()})),this._resetCutState()}var t,n,r;return t=e,n=[{key:"onChangeSession",value:function(e){this.clearAnnotations(),this.redrawAnnotations(),this.editor&&this.editor.session.on("changeScrollTop",this.onChangeScroll.bind(this))}},{key:"onChangeScroll",value:function(){var e=this;if(null==this._scrollTimeout)return this._scrollTimeout=setTimeout((function(){return e.recalculateVisibleEntries(),e.$scope.$apply(),e._scrollTimeout=null}),200)}},{key:"onChangeSelection",value:function(){var e=this;if(!this.changingSelection)return this.changingSelection=!0,this.$scope.$evalAsync((function(){return e.changingSelection=!1,e.updateFocus()}))}},{key:"onResize",value:function(){this.recalculateReviewEntriesScreenPositions()}},{key:"connectToDoc",value:function(e){var t=this;this.rangesTracker=e.ranges,this.setTrackChanges(this.$scope.trackChanges),e.on("ranges:dirty",(function(){t.updateAnnotations()})),e.on("ranges:clear",(function(){t.clearAnnotations()})),e.on("ranges:redraw",(function(){t.redrawAnnotations()}))}},{key:"disconnectFromDoc",value:function(e){e.off("ranges:clear"),e.off("ranges:redraw"),e.off("ranges:dirty")}},{key:"tearDown",value:function(){this.adapter.tearDown()}},{key:"setTrackChanges",value:function(e){e?null!=this.$scope.sharejsDoc&&(this.$scope.sharejsDoc.track_changes_as=window.user.id||"anonymous"):null!=this.$scope.sharejsDoc&&(this.$scope.sharejsDoc.track_changes_as=null)}},{key:"clearAnnotations",value:function(){this.adapter.clearAnnotations()}},{key:"redrawAnnotations",value:function(){for(var e=this,t=0,n=Array.from(this.rangesTracker.changes);t<n.length;t++){var r=n[t];null!=r.op.i?this.adapter.onInsertAdded(r):null!=r.op.d&&this.adapter.onDeleteAdded(r)}Array.from(this.rangesTracker.comments).forEach((function(t){e.isCommentResolved(t)||e.adapter.onCommentAdded(t)})),this.broadcastChange()}},{key:"updateAnnotations",value:function(){var e=this;if(!this._doneUpdateThisLoop)return this._doUpdateAnnotations(),this._doneUpdateThisLoop=!0,setTimeout((function(){e._pendingUpdates&&e._doUpdateAnnotations(),e._doneUpdateThisLoop=!1,e._pendingUpdates=!1}));this._pendingUpdates=!0}},{key:"_doUpdateAnnotations",value:function(){var e,t,n=this.rangesTracker.getDirtyState(),r=!1;for(var a in n.change.added)null!=(e=n.change.added[a]).op.i?this.adapter.onInsertAdded(e):null!=e.op.d&&this.adapter.onDeleteAdded(e);for(var l in n.change.removed)null!=(e=n.change.removed[l]).op.i?this.adapter.onInsertRemoved(e):null!=e.op.d&&this.adapter.onDeleteRemoved(e);for(var f in n.change.moved)e=n.change.moved[f],r=!0,this.adapter.onChangeMoved(e);for(var d in n.comment.added)t=n.comment.added[d],this.isCommentResolved(t)||this.adapter.onCommentAdded(t);for(var h in n.comment.removed)t=n.comment.removed[h],this.isCommentResolved(t)||this.adapter.onCommentRemoved(t);for(var p in n.comment.moved)t=n.comment.moved[p],this.adapter.onCommentMoved&&!this.isCommentResolved(t)&&(r=!0,this.adapter.onCommentMoved(t));this.editor||(r=!1),this.rangesTracker.resetDirtyState(),r&&this.editor.renderer.updateBackMarkers(),this.broadcastChange()}},{key:"addComment",value:function(e,t,n){var r={c:t,p:e,t:n};this.$scope.sharejsDoc.submitOp(r)}},{key:"addCommentToSelection",value:function(e,t,n){var r=this.adapter.shareJsOffsetToRowColumn(t),a=this.adapter.shareJsOffsetToRowColumn(t+n),l=new Uh(r.row,r.column,a.row,a.column),f=this.editor.session.getTextRange(l);this.addComment(t,f,e)}},{key:"isCommentResolved",value:function(e){return this.rangesTracker.resolvedThreadIds[e.op.t]}},{key:"selectLineIfNoSelection",value:function(){this.editor.selection.isEmpty()&&this.editor.selection.selectLine()}},{key:"acceptChangeIds",value:function(e){this.rangesTracker.removeChangeIds(e),this.updateAnnotations(),this.updateFocus()}},{key:"rejectChangeIds",value:function(e){var t=this,n=this.rangesTracker.getChanges(e);if(0!==n.length){n.sort((function(e,t){return t.op.p-e.op.p}));for(var r=this.editor.getSession(),a=0,l=Array.from(n);a<l.length;a++){var f=l[a];if(null!=f.op.d){var d=f.op.d,h=this.adapter.shareJsOffsetToRowColumn(f.op.p);r.$fromReject=!0,r.insert(h,d),r.$fromReject=!1}else{if(null==f.op.i)throw new Error("unknown change: ".concat(JSON.stringify(f)));var p=this.adapter.shareJsOffsetToRowColumn(f.op.p),y=this.adapter.shareJsOffsetToRowColumn(f.op.p+f.op.i.length),w=r.getDocument().getTextRange({start:p,end:y});if(w!==f.op.i)throw new Error("Op to be removed (".concat(JSON.stringify(f.op),"), does not match editor text, '").concat(w,"'"));r.$fromReject=!0,r.remove({start:p,end:y}),r.$fromReject=!1}}setTimeout((function(){return t.updateFocus()}))}}},{key:"removeCommentId",value:function(e){return this.rangesTracker.removeCommentId(e),this.updateAnnotations()}},{key:"hideCommentsByThreadIds",value:function(e){for(var t={},n=this.rangesTracker.comments||[],r=0,a=Array.from(e);r<a.length;r++)t[a[r]]=!0;var l,f=Fh(n);try{for(f.s();!(l=f.n()).done;){var d=l.value;t[d.op.t]&&this.adapter.onCommentRemoved(d)}}catch(e){f.e(e)}finally{f.f()}return this.broadcastChange()}},{key:"showCommentByThreadId",value:function(e){var t,n=Fh(this.rangesTracker.comments||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.op.t!==e||this.isCommentResolved(r)||this.adapter.onCommentAdded(r)}}catch(e){n.e(e)}finally{n.f()}return this.broadcastChange()}},{key:"_resetCutState",value:function(){return this._cutState={text:null,comments:[],docId:null}}},{key:"onCut",value:function(){var e=this;this._resetCutState();var t=this.editor.getSelectionRange(),n=this._rangeToShareJs(t.start),r=this._rangeToShareJs(t.end);return this._cutState.text=this.editor.getSelectedText(),this._cutState.docId=this.$scope.docId,function(){for(var t=[],a=0,l=Array.from(e.rangesTracker.comments);a<l.length;a++){var f=l[a],d=f.op.p,h=d+f.op.c.length;n<=d&&h<=r?t.push(e._cutState.comments.push({offset:f.op.p-n,text:f.op.c,comment:f})):t.push(void 0)}return t}()}},{key:"onPaste",value:function(){var e=this;this.editor.once("change",(function(t){if("insert"===t.action){var n=t.lines.join("\n"),r=e._rangeToShareJs(t.start);e.$scope.sharejsDoc.on("ranges:dirty.paste",(function(){if(e.$scope.sharejsDoc.off("ranges:dirty.paste"),n===e._cutState.text&&e.$scope.docId===e._cutState.docId)for(var t=0,a=Array.from(e._cutState.comments);t<a.length;t++){var l=a[t],f=l.comment,d=l.offset,h={c:l.text,p:r+d,t:f.id};e.$scope.sharejsDoc.submitOp(h)}e._resetCutState(),e.rangesTracker.validate(e.editor.getValue())}))}}))}},{key:"checkMapping",value:function(){var e,t,n,r,a,l,f=this.editor.getSession(),d={},h=f.getMarkers();for(var p in h)r=h[p],d[p]=r;for(var y=[],w=0,x=Array.from(this.rangesTracker.changes);w<x.length;w++){var _=x[w];if(null!=this.adapter.changeIdToMarkerIdMap[_.id]){a=_.op;var S=this.adapter.changeIdToMarkerIdMap[_.id];e=S.background_marker_id,t=S.callout_marker_id,l=this.adapter.shareJsOffsetToRowColumn(a.p),null!=a.i?n=this.adapter.shareJsOffsetToRowColumn(a.p+a.i.length):null!=a.d&&(n=l),y.push({marker_id:e,start:l,end:n}),y.push({marker_id:t,start:l,end:l})}}for(var k=0,C=Array.from(this.rangesTracker.comments);k<C.length;k++){var E=C[k];if(null!=this.adapter.changeIdToMarkerIdMap[E.id]){var O=this.adapter.changeIdToMarkerIdMap[E.id];e=O.background_marker_id,t=O.callout_marker_id,l=this.adapter.shareJsOffsetToRowColumn(E.op.p),n=this.adapter.shareJsOffsetToRowColumn(E.op.p+E.op.c.length),y.push({marker_id:e,start:l,end:n}),y.push({marker_id:t,start:l,end:l})}}for(var j=0,T=Array.from(y);j<T.length;j++){var A=T[j],P=A.marker_id,D=A.start,R=A.end;r=d[P],delete d[P],r.range.start.row===D.row&&r.range.start.column===D.column&&r.range.end.row===R.row&&r.range.end.column===R.column||console.error("Change doesn't match marker anymore",{marker:r,start:D,end:R})}return function(){var e=[];for(var t in d)r=d[t],/track-changes/.test(r.clazz)?e.push(console.error("Orphaned ace marker",r)):e.push(void 0);return e}()}},{key:"broadcastChange",value:function(){this.$scope.$emit("editor:track-changes:changed",this.$scope.docId)}},{key:"recalculateReviewEntriesScreenPositions",value:function(){if(this.editor){var e=this.editor.getSession(),t=this.editor.renderer,n=this._getCurrentDocEntries()||{};for(var r in n){var a=n[r],l=this.adapter.shareJsOffsetToRowColumn(a.offset),f=e.documentToScreenPosition(l.row,l.column).row*t.lineHeight;null==a.screenPos&&(a.screenPos={}),a.screenPos.y=f,a.docPos=l}this.recalculateVisibleEntries(),this.$scope.$apply()}}},{key:"recalculateVisibleEntries",value:function(){var e=this.editor.renderer.layerConfig,t=e.firstRow,n=e.lastRow,r=this._getCurrentDocEntries()||{},a=Object.keys(r).length,l=!1;for(var f in r){var d=r[f],h=d.visible;d.visible=a<100||t-20<=d.docPos.row&&d.docPos.row<=n+20,d.visible!==h&&(l=!0)}l&&this.$scope.$emit("editor:track-changes:visibility_changed")}},{key:"_getCurrentDocEntries",value:function(){var e=this.$scope.docId;return this.$scope.reviewPanel.entries[e]||{}}},{key:"updateFocus",value:function(){if(this.editor){var e=this.editor.getSelectionRange(),t=this._rangeToShareJs(e.start),n=this._rangeToShareJs(e.end),r=t!==n;this.$scope.$emit("editor:focus:changed",t,n,r)}}},{key:"_rangeToShareJs",value:function(e){var t=this.editor.getSession().getDocument().getLines(0,e.row);return Rh.rangeToShareJs(e,t)}},{key:"_changeToShareJs",value:function(e){var t=this.editor.getSession().getDocument().getLines(0,e.start.row);return Rh.changeToShareJs(e,t)}}],n&&Bh(t.prototype,n),r&&Bh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),zh=Hh;function Vh(e){return Vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(e)}function Wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Vh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Vh(l)?l:String(l)),r)}var a,l}var Zh=ace.require("ace/range").Range,Gh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=t,this.changeIdToMarkerIdMap={}}var t,n,r;return t=e,(n=[{key:"tearDown",value:function(){this.changeIdToMarkerIdMap={}}},{key:"clearAnnotations",value:function(){var e=this.editor.getSession();for(var t in this.changeIdToMarkerIdMap){var n=this.changeIdToMarkerIdMap[t];for(var r in n){var a=n[r];e.removeMarker(a)}}this.changeIdToMarkerIdMap={}}},{key:"onInsertAdded",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.i.length),r=this.editor.getSession(),a=new Zh(t.row,t.column,n.row,n.column),l=r.addMarker(a,"track-changes-marker track-changes-added-marker","text"),f=this.createCalloutMarker(t,"track-changes-added-marker-callout");this.changeIdToMarkerIdMap[e.id]={background_marker_id:l,callout_marker_id:f}}},{key:"onDeleteAdded",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.editor.getSession(),r=this.editor.renderer.$markerBack,a="track-changes-marker track-changes-deleted-marker",l=this.makeZeroWidthRange(t),f=n.addMarker(l,a,(function(e,t,n,l,f){return r.drawSingleLineMarker(e,t,"".concat(a," ace_start"),f,0,"")})),d=this.createCalloutMarker(t,"track-changes-deleted-marker-callout");this.changeIdToMarkerIdMap[e.id]={background_marker_id:f,callout_marker_id:d}}},{key:"onInsertRemoved",value:function(e){if(null!=this.changeIdToMarkerIdMap[e.id]){var t=this.changeIdToMarkerIdMap[e.id],n=t.background_marker_id,r=t.callout_marker_id;delete this.changeIdToMarkerIdMap[e.id];var a=this.editor.getSession();a.removeMarker(n),a.removeMarker(r)}}},{key:"onDeleteRemoved",value:function(e){if(null!=this.changeIdToMarkerIdMap[e.id]){var t=this.changeIdToMarkerIdMap[e.id],n=t.background_marker_id,r=t.callout_marker_id;delete this.changeIdToMarkerIdMap[e.id];var a=this.editor.getSession();a.removeMarker(n),a.removeMarker(r)}}},{key:"onChangeMoved",value:function(e){var t,n=this.shareJsOffsetToRowColumn(e.op.p);t=null!=e.op.i?this.shareJsOffsetToRowColumn(e.op.p+e.op.i.length):n,this.updateMarker(e.id,n,t)}},{key:"onCommentAdded",value:function(e){if(null==this.changeIdToMarkerIdMap[e.id]){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.c.length),r=this.editor.getSession(),a=new Zh(t.row,t.column,n.row,n.column),l=r.addMarker(a,"track-changes-marker track-changes-comment-marker","text"),f=this.createCalloutMarker(t,"track-changes-comment-marker-callout");this.changeIdToMarkerIdMap[e.id]={background_marker_id:l,callout_marker_id:f}}}},{key:"onCommentMoved",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.c.length);this.updateMarker(e.id,t,n)}},{key:"onCommentRemoved",value:function(e){if(null!=this.changeIdToMarkerIdMap[e.id]){var t=this.changeIdToMarkerIdMap[e.id],n=t.background_marker_id,r=t.callout_marker_id;delete this.changeIdToMarkerIdMap[e.id];var a=this.editor.getSession();a.removeMarker(n),a.removeMarker(r)}}},{key:"updateMarker",value:function(e,t,n){if(null!=this.changeIdToMarkerIdMap[e]){var r=this.editor.getSession().getMarkers(),a=this.changeIdToMarkerIdMap[e],l=a.background_marker_id,f=a.callout_marker_id;if(null!=l&&null!=r[l]){var d=r[l];d.range.start=t,d.range.end=n}if(null!=f&&null!=r[f]){var h=r[f];h.range.start=t,h.range.end=t}}}},{key:"shareJsOffsetToRowColumn",value:function(e){var t=this.editor.getSession().getDocument().getAllLines();return Rh.shareJsOffsetToRowColumn(e,t)}},{key:"createCalloutMarker",value:function(e,t){var n=this.editor.getSession(),r=this.makeZeroWidthRange(e),a=this.editor.renderer.$markerBack;return n.addMarker(r,t,(function(e,n,r,l,f){return a.drawSingleLineMarker(e,n,"track-changes-marker-callout ".concat(t," ace_start"),f,0,"width: auto; right: 0;")}))}},{key:"makeZeroWidthRange",value:function(e){var t=new Zh(e.row,e.column,e.row,e.column);return t.clipRows=function(e,t){return this.isEmpty=function(){return e>this.end.row||t<this.start.row},this},t}}])&&Wh(t.prototype,n),r&&Wh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Kh(e){return Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(e)}function Yh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Kh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Kh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Kh(l)?l:String(l)),r)}var a,l}var Xh=ace.require("ace/range").Range,Jh=function(){function e(t,n,r,a){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$scope=t,this.editor=n,this.element=r,this.Metadata=a,this.debouncer={};var f=function(e){if("remote"!==e.origin&&["remove","insert"].includes(e.action)){l.editor.getCursorPosition();var t=e.end,n=new Xh(t.row,0,t.row,t.column),r=l.editor.getSession().getTextRange(n);"%"!==r.trim()&&"\\"!==r.slice(0,1)||(n=new Xh(t.row,0,t.row,t.column+80),r=l.editor.getSession().getTextRange(n));var a=function(e){var t;return(t=e.match(/(\\[^\\]+)$/))?t[1]:null}(r),f=C().some(e.lines,(function(e){return e.match(/^\\usepackage(?:\[.{0,80}?])?{(.{0,80}?)}/)})),d=C().some(e.lines,(function(e){return e.match(/^\\RequirePackage(?:\[.{0,80}?])?{(.{0,80}?)}/)})),h=C().some(e.lines,(function(e){return e.match(/\\label{(.{0,80}?)}/)})),p=f||h||d,y="\\label{"===(null!=a?a.slice(0,7):void 0),w="\\usepackage"===(null!=a?a.slice(0,11):void 0),x="\\RequirePackage"===(null!=a?a.slice(0,15):void 0);return p||(w||y||x)?l.Metadata.scheduleLoadDocMetaFromServer(l.$scope.docId):void 0}};this.editor.on("changeSession",(function(e){return e.oldSession.off("change",f),e.session.on("change",f)}))}var t,n,r;return t=e,(n=[{key:"getAllLabels",value:function(){return this.Metadata.getAllLabels()}},{key:"getAllPackages",value:function(){return this.Metadata.getAllPackages()}}])&&Yh(t.prototype,n),r&&Yh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();__webpack_require__(80997),__webpack_require__(69516),__webpack_require__(93866),x.Z.factory("metadata",["$http","ide",function(e,t){var n={},r={documents:{}},a={state:r,onBroadcastDocMeta:function(e){null!=e.docId&&null!=e.meta&&(r.documents[e.docId]=e.meta,window.dispatchEvent(new CustomEvent("project:metadata",{detail:r.documents})))},onEntityDeleted:function(e,t){if("doc"===t.type)return delete r.documents[t.id]},getAllLabels:function(){return C().flattenDeep(function(){var e=[];for(var t in r.documents){var n=r.documents[t];e.push(n.labels)}return e}())},getAllPackages:function(){var e={};for(var t in r.documents){var n=r.documents[t];for(var a in n.packages){var l=n.packages[a];e[a]=l}}return e},loadProjectMetaFromServer:function(){return e.get("/project/".concat(window.project_id,"/metadata")).then((function(e){var t=e.data;if(t.projectMeta)return function(){var e=[];for(var n in t.projectMeta){var a=t.projectMeta[n];e.push(r.documents[n]=a)}return window.dispatchEvent(new CustomEvent("project:metadata",{detail:r.documents})),e}()}))},loadDocMetaFromServer:function(n){return e.post("/project/".concat(window.project_id,"/doc/").concat(n,"/metadata"),{broadcast:t.$scope.onlineUsersCount>0,_csrf:window.csrfToken}).then((function(e){var t=e.data;a.onBroadcastDocMeta(t)}))},scheduleLoadDocMetaFromServer:function(e){if("readOnly"!==t.$scope.permissionsLevel){var r=n[e];return null!=r&&(clearTimeout(r),delete n[e]),n[e]=setTimeout((function(){return a.loadDocMetaFromServer(e),delete n[e]}),2e3)}}};return window.addEventListener("editor:metadata-outdated",(function(){a.scheduleLoadDocMetaFromServer(t.$scope.editor.sharejs_doc.doc_id)})),a}]),x.Z.factory("graphics",["ide",function(e){return{getGraphicsFiles:function(){var t=[];return e.fileTreeManager.forEachEntity((function(e,n,r){if("file"===e.type&&(l=null!=e?e.name:void 0,f="match",d=function(e){return e.match(/.*\.(png|jpg|jpeg|pdf|eps)/i)},null!=l&&"function"==typeof l[f]?d(l,f):void 0)){var a=C().clone(e);return a.path=r,t.push(a)}var l,f,d})),t}}}]);x.Z.factory("preamble",["ide",function(e){var t={getPreambleText:function(){return Qh(e.editorManager.getCurrentDocValue().slice(0,5e3).match(/([^]*)^\\begin\{document\}/m),(function(e){return e[1]}))||""},getGraphicsPaths:function(){for(var e,n=Qh(t.getPreambleText().match(/\\graphicspath\{(.*)\}/),(function(e){return e[1]}))||"",r=[],a=/\{([^}]*)\}/g;e=a.exec(n);)r.push(e[1]);return r}};return t}]);function Qh(e,t){return null!=e?t(e):void 0}x.Z.factory("files",["ide",function(e){return{getTeXFiles:function(){var t=[];return e.fileTreeManager.forEachEntity((function(e,n,r){if("doc"===e.type&&/.*\.(tex|md|txt|tikz)/.test(e.name)){var a=C().clone(e);a.path=r,t.push(a)}})),t}}}]);var ep=__webpack_require__(34097);function tp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return np(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return np(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function np(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rp="Ace-DomUpdate",ip="Ace-Keypress-Measure",op=Date.now(),ap=!1;try{var sp="featureTestMark";performance.mark(sp,{startTime:performance.now(),detail:{test:1}}),performance.clearMarks(sp);var lp="featureTestMeasure";performance.measure(lp,{start:performance.now(),detail:{test:1}}),performance.clearMeasures(lp),ap=!0}catch(e){}var cp=!1;function up(){return performance.memory.usedJSHeapSize}try{"memory"in window.performance&&(up(),cp=!0)}catch(e){}var fp,dp=0,hp=[],pp=null;function mp(){ap&&(++dp,hp.push(performance.now()),pp||(pp=window.requestAnimationFrame((function(){pp=null,performance.mark(rp,{detail:{keypressesSinceDomUpdateCount:dp}}),dp=0;var e,t=performance.now(),n=tp(hp);try{for(n.s();!(e=n.n()).done;){var r=e.value;performance.measure(ip,{start:r,end:t})}}catch(e){n.e(e)}finally{n.f()}hp.length=0}))))}function gp(){var e,t=performance.getEntriesByName(ip,"measure").map((function(e){return e.duration}));performance.clearMeasures(ip);var n=(0,k.round)(function(e){return 0===e.length?0:e.reduce((function(e,t){return e+t}),0)/e.length}(t),2),r=(0,ep.Z)(),a=Math.floor((Date.now()-op)/1e3),l=cp?up():null,f=performance.getEntriesByName(rp,"mark");performance.clearMarks(rp);var d,h=0,p=0,y=0,w=0,x=tp(f);try{for(x.s();!(d=x.n()).done;){var _=d.value.detail.keypressesSinceDomUpdateCount;1===_?++p:_>1&&++h,_>y&&(y=_),w+=_}}catch(e){x.e(e)}finally{x.f()}var S=(0,k.round)(h/(h+p),4),C=(0,k.round)(w/(h+p),4),E=(null===(e=(0,xf.Z)("ol-ExposedSettings"))||void 0===e?void 0:e.sentryRelease)||null;return{numberOfEntries:t.length,meanKeypressPaint:n,grammarly:r,sessionLength:a,memory:l,lags:h,nonLags:p,longestLag:y,meanLagsPerMeasure:S,meanKeypressesPerMeasure:C,release:E}}function vp(e){return function(e){if(Array.isArray(e))return bp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yp(e,t){if(e){if("string"==typeof e)return bp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bp(e,t):void 0}}function bp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window._reportAcePerf=function(){console.log(gp())};var wp=ace.require("ace/edit_session").EditSession,xp=ace.require("ace/ext/modelist"),_p=ace.require("ace/keyboard/vim").Vim,Sp=ace.require("ace/ext/searchbox");""!==window.aceBasePath?(fp=!0,ace.config.set("basePath",window.aceBasePath),ace.config.set("workerPath",window.aceBasePath)):fp=!1,ace.config.setDefaultValue("session","useWorker",!1),null==ace.config._moduleUrl&&(ace.config._moduleUrl=ace.config.moduleUrl,ace.config.moduleUrl=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=ace.config)._moduleUrl.apply(e,vp(Array.from(n||[])))}),x.Z.directive("aceEditor",["ide","$timeout","$compile","$rootScope","eventTracking","localStorage","$cacheFactory","metadata","graphics","preamble","files","$http","$q","$window",function(e,t,n,r,a,l,f,d,h,p,y,w,x,_){return function(e,t){var n='<div class="ace_search right">\n<a href type="button" action="hide" class="ace_searchbtn_close">\n  <i class="fa fa-fw fa-times"></i>\n</a>\n<div class="ace_search_form">\n  <input class="ace_search_field form-control input-sm" placeholder="Search for" spellcheck="false"></input>\n  <div class="btn-group">\n    <button type="button" action="findNext" class="ace_searchbtn next btn btn-default btn-sm">\n      <i class="fa fa-chevron-down fa-fw"></i>\n    </button>\n    <button type="button" action="findPrev" class="ace_searchbtn prev btn btn-default btn-sm">\n      <i class="fa fa-chevron-up fa-fw"></i>\n    </button>\n  </div>\n</div>\n<div class="ace_replace_form">\n  <input class="ace_search_field form-control input-sm" placeholder="Replace with" spellcheck="false"></input>\n  <div class="btn-group">\n    <button type="button" action="replaceAndFindNext" class="ace_replacebtn btn btn-default btn-sm">Replace</button>\n    <button type="button" action="replaceAll" class="ace_replacebtn btn btn-default btn-sm">All</button>\n  </div>\n</div>\n<div class="ace_search_options">\n  <div class="btn-group">\n    <button action="toggleRegexpMode" class="btn btn-default btn-sm" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip="RegExp Search">.*</button>\n    <button action="toggleCaseSensitive" class="btn btn-default btn-sm" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip="CaseSensitive Search">Aa</button>\n    <button action="toggleWholeWords" class="btn btn-default btn-sm" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip="Whole Word Search">"..."</button>\n    <button action="searchInSelection" class="btn btn-default btn-sm" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip="Search Within Selection"><i class="fa fa-align-left"></i></button>\n  </div>\n  <span class="ace_search_counter"></span>\n</div>\n<div action="toggleReplace" class="hidden"></div>\n</div>';$("#ace_searchbox").remove();var r=Sp.SearchBox,a=r.prototype.$init;r.prototype.$init=function(){return this.element=t(n)(e.$new())[0],a.apply(this)}}(r,n),{scope:{theme:"=",showPrintMargin:"=",keybindings:"=",fontSize:"=",autoComplete:"=",autoPairDelimiters:"=",sharejsDoc:"=",spellCheck:"=",spellCheckLanguage:"=",highlights:"=",text:"=",readOnly:"=",annotations:"=",navigateHighlights:"=",fileName:"=",onCtrlEnter:"=",onCtrlJ:"=",onCtrlShiftC:"=",onCtrlShiftA:"=",onSave:"=",syntaxValidation:"=",reviewPanel:"=",eventsBridge:"=",trackChanges:"=",docId:"=",rendererData:"=",lineHeight:"=",fontFamily:"="},link:function(t,n,_){var S;t.$originalApply=t.$apply,t.$apply=function(e){null==e&&(e=function(){});var t=this.$root.$$phase;return"$apply"===t||"$digest"===t?e():this.$originalApply(e)};var k=ace.edit(n.find(".ace-editor-body")[0]);k.$blockScrolling=1/0,"editor"===_.aceEditor&&e.globalEditorWatchdogManager.attachToEditor("Ace",k),k.setOption("behavioursEnabled",t.autoPairDelimiters||!1),k.setOption("wrapBehavioursEnabled",!1),e.$scope.$on("editor:replace-selection",(function(e,t){k.focus();var n,r=k.session.getDocument(),a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yp(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}(k.selection.getAllRanges());try{for(a.s();!(n=a.n()).done;){var l=n.value;r.replace(l,t)}}catch(e){a.e(e)}finally{a.f()}})),e.$scope.$on("symbol-palette-toggled",(function(e,t){t||k.focus()})),e.$scope.$on("galileo-toggled",(function(e,t){t||k.focus()})),t.$watch("autoPairDelimiters",(function(e){return e?k.setOption("behavioursEnabled",!0):k.setOption("behavioursEnabled",!1)})),window._debug_editors||(window._debug_editors=[]),window._debug_editors.push(k),t.name=_.aceEditor,t.spellCheck&&(S=new ch(t,f,w,x,new wh(k)));var E=new bd(k),O=(new $h(t,k,n),new Dh(t,new Lh(k),l)),j=new zh(t,k,n,new Gh(k)),T=new Jh(t,k,n,d),A=(new Qd(t,k,n,T,h,p,y),/[\0\uD800-\uDFFF]/g);k.commands.on("exec",(function(e){e.command&&"paste"===e.command.name&&(A.lastIndex=0,e.args&&A.test(e.args.text)&&(e.args.text=e.args.text.replace(A,"�"))),e.command&&"insertstring"===e.command.name&&(A.lastIndex=0,e.args&&A.test(e.args)&&(e.args=e.args.replace(A,"�")))})),_p.defineEx("write","w",(function(){window.dispatchEvent(new Event("pdf:recompile"))})),k.commands.removeCommand("transposeletters"),k.commands.removeCommand("showSettingsMenu"),k.commands.removeCommand("foldall"),k.commands.removeCommand("toggleBlockComment"),k.commands.removeCommand("togglecomment"),k.commands.addCommand({name:"togglecomment",bindKey:{win:"Ctrl-/|Ctrl-Shift-7",mac:"Command-/|Command-Shift-/"},exec:function(e){return e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"}),k.commands.addCommand({name:"find",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(e){return Sp.Search(e,!0)},readOnly:!0}),k.commands.addCommand({name:"bold",bindKey:{win:"Ctrl-B",mac:"Command-B"},exec:function(e){if(e.getSelection().isEmpty())return e.insert("\\textbf{}"),e.navigateLeft(1);var t=e.getCopyText();return e.insert("\\textbf{".concat(t,"}"))},readOnly:!1}),k.commands.addCommand({name:"italics",bindKey:{win:"Ctrl-I",mac:"Command-I"},exec:function(e){if(e.getSelection().isEmpty())return e.insert("\\textit{}"),e.navigateLeft(1);var t=e.getCopyText();return e.insert("\\textit{".concat(t,"}"))},readOnly:!1}),t.$watch("onCtrlEnter",(function(e){if(null!=e)return k.commands.addCommand({name:"compile",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(t){return e()},readOnly:!0})})),t.$watch("onCtrlJ",(function(e){if(null!=e)return k.commands.addCommand({name:"toggle-review-panel",bindKey:{win:"Ctrl-J",mac:"Command-J"},exec:function(t){return e()},readOnly:!0})})),t.$watch("onCtrlShiftC",(function(e){if(null!=e)return k.commands.addCommand({name:"add-new-comment",bindKey:{win:"Ctrl-Shift-C",mac:"Command-Shift-C"},exec:function(t){return e()},readOnly:!0})})),t.$watch("onCtrlShiftA",(function(e){if(null!=e)return k.commands.addCommand({name:"toggle-track-changes",bindKey:{win:"Ctrl-Shift-A",mac:"Command-Shift-A"},exec:function(t){return e()},readOnly:!0})})),k.showCommandLine=function(e){if("/"===e)return Sp.Search(k,!0)};var P=function(){var e=k.getSession(),t=e.selection.getCursor();return e.documentToScreenPosition(t.row,t.column).row*k.renderer.lineHeight-e.getScrollTop()};if(null!=_.resizeOn)for(var D=0,R=Array.from(_.resizeOn.split(","));D<R.length;D++){var I=R[D];t.$on(I,(function(){t.$applyAsync((function(){var e=P();k.resize();var t=P(),n=k.getSession();return n.setScrollTop(n.getScrollTop()+t-e)}))}))}function M(e,t){var n=!1;if(k.renderer.scrollMargin.top!==e&&(k.renderer.scrollMargin.top=e,n=!0),k.renderer.scrollMargin.bottom!==t&&(k.renderer.scrollMargin.bottom=t,n=!0),n)return k.renderer.updateFull()}t.$on("".concat(t.name,":set-scroll-size"),(function(e,t){var n=t.overflowTop,r=k.renderer.layerConfig.maxHeight;return M(n,Math.max(t.height-r,0))}));t.$watch("theme",(function(e){return k.setTheme("ace/theme/".concat(e))})),t.$watch("showPrintMargin",(function(e){return k.setShowPrintMargin(e)})),t.$watch("keybindings",(function(e){return["vim","emacs"].includes(e)?k.setKeyboardHandler("ace/keyboard/".concat(e)):k.setKeyboardHandler(null)})),t.$watch("fontSize",(function(e){return n.find(".ace_editor, .ace_content").css({"font-size":e+"px"})})),t.$watch("fontFamily",(function(e){if(null!=e)switch(e){case"monaco":return k.setOption("fontFamily",["Monaco","Menlo","Ubuntu Mono","Consolas","monospace"].join(", "));case"lucida":return k.setOption("fontFamily",'"Lucida Console", "Source Code Pro", monospace');default:return k.setOption("fontFamily",null)}})),t.$watch("lineHeight",(function(e){if(null!=e){switch(e){case"compact":k.container.style.lineHeight=1.33;break;case"normal":default:k.container.style.lineHeight=1.6;break;case"wide":k.container.style.lineHeight=2}return k.renderer.updateFontSize()}})),t.$watch("sharejsDoc",(function(e,n){if(null!=n&&(t.$broadcast("beforeChangeDocument"),X(n)),null!=e&&function(e){var n,a=e.getSnapshot().split("\n"),l=k.getSession();null!=l&&l.destroy();try{if(/\.(Rtex|bbl|tikz)$/i.test(t.fileName))n="ace/mode/latex";else if(/\.(sty|cls|clo)$/.test(t.fileName))n="ace/mode/tex";else{"ace/mode/text"===(n=xp.getModeForPath(t.fileName).mode)&&(n="ace/mode/plain_text")}}catch(e){n="ace/mode/plain_text"}(l=new wp(a,n)).setUseWrapMode(!0),null!=t.syntaxValidation&&fp&&!/\.bib$/.test(t.fileName)&&l.setOption("useWorker",t.syntaxValidation);k.setReadOnly(!0),k.setSession(l),f=k.textInput.getElement(),null==f||f.addEventListener("beforeinput",mp),l.getDocument().on("change",N),k.initing=!0,e.attachToAce(k),k.initing=!1,k.setReadOnly(t.readOnly),Y(),t.readOnly||U();var f;z(),W(),void M(0,0),l.setAnnotations(t.annotations),null!=t.eventsBridge&&l.on("changeScrollTop",q);r.hasLintingError=!1,l.on("changeAnnotation",(function(){var e=l.getAnnotations().filter((function(e){return"info"!==e.type&&"compile"!==e.source})).length>0;if(r.hasLintingError!==e)return r.hasLintingError=e})),setTimeout((function(){return q(k.renderer.getScrollTop())})),k.focus()}(e),null!=e&&null!=n)return t.$broadcast("afterChangeDocument")})),t.$watch("text",(function(e){if(null!=e)return k.setValue(e,-1),k.getSession().setUseWrapMode(!0)})),t.$watch("annotations",(function(e){return k.getSession().setAnnotations(e)})),t.$watch("readOnly",(function(e){return k.setReadOnly(!!e)})),t.$watch("syntaxValidation",(function(e){if(null!=e&&fp)return k.getSession().setOption("useWorker",e)})),k.setOption("scrollPastEnd",!0);var L=0,N=function(){return 100===++L&&a.send("editor-interaction","multi-doc-update"),t.$emit("".concat(t.name,":change"))},F=null,q=function(e){if(null!=t.eventsBridge){var n=k.renderer.layerConfig.maxHeight;return function(){var e=k.getFirstVisibleRow();if(e!==F){F=e;var n=k.getLastVisibleRow();t.$emit("scroll:editor:update",Math.floor((e+n)/2))}}(),t.eventsBridge.emit("aceScroll",e,n)}};null!=t.eventsBridge&&(k.renderer.on("scrollbarVisibilityChanged",(function(e,n){if(null!=t.eventsBridge)return t.eventsBridge.emit("aceScrollbarVisibilityChanged",n.scrollBarV.isVisible,n.scrollBarV.width)})),t.eventsBridge.on("externalScroll",(function(e){return k.getSession().setScrollTop(e)})),t.eventsBridge.on("refreshScrollPosition",(function(){var e=k.getSession();return e.setScrollTop(e.getScrollTop()+1),e.setScrollTop(e.getScrollTop()-1)})));var B=function(e){return S.onSessionChange(),null!=e.oldSession&&e.oldSession.getDocument().off("change",S.onChange),e.session.getDocument().on("change",S.onChange),null!=e.oldSession&&e.oldSession.off("changeScrollTop",S.onScroll),e.session.on("changeScrollTop",S.onScroll)},U=function(){if(S)return S.init(),k.on("changeSession",B),B({session:k.getSession()}),k.on("nativecontextmenu",S.onContextMenu)},H=function(){if(S)return k.off("changeSession",B),k.off("nativecontextmenu",S.onContextMenu)},z=function(){j&&(j.rangesTracker=t.sharejsDoc.ranges,j.onChangeSession(),k.on("changeSelection",j.onChangeSelection),k.on("change",j.onChangeSelection),k.on("changeSession",j.onChangeSession),k.on("cut",j.onCut),k.on("paste",j.onPaste),k.renderer.on("resize",j.onResize))},V=function(){j&&(j.tearDown(),k.off("changeSelection",j.onChangeSelection),k.off("change",j.onChangeSelection),k.off("changeSession",j.onChangeSession),k.off("cut",j.onCut),k.off("paste",j.onPaste),k.renderer.off("resize",j.onResize))},W=function(){E.onChangeSession(k.getSession()),k.on("change",E.onChange)},Z=function(){k.off("change",E.onChange)},G=function(e){return null!=e.oldSession&&e.oldSession.selection.off("changeCursor",O.onCursorChange),e.session.selection.on("changeCursor",O.onCursorChange)},K=function(){return O.onUnload(k.getSession())};k.on("changeSession",G),G({session:k.getSession()}),$(window).on("unload",K);var Y=C().once((function(){return t.$broadcast("editorInit")}));function X(e){var t;H(),V(),Z(),null==(t=k.textInput.getElement())||t.removeEventListener("beforeinput",mp),e.detachFromAce(),e.off("remoteop.recordRemote");var n=k.getSession();return n.off("changeScrollTop"),n.getDocument().off("change",N)}return null!=t.rendererData&&k.renderer.on("changeCharacterSize",(function(){t.$apply((function(){return t.rendererData.lineHeight=k.renderer.lineHeight}))})),t.$watch("rendererData",(function(e){if(null!=e)return e.lineHeight=k.renderer.lineHeight})),t.$on("$destroy",(function(){if(null!=t.sharejsDoc){t.$broadcast("changeEditor"),H(),k.off("changeSession",G),$(window).off("unload",K),Z(),X(t.sharejsDoc);var e=k.getSession();return null!=e&&e.destroy(),t.eventsBridge.emit("aceScrollbarVisibilityChanged",!1,0)}})),t.$emit("".concat(t.name,":inited"),k)},template:'<div class="ace-editor-wrapper">\n<div\n  class="undo-conflict-warning alert alert-danger small"\n  ng-show="undo.show_remote_warning"\n>\n  <strong>Watch out!</strong>\n  We had to undo some of your collaborators changes before we could undo yours.\n  <a\n    href="#"\n    class="pull-right"\n    ng-click="undo.show_remote_warning = false"\n  >Dismiss</a>\n</div>\n<div class="ace-editor-body"></div>\n<spell-menu\n  open="spellMenu.open"\n  top="spellMenu.top"\n  left="spellMenu.left"\n  layout-from-bottom="spellMenu.layoutFromBottom"\n  highlight="spellMenu.highlight"\n  replace-word="replaceWord(highlight, suggestion)"\n  learn-word="learnWord(highlight)"\n></spell-menu>\n<div\n  class="annotation-label"\n  ng-show="annotationLabel.show"\n  ng-style="{\n    position: \'absolute\',\n    left:     annotationLabel.left,\n    right:    annotationLabel.right,\n    bottom:   annotationLabel.bottom,\n    top:      annotationLabel.top,\n    \'background-color\': annotationLabel.backgroundColor\n  }"\n>\n  {{ annotationLabel.text }}\n</div>\n\n<a\n  href\n  class="highlights-before-label btn btn-info btn-xs"\n  ng-show="updateLabels.highlightsBefore > 0"\n  ng-click="gotoHighlightAbove()"\n>\n  <i class="fa fa-fw fa-arrow-up"></i>\n  {{ updateLabels.highlightsBefore }} more update{{ updateLabels.highlightsBefore > 1 && "" || "s" }} above\n</a>\n\n<a\n  href\n  class="highlights-after-label btn btn-info btn-xs"\n  ng-show="updateLabels.highlightsAfter > 0"\n  ng-click="gotoHighlightBelow()"\n>\n  <i class="fa fa-fw fa-arrow-down"></i>\n  {{ updateLabels.highlightsAfter }} more update{{ updateLabels.highlightsAfter > 1 && "" || "s" }} below\n\n</a>\n</div>'}}]);x.Z.directive("toggleSwitch",(function(){return{restrict:"E",scope:{description:"@",labelFalse:"@",labelTrue:"@",ngModel:"="},template:'<fieldset class="toggle-switch">\n  <legend class="sr-only">{{description}}</legend>\n\n  <input\n    type="radio"\n    name="toggle-switch-{{$id}}"\n    class="toggle-switch-input"\n    id="toggle-switch-false-{{$id}}"\n    ng-value="false"\n    ng-model="ngModel"\n  >\n  <label for="toggle-switch-false-{{$id}}" class="toggle-switch-label"><span>{{labelFalse}}</span></label>\n\n  <input\n    type="radio"\n    class="toggle-switch-input"\n    name="toggle-switch-{{$id}}"\n    id="toggle-switch-true-{{$id}}"\n    ng-value="true"\n    ng-model="ngModel"\n  >\n  <label for="toggle-switch-true-{{$id}}" class="toggle-switch-label"><span>{{labelTrue}}</span></label>\n</fieldset>'}})),x.Z.controller("SavingNotificationController",["$scope","$interval","ide",function(e,t,n){var r;setInterval((function(){return function(){var t,r=e.docSavingStatus,d=e.docSavingStatusCount,h={},p=0,y=0;for(var w in md.openDocs){md.openDocs[w].pollSavedStatus()||(p++,null!=r[w]?(h[w]=r[w],(t=h[w].unsavedSeconds+=1)>y&&(y=t)):h[w]={unsavedSeconds:0,doc:n.fileTreeManager.findEntityById(w)})}p>0&&t>f&&!l&&(l=n.showLockEditorMessageModal("Connection lost","Sorry, the connection to the server is down."),a=n.$scope.permissionsLevel,n.$scope.permissionsLevel="readOnly",l.result.finally((function(){l=null,n.$scope.permissionsLevel=a})));l&&0===p&&(l.dismiss("connection back up"),a&&(n.$scope.permissionsLevel=a));if(p||d)return e.docSavingStatus=h,e.docSavingStatusCount=p,e.$apply()}()}),1e3),$(window).bind("beforeunload",(function(){return r()}));var a,l=null,f=15;return e.docSavingStatus={},r=function(){if(md.hasUnsavedChanges())return"You have unsaved changes. If you leave now they will not be saved."}}]);var kp=/Mac/i.test(navigator.platform)?"Cmd":"Ctrl";function Cp(){var e=(0,Qe.$)().t,t=(0,Pl.Im)(),n=t.compiling,r=t.startCompile,a=t.hasChanges,l=n?"".concat(e("compiling"),"…"):e("recompile"),f=(0,D.jsxs)(D.Fragment,{children:[e("recompile_pdf")," ",(0,D.jsxs)("span",{className:"keyboard-shortcut",children:["(",kp," + Enter)"]})]});return(0,D.jsx)("div",{className:"detach-compile-button-container",children:(0,D.jsx)(vo.Z,{id:"detach-compile",description:f,tooltipProps:{className:"keyboard-tooltip"},overlayProps:{delayShow:500},children:(0,D.jsxs)(Ri.Z,{bsStyle:"primary",onClick:function(){return r()},disabled:n,className:se()("detach-compile-button",{"btn-striped-animated":a,"detach-compile-button-disabled":n}),children:[(0,D.jsx)(Ii.Z,{type:"refresh",spin:n}),(0,D.jsx)("span",{className:"detach-compile-button-label",children:l})]})})})}var Ep=(0,E.memo)(Cp);function Op(){var e=(0,le.l5)(jp),t=e.detachRole,n=e.detachIsLinked;return"detacher"===t&&n?(0,D.jsx)(Ep,{}):null}var jp={detachRole:j().string,detachIsLinked:j().bool},$p=(0,E.memo)(Op);x.Z.component("editorCompileButton",(0,S.react2angular)(eu.use($p)));var Tp=function(){var e=(0,le.l5)(),t=e.pdfLayout,n=e.setView,r=e.detachRole,a=(0,Qe.$)().t;return r||"sideBySide"===t?null:(0,D.jsxs)(Ri.Z,{bsStyle:null,bsSize:"xs",onClick:function(){n("pdf")},className:"switch-to-pdf-btn toolbar-btn-secondary btn-secondary",children:[(0,D.jsx)(Ii.Z,{type:"file-pdf-o",className:"toolbar-btn-secondary-icon"}),(0,D.jsx)("span",{className:"toolbar-btn-secondary-text",children:a("switch_to_pdf")})]})};x.Z.component("switchToPdfButton",(0,S.react2angular)(eu.use(Tp)));var Ap=__webpack_require__(76066),Pp="editor.has_seen_cm6_switch_away_survey";function Dp(){return!!Ap.Z.getItem(Pp)}var Rp,Ip=["doc"];function Mp(e){return Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(e)}function Lp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Np(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Mp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Mp(l)?l:String(l)),r)}var a,l}var Fp,qp=(Rp=function(){function e(t,n,r,a){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.editorOpenDocEpoch=0,this.$scope=n,this.localStorage=r,this.$scope.editor={sharejs_doc:null,open_doc_id:null,open_doc_name:null,opening:!0,trackChanges:!1,wantTrackChanges:!1,docTooLongErrorShown:!1,showRichText:this.showRichText(),showVisual:this.showVisual(),newSourceEditor:this.newSourceEditor(),showSymbolPalette:!1,toggleSymbolPalette:function(){var e=!l.$scope.editor.showSymbolPalette;l.$scope.editor.showSymbolPalette=e,e&&l.$scope.editor.showGalileo&&l.$scope.editor.toggleGalileoPanel(),t.$scope.$emit("south-pane-toggled",e),a.sendMB(e?"symbol-palette-show":"symbol-palette-hide")},insertSymbol:function(e){t.$scope.$emit("editor:replace-selection",e.command),a.sendMB("symbol-palette-insert")},showGalileo:!1,toggleGalileoPanel:function(){var e=!l.$scope.editor.showGalileo;l.$scope.editor.showGalileo=e,e&&l.$scope.editor.showSymbolPalette&&l.$scope.editor.toggleSymbolPalette(),t.$scope.$emit("south-pane-toggled",e),a.sendMB(e?"galileo-show":"galileo-hide")},galileoActivated:!1,toggleGalileo:function(){var e=!l.$scope.editor.galileoActivated;l.$scope.editor.galileoActivated=e,a.sendMB(e?"galileo-activated":"galileo-disabled")},multiSelectedCount:0},window.addEventListener("editor:insert-symbol",(function(e){l.$scope.editor.insertSymbol(e.detail)})),this.$scope.$on("entity:selected",(function(e,t){if("history"!==l.$scope.ui.view&&"doc"===t.type)return l.openDoc(t)})),this.$scope.$on("entity:no-selection",(function(){l.$scope.$apply((function(){l.$scope.ui.view=null}))})),this.$scope.$on("entity:deleted",(function(e,t){if(l.$scope.editor.open_doc_id===t.id){if(!l.$scope.project.rootDoc_id)return void(l.$scope.ui.view=null);var n=l.ide.fileTreeManager.findEntityById(l.$scope.project.rootDoc_id);return null==n?void(l.$scope.ui.view=null):l.openDoc(n)}}));var f=!1;this.$scope.$on("file-tree:initialized",(function(){if(!f)return f=!0,l.autoOpenDoc()})),this.$scope.$on("flush-changes",(function(){return md.flushAll()})),window.addEventListener("flush-changes",(function(){md.flushAll()})),window.addEventListener("blur",(function(){sl_console.log("[EditorManager] forcing flush onblur"),md.flushAll()})),this.$scope.$watch("editor.wantTrackChanges",(function(e){if(null!=e)return l._syncTrackChangesState(l.$scope.editor.sharejs_doc)})),window.addEventListener("editor:open-doc",(function(e){var t=e.detail,n=t.doc,r=Lp(t,Ip);l.openDoc(n,r)}))}var t,n,r;return t=e,n=[{key:"getEditorType",value:function(){if(!this.$scope.editor.sharejs_doc)return null;var e=this.$scope.editor.sharejs_doc.editorType();return"cm6"===e&&this.$scope.editor.showVisual&&(e="cm6-rich-text"),e}},{key:"showRichText",value:function(){return"cm6"!==(0,xf.Z)("ol-richTextVariant")&&"rich-text"===this.localStorage("editor.mode.".concat(this.$scope.project_id))}},{key:"showVisual",value:function(){return"cm6"===(0,xf.Z)("ol-richTextVariant")&&"rich-text"===this.localStorage("editor.mode.".concat(this.$scope.project_id))}},{key:"newSourceEditor",value:function(){var e=this;if(!(0,xf.Z)("ol-showLegacySourceEditor"))return!0;var t=function(){var t=e.localStorage("editor.source_editor.".concat(e.$scope.project_id));return"cm6"===t||null==t};return(0,xf.Z)("ol-showCM6SwitchAwaySurvey")&&!Dp()||t()}},{key:"autoOpenDoc",value:function(){var e=this.ide.localStorage("doc.open_id.".concat(this.$scope.project_id))||this.$scope.project.rootDoc_id;if(null!=e){var t=this.ide.fileTreeManager.findEntityById(e);if(null!=t)return this.openDoc(t)}}},{key:"openDocId",value:function(e,t){null==t&&(t={});var n=this.ide.fileTreeManager.findEntityById(e);if(null!=n)return this.openDoc(n,t)}},{key:"jumpToLine",value:function(e){return this.$scope.$broadcast("editor:gotoLine",e.gotoLine,e.gotoColumn,e.syncToPdf)}},{key:"openDoc",value:function(e,t){var n=this;null==t&&(t={}),sl_console.log("[openDoc] Opening ".concat(e.id)),"editor"===this.$scope.ui.view&&this.$scope.$broadcast("store-doc-position"),this.$scope.ui.view="editor";var r=function(e){var r="doc:after-opened";n.$scope.$broadcast(r,{isNewDoc:e}),window.dispatchEvent(new CustomEvent(r,{detail:e})),null!=t.gotoLine?(setTimeout((function(){return n.jumpToLine(t)})),e&&window.addEventListener("editor:scroll-position-restored",(function(){return n.jumpToLine(t)}),{once:!0})):null!=t.gotoOffset&&setTimeout((function(){n.$scope.$broadcast("editor:gotoOffset",t.gotoOffset)}))};if(e.id===this.$scope.editor.open_doc_id&&!t.forceReopen)return this.ide.fileTreeManager.selectEntity(e),this.$scope.$broadcast("file-tree.reselectDoc",e.id),void this.$scope.$apply((function(){return r(!1)}));this.$scope.$applyAsync((function(){return n.$scope.editor.open_doc_id=e.id,n.$scope.editor.open_doc_name=e.name,n.ide.localStorage("doc.open_id.".concat(n.$scope.project_id),e.id),n.ide.fileTreeManager.selectEntity(e),n.$scope.editor.opening=!0,n._openNewDocument(e,(function(t,a){if(t&&"another document was loaded"===t.message)sl_console.log("[openDoc] another document was loaded while ".concat(e.id," was loading"));else{if(null==t)return n._syncTrackChangesState(a),n.$scope.$broadcast("doc:opened"),n.$scope.$applyAsync((function(){return n.$scope.editor.opening=!1,n.$scope.editor.sharejs_doc=a,r(!0)}));n.ide.showGenericMessageModal("Error opening document","Sorry, something went wrong opening this document. Please try again.")}}))}))}},{key:"_openNewDocument",value:function(e,t){var n=this,r=this.$scope.editor.sharejs_doc,a=r&&r.doc_id,l=r&&r.hasBufferedOps();if(r&&a!==e.id||l){sl_console.log("[_openNewDocument] Leaving existing open doc..."),this._unbindFromDocumentEvents(r),this._attachErrorHandlerToDocument(e,r);var f=++this.editorOpenDocEpoch;r.leaveAndCleanUp((function(r){return r?(sl_console.log("[_openNewDocument] error leaving doc ".concat(a),r),t(r)):n.editorOpenDocEpoch!==f?(sl_console.log("[openNewDocument] editorOpenDocEpoch mismatch ".concat(n.editorOpenDocEpoch," vs ").concat(f)),t(new Error("another document was loaded"))):void n._doOpenNewDocument(e,t)}))}else this._doOpenNewDocument(e,t)}},{key:"_doOpenNewDocument",value:function(e,t){var n=this;null==t&&(t=function(){}),sl_console.log("[_doOpenNewDocument] Opening...");var r=md.getDocument(this.ide,e.id),a=++this.editorOpenDocEpoch;return r.join((function(l){return null!=l?(sl_console.log("[_doOpenNewDocument] error joining doc ".concat(e.id),l),t(l)):n.editorOpenDocEpoch!==a?(sl_console.log("[openNewDocument] editorOpenDocEpoch mismatch ".concat(n.editorOpenDocEpoch," vs ").concat(a)),r.leaveAndCleanUp(),t(new Error("another document was loaded"))):(n._bindToDocumentEvents(e,r),t(null,r))}))}},{key:"_attachErrorHandlerToDocument",value:function(e,t){var n=this;t.on("error",(function(r,a,l){var f;if(f=null!=(null!=r?r.message:void 0)?r.message:"string"==typeof r?r:"",/maxDocLength/.test(f))n.$scope.docTooLongErrorShown=!0,n.openDoc(e,{forceReopen:!0}),n.ide.showGenericMessageModal("Document Too Long","Sorry, this file is too long to be edited manually. Please upload it directly.").result.finally((function(){n.$scope.docTooLongErrorShown=!1}));else if(/too many comments or tracked changes/.test(f))n.ide.showGenericMessageModal("Too many comments or tracked changes","Sorry, this file has too many comments or tracked changes. Please try accepting or rejecting some existing changes, or resolving and deleting some comments.");else if(!n.$scope.docTooLongErrorShown)return t.off("error"),l="string"==typeof l?l:t.doc._doc.snapshot,t.doc&&t.doc.clearInflightAndPendingOps(),t.leaveAndCleanUp(),n.ide.connectionManager.disconnect({permanent:!0}),n.ide.reportError(r,a),n.$scope.editor.error_state=!0,void n.ide.showOutOfSyncModal("Out of sync","Sorry, this file has gone out of sync and we need to do a full refresh. <br> <a target='_blank' rel='noopener noreferrer' href='/learn/Kb/Editor_out_of_sync_problems'>Please see this help guide for more information</a>",l);var d=n.$scope.$on("project:joined",(function(){n.openDoc(e,{forceReopen:!0}),d()}))}))}},{key:"_bindToDocumentEvents",value:function(e,t){var n=this;return this._attachErrorHandlerToDocument(e,t),t.on("externalUpdate",(function(e){if(!n._ignoreExternalUpdates&&("external"!==C().property(["meta","type"])(e)||"git-bridge"!==C().property(["meta","source"])(e)))return n.ide.showGenericMessageModal("Document Updated Externally","This document was just updated externally. Any recent changes you have made may have been overwritten. To see previous versions please look in the history.")}))}},{key:"_unbindFromDocumentEvents",value:function(e){return e.off()}},{key:"getCurrentDocValue",value:function(){return null!=this.$scope.editor.sharejs_doc?this.$scope.editor.sharejs_doc.getSnapshot():void 0}},{key:"getCurrentDocId",value:function(){return this.$scope.editor.open_doc_id}},{key:"startIgnoringExternalUpdates",value:function(){return this._ignoreExternalUpdates=!0}},{key:"stopIgnoringExternalUpdates",value:function(){return this._ignoreExternalUpdates=!1}},{key:"_syncTrackChangesState",value:function(e){var t,n=this;if(null!=e){null!=this._syncTimeout&&(clearTimeout(this._syncTimeout),this._syncTimeout=null);var r=this.$scope.editor.wantTrackChanges,a=e.getTrackingChanges();if(r!==a)return(t=function(){return null==e.getInflightOp()&&null==e.getPendingOp()?(e.setTrackingChanges(r),n.$scope.$apply((function(){return n.$scope.editor.trackChanges=r}))):n._syncTimeout=setTimeout(t,100)})();this.$scope.editor.trackChanges=r}}}],r=[{key:"initClass",value:function(){this.prototype._syncTimeout=null}}],n&&Np(t.prototype,n),r&&Np(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Rp.initClass(),Rp);function Bp(e){return Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(e)}function Up(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Bp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Bp(l)?l:String(l)),r)}var a,l}var Hp=(Fp=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.onlineUsers={},this.$scope.onlineUserCursorHighlights={},this.$scope.onlineUsersArray=[],this.$scope.onlineUsersCount=0,this.$scope.$on("cursor:editor:update",(function(e,t){return r.sendCursorPositionUpdate(t)})),this.$scope.$on("project:joined",(function(){return r.ide.socket.emit("clientTracking.getConnectedUsers",(function(e,t){r.$scope.onlineUsers={};for(var n=0,a=Array.from(t||[]);n<a.length;n++){var l=a[n];l.client_id!==r.ide.socket.publicId&&(r.$scope.onlineUsers[l.client_id]={id:l.client_id,user_id:l.user_id,email:l.email,name:"".concat(l.first_name," ").concat(l.last_name),doc_id:null!=l.cursorData?l.cursorData.doc_id:void 0,row:null!=l.cursorData?l.cursorData.row:void 0,column:null!=l.cursorData?l.cursorData.column:void 0})}return r.refreshOnlineUsers()}))})),this.ide.socket.on("clientTracking.clientUpdated",(function(e){if(e.id!==r.ide.socket.publicId)return r.$scope.$apply((function(){return r.$scope.onlineUsers[e.id]=e,r.refreshOnlineUsers()}))})),this.ide.socket.on("clientTracking.clientDisconnected",(function(e){return r.$scope.$apply((function(){return delete r.$scope.onlineUsers[e],r.refreshOnlineUsers()}))})),this.$scope.getHueForUserId=function(e){return Ch.getHueForUserId(e)}}var t,n,r;return t=e,n=[{key:"refreshOnlineUsers",value:function(){for(var e in this.$scope.onlineUsersArray=[],this.$scope.onlineUsers){var t=this.$scope.onlineUsers[e];null!=t.doc_id&&(t.doc=this.ide.fileTreeManager.findEntityById(t.doc_id)),null!==t.name&&0!==t.name.trim().length||(t.email?t.name=t.email.trim():"anonymous-user"===t.user_id&&(t.name="Anonymous")),t.initial=null!=t.name?t.name[0]:void 0,t.initial&&" "!==t.initial||(t.initial="?"),this.$scope.onlineUsersArray.push(t)}for(var n in this.$scope.onlineUsersCount=this.$scope.onlineUsersArray.length,this.$scope.onlineUserCursorHighlights={},this.$scope.onlineUsers){var r=this.$scope.onlineUsers[n],a=r.doc_id;null!=a&&null!=r.row&&null!=r.column&&(this.$scope.onlineUserCursorHighlights[a]||(this.$scope.onlineUserCursorHighlights[a]=[]),this.$scope.onlineUserCursorHighlights[a].push({label:r.name,cursor:{row:r.row,column:r.column},hue:Ch.getHueForUserId(r.user_id)}))}return this.$scope.onlineUsersArray.length>0?(delete this.cursorUpdateTimeout,this.cursorUpdateInterval=500):(delete this.cursorUpdateTimeout,this.cursorUpdateInterval=3e5)}},{key:"sendCursorPositionUpdate",value:function(e){var t=this;if(null!=e&&(this.$scope.currentPosition=e),null==this.cursorUpdateTimeout)return this.cursorUpdateTimeout=setTimeout((function(){var e=t.$scope.editor.open_doc_id;return t.ide.socket.emit("clientTracking.updatePosition",{row:null!=t.$scope.currentPosition?t.$scope.currentPosition.row:void 0,column:null!=t.$scope.currentPosition?t.$scope.currentPosition.column:void 0,doc_id:e}),delete t.cursorUpdateTimeout}),this.cursorUpdateInterval)}}],r=[{key:"initClass",value:function(){this.prototype.cursorUpdateInterval=500}}],n&&Up(t.prototype,n),r&&Up(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Fp.initClass(),Fp),zp=__webpack_require__(19034),Vp=__webpack_require__.n(zp),Wp=function(e){if(null==e)return"Anonymous";if(e.id===window.user.id)return"you";if(null!=e.name)return e.name;var t=[e.first_name,e.last_name].filter((function(e){return null!=e})).join(" ").trim();return""===t&&(t=e.email.split("@")[0]),null==t||""===t?"?":t},Zp={POINT_IN_TIME:"point_in_time",COMPARE:"compare"},Gp=(x.Z.controller("HistoryV2ListController",["$scope","$modal","ide",function(e,t,n){return e.hoveringOverListSelectors=!1,e.listConfig={showOnlyLabelled:!1},e.projectUsers=[],e.$watch("project.members",(function(t){if(null!=t)return e.projectUsers=t.concat(e.project.owner)})),e.loadMore=function(){return n.historyManager.fetchNextBatchOfUpdates()},e.handleVersionSelect=function(t){return e.$applyAsync((function(){return n.historyManager.selectVersionForPointInTime(t)}))},e.handleRangeSelect=function(t,r){return e.$applyAsync((function(){return n.historyManager.selectVersionsForCompare(t,r)}))},e.handleLabelDelete=function(e){return t.open({templateUrl:"historyV2DeleteLabelModalTemplate",controller:"HistoryV2DeleteLabelModalController",resolve:{labelDetails:function(){return e}}})}}]),x.Z.controller("HistoryV2FileTreeController",["$scope","ide",function(e,t){e.handleFileSelection=function(e){t.historyManager.selectFile(e)}}]),x.Z.controller("HistoryV2ToolbarController",["$scope","$modal","ide","eventTracking","waitFor",function(e,t,n,r,a){e.currentUpdate=null,e.currentLabel=null,e.restoreState={inflight:!1,error:!1},e.toolbarUIConfig={showOnlyLabels:!1};var l=e.$watch("history.showOnlyLabels",(function(t){null!=t&&(e.toolbarUIConfig.showOnlyLabels=t,l())}));e.$watch("toolbarUIConfig.showOnlyLabels",(function(e,t){null!=e&&e!==t&&(e?n.historyManager.showOnlyLabels():n.historyManager.showAllUpdates())})),e.$watch("history.viewMode",(function(t,r){null!=t&&t!==r&&(e.currentUpdate=n.historyManager.getUpdateForVersion(t))})),e.$watch("history.selection.range.toV",(function(t,r){null!=t&&t!==r&&e.history.viewMode===e.HistoryViewModes.POINT_IN_TIME&&(e.currentUpdate=n.historyManager.getUpdateForVersion(t))})),e.toggleHistoryViewMode=function(){n.historyManager.toggleHistoryViewMode()},e.restoreDeletedFile=function(){var t=e.history.selection.file,l=t.pathname,f=t.deletedAtV;if(null!=l&&null!=f)return r.sendMB("history-v2-restore-deleted"),e.restoreState.inflight=!0,n.historyManager.restoreFile(f,l).then((function(t){return function(t){var r=t.id,l=t.type;return a((function(){return n.fileTreeManager.findEntityById(r)}),3e3).then((function(t){"doc"===l?(n.editorManager.openDoc(t),n.$timeout((function(){e.$broadcast("history:toggle")}),0)):"file"===l&&(n.binaryFilesManager.openFile(t),n.$timeout((function(){e.$broadcast("history:toggle")}),0))})).catch((function(e){return console.warn(e)}))}(t.data)})).catch((function(){return n.showGenericMessageModal("Sorry, something went wrong with the restore")})).finally((function(){return e.restoreState.inflight=!1}))},e.showAddLabelDialog=function(){t.open({templateUrl:"historyV2AddLabelModalTemplate",controller:"HistoryV2AddLabelModalController",resolve:{update:function(){return e.history.selection.update}}})}}]),x.Z.controller("HistoryV2AddLabelModalController",["$scope","$modalInstance","ide","update",function(e,t,n,r){return e.update=r,e.inputs={labelName:null},e.state={inflight:!1,error:!1},t.opened.then((function(){return e.$applyAsync((function(){return e.$broadcast("open")}))})),e.addLabelModalFormSubmit=function(){return e.state.inflight=!0,n.historyManager.labelCurrentVersion(e.inputs.labelName).then((function(n){return e.state.inflight=!1,t.close()})).catch((function(t){var n=t.data,r=t.status;return e.state.inflight=!1,e.state.error=400!==r||{message:n}}))}}]),x.Z.controller("HistoryV2DeleteLabelModalController",["$scope","$modalInstance","ide","labelDetails",function(e,t,n,r){return e.labelDetails=r,e.state={inflight:!1,error:!1},e.deleteLabel=function(){return e.state.inflight=!0,n.historyManager.deleteLabel(r).then((function(n){return e.state.inflight=!1,t.close()})).catch((function(t){var n=t.data,r=t.status;return e.state.inflight=!1,e.state.error=400!==r||{message:n}}))}}]),x.Z.directive("infiniteScroll",(function(){return{link:function(e,t,n,r){var a=t.find(".infinite-scroll-inner");t.css({"overflow-y":"auto"});var l=function(){return t.scrollTop()<30},f=function(){return t.scrollTop()+t.height()>=a.height()-30};function d(){if((t.height()>a.height()||(null!=n.infiniteScrollUpwards?l():f()))&&!e.$eval(n.infiniteScrollDisabled))return e.$eval(n.infiniteScroll).then((function(){return setTimeout((function(){return d()}),0)}))}return t.on("scroll",(function(e){return d()})),e.$watch(n.infiniteScrollInitialize,(function(e){if(e)return d()}))}}})),x.Z.directive("historyDraggableBoundary",(function(){return{scope:{historyDraggableBoundary:"@",historyDraggableBoundaryOnDragStart:"&",historyDraggableBoundaryOnDragStop:"&"},restrict:"A",link:function(e,t,n){t.data("selectionBoundary",{boundary:e.historyDraggableBoundary}),t.draggable({axis:"y",opacity:!1,helper:"clone",revert:!0,scroll:!0,cursor:"row-resize",start:function(t,n){n.helper.data("wasProperlyDropped",!1),e.historyDraggableBoundaryOnDragStart()},stop:function(t,n){e.historyDraggableBoundaryOnDragStop({isValidDrop:n.helper.data("wasProperlyDropped"),boundary:e.historyDraggableBoundary})}})}}})),x.Z.directive("historyDroppableArea",(function(){return{scope:{historyDroppableAreaOnDrop:"&",historyDroppableAreaOnOver:"&",historyDroppableAreaOnOut:"&"},restrict:"A",link:function(e,t,n){t.droppable({accept:function(e){return".history-entry-toV-handle, .history-entry-fromV-handle"},drop:function(t,n){var r=n.draggable.data("selectionBoundary").boundary;n.helper.data("wasProperlyDropped",!0),e.historyDroppableAreaOnDrop({boundary:r})},over:function(t,n){var r=n.draggable.data("selectionBoundary").boundary;e.historyDroppableAreaOnOver({boundary:r})}})}}})),function(e,t,n){var r=this;r.$entryListViewportEl=null,r.isDragging=!1;r.onEntryLinked=function(t,n){r.rangeSelectionEnabled||t.toV!==r.selectedHistoryVersion||e.$applyAsync((function(){(function(e){var t=e.offset().top,n=t+e.outerHeight(),a=r.$entryListViewportEl.offset().top,l=a+r.$entryListViewportEl.height();return t>=a&&n<=l})(n)||r.$entryListViewportEl.scrollTop(function(e){var t=r.$entryListViewportEl.height()/2;return e.offset().top-t}(n))}))},r.handleEntrySelect=function(e){r.rangeSelectionEnabled?r.onRangeSelect({selectedToV:e.toV,selectedFromV:e.fromV}):r.onVersionSelect({version:e.toV})},r.setRangeToV=function(e){e>r.selectedHistoryRange.fromV&&r.onRangeSelect({selectedToV:e,selectedFromV:r.selectedHistoryRange.fromV})},r.setRangeFromV=function(e){e<r.selectedHistoryRange.toV&&r.onRangeSelect({selectedToV:r.selectedHistoryRange.toV,selectedFromV:e})},r.initHoveredRange=function(){r.hoveredHistoryRange={toV:r.selectedHistoryRange.toV,fromV:r.selectedHistoryRange.fromV}},r.resetHoveredRange=function(){r.hoveredHistoryRange={toV:null,fromV:null}},r.setHoveredRangeToV=function(t){t>r.hoveredHistoryRange.fromV&&e.$applyAsync((function(){return r.hoveredHistoryRange.toV=t}))},r.setHoveredRangeFromV=function(t){t<r.hoveredHistoryRange.toV&&e.$applyAsync((function(){return r.hoveredHistoryRange.fromV=t}))},r.onDraggingStart=function(){e.$applyAsync((function(){r.isDragging=!0,r.initHoveredRange()}))},r.onDraggingStop=function(t,n){e.$applyAsync((function(){r.isDragging=!1,t||("toV"===n?r.setRangeToV(r.hoveredHistoryRange.toV):"fromV"===n&&r.setRangeFromV(r.hoveredHistoryRange.fromV)),r.resetHoveredRange()}))},r.$onInit=function(){r.$entryListViewportEl=t.find("> .history-entries"),r.resetHoveredRange()}});Gp.$inject=["$scope","$element","$attrs"];x.Z.component("historyEntriesList",{bindings:{entries:"<",users:"<",loadEntries:"&",loadDisabled:"<",loadInitialize:"<",isLoading:"<",currentUser:"<",freeHistoryLimitHit:"<",currentUserIsOwner:"<",rangeSelectionEnabled:"<",selectedHistoryVersion:"<?",selectedHistoryRange:"<?",onVersionSelect:"&",onRangeSelect:"&",onLabelDelete:"&"},controller:Gp,templateUrl:"historyEntriesListTpl"});var Kp=function(e,t,n){var r=this;r.displayName=Wp,r.displayNameById=function(e){return Wp(function(e){return C().find(r.users,(function(t){return((null!=t?t._id:void 0)||(null!=t?t.id:void 0))===e}))}(e))},r.getProjectOpDoc=function(e){return null!=e.rename?"".concat(e.rename.pathname," → ").concat(e.rename.newPathname):null!=e.add?"".concat(e.add.pathname):null!=e.remove?"".concat(e.remove.pathname):void 0},r.getUserCSSStyle=function(e){var t=(null!=e?e._id:void 0)||(null!=e?e.id:void 0),n=Ch.getHueForUserId(t)||100;return r.isEntrySelected()||r.isEntryHoverSelected()?{color:"#FFF"}:{color:"hsl(".concat(n,", 70%, 50%)")}},r.isEntrySelected=function(){return r.rangeSelectionEnabled?r.entry.toV<=r.selectedHistoryRange.toV&&r.entry.fromV>=r.selectedHistoryRange.fromV:r.entry.toV===r.selectedHistoryVersion},r.isEntryHoverSelected=function(){return r.rangeSelectionEnabled&&r.entry.toV<=r.hoveredHistoryRange.toV&&r.entry.fromV>=r.hoveredHistoryRange.fromV},r.onDraggingStart=function(){r.historyEntriesList.onDraggingStart()},r.onDraggingStop=function(e,t){return r.historyEntriesList.onDraggingStop(e,t)},r.onDrop=function(t){"toV"===t?e.$applyAsync((function(){return r.historyEntriesList.setRangeToV(r.entry.toV)})):"fromV"===t&&e.$applyAsync((function(){return r.historyEntriesList.setRangeFromV(r.entry.fromV)}))},r.onOver=function(t){"toV"===t?e.$applyAsync((function(){return r.historyEntriesList.setHoveredRangeToV(r.entry.toV)})):"fromV"===t&&e.$applyAsync((function(){return r.historyEntriesList.setHoveredRangeFromV(r.entry.fromV)}))},r.$onInit=function(){r.$entryEl=t.find("> .history-entry"),r.$entryDetailsEl=t.find(".history-entry-details"),r.$toVHandleEl=t.find(".history-entry-toV-handle"),r.$fromVHandleEl=t.find(".history-entry-fromV-handle"),r.historyEntriesList.onEntryLinked(r.entry,r.$entryEl)}};Kp.$inject=["$scope","$element","$attrs"];x.Z.component("historyEntry",{bindings:{entry:"<",currentUser:"<",users:"<",rangeSelectionEnabled:"<",isDragging:"<",selectedHistoryVersion:"<?",selectedHistoryRange:"<?",hoveredHistoryRange:"<?",onSelect:"&",onLabelDelete:"&"},require:{historyEntriesList:"^historyEntriesList"},controller:Kp,templateUrl:"historyEntryTpl"});var Yp=function(e,t,n){var r=this;r.isDragging=!1,r.versionsWithLabels=[],e.$watchCollection("$ctrl.labels",(function(e){if(e){var t=C().groupBy(e,"version");r.versionsWithLabels=C().map(t,(function(e,t){return{version:parseInt(t,10),labels:e}}))}})),r.initHoveredRange=function(){r.hoveredHistoryRange={toV:r.selectedHistoryRange.toV,fromV:r.selectedHistoryRange.fromV}},r.resetHoveredRange=function(){r.hoveredHistoryRange={toV:null,fromV:null}},r.setHoveredRangeToV=function(e){e>=r.hoveredHistoryRange.fromV&&(r.hoveredHistoryRange.toV=e)},r.setHoveredRangeFromV=function(e){e<=r.hoveredHistoryRange.toV&&(r.hoveredHistoryRange.fromV=e)},r.isVersionSelected=function(e){return r.rangeSelectionEnabled?e<=r.selectedHistoryRange.toV&&e>=r.selectedHistoryRange.fromV:e===r.selectedHistoryVersion},r.isVersionHoverSelected=function(e){return r.rangeSelectionEnabled&&e<=r.hoveredHistoryRange.toV&&e>=r.hoveredHistoryRange.fromV},r.onDraggingStart=function(){e.$applyAsync((function(){r.isDragging=!0,r.initHoveredRange()}))},r.onDraggingStop=function(t,n){e.$applyAsync((function(){t||("toV"===n?r.setRangeToV(r.hoveredHistoryRange.toV):"fromV"===n&&r.setRangeFromV(r.hoveredHistoryRange.fromV)),r.isDragging=!1,r.resetHoveredRange()}))},r.onDrop=function(t,n){"toV"===t?e.$applyAsync((function(){return r.setRangeToV(n.version)})):"fromV"===t&&e.$applyAsync((function(){return r.setRangeFromV(n.version)}))},r.onOver=function(t,n){"toV"===t?e.$applyAsync((function(){return r.setHoveredRangeToV(n.version)})):"fromV"===t&&e.$applyAsync((function(){return r.setHoveredRangeFromV(n.version)}))},r.handleVersionSelect=function(e){r.rangeSelectionEnabled?r.onRangeSelect({selectedToV:e.version,selectedFromV:e.version}):r.onVersionSelect({version:e.version})},r.setRangeToV=function(e){e>=r.selectedHistoryRange.fromV&&r.onRangeSelect({selectedToV:e,selectedFromV:r.selectedHistoryRange.fromV})},r.setRangeFromV=function(e){e<=r.selectedHistoryRange.toV&&r.onRangeSelect({selectedToV:r.selectedHistoryRange.toV,selectedFromV:e})},r.buildUserView=function(e){return{_id:e.user_id,displayName:e.user_display_name}},r.displayName=Wp,r.getUserCSSStyle=function(e,t){var n=(null!=e?e._id:void 0)||(null!=e?e.id:void 0),a=Ch.getHueForUserId(n)||100;return r.isVersionSelected(t.version)||r.isVersionHoverSelected(t.version)?{color:"#FFF"}:{color:"hsl(".concat(a,", 70%, 50%)")}},r.$onInit=function(){r.resetHoveredRange()}};Yp.$inject=["$scope","$element","$attrs"];x.Z.component("historyLabelsList",{bindings:{labels:"<",rangeSelectionEnabled:"<",users:"<",currentUser:"<",isLoading:"<",selectedHistoryVersion:"<?",selectedHistoryRange:"<?",onVersionSelect:"&",onRangeSelect:"&",onLabelDelete:"&"},controller:Yp,templateUrl:"historyLabelsListTpl"});var Xp=function(e,t,n,r){var a=this;a.$onInit=function(){null==a.showTooltip&&(a.showTooltip=!0),null==a.isPseudoCurrentStateLabel&&(a.isPseudoCurrentStateLabel=!1)}};Xp.$inject=["$scope","$element","$attrs","$filter"];x.Z.component("historyLabel",{bindings:{labelText:"<",labelOwnerName:"<?",labelCreationDateTime:"<?",isOwnedByCurrentUser:"<",isPseudoCurrentStateLabel:"<",onLabelDelete:"&",showTooltip:"<?"},controller:Xp,templateUrl:"historyLabelTpl"});var Jp=function(e,t,n){var r=this;function a(e,t){for(var n=t.pathname.split("/"),r=e,a=function(){var e,a=n[l];l===n.length-1?((e=C().clone(t)).name=a,e.type="file",r.push(e)):(null==(e=C().find(r,(function(e){return e.name===a})))&&(e={name:a,type:"folder",children:[]},r.push(e)),r=e.children)},l=0;l<n.length;l++)a();return e}r.handleEntityClick=function(e){return r.onSelectedFileChange({file:e})},r._fileTree=[],e.$watch("$ctrl.files",(function(e){null!=e&&e.length>0&&(r._fileTree=C().reduce(e,a,[]))}))};Jp.$inject=["$scope","$element","$attrs"];x.Z.component("historyFileTree",{bindings:{files:"<",selectedPathname:"<",onSelectedFileChange:"&",isLoading:"<"},controller:Jp,templateUrl:"historyFileTreeTpl"});void 0!==window.fileActionI18n&&window.fileActionI18n;var Qp={edited:"edited",renamed:"renamed",created:"created",deleted:"deleted"};function em(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nm=function(e,t,n){var r=this;r.hasOperation=!1,r.getRenameTooltip=function(e){var t=em(a(r.fileEntity.oldPathname,r.fileEntity.pathname),2),n=t[0],l=t[1];return"".concat(Qp.renamed," <strong>").concat(n,"</strong> &rarr; <strong>").concat(l,"</strong>")},r.getFileOperationName=function(){return"edited"===r.fileEntity.operation?Qp.edited:"renamed"===r.fileEntity.operation?Qp.renamed:"added"===r.fileEntity.operation?Qp.created:"removed"===r.fileEntity.operation?Qp.deleted:""};var a=function(e,t){var n,r=e.split("/"),a=t.split("/"),l=Math.min(r.length,a.length)-1;for(n=0;n<l&&r[n]===a[n];n++);return r.splice(0,n),a.splice(0,n),[r.join("/"),a.join("/")]},l=function(){r.isOpen=!r.isOpen,r.entityTypeIconClass=d()},f=function(){return r.historyFileTreeController.handleEntityClick(r.fileEntity)};function d(){return r.isOpen?"fa-folder-open":"fa-folder"}r.$onInit=function(){"folder"===r.fileEntity.type?(r.isOpen=!0,r.entityTypeIconClass=d(),r.handleClick=l):(r.fileEntity.operation&&(r.hasOperation=!0),r.entityTypeIconClass="fa-".concat(_(r.fileEntity.name)),r.entityOpTextClass=r.fileEntity.operation?"history-file-entity-name-".concat(r.fileEntity.operation):null,r.handleClick=f,e.$watch((function(){return r.historyFileTreeController.selectedPathname}),(function(e){return r.isSelected=r.fileEntity.pathname===e})))}};nm.$inject=["$scope","$element","$attrs"];x.Z.component("historyFileEntity",{require:{historyFileTreeController:"^historyFileTree"},bindings:{fileEntity:"<"},controller:nm,templateUrl:"historyFileEntityTpl"});var rm,im=__webpack_require__(45643);function om(e){return om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(e)}function am(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return sm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==om(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==om(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===om(l)?l:String(l)),r)}var a,l}var cm=(rm=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelCurrentVersion=this.labelCurrentVersion.bind(this),this.deleteLabel=this.deleteLabel.bind(this),this._addLabelLocally=this._addLabelLocally.bind(this),this.ide=t,this.$scope=n,this.localStorage=r,this.$scope.HistoryViewModes=Zp,this._localStorageViewModeProjKey="history.userPrefs.viewMode.".concat(n.project_id),this._localStorageShowOnlyLabelsProjKey="history.userPrefs.showOnlyLabels.".concat(n.project_id),this._previouslySelectedPathname=null,this._loadFileTreeRequestCanceller=null,this.hardReset(),this.$scope.toggleHistory=function(){"history"===a.$scope.ui.view?a.hide():(a.show(),a._handleHistoryUIStateChange()),a.ide.$timeout((function(){a.$scope.$broadcast("history:toggle")}),0)},this.$scope.isHistoryLoading=function(){var e=a.$scope.history.selection;return a.$scope.history.loadingFileTree||a.$scope.history.viewMode===Zp.POINT_IN_TIME&&e.file&&e.file.loading||a.$scope.history.viewMode===Zp.COMPARE&&e.diff&&e.diff.loading}}var t,n,r;return t=e,n=[{key:"show",value:function(){this.$scope.ui.view="history",this.hardReset(),this.$scope.history.showOnlyLabels&&this.fetchNextBatchOfUpdates()}},{key:"hide",value:function(){this.$scope.ui.view="editor"}},{key:"_getViewModeUserPref",value:function(){return this.localStorage(this._localStorageViewModeProjKey)||Zp.POINT_IN_TIME}},{key:"_getShowOnlyLabelsUserPref",value:function(){return this.localStorage(this._localStorageShowOnlyLabelsProjKey)||!1}},{key:"_setViewModeUserPref",value:function(e){e!==Zp.POINT_IN_TIME&&e!==Zp.COMPARE||this.localStorage(this._localStorageViewModeProjKey,e)}},{key:"_setShowOnlyLabelsUserPref",value:function(e){this.localStorage(this._localStorageShowOnlyLabelsProjKey,!!e)}},{key:"isReact",value:function(){var e;return"react"===(null===(e=(0,xf.Z)("ol-splitTestVariants"))||void 0===e?void 0:e["history-view"])}},{key:"hardReset",value:function(){var e=this;this.$scope.history={isV2:!0,updates:[],viewMode:this._getViewModeUserPref(),nextBeforeTimestamp:null,loading:!1,atEnd:!1,userHasFullFeature:void 0,freeHistoryLimitHit:!1,selection:{docs:{},pathname:null,range:{fromV:null,toV:null},hoveredRange:{fromV:null,toV:null},diff:null,files:[],file:null},error:null,showOnlyLabels:this._getShowOnlyLabelsUserPref(),labels:null,loadingFileTree:!0,isReact:this.isReact()};var t=this.$scope.$watch("project.features.versioning",(function(n){null!=n&&(e.$scope.history.userHasFullFeature=n,e.$scope.user.isAdmin&&(e.$scope.history.userHasFullFeature=!0),t())}))}},{key:"softReset",value:function(){this.$scope.history.viewMode=this._getViewModeUserPref(),this.$scope.history.selection={docs:{},pathname:null,range:{fromV:null,toV:null},hoveredRange:{fromV:null,toV:null},diff:null,files:[],file:null},this.$scope.history.error=null,this.$scope.history.showOnlyLabels=this._getShowOnlyLabelsUserPref()}},{key:"toggleHistoryViewMode",value:function(){var e=this;this.$scope.history.viewMode===Zp.COMPARE?(this.softReset(),this.$scope.history.viewMode=Zp.POINT_IN_TIME,this._setViewModeUserPref(Zp.POINT_IN_TIME)):(this.softReset(),this.$scope.history.viewMode=Zp.COMPARE,this._setViewModeUserPref(Zp.COMPARE)),this._handleHistoryUIStateChange(),this.ide.$timeout((function(){e.$scope.$broadcast("history:toggle")}),0)}},{key:"_handleHistoryUIStateChange",value:function(){this.$scope.history.viewMode===Zp.COMPARE?this.$scope.history.showOnlyLabels?this.autoSelectLabelsForComparison():this.autoSelectRecentUpdates():this.$scope.history.showOnlyLabels?this.autoSelectLabelForPointInTime():this.autoSelectVersionForPointInTime()}},{key:"setHoverFrom",value:function(e){var t=this.$scope.history.selection;t.hoveredRange.fromV=e,t.hoveredRange.toV=t.range.toV,this.$scope.history.hoveringOverListSelectors=!0}},{key:"setHoverTo",value:function(e){var t=this.$scope.history.selection;t.hoveredRange.toV=e,t.hoveredRange.fromV=t.range.fromV,this.$scope.history.hoveringOverListSelectors=!0}},{key:"resetHover",value:function(){var e=this.$scope.history.selection;e.hoveredRange.toV=null,e.hoveredRange.fromV=null,this.$scope.history.hoveringOverListSelectors=!1}},{key:"showAllUpdates",value:function(){this.$scope.history.showOnlyLabels&&(this.$scope.history.showOnlyLabels=!1,this._setShowOnlyLabelsUserPref(!1),this._handleHistoryUIStateChange())}},{key:"showOnlyLabels",value:function(){this.$scope.history.showOnlyLabels||(this.$scope.history.showOnlyLabels=!0,this._setShowOnlyLabelsUserPref(!0),this._handleHistoryUIStateChange())}},{key:"restoreFile",value:function(e,t){var n="/project/".concat(this.$scope.project_id,"/restore_file");return this.ide.$http.post(n,{version:e,pathname:t,_csrf:window.csrfToken})}},{key:"loadFileTreeForVersion",value:function(e){return this._loadFileTree(e,e)}},{key:"loadFileTreeDiff",value:function(e,t){return this._loadFileTree(e,t)}},{key:"_loadFileTree",value:function(e,t){var n=this,r="/project/".concat(this.$scope.project_id,"/filetree/diff"),a=this.$scope.history.selection,l=["from=".concat(t),"to=".concat(e)];return r+="?".concat(l.join("&")),this.$scope.$applyAsync((function(){return n.$scope.history.loadingFileTree=!0})),a.file=null,a.pathname=null,null!=this._loadFileTreeRequestCanceller&&this._loadFileTreeRequestCanceller.resolve(),this._loadFileTreeRequestCanceller=this.ide.$q.defer(),this.ide.$http.get(r,{timeout:this._loadFileTreeRequestCanceller.promise}).then((function(e){n.$scope.history.selection.files=e.data.diff;var t,r=am(n.$scope.history.selection.files);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a.newPathname&&(a.oldPathname=a.pathname,a.pathname=a.newPathname,delete a.newPathname)}}catch(e){r.e(e)}finally{r.f()}n._loadFileTreeRequestCanceller=null,n.$scope.history.loadingFileTree=!1,n.autoSelectFile()})).catch((function(e){-1!==e.status?n._loadFileTreeRequestCanceller=null:n.$scope.history.loadingFileTree=!1}))}},{key:"selectFile",value:function(e){null!=e&&null!=e.pathname&&(this.$scope.history.selection.pathname=this._previouslySelectedPathname=e.pathname,this.$scope.history.selection.file=e,this.$scope.history.viewMode===Zp.POINT_IN_TIME?this.loadFileAtPointInTime():this.reloadDiff())}},{key:"autoSelectFile",value:function(){var e=this.$scope.history.selection.files,t=null,n=null,r=!1,a=this._getFilesWithOps();if(null!=this._previouslySelectedPathname&&(n=C().find(e,{pathname:this._previouslySelectedPathname}),r=C().some(a,{pathname:this._previouslySelectedPathname})),null!=n&&r)t=n;else{var l,f=am(["edited","added","renamed","removed"]);try{for(f.s();!(l=f.n()).done;){var d=l.value,h=C().find(a,{operation:d});if(null!=h){t=C().find(e,{pathname:h.pathname});break}}}catch(e){f.e(e)}finally{f.f()}if(null==t)if(null!=n)t=n;else{var p=C().find(e,(function(e){return/main\.tex$/.test(e.pathname)}));if(null!=p)t=p;else{var y=C().find(e,(function(e){return/\.tex$/.test(e.pathname)}));t=null!=y?y:e[0]}}}this.selectFile(t)}},{key:"_getFilesWithOps",value:function(){var e;if(this.$scope.history.viewMode===Zp.POINT_IN_TIME){var t=this.getUpdateForVersion(this.$scope.history.selection.range.toV);if(e=[],null!=t){var n,r=am(t.pathnames);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.push({pathname:a,operation:"edited"})}}catch(e){r.e(e)}finally{r.f()}var l,f=am(t.project_ops);try{for(f.s();!(l=f.n()).done;){var d=l.value,h=void 0;null!=d.add?h={pathname:d.add.pathname,operation:"added"}:null!=d.remove?h={pathname:d.remove.pathname,operation:"removed"}:null!=d.rename&&(h={pathname:d.rename.newPathname,operation:"renamed"}),null!=h&&e.push(h)}}catch(e){f.e(e)}finally{f.f()}}}else e=C().reduce(this.$scope.history.selection.files,(function(e,t){return t.operation&&e.push({pathname:t.pathname,operation:t.operation}),e}),[]);return e}},{key:"autoSelectRecentUpdates",value:function(){if(0!==this.$scope.history.updates.length){for(var e,t=this.$scope.history.updates[0].toV,n=0,r=0;r<this.$scope.history.updates.length;r++){var a=this.$scope.history.updates[r];if(this._updateContainsUserId(a,this.$scope.user.id)||r>this.MAX_RECENT_UPDATES_TO_SELECT)break;n=r}e=this.$scope.history.updates[n].fromV,this.selectVersionsForCompare(t,e)}}},{key:"autoSelectVersionForPointInTime",value:function(){if(0!==this.$scope.history.updates.length){var e=this.$scope.history.updates[0].toV,t=this.$scope.history.selection.range;null!=t.toV&&null!=t.fromV&&t.toV===t.fromV&&(e=t.toV),this.selectVersionForPointInTime(e)}}},{key:"autoSelectLastLabel",value:function(){if(null!=this.$scope.history.labels&&0!==this.$scope.history.labels.length)return this.selectLabelForPointInTime(this.$scope.history.labels[0])}},{key:"expandSelectionToVersion",value:function(e){e>this.$scope.history.selection.range.toV?this.$scope.history.selection.range.toV=e:e<this.$scope.history.selection.range.fromV&&(this.$scope.history.selection.range.fromV=e)}},{key:"selectVersionForPointInTime",value:function(e){var t=this.$scope.history.selection;t.range.toV!==e&&t.range.fromV!==e&&(t.range.toV=e,t.range.fromV=e,this.loadFileTreeForVersion(e))}},{key:"selectVersionsForCompare",value:function(e,t){var n=this.$scope.history.selection.range;n.toV===e&&n.fromV===t||(n.toV=e,n.fromV=t,this.loadFileTreeDiff(e,t))}},{key:"autoSelectLabelForPointInTime",value:function(){var e=this.getUpdateForVersion(this.$scope.history.selection.range.toV),t=0;if(null!=e&&null!=e.labels&&(t=e.labels.length),0===t)this.autoSelectLastLabel();else if(1===t)this.selectLabelForPointInTime(e.labels[0]);else if(t>1){var n=this.ide.$filter("orderBy")(e.labels,"-created_at")[0];this.selectLabelForPointInTime(n)}}},{key:"selectLabelForPointInTime",value:function(e){var t=null;if(!this._isLabelSelected(e)){for(var n=0,r=Array.from(this.$scope.history.updates);n<r.length;n++){var a=r[n];if(a.toV===e.version){t=a;break}}if(null!=t)this.selectVersionForPointInTime(t.toV);else{var l=this.$scope.history.selection;l.range.toV=e.version,l.range.fromV=e.version,this.loadFileTreeForVersion(e.version)}}}},{key:"getUpdateForVersion",value:function(e){var t,n=am(this.$scope.history.updates);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.toV===e)return r}}catch(e){n.e(e)}finally{n.f()}}},{key:"autoSelectLabelsForComparison",value:function(){var e=this.$scope.history.labels,t=0;Array.isArray(e)&&(t=e.length),0===t||(1===t?this.selectVersionsForCompare(e[0].version,e[0].version):t>1&&this.selectVersionsForCompare(e[0].version,e[1].version))}},{key:"fetchNextBatchOfUpdates",value:function(){var e=this;if(!this.$scope.history.atEnd){var t="/project/".concat(this.ide.project_id,"/updates?min_count=").concat(this.BATCH_SIZE);null!=this.$scope.history.nextBeforeTimestamp&&(t+="&before=".concat(this.$scope.history.nextBeforeTimestamp));var n="/project/".concat(this.ide.project_id,"/labels"),r={updates:this.ide.$http.get(t)};return null==this.$scope.history.labels&&(r.labels=this.ide.$http.get(n)),this.$scope.history.loading=!0,this.ide.$q.all(r).then((function(t){e.$scope.history.loading=!1;var n=t.updates.data,r=null;n.updates.length>0&&(r=n.updates[0].toV),null!=t.labels&&(e.$scope.history.labels=e._loadLabels(t.labels.data,r)),e._loadUpdates(n.updates),e.$scope.history.nextBeforeTimestamp=n.nextBeforeTimestamp,(null==n.nextBeforeTimestamp||e.$scope.history.freeHistoryLimitHit||0===e.$scope.history.updates.length)&&(e.$scope.history.atEnd=!0),0===e.$scope.history.updates.length&&(e.$scope.history.loadingFileTree=!1)})).catch((function(t){e.$scope.history.loading=!1;var n=t.status,r=t.statusText;e.$scope.history.error={status:n,statusText:r},e.$scope.history.atEnd=!0,e.$scope.history.loadingFileTree=!1}))}}},{key:"_loadLabels",value:function(e,t){var n=this._sortLabelsByVersionAndDate(e),r=this._deletePseudoCurrentStateLabelIfExistent(n);return this._addPseudoCurrentStateLabelIfNeeded(r,t)}},{key:"_deletePseudoCurrentStateLabelIfExistent",value:function(e){return e.length&&e[0].isPseudoCurrentStateLabel&&e.shift(),e}},{key:"_addPseudoCurrentStateLabelIfNeeded",value:function(e,t){if(e.length&&e[0].version!==t||0===e.length){var n={id:"1",isPseudoCurrentStateLabel:!0,version:t,created_at:(new Date).toISOString()};e.unshift(n)}return e}},{key:"_sortLabelsByVersionAndDate",value:function(e){return this.ide.$filter("orderBy")(e,["isPseudoCurrentStateLabel","-version","-created_at"])}},{key:"loadFileAtPointInTime",value:function(){var e=this,t=this.$scope.history.selection.range.toV,n=this.$scope.history.selection.pathname;if(null!=t){var r="/project/".concat(this.$scope.project_id,"/diff"),a=["pathname=".concat(encodeURIComponent(n)),"from=".concat(t),"to=".concat(t)];return r+="?".concat(a.join("&")),this.$scope.history.selection.file.loading=!0,this.ide.$http.get(r).then((function(t){var n=e._parseDiff(t.data.diff),r=n.text,a=n.binary;e.$scope.history.selection.file.binary=a,e.$scope.history.selection.file.text=r,e.$scope.history.selection.file.loading=!1})).catch((function(){}))}}},{key:"reloadDiff",value:function(){var e=this,t=this.$scope.history.selection.diff,n=this.$scope.history.selection,r=n.range,a=n.pathname,l=r.fromV,f=r.toV;if(null!=a){if(null==t||t.pathname!==a||t.fromV!==l||t.toV!==f){this.$scope.history.selection.diff=t={fromV:l,toV:f,pathname:a,error:!1},t.loading=!0;var d="/project/".concat(this.$scope.project_id,"/diff"),h=["pathname=".concat(encodeURIComponent(a))];return null!=t.fromV&&null!=t.toV&&h.push("from=".concat(t.fromV),"to=".concat(t.toV)),d+="?".concat(h.join("&")),this.ide.$http.get(d).then((function(n){var r=n.data;t.loading=!1;var a=e._parseDiff(r.diff),l=a.text,f=a.highlights,d=a.binary;t.binary=d,t.text=l,t.highlights=f})).catch((function(){t.loading=!1,t.error=!0}))}}else this.$scope.history.selection.diff=null}},{key:"labelCurrentVersion",value:function(e){return this._labelVersion(e,this.$scope.history.selection.range.toV)}},{key:"deleteLabel",value:function(e){var t=this,n="/project/".concat(this.$scope.project_id,"/labels/").concat(e.id);return this.ide.$http({url:n,method:"DELETE",headers:{"X-CSRF-Token":window.csrfToken}}).then((function(n){return t._deleteLabelLocally(e)}))}},{key:"_deleteLabelLocally",value:function(e){for(var t=0;t<this.$scope.history.updates.length;t++){var n=this.$scope.history.updates[t];if(n.toV===e.version){n.labels=C().filter(n.labels,(function(t){return t.id!==e.id}));break}}this.$scope.history.labels=this._loadLabels(C().filter(this.$scope.history.labels,(function(t){return t.id!==e.id})),this.$scope.history.updates[0].toV),this._handleHistoryUIStateChange()}},{key:"_isLabelSelected",value:function(e){return!!e&&e.version<=this.$scope.history.selection.range.toV&&e.version>=this.$scope.history.selection.range.fromV}},{key:"_parseDiff",value:function(e){if(e.binary)return{binary:!0};for(var t=0,n=0,r=[],a="",l=e||[],f=0;f<l.length;f++){var d=void 0,h=void 0,p=l[f],y=p.u||p.i||p.d;y||(y=""),a+=y;var w=y.split("\n"),x=t,_=n;w.length>1?(h=x+w.length-1,d=w[w.length-1].length):(h=x,d=_+w[0].length),t=h,n=d;var S={start:{row:x,column:_},end:{row:h,column:d}};if(null!=p.i||null!=p.d){var k=null!=p.meta.users?p.meta.users[0]:void 0,C=Wp(k),E=Vp()(p.meta.end_ts).format("Do MMM YYYY, h:mm a");null!=p.i?r.push({label:"Added by ".concat(C," on ").concat(E),highlight:S,hue:Ch.getHueForUserId(null!=k?k.id:void 0)}):null!=p.d&&r.push({label:"Deleted by ".concat(C," on ").concat(E),strikeThrough:S,hue:Ch.getHueForUserId(null!=k?k.id:void 0)})}}return{text:a,highlights:r}}},{key:"_loadUpdates",value:function(e){null==e&&(e=[]);for(var t=this.$scope.history.updates[this.$scope.history.updates.length-1],n=new Date,r=n.setDate(n.getDate()-1),a=null,l=e||[],f=0;f<l.length;f++){for(var d=l[f],h=0,p=Array.from(d.meta.users||[]);h<p.length;h++){var y=p[h];null!=y&&(y.hue=Ch.getHueForUserId(y.id))}if(null!=t&&Vp()(t.meta.end_ts).isSame(d.meta.end_ts,"day")||(d.meta.first_in_day=!0),t=d,!this.$scope.history.userHasFullFeature&&d.meta.end_ts<r){a=f||1,this.$scope.history.freeHistoryLimitHit=!0,this.$scope.project.owner._id===this.$scope.user.id&&(ga("send","event","subscription-funnel","editor-click-feature","history"),(0,im.xG)("history"));break}}var w=0===this.$scope.history.updates.length;this.$scope.history.userHasFullFeature||null==a||(e=e.slice(0,a)),this.$scope.history.updates=this.$scope.history.updates.concat(e),w&&this._handleHistoryUIStateChange()}},{key:"_labelVersion",value:function(e,t){var n=this,r="/project/".concat(this.$scope.project_id,"/labels");return this.ide.$http.post(r,{comment:e,version:t,_csrf:window.csrfToken}).then((function(e){return n._addLabelLocally(e.data)}))}},{key:"_addLabelLocally",value:function(e){var t=C().find(this.$scope.history.updates,(function(t){return t.toV===e.version}));null!=t&&(t.labels=t.labels.concat(e)),this.$scope.history.labels=this._loadLabels(this.$scope.history.labels.concat(e),this.$scope.history.updates[0].toV),this._handleHistoryUIStateChange()}},{key:"_updateContainsUserId",value:function(e,t){for(var n=0,r=Array.from(e.meta.users);n<r.length;n++){var a=r[n];if((null!=a?a.id:void 0)===t)return!0}return!1}}],r=[{key:"initClass",value:function(){this.prototype.MAX_RECENT_UPDATES_TO_SELECT=5,this.prototype.BATCH_SIZE=10}}],n&&lm(t.prototype,n),r&&lm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),rm.initClass(),rm);function um(e){return um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(e)}function fm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==um(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==um(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===um(l)?l:String(l)),r)}var a,l}function dm(e,t,n){return t&&fm(e.prototype,t),n&&fm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var hm=dm((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.permissions={read:!1,write:!1,admin:!1,comment:!1},this.$scope.$watch("permissionsLevel",(function(e){if(null!=e&&("readOnly"===e?(r.$scope.permissions.read=!0,r.$scope.permissions.write=!1,r.$scope.permissions.admin=!1,r.$scope.permissions.comment=!0):"readAndWrite"===e?(r.$scope.permissions.read=!0,r.$scope.permissions.write=!0,r.$scope.permissions.comment=!0):"owner"===e&&(r.$scope.permissions.read=!0,r.$scope.permissions.write=!0,r.$scope.permissions.admin=!0,r.$scope.permissions.comment=!0)),r.$scope.anonymous)return r.$scope.permissions.comment=!1}))}));function pm(e){return pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pm(e)}function mm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==pm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===pm(l)?l:String(l)),r)}var a,l}var gm=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.$on("entity:selected",(function(e,t){return"track-changes"!==r.$scope.ui.view&&"file"===t.type?r.openFile(t):"doc"===t.type?r.closeFile():void 0}))}var t,n,r;return t=e,(n=[{key:"openFile",value:function(e){var t=this;return"editor"===this.$scope.ui.view&&this.$scope.$broadcast("store-doc-position"),this.ide.fileTreeManager.selectEntity(e),"history"!==this.$scope.ui.view&&(this.$scope.ui.view="file"),this.$scope.openFile=null,this.$scope.$apply(),window.setTimeout((function(){t.$scope.openFile=e,t.$scope.$apply(),t.$scope.$broadcast("file-view:file-opened"),window.dispatchEvent(new Event("file-view:file-opened"))}),0,this)}},{key:"closeFile",value:function(){var e=this;return window.setTimeout((function(){e.$scope.openFile=null,"history"!==e.$scope.ui.view&&(e.$scope.ui.view="editor"),e.$scope.$apply()}),0,this)}}])&&mm(t.prototype,n),r&&mm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),vm=__webpack_require__(81637),ym=__webpack_require__.n(vm);function bm(e){return bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bm(e)}function wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==bm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===bm(l)?l:String(l)),r)}var a,l}var xm=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.$scope.$root._references=this.state={keys:[]},this.existingIndexHash={},this.$scope.$on("document:closed",(function(e,t){var n,a,l;if(t.doc_id&&(n=r.ide.fileTreeManager.findEntityById(t.doc_id)),a=null!=n?n.name:void 0,l=function(e){return e.match(/.*\.bib$/)},null!=a?l(a):void 0)return r.indexReferencesIfDocModified(t,!0)})),this.$scope.$on("references:should-reindex",(function(e,t){return r.indexAllReferences(!0)})),this.inited=!1,this.$scope.$on("project:joined",(function(e){r.inited||(r.inited=!0,r.ide.socket.on("references:keys:updated",(function(e){return r._storeReferencesKeys(e)})),r.indexAllReferences(!1))}))}var t,n,r;return t=e,(n=[{key:"_storeReferencesKeys",value:function(e){var t=this.$scope.$root._references.keys,n=C().union(t,e);return window.dispatchEvent(new CustomEvent("project:references",{detail:n})),this.$scope.$root._references.keys=n}},{key:"indexReferencesIfDocModified",value:function(e,t){var n=e.doc_id,r=e._doc.snapshot,a=Date.now(),l=ym()("blob "+r.length+"\0"+r).toString(),f=this.existingIndexHash[n];f&&f.timestamp>a-216e5&&f.hash===l||(this.indexReferences([n],t),this.existingIndexHash[n]={hash:l,timestamp:a})}},{key:"indexReferences",value:function(e,t){var n=this,r={docIds:e,shouldBroadcast:t,_csrf:window.csrfToken};return this.ide.$http.post("/project/".concat(this.$scope.project_id,"/references/index"),r).then((function(e){return n._storeReferencesKeys(e.data.keys)}))}},{key:"indexAllReferences",value:function(e){var t=this,n={shouldBroadcast:e,_csrf:window.csrfToken};return this.ide.$http.post("/project/".concat(this.$scope.project_id,"/references/indexAll"),n).then((function(e){return t._storeReferencesKeys(e.data.keys)}))}}])&&wm(t.prototype,n),r&&wm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _m(e){return _m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_m(e)}function Sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==_m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===_m(l)?l:String(l)),r)}var a,l}var km=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.$scope=n,this.metadata=r,this.ide.socket.on("broadcastDocMeta",(function(e){return a.metadata.onBroadcastDocMeta(e)})),this.$scope.$on("entity:deleted",this.metadata.onEntityDeleted)}var t,n,r;return t=e,(n=[{key:"loadProjectMetaFromServer",value:function(){return this.metadata.loadProjectMetaFromServer()}}])&&Sm(t.prototype,n),r&&Sm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Cm=(x.Z.controller("ReviewPanelController",["$scope","$element","ide","$timeout","$http","$modal","eventTracking","localStorage",function(e,t,n,r,a,l,f,d){var h,p,y=t.find("#review-panel"),w="member",x="guest",_="anonymous",S=function(){if(null==(null!=n.$scope.user?n.$scope.user.id:void 0))return _;var e=n.$scope.user.id,t=n.$scope.project;if((null!=t.owner?t.owner.id:void 0)===e)return w;for(var r=0,a=Array.from(t.members);r<a.length;r++){if(a[r]._id===e)return w}return x};e.SubViews={CUR_FILE:"cur_file",OVERVIEW:"overview"},e.UserTCSyncState=p={SYNCED:"synced",PENDING:"pending"},n.$scope.reviewPanel={trackChangesState:{},trackChangesOnForEveryone:!1,trackChangesOnForGuests:!1,trackChangesForGuestsAvailable:!1,entries:{},resolvedComments:{},hasEntries:!1,subView:e.SubViews.CUR_FILE,openSubView:e.SubViews.CUR_FILE,overview:{loading:!1,docsCollapsedState:JSON.parse(d("docs_collapsed_state:".concat(e.project_id)))||{}},dropdown:{loading:!1},commentThreads:{},resolvedThreadIds:{},layoutToLeft:!1,rendererData:{},formattedProjectMembers:{},fullTCStateCollapsed:!0,selectedEntryIds:[],nVisibleSelectedChanges:0,entryHover:!1,isReact:"react"===(null===(h=(0,xf.Z)("ol-splitTestVariants"))||void 0===h?void 0:h["review-panel"])},n.$scope.loadingThreads=!0,window.addEventListener("beforeunload",(function(){var t={};for(var r in n.$scope.reviewPanel.overview.docsCollapsedState){var a=n.$scope.reviewPanel.overview.docsCollapsedState[r];a&&(t[r]=a)}var l=Object.keys(t).length>0?JSON.stringify(t):null;return d("docs_collapsed_state:".concat(e.project_id),l)})),e.$on("layout:pdf:linked",(function(t,n){return e.$broadcast("review-panel:layout")})),e.$on("layout:pdf:resize",(function(t,r){var a,l;n.$scope.reviewPanel.layoutToLeft=(null===(a=r.east)||void 0===a?void 0:a.size)<220||(null===(l=r.east)||void 0===l?void 0:l.initClosed),e.$broadcast("review-panel:layout",!1)})),e.$on("expandable-text-area:resize",(function(t){return r((function(){return e.$broadcast("review-panel:layout")}))})),e.$on("review-panel:sizes",(function(t,n){e.$broadcast("editor:set-scroll-size",n),Cm("sizes",n)})),e.$watch("project.features.trackChangesVisible",(function(t){if(null!=t)return t?void 0:e.ui.reviewPanelOpen=!1})),e.$watch("project.members",(function(t){if(n.$scope.reviewPanel.formattedProjectMembers={},null!=(null!=e.project?e.project.owner:void 0)&&(n.$scope.reviewPanel.formattedProjectMembers[e.project.owner._id]=te(e.project.owner)),null!=(null!=e.project?e.project.members:void 0))return function(){for(var e=[],r=0,a=Array.from(t);r<a.length;r++){var l=a[r];"readAndWrite"===l.privileges?(null==n.$scope.reviewPanel.trackChangesState[l._id]&&H(l._id,n.$scope.reviewPanel.trackChangesOnForEveryone,!0),e.push(n.$scope.reviewPanel.formattedProjectMembers[l._id]=te(l))):e.push(void 0)}return e}()})),e.commentState={adding:!1,content:""},n.$scope.users=e.users={},n.$scope.reviewPanelEventsBridge=new Nf,n.socket.on("new-comment",(function(t,n){var a=O(t);return delete a.submitting,a.messages.push(ee(n)),e.$apply(),r((function(){return e.$broadcast("review-panel:layout")}))})),n.socket.on("accept-changes",(function(t,n){return t!==e.editor.open_doc_id?j(t).removeChangeIds(n):(e.$broadcast("changes:accept",n),Cm("changes:accept",n)),R(t),e.$apply((function(){}))})),n.socket.on("resolve-thread",(function(e,t){return N(e,t)})),n.socket.on("reopen-thread",(function(e){return F(e)})),n.socket.on("delete-thread",(function(t){return q(t),e.$apply((function(){}))})),n.socket.on("edit-message",(function(t,n,r){return function(e,t,n){var r=O(e);if(null==r)return;for(var a=0,l=Array.from(r.messages);a<l.length;a++){var f=l[a];f.id===t&&(f.content=n)}R()}(t,n,r),e.$apply((function(){}))})),n.socket.on("delete-message",(function(t,n){return B(t,n),e.$apply((function(){}))}));var k={},C=function(e){return null==n.$scope.reviewPanel.entries[e]&&(n.$scope.reviewPanel.entries[e]={}),n.$scope.reviewPanel.entries[e]},E=function(e){return null==n.$scope.reviewPanel.resolvedComments[e]&&(n.$scope.reviewPanel.resolvedComments[e]={}),n.$scope.reviewPanel.resolvedComments[e]};function O(e){return null==n.$scope.reviewPanel.commentThreads[e]&&(n.$scope.reviewPanel.commentThreads[e]={messages:[]}),n.$scope.reviewPanel.commentThreads[e]}function j(e){return null==k[e]&&(k[e]=new(Af()),k[e].resolvedThreadIds=n.$scope.reviewPanel.resolvedThreadIds),k[e]}var T={};function A(){return T.isVisible&&n.$scope.reviewPanel.subView===e.SubViews.CUR_FILE&&!e.editor.showRichText?y.css("right","".concat(T.scrollbarWidth,"px")):y.css("right","0")}function P(e){var t=j(e.doc_id).getIdSeed(),n=Af().generateIdSeed();return j(e.doc_id).setIdSeed(n),e.setTrackChangesIdSeeds({pending:n,inflight:t})}n.$scope.reviewPanelEventsBridge.on("aceScrollbarVisibilityChanged",(function(e,t){return T={isVisible:e,scrollbarWidth:t},A()})),e.$watch("!ui.reviewPanelOpen && reviewPanel.hasEntries",(function(t,n){if(null!=t)return e.ui.miniReviewPanelVisible=t,t!==n?r((function(){return e.$broadcast("review-panel:toggle")})):void 0})),e.$watch("ui.reviewPanelOpen",(function(t){if(null!=t)return t?n.$scope.reviewPanel.subView=n.$scope.reviewPanel.openSubView:(n.$scope.reviewPanel.openSubView=n.$scope.reviewPanel.subView,n.$scope.reviewPanel.subView=e.SubViews.CUR_FILE),r((function(){return e.$broadcast("review-panel:toggle"),e.$broadcast("review-panel:layout",!1)}))})),e.$watch("reviewPanel.subView",(function(t,r){if(null!=t){if(A(),t===e.SubViews.OVERVIEW)return n.$scope.reviewPanel.overview.loading=!0,D().then((function(){return n.$scope.reviewPanel.overview.loading=!1})).catch((function(){return n.$scope.reviewPanel.overview.loading=!1}));r===e.SubViews.OVERVIEW&&Cm("overview-closed",t)}})),e.$watch("editor.sharejs_doc",(function(e,t){if(null!=e)return k[e.doc_id]=e.ranges,k[e.doc_id].resolvedThreadIds=n.$scope.reviewPanel.resolvedThreadIds,n.$scope.reviewPanel.rangesTracker=k[e.doc_id],null!=t&&t.off("flipped_pending_to_inflight"),e.on("flipped_pending_to_inflight",(function(){return P(e)})),P(e)})),e.$watch((function(){var t=n.$scope.reviewPanel.entries[e.editor.open_doc_id]||{},r={};for(var a in t){var l=t[a];["add-comment","bulk-actions"].includes(a)||(r[a]=l)}return Object.keys(r).length}),(function(t){return n.$scope.reviewPanel.hasEntries=t>0&&e.project.features.trackChangesVisible}));var D=function(){return a.get("/project/".concat(e.project_id,"/ranges")).then((function(t){var r=t.data;return function(){for(var t=[],a=0,l=Array.from(r);a<l.length;a++){var f=l[a];if(null==n.$scope.reviewPanel.overview.docsCollapsedState[f.id]&&(n.$scope.reviewPanel.overview.docsCollapsedState[f.id]=!1),f.id!==e.editor.open_doc_id){var d=j(f.id);d.comments=(null!=f.ranges?f.ranges.comments:void 0)||[],d.changes=(null!=f.ranges?f.ranges.changes:void 0)||[]}t.push(R(f.id))}return t}()}))};function R(t){var l=j(t),f=C(t),d=E(t),h=!1,p={};for(var y in f){var w=f[y];if(!["add-comment","bulk-actions"].includes(y))for(var x=0,_=Array.from(w.entry_ids);x<_.length;x++){p[_[x]]=!0}}for(var S in d)for(var k=d[S],O=0,T=Array.from(k.entry_ids);O<T.length;O++){p[T[O]]=!0}for(var A=!1,P=null,D=0,R=Array.from(l.changes);D<R.length;D++){var I=R[D];if(h=!0,A&&I.op.d&&I.op.p===P.op.p+P.op.i.length&&I.metadata.user_id===P.metadata.user_id)f[P.id].type="aggregate-change",f[P.id].metadata.replaced_content=I.op.d,f[P.id].entry_ids.push(I.id);else{null==f[I.id]&&(f[I.id]={}),delete p[I.id];var M={type:I.op.i?"insert":"delete",entry_ids:[I.id],content:I.op.i||I.op.d,offset:I.op.p,metadata:I.metadata};for(var L in M)f[I.id][L]=M[L]}I.op.i?(A=!0,P=I):(A=!1,P=null),null==e.users[I.metadata.user_id]&&(window.isRestrictedTokenMember||J(I.metadata.user_id))}window.isRestrictedTokenMember||(l.comments.length>0?function(){if(Q)return;Q=!0,n.$scope.loadingThreads=!0,a.get("/project/".concat(e.project_id,"/threads")).then((function(t){var a=t.data;for(var l in n.$scope.loadingThreads=!1,n.$scope.reviewPanel.resolvedThreadIds)delete n.$scope.reviewPanel.resolvedThreadIds[l];for(var f in a){for(var d=a[f],h=0,p=Array.from(d.messages);h<p.length;h++){ee(p[h])}null!=d.resolved_by_user&&(d.resolved_by_user=te(d.resolved_by_user),n.$scope.reviewPanel.resolvedThreadIds[f]=!0,e.$broadcast("comment:resolve_threads",[f]))}return n.$scope.reviewPanel.commentThreads=a,Cm("loaded_threads"),r((function(){return e.$broadcast("review-panel:layout")}))}))}():!0===n.$scope.loadingThreads&&(n.$scope.loadingThreads=!1,Cm("loaded_threads")));for(var N=0,F=Array.from(l.comments);N<F.length;N++){var q=F[N],B=void 0;h=!0,delete p[q.id],n.$scope.reviewPanel.resolvedThreadIds[q.op.t]?(B=null!=d[q.id]?d[q.id]:d[q.id]={},delete f[q.id]):(B=null!=f[q.id]?f[q.id]:f[q.id]={},delete d[q.id]);var U={type:"comment",thread_id:q.op.t,entry_ids:[q.id],content:q.op.c,offset:q.op.p};for(var H in U)B[H]=U[H]}for(var z in p){p[z];h=!0,delete f[z],delete d[z]}return h&&e.$broadcast("entries:changed"),f}function I(t){a.post("/project/".concat(e.project_id,"/doc/").concat(e.editor.open_doc_id,"/changes/accept"),{change_ids:t,_csrf:window.csrfToken}),e.$broadcast("changes:accept",t),Cm("changes:accept",t)}n.$scope.refreshResolvedCommentsDropdown=function(){n.$scope.reviewPanel.dropdown.loading=!0;var e=D();return e.then((function(){return n.$scope.reviewPanel.dropdown.loading=!1})),e.catch((function(){return n.$scope.reviewPanel.dropdown.loading=!1})),e},e.$on("editor:track-changes:changed",(function(){var t=R(e.editor.open_doc_id);if(!e.editor.showRichText)return e.$broadcast("review-panel:recalculate-screen-positions"),Cm("recalculate-screen-positions",t),e.$broadcast("review-panel:layout")})),e.$on("editor:track-changes:visibility_changed",(function(){return r((function(){return e.$broadcast("review-panel:layout",!1)}))})),e.$on("editor:focus:changed",(function(t,r,a,l){var f=e.editor.open_doc_id,d=C(f);for(var h in n.$scope.reviewPanel.selectedEntryIds=[],n.$scope.reviewPanel.nVisibleSelectedChanges=0,delete d["add-comment"],delete d["bulk-actions"],l&&(d["add-comment"]={type:"add-comment",offset:r,length:a-r},d["bulk-actions"]={type:"bulk-actions",offset:r,length:a-r}),d){var p=d[h],y=!1;if("comment"!==p.type||n.$scope.reviewPanel.resolvedThreadIds[p.thread_id]?"insert"===p.type?(y=p.offset>=r&&p.offset+p.content.length<=a,p.focused=p.offset<=r&&r<=p.offset+p.content.length):"delete"===p.type?(y=r<=p.offset&&p.offset<=a,p.focused=p.offset===r):"aggregate-change"===p.type?(y=p.offset>=r&&p.offset+p.content.length<=a,p.focused=p.offset<=r&&r<=p.offset+p.content.length):["add-comment","bulk-actions"].includes(p.type)&&l&&(p.focused=!0):p.focused=p.offset<=r&&r<=p.offset+p.content.length,y){for(var w=0,x=Array.from(p.entry_ids);w<x.length;w++){var _=x[w];n.$scope.reviewPanel.selectedEntryIds.push(_)}n.$scope.reviewPanel.nVisibleSelectedChanges++}}return e.$broadcast("review-panel:recalculate-screen-positions"),Cm("recalculate-screen-positions",d),e.$broadcast("review-panel:layout")})),n.$scope.acceptChanges=function(t){I(t),f.sendMB("rp-changes-accepted",{view:e.ui.reviewPanelOpen?n.$scope.reviewPanel.subView:"mini"})},n.$scope.rejectChanges=function(t){M(t),f.sendMB("rp-changes-rejected",{view:e.ui.reviewPanelOpen?n.$scope.reviewPanel.subView:"mini"})},e.mouseEnterIndicator=function(){n.$scope.reviewPanel.entryHover=!0},e.mouseLeaveIndicator=function(){n.$scope.reviewPanel.entryHover=!1};var M=function(t){e.$broadcast("changes:reject",t),Cm("changes:reject",t)};n.$scope.showBulkAcceptDialog=function(){return L(!0)},n.$scope.showBulkRejectDialog=function(){return L(!1)};var L=function(t){return l.open({templateUrl:"bulkActionsModalTemplate",controller:"BulkActionsModalController",resolve:{isAccept:function(){return t},nChanges:function(){return n.$scope.reviewPanel.nVisibleSelectedChanges}},scope:e.$new()}).result.then((function(t){return t?(I(n.$scope.reviewPanel.selectedEntryIds.slice()),void f.sendMB("rp-bulk-accept",{view:e.ui.reviewPanelOpen?n.$scope.reviewPanel.subView:"mini",nEntries:n.$scope.reviewPanel.nVisibleSelectedChanges})):(M(n.$scope.reviewPanel.selectedEntryIds.slice()),void f.sendMB("rp-bulk-reject",{view:e.ui.reviewPanelOpen?n.$scope.reviewPanel.subView:"mini",nEntries:n.$scope.reviewPanel.nVisibleSelectedChanges}))}))};function N(t,r){var a=O(t);null!=a&&(a.resolved=!0,a.resolved_by_user=te(r),a.resolved_at=(new Date).toISOString(),n.$scope.reviewPanel.resolvedThreadIds[t]=!0,e.$broadcast("comment:resolve_threads",[t]),Cm("comment:resolve_threads",[t]))}function F(t){var r=O(t);null!=r&&(delete r.resolved,delete r.resolved_by_user,delete r.resolved_at,delete n.$scope.reviewPanel.resolvedThreadIds[t],e.$broadcast("comment:unresolve_thread",t),Cm("comment:unresolve_thread",t))}function q(t){delete n.$scope.reviewPanel.resolvedThreadIds[t],delete n.$scope.reviewPanel.commentThreads[t],e.$broadcast("comment:remove",t),Cm("comment:remove",t)}function B(e,t){var n=O(e);if(null!=n)return n.messages=n.messages.filter((function(e){return e.id!==t})),R()}e.handleTogglerClick=function(t){return t.target.blur(),e.toggleReviewPanel()},n.$scope.addNewComment=function(t){return t.preventDefault(),e.$broadcast("comment:start_adding"),e.toggleReviewPanel()},e.addNewCommentFromKbdShortcut=function(){if(e.project.features.trackChangesVisible)return e.$broadcast("comment:select_line"),Cm("comment:select_line"),e.ui.reviewPanelOpen||e.toggleReviewPanel(),r((function(){return e.$broadcast("review-panel:layout"),e.$broadcast("comment:start_adding")}))},e.startNewComment=function(){return e.$broadcast("comment:select_line"),Cm("comment:select_line"),r((function(){return e.$broadcast("review-panel:layout")}))},n.$scope.submitNewComment=function(t){if(null!=t&&""!==t){var l=e.editor.open_doc_id,d=C(l);if(null!=d["add-comment"]){var h=d["add-comment"],p=h.offset,y=h.length,w=Af().generateId();O(w).submitting=!0,e.$broadcast("comment:add",w,p,y),Cm("comment:add",{threadId:w,offset:p,length:y}),a.post("/project/".concat(e.project_id,"/thread/").concat(w,"/messages"),{content:t,_csrf:window.csrfToken}).catch((function(){return n.showGenericMessageModal("Error submitting comment","Sorry, there was a problem submitting your comment")})),e.$broadcast("editor:clearSelection"),r((function(){return e.$broadcast("review-panel:layout")})),f.sendMB("rp-new-comment",{size:t.length})}}},e.cancelNewComment=function(t){return r((function(){return e.$broadcast("review-panel:layout")}))},e.startReply=function(t){return t.replying=!0,r((function(){return e.$broadcast("review-panel:layout")}))},n.$scope.submitReply=function(t,l){var d=t.thread_id,h=t.replyContent;a.post("/project/".concat(e.project_id,"/thread/").concat(d,"/messages"),{content:h,_csrf:window.csrfToken}).catch((function(){return n.showGenericMessageModal("Error submitting comment","Sorry, there was a problem submitting your comment")}));var p={view:e.ui.reviewPanelOpen?n.$scope.reviewPanel.subView:"mini",size:t.replyContent.length,thread:d};O(d).submitting=!0,t.replyContent="",t.replying=!1,r((function(){return e.$broadcast("review-panel:layout")})),f.sendMB("rp-comment-reply",p)},e.cancelReply=function(t){return t.replying=!1,t.replyContent="",e.$broadcast("review-panel:layout")},n.$scope.resolveComment=function(t,r){var l=C(t)[r];l.focused=!1,a.post("/project/".concat(e.project_id,"/thread/").concat(l.thread_id,"/resolve"),{_csrf:window.csrfToken}),N(l.thread_id,n.$scope.user),f.sendMB("rp-comment-resolve",{view:e.ui.reviewPanelOpen?n.$scope.reviewPanel.subView:"mini"})},n.$scope.unresolveComment=function(t){F(t),a.post("/project/".concat(e.project_id,"/thread/").concat(t,"/reopen"),{_csrf:window.csrfToken}),f.sendMB("rp-comment-reopen")},n.$scope.deleteThread=function(t,n,r){q(r),a({method:"DELETE",url:"/project/".concat(e.project_id,"/doc/").concat(n,"/thread/").concat(r),headers:{"X-CSRF-Token":window.csrfToken}}),f.sendMB("rp-comment-delete")},n.$scope.saveEdit=function(t,n,l){return a.post("/project/".concat(e.project_id,"/thread/").concat(t,"/messages/").concat(n,"/edit"),{content:l,_csrf:window.csrfToken}),r((function(){return e.$broadcast("review-panel:layout")}))},n.$scope.deleteComment=function(t,n){return B(t,n),a({method:"DELETE",url:"/project/".concat(e.project_id,"/thread/").concat(t,"/messages/").concat(n),headers:{"X-CSRF-Token":window.csrfToken}}),r((function(){return e.$broadcast("review-panel:layout")}))},e.setSubView=function(e){n.$scope.reviewPanel.subView=e,f.sendMB("rp-subview-change",{subView:e})},n.$scope.gotoEntry=function(e,t){return n.editorManager.openDocId(e,{gotoOffset:t})},e.toggleFullTCStateCollapse=function(){return e.project.features.trackChanges?n.$scope.reviewPanel.fullTCStateCollapsed=!n.$scope.reviewPanel.fullTCStateCollapsed:(U(),e.openTrackChangesUpgradeModal())};var U=function(){f.send("subscription-funnel","editor-click-feature","real-time-track-changes"),f.sendMB("paywall-prompt",{"paywall-type":"track-changes"})},H=function(t,r,a){null==a&&(a=!1),null==n.$scope.reviewPanel.trackChangesState[t]&&(n.$scope.reviewPanel.trackChangesState[t]={});var l=n.$scope.reviewPanel.trackChangesState[t];if(null==l.syncState||l.syncState===p.SYNCED?(l.value=r,l.syncState=p.SYNCED):l.syncState===p.PENDING&&l.value===r?l.syncState=p.SYNCED:a&&(l.value=r,l.syncState=p.PENDING),t===n.$scope.user.id)return e.editor.wantTrackChanges=r},z=function(t,r){null==r&&(r=!1),n.$scope.reviewPanel.trackChangesOnForEveryone=t;for(var a=e.project,l=0,f=Array.from(a.members);l<f.length;l++){var d=f[l];H(d._id,t,r)}return V(t,r),H(a.owner._id,t,r)};function V(t,r){if(null==r&&(r=!1),n.$scope.reviewPanel.trackChangesOnForGuests=t,S()===x||S()===_)return e.editor.wantTrackChanges=t}var W=function(){var t={};if(n.$scope.reviewPanel.trackChangesOnForEveryone)t.on=!0;else{for(var r in t.on_for={},n.$scope.reviewPanel.trackChangesState){var l=n.$scope.reviewPanel.trackChangesState[r];t.on_for[r]=l.value}n.$scope.reviewPanel.trackChangesOnForGuests&&(t.on_for_guests=!0)}return t._csrf=window.csrfToken,a.post("/project/".concat(e.project_id,"/track_changes"),t)},Z=function(t){if("boolean"==typeof t)return z(t),V(t);var r=e.project;n.$scope.reviewPanel.trackChangesOnForEveryone=!1,V(!0===t.__guests__);for(var a=0,l=Array.from(r.members);a<l.length;a++){var f=l[a];H(f._id,null!=t[f._id]&&t[f._id])}return H(e.project.owner._id,null!=t[e.project.owner._id]&&t[e.project.owner._id])};n.$scope.toggleTrackChangesForEveryone=function(e){return z(e,!0),V(e,!0),W()},n.$scope.toggleTrackChangesForGuests=function(e){return V(e,!0),W()},n.$scope.toggleTrackChangesForUser=function(e,t){return H(t,e,!0),W()},n.socket.on("toggle-track-changes",(function(t){return e.$apply((function(){return Z(t)}))})),e.toggleTrackChangesFromKbdShortcut=function(){if(e.project.features.trackChangesVisible&&e.project.features.trackChanges)return e.toggleTrackChangesForUser(!n.$scope.reviewPanel.trackChangesState[n.$scope.user.id].value,n.$scope.user.id)};var G=function(e){return n.$scope.reviewPanel.trackChangesForGuestsAvailable="tokenBased"===e};e.$watch("project.publicAccesLevel",G),e.$watch("reviewPanel.trackChangesForGuestsAvailable",(function(t){if(null!=t)return function(t){if(!t&&n.$scope.reviewPanel.trackChangesOnForGuests&&!n.$scope.reviewPanel.trackChangesOnForEveryone)return e.toggleTrackChangesForGuests(!1)}(t)}));var K=!1;n.$scope.$on("project:joined",(function(){if(!K){var e=n.$scope.project;return e.features.trackChanges?Z(e.trackChangesState):Z(!1),G(e.publicAccesLevel),K=!0}}));var Y=!1,X={};function J(t){if(null!=t){if(null!=X[t])return;X[t]=!0}if(!Y)return Y=!0,a.get("/project/".concat(e.project_id,"/changes/users")).then((function(t){var r=t.data;return Y=!1,n.$scope.users=e.users={},null!=(null!=n.$scope.user?n.$scope.user.id:void 0)&&(e.users[n.$scope.user.id]=te(n.$scope.user)),function(){for(var t=[],n=0,a=Array.from(r);n<a.length;n++){var l=a[n];null!=l.id?t.push(e.users[l.id]=te(l)):t.push(void 0)}return t}()})).catch((function(){return Y=!1}))}var Q=!1;function ee(e){return e.user=te(e.user),e.timestamp=new Date(e.timestamp),e}function te(e){var t,n,r=(null!=e?e._id:void 0)||(null!=e?e.id:void 0);return null==r?{email:null,name:"Anonymous",isSelf:!1,hue:Ch.ANONYMOUS_HUE,avatar_text:"A"}:(r===window.user_id?(n="You",t=!0):(""===(n=[e.first_name,e.last_name].filter((function(e){return null!=e&&""!==e})).join(" "))&&(n=(null!=e.email?e.email.split("@")[0]:void 0)||"Unknown"),t=!1),{id:r,email:e.email,name:n,isSelf:t,hue:Ch.getHueForUserId(r),avatar_text:[e.first_name,e.last_name].filter((function(e){return null!=e})).map((function(e){return e[0]})).join("")})}e.openTrackChangesUpgradeModal=function(){return l.open({templateUrl:"trackChangesUpgradeModalTemplate",controller:"TrackChangesUpgradeModalController",scope:e.$new()})},window.addEventListener("editor:event",(function(t){var r=t.detail,a=r.type,l=r.payload;switch(a){case"line-height":n.$scope.reviewPanel.rendererData.lineHeight=l,e.$broadcast("review-panel:layout");break;case"track-changes:changed":e.$broadcast("editor:track-changes:changed");break;case"track-changes:visibility_changed":e.$broadcast("editor:track-changes:visibility_changed");break;case"focus:changed":var f=l.from,d=l.to,h=l.empty;e.$broadcast("editor:focus:changed",f,d,!h);break;case"add-new-comment":e.addNewCommentFromKbdShortcut();break;case"toggle-track-changes":e.toggleTrackChangesFromKbdShortcut();break;case"toggle-review-panel":e.toggleReviewPanel()}})),e.reviewPanel.saveEdit=e.saveEdit}]),function(e,t){window.dispatchEvent(new CustomEvent("review-panel:event",{detail:{type:e,payload:t}}))});x.Z.controller("TrackChangesUpgradeModalController",["$scope","$modalInstance",function(e,t){return e.cancel=function(){return t.dismiss()}}]),x.Z.controller("BulkActionsModalController",["$scope","$modalInstance","isAccept","nChanges",function(e,t,n,r){return e.isAccept=n,e.nChanges=r,e.cancel=function(){return t.dismiss()},e.confirm=function(){return t.close(n)}}]);function Em(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Om(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Om(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function Om(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}x.Z.directive("reviewPanelSorted",["$timeout",function(e){return{link:function(e,t,n){var r=0,a=function(e){var t=e.scope.entry.screenPos;return t?e.$wrapper_el.removeClass("rp-entry-hidden"):e.$wrapper_el.addClass("rp-entry-hidden"),t},l=function(n){var l,f,d,h,p,y,w,x,_,S;null==n&&(n=!0),n?t.removeClass("no-animate"):t.addClass("no-animate"),e.ui.reviewPanelOpen?(x=8,_=38,w=57):(x=4,_=4,w=0);for(var k=[],C=0,E=Array.from(t.find(".rp-entry-wrapper"));C<E.length;C++){var O=E[C];l={$wrapper_el:$(O),$indicator_el:$(O).find(".rp-entry-indicator"),$box_el:$(O).find(".rp-entry"),$callout_el:$(O).find(".rp-entry-callout"),scope:angular.element(O).scope()},e.ui.reviewPanelOpen?l.$layout_el=l.$box_el:l.$layout_el=l.$indicator_el,l.height=l.$layout_el.height(),k.push(l)}if(k.sort((function(e,t){return e.scope.entry.offset-t.scope.entry.offset})),0!==k.length){var j=e.reviewPanel.rendererData.lineHeight,T=Math.min(r,k.length-1);for(d=0;d<k.length;d++)if((l=k[d]).scope.entry.focused){T=d;break}var A=k[T],P=a(A),D=P?k.slice(T+1):[].concat(k),R=P?k.slice(0,T):[];r=T,sl_console.log("focused_entry_index",T);var I=function(e,t,n,r){return t<=n?(e.removeClass("rp-entry-callout-inverted"),e.css({top:t+r-1,height:n-t})):(e.addClass("rp-entry-callout-inverted"),e.css({top:n+r,height:t-n}))},M=0,L=0;if(P){var N,F=A.scope.entry.screenPos;M=Math.max(F.y,_),A.$box_el.css({top:M,visibility:"visible"}),A.$indicator_el.css({top:M}),y=null!==(N=F.height)&&void 0!==N?N:j,I(A.$callout_el,F.y,M,y),L=M+A.$layout_el.height()}var q,B=Em(D);try{for(B.s();!(q=B.n()).done;){var U;if(l=q.value,a(l))h=l.scope.entry.screenPos.y,y=null!==(U=l.scope.entry.screenPos.height)&&void 0!==U?U:j,f=l.height,L=(S=Math.max(h,L+x))+f,l.$box_el.css({top:S,visibility:"visible"}),l.$indicator_el.css({top:S}),I(l.$callout_el,h,S,y);sl_console.log("ENTRY",{entry:l.scope.entry,top:S})}}catch(e){B.e(e)}finally{B.f()}var H=M;R.reverse();var z,V=Em(R);try{for(V.s();!(z=V.n()).done;){if(l=z.value,a(l)){var W;h=l.scope.entry.screenPos.y,y=null!==(W=l.scope.entry.screenPos.height)&&void 0!==W?W:j;var Z=h+(f=l.height);H=S=Math.min(Z,H-x)-f,l.$box_el.css({top:S,visibility:"visible"}),l.$indicator_el.css({top:S}),I(l.$callout_el,h,S,y)}sl_console.log("ENTRY",{entry:l.scope.entry,top:S})}}catch(e){V.e(e)}finally{V.f()}return p=S<_?-S+_:0,e.$emit("review-panel:sizes",{overflowTop:p,height:L+w})}};e.$applyAsync((function(){return l()})),e.$on("review-panel:layout",(function(t,n){return null==n&&(n=!0),e.$applyAsync((function(){return l(n)}))})),e.$watch("reviewPanel.rendererData.lineHeight",(function(){return l()}));var f=t,d=t.find(".rp-entry-list-inner");ace.require("ace/lib/event").addMouseWheelListener(f[0],(function(e){var t=e.wheelY,n=parseInt(d.css("top"));return y(-(n-4*t)),w(4*t),e.preventDefault()}));var h=!1,p=function(e,t){return h?h=!1:(d.height(t),d.css({top:-e}))},y=function(t){return e.reviewPanelEventsBridge.emit("externalScroll",t)};e.reviewPanelEventsBridge.on("aceScroll",p),e.$on("$destroy",(function(){return e.reviewPanelEventsBridge.off("aceScroll")})),window.addEventListener("editor:scroll",(function(e){var t=e.detail,n=t.scrollTop,r=t.height,a=t.paddingTop;p(n-a,r)}));var w=function(e){window.dispatchEvent(new CustomEvent("review-panel:event",{detail:{type:"scroll",payload:e}}))};return e.reviewPanelEventsBridge.emit("refreshScrollPosition")}}}]),x.Z.directive("reviewPanelToggle",(function(){return{restrict:"E",scope:{onToggle:"&",ngModel:"=",valWhenUndefined:"=?",isDisabled:"=?",onDisabledClick:"&?",description:"@"},link:function(e){return null==e.disabled&&(e.disabled=!1),e.onChange=function(){return e.onToggle({isOn:e.localModel})},e.handleClick=function(){if(e.disabled&&null!=e.onDisabledClick)return e.onDisabledClick()},e.localModel=e.ngModel,e.$watch("ngModel",(function(t){return null!=e.valWhenUndefined&&null==t&&(t=e.valWhenUndefined),e.localModel=t}))},template:'<fieldset class="input-switch" ng-click="handleClick();">\n<legend class="sr-only">{{description}}</legend>\n<input id="input-switch-{{$id}}" ng-disabled="isDisabled" type="checkbox" class="input-switch-hidden-input" ng-model="localModel" ng-change="onChange()" />\n<label for="input-switch-{{$id}}" class="input-switch-btn"></label>\n</fieldset>'}})),x.Z.directive("changeEntry",["$timeout",function(e){return{restrict:"E",templateUrl:"changeEntryTemplate",scope:{entry:"=",user:"=",permissions:"=",onAccept:"&",onReject:"&",onIndicatorClick:"&",onMouseEnter:"&",onMouseLeave:"&",onBodyClick:"&"},link:function(t,n,r){return t.contentLimit=40,t.isCollapsed=!0,t.needsCollapsing=!1,n.on("click",(function(e){if($(e.target).is(".rp-entry, .rp-entry-description, .rp-entry-body, .rp-entry-action-icon i"))return t.onBodyClick()})),t.toggleCollapse=function(){return t.isCollapsed=!t.isCollapsed,e((function(){return t.$emit("review-panel:layout")}))},t.$watch("entry.content.length",(function(e){return t.needsCollapsing=e>t.contentLimit}))}}}]),x.Z.directive("aggregateChangeEntry",["$timeout",function(e){return{restrict:"E",templateUrl:"aggregateChangeEntryTemplate",scope:{entry:"=",user:"=",permissions:"=",onAccept:"&",onReject:"&",onIndicatorClick:"&",onMouseEnter:"&",onMouseLeave:"&",onBodyClick:"&"},link:function(t,n,r){return t.contentLimit=17,t.isDeletionCollapsed=!0,t.isInsertionCollapsed=!0,t.deletionNeedsCollapsing=!1,t.insertionNeedsCollapsing=!1,n.on("click",(function(e){if($(e.target).is(".rp-entry, .rp-entry-description, .rp-entry-body, .rp-entry-action-icon i"))return t.onBodyClick()})),t.toggleDeletionCollapse=function(){return t.isDeletionCollapsed=!t.isDeletionCollapsed,e((function(){return t.$emit("review-panel:layout")}))},t.toggleInsertionCollapse=function(){return t.isInsertionCollapsed=!t.isInsertionCollapsed,e((function(){return t.$emit("review-panel:layout")}))},t.$watch("entry.metadata.replaced_content.length",(function(e){return t.deletionNeedsCollapsing=e>t.contentLimit})),t.$watch("entry.content.length",(function(e){return t.insertionNeedsCollapsing=e>t.contentLimit}))}}}]),x.Z.directive("commentEntry",["$timeout",function(e){return{restrict:"E",templateUrl:"commentEntryTemplate",scope:{entry:"=",threads:"=",permissions:"=",onResolve:"&",onReply:"&",onIndicatorClick:"&",onMouseEnter:"&",onMouseLeave:"&",onSaveEdit:"&",onDelete:"&",onBodyClick:"&"},link:function(t,n,r){return t.state={animating:!1},n.on("click",(function(e){if($(e.target).is(".rp-entry, .rp-comment-loaded, .rp-comment-content, .rp-comment-reply, .rp-entry-metadata"))return t.onBodyClick()})),t.handleCommentReplyKeyPress=function(e){if(13===e.keyCode&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&(e.preventDefault(),t.entry.replyContent.length>0))return e.target.blur(),t.onReply()},t.animateAndCallOnResolve=function(){return t.state.animating=!0,n.find(".rp-entry").css("top",0),e((function(){return t.onResolve()}),350),!0},t.startEditing=function(e){return e.editing=!0,setTimeout((function(){return t.$emit("review-panel:layout")}))},t.saveEdit=function(e){return e.editing=!1,t.onSaveEdit({comment:e})},t.confirmDelete=function(e){return e.deleting=!0,setTimeout((function(){return t.$emit("review-panel:layout")}))},t.cancelDelete=function(e){return e.deleting=!1,setTimeout((function(){return t.$emit("review-panel:layout")}))},t.doDelete=function(e){return e.deleting=!1,t.onDelete({comment:e})},t.saveEditOnEnter=function(e,n){if(13===e.keyCode&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey)return e.preventDefault(),t.saveEdit(n)}}}}]);var jm="";x.Z.directive("addCommentEntry",(function(){return{restrict:"E",templateUrl:"addCommentEntryTemplate",scope:{onStartNew:"&",onSubmit:"&",onCancel:"&"},link:function(e,t,n){e.state={isAdding:!1,content:jm},e.$on("comment:start_adding",(function(){return e.startNewComment()})),e.$on("$destroy",(function(){jm=e.state.content})),e.startNewComment=function(){e.state.isAdding=!0,e.onStartNew(),setTimeout((function(){return e.$broadcast("comment:new:open")}))},e.cancelNewComment=function(){e.state.isAdding=!1,e.state.content="",e.onCancel()};var r=["PageDown","PageUp"];e.handleCommentKeyDown=function(e){r.includes(e.key)&&e.target.closest("textarea")&&e.preventDefault()},e.handleCommentKeyPress=function(t){13!==t.keyCode||t.shiftKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.state.content.length>0&&e.submitNewComment())},e.submitNewComment=function(t){e.onSubmit({content:e.state.content}),jm=e.state.content,e.state.isAdding=!1,e.state.content=""}}}}));x.Z.directive("bulkActionsEntry",(function(){return{restrict:"E",templateUrl:"bulkActionsEntryTemplate",scope:{onBulkAccept:"&",onBulkReject:"&",nEntries:"="},link:function(e,t,n){return e.bulkAccept=function(){return e.onBulkAccept()},e.bulkReject=function(){return e.onBulkReject()}}}})),x.Z.directive("resolvedCommentEntry",(function(){return{restrict:"E",templateUrl:"resolvedCommentEntryTemplate",scope:{thread:"=",permissions:"=",onUnresolve:"&",onDelete:"&"},link:function(e,t,n){return e.contentLimit=40,e.needsCollapsing=!1,e.isCollapsed=!0,e.toggleCollapse=function(){return e.isCollapsed=!e.isCollapsed},e.$watch("thread.content.length",(function(t){return e.needsCollapsing=t>e.contentLimit}))}}})),x.Z.directive("resolvedCommentsDropdown",(function(){return{restrict:"E",templateUrl:"resolvedCommentsDropdownTemplate",scope:{entries:"=",threads:"=",resolvedIds:"=",docs:"=",permissions:"=",onOpen:"&",onUnresolve:"&",onDelete:"&",isLoading:"="},link:function(e,t,n){var r;e.state={isOpen:!1},e.toggleOpenState=function(){if(e.state.isOpen=!e.state.isOpen,e.state.isOpen)return e.onOpen().then((function(){return r()}))},e.resolvedComments=[],e.handleUnresolve=function(t){return e.onUnresolve({threadId:t}),e.resolvedComments=e.resolvedComments.filter((function(e){return e.threadId!==t}))},e.handleDelete=function(t,n,r){return e.onDelete({entryId:t,docId:n,threadId:r}),e.resolvedComments=e.resolvedComments.filter((function(e){return e.threadId!==r}))};var a=function(t){var n=C().find(e.docs,(function(e){return e.doc.id===t}));return null!=n?n.path:null};return r=function(){return e.resolvedComments=[],function(){var t=[],n=function(n){var r=e.entries[n];t.push(function(){var t=[];for(var l in r){var f=r[l];if("comment"===f.type&&null!=(null!=e.threads[f.thread_id]?e.threads[f.thread_id].resolved:void 0)){var d=angular.copy(e.threads[f.thread_id]);d.content=f.content,d.threadId=f.thread_id,d.entryId=l,d.docId=n,d.docName=a(n),t.push(e.resolvedComments.push(d))}else t.push(void 0)}return t}())};for(var r in e.entries)n(r);return t}()}}}})),x.Z.directive("reviewPanelCollapseHeight",["$parse",function(e){return{restrict:"A",link:function(t,n,r){return t.$watch((function(){return e(r.reviewPanelCollapseHeight)(t)}),(function(e){var t=n.prop("scrollHeight");return t>0?e?n.animate({height:0},150):n.animate({height:t},150):e?n.height(0):void 0}))}}}]),x.Z.filter("notEmpty",(function(){return function(e){return!angular.equals({},e)}})),x.Z.filter("numKeys",(function(){return function(e){return null!=e?Object.keys(e).length:0}})),x.Z.filter("orderOverviewEntries",(function(){return function(e){var t=[];for(var n in e){var r=e[n];r.entry_id=n,t.push(r)}return t.sort((function(e,t){return e.offset-t.offset})),t}}));var $m=__webpack_require__(26501);function Tm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Am(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Am(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Am(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}x.Z.controller("OutlineController",["$scope","ide","eventTracking",function(e,t,n){function r(){return!!e.editor.showRichText||!e.editor.newSourceEditor}e.isTexFile=!1,e.outline=[],e.eventTracking=n,e.show=r(),e.$watch("editor.newSourceEditor",(function(){e.show=r()})),e.$watch("editor.showRichText",(function(){e.show=r()})),e.$on("outline-manager:outline-changed",(function(t,n){e.$applyAsync((function(){e.isTexFile=n.isTexFile,e.outline=n.outline,e.highlightedLine=n.highlightedLine}))})),e.jumpToLine=function(e,r){t.outlineManager.jumpToLine(e,r),n.sendMB("outline-jump-to-line")},e.onToggle=function(t){e.$applyAsync((function(){e.$emit("outline-toggled",t)}))}}]),x.Z.component("outlinePane",(0,S.react2angular)(eu.use($m.Z),["outline","jumpToLine","highlightedLine","eventTracking","onToggle","isTexFile","show"]));var Pm={book:10,part:20,addpart:20,chapter:30,addchap:30,section:40,addsec:40,subsection:50,subsubsection:60,paragraph:70,subparagraph:80},Dm="(".concat(Object.keys(Pm).join("|"),")"),Rm="\\s?\\*?\\s?",Im=new RegExp("".concat("^\\s*\\\\").concat(Dm).concat(Rm).concat("(\\[([^\\]]+)\\])?").concat(Rm).concat("{(.*)}"));function Mm(e){var t=function(e){var t=[];return e.forEach((function(e,n){var r=e.match(Im);if(r){var a=Tm(r,5),l=a[1],f=a[3],d=a[4];t.push({line:n+1,title:Fm(f||d),level:Pm[l]})}})),t}(e.split("\n"));return t}var Lm=/([^\\]*)\\([^{]+){([^}]+)}(.*)/,Nm=/^([^{}]*?({[^{}]*?}[^{}]*?)*)}/;function Fm(e){var t=e.indexOf("}");if(t<0)return e;var n=e.match(Nm);n&&(e=n[1]);var r=e.match(Lm);if(!r)return e.substring(0,t);var a=Tm(r,5),l=a[1],f=a[2],d=a[3],h=a[4];return e="label"===f?"".concat(l).concat(h):"".concat(l).concat(d).concat(h)}var qm=__webpack_require__(79477);function Bm(e){return Bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bm(e)}function Um(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Bm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Bm(l)?l:String(l)),r)}var a,l}var Hm=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ide=t,this.scope=n,this.shareJsDoc=null,this.isTexFile=!1,this.flatOutline=[],this.previousFlatOutline=[],this.outline=[],this.highlightedLine=null,this.ignoreNextScroll=!1,this.ignoreNextCursorUpdate=!1,n.$watch("editor.newSourceEditor",(function(e,t){t&&!e&&(r.updateOutline(),r.broadcastChangeEvent())})),n.$on("doc:after-opened",(function(e,t){t.isNewDoc&&(r.ignoreNextCursorUpdate=!0),r.ignoreNextScroll=!0,r.shareJsDoc=n.editor.sharejs_doc,r.isTexFile=(0,qm.Z)(n.editor.open_doc_name),r.updateOutline(),r.broadcastChangeEvent()})),n.$on("doc:changed",(function(){r.updateOutline(),r.broadcastChangeEvent()})),n.$on("file-view:file-opened",(function(){r.isTexFile=!1,r.updateOutline(),r.broadcastChangeEvent()})),n.$on("cursor:editor:update",(function(e,t){r.ignoreNextCursorUpdate?r.ignoreNextCursorUpdate=!1:(r.updateHighlightedLine(t.row+1),r.broadcastChangeEvent())})),n.$on("scroll:editor:update",(function(e,t){r.ignoreNextScroll?r.ignoreNextScroll=!1:r.updateHighlightedLine(t+1)})),n.$watch("editor.showRichText",(function(){r.ignoreNextScroll=!0,r.ignoreNextCursorUpdate=!0,r.shouldShowOutline()&&(r.updateOutline(),r.broadcastChangeEvent())}))}var t,n,r;return t=e,n=[{key:"shouldShowOutline",value:function(){return!!this.scope.editor.showRichText||!this.scope.editor.newSourceEditor}},{key:"updateOutline",value:function(){if(this.shouldShowOutline()){if(this.isTexFile){var e=this.ide.editorManager.getCurrentDocValue();if(e)return this.flatOutline=Mm(e),void((0,k.isEqual)(this.flatOutline,this.previousFlatOutline)||(this.previousFlatOutline=(0,k.cloneDeep)(this.flatOutline),this.outline=(t=this.flatOutline,n={},r=[],t.forEach((function(e){var t=Object.keys(n),a=t.reverse().find((function(t){return t<e.level})),l=n[a];l?l.children?l.children.push(e):l.children=[e]:r.push(e),n[e.level]=e,t.filter((function(t){return t>e.level})).forEach((function(e){return delete n[e]}))})),r)))}var t,n,r;this.previousFlatOutline=[],this.outline=[]}}},{key:"updateHighlightedLine",value:function(e){for(var t=null,n=0;n<this.flatOutline.length;n++){var r=this.flatOutline[n];if(e<r.line)break;t=r.line}t!==this.highlightedLine&&(this.highlightedLine=t,this.broadcastChangeEvent())}},{key:"jumpToLine",value:function(e,t){this.ignoreNextScroll=!0,this.ide.editorManager.jumpToLine({gotoLine:e,syncToPdf:t})}},{key:"broadcastChangeEvent",value:function(){this.shouldShowOutline()&&this.scope.$broadcast("outline-manager:outline-changed",{isTexFile:this.isTexFile,outline:this.outline,highlightedLine:this.highlightedLine})}}],n&&Um(t.prototype,n),r&&Um(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),zm=Hm;function Vm(e){return Vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vm(e)}function Wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Vm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Vm(l)?l:String(l)),r)}var a,l}function Zm(e,t,n){return t&&Wm(e.prototype,t),n&&Wm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Gm=Zm((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isOverAce=!1,this.pdfDiv=null,this.aceDiv=null,this.handlePdfDivMouseLeave=function(){return n.pdfDiv.addEventListener("wheel",n.dispatchToAce)},this.handlePdfDivMouseEnter=function(){return n.pdfDiv.removeEventListener("wheel",n.dispatchToAce)},this.handleAceDivMouseLeave=function(){return n.isOverAce=!1},this.handleAceDivMouseEnter=function(){return n.isOverAce=!0},this.setListeners=function(){n.isOverAce=!1,null!=n.pdfDiv&&(n.pdfDiv.removeEventListener("mouseleave",n.handlePdfDivMouseLeave),n.pdfDiv.removeEventListener("mouseenter",n.handlePdfDivMouseEnter)),null!=n.aceDiv&&(n.aceDiv.removeEventListener("mouseleave",n.handleAceDivMouseLeave),n.aceDiv.removeEventListener("mouseenter",n.handleAceDivMouseEnter)),n.pdfDiv=document.querySelector(".pdfjs-viewer"),n.aceDiv=document.querySelector(".ace_content"),null!=n.pdfDiv&&(n.pdfDiv.addEventListener("mouseleave",n.handlePdfDivMouseLeave),n.pdfDiv.addEventListener("mouseenter",n.handlePdfDivMouseEnter)),null!=n.aceDiv&&(n.aceDiv.addEventListener("mouseleave",n.handleAceDivMouseLeave),n.aceDiv.addEventListener("mouseenter",n.handleAceDivMouseEnter))},this.dispatchToAce=function(e){if(n.isOverAce)return window.setTimeout((function(){return n.aceDiv.dispatchEvent(e)}),1),e.preventDefault()},t.$on("loaded",(function(){return n.setListeners()}))})),Km=window.brandVariation;x.Z.factory("CobrandingDataService",(function(){return{isProjectCobranded:function(){return null!=Km},getLogoImgUrl:function(){return null!=Km?Km.logo_url:void 0},getSubmitBtnHtml:function(){return null!=Km?Km.submit_button_html:void 0},getBrandVariationName:function(){return null!=Km?Km.name:void 0},getBrandVariationHomeUrl:function(){return null!=Km?Km.home_url:void 0},getPublishGuideHtml:function(){return null!=Km?Km.publish_guide_html:void 0},getPartner:function(){return null!=Km?Km.partner:void 0},hasBrandedMenu:function(){return null!=Km?Km.branded_menu:void 0},getBrandId:function(){return null!=Km?Km.brand_id:void 0},getBrandVariationId:function(){return null!=Km?Km.id:void 0}}})),x.Z.factory("settings",["ide","eventTracking",function(e,t){return{saveSettings:function(n){for(var r=0,a=Array.from(Object.keys(n));r<a.length;r++){var l=a[r],f=l,d=n[l];t.sendMB("setting-changed",{changedSetting:f,changedSettingVal:d})}return n._csrf=window.csrfToken,e.$http.post("/user/settings",n)},saveProjectSettings:function(t){return t._csrf=window.csrfToken,e.$http.post("/project/".concat(e.project_id,"/settings"),t)},saveProjectAdminSettings:function(t){return t._csrf=window.csrfToken,e.$http.post("/project/".concat(e.project_id,"/settings/admin"),t)}}}]),x.Z.controller("SettingsController",["$scope","settings","ide",function(e,t,n){var r=this;e.overallThemesList=window.overallThemes,e.ui={loadingStyleSheet:!1};["default","vim","emacs"].includes(e.settings.mode)||(e.settings.mode="default"),["pdfjs","native"].includes(e.settings.pdfViewer)||(e.settings.pdfViewer="pdfjs"),null==e.settings.fontFamily||["monaco","lucida"].includes(e.settings.fontFamily)||delete e.settings.fontFamily,null==e.settings.lineHeight||["compact","normal","wide"].includes(e.settings.lineHeight)||delete e.settings.lineHeight,e.fontSizeAsStr=function(t){return null!=t&&(e.settings.fontSize=t),e.settings.fontSize.toString()},e.getValidMainDocs=function(){var t=[];return e.docs&&(t=e.docs.filter((function(t){return(0,qm.Z)(t.doc.name)||e.project.rootDoc_id===t.doc.id}))),t},e.$watch("settings.editorTheme",(function(e,n){if(e!==n)return t.saveSettings({editorTheme:e})})),e.$watch("settings.overallTheme",(function(n,r){if(n!==r){var a=C().find(e.overallThemesList,(function(e){return e.val===n}));if(null!=a)return function(t){e.ui.loadingStyleSheet=!0;var n=document.querySelector("head"),r=document.getElementById("main-stylesheet"),a=document.createElement("link");a.addEventListener("load",(function(t){return e.$applyAsync((function(){return e.ui.loadingStyleSheet=!1,n.removeChild(r)}))})),a.setAttribute("rel","stylesheet"),a.setAttribute("id","main-stylesheet"),a.setAttribute("href",t.path),n.appendChild(a)}(a),t.saveSettings({overallTheme:n})}})),e.$watch("settings.fontSize",(function(e,n){if(e!==n)return t.saveSettings({fontSize:parseInt(e,10)})})),e.$watch("settings.mode",(function(e,n){if(e!==n)return t.saveSettings({mode:e})})),e.$watch("settings.autoComplete",(function(e,n){if(e!==n)return t.saveSettings({autoComplete:e})})),e.$watch("settings.autoPairDelimiters",(function(e,n){if(e!==n)return t.saveSettings({autoPairDelimiters:e})})),e.$watch("settings.pdfViewer",(function(e,n){if(e!==n)return t.saveSettings({pdfViewer:e})})),e.$watch("settings.syntaxValidation",(function(e,n){if(e!==n)return t.saveSettings({syntaxValidation:e})})),e.$watch("settings.fontFamily",(function(e,n){if(e!==n)return t.saveSettings({fontFamily:e})})),e.$watch("settings.lineHeight",(function(e,n){if(e!==n)return t.saveSettings({lineHeight:e})})),e.$watch("project.spellCheckLanguage",(function(e,n){if(!r.ignoreUpdates)return null!=n&&e!==n?(t.saveProjectSettings({spellCheckLanguage:e}),t.saveSettings({spellCheckLanguage:e})):void 0})),e.$watch("project.compiler",(function(e,n){if(!r.ignoreUpdates)return null!=n&&e!==n?t.saveProjectSettings({compiler:e}):void 0})),e.$watch("project.imageName",(function(e,n){if(!r.ignoreUpdates)return null!=n&&e!==n?t.saveProjectSettings({imageName:e}):void 0}));var a=0;return e.$watch("project.rootDoc_id",(function(n,l){r.ignoreUpdates||void 0!==l&&"readOnly"!==e.permissionsLevel&&n!==l&&t.saveProjectSettings({rootDocId:n}).then((function(){a=0})).catch((function(){a++,setTimeout((function(){a>10&&(r.ignoreUpdates=!0),e.$apply((function(){e.project.rootDoc_id=l})),r.ignoreUpdates=!1}))}))})),n.socket.on("compilerUpdated",(function(t){return r.ignoreUpdates=!0,e.$apply((function(){return e.project.compiler=t})),delete r.ignoreUpdates})),n.socket.on("imageNameUpdated",(function(t){return r.ignoreUpdates=!0,e.$apply((function(){return e.project.imageName=t})),delete r.ignoreUpdates})),n.socket.on("spellCheckLanguageUpdated",(function(t){return r.ignoreUpdates=!0,e.$apply((function(){return e.project.spellCheckLanguage=t})),delete r.ignoreUpdates}))}]);var Ym=function(e){var t=(0,Ra.Z)();return E.useCallback((function(n){t.current&&e(n)}),[e,t])};function Xm(e){return Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(e)}function Jm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(n),!0).forEach((function(t){ng(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ng(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Xm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xm(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rg={status:"idle",data:null,error:null};var ig=function(e){var t=E.useRef(tg(tg({},rg),e)),n=Jm(E.useReducer((function(e,t){return tg(tg({},e),t)}),t.current),2),r=n[0],a=r.status,l=r.data,f=r.error,d=n[1],h=Ym(d),p=E.useCallback((function(e){return h({data:e,status:"resolved"})}),[h]),y=E.useCallback((function(e){return h({error:e,status:"rejected"})}),[h]),w=E.useCallback((function(){return h(t.current)}),[h]),x=E.useCallback((function(e){return h({status:"pending"}),e.then((function(e){return p(e),e}),(function(e){return y(e),Promise.reject(e)}))}),[h,p,y]);return{isIdle:"idle"===a,isLoading:"pending"===a,isError:"rejected"===a,isSuccess:"resolved"===a,setData:p,setError:y,error:f,status:a,data:l,runAsync:x,reset:w}};function og(e){return function(e){if(Array.isArray(e))return ag(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ag(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ag(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sg=function(e,t){return e.localeCompare(t)};function lg(e){var t,n=e.handleHide,r=(0,Qe.$)().t,a=ig(),l=a.isError,f=a.runAsync,d=(0,E.useCallback)((function(e){eh.Z.remove(e),f((0,U.ty)("/spelling/unlearn",{body:{word:e}})).catch(console.error)}),[f]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:r("edit_dictionary")})}),(0,D.jsxs)(_o.Z.Body,{children:[l?(0,D.jsx)(ts.Z,{bsStyle:"danger",children:r("generic_something_went_wrong")}):null,(null===(t=eh.Z.learnedWords)||void 0===t?void 0:t.size)>0?(0,D.jsx)("ul",{className:"list-unstyled dictionary-entries-list",children:og(eh.Z.learnedWords).sort(sg).map((function(e){return(0,D.jsxs)("li",{className:"dictionary-entry",children:[(0,D.jsx)("span",{className:"dictionary-entry-name",children:e}),(0,D.jsx)(vo.Z,{id:"tooltip-remove-learned-word-".concat(e),description:r("edit_dictionary_remove"),overlayProps:{delay:0},children:(0,D.jsx)(Ri.Z,{bsStyle:"danger",bsSize:"xs",onClick:function(){return d(e)},children:(0,D.jsx)(Ii.Z,{type:"trash-o",accessibilityLabel:r("edit_dictionary_remove")})})})]},e)}))}):(0,D.jsx)("p",{className:"dictionary-empty-body text-center",children:(0,D.jsx)("i",{children:r("edit_dictionary_empty")})})]}),(0,D.jsx)(_o.Z.Footer,{children:(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",onClick:n,children:r("done")})})]})}var cg=(0,T.Z)((function(e){var t=e.show,n=e.handleHide;return(0,D.jsx)(So.Z,{animation:!0,show:t,onHide:n,id:"dictionary-modal",bsSize:"small",children:(0,D.jsx)(lg,{handleHide:n})})}));x.Z.controller("DictionaryModalController",["$scope",function(e){e.show=!1,e.handleHide=function(){e.$applyAsync((function(){e.show=!1,window.dispatchEvent(new CustomEvent("learnedWords:reset"))}))},e.openModal=function(){e.$applyAsync((function(){e.show=!0}))}}]);function ug(){var e=(0,Qe.$)().t,t=(0,Pl.Im)(),n=t.pdfDownloadUrl,r=t.pdfUrl;return r?(0,D.jsxs)("a",{href:n||r,target:"_blank",rel:"noreferrer",children:[(0,D.jsx)(Ii.Z,{type:"file-pdf-o",modifier:"2x"}),(0,D.jsx)("br",{}),"PDF"]}):(0,D.jsx)(vo.Z,{id:"disabled-pdf-download",description:e("please_compile_pdf_before_download"),overlayProps:{placement:"bottom"},children:(0,D.jsxs)("div",{className:"link-disabled",children:[(0,D.jsx)(Ii.Z,{type:"file-pdf-o",modifier:"2x"}),(0,D.jsx)("br",{}),"PDF"]})})}function fg(){var e=(0,Qe.$)().t,t=(0,A.d2)()._id;return(0,D.jsxs)("a",{href:"/project/".concat(t,"/download/zip"),target:"_blank",rel:"noreferrer",children:[(0,D.jsx)(Ii.Z,{type:"file-archive-o",modifier:"2x"}),(0,D.jsx)("br",{}),e("source")]})}function dg(){var e=(0,Qe.$)().t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("h4",{className:"mt-0",children:e("download")}),(0,D.jsxs)("ul",{className:"list-unstyled nav nav-downloads text-center",children:[(0,D.jsx)("li",{children:(0,D.jsx)(fg,{})}),(0,D.jsx)("li",{children:(0,D.jsx)(ug,{})})]})]})}function hg(e){return hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(e)}function pg(){pg=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==hg(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function mg(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function gg(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){mg(l,r,a,f,d,"next",e)}function d(e){mg(l,r,a,f,d,"throw",e)}f(void 0)}))}}function vg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bg(Object(n),!0).forEach((function(t){xg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xg(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==hg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==hg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hg(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}x.Z.component("dictionaryModal",(0,S.react2angular)(eu.use(cg),["show","handleHide"]));var _g={modalOpen:!1,templateDetails:{exists:!1},description:"",loading:!1,fetchTemplateDetailsLoading:!1,publishTemplateLoading:!1,unpublishTemplateLoading:!1,error:!1},Sg=function(e){return e.SET_SHOW_MODAL="SET_SHOW_MODAL",e.FETCH_TEMPLATE_DETAILS="FETCH_TEMPLATE_DETAILS",e.FETCH_TEMPLATE_DETAILS_ERROR="FETCH_TEMPLATE_DETAILS_ERROR",e.FETCH_TEMPLATE_DETAILS_SUCCESS="FETCH_TEMPLATE_DETAILS_SUCCESS",e.PUBLISH_TEMPLATE="PUBLISH_TEMPLATE",e.PUBLISH_TEMPLATE_ERROR="PUBLISH_TEMPLATE_ERROR",e.PUBLISH_TEMPLATE_SUCCESS="PUBLISH_TEMPLATE_SUCCESS",e.UNPUBLISH_TEMPLATE="UNPUBLISH_TEMPLATE",e.UNPUBLISH_TEMPLATE_ERROR="UNPUBLISH_TEMPLATE_ERROR",e.UNPUBLISH_TEMPLATE_SUCCESS="UNPUBLISH_TEMPLATE_SUCCESS",e.SET_DESCRIPTION="SET_DESCRIPTION",e}(Sg||{}),kg=function(e,t){var n;switch(t.type){case Sg.SET_SHOW_MODAL:return wg(wg({},e),{},{modalOpen:t.modalOpen});case Sg.FETCH_TEMPLATE_DETAILS:return wg(wg({},e),{},{loading:!0,fetchTemplateDetailsLoading:!0});case Sg.FETCH_TEMPLATE_DETAILS_ERROR:return wg(wg({},e),{},{loading:!1,fetchTemplateDetailsLoading:!1,error:!0});case Sg.FETCH_TEMPLATE_DETAILS_SUCCESS:return wg(wg({},e),{},{loading:!1,templateDetails:t.templateDetails,description:null!==(n=t.templateDetails.description)&&void 0!==n?n:"",modalOpen:!0,fetchTemplateDetailsLoading:!1});case Sg.PUBLISH_TEMPLATE:return wg(wg({},e),{},{loading:!0,publishTemplateLoading:!0});case Sg.PUBLISH_TEMPLATE_ERROR:return wg(wg({},e),{},{loading:!1,error:!0});case Sg.PUBLISH_TEMPLATE_SUCCESS:return wg(wg({},e),{},{loading:!1,publishTemplateLoading:!1});case Sg.UNPUBLISH_TEMPLATE:return wg(wg({},e),{},{loading:!0,unpublishTemplateLoading:!0});case Sg.UNPUBLISH_TEMPLATE_ERROR:return wg(wg({},e),{},{loading:!1,error:!0});case Sg.UNPUBLISH_TEMPLATE_SUCCESS:return wg(wg({},e),{},{loading:!1,unpublishTemplateLoading:!1});case Sg.SET_DESCRIPTION:return wg(wg({},e),{},{description:t.description});default:return e}};var Cg=(0,E.createContext)(void 0);function Eg(e){var t,n,r,a,l,f,d,h,p,y,w,x=(t=vg((0,E.useReducer)(kg,_g),2),n=t[0],r=t[1],a=(0,A.d2)()._id,l=ig().runAsync,f=ig().runAsync,d=ig().runAsync,h=ig().runAsync,p=(0,E.useCallback)(gg(pg().mark((function e(){return pg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:Sg.PUBLISH_TEMPLATE}),e.prev=1,e.next=4,f((0,U.ty)("/project/".concat(a,"/template/description"),{body:{_csrf:window.csrfToken,description:n.description}}));case 4:return e.next=6,d((0,U.ty)("/project/".concat(a,"/template/publish"),{body:{_csrf:window.csrfToken}}));case 6:r({type:Sg.PUBLISH_TEMPLATE_SUCCESS}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r({type:Sg.PUBLISH_TEMPLATE_ERROR});case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),[n,a,d,f]),y=(0,E.useCallback)((function(){r({type:Sg.UNPUBLISH_TEMPLATE}),h((0,U.ty)("/project/".concat(a,"/template/unpublish"),{body:{_csrf:window.csrfToken}})).then((function(){return r({type:Sg.UNPUBLISH_TEMPLATE_SUCCESS})})).catch((function(){return r({type:Sg.UNPUBLISH_TEMPLATE_ERROR})}))}),[a,h]),w=(0,E.useCallback)((function(){r({type:Sg.FETCH_TEMPLATE_DETAILS}),l((0,U.xA)("/project/".concat(a,"/template"))).then((function(e){var t=wg({},e);t.publishedDate=Vp()(e.publishedDate).format("Do MMM YYYY, h:mm a"),r({type:Sg.FETCH_TEMPLATE_DETAILS_SUCCESS,templateDetails:t})})).catch((function(){return r({type:Sg.FETCH_TEMPLATE_DETAILS_ERROR})}))}),[a,l]),wg(wg({},n),{},{openModal:w,closeModal:function(){return r({type:Sg.SET_SHOW_MODAL,modalOpen:!1})},setDescription:function(e){return r({type:Sg.SET_DESCRIPTION,description:e})},publishTemplate:p,unpublishTemplate:y}));return(0,D.jsx)(Cg.Provider,wg({value:x},e))}Cg.displayName="ManageTemplateContext";var Og=function(){var e=(0,E.useContext)(Cg);if(void 0===e)throw new Error("useManageTemplateContext must be used in a ManageTemplateProvider");return e};function jg(e){var t=e.children,n=e.onClick,r=e.icon,a=e.disabled,l=void 0!==a&&a,f=e.disabledAccesibilityText,d=e.type,h=void 0===d?"button":d,p=e.href;return l?(0,D.jsxs)("div",{className:"left-menu-button link-disabled",children:[(0,D.jsx)(Ii.Z,{type:r.type,fw:r.fw}),(0,D.jsx)("span",{children:t}),f?(0,D.jsx)("span",{className:"sr-only",children:f}):null]}):"button"===h?(0,D.jsxs)("button",{onClick:n,className:"left-menu-button",children:[(0,D.jsx)(Ii.Z,{type:r.type,fw:r.fw}),(0,D.jsx)("span",{children:t})]}):(0,D.jsxs)("a",{href:p,target:"_blank",rel:"noreferrer",className:"left-menu-button",children:[(0,D.jsx)(Ii.Z,{type:r.type,fw:r.fw}),(0,D.jsx)("span",{children:t})]})}function $g(){var e=(0,Qe.$)().t,t=Og(),n=t.openModal,r=t.fetchTemplateDetailsLoading;return(0,D.jsxs)(jg,{icon:{type:"external-link",fw:!0},onClick:n,children:[(0,D.jsx)("span",{children:e("publish_as_template")}),r?(0,D.jsx)(Ii.Z,{type:"spinner",spin:!0,style:{marginLeft:"5px"}}):null]})}function Tg(){var e=(0,Qe.$)().t,t=Og(),n=t.templateDetails,r=t.description,a=t.setDescription,l=t.loading,f=t.error,d=(0,xf.Z)("ol-showTemplatesServerPro"),h=(0,E.useCallback)((function(e){a(e.target.value)}),[a]);return(0,D.jsx)(_o.Z.Body,{className:"modal-body-share",children:f?e("problem_talking_to_publishing_service"):(0,D.jsxs)("div",{children:[(0,D.jsxs)("form",{children:[(0,D.jsx)("label",{htmlFor:"Description",children:e("template_description")}),(0,D.jsx)("div",{className:"templateDetails",children:e("template_title_taken_from_project_title")}),(0,D.jsx)(ns.Z,{children:(0,D.jsx)(is.Z,{componentClass:"textarea",rows:5,name:"Description",onChange:h,value:r,disabled:l})})]}),n.exists?(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsxs)("p",{className:"mb-0",children:[(0,D.jsx)("span",{className:"me-1",children:e("project_last_published_at")}),(0,D.jsx)("strong",{children:n.publishedDate})]}),d?(0,D.jsx)("a",{href:n.canonicalUrl,children:e("view_in_template_gallery")}):null]}):null]})})}function Ag(){var e=(0,Qe.$)().t,t=Og(),n=t.templateDetails,r=t.publishTemplateLoading,a=t.unpublishTemplateLoading,l=t.publishTemplate,f=t.unpublishTemplate,d=t.loading,h=t.error,p=t.closeModal,y=(0,E.useCallback)((function(){var t=e("publish");return r?t="".concat(e("publishing"),"…"):null!=n&&n.exists&&(t=e("republish")),t}),[r,n,e]);return h?null:(0,D.jsxs)(_o.Z.Footer,{children:[(0,D.jsx)(Ri.Z,{onClick:p,children:e("cancel")}),null!=n&&n.exists?(0,D.jsx)(Ri.Z,{bsStyle:"info",onClick:f,disabled:d,children:a?"".concat(e("unpublishing"),"…"):e("unpublish")}):null,(0,D.jsx)(Ri.Z,{bsStyle:"primary",onClick:l,disabled:d,children:y()})]})}var Pg=E.memo((function(){var e=(0,Qe.$)().t,t=Og(),n=t.modalOpen,r=t.closeModal;return(0,D.jsxs)(So.Z,{animation:!0,show:n,onHide:r,id:"manage-template-modal",children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:e("publish_as_template")})}),(0,D.jsx)(Tg,{}),(0,D.jsx)(Ag,{})]})})),Dg=(0,T.Z)(Pg);function Rg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ig(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ig(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ig(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mg(){var e=(0,oe._i)().permissionsLevel,t=Rg((0,tc.Z)("project.features",!0),1)[0];return(0,xf.Z)("ol-showTemplatesServerPro")?"owner"!==e?null:null!=t&&t.templates?(0,D.jsxs)(Eg,{children:[(0,D.jsx)($g,{}),(0,D.jsx)(Dg,{})]}):null:null}function Lg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ng(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ng(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ng(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fg(e){var t=e.handleHide,n=e.inFlight,r=e.setInFlight,a=e.handleAfterCloned,l=e.projectId,f=e.projectName,d=(0,Qe.$)().t,h=Lg((0,E.useState)(),2),p=h[0],y=h[1],w=Lg((0,E.useState)("".concat(f," (Copy)")),2),x=w[0],_=w[1],S=(0,E.useMemo)((function(){return x.trim().length>0}),[x]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:d("copy_project")})}),(0,D.jsxs)(_o.Z.Body,{children:[(0,D.jsx)("form",{id:"clone-project-form",onSubmit:function(e){e.preventDefault(),S&&(y(!1),r(!0),(0,U.ty)("/project/".concat(l,"/clone"),{body:{projectName:x}}).then((function(e){a(e)})).catch((function(e){var t=e.response,n=e.data;400===(null==t?void 0:t.status)?y(n.message):y(!0)})).finally((function(){r(!1)})))},children:(0,D.jsxs)(ns.Z,{children:[(0,D.jsx)(rs.Z,{htmlFor:"clone-project-form-name",children:d("new_name")}),(0,D.jsx)(is.Z,{id:"clone-project-form-name",type:"text",placeholder:"New Project Name",required:!0,value:x,onChange:function(e){return _(e.target.value)},autoFocus:!0})]})}),p&&(0,D.jsx)(ts.Z,{bsStyle:"danger",children:p.length?p:d("generic_something_went_wrong")})]}),(0,D.jsxs)(_o.Z.Footer,{children:[(0,D.jsx)(Ri.Z,{type:"button",bsStyle:null,className:"btn-secondary",disabled:n,onClick:t,children:d("cancel")}),(0,D.jsx)(Ri.Z,{form:"clone-project-form",type:"submit",bsStyle:"primary",disabled:n||!S,children:n?(0,D.jsxs)(D.Fragment,{children:[d("copying"),"…"]}):d("copy")})]})]})}function qg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ug(e){var t=e.show,n=e.handleHide,r=e.handleAfterCloned,a=e.projectId,l=e.projectName,f=qg((0,E.useState)(!1),2),d=f[0],h=f[1],p=(0,E.useCallback)((function(){d||n()}),[n,d]);return(0,D.jsx)(So.Z,{animation:!0,show:t,onHide:p,id:"clone-project-modal",backdrop:d?"static":void 0,children:(0,D.jsx)(Fg,{handleHide:p,inFlight:d,setInFlight:h,handleAfterCloned:r,projectId:a,projectName:l})})}Fg.propTypes={handleHide:j().func.isRequired,inFlight:j().bool,setInFlight:j().func.isRequired,handleAfterCloned:j().func.isRequired,projectId:j().string,projectName:j().string},Ug.propTypes={handleHide:j().func.isRequired,show:j().bool.isRequired,handleAfterCloned:j().func.isRequired,projectId:j().string,projectName:j().string};var Hg=(0,E.memo)(Ug),zg=E.memo((function(e){var t=e.show,n=e.handleHide,r=e.openProject,a=(0,A.d2)(),l=a._id,f=a.name;return f?(0,D.jsx)(Hg,{handleHide:n,show:t,handleAfterCloned:r,projectId:l,projectName:f}):null}));zg.propTypes={handleHide:j().func.isRequired,show:j().bool.isRequired,openProject:j().func.isRequired};var Vg=(0,T.Z)(zg);function Wg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gg(){var e=Wg((0,E.useState)(!1),2),t=e[0],n=e[1],r=(0,Qe.$)().t,a=Ia(),l=(0,E.useCallback)((function(e){var t=e.project_id;a.assign("/project/".concat(t))}),[a]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(jg,{onClick:function(){return n(!0)},icon:{type:"copy",fw:!0},children:r("copy_project")}),(0,D.jsx)(Vg,{show:t,handleHide:function(){return n(!1)},openProject:l})]})}var Kg=__webpack_require__(2571),Yg=__webpack_require__(18556),Xg=__webpack_require__(83654);function Jg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ev(e,t){var n=Jg((0,E.useState)(!0),2),r=n[0],a=n[1],l=Jg((0,E.useState)(!1),2),f=l[0],d=l[1],h=Jg((0,E.useState)(),2),p=h[0],y=h[1],w=(0,os.Z)().signal;return(0,E.useEffect)((function(){(function(e,t,n){var r="";return t&&(r="?clsiserverid=".concat(t)),(0,U.xA)("/project/".concat(e,"/wordcount").concat(r),n)})(e,t,{signal:w}).then((function(e){y(e.texcount)})).catch((function(){d(!0)})).finally((function(){a(!1)}))}),[w,t,e]),{data:p,error:f,loading:r}}function tv(e){var t=e.handleHide,n=(0,A.d2)()._id,r=(0,Tl.I)().clsiServerId,a=(0,Qe.$)().t,l=ev(n,r),f=l.data,d=l.error,h=l.loading;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:a("word_count")})}),(0,D.jsxs)(_o.Z.Body,{children:[h&&!d&&(0,D.jsxs)("div",{className:"loading",children:[(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0,fw:!0})," ",a("loading"),"…"]}),d&&(0,D.jsx)(ts.Z,{bsStyle:"danger",children:a("generic_something_went_wrong")}),f&&(0,D.jsxs)(Kg.Z,{fluid:!0,children:[f.messages&&(0,D.jsx)(Yg.Z,{children:(0,D.jsx)(Xg.Z,{xs:12,children:(0,D.jsx)(ts.Z,{bsStyle:"danger",children:(0,D.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:f.messages})})})}),(0,D.jsxs)(Yg.Z,{children:[(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsxs)("div",{className:"pull-right",children:[a("total_words"),":"]})}),(0,D.jsx)(Xg.Z,{xs:6,children:f.textWords})]}),(0,D.jsxs)(Yg.Z,{children:[(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsxs)("div",{className:"pull-right",children:[a("headers"),":"]})}),(0,D.jsx)(Xg.Z,{xs:6,children:f.headers})]}),(0,D.jsxs)(Yg.Z,{children:[(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsxs)("div",{className:"pull-right",children:[a("math_inline"),":"]})}),(0,D.jsx)(Xg.Z,{xs:6,children:f.mathInline})]}),(0,D.jsxs)(Yg.Z,{children:[(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsxs)("div",{className:"pull-right",children:[a("math_display"),":"]})}),(0,D.jsx)(Xg.Z,{xs:6,children:f.mathDisplay})]})]})]}),(0,D.jsx)(_o.Z.Footer,{children:(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",onClick:t,children:a("done")})})]})}tv.propTypes={handleHide:j().func.isRequired};var nv=E.memo((function(e){var t=e.show,n=e.handleHide;return(0,D.jsx)(So.Z,{animation:!0,show:t,onHide:n,id:"clone-project-modal",children:(0,D.jsx)(tv,{handleHide:n})})}));nv.propTypes={show:j().bool,handleHide:j().func.isRequired};var rv=(0,T.Z)(nv);function iv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ov(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ov(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ov(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function av(){var e=iv((0,E.useState)(!1),2),t=e[0],n=e[1],r=(0,Pl.Im)().pdfUrl,a=(0,Qe.$)().t;return(0,D.jsxs)(D.Fragment,{children:[r?(0,D.jsx)(jg,{onClick:function(){return n(!0)},icon:{type:"eye",fw:!0},children:a("word_count")}):(0,D.jsx)(vo.Z,{id:"disabled-word-count",description:a("please_compile_pdf_before_word_count"),overlayProps:{placement:"top"},children:(0,D.jsx)("div",{children:(0,D.jsx)(jg,{icon:{type:"eye",fw:!0},disabled:!0,disabledAccesibilityText:a("please_compile_pdf_before_word_count"),children:a("word_count")})})}),(0,D.jsx)(rv,{show:t,handleHide:function(){return n(!1)}})]})}var sv=[{import:r,path:"/overleaf/services/web/modules/templates/frontend/js/editor-left-menu/components/actions-manage-template.tsx"}];function lv(){var e=(0,Qe.$)().t,t=(0,xf.Z)("ol-anonymous");return!0===t||void 0===t?null:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("h4",{children:e("actions")}),(0,D.jsxs)("ul",{className:"list-unstyled nav",children:[(0,D.jsx)("li",{children:(0,D.jsx)(Gg,{})}),sv.map((function(e){var t=e.import.default,n=e.path;return(0,D.jsx)("li",{children:(0,D.jsx)(t,{})},n)})),(0,D.jsx)("li",{children:(0,D.jsx)(av,{})})]})]})}var cv={horizontal:j().bool,inline:j().bool,componentClass:zo()},uv=function(e){function t(){return e.apply(this,arguments)||this}return(0,Do.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.horizontal,n=e.inline,r=e.componentClass,a=e.className,l=(0,Po.Z)(e,["horizontal","inline","componentClass","className"]),f=(0,sa.D9)(l),d=f[0],h=f[1],p=[];return t&&p.push((0,sa.O4)(d,"horizontal")),n&&p.push((0,sa.O4)(d,"inline")),E.createElement(r,(0,Ao.Z)({},h,{className:se()(a,p)}))},t}(E.Component);uv.propTypes=cv,uv.defaultProps={horizontal:!1,inline:!1,componentClass:"form"};var fv=(0,sa.Pn)("form",uv);function dv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pv(e){var t=e.show,n=e.handleHide,r=(0,La.SE)().email,a=(0,Qe.$)().t,l=(0,os.Z)().signal,f=dv((0,E.useState)(),2),d=f[0],h=f[1],p=dv((0,E.useState)(),2),y=p[0],w=p[1],x=dv((0,E.useState)(!1),2),_=x[0],S=x[1],k=dv((0,E.useState)(),2),C=k[0],O=k[1],j=(0,E.useCallback)((function(e){e.preventDefault();var t=new FormData(e.target),a={message:t.get("message"),projectUrl:t.get("projectUrl"),subject:t.get("subject"),important_message:t.get("important_message"),inbox:"support"};r&&(a.email=r),S(!0),(0,U.ty)("/support",{body:a,signal:l}).then((function(){n()})).catch((function(e){S(!1),O(e)}))}),[n,l,r]);return(0,D.jsxs)(So.Z,{show:t,onHide:n,children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:a("contact_us")})}),(0,D.jsxs)(_o.Z.Body,{className:"contact-us-modal",children:[C&&(0,D.jsx)(ts.Z,{bsStyle:"danger",className:"row-spaced-small",children:a("generic_something_went_wrong")}),(0,D.jsxs)(fv,{id:"contact-us-form",name:"contact-form","aria-label":"Contact Us",onSubmit:j,children:[(0,D.jsxs)(ns.Z,{validationState:""===d?"error":null,children:[(0,D.jsx)(rs.Z,{children:a("subject")}),(0,D.jsx)(is.Z,{name:"subject","aria-label":"Subject",maxLength:255,onChange:function(e){return h(e.target.value)}}),(0,D.jsx)(is.Z.Feedback,{})]}),(0,D.jsxs)(ns.Z,{children:[(0,D.jsx)(rs.Z,{children:"".concat(a("project_url")," (").concat(a("optional"),")")}),(0,D.jsx)(is.Z,{name:"projectUrl","aria-label":"Affected Project URL Optional",defaultValue:window.location.href})]}),(0,D.jsxs)(ns.Z,{validationState:""===y?"error":null,children:[(0,D.jsx)(rs.Z,{children:a("contact_message_label")}),(0,D.jsx)(is.Z,{componentClass:"textarea","aria-label":"Message",name:"message",onChange:function(e){return w(e.target.value)}}),(0,D.jsx)(is.Z.Feedback,{})]}),(0,D.jsx)(ns.Z,{className:"hidden",children:(0,D.jsx)(is.Z,{componentClass:"textarea","aria-label":"important_message",name:"important_message"})}),(0,D.jsx)(ns.Z,{className:"text-center",children:(0,D.jsx)(Ri.Z,{bsStyle:"primary",bsSize:"large",form:"contact-us-form",type:"submit","aria-label":"Submit",disabled:_||!d||!y,children:a("contact_us")})})]})]})]})}pv.propTypes={show:j().bool,handleHide:j().func.isRequired};var mv=pv;function gv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yv={import:a,path:"/overleaf/services/web/modules/support/frontend/js/components/contact-us-modal"},bv=null==yv?void 0:yv.import.default,wv=function(){var e=gv((0,E.useState)(!1),2),t=e[0],n=e[1],r=(0,E.useCallback)((function(e){null==e||e.preventDefault(),n(!1)}),[]),a=(0,E.useCallback)((function(e){null==e||e.preventDefault(),n(!0)}),[]);return{modal:bv&&(0,D.jsx)(bv,{show:t,handleHide:r}),hideModal:r,showModal:a}};function xv(){var e=wv(),t=e.modal,n=e.showModal,r=(0,Qe.$)().t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(jg,{onClick:n,icon:{type:"question",fw:!0},children:r("contact_us")}),t]})}function _v(){var e=(0,Qe.$)().t;return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(jg,{type:"link",href:"/learn",icon:{type:"book",fw:!0},children:e("documentation")})})}function Sv(){return(0,D.jsx)("div",{className:"hotkeys-modal-bottom-text",children:(0,D.jsx)($o.c,{i18nKey:"a_more_comprehensive_list_of_keyboard_shortcuts",components:[(0,D.jsx)("a",{href:"/articles/overleaf-keyboard-shortcuts/qykqfvmxdnjf",target:"_blank"})]})})}function kv(e){var t=e.animation,n=void 0===t||t,r=e.handleHide,a=e.show,l=e.isMac,f=void 0!==l&&l,d=e.trackChangesVisible,h=void 0!==d&&d,p=e.newSourceEditor,y=void 0!==p&&p,w=(0,Qe.$)().t,x=y?"Shift + L":"L",_=f?"Cmd":"Ctrl",S="".concat(w("hotkeys"),y?" (Source editor)":" (Legacy source editor)");return(0,D.jsxs)(So.Z,{bsSize:"large",onHide:r,show:a,animation:n,children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:S})}),(0,D.jsxs)(_o.Z.Body,{className:"hotkeys-modal",children:[(0,D.jsx)("h3",{children:w("common")}),(0,D.jsxs)(Yg.Z,{children:[(0,D.jsxs)(Xg.Z,{xs:4,children:[(0,D.jsx)(Cv,{combination:"".concat(_," + F"),description:w("hotkey_find_and_replace")}),(0,D.jsx)(Cv,{combination:"".concat(_," + Enter"),description:w("hotkey_compile")})]}),(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"".concat(_," + Z"),description:w("hotkey_undo")})}),(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"".concat(_," + Y"),description:w("hotkey_redo")})})]}),(0,D.jsx)("h3",{children:w("navigation")}),(0,D.jsxs)(Yg.Z,{children:[(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"".concat(_," + Home"),description:w("hotkey_beginning_of_document")})}),(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"".concat(_," + End"),description:w("hotkey_end_of_document")})}),(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"".concat(_," + ").concat(x),description:w("hotkey_go_to_line")})})]}),(0,D.jsx)("h3",{children:w("editing")}),(0,D.jsxs)(Yg.Z,{children:[(0,D.jsxs)(Xg.Z,{xs:4,children:[(0,D.jsx)(Cv,{combination:"".concat(_," + /"),description:w("hotkey_toggle_comment")}),(0,D.jsx)(Cv,{combination:"".concat(_," + D"),description:w("hotkey_delete_current_line")}),(0,D.jsx)(Cv,{combination:"".concat(_," + A"),description:w("hotkey_select_all")})]}),(0,D.jsxs)(Xg.Z,{xs:4,children:[(0,D.jsx)(Cv,{combination:"Ctrl + U",description:w("hotkey_to_uppercase")}),(0,D.jsx)(Cv,{combination:"Ctrl + Shift + U",description:w("hotkey_to_lowercase")}),(0,D.jsx)(Cv,{combination:"Tab",description:w("hotkey_indent_selection")})]}),(0,D.jsxs)(Xg.Z,{xs:4,children:[(0,D.jsx)(Cv,{combination:"".concat(_," + B"),description:w("hotkey_bold_text")}),(0,D.jsx)(Cv,{combination:"".concat(_," + I"),description:w("hotkey_italic_text")})]})]}),(0,D.jsx)("h3",{children:w("autocomplete")}),(0,D.jsxs)(Yg.Z,{children:[(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"Ctrl + Space",description:w("hotkey_autocomplete_menu")})}),(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"Up / Down",description:w("hotkey_select_candidate")})}),(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"Enter / Tab",description:w("hotkey_insert_candidate")})})]}),(0,D.jsx)("h3",{children:(0,D.jsx)($o.c,{i18nKey:"autocomplete_references",components:{code:(0,D.jsx)("code",{})}})}),(0,D.jsx)(Yg.Z,{children:(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"Ctrl + Space ",description:w("hotkey_search_references")})})}),h&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("h3",{children:w("review")}),(0,D.jsxs)(Yg.Z,{children:[(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"".concat(_," + J"),description:w("hotkey_toggle_review_panel")})}),(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"".concat(_," + Shift + A"),description:w("hotkey_toggle_track_changes")})}),(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsx)(Cv,{combination:"".concat(_," + Shift + C"),description:w("hotkey_add_a_comment")})})]})]}),(0,D.jsx)(Sv,{})]}),(0,D.jsx)(_o.Z.Footer,{children:(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",onClick:r,children:w("ok")})})]})}function Cv(e){var t=e.combination,n=e.description;return(0,D.jsxs)("div",{className:"hotkey","data-test-selector":"hotkey",children:[(0,D.jsx)("span",{className:"combination",children:t}),(0,D.jsx)("span",{className:"description",children:n})]})}function Ev(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ov(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ov(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ov(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jv(){var e,t=Ev((0,E.useState)(!1),2),n=t[0],r=t[1],a=Ev((0,tc.Z)("editor.newSourceEditor"),1)[0],l=(0,Qe.$)().t,f=(0,A.d2)().features,d=/Mac/.test(null===(e=window.navigator)||void 0===e?void 0:e.platform);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(jg,{onClick:function(){return r(!0)},icon:{type:"keyboard-o",fw:!0},children:l("show_hotkeys")}),(0,D.jsx)(kv,{show:n,handleHide:function(){return r(!1)},isMac:d,trackChangesVisible:null==f?void 0:f.trackChangesVisible,newSourceEditor:a})]})}function $v(){var e=(0,Qe.$)().t,t=(0,xf.Z)("ol-showSupport");return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("h4",{children:e("help")}),(0,D.jsxs)("ul",{className:"list-unstyled nav",children:[(0,D.jsx)("li",{children:(0,D.jsx)(jv,{})}),t?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("li",{children:(0,D.jsx)(_v,{})}),(0,D.jsx)("li",{children:(0,D.jsx)(xv,{})})]}):null]})]})}function Tv(e){return Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(e)}function Av(){Av=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==Tv(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function Pv(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function Dv(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){Pv(l,r,a,f,d,"next",e)}function d(e){Pv(l,r,a,f,d,"throw",e)}f(void 0)}))}}function Rv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Iv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Iv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Iv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mv(e){return Lv.apply(this,arguments)}function Lv(){return(Lv=Dv(Av().mark((function e(t){return Av().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nv(e){var t=e.status,n=e.description;return(0,D.jsxs)("span",{children:[(0,D.jsx)(Fv,{status:t}),(0,D.jsxs)("span",{className:"small",children:[" ",n]})]})}function Fv(e){switch(e.status){case"success":return(0,D.jsx)(Ii.Z,{type:"check-circle",fw:!0,className:"settings-widget-status-icon status-success"});case"error":return(0,D.jsx)(Ii.Z,{type:"times-circle",fw:!0,className:"settings-widget-status-icon status-error"});case"pending":return(0,D.jsx)(Ii.Z,{type:"circle",fw:!0,className:"settings-widget-status-icon status-pending",spin:!0});default:return null}}function qv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}kv.propTypes={animation:j().bool,isMac:j().bool,show:j().bool.isRequired,handleHide:j().func.isRequired,trackChangesVisible:j().bool,newSourceEditor:j().bool},Cv.propTypes={combination:j().string.isRequired,description:j().string.isRequired};var Uv=5e3;function Hv(){var e=(0,os.Z)().signal,t=(0,Qe.$)().t,n=(0,Ra.Z)(),r=qv((0,E.useState)("default"),2),a=r[0],l=r[1],f=(0,E.useCallback)((function(){return(0,U.xA)("/user/tpds/queues",{signal:e}).then((function(e){0===e.tpdsToWeb&&0===e.webToTpds?l("synced"):e.tpdsToWeb>0&&e.webToTpds>0?l("both"):e.tpdsToWeb>0?l("in"):e.webToTpds>0?l("out"):l("error")})).catch((function(){l("error")}))}),[e]);return(0,E.useEffect)((function(){var e;return function t(){f().finally((function(){n.current&&(e=window.setTimeout(t,Uv))}))}(),function(){return clearTimeout(e)}}),[f,a,n]),(0,D.jsx)(Nv,{status:zv(a),description:Vv(t,a)})}function zv(e){switch(e){case"synced":return"success";case"error":return"error";default:return"pending"}}function Vv(e,t){switch(t){case"in":return(0,D.jsxs)(D.Fragment,{children:[e("dropbox_sync_in"),"…"]});case"out":return(0,D.jsxs)(D.Fragment,{children:[e("dropbox_sync_out"),"…"]});case"both":return(0,D.jsxs)(D.Fragment,{children:[e("dropbox_sync_both"),"…"]});case"synced":return(0,D.jsx)(D.Fragment,{children:e("dropbox_synced")});case"error":return(0,D.jsx)(D.Fragment,{children:e("dropbox_sync_error")});default:return(0,D.jsx)(D.Fragment,{children:e("dropbox_checking_sync_status")})}}function Wv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gv(e){var t=e.dropbox,n=t.syncNow,r=t.syncNowStatus,a=t.userIsLinkedToDropbox,l=t.linkToDropbox,f=t.startedLinkProcess,d=(0,Qe.$)().t,h=Wv((0,E.useState)(!1),2),p=h[0],y=h[1],w=Wv((0,tc.Z)("project",!0),1)[0],x=Wv((0,tc.Z)("user",!0),1)[0];(0,E.useEffect)((function(){x&&!x.features.dropbox&&(0,nc.send)("subscription-funnel","editor-click-feature","dropbox")}),[x]);var _=(0,E.useMemo)((function(){if(w)return w.owner._id===x.id||w.members.some((function(e){return e._id===x.id}))}),[w,x]),S=Wv((0,E.useState)(null),2),k=S[0],C=S[1],O=Wv((0,E.useState)(!1),2),j=O[0],T=O[1],A=(0,os.Z)().signal;(0,E.useEffect)((function(){_&&a&&(0,U.xA)("/project/".concat(w._id,"/dropbox"),{signal:A}).then((function(e){e.dropboxFolderName=e.dropboxFolderName||w.name,T(!1),C(e)})).catch((function(){T(!0)}))}),[_,w,A,a]);var P=null;switch(r){case"in-flight":case"running":P=(0,D.jsx)(ts.Z,{bsStyle:"info",children:d("dropbox_sync_now_running")});break;case"rate-limited":P=(0,D.jsx)(ts.Z,{bsStyle:"warning",children:d("dropbox_sync_now_rate_limited")});break;case"error":P=(0,D.jsx)(ts.Z,{bsStyle:"warning",children:d("generic_something_went_wrong")})}return x.features.dropbox?a?_?j?(0,D.jsx)("p",{"data-testid":"dropbox-sync-error",children:d("dropbox_sync_error")}):k?(0,D.jsxs)("div",{className:"small","data-testid":"dropbox-will-appear",children:[d("this_project_will_appear_in_your_dropbox_folder_at")," ",(0,D.jsx)("a",{href:"https://www.dropbox.com/home/Apps/".concat(encodeURIComponent(window.ExposedSettings.dropboxAppName),"/").concat(encodeURIComponent(k.dropboxFolderName)),rel:"noopener noreferrer",target:"_blank",children:(0,D.jsxs)("strong",{children:["Apps/",window.ExposedSettings.dropboxAppName,"/",k.dropboxFolderName]})}),(0,D.jsx)("hr",{}),"in-flight"===r?(0,D.jsx)(Nv,{status:"pending",description:(0,D.jsxs)(D.Fragment,{children:[d("dropbox_sync_out"),"…"]})}):(0,D.jsx)(Hv,{}),(0,D.jsx)("hr",{}),(0,D.jsx)($o.c,{i18nKey:"dropbox_sync_troubleshoot",children:(0,D.jsx)(Ri.Z,{className:"btn-inline-link",disabled:"in-flight"===r||"running"===r,onClick:n})}),P&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),P]})]}):(0,D.jsxs)("div",{children:[(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0}),"  ",(0,D.jsx)("span",{className:"small",children:d("checking_dropbox_status")})]}):(0,D.jsx)("div",{children:d("dropbox_for_link_share_projs")}):f?(0,D.jsx)("p",{className:"small text-center",children:d("refresh_page_after_linking_dropbox")}):(0,D.jsxs)("span",{children:[d("account_not_linked_to_dropbox"),"  ",(0,D.jsx)(Ri.Z,{bsStyle:"info",onClick:l,children:d("update_dropbox_settings")})]}):(0,D.jsxs)("div",{children:[(0,D.jsx)("h4",{className:"teaser-title",children:d("easily_manage_your_project_files_everywhere")}),(0,D.jsx)("img",{className:"teaser-img",src:"/img/teasers/dropbox/teaser-dropbox-editor.png",alt:"Dropbox"}),p&&(0,D.jsx)("p",{className:"small",children:d("refresh_page_after_starting_free_trial")}),(0,D.jsx)(Yg.Z,{children:(0,D.jsx)(Xg.Z,{md:8,mdOffset:2,children:(0,D.jsxs)("ul",{className:"list-unstyled",children:[(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",d("manage_files_from_your_dropbox_folder")]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",d("have_an_extra_backup")]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",d("work_with_non_overleaf_users")]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",d("work_offline")]})]})})}),(0,D.jsx)(Yg.Z,{className:"text-center",children:(0,D.jsx)(ws.Z,{source:"dropbox",handleClick:function(){return y(!0)},children:d("try_it_for_free")})})]})}function Kv(e){var t=e.handleHide,n=(0,Qe.$)().t,r=function(){var e=Rv((0,E.useState)(!1),2),t=e[0],n=e[1],r=Rv((0,E.useState)(!1),2),a=r[0],l=r[1],f=Rv((0,E.useState)(!1),2),d=f[0],h=f[1],p=(0,A.d2)()._id,y=(0,os.Z)().signal;(0,E.useEffect)((function(){(0,U.xA)("/dropbox/status",{signal:y}).then((function(e){n(!0),l(e.registered)}))}),[y]);var w=(0,E.useCallback)((function(){h(!0),window.open("/user/settings#project-sync")}),[]),x=Rv((0,E.useState)("idle"),2),_=x[0],S=x[1];return{gotLinkStatus:t,userIsLinkedToDropbox:a,linkToDropbox:w,startedLinkProcess:d,syncNow:(0,E.useCallback)(Dv(Av().mark((function e(){var t;return Av().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("in-flight"!==_){e.next=2;break}return e.abrupt("return");case 2:return S("in-flight"),e.prev=3,e.next=6,(0,U.ty)("/project/".concat(p,"/dropbox/sync-now"),{signal:y});case 6:return e.next=8,Mv(5e3);case 8:S("running"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),S(429===(null===(t=e.t0.response)||void 0===t?void 0:t.status)?"rate-limited":"error");case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),[p,_,y]),syncNowStatus:_}}();return(0,D.jsxs)(So.Z,{show:!0,onHide:t,children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:n("dropbox_sync")})}),(0,D.jsx)(_o.Z.Body,{className:"modal-body-share",children:r.gotLinkStatus?(0,D.jsx)(Gv,{dropbox:r}):(0,D.jsxs)("div",{children:[(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0}),"  ",(0,D.jsx)("span",{className:"small",children:n("checking_dropbox_status")})]})})]})}function Yv(e){var t=e.show,n=e.handleHide;return t?(0,D.jsx)(Kv,{handleHide:n}):null}function Xv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qv(){var e=Xv((0,E.useState)(!1),2),t=e[0],n=e[1];return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(jg,{onClick:function(){return n(!0)},icon:{type:"dropbox",fw:!0},children:"Dropbox"}),(0,D.jsx)(Yv,{show:t,handleHide:function(){return n(!1)}})]})}function ey(e){return function(e){if(Array.isArray(e))return ry(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ny(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||ny(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ny(e,t){if(e){if("string"==typeof e)return ry(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ry(e,t):void 0}}function ry(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Gv.propTypes={dropbox:j().shape({userIsLinkedToDropbox:j().bool,linkToDropbox:j().func.isRequired,startedLinkProcess:j().bool,syncNow:j().func.isRequired,syncNowStatus:j().string.isRequired})},Kv.propTypes={handleHide:j().func.isRequired},Yv.propTypes={show:j().bool.isRequired,handleHide:j().func.isRequired};var iy=(0,E.createContext)(void 0);function oy(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()>0?1:-1}function ay(e){var t=e.children,n=(0,xf.Z)("ol-personalAccessTokens"),r=(0,os.Z)().signal,a=ty((0,E.useState)(null==n),2),l=a[0],f=a[1],d=ty((0,E.useState)(n||[]),2),h=d[0],p=d[1],y=(0,E.useCallback)((function(){return(0,U.xA)("/oauth/personal-access-tokens",{signal:r})}),[r]),w=(0,E.useCallback)((function(){y().then((function(e){e.sort(oy),p(e)})).catch((function(e){console.error(e),f(e.message)}))}),[y]),x=(0,E.useCallback)((function(){return(0,U.ty)("/oauth/personal-access-tokens",{signal:r}).then((function(e){var t=e.accessToken;return w(),t}))}),[r,w]),_=(0,E.useCallback)((function(e){return(0,U.K$)("/oauth/personal-access-tokens/".concat(e),{signal:r}).then((function(){var t=h.find((function(t){return t._id===e}));if(t){var n=ey(h),r=h.indexOf(t);n.splice(r,1),p(n)}w()}))}),[r,w,h]),S=(0,E.useMemo)((function(){return{tokens:h,getTokens:y,createToken:x,revokeToken:_,error:l}}),[h,y,x,_,l]);return(0,D.jsx)(iy.Provider,{value:S,children:t})}function sy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ly(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ly(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ly(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cy(e){var t=e.delay,n=void 0===t?0:t,r=(0,Qe.$)().t,a=sy((0,E.useState)(!1),2),l=a[0],f=a[1];return(0,E.useEffect)((function(){var e=window.setTimeout((function(){f(!0)}),n);return function(){window.clearTimeout(e)}}),[n]),l?(0,D.jsxs)("div",{className:"loading",children:[(0,D.jsx)(Ii.Z,{type:"refresh",fw:!0,spin:!0})," ",r("loading"),"…"]}):null}cy.propTypes={delay:j().number};var uy=cy;function fy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hy=function(e){var t,n,r=e.content,a=e.tooltipId,l=e.kind,f=void 0===l?"icon":l,d=(0,Qe.$)().t,h=fy((0,E.useState)(!1),2),p=h[0],y=h[1],w=(0,E.useCallback)((function(){navigator.clipboard.writeText(r).then((function(){y(!0),window.setTimeout((function(){y(!1)}),1500)}))}),[r]);return null!==(t=navigator.clipboard)&&void 0!==t&&t.writeText?(n="text"===f?(0,D.jsx)(Ri.Z,{onClick:w,className:"btn-secondary btn-xs",bsStyle:null,"aria-label":"Copy",children:d("copy")}):(0,D.jsx)(Ri.Z,{onClick:w,bsSize:"xsmall",bsStyle:"link",className:"copy-button","aria-label":"Copy",children:p?(0,D.jsx)(Ii.Z,{type:"check"}):(0,D.jsx)(Ii.Z,{type:"clipboard"})}),(0,D.jsx)(vo.Z,{id:a,description:p?"".concat(d("copied"),"!"):d("copy"),overlayProps:{delayHide:p?1e3:250,shouldUpdatePosition:!0},children:n})):null};function py(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return my(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return my(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function my(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gy(e){var t=e.show,n=e.handleHide,r=(0,Qe.$)().t,a=(0,A.d2)()._id,l=function(){var e=(0,E.useContext)(iy);if(!e)throw new Error("PersonalAccessTokenContext is only available inside PersonalAccessTokenProvider");return e}(),f=l.getTokens,d=l.createToken,h=py((0,E.useState)("loading"),2),p=h[0],y=h[1],w=py((0,E.useState)(""),2),x=w[0],_=w[1];(0,E.useEffect)((function(){t&&(y("loading"),_(""),f().then((function(e){0===(null==e?void 0:e.length)?y("generate-token"):y("has-tokens")})).catch((function(e){console.error(e),y("get-tokens-error")})))}),[t,f]);var S="".concat(window.gitBridgePublicBaseUrl,"/").concat(a),k=new URL(S).protocol,C=k+"//git@"+S.substring(k.length+2),O="git clone ".concat(C);return(0,D.jsxs)(So.Z,{bsSize:"large",onHide:n,show:t,animation:!0,children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:r("clone_with_git")})}),(0,D.jsxs)(_o.Z.Body,{children:[(0,D.jsx)("p",{children:r("git_bridge_modal_tokens_description")}),(0,D.jsxs)("p",{className:"text-centered",children:[(0,D.jsx)("span",{className:"small",children:(0,D.jsxs)("kbd",{children:[O," "]})}),(0,D.jsx)("span",{children:(0,D.jsx)(hy,{kind:"text",content:O,tooltipId:"git-clone-copy-tooltip"})})]}),(0,D.jsx)(vy,{modalState:p,token:x})]}),(0,D.jsxs)(_o.Z.Footer,{children:[(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",onClick:n,children:r("close")}),(0,D.jsx)(_y,{modalState:p,handleGenerateTokenClick:function(){y("show-token"),d().then((function(e){_(e)})).catch((function(e){console.error(e),y("create-token-error")}))}})]})]})}function vy(e){var t=e.modalState,n=e.token;switch(t){case"has-tokens":case"get-tokens-error":return(0,D.jsx)(yy,{});case"generate-token":return(0,D.jsx)(by,{});case"show-token":return(0,D.jsx)(wy,{token:n});case"create-token-error":return(0,D.jsx)(xy,{});default:return null}}function yy(){return(0,D.jsx)($o.c,{i18nKey:"git_bridge_modal_use_previous_token",components:[(0,D.jsx)("a",{href:"/learn/how-to/Git_integration_authentication_tokens",target:"_blank",rel:"noreferrer noopener"})]})}function by(){return(0,D.jsx)($o.c,{i18nKey:"git_bridge_modal_click_generate",components:[(0,D.jsx)("strong",{})]})}function wy(e){var t=e.token,n=(0,Qe.$)().t;return t?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("p",{children:n("git_bridge_modal_enter_authentication_token")}),(0,D.jsxs)("p",{className:"text-centered",children:[(0,D.jsx)("span",{children:(0,D.jsxs)("kbd",{children:[t," "]})}),(0,D.jsx)("span",{children:(0,D.jsx)(hy,{kind:"text",content:t,tooltipId:"git-modal-token-copy-tooltip"})})]}),(0,D.jsx)("p",{children:(0,D.jsx)($o.c,{i18nKey:"git_bridge_modal_see_once",components:[(0,D.jsx)("a",{href:"/learn/how-to/Git_integration_authentication_tokens",target:"_blank",rel:"noreferrer noopener"})]})})]}):(0,D.jsx)("div",{className:"text-centered",children:(0,D.jsx)(uy,{})})}function xy(){var e=(0,Qe.$)().t;return(0,D.jsx)(ts.Z,{className:"text-centered",bsStyle:"danger",children:e("something_went_wrong_server")})}function _y(e){var t=e.modalState,n=e.handleGenerateTokenClick;switch(t){case"has-tokens":case"get-tokens-error":return(0,D.jsx)(Sy,{});case"generate-token":return(0,D.jsx)(ky,{handleGenerateTokenClick:n});default:return null}}function Sy(){var e=(0,Qe.$)().t;return(0,D.jsx)("a",{className:"btn btn-primary",href:"/user/settings",target:"_blank",rel:"noreferrer noopener",children:e("go_to_settings")})}function ky(e){var t=e.handleGenerateTokenClick,n=(0,Qe.$)().t;return(0,D.jsx)(Ri.Z,{bsStyle:"primary",onClick:t,children:n("generate_token")})}var Cy=function(e){var t=e.show,n=e.handleHide;return(0,D.jsx)(ay,{children:(0,D.jsx)(gy,{show:t,handleHide:n})})};__webpack_require__(72508);function Ey(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jy=function(e){var t,n=e.link,r=e.tooltipId,a=(0,Qe.$)().t,l=Ey((0,E.useState)(!1),2),f=l[0],d=l[1],h=(0,E.useCallback)((function(){navigator.clipboard.writeText(n).then((function(){d(!0),window.setTimeout((function(){d(!1)}),1500)}))}),[n]);return null!==(t=navigator.clipboard)&&void 0!==t&&t.writeText?(0,D.jsx)(vo.Z,{id:r,description:f?"Copied!":(0,D.jsx)($o.c,{i18nKey:"copy"}),overlayProps:{delayHide:f?1e3:250,shouldUpdatePosition:!0},children:(0,D.jsx)(Ri.Z,{onClick:h,bsSize:"xsmall",bsStyle:"link",className:"copy-button","aria-label":a("copy"),children:f?(0,D.jsx)(Ii.Z,{type:"check"}):(0,D.jsx)(Ii.Z,{type:"clipboard"})})}):null};function $y(e){var t=e.projectId,n="".concat(window.gitBridgePublicBaseUrl,"/").concat(t),r="git clone ".concat(n);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("p",{children:(0,D.jsx)($o.c,{i18nKey:"git_bridge_modal_description",components:{code:(0,D.jsx)("code",{})}})}),(0,D.jsx)("pre",{className:"text-center",children:(0,D.jsxs)("kbd",{children:[(0,D.jsx)("span",{children:r}),(0,D.jsx)(jy,{link:r,tooltipId:"git-clone-copy-tooltip"})]})})]})}$y.propTypes={projectId:j().string.isRequired};var Ty=$y;function Ay(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Py(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Py(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Py(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dy=function(){var e=(0,Qe.$)().t,t=Ay((0,E.useState)(!1),2),n=t[0],r=t[1];return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"teaser-video-container",children:(0,D.jsxs)("video",{className:"teaser-video",autoPlay:!0,loop:!0,children:[(0,D.jsx)("source",{src:"/img/teasers/git-bridge/teaser-git-bridge.mp4",type:"video/mp4"}),(0,D.jsx)("img",{src:"/img/teasers/git-bridge/teaser-git-bridge.gif",alt:e("demonstrating_git_integration")})]})}),(0,D.jsx)(Yg.Z,{children:(0,D.jsxs)(Xg.Z,{md:8,mdOffset:2,children:[(0,D.jsx)("h4",{className:"teaser-title",children:e("collaborate_online_and_offline")}),n&&(0,D.jsx)("p",{className:"small teaser-refresh-label",children:e("refresh_page_after_starting_free_trial")}),(0,D.jsxs)("ul",{className:"list-unstyled",children:[(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",e("get_collaborative_benefits")]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",e("use_your_own_machine")]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",e("store_your_work")]})]})]})}),(0,D.jsx)(Yg.Z,{className:"text-center",children:(0,D.jsx)(ws.Z,{buttonProps:{bsStyle:"primary"},source:"git-bridge",handleClick:function(){return r(!0)},children:e("try_it_for_free")})})]})};function Ry(e){var t=e.show,n=e.handleHide,r=e.type,a=(0,Qe.$)().t;return(0,D.jsxs)(So.Z,{bsSize:"large",onHide:n,show:t,animation:!0,children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:a("clone_with_git")})}),(0,D.jsx)(_o.Z.Body,{children:(0,D.jsx)(Iy,{type:r})}),(0,D.jsx)(_o.Z.Footer,{children:(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",onClick:n,children:a("close")})})]})}function Iy(e){var t=e.type,n=(0,A.d2)()._id;return"show_url"===t?(0,D.jsx)(Ty,{projectId:n}):(0,D.jsx)(Dy,{})}var My=E.memo(Ry);var Ly=function(e){var t=e.show,n=e.handleHide,r=e.type;return(0,xf.Z)("ol-showPersonalAccessToken")?(0,D.jsx)(ay,{children:(0,D.jsx)(Cy,{show:t,handleHide:n})}):(0,D.jsx)(My,{show:t,handleHide:n,type:r})};function Ny(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qy(){var e=Ny((0,E.useState)(!1),2),t=e[0],n=e[1],r=(0,Qe.$)().t;return"readOnly"===(0,oe._i)().permissionsLevel?null:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(jg,{onClick:function(){return n(!0)},icon:{type:"code-fork",fw:!0},children:r("git")}),(0,D.jsx)(Ly,{show:t,handleHide:function(){return n(!1)},type:"show_url"})]})}function By(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hy=function(){var e=(0,Qe.$)().t,t=window.ExposedSettings.appName,n=By((0,E.useState)(!1),2),r=n[0],a=n[1];return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("h4",{className:"teaser-title",children:["Push to GitHub, pull to ",t," "]}),r&&(0,D.jsx)("p",{className:"text-center small",children:e("refresh_page_after_starting_free_trial")}),(0,D.jsx)(Yg.Z,{children:(0,D.jsx)(Xg.Z,{md:8,mdOffset:2,children:(0,D.jsxs)("ul",{className:"list-unstyled",children:[(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"}),"   Work offline, then pull to ",t]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"}),"   Import existing projects from GitHub"]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"}),"   Have an extra backup"]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"}),"   Work with other GitHub users"]})]})})}),(0,D.jsx)(Yg.Z,{className:"text-center",children:(0,D.jsx)(ws.Z,{source:"github",buttonProps:{bsStyle:"primary"},handleClick:function(){return a(!0)},children:e("try_it_for_free")})})]})};function zy(e){var t=e.refreshState,n=(0,Qe.$)().t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("p",{children:(0,D.jsx)($o.c,{i18nKey:"link_to_github_description"})}),(0,D.jsx)("p",{children:(0,D.jsx)(Ri.Z,{bsStyle:"primary",type:"button",onClick:function(){var e=window.open("/github-sync/beginAuth","github-sync-auth","width=700,height=500"),n=setInterval((function(){var r;try{r=e&&e.location&&e.location.pathname}catch(e){r=null}if("/github-sync/linked"===r)return e.close(),t(),clearInterval(n)}),1e3)},children:n("link_to_github")})})]})}zy.propTypes={refreshState:j().func.isRequired};var Vy=zy;function Wy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gy(e){var t=e.refreshState,n=e.projectName,r=e.projectId,a=Wy((0,E.useState)(""),2),l=a[0],f=a[1],d=Wy((0,E.useState)(!0),2),h=d[0],p=d[1],y=Wy((0,E.useState)(!1),2),w=y[0],x=y[1],_=Wy((0,E.useState)({}),2),S=_[0],k=_[1],C=Wy((0,E.useState)([]),2),O=C[0],j=C[1],T=Wy((0,E.useState)(null),2),A=T[0],P=T[1],R=Wy((0,E.useState)(n),2),I=R[0],M=R[1],L=Wy((0,E.useState)(!1),2),N=L[0],F=L[1],q=Wy((0,E.useState)("private"),2),B=q[0],H=q[1],z=(0,Ra.Z)();(0,E.useEffect)((function(){(0,U.xA)("/user/github-sync/orgs").then((function(e){k(e.user),j(e.orgs),P(e.user.login)})).catch((function(e){z.current&&x(e)})).finally((function(){p(!1)}))}),[z]);var V=(0,E.useCallback)((function(){F(!0);var e={name:I,description:l,private:"private"===B};null!=A&&A!==S.login&&(e.org=A),(0,U.ty)("/project/".concat(r,"/github-sync/export"),{body:e}).then((function(){t()})).catch((function(e){x(e)})).finally((function(){F(!1)}))}),[l,I,A,r,t,B,S]),W=(0,Qe.$)().t;function Z(){if(504===w.info.statusCode)return W("github_timeout_error");if(401===w.info.statusCode)return W("github_credentials_expired");if(w.data.error)switch(w.data.error){case"GithubWorkflowFilesError":return W("github_workflow_files_error");case"GitFolderError":return W("github_git_folder_error");case"GithubFileNameError":return(0,D.jsxs)(D.Fragment,{children:[W("github_file_name_error"),(0,D.jsx)("ul",{children:(0,D.jsx)("li",{children:w.data.detail})})]})}return W("github_validation_check")}function displayError(){return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(ts.Z,{"aria-label":Z(),bsStyle:"danger",children:[Z(),401===w.info.statusCode?(0,D.jsx)("p",{className:"text-center row-spaced-small",children:(0,D.jsx)(Ri.Z,{bsStyle:"primary",href:"/github-sync/beginAuth",children:W("reauthorize_github_account")})}):w.data.error&&"GithubWorkflowFilesError"===w.data.error?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("p",{className:"text-center row-spaced-small",children:(0,D.jsx)(Ri.Z,{bsStyle:"primary",href:"/github-sync/addWorkflowScope",target:"_blank",children:W("github_workflow_authorize")})}),(0,D.jsx)("p",{className:"text-small ",children:W("github_workflow_files_delete_github_repo")})]}):null]})})}return h?(0,D.jsxs)("div",{className:"loading",children:[(0,D.jsx)(Ii.Z,{modifier:"fw",type:"refresh",spin:!0}),(0,D.jsx)("span",{children:W("checking_project_github_status")})]}):function hasUnrecoverableError(){return!!w&&401===w.info.statusCode}()?displayError():(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("h4",{children:[" ",W("export_project_to_github")," "]}),(0,D.jsxs)("p",{children:[" ",W("project_not_linked_to_github")," "]}),w&&displayError(),(0,D.jsxs)(fv,{children:[(0,D.jsxs)(Yg.Z,{children:[(0,D.jsx)(Xg.Z,{xs:4,children:(0,D.jsxs)(ns.Z,{controlId:"github-sync-owner",children:[(0,D.jsx)(rs.Z,{children:W("owner")}),(0,D.jsxs)(is.Z,{componentClass:"select",name:"org",onBlur:function(e){return P(e.target.value)},children:[(0,D.jsxs)("option",{children:[" ",S.login," "]}),O.map((function(e){return(0,D.jsxs)("option",{children:[" ",e.login," "]},e.login)}))]})]})}),(0,D.jsx)(Xg.Z,{xs:5,children:(0,D.jsxs)(ns.Z,{controlId:"github-sync-name",children:[(0,D.jsx)(rs.Z,{children:W("repository_name")}),(0,D.jsx)(is.Z,{name:"name",type:"text",onChange:function(e){return M(e.target.value)},value:I})]})})]}),(0,D.jsx)(Yg.Z,{children:(0,D.jsx)(Xg.Z,{xs:12,children:(0,D.jsxs)(ns.Z,{controlId:"github-sync-description",children:[(0,D.jsxs)(rs.Z,{children:[W("description")," (",W("optional"),")"]}),(0,D.jsx)(is.Z,{name:"description",type:"text",onChange:function(e){return f(e.target.value)},value:l})]})})}),(0,D.jsx)("hr",{}),(0,D.jsx)(Yg.Z,{children:(0,D.jsxs)(Xg.Z,{xs:12,children:[(0,D.jsxs)("label",{children:[(0,D.jsx)("input",{name:"private",type:"radio",value:"false",checked:"public"===B,onChange:function(){return H("public")}})," ",W("public")]}),(0,D.jsxs)("small",{children:[" ",W("github_public_description")," "]})]})}),(0,D.jsx)(Yg.Z,{children:(0,D.jsx)(Xg.Z,{xs:12,children:(0,D.jsxs)(ns.Z,{children:[(0,D.jsxs)("label",{children:[(0,D.jsx)("input",{name:"private",value:"true",type:"radio",checked:"private"===B,onChange:function(){return H("private")}})," ",W("private")]}),(0,D.jsxs)("small",{children:[" ",W("github_private_description")," "]})]})})})]}),(0,D.jsx)(Ri.Z,{bsStyle:"primary",type:"button",disabled:N,onClick:V,children:N?(0,D.jsxs)(D.Fragment,{children:[W("creating")," "]}):(0,D.jsxs)(D.Fragment,{children:[" ",W("create_project_in_github")," "]})})]})}Gy.propTypes={refreshState:j().func.isRequired,projectName:j().string,projectId:j().string.isRequired};var Ky=Gy;function Yy(e){var t=e.repo,n=e.commitState,r=(0,Qe.$)().t;return n.loading?(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)(Ii.Z,{fw:!0,type:"refresh",spin:!0})," ",(0,D.jsx)("span",{children:r("loading_recent_github_commits")})]}):0===n.commits.length?(0,D.jsx)("div",{className:"text-center commit-message",children:(0,D.jsx)("p",{className:"small",children:r("no_new_commits_in_github")})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("h3",{children:[" ",r("recent_commits_in_github")," "]}),n.commits.diverged&&(0,D.jsxs)(ts.Z,{bsStyle:"warning",children:[r("github_repository_diverged")," "]}),(0,D.jsx)("div",{style:{maxHeight:200,overflow:"auto"},children:n.commits.map((function(e){return(0,D.jsxs)("div",{id:e.sha,children:[(0,D.jsx)("span",{className:"small pull-right",children:(0,D.jsx)("a",{href:"https://github.com/".concat(t,"/commit/").concat(e.sha),target:"_blank",rel:"noreferrer noopener",children:e.sha.slice(0,6)})}),(0,D.jsx)("a",{href:"https://github.com/".concat(t,"/commit/").concat(e.sha),target:"_blank",className:"commit-message",rel:"noreferrer noopener",children:e.message}),(0,D.jsxs)("div",{className:"small",children:["by ","".concat(e.author.name," <").concat(e.author.email,">")]})]},e.sha)}))})]})}Yy.propTypes={repo:j().string.isRequired,commitState:j().object.isRequired};var Xy=Yy;function Jy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eb(e){var t=e.mergeAction,n=e.refreshState,r=e.projectId,a=e.handleIgnoringExternalUpdates,l=(e.cancel,(0,Qe.$)().t),f=Jy((0,E.useState)(!1),2),d=f[0],h=f[1],p=Jy((0,E.useState)(null),2),y=p[0],w=p[1],x=Jy((0,E.useState)(null),2),_=x[0],S=x[1];function k(){h(!0);var e={message:y};a(!0),(0,U.ty)("/project/".concat(r,"/github-sync/merge"),{body:e}).then((function(){a(!1),n()})).catch((function(e){a(!1),S(e),h(!1)}))}function C(){if(504===_.response.status)return l("github_timeout_error");if(_.data.error)switch(_.data.error){case"GithubTooManyFilesError":return l("github_too_many_files_error");case"GithubFileSizeLimitError":return l("github_large_files_error");case"GithubFileNameError":return(0,D.jsxs)(D.Fragment,{children:[l("github_file_name_error"),(0,D.jsx)("ul",{children:(0,D.jsx)("li",{children:_.data.detail})})]});case"GithubSymlinkError":return l("github_symlink_error");case"GithubWorkflowFilesError":return l("github_workflow_files_error");case"GitFolderError":return l("github_git_folder_error");default:return _.data.error}return l("github_sync_error")}return d||_||"pull"!==t||k(),d?(0,D.jsxs)("div",{className:"loading",children:[(0,D.jsx)(Ii.Z,{fw:!0,type:"refresh",spin:!0})," ",(0,D.jsx)("span",{children:l("importing_and_merging_changes_in_github")})]}):(0,D.jsxs)(D.Fragment,{children:[_&&(0,D.jsxs)(ts.Z,{"aria-label":C(),bsStyle:"danger",children:[C(),_.data.error&&"GithubWorkflowFilesError"===_.data.error?(0,D.jsx)("p",{className:"text-center row-spaced-small",children:(0,D.jsx)(Ri.Z,{bsStyle:"primary",href:"/github-sync/addWorkflowScope",target:"_blank",children:l("github_workflow_authorize")})}):null]}),"push"===t&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(fv,{children:[(0,D.jsx)("p",{children:(0,D.jsx)($o.c,{i18nKey:"sync_project_to_github_explanation"})}),(0,D.jsx)(Yg.Z,{children:(0,D.jsx)(Xg.Z,{xs:12,children:(0,D.jsx)(ns.Z,{children:(0,D.jsx)(is.Z,{componentClass:"textarea",placeholder:l("github_commit_message_placeholder"),onChange:function(e){return w(e.target.value)}})})})})]}),(0,D.jsx)("p",{children:(0,D.jsx)(Ri.Z,{bsStyle:"primary",type:"button",onClick:k,children:l("commit")})})]})]})}eb.propTypes={mergeAction:j().string.isRequired,refreshState:j().func.isRequired,projectId:j().string.isRequired,handleIgnoringExternalUpdates:j().func.isRequired,cancel:j().func.isRequired};var tb=eb;var nb=function GithubSyncFallbackError(){var e=(0,Qe.$)().t;return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(ts.Z,{bsStyle:"danger",children:e("github_sync_error")})})};function rb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ib(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ib(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ib(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ob(e){var t,n=e.projectId,r=e.refreshState,a=(0,Qe.$)().t,l=rb((0,E.useState)(!1),2),f=l[0],d=l[1];return t=a(f?"unlinking":"unlink_github_repository"),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(ts.Z,{bsStyle:"danger",children:a("github_sync_repository_not_found_description")}),(0,D.jsx)(Ri.Z,{bsStyle:"primary",disabled:f,onClick:function(){d(!0),(0,U.K$)("/project/".concat(n,"/github-sync/")).finally((function(){r()}))},children:t})]})}ob.propTypes={projectId:j().string.isRequired,refreshState:j().func.isRequired};var ab=ob;function sb(e){return sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(e)}function lb(){lb=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==sb(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function cb(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function ub(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function db(e){var t=e.cancel,n=e.handleIgnoringExternalUpdates,r=e.isProjectMember,a=(0,A.d2)({_id:j().string.isRequired,name:j().string.isRequired}),l=a._id,f=a.name,d=ub((0,E.useState)(!0),2),h=d[0],p=d[1],y=ub((0,E.useState)(null),2),w=y[0],x=y[1],_=ub((0,E.useState)({enabled:null}),2),S=_[0],k=_[1],C=ub((0,E.useState)({enabled:null}),2),O=C[0],T=C[1],P=ub((0,E.useState)({loading:!0,commits:[],diverged:!1}),2),R=P[0],I=P[1],M=ub((0,E.useState)(null),2),L=M[0],N=M[1],F=(0,os.Z)().signal,q=(0,E.useCallback)((function(){p(!0),x(null),k({enabled:null}),T({enabled:null}),I({loading:!0,commits:[],diverged:!1}),N(null),(0,U.xA)("/user/github-sync/status",{signal:F}).then(function(){var e,t=(e=lb().mark((function e(t){var n,r,a,f;return lb().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(t),e.next=3,(0,U.xA)("/project/".concat(l,"/github-sync/status"));case 3:if(n=e.sent,T(n),p(!1),!n.enabled){e.next=13;break}return e.next=9,(0,U.xA)("/project/".concat(l,"/github-sync/commits/unmerged"));case 9:r=e.sent,a=r.commits?r.commits:r,f=!!r.diverged&&r.diverged,I({commits:a,diverged:f,loading:!1});case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){cb(l,r,a,f,d,"next",e)}function d(e){cb(l,r,a,f,d,"throw",e)}f(void 0)}))});return function(e){return t.apply(this,arguments)}}()).catch((function(e){x(e)}))}),[l,F]);(0,E.useEffect)((function(){q()}),[q]);var B=(0,Qe.$)().t;return null!=L?(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(tb,{mergeAction:L,refreshState:q,handleIgnoringExternalUpdates:n,projectId:l,cancel:t})}):w?(0,D.jsx)(mb,{error:w,projectId:l,refreshState:q}):h?(0,D.jsxs)("div",{className:"loading",children:[(0,D.jsx)(Ii.Z,{fw:!0,type:"refresh",spin:!0}),(0,D.jsx)("span",{children:B("checking_project_github_status")})]}):O.enabled?(0,D.jsx)(hb,{project:O,commits:R,setMergeAction:N}):(0,D.jsx)(pb,{user:S,refreshState:q,isProjectMember:r,projectName:f,projectId:l})}function hb(e){var t=e.project,n=e.commits,r=e.setMergeAction,a=(0,Qe.$)().t;return"success"===t.merge_status?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("p",{className:"text-center",children:[a("project_synced_with_git_repo_at"),"  ",(0,D.jsx)("a",{href:"https://github.com/".concat(t.repo),target:"_blank",rel:"noreferrer noopener",children:t.repo})]}),(0,D.jsx)("hr",{}),(0,D.jsx)(Xy,{repo:t.repo,commitState:n}),n.commits.length>0&&(0,D.jsx)("p",{className:"text-center row-spaced",children:(0,D.jsxs)(Ri.Z,{bsStyle:"info",onClick:function(){return r("pull")},children:[(0,D.jsx)(Ii.Z,{fw:!0,type:"file"}),(0,D.jsx)(Ii.Z,{fw:!0,type:"long-arrow-left"}),(0,D.jsx)(Ii.Z,{fw:!0,type:"github"})," ",a("pull_github_changes_into_sharelatex")]})}),(0,D.jsx)("hr",{}),(0,D.jsx)("p",{className:"text-center",children:(0,D.jsxs)(Ri.Z,{bsStyle:"info",onClick:function(){return r("push")},children:[(0,D.jsx)(Ii.Z,{fw:!0,type:"file"}),(0,D.jsx)(Ii.Z,{fw:!0,type:"long-arrow-right"}),(0,D.jsx)(Ii.Z,{fw:!0,type:"github"})," ",a("push_sharelatex_changes_to_github")]})})]}):(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(ts.Z,{bsStyle:"alert-danger",children:[(0,D.jsx)($o.c,{i18nKey:"github_merge_failed",values:{sharelatex_branch:t.unmerged_branch,master_branch:"master"},components:[(0,D.jsx)("b",{},"sharelatex_branch"),(0,D.jsx)("b",{},"master_branch")]}),(0,D.jsx)("p",{className:"text-center",children:(0,D.jsx)(Ri.Z,{bsStyle:"info",onClick:function(){return r("push")},children:a("continue_github_merge")})})]})})}function pb(e){var t=e.user,n=e.refreshState,r=e.isProjectMember,a=e.projectName,l=e.projectId,f=(0,Qe.$)().t;return t.enabled?r?(0,D.jsx)(Ky,{refreshState:n,projectName:a,projectId:l}):(0,D.jsx)("p",{children:f("github_for_link_shared_projects")}):t.available?r?(0,D.jsx)(Vy,{refreshState:n}):(0,D.jsx)("p",{children:f("github_for_link_shared_projects")}):(0,D.jsx)(Hy,{})}function mb(e){var t=e.error,n=e.projectId,r=e.refreshState,a=(0,Qe.$)().t;switch(t.response.status){case 401:return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(ts.Z,{bsStyle:"danger",children:a("github_credentials_expired")}),(0,D.jsx)("p",{className:"text-center row-spaced-small",children:(0,D.jsx)(Ri.Z,{bsStyle:"primary",href:"/github-sync/beginAuth",children:a("reauthorize_github_account")})})]});case 404:return(0,D.jsx)(ab,{projectId:n,refreshState:r});default:return(0,D.jsx)(ts.Z,{bsStyle:"danger",children:a("github_sync_error")})}}db.propTypes={cancel:j().func.isRequired,handleIgnoringExternalUpdates:j().func.isRequired,isProjectMember:j().bool},hb.propTypes={project:j().object.isRequired,commits:j().object.isRequired,setMergeAction:j().func.isRequired},pb.propTypes={user:j().object.isRequired,refreshState:j().func.isRequired,isProjectMember:j().bool,projectName:j().string,projectId:j().string.isRequired},mb.propTypes={error:j().object.isRequired,projectId:j().string.isRequired,refreshState:j().func.isRequired};var gb=(0,T.Z)(db,nb);function vb(e){var t=e.handleHide,n=e.handleIgnoringExternalUpdates,r=e.show,a=e.isProjectMember,l=(0,Qe.$)().t;return(0,D.jsxs)(So.Z,{show:r,onHide:t,children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:l("github_sync")})}),(0,D.jsx)(_o.Z.Body,{children:(0,D.jsx)(gb,{cancel:t,handleIgnoringExternalUpdates:n,isProjectMember:a})}),(0,D.jsx)(_o.Z.Footer,{children:(0,D.jsx)(Ri.Z,{bsStyle:null,className:"btn-secondary",type:"button",onClick:t,children:l("close")})})]})}var yb=E.memo(vb);function bb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xb(){var e=bb((0,E.useState)(!1),2),t=e[0],n=e[1],r=(0,oe._i)().permissionsLevel,a=(0,Tl.I)(),l=(0,E.useCallback)((function(e){e?a.editorManager.startIgnoringExternalUpdates():a.editorManager.stopIgnoringExternalUpdates()}),[a]);return"readOnly"===r?null:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(jg,{onClick:function(){return n(!0)},icon:{type:"github",fw:!0},children:"GitHub"}),(0,D.jsx)(yb,{show:t,isProjectMember:"readOnly"!==r,handleHide:function(){return n(!1)},handleIgnoringExternalUpdates:l})]})}var _b=[{import:l,path:"/overleaf/services/web/modules/dropbox/frontend/js/features/editor-left-menu/components/sync-dropbox.tsx"},{import:f,path:"/overleaf/services/web/modules/git-bridge/frontend/js/features/editor-left-menu/components/sync-git-bridge.tsx"},{import:d,path:"/overleaf/services/web/modules/github-sync/frontend/js/features/editor-left-menu/components/sync-github.tsx"}];function Sb(){var e=(0,Qe.$)().t,t=(0,xf.Z)("ol-anonymous");return!0===t||void 0===t||0===_b.length?null:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("h4",{children:e("sync")}),(0,D.jsx)("ul",{className:"list-unstyled nav",children:_b.map((function(e){var t=e.import.default,n=e.path;return(0,D.jsx)("li",{children:(0,D.jsx)(t,{})},n)}))})]})}function kb(e){var t=e.label,n=e.name,r=e.options,a=e.optgroup,l=e.loading,f=e.onChange,d=e.value,h=(0,E.useCallback)((function(e){var t=e.target.value;"true"!==t&&"false"!==t||(t="true"===t),f(t)}),[f]);return(0,D.jsxs)("div",{className:"form-group left-menu-setting",children:[(0,D.jsx)("label",{htmlFor:"settings-menu-".concat(n),children:t}),l?(0,D.jsx)("p",{className:"loading pull-right",children:(0,D.jsx)("i",{className:"fa fa-fw fa-spin fa-refresh"})}):(0,D.jsxs)("select",{id:"settings-menu-".concat(n),className:"form-control",onChange:h,value:null==d?void 0:d.toString(),children:[r.map((function(e){return(0,D.jsx)("option",{value:e.value.toString(),"aria-hidden":e.ariaHidden,disabled:e.disabled,children:e.label},"".concat(n,"-").concat(e.value))})),a?(0,D.jsx)("optgroup",{label:a.label,children:a.options.map((function(e){return(0,D.jsx)("option",{value:e.value.toString(),children:e.label},e.value.toString())}))}):null]})]})}function Cb(){var e=(0,Qe.$)().t,t=Jc(),n=t.autoPairDelimiters,r=t.setAutoPairDelimiters;return(0,D.jsx)(kb,{onChange:r,value:n,options:[{value:!0,label:e("on")},{value:!1,label:e("off")}],label:e("auto_close_brackets"),name:"autoPairDelimiters"})}function Eb(){var e=(0,Qe.$)().t,t=Jc(),n=t.autoComplete,r=t.setAutoComplete;return(0,D.jsx)(kb,{onChange:r,value:n,options:[{value:!0,label:e("on")},{value:!1,label:e("off")}],label:e("auto_complete"),name:"autoComplete"})}function Ob(){var e=(0,Qe.$)().t,t=(0,oe._i)().permissionsLevel,n=Jc(),r=n.compiler,a=n.setCompiler;return"readOnly"===t?null:(0,D.jsx)(kb,{onChange:a,value:r,options:[{value:"pdflatex",label:"pdfLaTeX"},{value:"latex",label:"LaTeX"},{value:"xelatex",label:"XeLaTeX"},{value:"lualatex",label:"LuaLaTeX"}],label:e("compiler"),name:"compiler"})}function jb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tb(){var e=(0,Qe.$)().t,t=jb((0,E.useState)(!1),2),n=t[0],r=t[1];return(0,D.jsxs)("div",{className:"form-group left-menu-setting",children:[(0,D.jsx)("label",{htmlFor:"dictionary",children:e("dictionary")}),(0,D.jsx)(Ri.Z,{className:"btn-secondary",bsSize:"xs",bsStyle:null,onClick:function(){return r(!0)},children:e("edit")}),(0,D.jsx)(cg,{show:n,handleHide:function(){return r(!1)}})]})}function Ab(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Db(){var e=(0,Qe.$)().t,t=(0,oe._i)().permissionsLevel,n=Ab((0,tc.Z)("docs"),1)[0],r=Jc(),a=r.rootDocId,l=r.setRootDocId,f=(0,E.useMemo)((function(){var e;return(null!==(e=null==n?void 0:n.filter((function(e){return(0,qm.Z)(e.doc.name)||a===e.doc.id})))&&void 0!==e?e:[]).map((function(e){return{value:e.doc.id,label:e.doc.name}}))}),[n,a]);return"readOnly"===t?null:(0,D.jsx)(kb,{onChange:l,value:a,options:f,label:e("main_document"),name:"rootDocId"})}function Rb(e){return function(e){if(Array.isArray(e))return Ib(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ib(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ib(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ib(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mb(){var e=(0,Qe.$)().t,t=(0,xf.Z)("ol-editorThemes"),n=(0,xf.Z)("ol-legacyEditorThemes"),r=Jc(),a=r.editorTheme,l=r.setEditorTheme,f=(0,E.useMemo)((function(){var e,r,a=null!==(e=null==t?void 0:t.map((function(e){return{value:e,label:e.replace(/_/g," ")}})))&&void 0!==e?e:[],l=null!==(r=null==n?void 0:n.map((function(e){return{value:e,label:e.replace(/_/g," ")}})))&&void 0!==r?r:[];return[].concat(Rb(a),[{value:"-",label:"—————————————————",ariaHidden:"true",disabled:!0}],Rb(l))}),[t,n]);return(0,D.jsx)(kb,{onChange:l,value:a,options:f,label:e("editor_theme"),name:"editorTheme"})}function Lb(){var e=(0,Qe.$)().t,t=Jc(),n=t.fontFamily,r=t.setFontFamily;return(0,D.jsx)(kb,{onChange:r,value:n,options:[{value:"monaco",label:"Monaco / Menlo / Consolas"},{value:"lucida",label:"Lucida / Source Code Pro"}],label:e("font_family"),name:"fontFamily"})}var Nb=["10","11","12","13","14","16","18","20","22","24"].map((function(e){return{value:e,label:"".concat(e,"px")}}));function Fb(){var e=(0,Qe.$)().t,t=Jc(),n=t.fontSize,r=t.setFontSize;return(0,D.jsx)(kb,{onChange:r,value:n,options:Nb,label:e("font_size"),name:"fontSize"})}function qb(){var e,t=(0,Qe.$)().t,n=Jc(),r=n.imageName,a=n.setImageName,l=(0,xf.Z)("ol-allowedImageNames"),f=(0,E.useMemo)((function(){var e;return null!==(e=null==l?void 0:l.map((function(e){return{value:e.imageName,label:e.imageDesc}})))&&void 0!==e?e:[]}),[l]);return 0===(null!==(e=null==l?void 0:l.length)&&void 0!==e?e:0)?null:(0,D.jsx)(kb,{onChange:a,value:r,options:f,label:t("tex_live_version"),name:"imageName"})}function Bb(){var e=(0,Qe.$)().t,t=Jc(),n=t.mode,r=t.setMode;return(0,D.jsx)(kb,{onChange:r,value:n,options:[{value:"default",label:"None"},{value:"vim",label:"Vim"},{value:"emacs",label:"Emacs"}],label:e("keybindings"),name:"mode"})}function Ub(){var e=(0,Qe.$)().t,t=Jc(),n=t.lineHeight,r=t.setLineHeight;return(0,D.jsx)(kb,{onChange:r,value:n,options:[{value:"compact",label:e("compact")},{value:"normal",label:e("normal")},{value:"wide",label:e("wide")}],label:e("line_height"),name:"lineHeight"})}function Hb(){var e=(0,Qe.$)().t,t=(0,xf.Z)("ol-overallThemes"),n=(0,le.l5)().loadingStyleSheet,r=Jc(),a=r.overallTheme,l=r.setOverallTheme,f=(0,E.useMemo)((function(){var e;return null!==(e=null==t?void 0:t.map((function(e){var t=e.name;return{value:e.val,label:t}})))&&void 0!==e?e:[]}),[t]);return t?(0,D.jsx)(kb,{onChange:l,value:a,options:f,loading:n,label:e("overall_theme"),name:"overallTheme"}):null}function zb(){var e=(0,Qe.$)().t,t=Jc(),n=t.pdfViewer,r=t.setPdfViewer;return(0,D.jsx)(kb,{onChange:r,value:n,options:[{value:"pdfjs",label:e("overleaf")},{value:"native",label:e("browser")}],label:e("pdf_viewer"),name:"pdfViewer"})}function Vb(){var e=(0,Qe.$)().t,t=(0,xf.Z)("ol-languages"),n=Jc(),r=n.spellCheckLanguage,a=n.setSpellCheckLanguage,l=(0,E.useMemo)((function(){var e;return{label:"Language",options:null!==(e=null==t?void 0:t.map((function(e){return{value:e.code,label:e.name}})))&&void 0!==e?e:[]}}),[t]);return(0,D.jsx)(kb,{onChange:a,value:r,options:[{value:"",label:e("off")}],optgroup:l,label:e("spell_check"),name:"spellCheckLanguage"})}function Wb(){var e=(0,Qe.$)().t,t=Jc(),n=t.syntaxValidation,r=t.setSyntaxValidation;return(0,D.jsx)(kb,{onChange:r,value:n,options:[{value:!0,label:e("on")},{value:!1,label:e("off")}],label:e("syntax_validation"),name:"syntaxValidation"})}function Zb(){var e=(0,Qe.$)().t,t=(0,xf.Z)("ol-anonymous");return!0===t||void 0===t?null:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("h4",{children:e("settings")}),(0,D.jsxs)(fv,{className:"settings",children:[(0,D.jsx)(Ob,{}),(0,D.jsx)(qb,{}),(0,D.jsx)(Db,{}),(0,D.jsx)(Vb,{}),(0,D.jsx)(Tb,{}),(0,D.jsx)(Eb,{}),(0,D.jsx)(Cb,{}),(0,D.jsx)(Wb,{}),(0,D.jsx)(Mb,{}),(0,D.jsx)(Hb,{}),(0,D.jsx)(Bb,{}),(0,D.jsx)(Fb,{}),(0,D.jsx)(Lb,{}),(0,D.jsx)(Ub,{}),(0,D.jsx)(zb,{})]})]})}function Gb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yb=(0,E.memo)((function(){var e=(0,le.l5)().setLeftMenuShown,t=Gb((0,tc.Z)("settings.editorTheme"),1)[0],n=Gb((0,tc.Z)("settings.overallTheme"),1)[0],r=Gb((0,E.useState)({editorTheme:t,overallTheme:n}),1)[0],a=(0,E.useRef)(null);return(0,E.useEffect)((function(){a.current&&(t===r.editorTheme&&n===r.overallTheme||(a.current.style.opacity="0"))}),[t,n,r]),(0,D.jsx)("div",{id:"left-menu-mask",ref:a,onClick:function(){return e(!1)}})}));x.Z.component("editorLeftMenu",(0,S.react2angular)(eu.use((function(){var e=(0,le.l5)().leftMenuShown;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("aside",{id:"left-menu",className:se()("full-size",{shown:e}),children:[(0,D.jsx)(dg,{}),(0,D.jsx)(lv,{}),(0,D.jsx)(Sb,{}),(0,D.jsx)(Zb,{}),(0,D.jsx)($v,{})]}),e&&(0,D.jsx)(Yb,{})]})}))));x.Z.controller("LeftMenuDocumentationController",["$scope","eventTracking",function(e,t){e.sendLeftMenuDocumentationEvent=function(){t.sendMB("left-menu-documentation-click")}}]);var Xb=100,Jb=200,Qb=20,ew=360;function tw(e,t){if(null==e||"anonymous-user"===e)return Xb;if(t===e)return Jb;var n=function(e){var t=_h()(e),n=parseInt(t.toString().slice(0,8),16)%(ew-2*Qb);return n}(e);return n>Jb-Qb&&n<Jb+Qb&&(n=(n-=Jb)+ew-Qb),n}var nw=__webpack_require__(3546),rw=__webpack_require__(81407),iw=__webpack_require__(80486);function ow(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return aw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aw(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function aw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sw=function(e){var t=e.content,n=(0,E.useRef)(null),r=(0,Ra.Z)();return(0,E.useEffect)((function(){if(n.current){var e,t,a=ow(n.current.getElementsByTagName("a"));try{for(a.s();!(t=a.n()).done;){var l=t.value;l.setAttribute("target","_blank"),l.setAttribute("rel","noreferrer noopener")}}catch(e){a.e(e)}finally{a.f()}if(null!==(e=window.MathJax)&&void 0!==e&&e.Hub){var f=window.MathJax.Hub,d=setTimeout((function(){(0,rw.p)(),f.Queue(["Typeset",f,n.current])}),0);return function(){return clearTimeout(d)}}(0,iw.T)().then((function(e){r.current&&e.typesetPromise([n.current]).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))}}),[t,r]),(0,D.jsx)("p",{ref:n,children:(0,D.jsx)(nw.Z,{children:t})})};function lw(e){var t=e.message,n=e.userId;function r(e){return e?tw(e.id,n):0}var a=!!t.user&&t.user.id===n;return(0,D.jsxs)("div",{className:"message-wrapper",children:[!a&&(0,D.jsx)("div",{className:"name",children:(0,D.jsx)("span",{children:t.user.first_name||t.user.email})}),(0,D.jsxs)("div",{className:"message",style:function(e){return{borderColor:"hsl(".concat(r(e),", 85%, 40%)"),backgroundColor:"hsl(".concat(r(e),", 85%, 40%")}}(t.user),children:[!a&&(0,D.jsx)("div",{className:"arrow",style:function(e){return{borderColor:"hsl(".concat(r(e),", 85%, 40%)")}}(t.user)}),(0,D.jsx)("div",{className:"message-content",children:t.contents.map((function(e,t){return(0,D.jsx)(sw,{content:e},t)}))})]})]})}lw.propTypes={message:j().shape({contents:j().arrayOf(j().string).isRequired,user:j().shape({id:j().string,email:j().string,first_name:j().string})}),userId:j().string.isRequired};var cw=lw;function uw(e){var t=e.messages,n=e.resetUnreadMessages,r=e.userId;function a(e){if(0===e)return!0;var n=t[e],r=t[e-1];return n.timestamp-r.timestamp>3e5}return(0,D.jsx)("ul",{className:"list-unstyled",onClick:n,onKeyDown:n,children:t.map((function(e,t){return(0,D.jsxs)("li",{className:"message",children:[a(t)&&(0,D.jsx)("div",{className:"date",children:(0,D.jsx)("time",{dateTime:e.timestamp?Vp()(e.timestamp).format():void 0,children:(n=e.timestamp,n?"".concat(Vp()(n).format("h:mm a")," ").concat(Vp()(n).calendar()):"N/A")})}),(0,D.jsx)(cw,{message:e,userId:r})]},e.id);var n}))})}uw.propTypes={messages:j().arrayOf(j().shape({id:j().string.isRequired,timestamp:j().number})).isRequired,resetUnreadMessages:j().func.isRequired,userId:j().string.isRequired};var fw=uw;function dw(e){var t=e.resetUnreadMessages,n=e.sendMessage,r=(0,Qe.$)().t;return(0,D.jsxs)("form",{className:"new-message",children:[(0,D.jsx)("label",{htmlFor:"chat-input",className:"sr-only",children:r("your_message_to_collaborators")}),(0,D.jsx)("textarea",{id:"chat-input",placeholder:"".concat(r("your_message_to_collaborators"),"…"),onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),n(e.target.value),window.setTimeout((function(){e.target.blur(),e.target.closest("form").reset(),e.target.focus()}),0))},onClick:t})]})}dw.propTypes={resetUnreadMessages:j().func.isRequired,sendMessage:j().func.isRequired};var hw=dw;function pw(e){var t=e.atEnd,n=e.children,r=e.className,a=void 0===r?"":r,l=e.fetchData,f=e.itemCount,d=e.isLoading,h=(0,E.useRef)(null),p=(0,E.useRef)(0);function y(){h.current.scrollTop=h.current.scrollHeight-h.current.clientHeight-p.current}return(0,E.useLayoutEffect)(y,[f]),(0,E.useEffect)((function(){var e=C().debounce(y,400);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,D.jsx)("div",{ref:h,onScroll:function(e){var n,r;n=h.current.scrollHeight-h.current.scrollTop-h.current.clientHeight,p.current=n,e.target===e.currentTarget&&(r=h.current.children[0].clientHeight<h.current.clientHeight,!(t||d||r)&&h.current.scrollTop<30&&l())},className:"infinite-scroll ".concat(a),children:n})}pw.propTypes={atEnd:j().bool,children:j().element.isRequired,className:j().string,fetchData:j().func.isRequired,itemCount:j().number.isRequired,isLoading:j().bool};var mw=pw;function ChatFallbackError(e){var t=e.reconnect,n=(0,Qe.$)().t;return(0,D.jsx)("aside",{className:"chat",children:(0,D.jsxs)("div",{className:"chat-error",children:[(0,D.jsx)(ts.Z,{bsStyle:"danger",children:n("chat_error")}),t&&(0,D.jsx)("p",{className:"text-center",children:(0,D.jsx)(Ri.Z,{bsStyle:"info",type:"button",onClick:t,children:n("reconnect")})})]})})}ChatFallbackError.propTypes={reconnect:j().any};var gw=ChatFallbackError,vw=E.memo((function(){var e=(0,Qe.$)().t,t=(0,le.l5)({chatIsOpen:j().bool}).chatIsOpen,n=(0,La.SE)({id:j().string.isRequired}),r=Ql(),a=r.status,l=r.messages,f=r.initialMessagesLoaded,d=r.atEnd,h=r.loadInitialMessages,p=r.loadMoreMessages,y=r.reset,w=r.sendMessage,x=r.markMessagesAsRead,_=r.error;(0,E.useEffect)((function(){t&&!f&&h()}),[t,h,f]);var S="pending"!==a&&0===l.length,k=l.reduce((function(e,t){return e+t.contents.length}),0);if(_){if(_ instanceof U.kp)return(0,D.jsx)(gw,{reconnect:y});throw _}return n?(0,D.jsxs)("aside",{className:"chat",children:[(0,D.jsx)(mw,{atEnd:d,className:"messages",fetchData:p,isLoading:"pending"===a,itemCount:k,children:(0,D.jsxs)("div",{children:[(0,D.jsx)("h2",{className:"sr-only",children:e("chat")}),"pending"===a&&(0,D.jsx)(uy,{delay:500}),S&&(0,D.jsx)(yw,{}),(0,D.jsx)(fw,{messages:l,userId:n.id,resetUnreadMessages:x})]})}),(0,D.jsx)(hw,{resetUnreadMessages:x,sendMessage:w})]}):null}));function yw(){var e=(0,Qe.$)().t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"no-messages text-center small",children:e("no_messages")}),(0,D.jsxs)("div",{className:"first-message text-center",children:[e("send_first_message"),(0,D.jsx)("br",{}),(0,D.jsx)(Ii.Z,{type:"arrow-down"})]})]})}var bw=(0,T.Z)(vw,gw);x.Z.component("chat",(0,S.react2angular)(eu.use(bw)));x.Z.controller("CloneProjectController",["$scope","$modal",function(e,t){return e.openCloneProjectModal=function(){return t.open({templateUrl:"cloneProjectModalTemplate",controller:"CloneProjectModalController"})}}]),x.Z.controller("CloneProjectModalController",["$scope","$modalInstance","$timeout","$http","ide",function(e,t,n,r,a){e.inputs={projectName:a.$scope.project.name+" (Copy)"},e.state={inflight:!1,error:!1},t.opened.then((function(){return n((function(){return e.$broadcast("open")}),200)}));return e.clone=function(){return e.state.inflight=!0,e.state.error=!1,(t=e.inputs.projectName,r.post("/project/".concat(a.$scope.project._id,"/clone"),{_csrf:window.csrfToken,projectName:t})).then((function(e){var t=e.data;return window.location="/project/".concat(t.project_id)})).catch((function(t){var n=t.data,r=t.status;return e.state.inflight=!1,e.state.error=400!==r||{message:n}}));var t},e.cancel=function(){return t.dismiss("cancel")}}]);x.Z.controller("LeftMenuCloneProjectModalController",["$scope",function(e){e.show=!1,e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))},e.openCloneProjectModal=function(){e.$applyAsync((function(){e.show=!0}))},e.openProject=function(e){var t;t="/project/".concat(e.project_id),window.location.assign(t)}}]);function LinkedFileRefreshError(e){var t=e.file,n=(0,Qe.$)().t;return"mendeley"===t.linkedFileData.provider?(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{children:[n("if_error_persists_try_relinking_provider",{provider:"Mendeley"}),": "]}),(0,D.jsx)("div",{className:"text-center",children:(0,D.jsx)("a",{href:"/user/settings",target:"_blank",style:{fontWeight:"bold"},children:n("account_settings")})})]}):"zotero"===t.linkedFileData.provider?(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{children:[n("if_error_persists_try_relinking_provider",{provider:"Zotero"}),": "]}),(0,D.jsx)("div",{className:"text-center",children:(0,D.jsx)("a",{href:"/user/settings",target:"_blank",style:{fontWeight:"bold"},children:n("account_settings")})})]}):null}x.Z.component("cloneProjectModal",(0,S.react2angular)(eu.use(Vg),Object.keys(Vg.propTypes))),LinkedFileRefreshError.propTypes={file:j().shape({linkedFileData:j().shape({provider:j().string.isRequired}).isRequired}).isRequired};var ww=__webpack_require__(7585);function xw(e){return xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xw(e)}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==xw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xw(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kw=function(e){return(0,D.jsx)(Ii.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_w(Object(n),!0).forEach((function(t){Sw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"external-link-square",modifier:"rotate-180",className:"linked-file-icon"},e))};function Cw(e){var t=e.file,n=(0,Qe.$)().t;return"mendeley"===t.linkedFileData.provider?(0,D.jsx)("div",{children:(0,D.jsxs)("p",{children:[(0,D.jsx)(kw,{fw:!0}),n("imported_from_mendeley_at_date",{formattedDate:(0,ww.mr)(t.created),relativeDate:(0,ww.K8)(t.created)})]})}):"zotero"===t.linkedFileData.provider?(0,D.jsx)("div",{children:(0,D.jsxs)("p",{children:[(0,D.jsx)(kw,{fw:!0}),n("imported_from_zotero_at_date",{formattedDate:(0,ww.mr)(t.created),relativeDate:(0,ww.K8)(t.created)})]})}):null}function Ew(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ow(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ow(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ow(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Cw.propTypes={file:j().shape({created:j().string,linkedFileData:j().shape({provider:j().string})})};var jw=[{import:p,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/linked-file-info.js"}],$w=[{import:h,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/linked-file-refresh-error.js"}],Tw=60,Aw=35,Pw="...",Dw=Tw-Aw-Pw.length;function Rw(e){if(e){if(e.length>Tw){var t=e.slice(0,Aw),n=e.slice(e.length-Dw);return t+Pw+n}return e}}function Iw(e){var t,n=e.file,r=e.storeReferencesKeys,a=(0,A.d2)({_id:j().string.isRequired})._id,l=(0,oe._i)({permissionsLevel:j().string}).permissionsLevel,f=(0,Qe.$)().t,d=Ew((0,E.useState)(!1),2),h=d[0],p=d[1],y=Ew((0,E.useState)(null),2),w=y[0],x=y[1],_=(0,os.Z)().signal;n.linkedFileData&&("url"===n.linkedFileData.provider?t=(0,D.jsx)("div",{children:(0,D.jsx)(Mw,{file:n})}):"project_file"===n.linkedFileData.provider?t=(0,D.jsx)("div",{children:(0,D.jsx)(Lw,{file:n})}):"project_output_file"===n.linkedFileData.provider&&(t=(0,D.jsx)("div",{children:(0,D.jsx)(Nw,{file:n})})));var S=(0,E.useCallback)((function(){p(!0),window.expectingLinkedFileRefreshedSocketFor=n.name,(0,U.ty)("/project/".concat(a,"/linked_file/").concat(n.id,"/refresh"),{signal:_}).then((function(){p(!1)})).catch((function(e){var t;p(!1),x((null===(t=e.data)||void 0===t?void 0:t.message)||e.message)})).finally((function(){var e;("mendeley"===n.linkedFileData.provider||"zotero"===n.linkedFileData.provider||n.name.match(/^.*\.bib$/))&&(e={body:{shouldBroadcast:!0}},(0,U.ty)("/project/".concat(a,"/references/indexAll"),e).then((function(e){r(e.keys)})).catch((function(e){console.log(e)})))}))}),[n,a,_,r]);return(0,D.jsxs)("div",{children:[n.linkedFileData&&t,n.linkedFileData&&jw.map((function(e){var t=e.import.LinkedFileInfo,r=e.path;return(0,D.jsx)(t,{file:n},r)})),n.linkedFileData&&"readOnly"!==l&&(0,D.jsxs)("button",{className:"btn btn-primary",onClick:S,disabled:h,children:[(0,D.jsx)(Ii.Z,{type:"refresh",spin:h,fw:!0}),(0,D.jsx)("span",{children:h?f("refreshing")+"...":f("refresh")})]})," ",(0,D.jsxs)("a",{download:!0,href:"/project/".concat(a,"/file/").concat(n.id),className:"btn btn-secondary-info btn-secondary",children:[(0,D.jsx)(Ii.Z,{type:"download",fw:!0})," ",(0,D.jsx)("span",{children:f("download")})]}),w&&(0,D.jsxs)("div",{className:"row",children:[(0,D.jsx)("br",{}),(0,D.jsxs)("div",{className:"alert alert-danger col-md-6 col-md-offset-3",children:[f("access_denied"),": ",w,$w.map((function(e){var t=e.import.LinkedFileRefreshError,r=e.path;return(0,D.jsx)(t,{file:n},r)}))]})]})]})}function Mw(e){var t=e.file;return(0,D.jsxs)("p",{children:[(0,D.jsx)(kw,{})," ",(0,D.jsx)($o.c,{i18nKey:"imported_from_external_provider_at_date",components:[(0,D.jsx)("a",{href:t.linkedFileData.url})],values:{shortenedUrl:Rw(t.linkedFileData.url),formattedDate:(0,ww.mr)(t.created),relativeDate:(0,ww.K8)(t.created)}})]})}function Lw(e){var t=e.file;return(0,D.jsxs)("p",{children:[(0,D.jsx)(kw,{})," ",(0,D.jsx)($o.c,{i18nKey:"imported_from_another_project_at_date",components:t.linkedFileData.v1_source_doc_id?[(0,D.jsx)("span",{})]:[(0,D.jsx)("a",{href:"/project/".concat(t.linkedFileData.source_project_id),target:"_blank",rel:"noopener"})],values:{sourceEntityPath:t.linkedFileData.source_entity_path.slice(1),formattedDate:(0,ww.mr)(t.created),relativeDate:(0,ww.K8)(t.created)}})]})}function Nw(e){var t=e.file;return(0,D.jsxs)("p",{children:[(0,D.jsx)(kw,{})," ",(0,D.jsx)($o.c,{i18nKey:"imported_from_the_output_of_another_project_at_date",components:t.linkedFileData.v1_source_doc_id?[(0,D.jsx)("span",{})]:[(0,D.jsx)("a",{href:"/project/".concat(t.linkedFileData.source_project_id),target:"_blank",rel:"noopener"})],values:{sourceOutputFilePath:t.linkedFileData.source_output_file_path,formattedDate:(0,ww.mr)(t.created),relativeDate:(0,ww.K8)(t.created)}})]})}function Fw(e){var t=e.fileName,n=e.fileId,r=e.onLoad,a=e.onError,l=(0,A.d2)({_id:j().string.isRequired})._id;return(0,D.jsx)("img",{src:"/project/".concat(l,"/file/").concat(n),onLoad:r,onError:a,alt:t})}function qw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Iw.propTypes={file:j().shape({id:j().string,name:j().string,linkedFileData:j().object}).isRequired,storeReferencesKeys:j().func.isRequired},Mw.propTypes={file:j().shape({linkedFileData:j().object,created:j().string}).isRequired},Lw.propTypes={file:j().shape({linkedFileData:j().object,created:j().string}).isRequired},Nw.propTypes={file:j().shape({linkedFileData:j().object,created:j().string}).isRequired},Fw.propTypes={fileName:j().string.isRequired,fileId:j().string.isRequired,onLoad:j().func.isRequired,onError:j().func.isRequired};var Uw=2097152;function Hw(e){var t=e.file,n=e.onLoad,r=e.onError,a=(0,A.d2)({_id:j().string.isRequired})._id,l=qw((0,E.useState)(""),2),f=l[0],d=l[1],h=qw((0,E.useState)(!1),2),p=h[0],y=h[1],w=qw((0,E.useState)(!1),2),x=w[0],_=w[1];return(0,E.useEffect)((function(){if(!x){var e="/project/".concat(a,"/file/").concat(t.id);fetch(e,{method:"HEAD"}).then((function(e){if(!e.ok)throw new Error("HTTP Error Code: "+e.status);return e.headers.get("Content-Length")})).then((function(t){var r=!1,a=null;return t>Uw&&(r=!0,a=Uw),null!=a&&(e+="?range=0-".concat(a)),fetch(e).then((function(e){return e.text().then((function(e){r&&(e=e.replace(/\n.*$/,"")),d(e),n(),y(r)}))}))})).catch((function(e){console.error(e),r()})).finally((function(){_(!1)}))}}),[a,t.id,r,n,x]),(0,D.jsx)("div",{children:f&&(0,D.jsx)("div",{className:"text-preview",children:(0,D.jsxs)("div",{className:"scroll-container",children:[(0,D.jsx)("p",{children:f}),p&&(0,D.jsx)("p",{children:"..."})]})})})}function zw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Hw.propTypes={file:j().shape({id:j().string}).isRequired,onLoad:j().func.isRequired,onError:j().func.isRequired};var Ww=["png","jpg","jpeg","gif"];function Zw(e){var t=e.file,n=e.storeReferencesKeys,r=zw((0,E.useState)(!0),2),a=r[0],l=r[1],f=zw((0,E.useState)(!1),2),d=f[0],h=f[1],p=(0,Qe.$)().t,y=window.ExposedSettings.textExtensions,w=t.name.split(".").pop().toLowerCase(),x=!Ww.includes(w)&&!y.includes(w),_=(0,E.useCallback)((function(){l(!1)}),[]),S=(0,E.useCallback)((function(){d||(l(!1),h(!0))}),[d]),k=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Iw,{file:t,storeReferencesKeys:n}),Ww.includes(w)&&(0,D.jsx)(Fw,{fileName:t.name,fileId:t.id,onLoad:_,onError:S}),y.includes(w)&&(0,D.jsx)(Hw,{file:t,onLoad:_,onError:S})]});return(0,D.jsxs)("div",{className:"file-view full-size",children:[!d&&k,!x&&a&&(0,D.jsx)(Gw,{}),(x||d)&&(0,D.jsx)("p",{className:"no-preview",children:p("no_preview_available")})]})}function Gw(){var e=(0,Qe.$)().t;return(0,D.jsx)("div",{className:"loading-panel loading-panel-file-view",children:(0,D.jsxs)("span",{children:[(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0}),"  ",e("loading"),"…"]})})}Zw.propTypes={file:j().shape({id:j().string,name:j().string}).isRequired,storeReferencesKeys:j().func.isRequired};x.Z.controller("FileViewController",["$scope","$rootScope",function(e,t){e.file=e.openFile,e.storeReferencesKeys=function(e){var n=t._references.keys;return t._references.keys=C().union(n,e)}}]);x.Z.component("fileView",(0,S.react2angular)(eu.use(Zw),["storeReferencesKeys","file"])),x.Z.component("hotkeysModal",(0,S.react2angular)(kv,void 0));x.Z.controller("HotkeysModalController",["$scope",function(e){e.show=!1,e.isMac=/Mac/i.test(navigator.platform),e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))},e.openHotkeysModal=function(){e.$applyAsync((function(){e.trackChangesVisible=e.project&&e.project.features.trackChangesVisible,e.show=!0}))}}]),x.Z.controller("WordCountModalController",["$scope",function(e){e.show=!1,e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))},e.openWordCountModal=function(){e.$applyAsync((function(){e.show=!0}))}}]);x.Z.component("wordCountModal",(0,S.react2angular)(eu.use(rv),Object.keys(rv.propTypes)));__webpack_require__(88009),__webpack_require__(20789),x.Z.directive("layout",["$parse","$compile","ide",function(e,t,n){return{compile:function(){return{pre:function(r,a,l){var f,d,h=l.layout,p=l.customTogglerPane,y=l.customTogglerMsgWhenOpen,w=l.customTogglerMsgWhenClosed,x=null!=p&&null!=y&&null!=w,_={spacing_open:null!=l.spacingOpen?parseInt(l.spacingOpen,10):7,spacing_closed:null!=l.spacingClosed?parseInt(l.spacingClosed,10):7,slidable:!1,enableCursorHotkey:!1,onopen:function(e){return function(e){if(!x&&e!==p)return;return f.scope().$applyAsync((function(){return f.scope().isOpen=!0}))}(e)},onclose:function(e){return function(e){if(!x&&e!==p)return;return f.scope().$applyAsync((function(){return f.scope().isOpen=!1}))}(e)},onresize:function(){return E()},maskIframesOnResize:r.$eval(l.maskIframesOnResize||"false"),east:{size:r.$eval(l.initialSizeEast),initClosed:r.$eval(l.initClosedEast)},west:{size:r.$eval(l.initialSizeWest),initClosed:r.$eval(l.initClosedWest)}};function S(){if(null!=f){d=T.readState();var e="east"===p?"right":"left",t=d[p];return null!=t?f.css(e,t.initClosed?0:t.size):void 0}}function k(){if(d=T.readState(),null!=l.openEast&&null!=d.east)return e(l.openEast).assign(r,!d.east.initClosed)}function E(){return d=T.readState(),r.$broadcast("layout:".concat(h,":resize"),d),function(){if(null!=(d=T.readState()).east){var e=a.find("> .ui-layout-resizer-controls");d.east.initClosed?e.hide():(e.show(),e.css({right:d.east.size}))}}(),x&&S(),k()}null!=(d=n.localStorage("layout.".concat(h)))&&(null!=d.east&&((null==l.minimumRestoreSizeEast||d.east.size>=l.minimumRestoreSizeEast&&!d.east.initClosed)&&(_.east=d.east),_.east.initClosed=d.east.initClosed),null!=d.west&&(null==l.minimumRestoreSizeWest||d.west.size>=l.minimumRestoreSizeWest&&!d.west.initClosed)&&(_.west=d.west)),_.east.resizerCursor="ew-resize",_.west.resizerCursor="ew-resize";var O=a.width(),j=function(){if(null!=l.resizeProportionally&&r.$eval(l.resizeProportionally)){var e=T.readState().east;if(null!=e){var t=a.width();if(t>0){var f=e.size/O*t;O=t,T.sizePane("east",f)}return}}n.$timeout((function(){T.resizeAll()}))},T=a.layout(_);if(T.resizeAll(),null!=l.resizeOn)for(var A=0,P=Array.from(l.resizeOn.split(","));A<P.length;A++){var D=P[A];r.$on(D,(function(){return j()}))}if(x){d=T.readState();var R=r.$new();R.isOpen=!0,R.isVisible=!0,!0===(null!=d[p]?d[p].initClosed:void 0)&&(R.isOpen=!1),R.tooltipMsgWhenOpen=y,R.tooltipMsgWhenClosed=w,R.tooltipPlacement="east"===p?"left":"right",R.handleClick=function(){return T.toggle(p),S()},f=t('<a href ng-show="isVisible" class="custom-toggler '.concat("custom-toggler-".concat(p),'" ng-class="isOpen ? \'custom-toggler-open\' : \'custom-toggler-closed\'" tooltip="{{ isOpen ? tooltipMsgWhenOpen : tooltipMsgWhenClosed }}" tooltip-placement="{{ tooltipPlacement }}" ng-click="handleClick()">'))(R),a.append(f)}if(r.$on("editor:loaded",(function(){n.$timeout((function(){return T.resizeAll()}))})),$(window).unload((function(){var e=C().mapValues(T.readState(),(function(e){return C().omit(e,"children")}));n.localStorage("layout.".concat(h),e)})),null!=l.openEast&&r.$watch(l.openEast,(function(e,t){return null!=e&&e!==t&&(e?T.open("east"):T.close("east"),x&&(S(),f.scope().$applyAsync((function(){f.scope().isOpen=e})))),setTimeout((function(){return r.$digest()}),0)})),null!=l.allowOverflowOn){var I=r.$eval(l.allowOverflowOn),M=T.panes[I];T.allowOverflow(I);var L=M.zIndex();M.css("z-index",L+1)}if(k(),E(),null!=l.layoutDisabled)return r.$watch(l.layoutDisabled,(function(e){if(e?T.hide("east"):T.show("east"),x)return f.scope().$applyAsync((function(){return f.scope().isOpen=!e,f.scope().isVisible=!e}))}))},post:function(e,t,n){var r=n.layout,a=t.layout().readState();return e.$broadcast("layout:".concat(r,":linked"),a)}}}}}]);var Kw,Yw=new RegExp("[\\/\\\\\\*\\u0000-\\u001F\\u007F\\u0080-\\u009F\\uD800-\\uDFFF]","g"),Xw=new RegExp("(^\\.$)|(^\\.\\.$)|(^\\s+)|(\\s+$)","g"),Jw=new RegExp("^(prototype|constructor|toString|toLocaleString|valueOf|hasOwnProperty|isPrototypeOf|propertyIsEnumerable|__defineGetter__|__lookupGetter__|__defineSetter__|__lookupSetter__|__proto__)$"),Qw=Kw={clean:function(e){return e=(e=(e=e.replace(Yw,"_")).replace(Xw,(function(e){return new Array(e.length+1).join("_")}))).replace(Jw,"@$1")},isCleanFilename:function(e){return Kw.isAllowedLength(e)&&!e.match(Yw)&&!e.match(Xw)},isAllowedLength:function(e){return e.length>0&&e.length<=1024}};x.Z.directive("validFile",(function(){return{require:"ngModel",link:function(e,t,n,r){return r.$validators.validFile=function(e){return Qw.isCleanFilename(e)}}}})),x.Z.directive("verticalResizablePanes",["localStorage","ide",function(e,t){return{restrict:"A",link:function(n,r,a){var l=a.verticalResizablePanes,f=n.$eval(a.verticalResizablePanesMinSize),d=n.$eval(a.verticalResizablePanesMaxSize),h=n.$eval(a.verticalResizablePanesDefaultSize),p=null,y=!1;if(l){var w="vertical-resizable:".concat(l,":south-size");p=e(w),$(window).unload((function(){p&&e(w,p)}))}var x={center:{paneSelector:"[vertical-resizable-top]",paneClass:"vertical-resizable-top",size:"auto"},south:{paneSelector:"[vertical-resizable-bottom]",paneClass:"vertical-resizable-bottom",resizerClass:"vertical-resizable-resizer",resizerCursor:"ns-resize",size:"auto",resizable:!0,closable:!1,slidable:!1,spacing_open:6,spacing_closed:6,maxSize:"75%"}},_=a.verticalResizablePanesToggledExternallyOn,S=a.verticalResizablePanesHiddenExternallyOn,k=a.verticalResizablePanesHiddenInitially,C=a.verticalResizablePanesResizeOn,E="".concat(x.south.resizerClass,"-disabled");_&&n.$on(_,(function(e,t){var n,r;t?(O.resizers&&O.resizers.south&&O.resizers.south.removeClass(E),O.sizePane("south",null!==(n=null!==(r=p)&&void 0!==r?r:h)&&void 0!==n?n:"auto")):(O.resizers&&O.resizers.south&&O.resizers.south.addClass(E),O.sizePane("south","auto"))})),S&&t.$scope.$on(S,(function(e,t){t?O.show("south"):O.hide("south")})),C&&t.$scope.$on(C,(function(){t.$timeout((function(){O.resizeAll()}))})),d&&(x.south.maxSize=d),f&&(x.south.minSize=f),h&&(x.south.size=h),x.south.ondrag_end=function(){y=!0},x.south.onresize=function(e,t,n){y&&(p=n.size),y=!1};var O=r.layout(x);"true"===k&&O.hide("south")}}}]),__webpack_require__(43105),__webpack_require__(24905);function ex(e){return ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ex(e)}function tx(e,t){return null!=e?t(e):void 0}function nx(e){e.focus();var t=e.val();if(null!=e[0].setSelectionRange){var n=t.lastIndexOf(".");return-1===n&&(n=t.length),e[0].setSelectionRange(0,n)}}x.Z.factory("ide",["$http","queuedHttp","$modal","$q","$filter","$timeout","eventTracking",function(e,t,n,r,a,l,f){var d=this,h={};return h.$http=e,h.queuedHttp=t,h.$q=r,h.$filter=a,h.$timeout=l,h.globalEditorWatchdogManager=new Yf({onTimeoutHandler:function(e){f.sendMB("losing-edits",e),h.reportError("losing-edits",Object.assign({},e))}}),this.recentEvents=[],h.pushEvent=function(e,t){if(null==t&&(t={}),sl_console.log("event",e,t),d.recentEvents.push({type:e,meta:t,date:new Date}),d.recentEvents.length>100)return d.recentEvents.shift()},h.reportError=function(t,n){null==n&&(n={}),n.user_id=window.user_id,n.project_id=window.project_id,n.client_id=tx(null!=h.socket?h.socket.socket:void 0,(function(e){return e.sessionid})),n.transport=tx(tx(null!=h.socket?h.socket.socket:void 0,(function(e){return e.transport})),(function(e){return e.name})),n.client_now=new Date;var r={};if("object"===ex(t))for(var a=0,l=Array.from(Object.getOwnPropertyNames(t));a<l.length;a++){var f=l[a];r[f]=t[f]}else"string"==typeof t&&(r.message=t);return e.post("/error/client",{error:r,meta:n,_csrf:window.csrfToken})},h.showGenericMessageModal=function(e,t){return n.open({templateUrl:"genericMessageModalTemplate",controller:"GenericMessageModalController",resolve:{title:function(){return e},message:function(){return t}}})},h.showOutOfSyncModal=function(e,t,r){return n.open({templateUrl:"outOfSyncModalTemplate",controller:"OutOfSyncModalController",backdrop:!1,keyboard:!1,resolve:{title:function(){return e},message:function(){return t},editorContent:function(){return r}},windowClass:"out-of-sync-modal"})},h.showLockEditorMessageModal=function(e,t){return n.open({templateUrl:"lockEditorModalTemplate",controller:"GenericMessageModalController",backdrop:!1,keyboard:!1,resolve:{title:function(){return e},message:function(){return t}},windowClass:"lock-editor-modal"})},h}]),x.Z.controller("GenericMessageModalController",["$scope","$modalInstance","title","message",function(e,t,n,r){return e.title=n,e.message=r,e.done=function(){return t.close()}}]),x.Z.controller("OutOfSyncModalController",["$scope","$window","title","message","editorContent",function(e,t,n,r,a){e.title=n,e.message=r,e.editorContent=a,e.editorContentRows=a.split("\n").length,e.done=function(){t.location.reload()}}]),x.Z.directive("focusWhen",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){return t.$watch(r.focusWhen,(function(t){if(t)return e((function(){return n.focus()}))}))}}}]),x.Z.directive("focusOn",["$timeout",function(e){return{restrict:"A",link:function(e,t,n){return e.$on(n.focusOn,(function(){return t.focus()}))}}}]),x.Z.directive("selectWhen",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){return t.$watch(r.selectWhen,(function(t){if(t)return e((function(){return n.select()}))}))}}}]),x.Z.directive("selectOn",["$timeout",function(e){return{restrict:"A",link:function(e,t,n){return e.$on(n.selectOn,(function(){return t.select()}))}}}]),x.Z.directive("selectNameWhen",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){return t.$watch(r.selectNameWhen,(function(t){if(t)return e((function(){return nx(n)}))}))}}}]),x.Z.directive("selectNameOn",(function(){return{restrict:"A",link:function(e,t,n){return e.$on(n.selectNameOn,(function(){return nx(t)}))}}})),x.Z.directive("focus",["$timeout",function(e){return{scope:{trigger:"@focus"},link:function(t,n){return t.$watch("trigger",(function(t){if("true"===t)return e((function(){return n[0].focus()}))}))}}}]);var rx=__webpack_require__(80327),ix=__webpack_require__.n(rx);x.Z.directive("fineUpload",["$timeout",function(e){return{scope:{multiple:"=",endpoint:"@",templateId:"@",sizeLimit:"@",allowedExtensions:"=",onCompleteCallback:"=",onUploadCallback:"=",onValidateBatch:"=",onErrorCallback:"=",onSubmitCallback:"=",onCancelCallback:"=",autoUpload:"=",params:"=",control:"="},link:function(e,t,n){var r,a,l=e.multiple||!1,f=e.endpoint,d=e.templateId;a=null!=e.allowedExtensions?{allowedExtensions:e.allowedExtensions}:{},e.sizeLimit&&(a.sizeLimit=e.sizeLimit);var h=e.maxConnections||1,p=e.onCompleteCallback||function(){},y=e.onUploadCallback||function(){},w=e.onErrorCallback||function(){},x=e.onValidateBatch||function(){},_=e.onSubmitCallback||function(){},S=e.onCancelCallback||function(){};r=null==e.autoUpload||e.autoUpload;var k=e.params||{};k._csrf=window.csrfToken;var C=new(ix().FineUploader)({element:t[0],multiple:l,autoUpload:r,disabledCancelForFormUploads:!0,validation:a,maxConnections:h,request:{endpoint:f,forceMultipart:!0,params:k,paramsInBody:!1},callbacks:{onComplete:p,onUpload:y,onValidateBatch:x,onError:w,onSubmit:_,onCancel:S},template:d,failedUploadTextDisplay:{mode:"custom",responseProperty:"error"}});return window.q=C,null!=e.control&&(e.control.q=C),C}}}]),x.Z.directive("updateScrollBottomOn",["$timeout",function(e){return{restrict:"A",link:function(t,n,r,a){var l=0;return n.on("scroll",(function(e){return l=n[0].scrollHeight-n[0].scrollTop-n[0].clientHeight})),t.$on(r.updateScrollBottomOn,(function(){return e((function(){return n.scrollTop(n[0].scrollHeight-n[0].clientHeight-l)}),0)}))}}}]),x.Z.directive("onEnter",(function(){return function(e,t,n){return t.bind("keydown keypress",(function(t){if(13===t.which)return e.$apply((function(){return e.$eval(n.onEnter,{event:t})})),t.preventDefault()}))}}));x.Z.directive("stopPropagation",["$http",function(e){return{restrict:"A",link:function(e,t,n){return t.bind(n.stopPropagation,(function(e){return e.stopPropagation()}))}}}]);x.Z.directive("preventDefault",["$http",function(e){return{restrict:"A",link:function(e,t,n){return t.bind(n.preventDefault,(function(e){return e.preventDefault()}))}}}]),x.Z.directive("rightClick",(function(){return{restrict:"A",link:function(e,t,n){return t.bind("contextmenu",(function(t){return t.preventDefault(),t.stopPropagation(),e.$eval(n.rightClick)}))}}})),x.Z.directive("expandableTextArea",(function(){return{restrict:"A",link:function(e,t){return e.$watch((function(){return t.val()}),(function(){var n=t.outerHeight(),r=t.prop("scrollHeight");""===t.val()?t.css("height","unset"):r>n&&(e.$emit("expandable-text-area:resize"),t.css("height",r))}))}}})),x.Z.directive("videoPlayState",["$parse",function(e){return{restrict:"A",link:function(t,n,r){var a=n[0];return t.$watch((function(){return e(r.videoPlayState)(t)}),(function(e){return e?(a.currentTime=0,a.play()):a.pause()}))}}}]);function ox(e){return function(e){if(Array.isArray(e))return ax(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ax(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ax(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ax(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}x.Z.factory("queuedHttp",["$http","$q",function(e,t){var n=[],r=!1;function a(){if(!r){var e=n.shift();return null!=e?(r=!0,e().then((function(){return r=!1,a()})).catch((function(){return r=!1,a()}))):void 0}}var l=function(){for(var t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];var f={},d=[],h=[];f.then=function(e,t){return d.push(e),null!=t&&h.push(t),f},f.catch=function(e){return h.push(e),f};return n.push((function(){return e.apply(void 0,ox(Array.from(r||[]))).then((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(d).map((function(e){return e.apply(void 0,ox(Array.from(t||[])))}))})).catch((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(h).map((function(e){return e.apply(void 0,ox(Array.from(t||[])))}))}))})),a(),f};return l.post=function(e,t){return l({method:"POST",url:e,data:t})},l}]),x.Z.factory("validateCaptcha",(function(){var e=[],t=function(t){for(var n=0,r=e;n<r.length;n++){(0,r[n])(t)}e=[]},n=null;return function(r,a){if(null==r&&(r=function(){}),"undefined"==typeof grecaptcha||null===grecaptcha||a)return r();if(e.push(r),e.push((function(){return grecaptcha.reset()})),null==n){var l=$("#recaptcha")[0];n=grecaptcha.render(l,{callback:t})}return grecaptcha.execute(n)}})),x.Z.factory("validateCaptchaV3",(function(){var e=window.grecaptcha,t=window.ExposedSettings;return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e&&t&&t.recaptchaSiteKeyV3&&e.ready((function(){e.execute(t.recaptchaSiteKeyV3,{action:n}).then(r)}))}})),x.Z.factory("waitFor",["$q",function(e){return function(t,n,r){null==r&&(r=500);var a=Math.floor(n/r),l=0;return e((function(e,f){var d;return(d=function(){if(l>a)return f(new Error("waiting too long, ".concat(JSON.stringify({timeout:n,pollInterval:r}))));l+=1;var h=t();return null!=h?e(h):setTimeout(d,r)})()}))}}]);Vp().updateLocale("en",{calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"ddd, Do MMM YY",nextWeek:"ddd, Do MMM YY",sameElse:"ddd, Do MMM YY"}}),x.Z.filter("formatDate",(function(){return function(e,t){return e?(null==t&&(t="Do MMM YYYY, h:mm a"),Vp()(e).format(t)):"N/A"}})),x.Z.filter("utcDate",(function(){return function(e,t){return e?(null==t&&(t="D MMM YYYY, HH:mm:ss"),Vp()(e).utc().format(t)+" UTC"):"N/A"}})),x.Z.filter("relativeDate",(function(){return function(e){return Vp()(e).calendar()}})),x.Z.filter("fromNowDate",(function(){return function(e){return Vp()(e).fromNow()}}));__webpack_require__(2018);var sx="mbEvents",lx=0,cx=new Date;x.Z.factory("eventTracking",["$http","localStorage",function(e,t){var n=function(){var e=t(sx);return null==e&&t(sx,e={}),e},r=function(e){return n()[e]||!1},a=function(e){var r=n();return r[e]=!0,t(sx,r)};return{send:function(e,t,n,r){return ga("send","event",e,t,n,r)},sendGAOnce:function(e,t,n,l){if(!r(t))return a(t),this.send(e,t,n,l)},editingSessionHeartbeat:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(sl_console.log("[Event] heartbeat trigger"),!(cx>new Date)){var n=t();sl_console.log("[Event] send heartbeat request",n),function(t){e({url:"/editingSession/".concat(window.project_id),method:"PUT",data:{segmentation:t},headers:{"X-CSRF-Token":window.csrfToken}})}(n);var r=++lx<=2?30:lx<=6?60*(lx-2):300;cx=Vp()().add(r,"seconds").toDate()}},sendMB:nc.sendMB,sendMBSampled:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;Math.random()<n&&this.sendMB(e,t)},sendMBOnce:function(e,t){r(e)||(a(e),this.sendMB(e,t))},eventInCache:function(e){return r(e)}}}]);$(".navbar a").on("click",(function(e){var t=$(e.target).attr("href");if(null!=t)return ga("send","event","navigation","top menu bar",t)}));x.Z.controller("FreeTrialModalController",["$scope",function(e){e.buttonClass="btn-primary",e.startFreeTrial=function(t,n){return(0,im.Vs)(t,n,e)},e.paywallPrompt=function(e){return(0,im.xG)(e)}}]),x.Z.controller("UpgradeModalController",["$scope",function(e){e.buttonClass="btn-primary",e.upgradePlan=function(t){return(0,im.eR)(t,e)}}]);x.Z.controller("SystemMessagesController",["$http","$scope",function(e,t){function n(){!document.hidden&&navigator.onLine&&e.get("/system/messages").then((function(e){e.headers("content-type").includes("json")&&(t.messages=e.data)})).catch((function(){}))}t.messages=[],n(),setInterval(n,9e5)}]);x.Z.controller("SystemMessageController",["$scope","$sce",function(e,t){return e.hidden=$.localStorage("systemMessage.hide.".concat(e.message._id)),e.protected="protected"===e.message._id,e.htmlContent=e.message.content,e.hide=function(){if(!e.protected)return e.hidden=!0,$.localStorage("systemMessage.hide.".concat(e.message._id),!0)}}]);x.Z.component("dropboxModal",(0,S.react2angular)(eu.use(Yv),Object.keys(Yv.propTypes)));x.Z.controller("ReactDropboxModalController",["$scope",function(e){e.show=!1,e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))},e.openDropboxModal=function(){e.$applyAsync((function(){e.show=!0}))}}]);var ux=__webpack_require__(32687),fx=(__webpack_require__(48319),parseInt((0,xf.Z)("ol-galileoPromptWords"))||200),dx=5*fx;function hx(e){return hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hx(e)}function px(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?px(Object(n),!0).forEach((function(t){gx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):px(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gx(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==hx(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==hx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hx(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vx=100,yx=new Map;function bx(e,t,n){if(!t.prompt)return Promise.resolve();var r=function(e,t,n){return JSON.stringify([e,t,n])}(e,t.prompt,t.highlighted),a=yx.get(r);if(a)return a;var l=new Promise((function(a,l){(0,U.ty)(e,{body:t,signal:null==n?void 0:n.signal}).then((function(e){if("citations"in e)if(0===e.citations.length)a(null);else{var t=e.prompt,n=e.autocomplete;a(e.citations.map((function(e){return{prompt:t,autocomplete:n,citation:e,type:"cite"}})))}else a(mx(mx({},e),{},{type:"predict"}))})).catch((function(e){return l(e)})),n&&n.signal.addEventListener("abort",(function(){yx.delete(r),a(null)}))}));return function(e,t){yx.set(e,t),yx.size>vx&&yx.delete(yx.entries().next().value[0])}(r,l),l}var wx=function(e,t,n){return n&&(e+=n),bx("/galileo/predict",{prompt:e},t).then((function(e){return n&&null!=e&&e.autocomplete&&(e.autocomplete="".concat(n).concat(e.autocomplete)),e})).catch((function(e){return console.error(e),null}))},xx=function(e,t){return bx("/galileo/predict_citation",{prompt:e},t).catch((function(e){return console.error(e),null}))},_x=function(e,t,n,r){return bx("/galileo/predict_instruction",{prompt:e,highlighted:r},t).then((function(e){return n&&null!=e&&e.autocomplete&&(e.autocomplete="".concat(n).concat(e.autocomplete)),e})).catch((function(e){return console.error(e),null}))},Sx=100;function kx(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sx,r=(null===(t=e.entryTags)||void 0===t?void 0:t.title)||e.citationKey;return r.length>n&&(r=r.slice(0,n),r+="…"),r="“".concat(r,"”")}var Cx=50;function Ex(e){var t;if(!e.entryTags)return"";var n=e.entryTags.author;return(null===(t=n)||void 0===t?void 0:t.length)>Cx&&(n=n.slice(0,Cx),n+="…"),[n,e.entryTags.journal||e.entryTags.publisher,e.entryTags.year].filter((function(e){return!!e})).join(" • ")}function Ox(e){var t=e.citeSuggestion;return(0,D.jsxs)(D.Fragment,{children:[kx(t.citation),(0,D.jsx)("br",{}),Ex(t.citation)]})}function jx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tx(e){var t,n=e.suggestion,r=e.setFontSize,a=void 0===r||r,l=jx((0,tc.Z)("settings.fontFamily"),1)[0],f=jx((0,tc.Z)("settings.fontSize"),1)[0],d="galileo-suggestion-text galileo-font-".concat(l);return"cite"===n.type&&(t=n),t?(0,D.jsx)(Ox,{citeSuggestion:t}):(0,D.jsx)("div",{className:d,style:{fontSize:a?f:"inherit"},children:n.autocomplete})}function Ax(e){var t,n,r,a=e.actionType,l=e.suggestion,f=e.handleSelect,d=(0,Qe.$)().t;"cite"===l.type&&(r=l);var h=null===(t=r)||void 0===t||null===(n=t.citation.entryTags)||void 0===n?void 0:n.url;return(0,D.jsxs)("div",{className:"galileo-suggestion small",children:[(0,D.jsx)("div",{className:"galileo-suggestion-body",children:(0,D.jsx)(Tx,{suggestion:l})}),(0,D.jsxs)("div",{className:"galileo-suggestion-footer",children:[(0,D.jsxs)("div",{className:"galileo-suggestion-footer-links",children:[h?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("a",{href:h,rel:"noreferrer",target:"_blank",children:h})," • "]}):null,(0,D.jsx)(Ri.Z,{className:"btn-inline-link",onClick:function(){window.dispatchEvent(new CustomEvent("editor:galileo-open-feedback-modal",{detail:l}))},children:d("galileo_suggestion_feedback_button")})]}),(0,D.jsxs)(Ri.Z,{className:"btn-info btn-sm",onClick:function(){return f(l)},children:["cite"===a&&d("galileo_insert_citation_button"),"math"===a&&d("galileo_insert_math_button"),"instruction"===a&&d("galileo_insert_instruction_button")]})]})]})}function Px(e){return function(e){if(Array.isArray(e))return Ix(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||Rx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rx(e,t){if(e){if("string"==typeof e)return Ix(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ix(e,t):void 0}}function Ix(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mx=1e3,Lx=function(e,t){return Math.abs(t-e)<2};function Nx(){var e=(0,Qe.$)().t,t=(0,oe._i)(),n=t.insertGalileoAutocomplete,r=t.galileoActivated,a=Dx((0,E.useState)([]),2),l=a[0],f=a[1],d=ig(),h=d.isLoading,p=d.isError,y=d.isIdle,w=d.data,x=d.runAsync,_=d.reset,S=ig(),C=S.isLoading,O=S.isError,j=S.isIdle,T=S.data,A=S.runAsync,P=S.reset,R=ig(),I=R.isLoading,M=R.isError,L=R.isIdle,N=R.data,F=R.runAsync,q=R.reset,B=(0,E.useRef)({pos:null,cite:!1,math:!1,comment:!1}),U=(0,E.useRef)(null),H=(0,E.useCallback)((function(e){var t;if(r){var n=e.detail,a=n.docText,l=n.pos,d=n.cite,h=n.math,p=n.comment,y=B.current,w=y.pos,S=y.cite,k=y.math,C=y.comment;if(null===w||d!==S||h!==k||p!==C||!Lx(w,l)){B.current={pos:l,cite:d,math:h,comment:p},f([]),null===(t=U.current)||void 0===t||t.abort(),_(),P(),q();var E=function(e,t){for(var n=e.slice(0,t).split(/\r\n|\r|\n/),r=n.length-1,a=0;r>=0&&a<fx;)a+=n[r].split(/\s+/).length,--r;return n.slice(r+1).join("\n").slice(-dx)}(a,l);U.current=new AbortController,d?x(xx(E,U.current)):h?A(wx(E,U.current)):p?F(_x(E,U.current,"\n")):(A(wx(E,U.current," $$")),x(xx(E,U.current)))}}}),[_,P,q,x,A,F,r]);(0,E.useEffect)((function(){T&&f((function(e){return[].concat(Px(e),[[{actionType:"math",suggestion:T}]])}))}),[T]),(0,E.useEffect)((function(){N&&f((function(e){return[].concat(Px(e),[[{actionType:"instruction",suggestion:N}]])}))}),[N]),(0,E.useEffect)((function(){w&&f((function(e){return[].concat(Px(e),[w.map((function(e){return{actionType:"cite",suggestion:e}}))])}))}),[w]);var z=(0,E.useCallback)((0,k.debounce)((function(e){H(e)}),Mx,{leading:!0}),[H]);return(0,ux.Z)("editor:galileo-cursor-update",z),(0,ux.Z)("editor:galileo-cursor-context",H),(0,E.useEffect)((function(){null===B.current.pos&&window.dispatchEvent(new CustomEvent("editor:galileo-request-cursor-context"))}),[]),(0,E.useEffect)((function(){var e;r||(null===(e=U.current)||void 0===e||e.abort(),B.current={pos:null,cite:!1,math:!1,comment:!1})}),[r]),(0,E.useLayoutEffect)((function(){return function(){var e;null===(e=U.current)||void 0===e||e.abort()}}),[]),(p||O||M)&&(p||y)&&(O||j)&&(M||L)?(0,D.jsx)(ts.Z,{bsStyle:"danger",className:"mt-2",children:e("galileo_suggestions_loading_error")}):(0,D.jsxs)("div",{className:"galileo-suggestions",children:[l.map((function(e){return e.map((function(e){return(0,D.jsx)(Ax,{suggestion:e.suggestion,actionType:e.actionType,handleSelect:n},e.actionType)}))})),h||C||I?(0,D.jsx)(uy,{}):null]})}function Fx(){var e=(0,oe._i)().toggleGalileoPanel;return(0,D.jsxs)(Ri.Z,{onClick:e,className:"galileo-close-button",children:[(0,D.jsx)("span",{"aria-hidden":"true",children:"×"}),(0,D.jsx)("span",{className:"sr-only",children:"Close"})]})}function qx(){var e=(0,Qe.$)().t,t=(0,oe._i)(),n=t.galileoActivated,r=t.toggleGalileo;return(0,D.jsxs)("fieldset",{className:"toggle-switch",children:[(0,D.jsx)("legend",{className:"sr-only",children:"Galileo"}),(0,D.jsx)("input",{type:"radio",name:"galileo",value:"on",id:"galileo-switch-on",className:"toggle-switch-input",checked:n,onChange:r}),(0,D.jsx)("label",{htmlFor:"galileo-switch-on",className:"toggle-switch-label",children:(0,D.jsx)("span",{children:e("on")})}),(0,D.jsx)("input",{type:"radio",name:"galileo",value:"off",id:"galileo-switch-off",className:"toggle-switch-input",checked:!n,onChange:r}),(0,D.jsx)("label",{htmlFor:"galileo-switch-off",className:"toggle-switch-label",children:(0,D.jsx)("span",{children:e("off")})})]})}function Bx(){var e=(0,Qe.$)().t;return(0,D.jsxs)("div",{className:"galileo-promo",children:[(0,D.jsxs)("div",{className:"galileo-promo-boxes",children:[(0,D.jsxs)("div",{className:"galileo-promo-box",children:[(0,D.jsx)("h3",{children:e("galileo_promo_shadow_text_title")}),(0,D.jsx)("p",{children:e("galileo_promo_shadow_text_content")}),(0,D.jsx)("div",{className:"galileo-promo-image",style:{backgroundImage:'url("/img/galileo/shadow-text-hero.png")'}})]}),(0,D.jsxs)("div",{className:"galileo-promo-box",children:[(0,D.jsx)("h3",{children:e("galileo_promo_autocomplete_title")}),(0,D.jsx)("p",{children:e("galileo_promo_autocomplete_content")}),(0,D.jsx)("div",{className:"galileo-promo-image",style:{backgroundImage:'url("/img/galileo/autocomplete-hero.png")'}})]})]}),(0,D.jsxs)("p",{children:[e("galileo_promo_subtitle_1"),(0,D.jsx)("br",{}),(0,D.jsx)("a",{href:"/labs/galileo",target:"_blank",children:e("learn_more")})]}),(0,D.jsx)("p",{children:e("galileo_promo_subtitle_2")})]})}function Ux(){var e=(0,Qe.$)().t;return(0,D.jsx)(D.Fragment,{children:e("galileo_only_available_in_cm6")})}function Hx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vx(){var e=(0,Qe.$)().t,t=(0,oe._i)().galileoActivated,n=Hx((0,tc.Z)("editor.showRichText"),1)[0],r=Hx((0,tc.Z)("editor.newSourceEditor"),1)[0]&&!n;return(0,D.jsxs)("div",{className:"galileo",children:[(0,D.jsxs)("div",{className:"galileo-header",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(Ii.Z,{type:"flask",className:"me-1"})," Galileo"]}),r?(0,D.jsxs)(D.Fragment,{children:[e("galileo_is"),(0,D.jsx)(qx,{})]}):null,(0,D.jsx)(Fx,{})]}),(0,D.jsxs)("div",{className:"galileo-body",children:[r?null:(0,D.jsx)(Ux,{}),r&&t?(0,D.jsx)(Nx,{}):null,r&&!t?(0,D.jsx)(Bx,{}):null]}),(0,D.jsxs)("div",{className:"galileo-footer",children:[(0,D.jsx)(Ri.Z,{className:"btn-inline-link",onClick:function(){window.dispatchEvent(new CustomEvent("editor:galileo-open-feedback-modal"))},children:e("galileo_feedback_button")}),"•",(0,D.jsx)("a",{href:"/labs/galileo/privacy",rel:"noreferrer",target:"_blank",children:e("privacy_policy")}),"•",(0,D.jsx)("a",{href:"/labs/galileo",rel:"noreferrer",target:"_blank",children:e("learn_more")})]})]})}function Wx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zx=(0,xf.Z)("ol-user"),Gx=!!Zx&&Zx.labsProgram&&Zx.labsProgramGalileo,Kx=(0,xf.Z)("ol-galileoEnabled",""),Yx=(Gx||"true"===Kx)&&"false"!==Kx,Xx=(0,xf.Z)("ol-galileoFeatures",["all"]),Jx=Xx.includes("all"),Qx=Yx&&Jx,e_={shadowTextAuto:Qx,shadowTextKey:Qx,autocomplete:Qx,panel:Qx,bibtexSave:Qx,instructionModal:Qx};if(Yx){var t_,n_=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Wx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wx(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}(Xx);try{for(n_.s();!(t_=n_.n()).done;){var r_=t_.value;r_ in e_&&(e_[r_]=!0)}}catch(e){n_.e(e)}finally{n_.f()}}x.Z.component("galileo",(0,S.react2angular)(eu.use((function(){var e=(0,oe._i)(),t=e.showGalileo,n=e.toggleGalileoPanel,r=e.galileoActivated,a=e.toggleGalileo,l=(0,A.d2)({_id:j().string.isRequired})._id,f=(0,E.useCallback)((function(e){var t=e.detail,n=t.citationKey,r=t.bibtex;(0,U.BS)("/galileo/project/".concat(l,"/reference"),{body:{bibtex:r,citationKey:n}}).then((function(e){var t=e.createdBibFile,r=e.appendedToBibFile;window.dispatchEvent(new CustomEvent("editor:galileo-saved-reference-in-project",{detail:{citationKey:n,createdBibFile:t,appendedToBibFile:r}}))}))}),[l]);(0,ux.Z)("editor:galileo-request-save-reference-in-project",f),(0,E.useEffect)((function(){window.dispatchEvent(new CustomEvent("editor:galileo-activated-change",{detail:r}))}),[r]);var d="galileo.activated.".concat(l),h="galileo.showPanel.".concat(l),p=(0,E.useRef)(!1);return(0,E.useEffect)((function(){p.current||(p.current=!0,Yx&&(Ap.Z.getItem(d)&&a(),Ap.Z.getItem(h)&&n()))}),[d,h,a,n]),(0,E.useEffect)((function(){Ap.Z.setItem(h,t)}),[t,h]),(0,E.useEffect)((function(){Ap.Z.setItem(d,r)}),[r,d]),(0,ux.Z)("galileo:activation-plugin-ready",(function(){window.dispatchEvent(new CustomEvent("editor:galileo-activated-change",{detail:r}))})),t?(0,D.jsx)(Vx,{}):null})))),x.Z.component("galileoToolbarButton",(0,S.react2angular)(eu.use((function(){var e=(0,Qe.$)().t,t=(0,oe._i)(),n=t.showGalileo,r=t.toggleGalileoPanel;return Yx?(0,D.jsx)(vo.Z,{id:"galileo-tooltip",description:e("galileo_toggle_description"),overlayProps:{placement:"bottom",delayHide:100},children:(0,D.jsxs)("button",{className:se()("formatting-btn ps-1 pe-1",{active:n}),onClick:function(){r()},children:[(0,D.jsx)(Ii.Z,{type:"flask",className:"me-1"})," Galileo"]})}):null}))));x.Z.controller("GitBridgeController",["$scope","$modal","eventTracking","ide",function(e,t,n,r){e.type="show_url",e.openGitBridgeModal=function(){var t=r.$scope.project.features.gitBridge||r.$scope.user.features.gitBridge,a=e.user.id===e.project.owner._id;t||n.send("subscription-funnel","editor-click-feature","gitBridge"),e.$applyAsync((function(){e.type=t?"show_url":a?"teaser":"collaborator",e.show=!0}))},e.show=!1,e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))}}]);x.Z.component("gitBridgeModal",(0,S.react2angular)(eu.use(Ly),["show","handleHide","type"])),x.Z.component("githubSyncModal",(0,S.react2angular)(eu.use(yb),["show","handleHide","isProjectMember","handleIgnoringExternalUpdates"]));x.Z.controller("LeftMenuGithubSyncModalController",["$scope","ide",function(e,t){e.show=!1,e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))},e.handleIgnoringExternalUpdates=function(e){e?t.editorManager.startIgnoringExternalUpdates():t.editorManager.stopIgnoringExternalUpdates()},e.openGithubSyncModal=function(){e.$applyAsync((function(){t.$scope.project&&(e.isProjectMember=t.$scope.permissions.write,e.show=!0)}))}}]);var i_=ace.require("ace/range").Range;x.Z.controller("ReferencesSearchController",["$scope","$modal","ide","$timeout","eventTracking","$rootScope",function(e,t,n,r,a,l){if(e.searchFeatureEnabled=function(){return!0},e.searchFeatureEnabled()){e.searchEnabled=!1,e.isCursorAtCitation=function(e){var t=e.getCursorPosition(),n=new i_(t.row,0,t.row,t.column),r=function(e){var t;return(t=e.match(/(\\[^\\]+)$/))?t[1]:null}(e.getSession().getTextRange(n));if(r&&r.match(/^~?\\([a-z]*cite[a-z]*(?:\[.*])?){([^}]*, *)?(\w*)/))return!0;return!1},e._hintNode=null,e._buildHintNode=function(){a.sendMBOnce("bib-search-hint-shown-once");var e=$(".sl_references_search_hint")[0];if(e)return e.style.display="block",e.style.visibility="visible",e;console.log("Error: could not find .sl_references_search_hint node in dom")},e.updateHintNode=function(t){var n,a;if(!0===(null==t||null===(n=t.completer)||void 0===n||null===(a=n.popup)||void 0===a?void 0:a.isOpen)&&!e._hintNode&&e.isCursorAtCitation(t)){var l,f,d,h=e._buildHintNode(),p=null==t||null===(l=t.completer)||void 0===l||null===(f=l.popup)||void 0===f||null===(d=f.renderer)||void 0===d?void 0:d.container;if(!p)return void console.log("Error attaching search hint: could not find popup container");p.style.overflow="visible",$(p).append(h),e._hintNode=h;var y=t.completer.popup;if(!y.hide._sl_patched){var w=y.hide.bind(y);y.hide=function(){return r((function(){if(!e.isCursorAtCitation(t))return e._hideHint()}),0),w()},y.hide._sl_patched=!0}}if(e._hintNode)return e.isCursorAtCitation(t)?e._showHint():e._hideHint()},e._showHint=function(){if(e._hintNode)return e._hintNode.style.visibility="visible"},e._hideHint=function(){if(e._hintNode)return e._hintNode.style.visibility="hidden"},e.setup=function(){var t,l,d;if(!1!==e.settings.autoComplete)if(null!=f){var h=null===(t=f)||void 0===t||null===(l=t.commands)||void 0===l||null===(d=l.commands)||void 0===d?void 0:d.startAutocomplete;if(h){if(!h._sl_patched){var p=h.exec;h.exec=function(t,n,a,l,f){return r((function(){return e.updateHintNode(t)}),0),p(t)},h._sl_patched=!0}f.commands.addCommand({name:"triggerReferencesSearchPopup",exec:function(t){var l,f;r((function(){return e.updateHintNode(t)}),0);var d,p,y,w=e.isCursorAtCitation(t);return!0===(null==t||null===(l=t.completer)||void 0===l||null===(f=l.popup)||void 0===f?void 0:f.isOpen)&&!0===w?(a.sendMB("bib-search-modal-opened"),e.searchEnabled=!0===(null==n||null===(d=n.$scope)||void 0===d||null===(p=d.project)||void 0===p||null===(y=p.features)||void 0===y?void 0:y.referencesSearch),e.openReferencesSearchModal()):h.exec(t)},bindKey:h.bindKey})}else console.log("could not find startAutocomplete command")}else console.log("no editor found")};var f=null;return l.$on("editor:inited",(function(t,n){return f=n,setTimeout(e.setup)})),e.insertKeyAtCursor=function(e){if(null!=f){var t=f.getCursorPosition(),n=f.getSession(),r=f.getSession().getTextRange(new i_(t.row,0,t.row,t.column)),a=!f.getSession().getTextRange(new i_(t.row,t.column,t.row,99999)).match(/^[^{]*}/),l=Math.max(r.lastIndexOf("{"),r.lastIndexOf(","),r.lastIndexOf(" "));return l<t.column-1?(n.remove(new i_(t.row,l+1,t.row,t.column)),t=f.getCursorPosition(),n.insert(t,e)):n.insert(t,e),a?n.insert(f.getCursorPosition(),"}"):void 0}console.log("no editor found")},e.openReferencesSearchModal=function(){var n=t.open({templateUrl:"referencesSearchModalTemplate",controller:"ReferencesSearchModalController",scope:e,size:"lg",animation:!1,backdrop:!0,backdropClass:"references-search-modal-backdrop",keyboard:!0});return e.searchEnabled||a.sendMB("paywall-prompt",{"paywall-type":"references-search"}),n.result.then((function(t){return e.insertKeyAtCursor(t)}))},n.referencesSearchManager={openReferencesModal:function(t){return e.openReferencesSearchModal(t)}}}}]),x.Z.controller("ReferencesSearchModalController",["$scope","$modalInstance","$window","$timeout","ide","eventTracking",function(e,t,n,r,a,l){if(e.searchFeatureEnabled())return e.state={queryText:"",searchResults:null,selectedIndex:null,currentlySearching:!1,error:!1},e.handleInputKeyDown=function(t){return 40===t.keyCode?(t.preventDefault(),void e.moveSelectionForward()):38===t.keyCode?(t.preventDefault(),void e.moveSelectionBackward()):9===t.keyCode?(t.preventDefault(),void(t.shiftKey?e.moveSelectionBackward():e.moveSelectionForward())):13===t.keyCode?(t.preventDefault(),void e.acceptSelectedSearchResult()):[37,39].includes(t.keyCode)?void(e.state.selectedIndex=null):[8].includes(t.keyCode)?(e.state.selectedIndex=null,void r(e.doAutoSearch,0)):void(16===t.keyCode||t.altKey||t.ctrlKey||t.metaKey||r(e.doAutoSearch,0))},e.doAutoSearch=function(){var t=e.state;if(t.queryText&&t.queryText.length>=3)return e.doSearch()},e.moveSelectionForward=function(){if(null===e.state.selectedIndex){if(e.state.searchResults&&e.state.searchResults.length>0)return e.state.selectedIndex=0}else if(e.state.searchResults&&e.state.searchResults.length>0){e.state.selectedIndex++;var t=e.state.searchResults.length-1;if(e.state.selectedIndex>t)return e.state.selectedIndex=t}},e.moveSelectionBackward=function(){if(null===e.state.selectedIndex);else if(e.state.searchResults&&e.state.searchResults.length>0&&(e.state.selectedIndex--,e.state.selectedIndex<0))return e.state.selectedIndex=null},e.doSearch=function(){if(""!==e.state.queryText){e.state.queryText,window.csrfToken;return e.state.currentlySearching=!0,a.$http.post("/project/".concat(e.project_id,"/references/search"),{query:e.state.queryText,_csrf:window.csrfToken}).then((function(t){return e.state.searchResults=t.data.hits,e.state.selectedIndex=null,e.state.currentlySearching=!1,e.state.error=!1}),(function(t){return console.error(">> error searching references",t),e.state.selectedIndex=null,e.state.currentlySearching=!1,e.state.error=!0})),r((function(){return e.state.currentlySearching=!1}),3e4)}},e.selectIndex=function(t){if(e.state.searchResults)return e.state.selectedIndex=t},e.acceptSelectedSearchResult=function(){if(e.state.searchResults&&null!==e.state.selectedIndex){l.sendMB("bib-search-result-inserted");var n=e.state.searchResults[e.state.selectedIndex];return t.close(n._source.EntryKey)}},e.cancel=function(){return t.dismiss("cancel")}}]);function o_(e){return o_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o_(e)}function a_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==o_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===o_(l)?l:String(l)),r)}var a,l}var s_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fileTreeManager=t}var t,n,r;return t=e,n=[{key:"fileExistsForPath",value:function(e){return!!this.fileTreeManager.findEntityByPath(e)}},{key:"getEntityForPath",value:function(e){for(var t,n=0,r=["",".png",".pdf",".jpg",".jpeg",".eps"];n<r.length;n++){var a=r[n];if(t=this.fileTreeManager.findEntityByPath("".concat(e).concat(a)))break}return t}},{key:"getPreviewUrlForEntity",value:function(e){return"/project/".concat(window.project_id,"/file/").concat(e.id)}},{key:"isPreviewableEntity",value:function(e){return!["eps","pdf"].includes(function(e){if(e&&e.name){var t=e.name.split(".").pop();return t?t.toLowerCase():null}return null}(e))}}],n&&a_(t.prototype,n),r&&a_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var l_=s_;function c_(e){return c_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c_(e)}function u_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==c_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===c_(l)?l:String(l)),r)}var a,l}var f_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.replaceWord=this.replaceWord.bind(this),this.editor=t,this.highlightedWordManager=this.editor.highlightedWordManager}var t,n,r;return t=e,(n=[{key:"getLines",value:function(){return this.editor.getCodeMirror().getValue().split("\n")}},{key:"getLineCount",value:function(){return this.editor.getCodeMirror().doc.lineCount()}},{key:"getFirstVisibleRowNum",value:function(){return this.editor.getCodeMirror().getViewport().from}},{key:"getLastVisibleRowNum",value:function(){return this.editor.getCodeMirror().getViewport().to}},{key:"getLinesByRows",value:function(e){var t=this;return e.map((function(e){return t.editor.getCodeMirror().getLine(e)}))}},{key:"getSelectionContents",value:function(){return this.editor.getCodeMirror().getSelection()}},{key:"normalizeChangeEvent",value:function(e){return{start:{row:e.from.line},end:{row:e.to.line},action:null!=e.removed?"remove":"insert"}}},{key:"getCoordsFromContextMenuEvent",value:function(e){return e.stopPropagation(),{x:e.pageX,y:e.pageY}}},{key:"isContextMenuEventOnBottomHalf",value:function(e){var t=e.clientY,n=e.currentTarget.getBoundingClientRect();return(t-n.top)/n.height>.5}},{key:"preventContextMenuEventDefault",value:function(e){e.preventDefault()}},{key:"getHighlightFromCoords",value:function(e){var t=this.editor.getCodeMirror().coordsChar({left:e.x,top:e.y});return this.highlightedWordManager.findHighlightAtPosition(t)}},{key:"selectHighlightedWord",value:function(e){var t=e.marker.find();this.editor.getCodeMirror().setSelection(t.from,t.to)}},{key:"replaceWord",value:function(e,t){var n=this.editor.getCodeMirror();n.replaceSelection(t),n.focus()}}])&&u_(t.prototype,n),r&&u_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d_=f_;function h_(e){return h_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h_(e)}function p_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==h_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===h_(l)?l:String(l)),r)}var a,l}var m_=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onChange=this.onChange.bind(this),this.$scope=t,this.metadata=n,this.bibtexReferences=r,this.debouncer={}}var t,n,r;return t=e,(n=[{key:"getCommandCompletions",value:function(e){return[].concat(wd,this.getCommandCompletionsFromMetadata()).map((function(t){return{text:t.caption,displayText:t.caption,hint:e}}))}},{key:"getCommandCompletionsFromMetadata",value:function(){return C().flattenDeep(this.metadata.getAllPackages())}},{key:"getBeginCommandArguments",value:function(){return jd.all}},{key:"getBibtexArguments",value:function(){return this.bibtexReferences}},{key:"getReferenceArguments",value:function(){return this.metadata.getAllLabels()}},{key:"onChange",value:function(e){var t=e.getCursor().line,n=e.getLine(t);if(!(n.length>1e4))return/\\(usepackage|RequirePackage|label)(\[.*])?({.*})?/.test(n)?this.metadata.scheduleLoadDocMetaFromServer(this.$scope.docId):void 0}}])&&p_(t.prototype,n),r&&p_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g_(e){return g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g_(e)}function v_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==g_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==g_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===g_(l)?l:String(l)),r)}var a,l}var y_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getCursor=this.getCursor.bind(this),this.editor=t}var t,n,r;return t=e,(n=[{key:"convertToAcePos",value:function(e){var t=e.line,n=e.ch;return{row:t,column:null!=n?n:0}}},{key:"convertFromAcePos",value:function(e){var t=e.row,n=e.column;return{line:t,ch:null!=n?n:0}}},{key:"getCursor",value:function(){return this.convertToAcePos(this.editor.getCodeMirror().getCursor())}},{key:"getEditorScrollPosition",value:function(){return this.editor.getCodeMirror().getViewport().from+10}},{key:"setCursor",value:function(e){return e=e.cursorPosition||{row:0,column:0},this.editor.getCodeMirror().setCursor(this.convertFromAcePos(e))}},{key:"setEditorScrollPosition",value:function(e){e=e.firstVisibleLine||0;var t=this.editor.getCodeMirror(),n=t.heightAtLine(e,"local");return t.scrollTo(null,n)}},{key:"clearSelection",value:function(){}},{key:"gotoLine",value:function(e,t){var n={cursorPosition:{row:e-1,column:t}};this.setCursor(n),this.centerOnCursor()}},{key:"centerOnCursor",value:function(){var e=this.editor.getCodeMirror(),t=e.getScrollInfo().clientHeight,n=e.cursorCoords(!0,"local"),r=(n.top+n.bottom-t)/2;e.scrollTo(null,r),e.focus()}},{key:"focus",value:function(){this.editor.getCodeMirror().focus()}},{key:"gotoOffset",value:function(){}}])&&v_(t.prototype,n),r&&v_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b_(e){return b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b_(e)}function w_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==b_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==b_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===b_(l)?l:String(l)),r)}var a,l}var x_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.findTrackChangesMarker=this.findTrackChangesMarker.bind(this),this.getTrackChangesMarkers=this.getTrackChangesMarkers.bind(this),this.onInsertAdded=this.onInsertAdded.bind(this),this.shareJsOffsetToRowColumn=this.shareJsOffsetToRowColumn.bind(this),this.onDeleteAdded=this.onDeleteAdded.bind(this),this.onChangeMoved=this.onChangeMoved.bind(this),this.editor=t,this.cm=this.editor.getCodeMirror()}var t,n,r;return t=e,(n=[{key:"getTrackChangesMarkers",value:function(){return this.cm.doc.getAllMarks().filter((function(e){var t=e.className&&-1!==e.className.indexOf("track-changes-marker"),n="bookmark"===e.type&&e.replacedWith&&-1!==e.replacedWith.className.indexOf("track-changes-marker");return t||n}))}},{key:"findTrackChangesMarker",value:function(e){return this.getTrackChangesMarkers().find((function(t){return t.id===e}))}},{key:"clearAnnotations",value:function(){this.getTrackChangesMarkers().forEach((function(e){return e.clear()})),this.changeIdToMarkerIdMap={}}},{key:"tearDown",value:function(){this.changeIdToMarkerIdMap={}}},{key:"onInsertAdded",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.i.length),r=this.cm.doc.markText({line:t.row,ch:t.column},{line:n.row,ch:n.column},{className:"track-changes-marker track-changes-added-marker"});this.changeIdToMarkerIdMap[e.id]=r.id}},{key:"onDeleteAdded",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=document.createElement("span");n.className="track-changes-marker track-changes-deleted-marker";var r=this.cm.setBookmark({line:t.row,ch:t.column},{widget:n,insertLeft:!0});this.changeIdToMarkerIdMap[e.id]=r.id}},{key:"onInsertRemoved",value:function(e){var t=this.changeIdToMarkerIdMap[e.id];delete this.changeIdToMarkerIdMap[e.id];var n=this.findTrackChangesMarker(t);n&&n.clear()}},{key:"onDeleteRemoved",value:function(e){var t=this.changeIdToMarkerIdMap[e.id];delete this.changeIdToMarkerIdMap[e.id];var n=this.findTrackChangesMarker(t);n&&n.clear()}},{key:"onChangeMoved",value:function(e){var t,n=this.shareJsOffsetToRowColumn(e.op.p);t=null!=e.op.i?this.shareJsOffsetToRowColumn(e.op.p+e.op.i.length):n,this.updateMarker(e,n,t)}},{key:"onCommentAdded",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.c.length),r=this.cm.doc.markText({line:t.row,ch:t.column},{line:n.row,ch:n.column},{className:"track-changes-marker track-changes-comment-marker"});this.changeIdToMarkerIdMap[e.id]=r.id}},{key:"onCommentMoved",value:function(e){var t=this.shareJsOffsetToRowColumn(e.op.p),n=this.shareJsOffsetToRowColumn(e.op.p+e.op.c.length);this.updateMarker(e,t,n)}},{key:"onCommentRemoved",value:function(e){if(this.changeIdToMarkerIdMap[e.id]){var t=this.changeIdToMarkerIdMap[e.id];delete this.changeIdToMarkerIdMap[e.id];var n=this.findTrackChangesMarker(t);n&&n.clear()}}},{key:"updateMarker",value:function(e,t,n){var r=this.changeIdToMarkerIdMap[e.id];if(e.op.i||e.op.c){var a=this.findTrackChangesMarker(r);if(!a)return;a.clear();var l=e.op.i?"added":"comment",f=this.cm.doc.markText({line:t.row,ch:t.column},{line:n.row,ch:n.column},{className:"track-changes-marker track-changes-".concat(l,"-marker")});this.changeIdToMarkerIdMap[e.id]=f.id}}},{key:"shareJsOffsetToRowColumn",value:function(e){var t=this.cm.doc.getValue().split("\n");return Rh.shareJsOffsetToRowColumn(e,t)}}])&&w_(t.prototype,n),r&&w_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),__=x_;x.Z.directive("cmEditor",["ide","metadata","localStorage","$cacheFactory","$http","$q",function(e,t,n,r,a,l){return{scope:{bundle:"=",formattingEvents:"=",initCodeMirror:"=",sharejsDoc:"=",readOnly:"=",spellCheck:"=",spellCheckLanguage:"=",trackChanges:"=",autoComplete:"=",autoCloseBrackets:"=",fontSize:"=",lineHeight:"=",docId:"=",onSave:"="},link:function(f,d,h){var p=d.find(".cm-editor-body"),y=null,w=null,x=null,_=null,S=new m_(f,t,f.$root._references),k={triggerSyncToPdf:q};f.name="editor";function E(e,t){if(e!==t)return null!=t&&I(t),null!=e&&R(e),null!=e&&null!=t?f.$broadcast("afterChangeDocument"):void 0}f.$watch("sharejsDoc",E),f.$watch("readOnly",(function(e){if(null!=e)return y.setReadOnly(e)}));var O=/[\0\uD800-\uDFFF]/g,j=function(e,t){if(t.update){var n=t.text.join("\n");if(O.lastIndex=0,O.test(n)){for(var r=[],a=0;a<t.text.length;a++){var l=t.text[a].replace(O,"�");r.push(l)}t.update(t.from,t.to,r)}}},T=function(){y.getCodeMirror().off("beforeChange",j)},A=C().once((function(){return f.$broadcast("editorInit")})),P=null,D=function(){var e=y.getCodeMirror(),t=e.getScrollInfo(),n=e.lineAtHeight(t.top,"local");if(n!==P){P=n;var r=e.lineAtHeight(t.top+t.clientHeight,"local");f.$emit("scroll:editor:update",Math.floor((n+r)/2))}},R=function(e){return f.$applyAsync((function(){return y.openDoc(e.getSnapshot()),e.attachToCM(y.getCodeMirror()),y.enable(),e.on("remoteop.richtext",(function(){return y.update()})),y.getCodeMirror().on("scroll",D),y.getCodeMirror().clearHistory(),y.getCodeMirror().on("beforeChange",j),A(),f.readOnly||function(){(w=new ch(f,r,a,l,new d_(y))).init();var e=y.getCodeMirror();e.on("change",M),$(e.getWrapperElement()).on("contextmenu",w.onContextMenu),e.on("scroll",w.onScroll)}(),N(),B()}))};function I(e){return L(),F(),U(),T(),e.detachFromCM(),y.getCodeMirror().off("scroll",D),e.off("remoteop.richtext")}var M=function(e,t){return w.onChange(t)};function L(){var e=y.getCodeMirror();e.off("change",M),w&&($(e.getWrapperElement()).off("contextmenu",w.onContextMenu),e.off("scroll",w.onScroll))}var N=function(){var e=y.getCodeMirror();(x=new zh(f,null,d,new __(y))).rangesTracker=f.sharejsDoc.ranges,x.onChangeSession(),e.on("swapDoc",x.onChangeSession)},F=function(){var e=y.getCodeMirror();x.tearDown(),e.off("swapDoc",x.onChangeSession)};var q=function(){return _.onSyncToPdf()},B=function(){return y.getCodeMirror().on("change",S.onChange)},U=function(){return y.getCodeMirror().off("change",S.onChange)},H=function(e){return f[e]};if(f.$on("$destroy",(function(){return f.$broadcast("changeEditor"),L(),y.getCodeMirror().off("cursorActivity",_.onCursorChange),$(window).off("unload",_.onUnload),f.formattingEvents.off("section"),f.formattingEvents.off("subsection"),f.formattingEvents.off("bold"),f.formattingEvents.off("italic"),f.formattingEvents.off("inlineMath"),f.formattingEvents.off("displayMath"),f.formattingEvents.off("numberedList"),f.formattingEvents.off("bulletList"),U(),I(f.sharejsDoc),y.disable()})),y=new f.bundle.Editor(p[0],new l_(e.fileTreeManager),S,k,H),e.globalEditorWatchdogManager.attachToEditor("CM",y.getCodeMirror()),_=new Dh(f,new y_(y),n),y.getCodeMirror().on("cursorActivity",_.onCursorChange),$(window).on("unload",_.onUnload),E(f.sharejsDoc),f.formattingEvents.on("section",(function(){return y.wrapSection()})),f.formattingEvents.on("subsection",(function(){return y.wrapSubsection()})),f.formattingEvents.on("bold",(function(){return y.wrapBold()})),f.formattingEvents.on("italic",(function(){return y.wrapItalic()})),f.formattingEvents.on("inlineMath",(function(){return y.wrapInlineMath()})),f.formattingEvents.on("displayMath",(function(){return y.wrapDisplayMath()})),f.formattingEvents.on("numberedList",(function(){return y.wrapNumberedList()})),f.formattingEvents.on("bulletList",(function(){return y.wrapBulletList()})),e.$scope.$on("editor:replace-selection",(function(e,t){var n=y.getCodeMirror();n.focus(),n.replaceSelection(t),n.scrollIntoView(n.getCursor(),100)})),e.$scope.$on("symbol-palette-toggled",(function(e,t){t||y.getCodeMirror().focus()})),e.$scope.$on("galileo-toggled",(function(e,t){t||y.getCodeMirror().focus()})),null!=h.resizeOn)for(var z=0,V=Array.from(h.resizeOn.split(","));z<V.length;z++){var W=V[z];f.$on(W,(function(){return S_(null!=y?y.getCodeMirror():void 0,(function(e){return e.refresh()}))}))}return f.$watch("fontSize",(function(e){return p.css({"font-size":"".concat(e,"px")}),S_(null!=y?y.getCodeMirror():void 0,(function(e){return e.refresh()}))})),f.$watch("lineHeight",(function(e){var t;if(e){switch(e){case"compact":t=1.33;break;case"normal":default:t=1.6;break;case"wide":t=2}return p.css({"line-height":t}),S_(null!=y?y.getCodeMirror():void 0,(function(e){return e.refresh()}))}}))},template:'<div class="cm-editor-wrapper rich-text">\n<div class="cm-editor-body"></div>\n<spell-menu\n  open="spellMenu.open"\n  top="spellMenu.top"\n  left="spellMenu.left"\n  layout-from-bottom="spellMenu.layoutFromBottom"\n  highlight="spellMenu.highlight"\n  replace-word="replaceWord(highlight, suggestion)"\n  learn-word="learnWord(highlight)"\n></spell-menu>\n</div>'}}]);function S_(e,t){return null!=e?t(e):void 0}x.Z.directive("formattingButtons",(function(){return{scope:{buttons:"=",opening:"=",isFullscreenEditor:"="},link:function(e,t,n){e.showMore=!1,e.shownButtons=[],e.overflowedButtons=[];var r=e.$watch("opening",(function(t){if(!t)return a(),function(){if($(window).on("resize",f),null!=n.resizeOn)Array.from(n.resizeOn.split(",")).map((function(t){return e.$on(t,f)}))}(),r()}));function a(){var n=t.width(),r=Math.floor(n/33);return r<e.buttons.length?(e.showMore=!0,n-=70,r=Math.floor(n/33),l(r)):(e.showMore=!1,l(r))}var l=function(t){return e.$applyAsync((function(){return e.shownButtons=e.buttons.slice(0,t),e.overflowedButtons=e.buttons.slice(t)}))},f=C().debounce(a,300);return e.$watch("$destroy",(function(){return $(window).off("resize",f)})),e.$watch("isFullscreenEditor",(function(e,t){if(e!==t)return f()}))},templateUrl:"formattingButtonsTpl"}}));x.Z.controller("EditorLoaderController",["$scope","localStorage",function(e,t){e.richText={bundle:null,formattingEvents:new Nf},e.$watch("editor.showRichText",(function(n){if("cm6"===(0,xf.Z)("ol-richTextVariant"))return!1;t("editor.mode.".concat(e.project_id),!0===n?"rich-text":"source"),n&&!e.richText.bundle&&Promise.all([__webpack_require__.e(4083),__webpack_require__.e(1379)]).then(__webpack_require__.bind(__webpack_require__,91628)).then((function(t){return e.$applyAsync((function(){return e.richText.bundle=t}))}))})),e.$watch("editor.showVisual",(function(n){if("cm6"!==(0,xf.Z)("ol-richTextVariant"))return!1;t("editor.mode.".concat(e.project_id),!0===n?"rich-text":"source")})),e.$watch("editor.newSourceEditor",(function(n){t("editor.source_editor.".concat(e.project_id),!0===n?"cm6":"ace")}))}]);var k_={button:function(e,t){var n={iconText:"Ω",iconClass:"formatting-icon formatting-icon--serif",title:"Toggle Symbol Palette",active:!1,handleClick:function(){t.$scope.editor.toggleSymbolPalette()}};return e.$watch("editor.showSymbolPalette",(function(e){n.active=e})),n},source:!0,richText:!0};function C_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E_(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function E_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O_=[{import:y,path:"/overleaf/services/web/modules/symbol-palette/frontend/js/ide/toolbar"}].map((function(e){return e.import.default}));x.Z.controller("EditorToolbarController",["$scope","ide",function(e,t){var n,r=[{iconText:"§",iconClass:"formatting-icon",title:"Insert Section Heading",handleClick:function(){e.richText.formattingEvents.trigger("section")}},{iconText:"§",iconClass:"formatting-icon formatting-icon--small",title:"Insert Subsection Heading",handleClick:function(){e.richText.formattingEvents.trigger("subsection")}},{iconClass:"formatting-icon fa fa-bold",title:"Format Bold",handleClick:function(){e.richText.formattingEvents.trigger("bold")}},{iconClass:"formatting-icon fa fa-italic",title:"Format Italic",handleClick:function(){e.richText.formattingEvents.trigger("italic")}},{iconClass:"formatting-icon fa fa-list-ol",title:"Insert Numbered List",handleClick:function(){e.richText.formattingEvents.trigger("numberedList")}},{iconClass:"formatting-icon fa fa-list-ul",title:"Insert Bullet Point List",handleClick:function(){e.richText.formattingEvents.trigger("bulletList")}},{iconText:"π",iconClass:"formatting-icon formatting-icon--serif",title:"Insert Inline Math",handleClick:function(){e.richText.formattingEvents.trigger("inlineMath")}},{iconText:"Σ",iconClass:"formatting-icon formatting-icon--serif",title:"Insert Math on its own line",handleClick:function(){e.richText.formattingEvents.trigger("displayMath")}}],a=[],l=C_(O_);try{for(l.s();!(n=l.n()).done;){var f=n.value,d=f.button(e,t);f.source&&a.push(d),f.richText&&r.push(d)}}catch(e){l.e(e)}finally{l.f()}e.richTextButtons=r,e.editorButtons=a}]),__webpack_require__(8140);function j_(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var $_=j_()?E.useLayoutEffect:E.useEffect;function T_(e,t){return(0,E.createContext)(t)}function A_(){}function P_(){return P_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P_.apply(this,arguments)}var D_=["element","index"];function R_(e,t){void 0===t&&(t={});return T_(0,P_({descendants:[],registerDescendant:A_,unregisterDescendant:A_},t))}function I_(e,t,n){var r,a,l,f=(r=(0,E.useState)(Object.create(null))[1],(0,E.useCallback)((function(){r(Object.create(null))}),[])),d=(0,E.useContext)(t),h=d.registerDescendant,p=d.unregisterDescendant,y=d.descendants,w=null!=n?n:y.findIndex((function(t){return t.element===e.element})),x=(a=y,l=(0,E.useRef)(null),(0,E.useEffect)((function(){l.current=a}),[a]),l.current),_=y.some((function(e,t){var n;return e.element!==(null==x||null==(n=x[t])?void 0:n.element)}));return $_((function(){return e.element||f(),h(P_({},e,{index:w})),function(){return p(e.element)}}),[f,w,h,_,p].concat(Object.values(e))),w}function M_(){return(0,E.useState)([])}function L_(e){var t=e.context,n=e.children,r=e.items,a=e.set,l=(0,E.useCallback)((function(e){var t=e.element,n=e.index,r=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,D_);t&&a((function(e){var a;if(null!=n)a=[].concat(e,[P_({},r,{element:t,index:n})]);else if(0===e.length)a=[].concat(e,[P_({},r,{element:t,index:0})]);else if(e.find((function(e){return e.element===t})))a=e;else{var l=e.findIndex((function(e){return!(!e.element||!t)&&Boolean(e.element.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING)})),f=P_({},r,{element:t,index:l});a=-1===l?[].concat(e,[f]):[].concat(e.slice(0,l),[f],e.slice(l))}return a.map((function(e,t){return P_({},e,{index:t})}))}))}),[]),f=(0,E.useCallback)((function(e){e&&a((function(t){return t.filter((function(t){return e!==t.element}))}))}),[]);return(0,E.createElement)(t.Provider,{value:(0,E.useMemo)((function(){return{descendants:r,registerDescendant:l,unregisterDescendant:f}}),[r,l,f])},n)}function N_(e){var t=function(e){return j_()?e?e.ownerDocument:document:null}(e);return t?t.defaultView||window:null}function F_(e,t){var n;return(null==(n=function(e){var t=N_(e);return t?t.getComputedStyle(e,null):null}(e))?void 0:n.getPropertyValue(t))||null}function q_(e){return!(!e||"[object Function]"!={}.toString.call(e))}function B_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).join("--")}function U_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H_(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return U_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function z_(e,t){if(null!=e)if(q_(e))e(t);else try{e.current=t}catch(n){throw new Error('Cannot assign value "'+t+'" to ref "'+e+'"')}}function V_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,E.useCallback)((function(e){for(var n,r=H_(t);!(n=r()).done;){z_(n.value,e)}}),t)}function W_(e,t){return function(n){if(e&&e(n),!n.defaultPrevented)return t(n)}}var Z_=!1,G_=0,K_=function(){return++G_};function Y_(){return Y_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y_.apply(this,arguments)}function X_(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var J_,Q_,eS=["as","children","defaultIndex","orientation","index","keyboardActivation","onChange","readOnly"],tS=["children","as","onKeyDown"],nS=["isSelected","children","as","index","disabled","onBlur","onFocus"],rS=["children","as"],iS=["children","aria-label","as"],oS=R_(),aS=R_(),sS=T_(0,{});!function(e){e.Auto="auto",e.Manual="manual"}(J_||(J_={})),function(e){e.Horizontal="horizontal",e.Vertical="vertical"}(Q_||(Q_={}));var lS=(0,E.forwardRef)((function(e,t){var n,r,a,l,f,d,h,p,y=e.as,w=void 0===y?"div":y,x=e.children,_=e.defaultIndex,S=e.orientation,k=void 0===S?Q_.Horizontal:S,C=e.index,O=void 0===C?void 0:C,j=e.keyboardActivation,T=void 0===j?J_.Auto:j,A=e.onChange,P=e.readOnly,D=void 0!==P&&P,R=X_(e,eS),I=(0,E.useRef)(null!=O),M=function(e){var t=e||(Z_?K_():null),n=(0,E.useState)(t),r=n[0],a=n[1];return $_((function(){null===r&&a(K_())}),[]),(0,E.useEffect)((function(){!1===Z_&&(Z_=!0)}),[]),null!=r?String(r):void 0}(R.id),L=null!=(n=R.id)?n:B_("tabs",M),N=(0,E.useRef)(!1),F=(0,E.useRef)(null),q=(0,E.useRef)(!1),B=(r=O,a=null!=_?_:0,l=(0,E.useRef)(null!=r),f=(0,E.useState)(a),d=f[0],h=f[1],p=(0,E.useCallback)((function(e){l.current||h(e)}),[]),[l.current?r:d,p]),U=B[0],H=B[1],z=(0,E.useState)(-1),V=z[0],W=z[1],Z=M_(),G=Z[0],K=Z[1],Y=(0,E.useMemo)((function(){return{focusedIndex:V,id:L,isControlled:I.current,isRTL:q,keyboardActivation:T,onFocusPanel:function(){F.current&&q_(F.current.focus)&&F.current.focus()},onSelectTab:D?A_:function(e){N.current=!0,A&&A(e),H(e)},onSelectTabWithKeyboard:D?A_:function(e){switch(N.current=!0,T){case J_.Manual:var t=G[e]&&G[e].element;return void(t&&q_(t.focus)&&t.focus());case J_.Auto:default:return A&&A(e),void H(e)}},orientation:k,selectedIndex:U,selectedPanelRef:F,setFocusedIndex:W,setSelectedIndex:H,userInteractedRef:N}}),[V,L,T,A,k,D,U,H,G]);return(0,E.createElement)(L_,{context:oS,items:G,set:K},(0,E.createElement)(sS.Provider,{value:Y},(0,E.createElement)(w,Y_({},R,{ref:t,"data-reach-tabs":"","data-orientation":k,id:R.id}),q_(x)?x({focusedIndex:V,id:L,selectedIndex:U}):x)))}));var cS=(0,E.forwardRef)((function(e,t){var n,r=e.children,a=e.as,l=void 0===a?"div":a,f=e.onKeyDown,d=X_(e,tS),h=(0,E.useContext)(sS),p=h.focusedIndex,y=h.isControlled,w=h.isRTL,x=h.keyboardActivation,_=h.onSelectTabWithKeyboard,S=h.orientation,k=h.selectedIndex,C=h.setSelectedIndex,O=(n=oS,(0,E.useContext)(n).descendants),j=(0,E.useRef)(null),T=V_(t,j);(0,E.useEffect)((function(){j.current&&(j.current.ownerDocument&&"rtl"===j.current.ownerDocument.dir||"rtl"===F_(j.current,"direction"))&&(w.current=!0)}),[w]);var A=W_(f,function(e,t){var n=(0,E.useContext)(e).descendants,r=t.callback,a=t.currentIndex,l=t.filter,f=t.key,d=void 0===f?"index":f,h=t.orientation,p=void 0===h?"vertical":h,y=t.rotate,w=void 0===y||y,x=t.rtl,_=void 0!==x&&x;return function(e){if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(e.key)){var t=null!=a?a:-1,f=l?n.filter(l):n;if(l&&(t=f.findIndex((function(e){return e.index===a}))),f.length)switch(e.key){case"ArrowDown":if("vertical"===p||"both"===p){e.preventDefault();var h=j();r("option"===d?h:h[d])}break;case"ArrowUp":if("vertical"===p||"both"===p){e.preventDefault();var y=T();r("option"===d?y:y[d])}break;case"ArrowLeft":if("horizontal"===p||"both"===p){e.preventDefault();var x=(_?j:T)();r("option"===d?x:x[d])}break;case"ArrowRight":if("horizontal"===p||"both"===p){e.preventDefault();var S=(_?T:j)();r("option"===d?S:S[d])}break;case"PageUp":e.preventDefault();var k=(e.ctrlKey?T:A)();r("option"===d?k:k[d]);break;case"Home":e.preventDefault();var C=A();r("option"===d?C:C[d]);break;case"PageDown":e.preventDefault();var E=(e.ctrlKey?j:P)();r("option"===d?E:E[d]);break;case"End":e.preventDefault();var O=P();r("option"===d?O:O[d])}}function j(){return t===f.length-1?w?A():f[t]:f[(t+1)%f.length]}function T(){return 0===t?w?P():f[t]:f[(t-1+f.length)%f.length]}function A(){return f[0]}function P(){return f[f.length-1]}}}(oS,{currentIndex:x===J_.Manual?p:k,orientation:S,rotate:!0,callback:_,filter:function(e){return!e.disabled},rtl:w.current}));return $_((function(){var e,t;if(!y&&("true"===(t=null==(e=O[k])?void 0:e.disabled)||function(e){return"boolean"==typeof e}(t)&&t)){var n=O.find((function(e){return!e.disabled}));n&&C(n.index)}}),[O,y,k,C]),(0,E.createElement)(l,Y_({role:"tablist","aria-orientation":S},d,{"data-reach-tab-list":"",ref:T,onKeyDown:A}),E.Children.map(r,(function(e,t){return function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return(0,E.isValidElement)(e)?E.cloneElement.apply(void 0,[e,t].concat(r)):e}(e,{isSelected:t===k})})))}));var uS=(0,E.memo)(cS);var fS=(0,E.forwardRef)((function(e,t){e.isSelected;var n,r,a,l=e.children,f=e.as,d=void 0===f?"button":f,h=e.index,p=e.disabled,y=e.onBlur,w=e.onFocus,x=X_(e,nS),_=(0,E.useContext)(sS),S=_.id,k=_.onSelectTab,C=_.orientation,O=_.selectedIndex,j=_.userInteractedRef,T=_.setFocusedIndex,A=(0,E.useRef)(null),P=V_(t,A),D=I_({element:A.current,disabled:!!p},oS,h),R="button"===d&&null==x.type?"button":x.type,I=D===O;return n=function(){I&&A.current&&j.current&&(j.current=!1,q_(A.current.focus)&&A.current.focus())},r=[I,j],a=(0,E.useRef)(!1),(0,E.useEffect)((function(){a.current?n():a.current=!0}),r),(0,E.createElement)(d,Y_({"aria-controls":B_(S,"panel",D),"aria-disabled":p,"aria-selected":I,role:"tab",tabIndex:I?0:-1},x,{ref:P,"data-reach-tab":"","data-orientation":C,"data-selected":I?"":void 0,disabled:p,id:B_(S,"tab",D),onClick:function(){k(D)},onFocus:W_(w,(function(){T(D)})),onBlur:W_(y,(function(){T(-1)})),type:R}),l)}));var dS=(0,E.forwardRef)((function(e,t){var n=e.children,r=e.as,a=void 0===r?"div":r,l=X_(e,rS),f=V_((0,E.useRef)(),t),d=M_(),h=d[0],p=d[1];return(0,E.createElement)(L_,{context:aS,items:h,set:p},(0,E.createElement)(a,Y_({},l,{ref:f,"data-reach-tab-panels":""}),n))}));var hS=(0,E.memo)(dS);var pS=(0,E.forwardRef)((function(e,t){var n=e.children;e["aria-label"];var r=e.as,a=void 0===r?"div":r,l=X_(e,iS),f=(0,E.useContext)(sS),d=f.selectedPanelRef,h=f.selectedIndex,p=f.id,y=(0,E.useRef)(null),w=I_({element:y.current},aS),x=B_(p,"panel",w),_=w===h,S=(0,E.useRef)(!1),k=!!S.current&&!_;(0,E.useEffect)((function(){S.current=!0}),[]);var C=V_(t,y,_?d:null);return(0,E.createElement)(a,Y_({"aria-labelledby":B_(p,"tab",w),hidden:k,role:"tabpanel",tabIndex:_?0:-1},l,{ref:C,"data-reach-tab-panel":"",id:x}),n)}));var mS=__webpack_require__(45433),gS=__webpack_require__.n(mS),vS={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};bS.rankings=vS;var yS=function(e,t){return String(e.rankedValue).localeCompare(String(t.rankedValue))};function bS(e,t,n){void 0===n&&(n={});var r=n,a=r.keys,l=r.threshold,f=void 0===l?vS.MATCHES:l,d=r.baseSort,h=void 0===d?yS:d,p=r.sorter,y=void 0===p?function(e){return e.sort((function(e,t){return function(e,t,n){var r=-1,a=1,l=e.rank,f=e.keyIndex,d=t.rank,h=t.keyIndex;return l===d?f===h?n(e,t):f<h?r:a:l>d?r:a}(e,t,h)}))}:p,w=e.reduce((function(e,r,l){var d=function(e,t,n,r){if(!t){return{rankedValue:e,rank:wS(e,n,r),keyIndex:-1,keyThreshold:r.threshold}}var a=function(e,t){for(var n=[],r=0,a=t.length;r<a;r++)for(var l=t[r],f=kS(l),d=_S(e,l),h=0,p=d.length;h<p;h++)n.push({itemValue:d[h],attributes:f});return n}(e,t);return a.reduce((function(e,t,a){var l=e.rank,f=e.rankedValue,d=e.keyIndex,h=e.keyThreshold,p=t.itemValue,y=t.attributes,w=wS(p,n,r),x=f,_=y.minRanking,S=y.maxRanking,k=y.threshold;return w<_&&w>=vS.MATCHES?w=_:w>S&&(w=S),w>l&&(l=w,d=a,h=k,x=p),{rankedValue:x,rank:l,keyIndex:d,keyThreshold:h}}),{rankedValue:e,rank:vS.NO_MATCH,keyIndex:-1,keyThreshold:r.threshold})}(r,a,t,n),h=d.rank,p=d.keyThreshold;h>=(void 0===p?f:p)&&e.push((0,Qo.Z)({},d,{item:r,index:l}));return e}),[]);return y(w).map((function(e){return e.item}))}function wS(e,t,n){return e=xS(e,n),(t=xS(t,n)).length>e.length?vS.NO_MATCH:e===t?vS.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase())===(t=t.toLowerCase())?vS.EQUAL:e.startsWith(t)?vS.STARTS_WITH:e.includes(" "+t)?vS.WORD_STARTS_WITH:e.includes(t)?vS.CONTAINS:1===t.length?vS.NO_MATCH:(r=e,a="",r.split(" ").forEach((function(e){e.split("-").forEach((function(e){a+=e.substr(0,1)}))})),a).includes(t)?vS.ACRONYM:function(e,t){var n=0,r=0;function a(e,t,r){for(var a=r,l=t.length;a<l;a++){if(t[a]===e)return n+=1,a+1}return-1}function l(e){var r=1/e,a=n/t.length;return vS.MATCHES+a*r}var f=a(t[0],e,0);if(f<0)return vS.NO_MATCH;r=f;for(var d=1,h=t.length;d<h;d++){if(!((r=a(t[d],e,r))>-1))return vS.NO_MATCH}return l(r-f)}(e,t);var r,a}function xS(e,t){return e=""+e,t.keepDiacritics||(e=gS()(e)),e}function _S(e,t){var n;if("object"==typeof t&&(t=t.key),"function"==typeof t)n=t(e);else if(null==e)n=null;else if(Object.hasOwnProperty.call(e,t))n=e[t];else{if(t.includes("."))return function(e,t){for(var n=e.split("."),r=[t],a=0,l=n.length;a<l;a++){for(var f=n[a],d=[],h=0,p=r.length;h<p;h++){var y=r[h];if(null!=y)if(Object.hasOwnProperty.call(y,f)){var w=y[f];null!=w&&d.push(w)}else"*"===f&&(d=d.concat(y))}r=d}if(Array.isArray(r[0])){var x=[];return x.concat.apply(x,r)}return r}(t,e);n=null}return null==n?[]:Array.isArray(n)?n:[String(n)]}var SS={maxRanking:1/0,minRanking:-1/0};function kS(e){return"string"==typeof e?SS:(0,Qo.Z)({},SS,e)}var CS=__webpack_require__(61572);__webpack_require__(84605);function ES(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return OS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OS(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function OS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jS=__webpack_require__(65073);function $S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return TS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AS(e){var t=e.setInput,n=e.inputRef,r=$S((0,E.useState)(""),2),a=r[0],l=r[1],f=(0,jS.Z)(a,250);(0,E.useEffect)((function(){t(f)}),[f,t]);var d=(0,Qe.$)().t,h=(0,E.useCallback)((function(e){n.current=e}),[n]);return(0,D.jsx)(is.Z,{className:"symbol-palette-search",type:"search",inputRef:h,id:"symbol-palette-input","aria-label":"Search",value:a,placeholder:d("search")+"…",onChange:function(e){l(e.target.value)}})}function PS(e){var t=e.focused,n=e.handleSelect,r=e.handleKeyDown,a=e.symbol,l=(0,E.useRef)(null);return(0,E.useEffect)((function(){var e;t&&l.current&&null!==(e=document.activeElement)&&void 0!==e&&e.closest(".symbol-palette-items")&&l.current.focus()}),[t]),(0,D.jsx)(vo.Z,{id:"symbol-".concat(a.codepoint),description:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"symbol-palette-item-description",children:a.description}),(0,D.jsx)("div",{className:"symbol-palette-item-command",children:a.command}),a.notes&&(0,D.jsx)("div",{className:"symbol-palette-item-notes",children:a.notes})]}),overlayProps:{trigger:["hover","focus"]},children:(0,D.jsx)("button",{className:"symbol-palette-item",onClick:function(){return n(a)},onKeyDown:r,tabIndex:t?0:-1,ref:l,role:"option","aria-label":a.description,"aria-selected":t?"true":"false",children:a.character},a.codepoint)})}function DS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return RS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function IS(e){var t=e.items,n=e.focusInput,r=(0,oe._i)().insertSymbol,a=DS((0,E.useState)(0),2),l=a[0],f=a[1];(0,E.useEffect)((function(){f(0)}),[t]);var d=(0,E.useCallback)((function(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey))switch(e.key){case"ArrowLeft":case"ArrowUp":f((function(e){return e>0?e-1:t.length-1}));break;case"ArrowRight":case"ArrowDown":f((function(e){return e<t.length-1?e+1:0}));break;case"Home":f(0);break;case"End":f(t.length-1);break;case"Enter":case" ":break;default:n()}}),[n,t.length]);return(0,D.jsx)("div",{className:"symbol-palette-items",role:"listbox","aria-label":"Symbols",children:t.map((function(e,t){return(0,D.jsx)(PS,{symbol:e,handleSelect:function(e){r(e),f(t)},handleKeyDown:d,focused:t===l},e.codepoint)}))})}function MS(e){var t=e.categories,n=e.categorisedSymbols,r=e.filteredSymbols,a=e.focusInput,l=(0,Qe.$)().t;return r?(0,D.jsxs)(D.Fragment,{children:[r.length?(0,D.jsx)(IS,{items:r,focusInput:a}):(0,D.jsx)("div",{className:"symbol-palette-empty",children:l("no_symbols_found")}),(0,D.jsx)(hS,{children:t.map((function(e){return(0,D.jsx)(pS,{tabIndex:-1},e.id)}))})]}):(0,D.jsx)(hS,{children:t.map((function(e){return(0,D.jsx)(pS,{tabIndex:-1,children:(0,D.jsx)(IS,{items:n[e.id],focusInput:a})},e.id)}))})}function LS(e){var t=e.categories,n=e.disabled;return(0,D.jsx)(uS,{"aria-label":"Symbol Categories",className:"symbol-palette-tab-list",children:t.map((function(e){return(0,D.jsx)(fS,{disabled:n,className:"symbol-palette-tab",children:e.label},e.id)}))})}function NS(){var e=(0,oe._i)().toggleSymbolPalette;return(0,D.jsxs)(Ri.Z,{onClick:e,className:"symbol-palette-close-button",children:[(0,D.jsx)("span",{"aria-hidden":"true",children:"×"}),(0,D.jsx)("span",{className:"sr-only",children:"Close"})]})}AS.propTypes={setInput:j().func.isRequired,inputRef:j().object.isRequired},PS.propTypes={symbol:j().shape({codepoint:j().string.isRequired,description:j().string.isRequired,command:j().string.isRequired,character:j().string.isRequired,notes:j().string}),handleKeyDown:j().func.isRequired,handleSelect:j().func.isRequired,focused:j().bool},IS.propTypes={items:j().arrayOf(j().shape({codepoint:j().string.isRequired})).isRequired,focusInput:j().func.isRequired},MS.propTypes={categories:j().arrayOf(j().object).isRequired,categorisedSymbols:j().object,filteredSymbols:j().arrayOf(j().object),focusInput:j().func.isRequired},LS.propTypes={categories:j().arrayOf(j().shape({id:j().string.isRequired,label:j().string.isRequired})).isRequired,disabled:j().bool};var FS=__webpack_require__(11302);function qS(){var e=(0,Qe.$)().t;return(0,D.jsxs)("div",{className:"symbol-palette-overlay small",children:[(0,D.jsx)(NS,{}),(0,D.jsx)("h4",{children:e("find_the_symbols_you_need_with_premium")}),(0,D.jsxs)("p",{children:[e("with_premium_subscription_you_also_get"),":"]}),(0,D.jsx)(FS.Z,{}),(0,D.jsx)("div",{children:(0,D.jsx)(ws.Z,{source:"symbol-palette",buttonProps:{bsStyle:"success"},children:e("try_premium_for_free")})})]})}var BS=(0,E.memo)(qS);function US(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return HS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zS(){var e=US((0,E.useState)(""),2),t=e[0],n=e[1],r=(0,Qe.$)().t,a=(0,xf.Z)("ol-showSymbolPalette",!1),l=(0,E.useMemo)((function(){return function(e){return[{id:"Greek",label:e("category_greek")},{id:"Arrows",label:e("category_arrows")},{id:"Operators",label:e("category_operators")},{id:"Relations",label:e("category_relations")},{id:"Misc",label:e("category_misc")}]}(r)}),[r]),f=(0,E.useMemo)((function(){return function(e){var t,n={},r=ES(e);try{for(r.s();!(t=r.n()).done;)n[t.value.id]=[]}catch(e){r.e(e)}finally{r.f()}var a,l=ES(CS.u);try{for(l.s();!(a=l.n()).done;){var f=a.value;f.category in n&&(f.character=String.fromCodePoint(parseInt(f.codepoint.replace(/^U\+0*/,""),16)),n[f.category].push(f))}}catch(e){l.e(e)}finally{l.f()}return n}(l)}),[l]),d=(0,E.useMemo)((function(){return""===t?null:t.trim().split(/\s+/).reduceRight((function(e,t){return bS(e,t,{keys:["command","description","character","aliases"],threshold:bS.rankings.CONTAINS})}),CS.u)}),[t]),h=(0,E.useRef)(null),p=(0,E.useCallback)((function(){h.current&&a&&h.current.focus()}),[a]);return(0,E.useEffect)((function(){p()}),[p]),(0,D.jsxs)(lS,{className:"symbol-palette-container",children:[!a&&(0,D.jsx)(BS,{}),(0,D.jsxs)("div",{className:"symbol-palette",children:[(0,D.jsxs)("div",{className:"symbol-palette-header-outer",children:[(0,D.jsxs)("div",{className:"symbol-palette-header",children:[(0,D.jsx)(LS,{categories:l,disabled:t.length>0}),(0,D.jsx)("div",{className:"symbol-palette-header-group",children:(0,D.jsx)(AS,{setInput:n,inputRef:h})})]}),(0,D.jsx)("div",{className:"symbol-palette-header-group",children:(0,D.jsx)("div",{children:(0,D.jsx)(NS,{})})})]}),(0,D.jsx)("div",{className:"symbol-palette-body",children:(0,D.jsx)(MS,{categories:l,categorisedSymbols:f,filteredSymbols:d,focusInput:p})})]})]})}x.Z.component("symbolPalette",(0,S.react2angular)(eu.use((function(){return(0,oe._i)().showSymbolPalette?(0,D.jsx)(zS,{}):null})))),x.Z.controller("TemplatesController",["$scope","$modal","$http","ide",function(e,t,n,r){e.templateDetails={exists:!1},e.refreshPublishedStatus=function(){return n.get("/project/".concat(r.project_id,"/template")).then((function(t){var n=t.data;e.templateDetails=n,e.templateDetails.publishedDate=Vp()(n.publishedDate).format("Do MMM YYYY, h:mm a"),e.templateDetails.description=n.description})).catch((function(){e.problemTalkingToTemplateApi=!0}))},e.openPublishTemplateModal=function(){var n=function(){return e.problemTalkingToTemplateApi=!1};return n(),e.refreshPublishedStatus().then((function(){return t.open({templateUrl:"publishProjectAsTemplateModalTemplate",controller:"PublishProjectAsTemplateModalController",scope:e}).result.then(n,n)}))}}]);x.Z.controller("PublishProjectAsTemplateModalController",["$scope","$modalInstance","ide","$http",function(e,t,n,r){e.state={publishInflight:!1,unpublishInflight:!1};var a=function(){return e.problemTalkingToTemplateApi=!0};e.$watch(e.problemTalkingToTemplateApi,(function(t){if(null!=t)return e.refreshPublishedStatus()}));var l=function(){return r.post("/project/".concat(n.project_id,"/template/description"),{description:e.templateDetails.description,_csrf:window.csrfToken})};return t.result.finally((function(){return l()})),e.publishTemplate=function(){return e.state.publishInflight=!0,l().then((function(){return r.post("/project/".concat(n.project_id,"/template/publish"),{_csrf:window.csrfToken}).then((function(){return e.refreshPublishedStatus(),e.state.publishInflight=!1})).catch((function(){return a()}))})).catch((function(){return a()}))},e.unpublishTemplate=function(){return e.state.unpublishInflight=!0,r.post("/project/".concat(n.project_id,"/template/unpublish"),{_csrf:window.csrfToken}).then((function(){return e.refreshPublishedStatus(),e.state.unpublishInflight=!1})).catch((function(){return a()}))},e.cancel=function(){return t.dismiss()}}]);var VS=__webpack_require__(27529),WS=(0,E.lazy)((function(){return Promise.all([__webpack_require__.e(2878),__webpack_require__.e(3948),__webpack_require__.e(9516)]).then(__webpack_require__.bind(__webpack_require__,52719))}));function ZS(){return(0,D.jsx)(E.Suspense,{fallback:(0,D.jsx)("div",{className:"pdf-loading-spinner-container",children:(0,D.jsx)(uy,{delay:500})}),children:(0,D.jsx)(WS,{})})}var GS=(0,T.Z)((0,E.memo)(ZS),VS.l);function KS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return YS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YS(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function YS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XS(e,t){var n;return C().forEach(e,(function(e){n||(n=C().find(e.entries,(function(e){return e.id===t})))})),n}function JS(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,U.ty)(e,{body:t})}("/project/".concat(t,"/export/").concat(e.id),n).then((function(e){return function(e,t){var n="/project/".concat(t,"/export/").concat(e);return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:QS;return new Promise((function(a,l){function f(){(0,U.xA)(e).then((function(e){n(e)?l(e):t(e)?a(e):setTimeout((function(){r<1e4&&(r+=1e3),f()}),r)})).catch(l)}f()}))}(n,(function(e){return"succeeded"===e.export_json.status_summary}),(function(e){return"failed"===e.export_json.status_summary}))}(e.export_v1_id,t).then((function(t){var n=[t.export_json.v2_user_first_name,t.export_json.v2_user_last_name].filter(Boolean).join(" ");return{exportId:e.export_v1_id,message:e.message,token:t.export_json.token,submissionId:t.export_json.partner_submission_id,authorEmail:t.export_json.v2_user_email,authorName:n,title:t.export_json.title}})).catch((function(e){throw e.export_json?new Error(e.export_json.status_detail):e}))}))}x.Z.component("sourceEditor",(0,S.react2angular)(eu.use(GS),[])),x.Z.component("sharedContextReact",(0,S.react2angular)(eu.component,[],["ide","settings"]));var QS=1e3;function ek(e){var t=e;if(window._ide.editorManager.getCurrentDocId()===t)return!1;var n=window._ide.editorManager.getCurrentDocValue();if(null==n)return!1;var r,a=KS(n.split("\n"));try{for(a.s();!(r=a.n()).done;){var l=r.value;if(/^[^%]*\\documentclass/.test(l))return!0}}catch(e){a.e(e)}finally{a.f()}return!1}function tk(e){return tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tk(e)}function nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nk(Object(n),!0).forEach((function(t){ik(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ik(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==tk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tk(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ok(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ak(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ak(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ak(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sk=(0,E.createContext)();function lk(e){var t,n,r,a=e.children,l=(0,La.SE)({first_name:j().string,last_name:j().string}),f=l.first_name,d=l.last_name,h=(0,A.d2)({_id:j().string.isRequired,name:j().string.isRequired,rootDocId:j().string.isRequired}),p=h._id,y=h.name,w=h.rootDocId,x=(0,P.O)({hasFolders:j().bool}).hasFolders,_=(0,oe._i)({cobranding:j().shape({brandVariationId:j().number.isRequired,brandId:j().number.isRequired,publishGuideHtml:j().string,partner:j().string,brandedMenu:j().bool})}).cobranding,S=ok((0,tc.Z)("pdf.downloadUrl"),1)[0],k=ok((0,tc.Z)("pdf.url"),1)[0],C=ok((0,tc.Z)("pdf.logEntries"),1)[0],O=(0,Pl.Im)({uncompiled:j().bool}).uncompiled;_&&(_.publishGuideHtml||_.partner)?_.brandedMenu?(n="/journals/".concat(_.brandId),t="branded"):_.partner?(n="/journals/".concat(_.brandId),t="export",r=_.brandVariationId):(n="/journals/".concat(_.brandId),t="guide",r=_.brandVariationId):(n="/journals",t="basic");var T=ok((0,E.useState)(null),2),R=T[0],I=T[1],M=ok((0,E.useState)(null),2),L=M[0],N=M[1],F=(0,Ra.Z)(),q={entries:R,initialShown:t,brandVariationId:r,fetchData:(0,E.useCallback)((function(){var e="/latest_template/".concat(p);return Promise.all([(0,U.xA)(e),(0,U.xA)(n)]).then((function(e){var t=ok(e,2),n=t[0],r=t[1];if(F.current){var a=n.title?{title:n.title}:{};a.description=n.description,a.author=n.author,a.license=n.license,N(n),I(r)}}))}),[F,n,p]),initParams:rk({projectId:p,pdfUrl:k?S:void 0,logs:C,uncompiled:O,hasFolders:x,rootDocOverridden:ek(w),firstName:f,lastName:d,title:y},L)};return(0,D.jsx)(sk.Provider,{value:q,children:a})}sk.Provider.propTypes={value:j().shape({entries:j().object,initialShown:j().oneOf(["basic","guide","branded","export"]).isRequired,brandVariationId:j().number,fetchData:j().func.isRequired,initParams:j().shape({title:j().string,description:j().string,author:j().string,license:j().string,projectId:j().string.isRequired,pdfUrl:j().string,logs:j().object,uncompiled:j().bool,hasFolders:j().bool,rootDocOverridden:j().bool,firstName:j().string,lastName:j().string}).isRequired}).isRequired},lk.propTypes={children:j().any};var ck=__webpack_require__(46522),uk=__webpack_require__.n(ck);function fk(e){return fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fk(e)}function dk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==fk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===fk(l)?l:String(l)),r)}var a,l}function hk(e,t){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hk(e,t)}function pk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mk(e);if(t){var a=mk(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function mk(e){return mk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mk(e)}var gk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hk(e,t)}(l,e);var t,n,r,a=pk(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,n=[{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.id,a=t.category,l=t.displayCategory,f=t.switchTo;return(0,D.jsxs)("div",{className:"col-sm-6 table-content",children:[l&&(0,D.jsx)("div",{className:"table-content-category",children:a.replace("_"," ")}),(0,D.jsx)("div",{className:"table-content-name",children:n}),(0,D.jsx)("div",{className:"table-content-icon",children:(0,D.jsx)("button",{"data-event":"publish_entry_select","data-category":"Publish","data-action":"choose","data-label":this.props.id,style:{border:0,padding:0,backgroundColor:"transparent"},onClick:function(){return e.props.onSwitch(f,r)},children:(0,D.jsx)("img",{src:this.props.publish_menu_icon,alt:n})})}),(0,D.jsx)("div",{className:"table-content-text",children:(0,D.jsx)("div",{className:"table-content-slogan",dangerouslySetInnerHTML:{__html:this.props.publish_menu_html}})}),(0,D.jsx)("div",{className:"table-content-link",children:(0,D.jsx)("button",{className:"".concat(this.props.linkClass," btn btn-primary btn-wrapping"),"data-event":"publish_entry_select","data-category":"Publish","data-action":"choose","data-label":this.props.id,onClick:function(){return e.props.onSwitch(f,r)},dangerouslySetInnerHTML:{__html:this.props.publish_menu_link_html}})})]})}}],n&&dk(t.prototype,n),r&&dk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function vk(e){return vk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vk(e)}function yk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yk(Object(n),!0).forEach((function(t){wk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wk(e,t,n){return(t=_k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_k(r.key),r)}}function _k(e){var t=function(e,t){if("object"!==vk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vk(t)?t:String(t)}function Sk(e,t){return Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sk(e,t)}function kk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ck(e);if(t){var a=Ck(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ck(e){return Ck=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ck(e)}gk.propTypes={id:j().number,name:j().string,category:j().string,publish_menu_icon:j().string,publish_menu_html:j().string,publish_menu_link_html:j().string,linkClass:j().string,switchTo:j().string,onSwitch:j().func.isRequired,displayCategory:j().bool};var Ek=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sk(e,t)}(l,e);var t,n,r,a=kk(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.right,n=e.left,r=e.onSwitch,a=e.displayCategory;return(0,D.jsxs)("div",{children:[this.props.left&&(0,D.jsx)(gk,bk({},Ok(n,r,a))),this.props.right&&(0,D.jsx)(gk,bk({},Ok(t,r,a)))]})}}])&&xk(t.prototype,n),r&&xk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function Ok(e,t,n){var r;return r=e.partner?"exportGuide":"guide",C().assign({},e,{switchTo:r,linkClass:undefined,onSwitch:t,displayCategory:n})}function jk(e){return jk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jk(e)}function $k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==jk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===jk(l)?l:String(l)),r)}var a,l}function Tk(e,t){return Tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tk(e,t)}function Ak(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pk(e);if(t){var a=Pk(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Pk(e){return Pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pk(e)}Ek.propTypes={left:j().object,right:j().object,onSwitch:j().func.isRequired,displayCategory:j().bool};var Dk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tk(e,t)}(l,e);var t,n,r,a=Ak(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).props.entries.length>2?t.state={shownCount:4}:t.state={shownCount:2},t}return t=l,n=[{key:"showMore",value:function(){this.setState({shownCount:this.state.shownCount+4})}},{key:"render",value:function(){for(var e=this,t=[],n=0;n<this.state.shownCount&&!(this.props.entries.length<n+1);n+=2)t.push((0,D.jsx)(Ek,{left:this.props.entries[n],right:this.props.entries[n+1],onSwitch:this.props.onSwitch,displayCategory:this.props.displayCategory}));return(0,D.jsxs)("div",{className:"overbox overbox-small",children:[t.map((function(e,t){return(0,D.jsxs)("div",{children:[t>0&&(0,D.jsx)("hr",{}),(0,D.jsx)("div",{className:"row",children:e})]},"outer-div"+t)})),this.state.shownCount<this.props.entries.length&&(0,D.jsxs)("span",{children:[(0,D.jsx)("br",{}),(0,D.jsx)("button",{className:"button-as-link",onClick:function(){return e.showMore()},children:"Show more"})]})]})}}],n&&$k(t.prototype,n),r&&$k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function Rk(e){return Rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rk(e)}function Ik(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Rk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Rk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Rk(l)?l:String(l)),r)}var a,l}function Mk(e,t){return Mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mk(e,t)}function Lk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fk(e);if(t){var a=Fk(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Rk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nk(e)}(this,n)}}function Nk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fk(e){return Fk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fk(e)}Dk.propTypes={entries:j().array,onSwitch:j().func.isRequired,displayCategory:j().bool};var qk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mk(e,t)}(l,e);var t,n,r,a=Lk(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=a.call(this,e);var n=C().flattenDeep(C().map(e.entries,(function(e,t){return"featured"===t||"search"===t?[]:e.entries}))),r=C().map(e.entries,(function(e,t){if("featured"!==t&&"search"!==t)return e.title})).filter((function(e){return e}));return t.categoryListing=C().initial(r).join(", ")+" or "+C().last(r),t.state={results:[]},t.fuse=new(uk())(n,{keys:["name","brand_name","publish_menu_html","publish_guide_html"],threshold:.4}),t.handleInput=t.handleInput.bind(Nk(t)),t}return t=l,(n=[{key:"handleInput",value:function(e){var t,n=e.target.value.trim();t=""===n?[]:this.fuse.search(n),this.setState({results:t})}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){return(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{children:(0,D.jsx)("form",{className:"search",id:"search",onSubmit:this.handleSubmit,children:(0,D.jsxs)("div",{id:"search-input-container",children:[(0,D.jsx)("label",{className:"sr-only",htmlFor:"search",children:"Search"}),(0,D.jsx)("input",{type:"text",id:"search",name:"search-input",className:"form-control search-input",placeholder:this.categoryListing,onChange:this.handleInput})]})})}),(0,D.jsx)("div",{id:"search-results",children:(0,D.jsx)("div",{children:0===this.state.results.length?"":(0,D.jsx)(Dk,{entries:this.state.results,onSwitch:this.props.onSwitch,displayCategory:!0})})})]})}}])&&Ik(t.prototype,n),r&&Ik(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);qk.propTypes={entries:j().object.isRequired,onSwitch:j().func.isRequired};var Bk=function(e){var t=e.entries,n=e.onSwitch;return(0,D.jsx)("div",{children:C().map(t,(function(e,r){return(0,D.jsxs)("div",{children:[(0,D.jsx)("span",{className:"affix-target affix-content-title","data-affix-target":r,children:e.title}),(0,D.jsx)("div",{className:"affix-subcontent",children:Uk(e,r,t,n)})]},"category-"+r)}))})};function Uk(e,t,n,r){return"search"===t?(0,D.jsx)(qk,{entries:n,onSwitch:r},"journal-search-"+t):(0,D.jsx)(Dk,{entries:e.entries,onSwitch:r},"publish-menu-"+t)}Bk.propTypes={entries:j().object.isRequired,onSwitch:j().func.isRequired};var Hk=Bk;function zk(e){return zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zk(e)}function Vk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==zk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===zk(l)?l:String(l)),r)}var a,l}function Wk(e,t){return Wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wk(e,t)}function Zk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gk(e);if(t){var a=Gk(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Gk(e){return Gk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gk(e)}var Kk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wk(e,t)}(l,e);var t,n,r,a=Zk(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this.props.entries;return(0,D.jsx)("span",{children:(0,D.jsx)("div",{id:"publish-table",className:"modal-body-content row content-as-table",children:(0,D.jsx)("div",{className:"col-md-12",children:(0,D.jsx)(Hk,{entries:e,onSwitch:this.props.onSwitch})})})})}}])&&Vk(t.prototype,n),r&&Vk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);Kk.propTypes={entries:j().object.isRequired,onSwitch:j().func.isRequired};var Yk=function(e){var t=e.returnText,n=e.onReturn;return n?(0,D.jsxs)("button",{className:"modal-return button-as-link",onClick:function(){return n(null,null)},style:{paddingBottom:"15px"},children:[(0,D.jsx)("i",{style:{paddingRight:"5px",color:"inherit",fontSize:"inherit"},className:"fa fa-fw fa-arrow-left"}),t]}):null};Yk.propTypes={returnText:j().string,onReturn:j().func};var Xk=Yk;function Jk(e){return Jk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jk(e)}function Qk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==Jk(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Jk(l)?l:String(l)),r)}var a,l}function eC(e,t){return eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eC(e,t)}function tC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rC(e);if(t){var a=rC(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nC(e)}(this,n)}}function nC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rC(e){return rC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rC(e)}var iC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eC(e,t)}(l,e);var t,n,r,a=tC(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).state={exportState:"uninitiated",errorDetails:null},t.initiateGuideExport=t.initiateGuideExport.bind(nC(t)),t}return t=l,(n=[{key:"initiateGuideExport",value:function(e,t,n){var r=this;this.setState({exportState:"initiated"}),JS(e,t).then((function(e){var a=e.exportId;r.props.downloadFile("/project/".concat(t,"/export/").concat(a,"/").concat("zip"===n?"zip":"pdf")),r.setState({exportState:"uninitiated"})})).catch((function(e){r.setState({exportState:"error",errorDetails:e.message})}))}},{key:"render",value:function(){var e=this.props,t=e.entry,n=e.returnText,r=e.onReturn,a=e.projectId;return(0,D.jsx)("div",{className:"publish-guide modal-body-content row content-as-table",id:"publish-guide-"+t.id,children:(0,D.jsxs)("div",{className:"col-sm-12",children:[r&&n&&(0,D.jsx)(Xk,{onReturn:r,returnText:n}),(0,D.jsx)(oC,{guideHtml:t.publish_guide_html,renderDownload:(0,D.jsx)(aC,{entry:t,projectId:a,exportState:this.state.exportState,initiateGuideExport:this.initiateGuideExport,errorDetails:this.state.errorDetails})}),t.publish_link_destination&&(0,D.jsxs)("div",{children:[(0,D.jsx)(aC,{entry:t,projectId:a,exportState:this.state.exportState,initiateGuideExport:this.initiateGuideExport,errorDetails:this.state.errorDetails}),(0,D.jsx)(lC,{entry:t})]})]})},t.id)}}])&&Qk(t.prototype,n),r&&Qk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function oC(e){var t=e.guideHtml,n=e.renderDownload;if(-1!==t.indexOf("DOWNLOAD")){var r=t.split("DOWNLOAD");return(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{dangerouslySetInnerHTML:{__html:r[0]}}),n,(0,D.jsx)("div",{style:{marginLeft:"140px",paddingLeft:"15px"},dangerouslySetInnerHTML:{__html:r[1]}})]})}return(0,D.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}function aC(e){var t=e.entry,n=e.projectId,r=e.exportState,a=e.initiateGuideExport,l=e.errorDetails;return(0,D.jsxs)("div",{style:{marginLeft:"140px",paddingLeft:"15px"},children:[(0,D.jsx)("p",{children:(0,D.jsx)("strong",{children:"Step 1: Download files"})}),"uninitiated"===r&&(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:(0,D.jsx)("button",{className:"btn btn-primary",onClick:function(){return a(t,n,"zip")},children:"Download project ZIP with submission files (e.g. .bbl)"})}),(0,D.jsx)("p",{children:(0,D.jsx)("button",{className:"btn btn-primary",onClick:function(){return a(t,n,"pdf")},children:"Download PDF file of your article"})})]}),"initiated"===r&&(0,D.jsxs)("p",{style:{fontSize:20,margin:"20px 0px 20px"},children:[(0,D.jsx)("i",{className:"fa fa-refresh fa-spin fa-fw"}),(0,D.jsx)("span",{children:"   Compiling project, please wait..."})]}),"error"===r&&(0,D.jsxs)("p",{children:["Project failed to compile",(0,D.jsx)("br",{}),"Error message: ",l]})]})}function lC(e){var t=e.entry;return(0,D.jsxs)("div",{style:{marginLeft:"140px",paddingLeft:"15px"},children:[(0,D.jsx)("p",{children:(0,D.jsx)("strong",{children:"Step 2: Submit your manuscript"})}),(0,D.jsx)("p",{children:(0,D.jsxs)("a",{href:t.publish_link_destination,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary","data-event":"link_submit","data-category":"Publish","data-action":"submit","data-label":t.id,children:["Submit to ",t.name]})})]})}function cC(e){return cC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cC(e)}function uC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==cC(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==cC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===cC(l)?l:String(l)),r)}var a,l}function fC(e,t){return fC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fC(e,t)}function dC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hC(e);if(t){var a=hC(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===cC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hC(e){return hC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hC(e)}iC.defaultProps={downloadFile:function(e){window.location.pathname=e}},iC.propTypes={entry:j().object.isRequired,returnText:j().string,onReturn:j().func,projectId:j().string.isRequired,downloadFile:j().func.isRequired},oC.propTypes={guideHtml:j().string.isRequired,renderDownload:j().node},aC.propTypes={entry:j().object.isRequired,projectId:j().string.isRequired,exportState:j().string.isRequired,initiateGuideExport:j().func.isRequired,errorDetails:j().string},lC.propTypes={entry:j().object.isRequired};var pC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fC(e,t)}(l,e);var t,n,r,a=dC(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this.props.entries,t=C().omit(e,"brand_data");return(0,D.jsx)("span",{children:(0,D.jsx)("div",{id:"publish-table",className:"modal-body-content row content-as-table",children:(0,D.jsxs)("div",{className:"col-md-12",children:[(0,D.jsx)(iC,{entry:e.brand_data,projectId:this.props.initParams.projectId}),(0,D.jsx)("br",{}),(0,D.jsx)(Hk,{entries:t,onSwitch:this.props.onSwitch})]})})})}}])&&uC(t.prototype,n),r&&uC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function mC(e){return mC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mC(e)}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gC(Object(n),!0).forEach((function(t){yC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yC(e,t,n){return(t=wC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wC(r.key),r)}}function wC(e){var t=function(e,t){if("object"!==mC(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mC(t)?t:String(t)}function xC(e,t){return xC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xC(e,t)}function _C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=SC(e);if(t){var a=SC(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function SC(e){return SC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},SC(e)}pC.propTypes={entries:j().object.isRequired,onSwitch:j().func.isRequired,initParams:j().object.isRequired};var kC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xC(e,t)}(l,e);var t,n,r,a=_C(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.entry,n=e.onReturn,r=e.returnText,a=e.initParams,l=e.onSwitch,f=(0,D.jsx)("p",{dangerouslySetInnerHTML:{__html:t.publish_menu_html}}),d=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("p",{children:(0,D.jsx)("b",{children:"Overleaf Gallery"})}),(0,D.jsx)("p",{children:"Thank you for your interest in sharing your work as a template with the Overleaf community!"}),(0,D.jsxs)("p",{children:["Submitting a document as a template to the Overleaf Gallery means that a copy of your document will be made"," ",(0,D.jsx)("b",{children:"publicly available for everyone on Overleaf"})," to find and reuse for their own work."]}),(0,D.jsx)("p",{children:"Before you submit the document, make sure it doesn’t contain identifiable personal details. Please use only dummy data and text contents if you wish to provide a template for CVs, reports, theses, etc."})]});return(0,D.jsxs)("div",{className:"publish-guide modal-body-content row content-as-table",children:[(0,D.jsx)("div",{className:"col-sm-12",children:(0,D.jsx)(Xk,{onReturn:n,returnText:r})}),(0,D.jsx)("div",{className:"col-sm-2",style:{verticalAlign:"top"},children:t.publish_menu_icon&&(0,D.jsx)("img",{src:t.publish_menu_icon,alt:t.name,style:{width:"106px",float:"right"}})}),(0,D.jsxs)("div",{className:"col-sm-10",style:{paddingLeft:"15px"},children:["gallery"===t.partner?d:f,(0,D.jsx)(CC,vC(vC({},a),{},{entry:t,onSwitch:l}))]})]},t.id)}}])&&bC(t.prototype,n),r&&bC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function CC(e){var t=e.entry,n=e.onSwitch,r=(e.pdfUrl,e.logs);return(0,D.jsxs)("div",{children:["gallery"!==t.partner?(0,D.jsx)("p",{children:"To begin a direct export from Overleaf please click the button below"}):(0,D.jsx)(D.Fragment,{}),(0,D.jsx)("p",{children:(0,D.jsx)("button",{className:"btn btn-primary",style:{display:"inline-block"},onClick:function(){return n("export",t.id)},children:"gallery"===t.partner?"Begin submission":"Continue"})}),(0,D.jsx)("p",{children:"You will have a chance to confirm your submission on the next page before your files are sent."}),r.warnings.length>0&&(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:" Warning: "})," LaTeX warnings on this project may affect submissions. Please check the logs before continuing"]})]})}kC.propTypes={entry:j().object.isRequired,returnText:j().string,onReturn:j().func,projectId:j().string.isRequired,onSwitch:j().func.isRequired,initParams:j().object.isRequired},CC.propTypes={entry:j().object.isRequired,onSwitch:j().func.isRequired,logs:j().object,pdfUrl:j().string};var EC=function(e){var t,n=e.entry,r=e.projectId,a=e.exportId;return t=n.publish_link_destination?jC(n.publish_link_destination):"the journal's website",(0,D.jsxs)("span",{children:[(0,D.jsxs)("p",{children:["This project has already been submitted to this journal, and this journal does not allow resubmission from within Overleaf. Please download your project files below and log in at ",t," to resubmit from there."]}),(0,D.jsx)("p",{children:(0,D.jsx)("button",{className:"btn btn-primary",onClick:function(){return OC(r,a,"zip")},children:"Download project ZIP with submission files (e.g. .bbl)"})}),(0,D.jsx)("p",{children:(0,D.jsx)("button",{className:"btn btn-primary",onClick:function(){return OC(r,a,"pdf")},children:"Download PDF file of your article"})})]})};function OC(e,t,n){window.location.pathname="/project/".concat(e,"/export/").concat(t,"/").concat("zip"===n?"zip":"pdf")}var jC=function(e){return(0,D.jsx)("a",{href:e,children:"the journal's website"})};EC.propTypes={entry:j().object.isRequired,projectId:j().string.isRequired,exportId:j().string.isRequired};var $C=EC;function TC(e){return TC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TC(e)}function AC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==TC(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==TC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===TC(l)?l:String(l)),r)}var a,l}function PC(e,t){return PC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},PC(e,t)}function DC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=IC(e);if(t){var a=IC(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===TC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return RC(e)}(this,n)}}function RC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IC(e){return IC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},IC(e)}var MC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PC(e,t)}(l,e);var t,n,r,a=DC(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).state={exportState:"uninitiated",submissionValid:!0,errorDetails:null},t.handleSubmit=t.handleSubmit.bind(RC(t)),t}return t=l,(n=[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.props,r=n.entry,a=n.projectId;this.firstName.value&&this.lastName.value?(this.setState({submissionValid:!0,exportState:"initiated"}),JS(r,a,{firstName:this.firstName.value,lastName:this.lastName.value}).then((function(e){var n=e.exportId;"RESUBMISSION"===e.message?t.setState({exportState:"resubmission",exportId:n}):t.setState({exportState:"complete"})})).catch((function(e){t.setState({exportState:"error",errorDetails:e.message})}))):this.setState({submissionValid:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.entry,r=t.onReturn,a=t.returnText,l=t.firstName,f=t.lastName,d=t.projectId;return(0,D.jsx)("div",{className:"publish-guide modal-body-content row content-as-table",children:(0,D.jsxs)("div",{className:"col-sm-12",children:[(0,D.jsx)(Xk,{onReturn:r,returnText:a}),(0,D.jsxs)("h3",{style:{marginTop:"5px"},children:["Submit to: ",(0,D.jsx)("br",{}),(0,D.jsxs)("strong",{children:[" ",n.name," "]})]}),"uninitiated"===this.state.exportState&&(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Thanks for using Overleaf to submit your article."}),(0,D.jsx)("p",{children:"When you submit using the button below, your manuscript and supporting files will be sent to the journal automatically, and you will receive a confirmation email from Overleaf. The journal's editorial team will then send you a follow-up email with instructions for how to complete your submission."}),(0,D.jsx)("p",{children:"To send your article, please confirm your first and last name:"}),(0,D.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,D.jsxs)("p",{children:[(0,D.jsx)("input",{type:"text",className:"form-control",defaultValue:l,style:{width:"30%",display:"inline-block"},maxLength:"255",placeholder:"First Name",ref:function(t){return e.firstName=t}}),(0,D.jsx)("input",{type:"text",className:"form-control",defaultValue:f,style:{width:"30%",display:"inline-block"},maxLength:"255",placeholder:"Last Name",ref:function(t){return e.lastName=t}})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("button",{type:"submit",className:"btn btn-primary",children:["Submit to ",n.name]})]}),!this.state.submissionValid&&(0,D.jsx)("p",{style:{color:"red"},children:"Please add valid first and last names before continuing"})]}),"initiated"===this.state.exportState&&(0,D.jsx)("span",{children:(0,D.jsxs)("div",{style:{fontSize:20,margin:"20px 0px 20px"},children:[(0,D.jsx)("i",{className:"fa fa-refresh fa-spin fa-fw"}),(0,D.jsx)("span",{children:"   Exporting files, please wait..."})]})}),"complete"===this.state.exportState&&(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Export Successful!"}),(0,D.jsxs)("p",{children:["Thanks for submitting to ",n.name,". Your manuscript and supporting files have been sent directly to the journal's editorial team, and they will send a follow-up email with instructions for how to complete your submission."]}),(0,D.jsx)("p",{children:"Please check your email for confirmation of your submission."})]}),"error"===this.state.exportState&&(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Export Failed"}),(0,D.jsxs)("p",{children:["Error message: ",this.state.errorDetails]})]}),"resubmission"===this.state.exportState&&(0,D.jsx)($C,{entry:n,projectId:d,exportId:this.state.exportId})]})},n.id)}}])&&AC(t.prototype,n),r&&AC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function LC(e){return LC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LC(e)}function NC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==LC(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==LC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===LC(l)?l:String(l)),r)}var a,l}function FC(e,t){return FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},FC(e,t)}function qC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=UC(e);if(t){var a=UC(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===LC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return BC(e)}(this,n)}}function BC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UC(e){return UC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},UC(e)}MC.propTypes={entry:j().object.isRequired,returnText:j().string,onReturn:j().func,projectId:j().string.isRequired,firstName:j().string,lastName:j().string};var HC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FC(e,t)}(l,e);var t,n,r,a=qC(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).state={exportState:"uninitiated",submissionValid:!0,exportId:null,errorDetails:null},t.handleSubmit=t.handleSubmit.bind(BC(t)),t}return t=l,(n=[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.props,r=n.entry,a=n.projectId;this.firstName.value&&this.lastName.value?(this.setState({submissionValid:!0,exportState:"initiated"}),JS(r,a,{firstName:this.firstName.value,lastName:this.lastName.value}).then((function(e){var n=e.exportId;"RESUBMISSION"===e.message?t.setState({exportState:"resubmission",exportId:n}):t.setState({exportState:"complete"})})).catch((function(e){t.setState({exportState:"error",errorDetails:e.message})}))):this.setState({submissionValid:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.entry,r=t.onReturn,a=t.returnText,l=t.hasFolders,f=t.projectId,d=t.firstName,h=t.lastName;return l?(0,D.jsx)("div",{className:"publish-guide modal-body-content row content-as-table",children:(0,D.jsxs)("div",{className:"col-sm-12",children:[(0,D.jsx)(Xk,{onReturn:r,returnText:a}),(0,D.jsxs)("h3",{style:{marginTop:"5px"},children:["Submit to: ",(0,D.jsx)("br",{}),(0,D.jsxs)("strong",{children:[" ",n.name," "]})]}),(0,D.jsx)("p",{children:(0,D.jsx)("strong",{children:" Files must be at top folder level "})}),(0,D.jsxs)("p",{children:["This project has one or more files in subfolders, rather than at the top folder level. Although Overleaf allows you to create and nest folders within your project,",n.name," requires all files to be at the top level of your project."]}),(0,D.jsx)("p",{children:"Please move each of the above files to the top level of the project, check that your project renders properly, and then retry the submission. We apologize for the inconvenience."})]})},n.id):(0,D.jsx)("div",{className:"publish-guide modal-body-content row content-as-table",children:(0,D.jsxs)("div",{className:"col-sm-12",children:[(0,D.jsx)(Xk,{onReturn:r,returnText:a}),(0,D.jsxs)("h3",{style:{marginTop:"5px"},children:["Submit to: ",(0,D.jsx)("br",{}),(0,D.jsxs)("strong",{children:[" ",n.name," "]})]}),"uninitiated"===this.state.exportState&&(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Thanks for using Overleaf to submit your article."}),(0,D.jsx)("p",{children:"When you submit using the button below, your manuscript and supporting files will be sent to the journal automatically, and you will receive a confirmation email from Overleaf. The journal's editorial team will then send you a follow-up email with instructions for how to complete your submission."}),(0,D.jsx)("p",{children:"To send your article, please confirm your first and last name:"}),(0,D.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,D.jsxs)("p",{children:[(0,D.jsx)("input",{type:"text",className:"form-control",defaultValue:d,style:{width:"30%",display:"inline-block"},maxLength:"255",placeholder:"First Name",ref:function(t){return e.firstName=t}}),(0,D.jsx)("input",{type:"text",className:"form-control",defaultValue:h,style:{width:"30%",display:"inline-block"},maxLength:"255",placeholder:"Last Name",ref:function(t){return e.lastName=t}})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("button",{type:"submit",className:"btn btn-primary",children:["Submit to ",n.name]})]}),!this.state.submissionValid&&(0,D.jsx)("p",{style:{color:"red"},children:"Please add valid first and last names before continuing"})]}),"initiated"===this.state.exportState&&(0,D.jsx)("span",{children:(0,D.jsxs)("div",{style:{fontSize:20,margin:"20px 0px 20px"},children:[(0,D.jsx)("i",{className:"fa fa-refresh fa-spin fa-fw"}),(0,D.jsx)("span",{children:"   Exporting files, please wait..."})]})}),"complete"===this.state.exportState&&(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Export Successful!"}),(0,D.jsxs)("p",{children:["Thanks for submitting to ",n.name,". Your manuscript and supporting files have been sent directly to the journal's editorial team, and they will send a follow-up email with instructions for how to complete your submission."]}),(0,D.jsx)("p",{children:"Please check your email for confirmation of your submission."})]}),"error"===this.state.exportState&&(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Export Failed"}),(0,D.jsxs)("p",{children:["Error message: ",this.state.errorDetails]})]}),"resubmission"===this.state.exportState&&(0,D.jsx)($C,{entry:n,projectId:f,exportId:this.state.exportId})]})},n.id)}}])&&NC(t.prototype,n),r&&NC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function zC(e){return zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zC(e)}function VC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==zC(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===zC(l)?l:String(l)),r)}var a,l}function WC(e,t){return WC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},WC(e,t)}function ZC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=KC(e);if(t){var a=KC(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return GC(e)}(this,n)}}function GC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KC(e){return KC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},KC(e)}HC.propTypes={entry:j().object.isRequired,returnText:j().string,onReturn:j().func,projectId:j().string.isRequired,hasFolders:j().bool,firstName:j().string,lastName:j().string};var YC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WC(e,t)}(l,e);var t,n,r,a=ZC(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).state={exportState:"uninitiated",submissionValid:!0,errorDetails:null,allowTemplateChecked:!0},t.handleAllowTemplate=t.handleAllowTemplate.bind(GC(t)),t.handleSharingOptionsClick=t.handleSharingOptionsClick.bind(GC(t)),t}return t=l,(n=[{key:"handleAllowTemplate",value:function(){this.setState({allowTemplateChecked:!this.state.allowTemplateChecked})}},{key:"handleSharingOptionsClick",value:function(){(0,nc.sendMB)("gallery-submission-sharing-options-click")}},{key:"runExport",value:function(e){var t=this;if(e.preventDefault(),this.title.value&&this.author.value&&this.description.value&&this.license.value){var n=this.props,r=n.entry,a=n.projectId;this.setState({submissionValid:!0,exportState:"initiated"}),JS(r,a,{title:this.title.value,author:this.author.value,description:this.description.value,license:this.license.value,showSource:this.state.allowTemplateChecked}).then((function(){t.setState({exportState:"complete"})})).catch((function(e){t.setState({exportState:"error",errorDetails:e.message})}))}else this.setState({submissionValid:!1})}},{key:"renderUninitiated",value:function(){var e=this,t=this.props,n=t.entry,r=t.author,a=t.title,l=t.description,f=t.license;return(0,D.jsxs)("form",{onSubmit:function(t){return e.runExport(t)},children:[(0,D.jsxs)("p",{children:["Almost done! Please provide some final information to complete your submission."," ",(0,D.jsx)("b",{children:"This is what people browsing the Overleaf Gallery will see when previewing your template."})]}),(0,D.jsx)("p",{children:"If you obtained the template from another source, please include a link to the webpage you obtained it from in the description box. If this template was not authored by you, please ensure that the template is licensed to be reposted."}),(0,D.jsxs)("div",{className:"form-control-box",children:[(0,D.jsx)("label",{htmlFor:"gallery-export-title",children:"Title"}),(0,D.jsx)("input",{id:"gallery-export-title",type:"text",className:"form-control",defaultValue:a,maxLength:"255",placeholder:"Title",ref:function(t){return e.title=t}})]}),(0,D.jsxs)("div",{className:"form-control-box",children:[(0,D.jsx)("label",{htmlFor:"gallery-export-author",children:"Author(s)"}),(0,D.jsx)("input",{id:"gallery-export-author",type:"text",className:"form-control",defaultValue:r,maxLength:"255",placeholder:"Author(s)",ref:function(t){return e.author=t}})]}),(0,D.jsxs)("div",{className:"form-control-box",children:[(0,D.jsx)("label",{htmlFor:"gallery-export-description",children:"Description"}),(0,D.jsx)("textarea",{id:"gallery-export-description",rows:"4",className:"form-control",defaultValue:l,maxLength:"5000",placeholder:"Description",ref:function(t){return e.description=t}})]}),(0,D.jsxs)("div",{className:"form-control-box",children:[(0,D.jsx)("label",{htmlFor:"gallery-export-license",children:"License"}),(0,D.jsxs)("select",{id:"gallery-export-license",ref:function(t){return e.license=t},defaultValue:f,children:[(0,D.jsx)("option",{value:"cc_by_4.0",children:"Creative Commons CC BY 4.0"}),(0,D.jsx)("option",{value:"lppl_1.3c",children:"LaTeX Project Public License 1.3c"}),(0,D.jsx)("option",{value:"other",children:"Other (as stated in the work)"})]}),(0,D.jsx)("a",{className:"help",href:"/learn/how-to/How_are_the_contents_of_the_Overleaf_gallery_licensed%3F",target:"_blank",rel:"noopener noreferrer",children:"(?)"})]}),(0,D.jsxs)("div",{className:"form-control-box no-label",children:[(0,D.jsx)("input",{type:"checkbox",id:"gallery-export-show-source",checked:this.state.allowTemplateChecked,onChange:this.handleAllowTemplate}),(0,D.jsx)("label",{htmlFor:"gallery-export-show-source",className:"checkbox-label",children:"I allow my project to be used as a template by others on Overleaf"}),!this.state.allowTemplateChecked&&(0,D.jsxs)("div",{className:"text-small",children:["Overleaf Gallery is intended for sharing"," ",(0,D.jsx)("b",{children:"public templates only"}),". If you want to:",(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["publish a final document, consider using another platform such as"," ",(0,D.jsx)("a",{href:"https://figshare.com/",target:"_blank",rel:"noopener noreferrer",children:"figshare"}),"."]}),(0,D.jsxs)("li",{children:["share your project with collaborators only, consider using the"," ",(0,D.jsx)("a",{onClick:this.handleSharingOptionsClick,href:"/learn/how-to/Sharing_a_project",target:"_blank",children:"project sharing options"}),"."]})]})]})]}),(0,D.jsxs)("div",{className:"form-control-box no-label",children:[(0,D.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:!this.state.allowTemplateChecked,children:["Submit to ",n.name]}),!this.state.submissionValid&&(0,D.jsx)("p",{style:{color:"red"},children:"Please provide all of title, author(s) and description before continuing"})]})]})}},{key:"renderInitiated",value:function(){return(0,D.jsx)("span",{children:(0,D.jsxs)("div",{style:{fontSize:20,margin:"20px 0px 20px"},children:[(0,D.jsx)("i",{className:"fa fa-refresh fa-spin fa-fw"}),(0,D.jsx)("span",{children:"   Exporting files, please wait..."})]})})}},{key:"renderComplete",value:function(){return(0,D.jsx)("span",{children:(0,D.jsxs)("p",{children:["Thank you for your submission to the Overleaf Gallery! Your submission is pending, and ",(0,D.jsx)("b",{children:"requires action from you"})," — we’ve sent you an email with instructions."]})})}},{key:"renderError",value:function renderError(){return(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Export Failed"}),(0,D.jsxs)("p",{children:["Error message: ",this.state.errorDetails]})]})}},{key:"render",value:function(){var e,t=this.props,n=t.entry,r=t.onReturn,a=t.returnText;return e="uninitiated"===this.state.exportState?this.renderUninitiated():"initiated"===this.state.exportState?this.renderInitiated():"complete"===this.state.exportState?this.renderComplete():this.renderError(),(0,D.jsx)("div",{className:"publish-guide modal-body-content row content-as-table",children:(0,D.jsxs)("div",{className:"col-sm-12",children:[(0,D.jsx)(Xk,{onReturn:r,returnText:a}),(0,D.jsxs)("h3",{style:{marginTop:"5px"},children:["Submit to:",(0,D.jsxs)("strong",{children:[" ",n.name," "]})]}),e]})},n.id)}}])&&VC(t.prototype,n),r&&VC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function XC(e){return XC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XC(e)}function JC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==XC(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==XC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===XC(l)?l:String(l)),r)}var a,l}function QC(e,t){return QC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QC(e,t)}function eE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tE(e);if(t){var a=tE(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===XC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function tE(e){return tE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tE(e)}YC.propTypes={entry:j().object.isRequired,returnText:j().string,onReturn:j().func,projectId:j().string.isRequired,author:j().string,title:j().string,description:j().string,license:j().string};var nE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QC(e,t)}(l,e);var t,n,r,a=eE(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).state={exportState:"uninitiated",errorDetails:null},t}return t=l,(n=[{key:"runExport",value:function(e,t){var n=this;this.setState({exportState:"initiated"}),JS(e,t).then((function(e){var t=e.exportId,r=e.token,a=e.submissionId;n.setState({exportState:"complete",exportId:"".concat(t).concat(r),submissionId:a})})).catch((function(e){n.setState({exportState:"error",errorDetails:e.message})}))}},{key:"componentDidUpdate",value:function(){"complete"===this.state.exportState&&this.submitButton.click()}},{key:"renderUninitiated",value:function(e,t){var n=this;return(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Thanks for using Overleaf to submit your article."}),(0,D.jsx)("p",{children:"Use the button below to send a PDF of your paper and a ZIP file of the LaTeX source files to the journal’s submission site."}),(0,D.jsx)("p",{children:"Log In or Create an Account on the next screen."}),(0,D.jsx)("p",{children:"Once you have logged in,"}),(0,D.jsxs)("ul",{children:[(0,D.jsx)("li",{children:"If you have just started, you will be on the first step of the submission process and your files will be automatically attached."}),(0,D.jsx)("li",{children:"If you have edited an existing project, you will be on the step where the Overleaf files are replaced by your latest version."})]}),(0,D.jsx)("br",{}),(0,D.jsxs)("button",{className:"btn btn-primary",onClick:function(){return n.runExport(e,t)},children:["Submit to ",e.name]})]})}},{key:"renderInitiated",value:function(){return(0,D.jsx)("span",{children:(0,D.jsxs)("div",{style:{fontSize:20,margin:"20px 0px 20px"},children:[(0,D.jsx)("i",{className:"fa fa-refresh fa-spin fa-fw"}),(0,D.jsx)("span",{children:"   Exporting files, please wait..."})]})})}},{key:"renderComplete",value:function(){var e=this;return(0,D.jsxs)("form",{action:this.props.entry.export_url,method:"post",id:"export_form","data-testid":"export-complete",children:[(0,D.jsx)("input",{id:"export_id",name:"export_id",type:"hidden",value:this.state.exportId}),(0,D.jsx)("input",{id:"submission_id",name:"submission_id",type:"hidden",value:this.state.submissionId}),(0,D.jsx)("input",{id:"EXT_ACTION",name:"EXT_ACTION",type:"hidden",value:"OVERLEAF_SUBMISSION"}),(0,D.jsx)("button",{style:{display:"none"},ref:function(t){e.submitButton=t},children:"Submit"})]})}},{key:"renderError",value:function renderError(){return(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Export Failed"}),(0,D.jsxs)("p",{children:["Error message: ",this.state.errorDetails]})]})}},{key:"render",value:function(){var e,t=this.props,n=t.entry,r=t.onReturn,a=t.projectId,l=t.returnText;return e="uninitiated"===this.state.exportState?this.renderUninitiated(n,a):"initiated"===this.state.exportState?this.renderInitiated(n,a):"complete"===this.state.exportState?this.renderComplete(n):this.renderError(),(0,D.jsx)("div",{className:"publish-guide modal-body-content row content-as-table",children:(0,D.jsxs)("div",{className:"col-sm-12",children:[(0,D.jsx)(Xk,{onReturn:r,returnText:l}),(0,D.jsxs)("h3",{style:{marginTop:"5px"},children:["Submit to: ",(0,D.jsx)("br",{}),(0,D.jsxs)("strong",{children:[" ",n.name," "]})]}),e]})},n.id)}}])&&JC(t.prototype,n),r&&JC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function rE(e){return rE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rE(e)}function iE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==rE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===rE(l)?l:String(l)),r)}var a,l}function oE(e,t){return oE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oE(e,t)}function aE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sE(e);if(t){var a=sE(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sE(e){return sE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sE(e)}nE.propTypes={entry:j().object.isRequired,returnText:j().string,onReturn:j().func,projectId:j().string.isRequired};var lE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oE(e,t)}(l,e);var t,n,r,a=aE(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).state={exportState:"uninitiated",errorDetails:null},t}return t=l,(n=[{key:"runExport",value:function(e,t){var n=this;this.setState({exportState:"initiated"});var r=window.ExposedSettings.siteUrl;JS(e,t).then((function(e){var t=e.authorEmail,a=e.authorName,l=e.title,f=e.exportId,d=e.token;n.setState({exportState:"complete",authorEmail:t,authorName:a,title:l,articleZipURL:"".concat(r,"/exports/").concat(f).concat(d,".zip"),pdfURL:"".concat(r,"/exports/").concat(f).concat(d,".pdf"),revisionURL:"".concat(r,"/exports/").concat(f).concat(d,"/revise"),submissionURL:"",publicationURL:"",rejectionURL:"",newVersionURL:"",articleId:""})})).catch((function(e){n.setState({exportState:"error",errorDetails:e.message})}))}},{key:"componentDidUpdate",value:function(){"complete"===this.state.exportState&&this.submitButton.click()}},{key:"renderUninitiated",value:function(e,t){var n=this;return(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Thanks for using Overleaf to write your article."}),(0,D.jsxs)("p",{children:["When you are ready to submit, then click",(0,D.jsxs)("strong",{children:[" Submit to ",e.name]})," below. (Your files will be sent to ",e.name," by Overleaf)"]}),(0,D.jsxs)("button",{"data-testid":"submit-button",className:"btn btn-primary",onClick:function(){return n.runExport(e,t)},children:["Submit to ",e.name]})]})}},{key:"renderInitiated",value:function(){return(0,D.jsx)("span",{children:(0,D.jsxs)("div",{style:{fontSize:20,margin:"20px 0px 20px"},children:[(0,D.jsx)("i",{className:"fa fa-refresh fa-spin fa-fw"}),(0,D.jsx)("span",{children:"   Exporting files, please wait..."})]})})}},{key:"renderComplete",value:function(){var e=this;return(0,D.jsxs)("form",{action:this.props.entry.export_url,method:"GET","data-testid":"export-complete",children:[(0,D.jsx)("input",{id:"authorEmail",name:"authorEmail",type:"hidden",value:this.state.authorEmail}),(0,D.jsx)("input",{id:"authorName",name:"authorName",type:"hidden",value:this.state.authorName}),(0,D.jsx)("input",{id:"title",name:"title",type:"hidden",value:this.state.title}),(0,D.jsx)("input",{id:"articleZipURL",name:"articleZipURL",type:"hidden",value:this.state.articleZipURL}),(0,D.jsx)("input",{id:"pdfURL",name:"pdfURL",type:"hidden",value:this.state.pdfURL}),(0,D.jsx)("input",{id:"revisionURL",name:"revisionURL",type:"hidden",value:this.state.revisionURL}),(0,D.jsx)("input",{id:"submissionURL",name:"submissionURL",type:"hidden",value:""}),(0,D.jsx)("input",{id:"publicationURL",name:"publicationURL",type:"hidden",value:""}),(0,D.jsx)("input",{id:"rejectionURL",name:"rejectionURL",type:"hidden",value:""}),(0,D.jsx)("input",{id:"newVersionURL",name:"newVersionURL",type:"hidden",value:""}),(0,D.jsx)("input",{id:"articleId",name:"articleId",type:"hidden",value:""}),(0,D.jsx)("button",{style:{display:"none"},ref:function(t){e.submitButton=t},children:"Submit"})]})}},{key:"renderError",value:function renderError(){return(0,D.jsxs)("span",{children:[(0,D.jsx)("p",{children:"Export Failed"}),(0,D.jsxs)("p",{children:["Error message: ",this.state.errorDetails]})]})}},{key:"render",value:function(){var e,t=this.props,n=t.entry,r=t.onReturn,a=t.projectId,l=t.returnText;return e="uninitiated"===this.state.exportState?this.renderUninitiated(n,a):"initiated"===this.state.exportState?this.renderInitiated(n,a):"complete"===this.state.exportState?this.renderComplete():this.renderError(),(0,D.jsx)("div",{className:"publish-guide modal-body-content row content-as-table",children:(0,D.jsxs)("div",{className:"col-sm-12",children:[(0,D.jsx)(Xk,{onReturn:r,returnText:l}),(0,D.jsxs)("h3",{style:{marginTop:"5px"},children:["Submit to: ",(0,D.jsx)("br",{}),(0,D.jsxs)("strong",{children:[" ",n.name," "]})]}),e]})},n.id)}}])&&iE(t.prototype,n),r&&iE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function cE(e){return cE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cE(e)}function uE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==cE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==cE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===cE(l)?l:String(l)),r)}var a,l}function fE(e,t){return fE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fE(e,t)}function dE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hE(e);if(t){var a=hE(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===cE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hE(e){return hE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hE(e)}lE.propTypes={entry:j().object.isRequired,returnText:j().string,onReturn:j().func,projectId:j().string.isRequired};var pE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fE(e,t)}(l,e);var t,n,r,a=dE(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e,t,n,r=this.props,a=r.guideId,l=r.initialEntry,f=r.entries,d=r.onSwitch,h=r.shown,p=r.initParams;return l&&a===l.id?(e=l,f.journal&&f.journal.entries.length>1&&f.brand_data.active&&(n="More "+f.brand_data.name+" Journals",t=d)):(e=XS(f,a),n="Back to Journals and Services",t=d),"guide"===h?(0,D.jsx)(iC,{onReturn:t,entry:e,returnText:n,projectId:p.projectId}):"export"===h?"gallery"===e.partner?(0,D.jsx)(YC,{onReturn:t,entry:e,returnText:n,projectId:p.projectId,firstName:p.firstName,lastName:p.lastName,title:p.title,author:p.author,description:p.description,license:p.license,showSource:p.showSource,hasFolders:p.hasFolders}):"scholar_one"===e.partner?(0,D.jsx)(nE,{onReturn:t,entry:e,returnText:n,projectId:p.projectId}):"f1000"===e.partner||"wellcome_trust"===e.partner?(0,D.jsx)(lE,{onReturn:t,entry:e,partnerName:e.name,partnerContactURL:e.home_url+"/contact",returnText:n,projectId:p.projectId}):"ejp"===e.partner?(0,D.jsx)(MC,{onReturn:t,entry:e,returnText:n,projectId:p.projectId,firstName:p.firstName,lastName:p.lastName}):(0,D.jsx)(HC,{onReturn:t,entry:e,returnText:n,projectId:p.projectId,firstName:p.firstName,lastName:p.lastName,hasFolders:p.hasFolders}):"exportGuide"===h?(0,D.jsx)(kC,{onReturn:t,entry:e,returnText:n,projectId:p.projectId,onSwitch:d,initParams:p}):null}}])&&uE(t.prototype,n),r&&uE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function mE(e){return mE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mE(e)}function gE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==mE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===mE(l)?l:String(l)),r)}var a,l}function vE(e,t){return vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vE(e,t)}function yE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wE(e);if(t){var a=wE(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bE(e)}(this,n)}}function bE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wE(e){return wE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wE(e)}pE.propTypes={entries:j().object.isRequired,initialEntry:j().object,guideId:j().number.isRequired,shown:j().string.isRequired,onSwitch:j().func.isRequired,initParams:j().object.isRequired};var xE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vE(e,t)}(l,e);var t,n,r,a=yE(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).state={shown:e.initialShown,baseReturn:e.initialShown},t.handleSwitch=t.handleSwitch.bind(bE(t)),"guide"!==e.initialShown&&"export"!==e.initialShown||(t.state.initialEntry=XS(e.entries,e.brandVariationId),t.state.guideId=t.state.initialEntry.id,t.state.baseReturn="branded"),t}return t=l,(n=[{key:"handleSwitch",value:function(e,t){e?this.setState({shown:e,guideId:t}):this.setState({shown:this.state.baseReturn,guideId:null})}},{key:"render",value:function(){var e=this.props,t=e.entries,n=e.initParams;return n.pdfUrl?n.logs.errors&&n.logs.errors.length>0?(0,D.jsx)("p",{children:(0,D.jsx)("strong",{children:"This project has LaTeX errors, which can cause problems with your submission. Please check the logs, fix the errors and try submitting again."})}):n.rootDocOverridden?(0,D.jsx)("p",{children:(0,D.jsx)("strong",{children:"The current document in the editor has a documentclass command but is not the project's main document. To ensure you are submitting the project as intended, please switch to the project's main document and recompile before continuing."})}):n.uncompiled?(0,D.jsx)("p",{children:(0,D.jsx)("strong",{children:"This project has been changed since it was last compiled. Please recompile the project and submit again."})}):"basic"===this.state.shown?(0,D.jsx)(Kk,{entries:this.props.entries,onSwitch:this.handleSwitch}):"guide"===this.state.shown||"exportGuide"===this.state.shown||"export"===this.state.shown?(0,D.jsx)(pE,{onSwitch:this.handleSwitch,entries:t,guideId:this.state.guideId,initParams:n,shown:this.state.shown,initialEntry:this.state.initialEntry}):"branded"===this.state.shown?(0,D.jsx)(pC,{onSwitch:this.handleSwitch,entries:t,initialEntry:this.state.initialEntry,initParams:n}):void 0:(0,D.jsx)("p",{children:(0,D.jsx)("strong",{children:"No current PDF. Please make sure your project compiles before submitting."})})}}])&&gE(t.prototype,n),r&&gE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(E.Component);function _E(e){return _E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_E(e)}function SE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==_E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===_E(l)?l:String(l)),r)}var a,l}function kE(e,t){return kE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kE(e,t)}function CE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=EE(e);if(t){var a=EE(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function EE(e){return EE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},EE(e)}xE.propTypes={entries:j().object.isRequired,initialShown:j().string.isRequired,initParams:j().object.isRequired,brandVariationId:j().number};var OE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kE(e,t)}(DestinationsError,e);var t,n,r,a=CE(DestinationsError);function DestinationsError(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DestinationsError),a.apply(this,arguments)}return t=DestinationsError,(n=[{key:"render",value:function(){return(0,D.jsx)("span",{children:(0,D.jsxs)("p",{children:["Sorry, we had trouble retrieving our list of submission destinations. If you give us a minute, retry, and still find this error, please notify support at"," ",(0,D.jsx)("a",{href:"mailto:support@overleaf.com?subject=Unable to submit",children:"support@overleaf.com"})]})})}}])&&SE(t.prototype,n),r&&SE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),DestinationsError}(E.Component);function jE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function TE(e){var t,n=e.handleHide,r=(0,Qe.$)().t,a=function(e){var t=(0,E.useContext)(sk);return j().checkPropTypes(e,t,"data","PublishContext.Provider"),t}({entries:j().object,initialShown:j().string.isRequired,initParams:j().object.isRequired,fetchData:j().func.isRequired,brandVariationId:j().number}),l=a.entries,f=a.initialShown,d=a.initParams,h=a.fetchData,p=a.brandVariationId,y=jE((0,E.useState)(!0),2),w=y[0],x=y[1],_=jE((0,E.useState)(!1),2),S=_[0],k=_[1],C=jE((0,E.useState)(!1),2),O=C[0],T=C[1],A=(0,Ra.Z)();return(0,E.useEffect)((function(){S||(h().catch((function(){A.current&&T(!0)})),k(!0))}),[A,S,h]),t=l&&null!=d&&d.logs?(0,D.jsx)(xE,{entries:l,initialShown:f,initParams:d,brandVariationId:p}):O?(0,D.jsx)(OE,{}):(0,D.jsx)(AE,{}),(0,D.jsxs)(So.Z,{bsSize:"large",show:w,onHide:function(){n(),x(!1)},children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsxs)(_o.Z.Title,{children:[" ",r("submit_title")," "]})}),(0,D.jsx)(_o.Z.Body,{children:(0,D.jsxs)("div",{className:"modal-body-publish",children:[t," "]})})]})}function AE(){var e=(0,Qe.$)().t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ii.Z,{type:"refresh",fw:!0,spin:!0})," ",(0,D.jsxs)("span",{children:[e("loading"),"…"]})]})}function PE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return DE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RE(e){var t=e.cobranding,n=(0,Qe.$)().t,r=PE((0,E.useState)(!1),2),a=r[0],l=r[1];var f=se()("btn","btn-full-height");return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"toolbar-item",children:(0,D.jsxs)("button",{id:"publishButton",className:f,onClick:function(){l(!0)},children:[(0,D.jsx)(Ii.Z,{type:"globe",fw:!0}),null!=t&&t.submitBtnHtml?(0,D.jsx)("p",{className:"toolbar-label toolbar-label-multiline",dangerouslySetInnerHTML:{__html:t.submitBtnHtml}}):(0,D.jsx)("p",{className:"toolbar-label",children:n("submit_title")})]})}),a&&(0,D.jsx)(lk,{children:(0,D.jsx)(TE,{handleHide:function(){l(!1)}})})]})}TE.propTypes={handleHide:j().func.isRequired},RE.propTypes={cobranding:j().shape({submitBtnHtml:j().string})};var IE=(0,T.Z)(RE);function ME(e){var t=e.onClick,n=(0,Qe.$)().t;return(0,D.jsx)("div",{className:"toolbar-item",children:(0,D.jsxs)("button",{className:"btn btn-full-height",onClick:t,children:[(0,D.jsx)(Ii.Z,{type:"bars",fw:!0,className:"editor-menu-icon"}),(0,D.jsx)("p",{className:"toolbar-label",children:n("menu")})]})})}ME.propTypes={onClick:j().func.isRequired};var LE=ME;function NE(e){var t=e.brandVariationHomeUrl,n=e.brandVariationName,r=e.logoImgUrl;return(0,D.jsx)("a",{className:"btn btn-full-height header-cobranding-logo-container",href:t,target:"_blank",rel:"noreferrer noopener",children:(0,D.jsx)("img",{src:r,className:"header-cobranding-logo",alt:n})})}NE.propTypes={brandVariationHomeUrl:j().string.isRequired,brandVariationName:j().string.isRequired,logoImgUrl:j().string.isRequired};var FE=NE;var qE=function(){var e=(0,Qe.$)().t;return(0,D.jsx)(vo.Z,{id:"back-to-projects",description:e("back_to_your_projects"),overlayProps:{placement:"right"},children:(0,D.jsx)("div",{className:"toolbar-item",children:(0,D.jsx)("a",{className:"btn btn-full-height",href:"/project",children:(0,D.jsx)(Ii.Z,{type:"home",fw:!0,accessibilityLabel:e("back_to_your_projects")})})})})};var BE=function(){var e=(0,Qe.$)().t;return(0,D.jsx)("a",{className:"toolbar-header-upgrade-prompt btn btn-primary btn-xs",href:"/user/subscription/plans?itm_referrer=editor-header-upgrade-prompt",target:"_blank",onClick:function(e){nc.send("subscription-funnel","code-editor","upgrade"),nc.sendMB("upgrade-button-click",{source:"code-editor"})},children:e("upgrade")})};function UE(e){var t=e.chatIsOpen,n=e.unreadMessageCount,r=e.onClick,a=(0,Qe.$)().t,l=se()("btn","btn-full-height","btn-full-height-no-border",{active:t}),f=n>0;return(0,D.jsx)("div",{className:"toolbar-item",children:(0,D.jsxs)("button",{className:l,onClick:r,children:[(0,D.jsx)(Ii.Z,{type:"comment",fw:!0,className:f?"bounce":""}),f&&(0,D.jsx)("span",{className:"label label-info",children:n}),(0,D.jsx)("p",{className:"toolbar-label",children:a("chat")})]})})}UE.propTypes={chatIsOpen:j().bool,unreadMessageCount:j().number.isRequired,onClick:j().func.isRequired};var HE=UE;var zE=function(){var e=(0,Qe.$)().t;return(0,D.jsx)(Ii.Z,{type:"check",fw:!0,accessibilityLabel:e("selected")})},VE=__webpack_require__(47417);function WE(e){return WE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WE(e)}var ZE=["defaultOpen","onMainButtonClick"],GE=["onClick"];function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KE(Object(n),!0).forEach((function(t){XE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==WE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==WE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===WE(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JE(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var QE=function(e){var t=e.defaultOpen,n=e.onMainButtonClick,r=JE(e,ZE),a=(0,VE.Z)(Boolean(t)),l=a.onClick,f=JE(a,GE),d=(0,E.useCallback)((function(e){l(e),n&&n(f.open)}),[l,n,f.open]);return(0,D.jsx)(Ea,YE(YE(YE({},r),f),{},{onClick:d,children:E.Children.map(r.children,(function(e){return(0,E.isValidElement)(e)?"open"in e.props?(0,E.cloneElement)(e,{open:f.open}):"show"in e.props?(0,E.cloneElement)(e,{show:f.open}):(0,E.cloneElement)(e):e}))}))};function eO(e){return eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eO(e)}var tO=["checkmark","icon","text"];function nO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nO(Object(n),!0).forEach((function(t){iO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==eO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eO(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oO(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function aO(){return(0,D.jsx)(Ii.Z,{type:"",fw:!0})}function sO(){return(0,D.jsx)(Ii.Z,{type:"refresh",fw:!0,spin:!0})}function lO(){return(0,D.jsx)(Ii.Z,{type:"columns",fw:!0})}function cO(){return(0,D.jsx)(Ii.Z,{type:"columns",fw:!0})}function uO(){return(0,D.jsx)(Ii.Z,{type:"window-restore",fw:!0})}function fO(){return(0,D.jsx)(Ii.Z,{type:"code",fw:!0})}function dO(){return(0,D.jsx)(Ii.Z,{type:"file-pdf-o",fw:!0})}function hO(e){var t=e.iconFor,n=e.pdfLayout,r=e.view;return"detacher"===e.detachRole||"history"===r?(0,D.jsx)(aO,{}):"editorOnly"!==t||"flat"!==n||"editor"!==r&&"file"!==r?"pdfOnly"===t&&"flat"===n&&"pdf"===r||"sideBySide"===t&&"sideBySide"===n?(0,D.jsx)(zE,{}):(0,D.jsx)(aO,{}):(0,D.jsx)(zE,{})}function pO(e){var t=e.checkmark,n=e.icon,r=e.text,a=oO(e,tO);return(0,D.jsx)($a,rO(rO({},a),{},{children:(0,D.jsx)("div",{className:"layout-menu-item",children:(0,D.jsxs)("div",{className:"layout-menu-item-start",children:[(0,D.jsx)("div",{children:t}),(0,D.jsx)("div",{children:n}),(0,D.jsx)("div",{children:r})]})})}))}function mO(){var e=(0,Qe.$)().t;return(0,D.jsx)(vo.Z,{id:"detach-disabled",description:e("your_browser_does_not_support_this_feature"),overlayProps:{placement:"left"},children:(0,D.jsx)(pO,{disabled:!0,checkmark:(0,D.jsx)(aO,{}),icon:(0,D.jsx)(uO,{}),text:e("pdf_in_separate_tab")})})}function gO(){var e=(0,Qe.$)().t,t=(0,le.l5)(yO),n=t.reattach,r=t.detach,a=t.detachIsLinked,l=t.detachRole,f=t.changeLayout,d=t.view,h=t.pdfLayout,p=(0,E.useCallback)((function(){r(),nc.sendMB("project-layout-detach")}),[r]),y=(0,E.useCallback)((function(){"detacher"===l&&(n(),nc.sendMB("project-layout-reattach"))}),[l,n]);(0,ux.Z)("ui:pdf-open",y);var w=(0,E.useCallback)((function(e,t){y(),f(e,t),nc.sendMB("project-layout-change",{layout:e,view:t})}),[f,y]),x=!a&&"detacher"===l;return(0,D.jsxs)(D.Fragment,{children:[x&&(0,D.jsx)("div",{"aria-live":"assertive",className:"sr-only",children:e("layout_processing")}),(0,D.jsxs)(QE,{id:"layout-dropdown",className:"toolbar-item layout-dropdown",pullRight:!0,children:[(0,D.jsxs)(Ea.Toggle,{className:"btn-full-height",bsStyle:"link",children:[x?(0,D.jsx)(sO,{}):(0,D.jsx)(lO,{}),(0,D.jsx)("span",{className:"toolbar-label",children:e("layout")})]}),(0,D.jsxs)(Ea.Menu,{className:"layout-dropdown-list",children:[(0,D.jsx)(pO,{onSelect:function(){return w("sideBySide")},checkmark:(0,D.jsx)(hO,{iconFor:"sideBySide",pdfLayout:h,view:d,detachRole:l}),icon:(0,D.jsx)(cO,{}),text:(0,D.jsx)($o.c,{i18nKey:"editor_and_pdf",children:"&"})}),(0,D.jsx)(pO,{onSelect:function(){return w("flat","editor")},checkmark:(0,D.jsx)(hO,{iconFor:"editorOnly",pdfLayout:h,view:d,detachRole:l}),icon:(0,D.jsx)(fO,{}),text:(0,D.jsx)($o.c,{i18nKey:"editor_only_hide_pdf",components:[(0,D.jsx)("span",{className:"subdued"},"editor_only_hide_pdf")]})}),(0,D.jsx)(pO,{onSelect:function(){return w("flat","pdf")},checkmark:(0,D.jsx)(hO,{iconFor:"pdfOnly",pdfLayout:h,view:d,detachRole:l}),icon:(0,D.jsx)(dO,{}),text:(0,D.jsx)($o.c,{i18nKey:"pdf_only_hide_editor",components:[(0,D.jsx)("span",{className:"subdued"},"pdf_only_hide_editor")]})}),"BroadcastChannel"in window?(0,D.jsx)(pO,{onSelect:function(){return p()},checkmark:"detacher"===l?a?(0,D.jsx)(zE,{}):(0,D.jsx)(sO,{}):(0,D.jsx)(aO,{}),icon:(0,D.jsx)(uO,{}),text:e("pdf_in_separate_tab")}):(0,D.jsx)(mO,{})]})]})]})}pO.propTypes={checkmark:j().node.isRequired,icon:j().node.isRequired,text:j().oneOfType([j().string,j().node]).isRequired,onSelect:j().func};var vO=(0,E.memo)(gO);hO.propTypes={iconFor:j().string.isRequired,pdfLayout:j().string.isRequired,view:j().string,detachRole:j().string};var yO={reattach:j().func.isRequired,detach:j().func.isRequired,changeLayout:j().func.isRequired,detachIsLinked:j().bool,detachRole:j().string,pdfLayout:j().string.isRequired,view:j().string};function bO(e){return function(e){if(Array.isArray(e))return wO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wO(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xO(e){var t=e.onlineUsers,n=e.goToUser,r=(0,Qe.$)().t;return t.length>=4?(0,D.jsxs)(QE,{id:"online-users",className:"online-users",pullRight:!0,children:[(0,D.jsx)(SO,{bsRole:"toggle",onlineUserCount:t.length}),(0,D.jsxs)(Ea.Menu,{children:[(0,D.jsx)($a,{header:!0,children:r("connected_users")}),t.map((function(e,t){return(0,D.jsx)($a,{as:"button",eventKey:e,onSelect:n,children:(0,D.jsx)(_O,{user:e,onClick:n,showName:!0})},"".concat(e.user_id,"_").concat(t))}))]})]}):(0,D.jsx)("div",{className:"online-users",children:t.map((function(e,t){return(0,D.jsx)(vo.Z,{id:"online-user",description:e.name,overlayProps:{placement:"bottom",trigger:["hover","focus"]},children:(0,D.jsx)("span",{children:(0,D.jsx)(_O,{user:e,onClick:n})})},"".concat(e.user_id,"_").concat(t))}))})}function _O(e){var t=e.user,n=e.showName,r=e.onClick,a="hsl(".concat(tw(t.user_id),", 70%, 50%)");var l=bO(t.name)[0];return(0,D.jsxs)("span",{onClick:function(){r(t)},children:[(0,D.jsx)("span",{className:"online-user",style:{backgroundColor:a},children:l}),n&&t.name]})}xO.propTypes={onlineUsers:j().arrayOf(j().shape({user_id:j().string.isRequired,name:j().string.isRequired})).isRequired,goToUser:j().func.isRequired},_O.propTypes={user:j().shape({user_id:j().string.isRequired,name:j().string.isRequired}),showName:j().bool,onClick:j().func.isRequired};var SO=E.forwardRef((function(e,t){var n=(0,Qe.$)().t;return(0,D.jsx)(vo.Z,{id:"connected-users",description:n("connected_users"),overlayProps:{placement:"left"},children:(0,D.jsxs)("button",{className:"btn online-user online-user-multi",onClick:e.onClick,children:[(0,D.jsx)("strong",{children:e.onlineUserCount}),(0,D.jsx)(Ii.Z,{type:"users",fw:!0})]})})}));SO.displayName="DropDownToggleButton",SO.propTypes={onlineUserCount:j().number.isRequired,onClick:j().func};var kO=xO;function CO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return EO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var OO=function(e){var t=e.projectName,n=e.hasRenamePermissions,r=e.onChange,a=e.className,l=(0,Qe.$)().t,f=CO((0,E.useState)(!1),2),d=f[0],h=f[1],p=n&&!d,y=CO((0,E.useState)(t),2),w=y[0],x=y[1],_=(0,E.useRef)(null);function S(){p&&(x(t),h(!0))}function k(){h(!1),r(w)}return(0,E.useEffect)((function(){var e;d&&(null===(e=_.current)||void 0===e||e.select())}),[d]),(0,D.jsxs)("div",{className:se()("project-name",a),children:[!d&&(0,D.jsx)("span",{className:"name",onDoubleClick:S,children:t}),d&&(0,D.jsx)("input",{ref:_,type:"text",className:"form-control",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),k())},onChange:function(e){x(e.target.value)},onBlur:function(){d&&k()},value:w}),p&&(0,D.jsx)(vo.Z,{id:"online-user",description:l("rename"),overlayProps:{placement:"bottom",trigger:["hover","focus"]},children:(0,D.jsx)("a",{className:"rename",role:"button",onClick:S,children:(0,D.jsx)(Ii.Z,{type:"pencil",fw:!0})})})]})};function jO(e){var t=e.trackChangesIsOpen,n=e.disabled,r=e.onMouseDown,a=(0,Qe.$)().t,l=se()("btn","btn-full-height",{active:t&&!n,disabled:n});return(0,D.jsx)("div",{className:"toolbar-item",children:(0,D.jsxs)("button",{disabled:n,className:l,onMouseDown:r,children:[(0,D.jsx)("i",{className:"review-icon"}),(0,D.jsx)("p",{className:"toolbar-label",children:a("review")})]})})}jO.propTypes={trackChangesIsOpen:j().bool,disabled:j().bool,onMouseDown:j().func.isRequired};var $O=jO;function TO(e){var t=e.historyIsOpen,n=e.onClick,r=(0,Qe.$)().t,a=se()("btn","btn-full-height",{active:t});return(0,D.jsx)("div",{className:"toolbar-item",children:(0,D.jsxs)("button",{className:a,onClick:n,children:[(0,D.jsx)(Ii.Z,{type:"history",fw:!0}),(0,D.jsx)("p",{className:"toolbar-label",children:r("history")})]})})}TO.propTypes={historyIsOpen:j().bool,onClick:j().func.isRequired};var AO=TO;function PO(e){var t=e.onClick,n=(0,Qe.$)().t;return(0,D.jsx)("div",{className:"toolbar-item",children:(0,D.jsxs)("button",{className:"btn btn-full-height",onClick:t,children:[(0,D.jsx)(Ii.Z,{type:"group",fw:!0}),(0,D.jsx)("p",{className:"toolbar-label",children:n("share")})]})})}PO.propTypes={onClick:j().func.isRequired};var DO=PO;function RO(e){return RO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RO(e)}function IO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IO(Object(n),!0).forEach((function(t){LO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==RO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==RO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===RO(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var NO={import:w,path:"/overleaf/services/web/modules/publish-modal/frontend/js/components/publish-toolbar-button"},FO=null==NO?void 0:NO.import.default,qO=E.memo((function(e){var t=e.cobranding,n=e.onShowLeftMenuClick,r=e.chatIsOpen,a=e.toggleChatOpen,l=e.reviewPanelOpen,f=e.toggleReviewPanelOpen,d=e.historyIsOpen,h=e.toggleHistoryOpen,p=e.unreadMessageCount,y=e.onlineUsers,w=e.goToUser,x=e.isRestrictedTokenMember,_=e.hasPublishPermissions,S=e.projectName,k=e.renameProject,C=e.hasRenamePermissions,E=e.openShareModal,O=e.trackChangesVisible,j=(0,Qe.$)().t,T=_&&FO,A=O&&!x;return(0,D.jsxs)("header",{className:"toolbar toolbar-header toolbar-with-labels",role:"navigation","aria-label":j("project_layout_sharing_submission"),children:[(0,D.jsxs)("div",{className:"toolbar-left",children:[(0,D.jsx)(LE,{onClick:n}),t&&t.logoImgUrl&&(0,D.jsx)(FE,MO({},t)),(0,D.jsx)(qE,{})]}),window.showUpgradePrompt&&(0,D.jsx)(BE,{}),(0,D.jsx)(OO,{className:"toolbar-center",projectName:S,hasRenamePermissions:C,onChange:k}),(0,D.jsxs)("div",{className:"toolbar-right",children:[(0,D.jsx)(kO,{onlineUsers:y,goToUser:w}),A&&(0,D.jsx)($O,{onMouseDown:f,disabled:d,trackChangesIsOpen:l}),(0,D.jsx)(DO,{onClick:E}),T&&(0,D.jsx)(FO,{cobranding:t}),!x&&(0,D.jsx)(AO,{historyIsOpen:d,onClick:h}),(0,D.jsx)(vO,{}),!x&&(0,D.jsx)(HE,{chatIsOpen:r,onClick:a,unreadMessageCount:p})]})]})}));qO.propTypes={onShowLeftMenuClick:j().func.isRequired,cobranding:j().object,chatIsOpen:j().bool,toggleChatOpen:j().func.isRequired,reviewPanelOpen:j().bool,toggleReviewPanelOpen:j().func.isRequired,historyIsOpen:j().bool,toggleHistoryOpen:j().func.isRequired,unreadMessageCount:j().number.isRequired,onlineUsers:j().array.isRequired,goToUser:j().func.isRequired,isRestrictedTokenMember:j().bool,hasPublishPermissions:j().bool,projectName:j().string.isRequired,renameProject:j().func.isRequired,hasRenamePermissions:j().bool,openShareModal:j().func.isRequired,trackChangesVisible:j().bool};var BO=qO,UO={name:j().string.isRequired,features:j().shape({trackChangesVisible:j().bool}).isRequired},HO={cobranding:j().object,loading:j().bool,isRestrictedTokenMember:j().bool,renameProject:j().func.isRequired,isProjectOwner:j().bool,permissionsLevel:j().string},zO={chatIsOpen:j().bool,setChatIsOpen:j().func.isRequired,reviewPanelOpen:j().bool,setReviewPanelOpen:j().func.isRequired,view:j().string,setView:j().func.isRequired,setLeftMenuShown:j().func.isRequired,pdfLayout:j().string.isRequired},VO={markMessagesAsRead:j().func.isRequired,unreadMessageCount:j().number.isRequired},WO=E.memo((function(e){var t=e.onlineUsersArray,n=e.openDoc,r=e.openShareProjectModal,a=(0,A.d2)(UO),l=a.name,f=a.features.trackChangesVisible,d=(0,oe._i)(HO),h=d.cobranding,p=d.loading,y=d.isRestrictedTokenMember,w=d.renameProject,x=d.permissionsLevel,_=(0,le.l5)(zO),S=_.chatIsOpen,k=_.setChatIsOpen,C=_.reviewPanelOpen,O=_.setReviewPanelOpen,j=_.view,T=_.setView,P=_.setLeftMenuShown,R=Ql(VO),I=R.markMessagesAsRead,M=R.unreadMessageCount,L=(0,E.useCallback)((function(){S||I(),k((function(e){return!e}))}),[S,k,I]),N=(0,E.useCallback)((function(e){e.preventDefault(),O((function(e){return!e}))}),[O]),F=(0,E.useCallback)((function(){T("history"===j?"editor":"history")}),[j,T]),q=(0,E.useCallback)((function(){r()}),[r]),B=(0,E.useCallback)((function(){return P((function(e){return!e}))}),[P]),U=(0,E.useCallback)((function(e){e.doc&&"number"==typeof e.row&&n(e.doc,{gotoLine:e.row+1})}),[n]);return(0,D.jsx)(BO,{style:p?{display:"none"}:{},cobranding:h,onShowLeftMenuClick:B,chatIsOpen:S,unreadMessageCount:M,toggleChatOpen:L,reviewPanelOpen:C,toggleReviewPanelOpen:N,historyIsOpen:"history"===j,toggleHistoryOpen:F,onlineUsers:t,goToUser:U,isRestrictedTokenMember:y,hasPublishPermissions:"owner"===x||"readAndWrite"===x,projectName:l,renameProject:w,hasRenamePermissions:"owner"===x,openShareModal:q,trackChangesVisible:f})}));WO.propTypes={onlineUsersArray:j().array.isRequired,openDoc:j().func.isRequired,openShareProjectModal:j().func.isRequired};var ZO=WO;x.Z.controller("EditorNavigationToolbarController",["$scope","ide",function(e,t){e.openDoc=function(e,n){return t.editorManager.openDoc(e,n)}}]),x.Z.component("editorNavigationToolbarRoot",(0,S.react2angular)(eu.use(ZO),["openDoc","onlineUsersArray","openShareProjectModal"]));__webpack_require__(35883);var GO=function(e,t,n){var r=(0,E.useRef)(),a=(0,E.useCallback)((function(){r.current=new ResizeObserver((function(e){n(e[0])}))}),[n]);(0,E.useLayoutEffect)((function(){if("ResizeObserver"in window){var t=e&&e.current;return t&&a(e.current),r.current&&t&&r.current.observe(t),function(){t&&function(e){r.current.unobserve(e)}(t)}}}),[e,t,a])};function KO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return YO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XO(e){var t=e.sourceLocation,n=e.level,r=e.headerTitle,a=e.headerIcon,l=e.logType,f=e.showSourceLocationLink,d=void 0===f||f,h=e.showCloseButton,p=void 0!==h&&h,y=e.onSourceLocationClick,w=e.onClose,x=(0,Qe.$)().t,_=(0,E.useRef)(),S=KO((0,E.useState)(!1),2),k=S[0],C=S[1];GO(_,k,(function(e){var t=e.target,n=t.scrollWidth>t.clientWidth;C(n)}));var O=t?t.file:null,j=t?t.line:null,T=se()("log-entry-header",{"log-entry-header-error":"error"===n,"log-entry-header-warning":"warning"===n,"log-entry-header-info":"info"===n,"log-entry-header-typesetting":"typesetting"===n,"log-entry-header-raw":"raw"===n,"log-entry-header-success":"success"===n}),A=se()("log-entry-header-link",{"log-entry-header-link-error":"error"===n,"log-entry-header-link-warning":"warning"===n,"log-entry-header-link-typesetting":"typesetting"===n,"log-entry-header-link-raw":"raw"===n,"log-entry-header-link-info":"info"===n,"log-entry-header-link-success":"success"===n}),P=x("navigate_log_source",{location:O+(j?", ".concat(j):"")});var R=d&&O?"".concat(O).concat(j?", ".concat(j):""):null,I=R?(0,D.jsxs)("button",{className:A,type:"button","aria-label":P,onClick:y,children:[(0,D.jsx)(Ii.Z,{type:"chain"})," ",(0,D.jsx)("span",{ref:_,className:"log-entry-header-link-location",children:"‪".concat(R,"‬")})]}):null,M=l?"".concat(l," ").concat(r):r;return(0,D.jsxs)("header",{className:T,children:[a?(0,D.jsx)("div",{className:"log-entry-header-icon-container",children:a}):null,(0,D.jsx)("h3",{className:"log-entry-header-title",children:M}),k&&R?(0,D.jsx)(vo.Z,{id:R,description:R,overlayProps:{placement:"left"},tooltipProps:{className:"log-location-tooltip"},children:I}):I,p?(0,D.jsx)("button",{className:"btn-inline-link log-entry-header-link",type:"button","aria-label":x("dismiss_error_popup"),onClick:w,children:(0,D.jsx)("span",{"aria-hidden":"true",children:"×"})}):null]})}XO.propTypes={sourceLocation:j().shape({file:j().string,line:j().any,column:j().any}),level:j().string.isRequired,headerTitle:j().string,headerIcon:j().element,logType:j().string,showSourceLocationLink:j().bool,showCloseButton:j().bool,onSourceLocationClick:j().func,onClose:j().func};var JO=XO,QO=__webpack_require__(25897);function ej(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nj(e){var t=e.rawContent,n=e.collapsedSize,r=void 0===n?0:n,a=ej((0,E.useState)(!1),2),l=a[0],f=a[1],d=ej((0,E.useState)(!1),2),h=d[0],p=d[1],y=(0,QO.y)((function(e){p(e.scrollHeight>r)})),w=(0,Qe.$)().t;return(0,D.jsxs)("div",{className:"log-entry-content-raw-container",children:[(0,D.jsx)("div",{className:"expand-collapse-container",style:{height:l||!h?"auto":r},children:(0,D.jsx)("pre",{className:"log-entry-content-raw",ref:y,children:t.trim()})}),h&&(0,D.jsx)("div",{className:se()("log-entry-content-button-container",{"log-entry-content-button-container-collapsed":!l}),children:(0,D.jsx)(Ri.Z,{bsSize:"xs",bsStyle:null,className:"log-entry-btn-expand-collapse btn-secondary",onClick:function(){return f((function(e){return!e}))},children:l?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ii.Z,{type:"angle-up"})," ",w("collapse")]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ii.Z,{type:"angle-down"})," ",w("expand")]})})})]})}function rj(e){var t=e.rawContent,n=e.formattedContent,r=e.extraInfoURL,a=(0,Qe.$)().t;return(0,D.jsxs)("div",{className:"log-entry-content",children:[n&&(0,D.jsx)("div",{className:"log-entry-formatted-content",children:n}),r&&(0,D.jsx)("div",{className:"log-entry-content-link",children:(0,D.jsx)("a",{href:r,target:"_blank",rel:"noopener",children:a("log_hint_extra_info")})}),t&&(0,D.jsx)(nj,{rawContent:t,collapsedSize:150})]})}nj.propTypes={rawContent:j().string.isRequired,collapsedSize:j().number},rj.propTypes={rawContent:j().string,formattedContent:j().node,extraInfoURL:j().string};var ij=__webpack_require__(56377);function oj(e){var t=e.url,n=e.children;return window.wikiEnabled?(0,D.jsx)("a",{href:t,target:"_blank",rel:"noopener",children:n}):(0,D.jsx)(D.Fragment,{children:n})}oj.propTypes={url:j().string.isRequired,children:j().node.isRequired};var aj={hint_misplaced_alignment_tab_character:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Misplaced_alignment_tab_character_%26",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have placed an alignment tab character '&' in the wrong place. If you want to align something, you must write it inside an align environment such as \\begin","{align}"," … \\end","{align}",", \\begin","{tabular}"," … \\end","{tabular}",", etc. If you want to write an ampersand '&' in text, you must write \\& instead."]})}},hint_extra_alignment_tab_has_been_changed:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Extra_alignment_tab_has_been_changed_to_%5Ccr",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have written too many alignment tabs in a table, causing one of them to be turned into a line break. Make sure you have specified the correct number of columns in your"," ",(0,D.jsx)(oj,{url:"https://www.overleaf.com/learn/Tables",children:"table"}),"."]})}},hint_display_math_should_end_with:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Display_math_should_end_with_$$",formattedContent:function(){return(0,D.jsx)(D.Fragment,{children:"You have forgotten a $ sign at the end of 'display math' mode. When writing in display math mode, you must always math write inside $$ … $$. Check that the number of $s match around each math expression."})}},hint_missing_inserted:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Missing_$_inserted",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("p",{children:"You need to enclose all mathematical expressions and symbols with special markers. These special markers create a ‘math mode’."}),(0,D.jsxs)("p",{children:["Use ",(0,D.jsx)("code",{children:"$...$"})," for inline math mode, and ",(0,D.jsx)("code",{children:"\\[...\\]"}),"or one of the mathematical environments (e.g. equation) for display math mode."]}),(0,D.jsxs)("p",{children:["This applies to symbols such as subscripts ( ",(0,D.jsx)("code",{children:"_"})," ), integrals ( ",(0,D.jsx)("code",{children:"\\int"})," ), Greek letters ( ",(0,D.jsx)("code",{children:"\\alpha"}),","," ",(0,D.jsx)("code",{children:"\\beta"}),", ",(0,D.jsx)("code",{children:"\\delta"})," ) and modifiers"," ",(0,D.jsx)("code",{children:"(\\vec{x}"}),", ",(0,D.jsxs)("code",{children:["\\tilde{x}",")"]}),"."]})]})}},hint_reference_undefined:{extraInfoURL:"https://www.overleaf.com/learn/Errors/There_were_undefined_references",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have referenced something which has not yet been labelled. If you have labelled it already, make sure that what is written inside \\ref","{...}"," is the same as what is written inside \\label","{...}","."]})}},hint_there_were_undefined_references:{extraInfoURL:"https://www.overleaf.com/learn/Errors/There_were_undefined_references",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have referenced something which has not yet been labelled. If you have labelled it already, make sure that what is written inside \\ref","{...}"," is the same as what is written inside \\label","{...}","."]})}},hint_citation_on_page_undefined_on_input_line:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Citation_XXX_on_page_XXX_undefined_on_input_line_XXX",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have cited something which is not included in your bibliography. Make sure that the citation (\\cite","{...}",") has a corresponding key in your bibliography, and that both are spelled the same way."]})}},hint_label_multiply_defined_labels:{extraInfoURL:"https://www.overleaf.com/learn/Errors/There_were_multiply-defined_labels",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used the same label more than once. Check that each \\label","{...}"," labels only one item."]})}},hint_float_specifier_changed:{extraInfoURL:"https://www.overleaf.com/learn/Errors/%60!h%27_float_specifier_changed_to_%60!ht%27",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["The float specifier 'h' is too strict of a demand for LaTeX to place your float in a nice way here. Try relaxing it by using 'ht', or even 'htbp' if necessary. If you want to try keep the float here anyway, check out the"," ",(0,D.jsx)(oj,{url:"https://www.overleaf.com/learn/Positioning_of_Figures",children:"float package"}),"."]})}},hint_no_positions_in_optional_float_specifier:{extraInfoURL:"https://www.overleaf.com/learn/Errors/No_positions_in_optional_float_specifier",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have forgotten to include a float specifier, which tells LaTeX where to position your figure. To fix this, either insert a float specifier inside the square brackets (e.g. \\begin","{figure}","[h]), or remove the square brackets (e.g. \\begin","{figure}","). Find out more about float specifiers"," ",(0,D.jsx)(oj,{url:"https://www.overleaf.com/learn/Positioning_of_Figures",children:"here"}),"."]})}},hint_undefined_control_sequence:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Undefined_control_sequence",formattedContent:function(e){if(null!=e&&e.length&&ij.Z.has(e[0])){var t=e[0],n=ij.Z.get(t);return(0,D.jsxs)(D.Fragment,{children:["Undefined control sequence. You have used the command"," ",(0,D.jsx)("code",{children:t}),", which is part of the"," ",(0,D.jsx)("code",{children:n.name})," package. Make sure to include the package in your"," ",(0,D.jsx)(oj,{url:"https://www.overleaf.com/learn/latex/Learn_LaTeX_in_30_minutes#The_preamble_of_a_document",children:"preamble"})," ","using ",(0,D.jsx)("code",{children:n.command}),"."]})}return(0,D.jsxs)(D.Fragment,{children:["The compiler is having trouble understanding a command you have used. Check that the command is spelled correctly. If the command is part of a package, make sure you have included the package in your preamble using ",(0,D.jsx)("code",{children:"\\usepackage"}),"{...}","."]})}},hint_file_not_found:{extraInfoURL:"https://www.overleaf.com/learn/Errors/File_XXX_not_found_on_input_line_XXX",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["The compiler cannot find the file you want to include. Make sure that you have"," ",(0,D.jsx)(oj,{url:"https://www.overleaf.com/learn/Including_images_in_ShareLaTeX",children:"uploaded the file"})," ","and"," ",(0,D.jsx)(oj,{url:"https://www.overleaf.com/learn/Errors/File_XXX_not_found_on_input_line_XXX.",children:"specified the file location correctly"}),"."]})}},hint_unknown_graphics_extension:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_graphics_extension:_.XXX",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["The compiler does not recognise the file type of one of your images. Make sure you are using a"," ",(0,D.jsx)(oj,{url:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_graphics_extension:_.gif.",children:"supported image format"})," ","for your choice of compiler, and check that there are no periods (.) in the name of your image."]})}},hint_unknown_float_option_h:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_float_option_%60H%27",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["The compiler isn't recognizing the float option 'H'. Include \\usepackage","{float}"," in your preamble to fix this."]})}},hint_unknown_float_option_q:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Unknown_float_option_%60q%27",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used a float specifier which the compiler does not understand. You can learn more about the different float options available for placing figures"," ",(0,D.jsx)(oj,{url:"https://www.overleaf.com/learn/Positioning_of_Figures",children:"here"})," ","."]})}},hint_math_allowed_only_in_math_mode:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_%5Cmathrm_allowed_only_in_math_mode",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used a font command which is only available in math mode. To use this command, you must be in maths mode (E.g. $ … $ or \\begin","{math}"," … \\end","{math}","). If you want to use it outside of math mode, use the text version instead: \\textrm, \\textit, etc."]})}},hint_mismatched_environment:{formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used \\begin","{...}"," without a corresponding \\end","{...}","."]})}},hint_mismatched_brackets:{formattedContent:function(){return(0,D.jsx)(D.Fragment,{children:"You have used an open bracket without a corresponding close bracket."})}},hint_can_be_used_only_in_preamble:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Can_be_used_only_in_preamble",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used a command in the main body of your document which should be used in the preamble. Make sure that \\documentclass[…]","{…}"," and all \\usepackage","{…}"," commands are written before \\begin","{document}","."]})}},hint_missing_right_inserted:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Missing_%5Cright_insertede",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have started an expression with a \\left command, but have not included a corresponding \\right command. Make sure that your \\left and \\right commands balance everywhere, or else try using \\Biggl and \\Biggr commands instead as shown"," ",(0,D.jsx)(oj,{url:"https://www.overleaf.com/learn/Errors/Missing_%5Cright_inserted",children:"here"}),"."]})}},hint_double_superscript:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Double_superscript",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have written a double superscript incorrectly as a^b^c, or else you have written a prime with a superscript. Remember to include ","{and}"," ","when using multiple superscripts. Try a^","{b ^ c}"," instead."]})}},hint_double_subscript:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Double_subscript",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have written a double subscript incorrectly as a_b_c. Remember to include ","{and}"," when using multiple subscripts. Try a_","{b_c}"," instead."]})}},hint_no_author_given:{extraInfoURL:"https://www.overleaf.com/learn/Errors/No_%5Cauthor_given",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used the \\maketitle command, but have not specified any \\author. To fix this, include an author in your preamble using the \\author","{…}"," command."]})}},hint_environment_undefined:{extraInfoURL:"https://www.overleaf.com/learn/Errors%2FLaTeX%20Error%3A%20Environment%20XXX%20undefined",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have created an environment (using \\begin","{…}"," and \\end","{…}"," commands) which is not recognized. Make sure you have included the required package for that environment in your preamble, and that the environment is spelled correctly."]})}},hint_somethings_wrong_perhaps_a_missing_item:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_Something%27s_wrong--perhaps_a_missing_%5Citem",formattedContent:function(){return(0,D.jsx)(D.Fragment,{children:"There are no entries found in a list you have created. Make sure you label list entries using the \\item command, and that you have not used a list inside a table."})}},hint_misplaced_noalign:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Misplaced_%5Cnoalign",formattedContent:function(){return(0,D.jsx)(D.Fragment,{children:"You have used a \\hline command in the wrong place, probably outside a table. If the \\hline command is written inside a table, try including \\\\ before it."})}},hint_no_line_here_to_end:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_There%27s_no_line_here_to_end",formattedContent:function(){return(0,D.jsx)(D.Fragment,{children:"You have used a \\\\ or \\newline command where LaTeX was not expecting one. Make sure that you only use line breaks after blocks of text, and be careful using linebreaks inside lists and other environments.\\"})}},hint_verb_ended_by_end_of_line:{extraInfoURL:"https://www.overleaf.com/learn/Errors/LaTeX_Error:_%5Cverb_ended_by_end_of_line",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used a \\verb command incorrectly. Try replacling the \\verb command with \\begin","{verbatim}","…\\end","{verbatim}",".\\"]})}},hint_illegal_unit_of_measure_pt_inserted:{extraInfoURL:"https://www.overleaf.com/learn/Errors%2FIllegal%20unit%20of%20measure%20(pt%20inserted)",formattedContent:function(){return(0,D.jsx)(D.Fragment,{children:"You have written a length, but have not specified the appropriate units (pt, mm, cm etc.). If you have not written a length, check that you have not witten a linebreak \\\\ followed by square brackets […] anywhere."})}},hint_extra_right:{extraInfoURL:"https://www.overleaf.com/learn/Errors/Extra_%5Cright",formattedContent:function(){return(0,D.jsx)(D.Fragment,{children:"You have written a \\right command without a corresponding \\left command. Check that all \\left and \\right commands balance everywhere."})}},hint_missing_begin_document_:{extraInfoURL:"https://www.overleaf.com/learn/Errors%2FLaTeX%20Error%3A%20Missing%20%5Cbegin%20document",formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["No \\begin","{document}"," command was found. Make sure you have included \\begin","{document}"," in your preamble, and that your main document is set correctly."]})}},hint_mismatched_environment2:{formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used \\begin","{}"," without a corresponding \\end","{}","."]})}},hint_mismatched_environment3:{formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used \\begin","{}"," without a corresponding \\end","{}","."]})}},hint_mismatched_environment4:{formattedContent:function(){return(0,D.jsxs)(D.Fragment,{children:["You have used \\begin","{}"," without a corresponding \\end","{}","."]})}}};window.wikiEnabled||Object.keys(aj).forEach((function(e){aj[e].extraInfoURL=null}));var sj=aj;function lj(e){var t=e.ruleId,n=e.headerTitle,r=e.headerIcon,a=e.rawContent,l=e.logType,f=e.formattedContent,d=e.extraInfoURL,h=e.level,p=e.sourceLocation,y=e.showSourceLocationLink,w=void 0===y||y,x=e.showCloseButton,_=void 0!==x&&x,S=e.entryAriaLabel,k=void 0===S?null:S,C=e.customClass,O=e.contentDetails,j=e.onSourceLocationClick,T=e.onClose;if(t&&sj[t]){var A=sj[t];f=A.formattedContent(O),d=A.extraInfoURL}var P=(0,E.useCallback)((function(e){e.preventDefault(),j(p)}),[j,p]);return(0,D.jsxs)("div",{className:se()("log-entry",C),"aria-label":k,children:[(0,D.jsx)(JO,{level:h,sourceLocation:p,headerTitle:n,headerIcon:r,logType:l,showSourceLocationLink:w,onSourceLocationClick:P,showCloseButton:_,onClose:T}),(a||f)&&(0,D.jsx)(rj,{rawContent:a,formattedContent:f,extraInfoURL:d})]})}lj.propTypes={ruleId:j().string,sourceLocation:JO.propTypes.sourceLocation,headerTitle:j().string,headerIcon:j().element,rawContent:j().string,logType:j().string,formattedContent:j().node,extraInfoURL:j().string,level:j().oneOf(["error","warning","info","typesetting","raw","success"]).isRequired,customClass:j().string,showSourceLocationLink:j().bool,showCloseButton:j().bool,entryAriaLabel:j().string,contentDetails:j().arrayOf(j().string),onSourceLocationClick:j().func,onClose:j().func};var cj=(0,E.memo)(lj);function uj(e){var t=e.issue,n=e.name,r=(0,Qe.$)().t;switch(n){case"sizeCheck":return(0,D.jsx)(cj,{headerTitle:r("project_too_large"),formattedContent:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{children:r("project_too_large_please_reduce")}),(0,D.jsx)("ul",{className:"list-no-margin-bottom",children:t.resources.map((function(e){return(0,D.jsxs)("li",{children:[e.path," — ",e.kbSize,"kb"]},e.path)}))})]}),entryAriaLabel:r("validation_issue_entry_description"),level:"error"});case"conflictedPaths":return(0,D.jsx)(cj,{headerTitle:r("conflicting_paths_found"),formattedContent:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{children:r("following_paths_conflict")}),(0,D.jsx)("ul",{className:"list-no-margin-bottom",children:t.map((function(e){return(0,D.jsxs)("li",{children:["/",e.path]},e.path)}))})]}),entryAriaLabel:r("validation_issue_entry_description"),level:"error"});case"mainFile":return(0,D.jsx)(cj,{headerTitle:r("main_file_not_found"),formattedContent:r("please_set_main_file"),entryAriaLabel:r("validation_issue_entry_description"),level:"error"});default:return null}}uj.propTypes={name:j().string.isRequired,issue:j().any};var fj=(0,E.memo)(uj);function useStopOnFirstError(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).eventSource,t=(0,Pl.Im)(),n=t.stopOnFirstError,r=t.setStopOnFirstError,a=(0,A.d2)()._id,l=(0,E.useCallback)((function(){if(!n){var t={projectId:a};e&&(t.source=e),nc.sendMB("stop-on-first-error-enabled",t)}r(!0)}),[e,a,n,r]),f=(0,E.useCallback)((function(){var t={projectId:a};e&&(t.source=e),n&&nc.sendMB("stop-on-first-error-disabled",t),r(!1)}),[e,a,n,r]);return{enableStopOnFirstError:l,disableStopOnFirstError:f}}function dj(){var e=(0,Qe.$)().t,t=(0,Pl.Im)(),n=t.startCompile,r=t.setAnimateCompileDropdownArrow,a=useStopOnFirstError({eventSource:"logs-pane"}).disableStopOnFirstError,l=(0,E.useCallback)((function(){a(),n({stopOnFirstError:!1}),r(!0)}),[a,n,r]);return(0,D.jsx)(cj,{headerTitle:e("stop_on_first_error_enabled_title"),formattedContent:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)($o.c,{i18nKey:"stop_on_first_error_enabled_description",components:[(0,D.jsx)("strong",{})]})," ",(0,D.jsx)(Ri.Z,{bsSize:"xs",bsStyle:"info",onClick:l,children:e("disable_stop_on_first_error")})]}),level:"info"})}function hj(){var e=(0,Qe.$)().t,t=(0,oe._i)(),n=t.hasPremiumCompile,r=t.isProjectOwner;return!window.ExposedSettings.enableSubscriptions||n?null:(0,D.jsx)(cj,{headerTitle:e(r?"upgrade_for_longer_compiles":"ask_proj_owner_to_upgrade_for_longer_compiles"),formattedContent:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("p",{children:e("free_accounts_have_timeout_upgrade_to_increase")}),(0,D.jsxs)("p",{children:[e("plus_upgraded_accounts_receive"),":"]}),(0,D.jsx)("div",{children:(0,D.jsx)(FS.Z,{})}),r&&(0,D.jsx)("p",{className:"text-center",children:(0,D.jsx)(ws.Z,{source:"compile-timeout",buttonProps:{bsStyle:"success",className:"row-spaced-small"}})})]}),entryAriaLabel:e(r?"upgrade_for_longer_compiles":"ask_proj_owner_to_upgrade_for_longer_compiles"),level:"success"})}var pj=(0,E.memo)(hj);function PdfPreviewError(e){var t=e.error,n=(0,Qe.$)().t,r=(0,Pl.Im)().startCompile;switch(t){case"rendering-error-expected":return(0,D.jsx)(cj,{headerTitle:n("pdf_rendering_error"),formattedContent:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)($o.c,{i18nKey:"something_went_wrong_rendering_pdf_expected",children:(0,D.jsx)(Ri.Z,{bsSize:"xs",bsStyle:"info",onClick:function(){return r()}})}),(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),(0,D.jsx)($o.c,{i18nKey:"last_resort_trouble_shooting_guide",components:[(0,D.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link")]})]}),level:"warning"});case"rendering-error":return(0,D.jsxs)(gj,{title:n("pdf_rendering_error"),children:[n("something_went_wrong_rendering_pdf")," ",(0,D.jsx)($o.c,{i18nKey:"try_recompile_project_or_troubleshoot",components:[(0,D.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link")]}),(0,xf.Z)("ol-compilesUserContentDomain")&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),(0,D.jsx)($o.c,{i18nKey:"new_compile_domain_notice",values:{compilesUserContentDomain:new URL((0,xf.Z)("ol-compilesUserContentDomain")).hostname},components:[(0,D.jsx)("code",{},"domain"),(0,D.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link")]})]})]});case"clsi-maintenance":return(0,D.jsx)(gj,{title:n("server_error"),children:n("clsi_maintenance")});case"clsi-unavailable":return(0,D.jsx)(gj,{title:n("server_error"),children:n("clsi_unavailable")});case"too-recently-compiled":return(0,D.jsx)(gj,{title:n("server_error"),children:n("too_recently_compiled")});case"terminated":return(0,D.jsx)(gj,{title:n("terminated"),children:n("compile_terminated_by_user")});case"rate-limited":return(0,D.jsx)(gj,{title:n("pdf_compile_rate_limit_hit"),children:n("project_flagged_too_many_compiles")});case"compile-in-progress":return(0,D.jsx)(gj,{title:n("pdf_compile_in_progress_error"),children:n("pdf_compile_try_again")});case"auto-compile-disabled":return(0,D.jsx)(gj,{title:n("autocompile_disabled"),children:n("autocompile_disabled_reason")});case"project-too-large":return(0,D.jsx)(gj,{title:n("project_too_large"),children:n("project_too_much_editable_text")});case"timedout":return(0,D.jsx)(vj,{});case"failure":return(0,D.jsxs)(gj,{title:n("no_pdf_error_title"),children:[n("no_pdf_error_explanation"),(0,D.jsxs)("ul",{className:"log-entry-formatted-content-list",children:[(0,D.jsx)("li",{children:n("no_pdf_error_reason_unrecoverable_error")}),(0,D.jsx)("li",{children:(0,D.jsx)($o.c,{i18nKey:"no_pdf_error_reason_no_content",components:{code:(0,D.jsx)("code",{})}})}),(0,D.jsx)("li",{children:(0,D.jsx)($o.c,{i18nKey:"no_pdf_error_reason_output_pdf_already_exists",components:{code:(0,D.jsx)("code",{})}})})]})]});case"clear-cache":case"error":default:return(0,D.jsx)(gj,{title:n("server_error"),children:n("somthing_went_wrong_compiling")});case"pdf-viewer-loading-error":return(0,D.jsx)(gj,{title:n("pdf_rendering_error"),children:(0,D.jsx)($o.c,{i18nKey:"something_went_wrong_loading_pdf_viewer",components:[(0,D.jsx)("strong",{},"strong-"),(0,D.jsx)("a",{href:"/learn/how-to/Resolving_access%2C_loading%2C_and_display_problems",target:"_blank"},"troubleshooting-link"),(0,D.jsx)("a",{target:"_blank",href:"/contact"},"contact-link")]})});case"validation-problems":return null}}PdfPreviewError.propTypes={error:j().string.isRequired};var mj=(0,E.memo)(PdfPreviewError);function gj(e){var t=e.title,n=e.headerIcon,r=e.children,a=(0,Qe.$)().t;return(0,D.jsx)(cj,{headerTitle:t,headerIcon:n,formattedContent:r,entryAriaLabel:a("compile_error_entry_description"),level:"error"})}function vj(){var e=(0,Qe.$)().t,t=useStopOnFirstError({eventSource:"timeout"}).enableStopOnFirstError,n=(0,Pl.Im)(),r=n.startCompile,a=n.lastCompileOptions,l=n.setAnimateCompileDropdownArrow,f=(0,E.useCallback)((function(){t(),r({stopOnFirstError:!0}),l(!0)}),[t,r,l]);return(0,D.jsxs)(gj,{title:e("timedout"),children:[(0,D.jsx)("p",{children:e("project_timed_out_intro")}),(0,D.jsxs)("ul",{children:[(0,D.jsx)("li",{children:(0,D.jsx)($o.c,{i18nKey:"project_timed_out_optimize_images",components:[(0,D.jsx)("a",{href:"https://www.overleaf.com/learn/how-to/Optimising_very_large_image_files"})]})}),(0,D.jsxs)("li",{children:[(0,D.jsx)($o.c,{i18nKey:"project_timed_out_fatal_error",components:[(0,D.jsx)("a",{href:"https://www.overleaf.com/learn/how-to/Why_do_I_keep_getting_the_compile_timeout_error_message%3F#Fatal_compile_errors_blocking_the_compilation"})]}),!a.stopOnFirstError&&(0,D.jsxs)(D.Fragment,{children:[" ",(0,D.jsx)($o.c,{i18nKey:"project_timed_out_enable_stop_on_first_error",components:[(0,D.jsx)(Ri.Z,{bsSize:"xs",bsStyle:"info",onClick:f})]})," "]})]})]}),(0,D.jsx)("p",{children:(0,D.jsx)($o.c,{i18nKey:"project_timed_out_learn_more",components:[(0,D.jsx)("a",{href:"https://www.overleaf.com/learn/how-to/Why_do_I_keep_getting_the_compile_timeout_error_message%3F"})]})})]})}function yj(){var e=(0,Pl.Im)(),t=e.compiling,n=e.clearCache,r=e.clearingCache,a=(0,Qe.$)().t;return(0,D.jsxs)(Ri.Z,{bsSize:"small",bsStyle:"danger",className:"logs-pane-actions-clear-cache",onClick:function(){return n()},disabled:r||t,children:[r?(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0}):(0,D.jsx)(Ii.Z,{type:"trash-o"})," ",(0,D.jsx)("span",{children:a("clear_cached_files")})]})}gj.propTypes={title:j().string.isRequired,headerIcon:j().element,children:j().any.isRequired},vj.propTypes={};var bj=(0,E.memo)(yj);function wj(e){var t=e.fileList,n=(0,Qe.$)().t;if(!t)return null;function r(e){return e.path.split("/").pop()}return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)($a,{header:!0,children:n("other_output_files")}),t.top.map((function(e){return(0,D.jsx)($a,{download:r(e),href:e.url,children:(0,D.jsx)("b",{children:e.path})},e.path)})),t.other.length>0&&t.top.length>0&&(0,D.jsx)($a,{divider:!0}),t.other.map((function(e){return(0,D.jsx)($a,{download:r(e),href:e.url,children:(0,D.jsx)("b",{children:e.path})},e.path)}))]})}var xj=j().arrayOf(j().shape({path:j().string.isRequired,url:j().string.isRequired}));wj.propTypes={fileList:j().shape({top:xj,other:xj})};var _j=(0,E.memo)(wj);function Sj(){var e=(0,Pl.Im)(),t=e.compiling,n=e.fileList,r=(0,Qe.$)().t;return(0,D.jsxs)(QE,{id:"dropdown-files-logs-pane",dropup:!0,pullRight:!0,disabled:t||!n,children:[(0,D.jsx)(Ea.Toggle,{className:"dropdown-toggle btn-secondary-info btn-secondary",title:r("other_logs_and_files"),bsSize:"small",bsStyle:null}),(0,D.jsx)(Ea.Menu,{id:"dropdown-files-logs-pane-list",children:(0,D.jsx)(_j,{fileList:n})})]})}var kj=(0,E.memo)(Sj);function Cj(e){var t=e.totalEntries,n=e.entriesShown,r=e.hasErrors,a=(0,Qe.$)().t,l=(0,Pl.Im)(),f=l.startCompile,d=l.stoppedOnFirstError,h=l.setAnimateCompileDropdownArrow,p=useStopOnFirstError({eventSource:"too-many-logs"}).enableStopOnFirstError,y=a("log_entry_maximum_entries_title",{total:t,displayed:n}),w=(0,E.useCallback)((function(){p(),f({stopOnFirstError:!0}),h(!0)}),[p,f,h]);return(0,D.jsxs)("div",{className:"log-entry","aria-label":a("log_entry_maximum_entries"),children:[(0,D.jsx)(JO,{level:"raw",headerTitle:y}),(0,D.jsx)("div",{className:"log-entry-content",children:(0,D.jsx)("div",{className:"log-entry-formatted-content",children:r&&!d?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("p",{children:[(0,D.jsx)(Ii.Z,{type:"lightbulb-o"})," ",(0,D.jsxs)("strong",{children:[a("tip"),": "]}),(0,D.jsx)($o.c,{i18nKey:"log_entry_maximum_entries_enable_stop_on_first_error",components:{button:(0,D.jsx)(Ri.Z,{bsSize:"xs",bsStyle:"info",onClick:w}),"learn-more-link":(0,D.jsx)("a",{href:"https://www.overleaf.com/learn/latex/Questions/Tips_and_Tricks_for_Troubleshooting_LaTeX"})}})," "]}),(0,D.jsx)("p",{children:a("log_entry_maximum_entries_see_full_logs")})]}):(0,D.jsxs)("p",{children:[(0,D.jsx)(Ii.Z,{type:"lightbulb-o"})," ",(0,D.jsxs)("strong",{children:[a("tip"),": "]}),a("log_entry_maximum_entries_see_full_logs")]})})})]})}Cj.propTypes={totalEntries:j().number,entriesShown:j().number,hasErrors:j().bool};var Ej=Cj;function Oj(e){var t=e.entries,n=e.hasErrors,r=(0,Qe.$)().t,a=(0,Pl.Im)().syncToEntry,l=t.slice(0,100);return(0,D.jsxs)(D.Fragment,{children:[t.length>100&&(0,D.jsx)(Ej,{totalEntries:t.length,entriesShown:100,hasErrors:n}),l.map((function(e){return(0,D.jsx)(cj,{ruleId:e.ruleId,headerTitle:e.message,rawContent:e.content,logType:e.type,level:e.level,contentDetails:e.contentDetails,entryAriaLabel:r("log_entry_description",{level:e.level}),sourceLocation:{file:e.file,line:e.line,column:e.column},onSourceLocationClick:a},e.key)}))]})}Oj.propTypes={entries:j().arrayOf(j().object),hasErrors:j().bool};var jj=(0,E.memo)(Oj),$j=__webpack_require__(30647);function Tj(){var e=(0,Qe.$)().t;return(0,D.jsx)("div",{className:"log-entry",children:(0,D.jsxs)("div",{className:"log-entry-header log-entry-header-error",children:[(0,D.jsx)("div",{className:"log-entry-header-icon-container",children:(0,D.jsx)(Ii.Z,{type:"exclamation-triangle",fw:!0})}),(0,D.jsx)("h3",{className:"log-entry-header-title",children:e("code_check_failed_explanation")})]})})}var Aj=(0,E.memo)(Tj);function Pj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rj(){var e=(0,Pl.Im)(),t=e.codeCheckFailed,n=e.error,r=e.logEntries,a=e.rawLog,l=e.validationIssues,f=e.showLogs,d=e.stoppedOnFirstError,h=(0,Qe.$)().t;return(0,D.jsx)("div",{className:se()("logs-pane",{hidden:!f}),children:(0,D.jsxs)("div",{className:"logs-pane-content",children:[t&&(0,D.jsx)(Aj,{}),d&&(0,D.jsx)(dj,{}),n&&(0,D.jsx)(mj,{error:n}),"timedout"===n&&(0,D.jsx)(pj,{}),l&&Object.entries(l).map((function(e){var t=Pj(e,2),n=t[0],r=t[1];return(0,D.jsx)(fj,{name:n,issue:r},n)})),(null==r?void 0:r.all)&&(0,D.jsx)(jj,{entries:r.all,hasErrors:r.errors.length>0}),a&&(0,D.jsx)(cj,{headerTitle:h("raw_logs"),rawContent:a,entryAriaLabel:h("raw_logs_description"),level:"raw"}),(0,D.jsxs)("div",{className:"logs-pane-actions",children:[(0,D.jsx)(bj,{}),(0,D.jsx)(kj,{})]})]})})}var Ij=(0,T.Z)((0,E.memo)(Rj),(function(){return(0,D.jsx)($j.Z,{type:"logs"})})),Mj=(0,E.lazy)((function(){return Promise.all([__webpack_require__.e(1859),__webpack_require__.e(5277)]).then(__webpack_require__.bind(__webpack_require__,54963))}));function Lj(){var e=(0,Pl.Im)(),t=e.pdfUrl,n=e.pdfFile,r=e.pdfViewer;return t?"native"===r?(0,D.jsx)("iframe",{title:"PDF Preview",src:t}):(0,D.jsx)(Mj,{url:t,pdfFile:n}):null}var Nj=(0,E.memo)(Lj),Fj=function(e){function t(){return e.apply(this,arguments)||this}return(0,Do.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,Po.Z)(e,["className"]),r=(0,sa.D9)(n),a=r[0],l=r[1],f=(0,sa.Nj)(a);return E.createElement("div",(0,Ao.Z)({},l,{role:"toolbar",className:se()(t,f)}))},t}(E.Component),qj=(0,sa.Pn)("btn-toolbar",Fj);function Bj(e){return Bj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bj(e)}var Uj=["tooltip","icon"],Hj=["onClick","disabled","tooltip","bsStyle","children","className"];function zj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Bj(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bj(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wj(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Zj(e){var t=e.bsStyle,n=e.bsSize,r=void 0===n?"md":n,a=e.button,l=e.dropdown,f=e.dropdownToggle,d=e.disabled,h=void 0!==d&&d,p=e.children,y=a.tooltip,w=a.icon,x=Wj(a,Uj),_=se()("split-menu",Vj({},"btn-".concat(r),!0)),S=se()("split-menu-dropdown-toggle",null==f?void 0:f.className);return(0,D.jsxs)("div",{className:_,children:[(0,D.jsxs)(Gj,{onClick:x.onClick,className:x.className,disabled:h,tooltip:y,bsStyle:t,children:[w?(0,D.jsx)(Ii.Z,{className:"split-menu-icon",type:w.type,spin:w.spin}):null,(0,D.jsx)("span",{className:"split-menu-button",children:x.text})]}),(0,D.jsxs)(Ea,{className:se()("split-menu-dropdown",l.className),id:l.id,children:[(0,D.jsx)(Ea.Toggle,{"aria-label":null==f?void 0:f["aria-label"],className:S,bsStyle:t,onAnimationEnd:null==f?void 0:f.handleAnimationEnd,"data-ol-loading":h}),(0,D.jsx)(Ea.Menu,{children:p})]})]})}function Gj(e){var t=e.onClick,n=e.disabled,r=e.tooltip,a=e.bsStyle,l=e.children,f=e.className,d=Wj(e,Hj),h=se()("split-menu-button",f);return r?(0,D.jsx)(vo.Z,{id:r.id,description:r.description,tooltipProps:r.tooltipProps,overlayProps:r.overlayProps,children:(0,D.jsx)(Ri.Z,{className:h,bsStyle:a,onClick:t,"aria-label":d["aria-label"],disabled:n,"data-ol-loading":n,children:l})}):(0,D.jsx)(Ri.Z,{className:h,bsStyle:a,onClick:t,"aria-label":d["aria-label"],disabled:n,"data-ol-loading":n,children:l})}Zj.Item=function(e){return(0,D.jsx)($a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zj(Object(n),!0).forEach((function(t){Vj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))};var Kj=Zj,Yj=/Mac/i.test(navigator.platform)?"Cmd":"Ctrl";function Xj(){var e=(0,Pl.Im)(),t=e.animateCompileDropdownArrow,n=e.autoCompile,r=e.compiling,a=e.draft,l=e.hasChanges,f=e.setAnimateCompileDropdownArrow,d=e.setAutoCompile,h=e.setDraft,p=e.setStopOnValidationError,y=e.stopOnFirstError,w=e.stopOnValidationError,x=e.startCompile,_=e.stopCompile,S=e.recompileFromScratch,k=useStopOnFirstError({eventSource:"dropdown"}),C=k.enableStopOnFirstError,E=k.disableStopOnFirstError,O=(0,Qe.$)().t,j=r?"".concat(O("compiling"),"…"):O("recompile"),T=(0,D.jsxs)(D.Fragment,{children:[O("recompile_pdf")," ",(0,D.jsxs)("span",{className:"keyboard-shortcut",children:["(",Yj," + Enter)"]})]}),A=se()({"detach-compile-button-animate":t,"btn-striped-animated":l}),P=se()({"btn-striped-animated":l,"no-left-radius":!0});return(0,D.jsxs)(Kj,{bsStyle:"primary",bsSize:"xs",disabled:r,button:{tooltip:{description:T,id:"compile",tooltipProps:{className:"keyboard-tooltip"},overlayProps:{delayShow:500}},icon:{type:"refresh",spin:r},onClick:function(){return x()},text:j,className:P},dropdownToggle:{"aria-label":O("toggle_compile_options_menu"),handleAnimationEnd:function(){return f(!1)},className:A},dropdown:{id:"pdf-recompile-dropdown"},children:[(0,D.jsx)(Kj.Item,{header:!0,children:O("auto_compile")}),(0,D.jsxs)(Kj.Item,{onSelect:function(){return d(!0)},children:[(0,D.jsx)(Ii.Z,{type:n?"check":"",fw:!0}),O("on")]}),(0,D.jsxs)(Kj.Item,{onSelect:function(){return d(!1)},children:[(0,D.jsx)(Ii.Z,{type:n?"":"check",fw:!0}),O("off")]}),(0,D.jsx)(Kj.Item,{header:!0,children:O("compile_mode")}),(0,D.jsxs)(Kj.Item,{onSelect:function(){return h(!1)},children:[(0,D.jsx)(Ii.Z,{type:a?"":"check",fw:!0}),O("normal")]}),(0,D.jsxs)(Kj.Item,{onSelect:function(){return h(!0)},children:[(0,D.jsx)(Ii.Z,{type:a?"check":"",fw:!0}),O("fast")," ",(0,D.jsx)("span",{className:"subdued",children:"[draft]"})]}),(0,D.jsx)(Kj.Item,{header:!0,children:"Syntax Checks"}),(0,D.jsxs)(Kj.Item,{onSelect:function(){return p(!0)},children:[(0,D.jsx)(Ii.Z,{type:w?"check":"",fw:!0}),O("stop_on_validation_error")]}),(0,D.jsxs)(Kj.Item,{onSelect:function(){return p(!1)},children:[(0,D.jsx)(Ii.Z,{type:w?"":"check",fw:!0}),O("ignore_validation_errors")]}),(0,D.jsx)(Kj.Item,{header:!0,children:O("compile_error_handling")}),(0,D.jsxs)(Kj.Item,{onSelect:C,children:[(0,D.jsx)(Ii.Z,{type:y?"check":"",fw:!0}),O("stop_on_first_error")]}),(0,D.jsxs)(Kj.Item,{onSelect:E,children:[(0,D.jsx)(Ii.Z,{type:y?"":"check",fw:!0}),O("try_to_compile_despite_errors")]}),(0,D.jsx)(Kj.Item,{divider:!0}),(0,D.jsx)(Kj.Item,{onSelect:function(){return _()},disabled:!r,"aria-disabled":!r,children:O("stop_compile")}),(0,D.jsx)(Kj.Item,{onSelect:function(){return S()},disabled:r,"aria-disabled":r,children:O("recompile_from_scratch")})]})}var Jj=(0,E.memo)(Xj);var Qj=function(){var e=(0,le.l5)(),t=e.pdfLayout,n=e.setView,r=e.detachRole,a=(0,Qe.$)().t;return r||"sideBySide"===t?null:(0,D.jsxs)(Ri.Z,{bsStyle:null,bsSize:"xs",onClick:function(){n("editor")},className:"switch-to-editor-btn toolbar-btn-secondary btn-secondary",children:[(0,D.jsx)(Ii.Z,{type:"code",className:"toolbar-btn-secondary-icon"}),(0,D.jsx)("span",{className:"toolbar-btn-secondary-text",children:a("switch_to_editor")})]})},e$=__webpack_require__(69774),t$=__webpack_require__.n(e$),n$=__webpack_require__(17174),r$=function(e){function t(){return e.apply(this,arguments)||this}(0,Do.Z)(t,e);var n=t.prototype;return n.hasContent=function(e){var t=!1;return E.Children.forEach(e,(function(e){t||(e||0===e)&&(t=!0)})),t},n.render=function(){var e=this.props,t=e.className,n=e.children,r=(0,Po.Z)(e,["className","children"]),a=(0,sa.D9)(r),l=a[0],f=a[1],d=(0,Ao.Z)({},(0,sa.Nj)(l),{hidden:!this.hasContent(n)});return E.createElement("span",(0,Ao.Z)({},f,{className:se()(t,d)}),n)},t}(E.Component),i$=(0,sa.Pn)("label",(0,sa.KS)(t$()(n$.ZM).concat([n$.bg.DEFAULT,n$.bg.PRIMARY]),n$.bg.DEFAULT,r$));function o$(){var e,t,n=(0,Pl.Im)(),r=n.error,a=n.logEntries,l=n.toggleLogs,f=n.showLogs,d=n.stoppedOnFirstError,h=(0,Qe.$)().t,p=(0,E.useCallback)((function(){l()}),[l]),y=Number(null==a||null===(e=a.errors)||void 0===e?void 0:e.length),w=y+Number(null==a||null===(t=a.warnings)||void 0===t?void 0:t.length);return(0,D.jsx)(vo.Z,{id:"logs-toggle",description:h("logs_and_output_files"),overlayProps:{placement:"bottom"},children:(0,D.jsxs)(Ri.Z,{bsStyle:"link",disabled:Boolean(r||d),active:f,className:"toolbar-item log-btn",onClick:p,style:{position:"relative"},"aria-label":h(f?"view_pdf":"view_logs"),children:[(0,D.jsx)(Ii.Z,{type:"file-text-o",fw:!0}),!f&&w>0&&(0,D.jsx)(i$,{bsStyle:0===y?"warning":"danger",children:w})]})})}var a$=(0,E.memo)(o$);var s$=function(){var e=(0,Pl.Im)().pdfDownloadUrl,t=(0,A.d2)()._id,n=(0,Qe.$)().t,r=n(e?"download_pdf":"please_compile_pdf_before_download");return(0,D.jsx)(vo.Z,{id:"download-pdf",description:r,overlayProps:{placement:"bottom"},children:(0,D.jsx)(Ri.Z,{onClick:function(){nc.sendMB("download-pdf-button-click",{projectId:t})},bsStyle:"link",disabled:!e,download:!0,href:e||"#",target:"_blank",style:{pointerEvents:"auto"},children:(0,D.jsx)(Ii.Z,{type:"download",fw:!0})})})};function l$(){var e=(0,Pl.Im)(),t=e.codeCheckFailed,n=e.error,r=e.toggleLogs,a=(0,Qe.$)().t,l=(0,E.useCallback)((function(){r()}),[r]);return t?(0,D.jsxs)(Ri.Z,{bsSize:"xsmall",bsStyle:"danger",disabled:Boolean(n),className:"btn-toggle-logs toolbar-item",onClick:l,children:[(0,D.jsx)(Ii.Z,{type:"exclamation-triangle"}),(0,D.jsx)("span",{className:"toolbar-text toolbar-hide-small",children:a("code_check_failed")})]}):null}var c$=(0,E.memo)(l$),u$=__webpack_require__(79862);function f$(){var e=(0,Qe.$)().t,t=Ia(),n=(0,E.useCallback)((function(){t.assign((0,u$.g)(null).toString())}),[t]);return(0,D.jsx)(Ri.Z,{onClick:n,className:"btn-orphan",bsStyle:"primary",bsSize:"small",children:e("redirect_to_editor")})}var d$=(0,E.memo)(f$),h$=(__webpack_require__(61657),__webpack_require__(69565)),p$=__webpack_require__(83976),m$=__webpack_require__(51294);function g$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y$(e){var t=e.position,n=e.syncToCode,r=e.syncToCodeInFlight,a=e.isDetachLayout,l=(0,Qe.$)().t,f=a?"bottom":"right",d=se()("synctex-control","btn-secondary",{"detach-synctex-control":!!a}),h=null;return r?h=(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0,className:"synctex-spin-icon"}):a||(h=(0,D.jsx)(Ii.Z,{type:"arrow-left",className:"synctex-control-icon"})),(0,D.jsx)(vo.Z,{id:"sync-to-code",description:l("go_to_pdf_location_in_code"),overlayProps:{placement:f},children:(0,D.jsxs)(Ri.Z,{bsStyle:null,bsSize:"xs",onClick:function(){return n(t,72)},disabled:r,className:d,"aria-label":l("go_to_pdf_location_in_code"),children:[h,a?(0,D.jsxs)("span",{children:[" ",l("show_in_code")]}):""]})})}function b$(e){var t=e.cursorPosition,n=e.syncToPdf,r=e.syncToPdfInFlight,a=e.isDetachLayout,l=e.hasSingleSelectedDoc,f=(0,Qe.$)().t,d=a?"bottom":"right",h=se()("synctex-control","btn-secondary","toolbar-btn-secondary",{"detach-synctex-control":!!a}),p=null;return r?p=(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0,className:"synctex-spin-icon"}):a||(p=(0,D.jsx)(Ii.Z,{type:"arrow-right",className:"synctex-control-icon"})),(0,D.jsx)(vo.Z,{id:"sync-to-pdf",description:f("go_to_code_location_in_pdf"),overlayProps:{placement:d},children:(0,D.jsxs)(Ri.Z,{bsStyle:null,bsSize:"xs",onClick:function(){return n(t)},disabled:r||!t||!l,className:h,"aria-label":f("go_to_code_location_in_pdf"),children:[p,a?(0,D.jsxs)("span",{children:[" ",f("show_in_pdf")]}):""]})})}function w$(){var e=(0,Tl.I)(),t=(0,A.d2)()._id,n=(0,le.l5)().detachRole,r=(0,Pl.Im)(),a=r.clsiServerId,l=r.pdfUrl,f=r.pdfViewer,d=r.position,h=r.setShowLogs,p=r.setHighlights,y=(0,P.O)().selectedEntities,w=(0,E.useState)((function(){var t=Ap.Z.getItem("doc.position.".concat(e.editorManager.getCurrentDocId()));return t?t.cursorPosition:null})),x=g$(w,2),_=x[0],S=x[1],k=(0,Ra.Z)(),C=(0,os.Z)().signal;(0,E.useEffect)((function(){var e=function(e){return S(e.detail)};return window.addEventListener("cursor:editor:update",e),function(){return window.removeEventListener("cursor:editor:update",e)}}),[e]);var O=g$((0,E.useState)(!1),2),j=O[0],T=O[1],R=g$((0,h$.Z)("sync-to-code-inflight",!1,"detacher","detached"),2),I=R[0],M=R[1],L=g$((0,tc.Z)("sync_tex_error"),2)[1],N=(0,E.useCallback)((function(){var t=e.editorManager.getCurrentDocId(),n=e.fileTreeManager.findEntityById(t),r=e.fileTreeManager.getEntityPath(n),a=e.fileTreeManager.getRootDocDirname();return a&&(r=r.replace(RegExp("^".concat(a)),"".concat(a,"/."))),r}),[e]),F=(0,E.useCallback)((function(t,n){if(t){var r=e.fileTreeManager.findEntityByPath(t);e.editorManager.openDoc(r,{gotoLine:n})}else L(!0),window.setTimeout((function(){k.current&&L(!1)}),4e3)}),[e,k,L]),q=(0,E.useCallback)((function(e){T(!0),a&&(e+="&clsiserverid=".concat(a)),(0,U.xA)("/project/".concat(t,"/sync/code?").concat(e),{signal:C}).then((function(e){h(!1),p(e.pdf)})).catch((function(e){console.error(e)})).finally((function(){k.current&&T(!1)}))}),[a,k,t,h,p,T,C]),B=(0,E.useCallback)((function(e){var t=new URLSearchParams({file:N(),line:e.row+1,column:e.column}).toString();q(t)}),[N,q]),H=(0,E.useRef)(_);(0,E.useEffect)((function(){H.current=_}),[_]);var z=(0,E.useCallback)((function(){B(H.current)}),[B]);(0,m$.Z)("cursor:editor:syncToPdf",z);var V=(0,E.useCallback)((function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;M(!0);var l=e.offset.left,f=0;null!==(n=e.pageSize)&&void 0!==n&&n.height?f+=e.pageSize.height-e.offset.top:f+=e.offset.top,f+=r;var d=new URLSearchParams({page:e.page+1,h:l.toFixed(2),v:f.toFixed(2)});a&&d.set("clsiserverid",a),(0,U.xA)("/project/".concat(t,"/sync/pdf?").concat(d),{signal:C}).then((function(e){var t=g$(e.code,1)[0],n=t.file,r=t.line;F(n,r)})).catch((function(e){console.error(e)})).finally((function(){k.current&&M(!1)}))}),[a,t,C,k,M,F]),W=(0,p$.Z)("sync-to-code",V,"detached","detacher");(0,E.useEffect)((function(){var e=function(e){return W(e.detail)};return window.addEventListener("synctex:sync-to-position",e),function(){window.removeEventListener("synctex:sync-to-position",e)}}),[W]);var Z=g$((0,h$.Z)("has-single-selected-doc",!1,"detacher","detached"),2),G=Z[0],K=Z[1];return(0,E.useEffect)((function(){1===y.length&&"doc"===y[0].type?K(!0):K(!1)}),[y,K]),d&&l&&"native"!==f?"detacher"===n?(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(b$,{cursorPosition:_,syncToPdf:B,syncToPdfInFlight:j,isDetachLayout:!0,hasSingleSelectedDoc:G})}):"detached"===n?(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(y$,{position:d,syncToCode:W,syncToCodeInFlight:I,isDetachLayout:!0})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(b$,{cursorPosition:_,syncToPdf:B,syncToPdfInFlight:j,hasSingleSelectedDoc:G}),(0,D.jsx)(y$,{position:d,syncToCode:W,syncToCodeInFlight:I})]}):null}var x$=(0,E.memo)(w$);function _$(){var e=(0,le.l5)(S$),t=e.detachRole,n=e.detachIsLinked;return"detached"===t&&n?(0,D.jsx)(x$,{}):null}y$.propTypes={isDetachLayout:j().bool,position:j().object.isRequired,syncToCode:j().func.isRequired,syncToCodeInFlight:j().bool.isRequired},b$.propTypes={cursorPosition:j().object,isDetachLayout:j().bool,syncToPdf:j().func.isRequired,syncToPdfInFlight:j().bool.isRequired,hasSingleSelectedDoc:j().bool.isRequired};var S$={detachRole:j().string,detachIsLinked:j().bool};function k$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E$(){var e=(0,le.l5)(),t=e.detachRole,n=e.detachIsLinked,r=(0,E.useRef)(),a=k$((0,E.useState)(!1),2),l=a[0],f=a[1],d=!n&&"detached"===t;(0,E.useEffect)((function(){r.current&&clearTimeout(r.current),d?r.current=setTimeout((function(){f(!0)}),5e3):f(!1)}),[d]);var h=null;return h=l?(0,D.jsx)(j$,{}):d?(0,D.jsx)($$,{}):(0,D.jsx)(O$,{}),(0,D.jsx)(qj,{className:"toolbar toolbar-pdf toolbar-pdf-hybrid",children:h})}function O$(){return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"toolbar-pdf-left",children:[(0,D.jsx)(Jj,{}),(0,D.jsx)(a$,{}),(0,D.jsx)(s$,{})]}),(0,D.jsxs)("div",{className:"toolbar-pdf-right",children:[(0,D.jsx)(c$,{}),(0,D.jsx)(Qj,{}),(0,D.jsx)(_$,{})]})]})}function j$(){var e=(0,Qe.$)().t;return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("div",{className:"toolbar-pdf-orphan",children:[e("tab_no_longer_connected"),(0,D.jsx)(d$,{})]})})}function $$(){var e=(0,Qe.$)().t;return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("div",{className:"toolbar-pdf-orphan",children:[(0,D.jsx)(Ii.Z,{type:"refresh",fw:!0,spin:!0}),e("tab_connecting"),"…"]})})}var T$=(0,E.memo)(E$);function A$(e){return A$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A$(e)}function P$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D$(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==A$(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==A$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A$(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M$=1e4;function L$(){var e=(0,Pl.Im)(),t=e.clsiServerId,n=e.deliveryLatencies,r=e.pdfFile,a=e.pdfUrl,l=(0,A.d2)()._id,f=R$((0,E.useState)(0),2),d=f[0],h=f[1],p=R$((0,ce.Z)("faster-compiles-feedback:".concat(l),!1,!0),2),y=p[0],w=p[1],x=R$((0,ce.Z)("faster-compiles-feedback:dismiss",!1,!0),2),_=x[0],S=x[1],k=R$((0,E.useState)(!1),2),C=k[0],O=k[1],j=(0,E.useRef)(""),T=(0,E.useRef)("");function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,nc.sendMB)("faster-compiles-feedback",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P$(Object(n),!0).forEach((function(t){D$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({projectId:l,server:null!=t&&t.includes("-c2d-")?"faster":"normal",feedback:e,pdfSize:r.size},n)),w(!0),O(!0),window.setTimeout((function(){O(!1)}),M$)}(0,E.useEffect)((function(){a&&T.current&&t===j.current?h((function(e){return e+1})):(h(0),j.current=t),T.current=a}),[t,T,a,h]);var R=(0,Qe.$)().t;switch(!0){case C:return(0,D.jsx)(ts.Z,{bsStyle:"info",className:"faster-compiles-feedback",onClick:function(){return O(!1)},children:R("faster_compiles_feedback_thanks")});case _||y:return null;case d>1:return(0,D.jsxs)(ts.Z,{bsStyle:"info",className:"faster-compiles-feedback",children:[(0,D.jsx)("button",{type:"button","aria-label":R("dismiss"),className:"btn-inline-link faster-compiles-feedback-dismiss",onClick:function(){(0,nc.sendMB)("faster-compiles-feedback-dismiss"),S(!0)},children:(0,D.jsx)(Ii.Z,{type:"close",fw:!0})}),R("faster_compiles_feedback_question"),(0,D.jsx)("div",{className:"faster-compiles-feedback-options",children:["slower","same","faster"].map((function(e){return(0,D.jsx)(Ri.Z,{bsStyle:"default",bsSize:"xs",className:"faster-compiles-feedback-option",onClick:function(){return P(e)},children:R("faster"===e?"faster_compiles_feedback_seems_faster":"same"===e?"faster_compiles_feedback_seems_same":"faster_compiles_feedback_seems_slower")},e)}))})]});default:return null}}function N$(){return(0,Pl.Im)().showFasterCompilesFeedbackUI?(0,D.jsx)(L$,{}):null}var F$=(0,E.memo)(N$),q$=function(e){var t=e.children;return(0,D.jsx)("div",{className:"pdf-preview-messages",children:t})};function B$(e){return B$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B$(e)}function U$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U$(Object(n),!0).forEach((function(t){z$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z$(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==B$(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==B$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===B$(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z$(){var e=(0,Qe.$)().t,t=V$((0,ce.Z)("compile-time-warning-display-status",{lastDisplayTime:0,dismissed:!1},!0),2),n=t[0],r=t[1],a=(0,Pl.Im)(),l=a.showCompileTimeWarning,f=a.setShowCompileTimeWarning;(0,E.useEffect)((function(){if(l){if(n&&Date.now()-n.lastDisplayTime<20736e5)return;r({lastDisplayTime:Date.now(),dismissed:!1}),nc.sendMB("compile-time-warning-displayed",{})}}),[l,n,r]);var d=(0,E.useCallback)((function(){return(Date.now()-n.lastDisplayTime)/1e3}),[n]),h=(0,E.useCallback)((function(){nc.sendMB("compile-time-warning-dismissed",{"time-since-displayed":d()}),f(!1),r((function(e){return H$(H$({},e),{},{dismissed:!0})}))}),[d,f,r]),p=(0,E.useCallback)((function(){nc.sendMB("compile-time-warning-upgrade-click",{"time-since-displayed":d()}),f(!1),r((function(e){return H$(H$({},e),{},{dismissed:!0})}))}),[d,f,r]);return!l||n.dismissed?null:(0,D.jsxs)("div",{className:"alert alert-success compile-time-warning",role:"alert",children:[(0,D.jsx)(Ri.Z,{className:"close","data-dismiss":"alert","aria-label":"Close",onClick:h,children:(0,D.jsx)("span",{"aria-hidden":"true",children:"×"})}),(0,D.jsxs)("div",{className:"warning-content",children:[(0,D.jsx)("div",{className:"warning-text",children:(0,D.jsx)($o.c,{i18nKey:"approaching_compile_timeout_limit_upgrade_for_more_compile_time",components:[(0,D.jsx)("strong",{style:{display:"inline-block"}})]})}),(0,D.jsx)("div",{className:"upgrade-prompt",children:(0,D.jsx)(ws.Z,{buttonProps:{bsStyle:"primary",bsSize:"sm"},handleClick:p,source:"compile-time-warning",children:e("upgrade")})})]})]})}var G$=(0,E.memo)(Z$);function K$(){var e=(0,Pl.Im)().pdfUrl,t=se()("pdf","full-size",{"pdf-empty":!e});return(0,D.jsxs)("div",{className:t,children:[(0,D.jsx)(T$,{}),(0,D.jsx)(q$,{children:(0,D.jsx)(G$,{})}),(0,D.jsx)(E.Suspense,{fallback:(0,D.jsx)(Y$,{}),children:(0,D.jsxs)("div",{className:"pdf-viewer",children:[(0,D.jsx)(Nj,{}),(0,D.jsx)(F$,{})]})}),(0,D.jsx)(Ij,{})]})}function Y$(){return(0,D.jsx)("div",{className:"pdf-loading-spinner-container",children:(0,D.jsx)(uy,{delay:500})})}var X$=(0,E.memo)(K$);function J$(){return"detacher"===(0,le.l5)().detachRole?null:(0,D.jsx)(X$,{})}var Q$,eT,tT=(0,T.Z)((0,E.memo)(J$),(function(){return(0,D.jsx)($j.Z,{type:"preview"})}));function nT(e,t,n){var r;return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,n){if(e||!window.grecaptcha)return t();try{Q$||(Q$=window.grecaptcha.render("recaptcha",{callback:function(e){eT&&(eT(e),eT=void 0),window.grecaptcha.reset()}})),eT=t}catch(e){n(e)}}))}(null===(r=window.ExposedSettings.recaptchaDisabled)||void 0===r?void 0:r.invite).then((function(r){return(0,U.ty)("/project/".concat(e,"/invite"),{body:{email:t,privileges:n,"g-recaptcha-response":r}})}))}function rT(e,t){return(0,U.ty)("/project/".concat(e,"/invite/").concat(t._id,"/resend"))}function iT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aT(e){var t=e.member,n=e.cancel,r=iT((0,E.useState)(!1),2),a=r[0],l=r[1],f=iT((0,E.useState)(!1),2),d=f[0],h=f[1],p=Ia(),y=(0,A.d2)(),w=y._id,x=y.name;return(0,D.jsxs)(So.Z,{show:!0,onHide:n,children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:(0,D.jsx)($o.c,{i18nKey:"change_project_owner"})})}),(0,D.jsxs)(_o.Z.Body,{children:[(0,D.jsx)("p",{children:(0,D.jsx)($o.c,{i18nKey:"project_ownership_transfer_confirmation_1",values:{user:t.email,project:x},components:[(0,D.jsx)("strong",{},"strong-1"),(0,D.jsx)("strong",{},"strong-2")],shouldUnescape:!0})}),(0,D.jsx)("p",{children:(0,D.jsx)($o.c,{i18nKey:"project_ownership_transfer_confirmation_2"})})]}),(0,D.jsxs)(_o.Z.Footer,{children:[(0,D.jsxs)("div",{className:"modal-footer-left",children:[a&&(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0}),d&&(0,D.jsx)("span",{className:"text-danger",children:(0,D.jsx)($o.c,{i18nKey:"generic_something_went_wrong"})})]}),(0,D.jsxs)("div",{className:"modal-footer-right",children:[(0,D.jsx)(Ri.Z,{type:"button",bsStyle:null,className:"btn-secondary",onClick:n,disabled:a,children:(0,D.jsx)($o.c,{i18nKey:"cancel"})}),(0,D.jsx)(Ri.Z,{type:"button",bsStyle:"primary",onClick:function(){h(!1),l(!0),function(e,t){return(0,U.ty)("/project/".concat(e,"/transfer-ownership"),{body:{user_id:t._id}})}(w,t).then((function(){p.reload()})).catch((function(){h(!0),l(!1)}))},disabled:a,children:(0,D.jsx)($o.c,{i18nKey:"change_owner"})})]})]})]})}function sT(e){return sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sT(e)}function lT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lT(Object(n),!0).forEach((function(t){uT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==sT(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===sT(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hT(e){var t=e.member,n=fT((0,E.useState)(t.privileges),2),r=n[0],a=n[1],l=fT((0,E.useState)(!1),2),f=l[0],d=l[1];(0,E.useEffect)((function(){a(t.privileges)}),[t.privileges]);var h=xA(),p=h.updateProject,y=h.monitorRequest,w=(0,A.d2)(),x=w._id,_=w.members;return f?(0,D.jsx)(aT,{member:t,cancel:function(){return d(!1)}}):(0,D.jsx)(fv,{horizontal:!0,id:"share-project-form",onSubmit:function(e){e.preventDefault(),"owner"===r?d(!0):y((function(){return function(e,t,n){return(0,U.BS)("/project/".concat(e,"/users/").concat(t._id),{body:n})}(x,t,{privilegeLevel:r})})).then((function(){p({members:_.map((function(e){return e._id===t._id?cT(cT({},e),{},{privileges:r}):e}))})}))},children:(0,D.jsxs)(ns.Z,{className:"project-member",children:[(0,D.jsx)(Xg.Z,{xs:7,children:(0,D.jsx)(is.Z.Static,{children:t.email})}),(0,D.jsx)(Xg.Z,{xs:3,children:(0,D.jsx)(pT,{value:r,handleChange:function(e){return a(e.target.value)}})}),(0,D.jsx)(Xg.Z,{xs:2,children:r===t.privileges?(0,D.jsx)(mT,{member:t}):(0,D.jsx)(gT,{handleReset:function(){return a(t.privileges)}})})]})})}function pT(e){var t=e.value,n=e.handleChange,r=(0,Qe.$)().t;return(0,D.jsxs)(is.Z,{componentClass:"select",className:"privileges",bsSize:"sm",value:t,onChange:n,children:[(0,D.jsx)("option",{value:"owner",children:r("owner")}),(0,D.jsx)("option",{value:"readAndWrite",children:r("can_edit")}),(0,D.jsx)("option",{value:"readOnly",children:r("read_only")})]})}function mT(e){var t=e.member,n=(0,Qe.$)().t,r=xA(),a=r.updateProject,l=r.monitorRequest,f=(0,A.d2)(),d=f._id,h=f.members;return(0,D.jsx)(is.Z.Static,{className:"text-center",children:(0,D.jsx)(vo.Z,{id:"remove-collaborator",description:(0,D.jsx)($o.c,{i18nKey:"remove_collaborator"}),overlayProps:{placement:"bottom"},children:(0,D.jsx)(Ri.Z,{type:"button",bsStyle:"link",onClick:function(e){e.preventDefault(),l((function(){return function(e,t){return(0,U.K$)("/project/".concat(e,"/users/").concat(t._id))}(d,t)})).then((function(){a({members:h.filter((function(e){return e!==t}))})}))},className:"remove-button","aria-label":n("remove_collaborator"),children:(0,D.jsx)(Ii.Z,{type:"times"})})})})}function gT(e){var t=e.handleReset;return(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)(Ri.Z,{type:"submit",bsSize:"sm",bsStyle:"primary",children:(0,D.jsx)($o.c,{i18nKey:"change_or_cancel-change"})}),(0,D.jsxs)("div",{className:"text-sm",children:[(0,D.jsx)($o.c,{i18nKey:"change_or_cancel-or"})," ",(0,D.jsx)(Ri.Z,{type:"button",className:"btn-inline-link",onClick:t,children:(0,D.jsx)($o.c,{i18nKey:"change_or_cancel-cancel"})})]})]})}function vT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bT(e){var t=e.canAddCollaborators,n=vT((0,E.useState)(!1),2),r=n[0],a=n[1],l=xA().monitorRequest,f=(0,A.d2)(),d=f._id,h=f.publicAccessLevel,p=(0,E.useCallback)((function(e){a(!0),l((function(){return function(e,t){return(0,U.ty)("/project/".concat(e,"/settings/admin"),{body:{publicAccessLevel:t}})}(d,e)})).then((function(){})).finally((function(){a(!1)}))}),[l,d]);switch(h){case"private":return(0,D.jsx)(wT,{setAccessLevel:p,inflight:r});case"tokenBased":return(0,D.jsx)(xT,{setAccessLevel:p,inflight:r,canAddCollaborators:t});case"readAndWrite":case"readOnly":return(0,D.jsx)(_T,{setAccessLevel:p,accessLevel:h,inflight:r});default:return null}}function wT(e){var t=e.setAccessLevel,n=e.inflight;return(0,D.jsx)(Yg.Z,{className:"public-access-level",children:(0,D.jsxs)(Xg.Z,{xs:12,className:"text-center",children:[(0,D.jsx)($o.c,{i18nKey:"link_sharing_is_off"}),(0,D.jsx)("span",{children:"  "}),(0,D.jsx)(Ri.Z,{type:"button",bsStyle:"link",className:"btn-inline-link",onClick:function(){t("tokenBased"),nc.sendMB("link-sharing-click")},disabled:n,children:(0,D.jsx)($o.c,{i18nKey:"turn_on_link_sharing"})}),(0,D.jsx)("span",{children:"  "}),(0,D.jsx)(CT,{})]})})}function xT(e){var t=e.setAccessLevel,n=e.inflight,r=(e.canAddCollaborators,(0,A.d2)().tokens);return(0,D.jsxs)(Yg.Z,{className:"public-access-level",children:[(0,D.jsxs)(Xg.Z,{xs:12,className:"text-center",children:[(0,D.jsx)("strong",{children:(0,D.jsx)($o.c,{i18nKey:"link_sharing_is_on"})}),(0,D.jsx)("span",{children:"  "}),(0,D.jsx)(Ri.Z,{bsStyle:"link",className:"btn-inline-link",onClick:function(){return t("private")},disabled:n,children:(0,D.jsx)($o.c,{i18nKey:"turn_off_link_sharing"})}),(0,D.jsx)("span",{children:"  "}),(0,D.jsx)(CT,{})]}),(0,D.jsxs)(Xg.Z,{xs:12,className:"access-token-display-area",children:[(0,D.jsxs)("div",{className:"access-token-wrapper",children:[(0,D.jsx)("strong",{children:(0,D.jsx)($o.c,{i18nKey:"anyone_with_link_can_edit"})}),(0,D.jsx)(kT,{token:null==r?void 0:r.readAndWrite,path:"/",tooltipId:"tooltip-copy-link-rw"})]}),(0,D.jsxs)("div",{className:"access-token-wrapper",children:[(0,D.jsx)("strong",{children:(0,D.jsx)($o.c,{i18nKey:"anyone_with_link_can_view"})}),(0,D.jsx)(kT,{token:null==r?void 0:r.readOnly,path:"/read/",tooltipId:"tooltip-copy-link-ro"})]})]})]})}function _T(e){var t=e.accessLevel,n=e.setAccessLevel,r=e.inflight;return(0,D.jsx)(Yg.Z,{className:"public-access-level",children:(0,D.jsxs)(Xg.Z,{xs:12,className:"text-center",children:[(0,D.jsxs)("strong",{children:["readAndWrite"===t&&(0,D.jsx)($o.c,{i18nKey:"this_project_is_public"}),"readOnly"===t&&(0,D.jsx)($o.c,{i18nKey:"this_project_is_public_read_only"})]}),(0,D.jsx)("span",{children:"  "}),(0,D.jsx)(Ri.Z,{type:"button",bsStyle:"link",className:"btn-inline-link",onClick:function(){return n("private")},disabled:r,children:(0,D.jsx)($o.c,{i18nKey:"make_private"})}),(0,D.jsx)("span",{children:"  "}),(0,D.jsx)(CT,{})]})})}function ST(){var e=(0,A.d2)().tokens;return(0,D.jsx)(Yg.Z,{className:"public-access-level",children:(0,D.jsx)(Xg.Z,{xs:12,className:"access-token-display-area",children:(0,D.jsxs)("div",{className:"access-token-wrapper",children:[(0,D.jsx)("strong",{children:(0,D.jsx)($o.c,{i18nKey:"anyone_with_link_can_view"})}),(0,D.jsx)(kT,{token:null==e?void 0:e.readOnly,path:"/read/",tooltipId:"tooltip-copy-link-ro"})]})})})}function kT(e){var t=e.token,n=e.path,r=e.tooltipId,a=(0,La.SE)().isAdmin;if(!t)return(0,D.jsx)("pre",{className:"access-token",children:(0,D.jsxs)("span",{children:[(0,D.jsx)($o.c,{i18nKey:"loading"}),"…"]})});var l=window.location.origin;a&&(l=window.ExposedSettings.siteUrl);var f="".concat(l).concat(n).concat(t);return(0,D.jsxs)("pre",{className:"access-token",children:[(0,D.jsx)("span",{children:f}),(0,D.jsx)(jy,{link:f,tooltipId:r})]})}function CT(){return(0,D.jsx)(vo.Z,{id:"link-sharing-info",description:(0,D.jsx)($o.c,{i18nKey:"learn_more_about_link_sharing"}),children:(0,D.jsx)("a",{href:"/learn/how-to/What_is_Link_Sharing%3F",target:"_blank",rel:"noopener",children:(0,D.jsx)(Ii.Z,{type:"question-circle"})})})}function ET(e){switch(e.privileges){case"readAndWrite":return(0,D.jsx)($o.c,{i18nKey:"can_edit"});case"readOnly":return(0,D.jsx)($o.c,{i18nKey:"read_only"});default:return null}}function OT(e){var t=e.invite,n=e.isProjectOwner;return(0,D.jsxs)(Yg.Z,{className:"project-invite",children:[(0,D.jsxs)(Xg.Z,{xs:7,children:[(0,D.jsx)("div",{children:t.email}),(0,D.jsxs)("div",{className:"small",children:[(0,D.jsx)($o.c,{i18nKey:"invite_not_accepted"}),". ",n&&(0,D.jsx)(jT,{invite:t})]})]}),(0,D.jsx)(Xg.Z,{xs:3,className:"text-left",children:(0,D.jsx)(ET,{privileges:t.privileges})}),n&&(0,D.jsx)(Xg.Z,{xs:2,className:"text-center",children:(0,D.jsx)($T,{invite:t})})]})}function jT(e){var t=e.invite,n=xA().monitorRequest,r=(0,A.d2)()._id,a=(0,E.useCallback)((function(){return n((function(){return rT(r,t)})).finally((function(){document.activeElement.blur()}))}),[t,n,r]);return(0,D.jsx)(Ri.Z,{bsStyle:"link",className:"btn-inline-link",onClick:a,children:(0,D.jsx)($o.c,{i18nKey:"resend"})})}function $T(e){var t=e.invite,n=(0,Qe.$)().t,r=xA(),a=r.updateProject,l=r.monitorRequest,f=(0,A.d2)(),d=f._id,h=f.invites;return(0,D.jsx)(vo.Z,{id:"revoke-invite",description:(0,D.jsx)($o.c,{i18nKey:"revoke_invite"}),overlayProps:{placement:"bottom"},children:(0,D.jsx)(Ri.Z,{type:"button",bsStyle:"link",onClick:function(e){e.preventDefault(),l((function(){return function(e,t){return(0,U.K$)("/project/".concat(e,"/invite/").concat(t._id))}(d,t)})).then((function(){a({invites:h.filter((function(e){return e!==t}))})}))},"aria-label":n("revoke"),className:"btn-inline-link",children:(0,D.jsx)(Ii.Z,{type:"times"})})})}x.Z.component("pdfPreview",(0,S.react2angular)(eu.use(tT),[])),x.Z.component("pdfSynctexControls",(0,S.react2angular)(eu.use((function(){return(0,le.l5)(S$).detachRole?null:(0,D.jsx)(x$,{})})),[])),x.Z.component("detacherSynctexControl",(0,S.react2angular)(eu.use((function(){var e=(0,le.l5)(S$),t=e.detachRole,n=e.detachIsLinked;return"detacher"===t&&n?(0,D.jsx)(x$,{}):null})),[])),aT.propTypes={member:j().object.isRequired,cancel:j().func.isRequired},hT.propTypes={member:j().shape({_id:j().string.isRequired,email:j().string.isRequired,privileges:j().string.isRequired})},pT.propTypes={value:j().string.isRequired,handleChange:j().func.isRequired},mT.propTypes={member:j().shape({_id:j().string.isRequired,email:j().string.isRequired,privileges:j().string.isRequired})},gT.propTypes={handleReset:j().func.isRequired},bT.propTypes={canAddCollaborators:j().bool},wT.propTypes={setAccessLevel:j().func.isRequired,inflight:j().bool},xT.propTypes={setAccessLevel:j().func.isRequired,inflight:j().bool,canAddCollaborators:j().bool},_T.propTypes={accessLevel:j().string.isRequired,setAccessLevel:j().func.isRequired,inflight:j().bool},kT.propTypes={token:j().string,tooltipId:j().string.isRequired,path:j().string.isRequired},ET.propTypes={privileges:j().string.isRequired},OT.propTypes={invite:j().object.isRequired,isProjectOwner:j().bool.isRequired},jT.propTypes={invite:j().object.isRequired},$T.propTypes={invite:j().object.isRequired};var TT=__webpack_require__(40558);function AT(e){return AT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AT(e)}function PT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PT(Object(n),!0).forEach((function(t){RT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==AT(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==AT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===AT(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=LT(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function MT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||LT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LT(e,t){if(e){if("string"==typeof e)return NT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?NT(e,t):void 0}}function NT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var FT=/[\u061C\u2000-\u200F\u202A-\u202E\u2060\u2066-\u2069\u2028\u2029\u202F]/g;function qT(e){var t=e.loading,n=e.options,r=e.placeholder,a=e.multipleSelectionProps,l=a.getSelectedItemProps,f=a.getDropdownProps,d=a.addSelectedItem,h=a.removeSelectedItem,p=a.selectedItems,y=MT((0,E.useState)(""),2),w=y[0],x=y[1],_=(0,E.useMemo)((function(){return p.map((function(e){return e.email}))}),[p]),S=(0,E.useMemo)((function(){return n.filter((function(e){return!_.includes(e.email)}))}),[n,_]),k=(0,E.useMemo)((function(){return""===w?S:bS(S,w,{keys:["name","email"],threshold:bS.rankings.CONTAINS,baseSort:function(e,t){return e.index-t.index>0?1:-1}})}),[S,w]),C=(0,E.useRef)(null),O=(0,E.useCallback)((function(){C.current&&window.setTimeout((function(){C.current.focus()}),10)}),[C]),j=(0,E.useMemo)((function(){if(w.includes("@")){var e,t=IT(p);try{for(t.s();!(e=t.n()).done;){if(e.value.email===w)return!1}}catch(e){t.e(e)}finally{t.f()}}return!0}),[w,p]),T=(0,TT.Kb)({inputValue:w,defaultHighlightedIndex:0,items:k,itemToString:function(e){return e&&e.name},onStateChange:function(e){e.inputValue;var t=e.type,n=e.selectedItem;switch(t){case TT.Kb.stateChangeTypes.InputKeyDownEnter:case TT.Kb.stateChangeTypes.ItemClick:case TT.Kb.stateChangeTypes.InputBlur:n&&(x(""),d(n))}}}),A=T.isOpen,P=T.getLabelProps,R=T.getMenuProps,I=T.getInputProps,M=T.getComboboxProps,L=T.highlightedIndex,N=T.getItemProps,F=T.reset,q=(0,E.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.replace(FT,"");if(j&&n.includes("@")&&!_.includes(n))return d({email:n,display:n,type:"user"}),x(""),F(),t&&O(),!0}),[d,_,j,O,F]);return(0,E.useEffect)((function(){A&&0===k.length&&F()}),[F,A,k.length]),(0,D.jsxs)("div",{className:"tags-input",children:[(0,D.jsxs)("label",DT(DT({className:"small"},P()),{},{children:[(0,D.jsx)($o.c,{i18nKey:"share_with_your_collabs"})," ",t&&(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0})]})),(0,D.jsxs)("div",{className:"host",children:[(0,D.jsxs)("div",DT(DT({},M()),{},{className:"tags",onClick:O,children:[p.map((function(e,t){return(0,D.jsx)(UT,{removeSelectedItem:h,selectedItem:e,focusInput:O,index:t,getSelectedItemProps:l},"selected-item-".concat(t))})),(0,D.jsx)("input",DT({},I(f({className:se()({input:!0,"invalid-tag":!j}),type:"email",placeholder:r,size:w.length?w.length+5:r.length,ref:C,onBlur:function(){A||q(w,!1)},onChange:function(e){x(e.target.value)},onKeyDown:function(e){switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation();break;case"Tab":!A&&q(w)&&(e.preventDefault(),e.stopPropagation());break;case",":e.preventDefault(),q(w)}},onPaste:function(e){var t,n,r,a=null!==(t=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain"))&&void 0!==t?t:null===(r=window.clipboardData)||void 0===r?void 0:r.getData("text");if(a){var l=a.split(/\s*,\s*/).filter((function(e){return e.includes("@")}));if(l.length){e.preventDefault();var f,d=IT(l);try{for(d.s();!(f=d.n()).done;){var h=f.value;q(h)}}catch(e){d.e(e)}finally{d.f()}}}}}))))]})),(0,D.jsx)("div",{className:se()({autocomplete:A}),children:(0,D.jsx)("ul",DT(DT({},R()),{},{className:"suggestion-list",children:A&&k.map((function(e,t){return(0,D.jsx)(BT,{index:t,item:e,selected:t===L,getItemProps:N},e.email)}))}))})]})]})}function BT(e){var t=e.selected,n=e.item,r=e.getItemProps,a=e.index;return(0,D.jsxs)("li",DT(DT({className:se()("suggestion-item",{selected:t})},r({item:n,index:a})),{},{children:[(0,D.jsx)(Ii.Z,{type:"user",fw:!0})," ",n.display]}))}function UT(e){var t=e.removeSelectedItem,n=e.selectedItem,r=e.focusInput,a=e.getSelectedItemProps,l=e.index,f=(0,Qe.$)().t,d=(0,E.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),t(n),r()}),[r,t,n]);return(0,D.jsxs)("span",DT(DT({className:"tag-item"},a({selectedItem:n,index:l})),{},{children:[(0,D.jsx)(Ii.Z,{type:"user",fw:!0}),(0,D.jsx)("span",{children:n.display}),(0,D.jsx)("button",{type:"button",className:"remove-button btn-inline-link","aria-label":f("remove"),onClick:d,children:(0,D.jsx)(Ii.Z,{type:"close",fw:!0})})]}))}function HT(e){return HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HT(e)}function zT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zT(Object(n),!0).forEach((function(t){WT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==HT(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==HT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===HT(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return GT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function KT(e){var t=ZT(e.email.split("@"),1)[0],n=e.last_name||e.first_name!==t?[e.first_name,e.last_name].filter(Boolean).join(" "):"";return VT(VT({},e),{},{name:n,display:n?"".concat(n," <").concat(e.email,">"):e.email})}function YT(e){return YT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YT(e)}function XT(){XT=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==YT(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function JT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tA(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function QT(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function eA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||tA(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tA(e,t){if(e){if("string"==typeof e)return nA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nA(e,t):void 0}}function nA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rA(){var e=eA((0,E.useState)("readAndWrite"),2),t=e[0],n=e[1],r=(0,Ra.Z)(),a=function(){var e=ZT((0,E.useState)(!0),2),t=e[0],n=e[1],r=ZT((0,E.useState)(null),2),a=r[0],l=r[1],f=ZT((0,E.useState)(!1),2),d=f[0],h=f[1],p=(0,os.Z)().signal;return(0,E.useEffect)((function(){(0,U.xA)("/user/contacts",{signal:p}).then((function(e){l(e.contacts.map(KT))})).catch((function(e){return h(e)})).finally((function(){return n(!1)}))}),[p]),{loading:t,data:a,error:d}}(),l=a.data,f=(0,Qe.$)().t,d=xA(),h=d.updateProject,p=d.setInFlight,y=d.setError,w=(0,A.d2)(),x=w._id,_=w.members,S=w.invites,k=(0,E.useMemo)((function(){return(_||[]).map((function(e){return e.email})).sort()}),[_]),C=(0,E.useMemo)((function(){return l?l.filter((function(e){return!k.includes(e.email)})):null}),[l,k]),O=(0,TT.M$)({initialActiveIndex:0,initialSelectedItems:[]}),j=O.reset,T=O.selectedItems;function P(){var e;return e=XT().mark((function e(n){var a,l,f,d;return XT().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),T.length){e.next=3;break}return e.abrupt("return");case 3:j(),y(void 0),p(!0),a=JT(T),e.prev=7,f=XT().mark((function e(){var n,a,f,d,w,C,E;return XT().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.value,r.current){e.next=3;break}return e.abrupt("return","break");case 3:if(a="user"===n.type?n.email:n.display,f=a.toLowerCase(),!k.includes(f)){e.next=7;break}return e.abrupt("return","continue");case 7:if(e.prev=7,!(w=(S||[]).find((function(e){return e.email===f})))){e.next=15;break}return e.next=12,rT(x,w);case 12:d=e.sent,e.next=18;break;case 15:return e.next=17,nT(x,a,t);case 17:d=e.sent;case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(7),p(!1),y((null===(C=e.t0.data)||void 0===C?void 0:C.errorReason)||(429===(null===(E=e.t0.response)||void 0===E?void 0:E.status)?"too_many_requests":"generic_something_went_wrong")),e.abrupt("return","break");case 25:return d.error?(y(d.error),p(!1)):d.invite?h({invites:S.concat(d.invite)}):d.users?h({members:_.concat(d.users)}):d.user&&h({members:_.concat(d.user)}),e.next=28,new Promise((function(e){return setTimeout(e,100)}));case 28:case"end":return e.stop()}}),e,null,[[7,20]])})),a.s();case 10:if((l=a.n()).done){e.next=19;break}return e.delegateYield(f(),"t0",12);case 12:if("break"!==(d=e.t0)){e.next=15;break}return e.abrupt("break",19);case 15:if("continue"!==d){e.next=17;break}return e.abrupt("continue",17);case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(7),a.e(e.t1);case 24:return e.prev=24,a.f(),e.finish(24);case 27:p(!1);case 28:case"end":return e.stop()}}),e,null,[[7,21,24,27]])})),P=function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){QT(l,r,a,f,d,"next",e)}function d(e){QT(l,r,a,f,d,"throw",e)}f(void 0)}))},P.apply(this,arguments)}return(0,D.jsxs)(fv,{onSubmit:function(e){return P.apply(this,arguments)},children:[(0,D.jsx)(ns.Z,{children:(0,D.jsx)(qT,{loading:!C,options:C||[],placeholder:"joe@example.com, sue@example.com, …",multipleSelectionProps:O})}),(0,D.jsx)(ns.Z,{children:(0,D.jsxs)("div",{className:"pull-right",children:[(0,D.jsxs)(is.Z,{componentClass:"select",className:"privileges",bsSize:"sm",value:t,onChange:function(e){return n(e.target.value)},children:[(0,D.jsx)("option",{value:"readAndWrite",children:f("can_edit")}),(0,D.jsx)("option",{value:"readOnly",children:f("read_only")})]}),(0,D.jsx)("span",{children:"  "}),(0,D.jsx)(Ri.Z,{type:"submit",bsStyle:"primary",children:(0,D.jsx)($o.c,{i18nKey:"share"})})]})})]})}function iA(){var e=(0,Qe.$)().t;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("p",{className:"text-center",children:[(0,D.jsx)($o.c,{i18nKey:"need_to_upgrade_for_more_collabs"}),". ",e("also"),":"]}),(0,D.jsxs)("ul",{className:"list-unstyled",children:[(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"unlimited_projects"})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"collabs_per_proj",values:{collabcount:"Multiple"}})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"full_doc_history"})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"sync_to_dropbox"})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"sync_to_github"})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"compile_larger_projects"})]})]})]})}function oA(){return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"row",children:(0,D.jsx)("div",{className:"col-xs-10 col-xs-offset-1",children:(0,D.jsx)("p",{className:"text-center",children:(0,D.jsx)($o.c,{i18nKey:"need_to_upgrade_for_more_collabs_variant"})})})}),(0,D.jsxs)("div",{className:"row",children:[(0,D.jsxs)("ul",{className:"list-unstyled col-xs-7",children:[(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"unlimited_projects"})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"collabs_per_proj",values:{collabcount:"Multiple"}})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"full_doc_history"})]})]}),(0,D.jsxs)("ul",{className:"list-unstyled col-xs-5",children:[(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"sync_to_dropbox"})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"sync_to_github"})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",(0,D.jsx)($o.c,{i18nKey:"compile_larger_projects"})]})]})]}),(0,D.jsx)("br",{})]})}function aA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lA(){var e=(0,La.SE)({allowedFreeTrial:j().bool}),t=aA((0,E.useState)(!1),2),n=t[0],r=t[1],a=(0,ec.yW)({splitTestVariants:j().object}).splitTestVariants["project-share-modal-paywall"];return(0,D.jsxs)("div",{className:"default"===a?"add-collaborators-upgrade":"",children:[a&&"default"!==a?(0,D.jsx)(oA,{}):(0,D.jsx)(iA,{}),(0,D.jsx)("p",{className:"text-center row-spaced-thin",children:e.allowedFreeTrial?(0,D.jsx)(ws.Z,{buttonProps:{bsStyle:"success"},handleClick:function(){return r(!0)},source:"project-sharing"}):(0,D.jsx)(Ri.Z,{bsStyle:"primary",onClick:function(){(0,im.eR)("project-sharing"),r(!0)},children:(0,D.jsx)($o.c,{i18nKey:"upgrade"})})}),n&&(0,D.jsx)("p",{className:"small",children:(0,D.jsx)($o.c,{i18nKey:"refresh_page_after_starting_free_trial"})})]})}function cA(e){var t=e.canAddCollaborators;return(0,D.jsx)(Yg.Z,{className:"invite-controls",children:t?(0,D.jsx)(rA,{}):(0,D.jsx)(lA,{})})}function uA(e){var t=e.member;return(0,D.jsxs)(Yg.Z,{className:"project-member",children:[(0,D.jsx)(Xg.Z,{xs:7,children:t.email}),(0,D.jsx)(Xg.Z,{xs:3,children:(0,D.jsx)(ET,{privileges:t.privileges})})]})}function fA(){var e=(0,A.d2)().owner;return(0,D.jsxs)(Yg.Z,{className:"project-member",children:[(0,D.jsx)(Xg.Z,{xs:7,children:null==e?void 0:e.email}),(0,D.jsx)(Xg.Z,{xs:3,className:"text-left",children:(0,D.jsx)($o.c,{i18nKey:"owner"})})]})}function dA(){var e=(0,A.d2)().publicAccessLevel;return(0,D.jsx)(Yg.Z,{className:"public-access-level public-access-level--notice",children:(0,D.jsx)(Xg.Z,{xs:12,className:"text-center",children:(0,D.jsx)(hA,{level:e})})})}function hA(e){switch(e.level){case"private":return(0,D.jsx)($o.c,{i18nKey:"to_add_more_collaborators"});case"tokenBased":return(0,D.jsx)($o.c,{i18nKey:"to_change_access_permissions"});default:return null}}function pA(){return(0,D.jsx)("div",{className:"recaptcha-branding",children:(0,D.jsx)($o.c,{i18nKey:"recaptcha_conditions",components:{1:(0,D.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:"https://policies.google.com/privacy",children:"Privacy Policy"}),2:(0,D.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:"https://policies.google.com/terms",children:"Terms of Service"})}})})}function mA(){var e,t,n,r=(0,ec.yW)({splitTestVariants:j().object}).splitTestVariants,a=(0,A.d2)(),l=a.members,f=a.invites,d=a.features,h=(0,oe._i)().isProjectOwner,p=(0,E.useMemo)((function(){return!(!h||!d)&&(-1===d.collaborators||l.length+f.length<d.collaborators)}),[l,f,d,h]);switch(r["project-share-modal-paywall"]){case"new-copy-top":return(0,D.jsxs)(D.Fragment,{children:[h?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(cA,{canAddCollaborators:p}),(0,D.jsx)(Yg.Z,{className:"public-access-level"})]}):(0,D.jsx)(dA,{}),(0,D.jsx)(fA,{}),l.map((function(e){return h?(0,D.jsx)(hT,{member:e},e._id):(0,D.jsx)(uA,{member:e},e._id)})),f.map((function(e){return(0,D.jsx)(OT,{invite:e,isProjectOwner:h},e._id)})),h&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("br",{}),(0,D.jsx)(bT,{canAddCollaborators:p})]}),!(null!==(e=window.ExposedSettings.recaptchaDisabled)&&void 0!==e&&e.invite)&&(0,D.jsx)(pA,{})]});case"new-copy-middle":return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(fA,{}),l.map((function(e){return h?(0,D.jsx)(hT,{member:e},e._id):(0,D.jsx)(uA,{member:e},e._id)})),f.map((function(e){return(0,D.jsx)(OT,{invite:e,isProjectOwner:h},e._id)})),h?(0,D.jsx)(cA,{canAddCollaborators:p}):(0,D.jsx)(dA,{}),h&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("br",{}),(0,D.jsx)(bT,{canAddCollaborators:p})]}),!(null!==(t=window.ExposedSettings.recaptchaDisabled)&&void 0!==t&&t.invite)&&(0,D.jsx)(pA,{})]});default:return(0,D.jsxs)(D.Fragment,{children:[h&&(0,D.jsx)(bT,{canAddCollaborators:p}),(0,D.jsx)(fA,{}),l.map((function(e){return h?(0,D.jsx)(hT,{member:e},e._id):(0,D.jsx)(uA,{member:e},e._id)})),f.map((function(e){return(0,D.jsx)(OT,{invite:e,isProjectOwner:h},e._id)})),h?(0,D.jsx)(cA,{canAddCollaborators:p}):(0,D.jsx)(dA,{}),!(null!==(n=window.ExposedSettings.recaptchaDisabled)&&void 0!==n&&n.invite)&&(0,D.jsx)(pA,{})]})}}function gA(e){var t=e.show,n=e.cancel,r=e.animation,a=e.inFlight,l=e.error,f=(0,oe._i)({isRestrictedTokenMember:j().bool}).isRestrictedTokenMember;return(0,D.jsxs)(So.Z,{show:t,onHide:n,animation:r,children:[(0,D.jsx)(_o.Z.Header,{closeButton:!0,children:(0,D.jsx)(_o.Z.Title,{children:(0,D.jsx)($o.c,{i18nKey:"share_project"})})}),(0,D.jsx)(_o.Z.Body,{className:"modal-body-share",children:(0,D.jsx)(Kg.Z,{fluid:!0,children:f?(0,D.jsx)(ST,{}):(0,D.jsx)(mA,{})})}),(0,D.jsxs)(_o.Z.Footer,{className:"modal-footer-share",children:[(0,D.jsxs)("div",{className:"modal-footer-left",children:[a&&(0,D.jsx)(Ii.Z,{type:"refresh",spin:!0}),l&&(0,D.jsx)("span",{className:"text-danger error",children:(0,D.jsx)(vA,{error:l})})]}),(0,D.jsx)("div",{className:"modal-footer-right",children:(0,D.jsx)(Ri.Z,{type:"button",onClick:n,bsStyle:null,className:"btn-secondary",disabled:a,children:(0,D.jsx)($o.c,{i18nKey:"close"})})})]})]})}function vA(e){switch(e.error){case"cannot_invite_non_user":return(0,D.jsx)($o.c,{i18nKey:"cannot_invite_non_user"});case"cannot_verify_user_not_robot":return(0,D.jsx)($o.c,{i18nKey:"cannot_verify_user_not_robot"});case"cannot_invite_self":return(0,D.jsx)($o.c,{i18nKey:"cannot_invite_self"});case"invalid_email":return(0,D.jsx)($o.c,{i18nKey:"invalid_email"});case"too_many_requests":return(0,D.jsx)($o.c,{i18nKey:"too_many_requests"});default:return(0,D.jsx)($o.c,{i18nKey:"generic_something_went_wrong"})}}function yA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qT.propTypes={loading:j().bool.isRequired,options:j().array.isRequired,placeholder:j().string,multipleSelectionProps:j().shape({getSelectedItemProps:j().func.isRequired,getDropdownProps:j().func.isRequired,addSelectedItem:j().func.isRequired,removeSelectedItem:j().func.isRequired,selectedItems:j().array.isRequired}).isRequired},BT.propTypes={selected:j().bool.isRequired,item:j().shape({display:j().string.isRequired}),index:j().number.isRequired,getItemProps:j().func.isRequired},UT.propTypes={focusInput:j().func.isRequired,removeSelectedItem:j().func.isRequired,selectedItem:j().shape({display:j().string.isRequired}),getSelectedItemProps:j().func.isRequired,index:j().number.isRequired},cA.propTypes={canAddCollaborators:j().bool},uA.propTypes={member:j().shape({_id:j().string.isRequired,email:j().string.isRequired,privileges:j().string.isRequired}).isRequired},hA.propTypes={level:j().string},gA.propTypes={cancel:j().func.isRequired,show:j().bool,animation:j().bool,inFlight:j().bool,error:j().string},vA.propTypes={error:j().oneOfType([j().bool,j().string]).isRequired};var wA=(0,E.createContext)();function xA(){var e=(0,E.useContext)(wA);if(!e)throw new Error("useShareProjectContext is only available inside ShareProjectProvider");return e}wA.Provider.propTypes={value:j().shape({updateProject:j().func.isRequired,monitorRequest:j().func.isRequired,inFlight:j().bool,setInFlight:j().func,error:j().oneOfType([j().bool,j().string]),setError:j().func})};var _A=E.memo((function(e){var t=e.handleHide,n=e.show,r=e.animation,a=void 0===r||r,l=yA((0,E.useState)(!1),2),f=l[0],d=l[1],h=yA((0,E.useState)(),2),p=h[0],y=h[1],w=(0,A.d2)(A.E_),x=(0,ec.yW)({splitTestVariants:j().object}).splitTestVariants;(0,E.useEffect)((function(){n&&(0,nc.sendMB)("share-modal-opened",{splitTestVariant:x["null-test-share-modal"]})}),[x,n]),(0,E.useEffect)((function(){n&&y(void 0)}),[n]);var _=(0,E.useCallback)((function(){f||t()}),[t,f]),S=(0,E.useCallback)((function(e){y(void 0),d(!0);var t=e();return t.catch((function(e){var t,n;y((null===(t=e.data)||void 0===t?void 0:t.errorReason)||(null===(n=e.data)||void 0===n?void 0:n.error)||"generic_something_went_wrong")})),t.finally((function(){d(!1)})),t}),[]),k=(0,E.useCallback)((function(e){return Object.assign(w,e)}),[w]);return w?(0,D.jsx)(wA.Provider,{value:{updateProject:k,monitorRequest:S,inFlight:f,setInFlight:d,error:p,setError:y},children:(0,D.jsx)(gA,{animation:a,cancel:_,error:p,inFlight:f,show:n})}):null}));_A.propTypes={animation:j().bool,handleHide:j().func.isRequired,show:j().bool.isRequired};var SA=_A;x.Z.component("shareProjectModal",(0,S.react2angular)(eu.use(SA),Object.keys(SA.propTypes)));x.Z.controller("ReactShareProjectModalController",["$scope","eventTracking","ide",function(e,t,n){e.show=!1,e.handleHide=function(){e.$applyAsync((function(){e.show=!1}))},e.openShareProjectModal=function(){t.sendMBOnce("ide-open-share-modal-once"),e.$applyAsync((function(){e.show=!0}))},n.socket.on("project:tokens:changed",(function(t){null!=t.tokens&&e.$applyAsync((function(){e.project.tokens=t.tokens}))})),n.socket.on("project:membership:changed",(function(t){var n;t.members&&(n=e.project._id,(0,U.xA)("/project/".concat(n,"/members"))).then((function(t){var n=t.members;n&&e.$applyAsync((function(){e.project.members=n}))})).catch((function(){console.error("Error fetching members for project")})),t.invites&&function(e){return(0,U.xA)("/project/".concat(e,"/invites"))}(e.project._id).then((function(t){var n=t.invites;n&&e.$applyAsync((function(){e.project.invites=n}))})).catch((function(){console.error("Error fetching invites for project")}))}))}]);var kA=__webpack_require__(4790);function CA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return EA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OA(){var e=(0,D.jsxs)(D.Fragment,{children:['Overleaf has upgraded the source editor. You can still use the old editor by selecting "Source (legacy)".',(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),"Click to learn more and give feedback"]});return(0,D.jsx)(vo.Z,{id:"editor-switch",description:e,overlayProps:{placement:"bottom",delayHide:100},tooltipProps:{className:"tooltip-wide"},children:(0,D.jsx)("a",{href:"https://forms.gle/GmSs6odZRKRp3VX98",target:"_blank",rel:"noopener noreferrer",className:"info-badge",children:(0,D.jsx)("span",{className:"sr-only",children:e})})})}var jA=(0,xf.Z)("ol-showLegacySourceEditor");function $A(){var e=(0,Qe.$)().t,t=CA((0,tc.Z)("editor.newSourceEditor"),2),n=t[0],r=t[1],a=CA((0,tc.Z)("editor.showRichText"),2),l=a[0],f=a[1],d=CA((0,tc.Z)("editor.showVisual"),2),h=d[0],p=d[1],y=CA((0,tc.Z)("editor.open_doc_name"),1)[0],w=(0,qm.Z)(y),x=l||w&&h,_=(0,E.useCallback)((function(e){var t=e.target.value;switch(t){case"ace":f(!1),p(!1),r(!1);break;case"cm6":f(!1),p(!1),r(!0);break;case"rich-text":"cm6"===(0,xf.Z)("ol-richTextVariant")?(f(!1),p(!0),r(!0)):(f(!0),p(!1))}(0,nc.sendMB)("editor-switch-change",{editorType:t})}),[f,p,r]);return(0,D.jsxs)("div",{className:"editor-toggle-switch",children:[jA?(0,D.jsx)(OA,{}):null,(0,D.jsxs)("fieldset",{className:"toggle-switch",children:[(0,D.jsx)("legend",{className:"sr-only",children:"Editor mode."}),(0,D.jsx)("input",{type:"radio",name:"editor",value:"cm6",id:"editor-switch-cm6",className:"toggle-switch-input",checked:!x&&!!n,onChange:_}),(0,D.jsx)("label",{htmlFor:"editor-switch-cm6",className:"toggle-switch-label",children:(0,D.jsx)("span",{children:e("code_editor")})}),jA?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("input",{type:"radio",name:"editor",value:"ace",id:"editor-switch-ace",className:"toggle-switch-input",checked:!x&&!n,onChange:_}),(0,D.jsx)("label",{htmlFor:"editor-switch-ace",className:"toggle-switch-label",children:(0,D.jsx)("span",{children:"Source (legacy)"})})]}):null,(0,D.jsx)(TA,{checked:!!x,disabled:!w,handleChange:_})]}),!!x&&(0,D.jsx)(kA.Z,{splitTestName:"rich-text",displayOnVariants:["cm6"]})]})}var TA=function(e){var t=e.checked,n=e.disabled,r=e.handleChange,a=(0,Qe.$)().t,l=(0,D.jsxs)("span",{children:[(0,D.jsx)("input",{type:"radio",name:"editor",value:"rich-text",id:"editor-switch-rich-text",className:"toggle-switch-input",checked:t,onChange:r,disabled:n}),(0,D.jsx)("label",{htmlFor:"editor-switch-rich-text",className:"toggle-switch-label",children:(0,D.jsx)("span",{children:a("visual_editor")})})]});return n?(0,D.jsx)(vo.Z,{description:a("rich_text_is_only_available_for_tex_files"),id:"rich-text-toggle-tooltip",overlayProps:{placement:"bottom"},tooltipProps:{className:"tooltip-wide"},children:l}):l},AA=(0,E.memo)($A);function PA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return DA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return IA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function MA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}x.Z.component("editorSwitch",(0,S.react2angular)(eu.use(AA))),x.Z.component("cm6SwitchAwaySurvey",(0,S.react2angular)(eu.use((function(){var e=PA((0,E.useState)("disabled"),2),t=e[0],n=e[1],r=PA((0,tc.Z)("editor.newSourceEditor"),1)[0],a=PA((0,tc.Z)("editor.showRichText"),1)[0],l=(0,E.useRef)(a);(0,E.useEffect)((function(){Dp()||(l.current?!a&&r&&(l.current=!1):n(r||a?"disabled":"enabled"))}),[r,a]),(0,E.useEffect)((function(){var e,r=function(){setTimeout((function(){"enabled"===t&&(n("shown"),Ap.Z.setItem(Pp,!0))}),3e3)};return null===(e=window)||void 0===e||e.addEventListener("keydown",r,{once:!0}),function(){var e;return null===(e=window)||void 0===e?void 0:e.removeEventListener("keydown",r)}}),[t]);var f=(0,E.useCallback)((function(){n("disabled")}),[]),d=(0,E.useCallback)((function(){(0,nc.sendMB)("cm6-switch-away-survey"),n("disabled")}),[]);return"shown"!==t?null:(0,D.jsxs)("div",{className:"alert alert-success cm6-switch-away-survey",role:"alert",children:[(0,D.jsx)(Ri.Z,{className:"close","data-dismiss":"alert","aria-label":"Close",onClick:f,bsStyle:null,children:(0,D.jsx)("span",{"aria-hidden":"true",children:"×"})}),(0,D.jsxs)("div",{className:"warning-content",children:[(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"warning-text",children:["We noticed that you're still using the"," ",(0,D.jsx)("strong",{children:"Source (legacy)"})," editor."]}),(0,D.jsx)("div",{className:"warning-text",children:"Could you let us know why?"})]}),(0,D.jsx)("div",{style:{display:"inline-flex"},children:(0,D.jsx)("a",{href:"https://forms.gle/Ygv8gLZ4N8LepQj56",className:"btn btn-sm btn-info",target:"_blank",rel:"noreferrer",onClick:d,children:"Take survey"})})]})]})})))),x.Z.component("grammarlyWarning",(0,S.react2angular)(eu.use((function(e){var t=e.delay,n=RA((0,E.useState)(!1),2),r=n[0],a=n[1],l=RA((0,tc.Z)("editor.newSourceEditor"),1)[0],f=RA((0,tc.Z)("editor.showRichText"),1)[0],d=(0,ep.Z)(),h=Ap.Z.getItem("editor.has_dismissed_grammarly_warning");(0,E.useEffect)((function(){var e;if(!h&&d&&l&&!f){var n=window.setTimeout((function(){a(!0),e=null}),t);e=n}return function(){e&&clearTimeout(e)}}),[d,h,l,f,t]);var p=(0,E.useCallback)((function(){a(!1),Ap.Z.setItem("editor.has_dismissed_grammarly_warning",!0)}),[]);return r?(0,D.jsxs)("div",{className:"alert alert-info grammarly-warning",role:"alert",children:[(0,D.jsx)(Ri.Z,{className:"close","data-dismiss":"alert","aria-label":"Close",onClick:p,bsStyle:null,children:(0,D.jsx)("span",{"aria-hidden":"true",children:"×"})}),(0,D.jsxs)("div",{className:"warning-content",children:["A browser extension, for example Grammarly, may be slowing down Overleaf."," ",(0,D.jsx)("a",{className:"warning-link",href:"/learn/how-to/Use_Grammarly_with_Overleaf#Performance_issues",target:"_blank",children:"Find out how to avoid this"})]})]}):null})),["delay"]));var NA=(0,E.memo)((function(e){var t=e.delay,n=MA((0,E.useState)(!1),2),r=n[0],a=n[1],l=MA((0,tc.Z)("editor.newSourceEditor"),1)[0],f=Ap.Z.getItem("editor.has_dismissed_legacy_editor_warning");(0,E.useEffect)((function(){var e;return!f&&!1===l&&(e=window.setTimeout((function(){nc.sendMB("legacy-editor-warning-prompt"),a(!0)}),t)),function(){window.clearTimeout(e)}}),[f,l,t]);var d=(0,E.useCallback)((function(){a(!1),Ap.Z.setItem("editor.has_dismissed_legacy_editor_warning",!0),nc.sendMB("legacy-editor-warning-dismiss")}),[]),h=(0,E.useCallback)((function(){nc.sendMB("legacy-editor-warning-link-click")}),[]);return r?(0,D.jsxs)("div",{className:"alert alert-info legacy-editor-warning",role:"alert",children:[(0,D.jsx)(Ri.Z,{className:"close","data-dismiss":"alert","aria-label":"Close",onClick:d,bsStyle:null,children:(0,D.jsx)("span",{"aria-hidden":"true",children:"×"})}),(0,D.jsxs)("div",{className:"warning-content",children:[(0,D.jsx)("div",{children:"We're retiring our Source (legacy) editor in late May 2023."}),(0,D.jsxs)("div",{children:[(0,D.jsx)("a",{className:"warning-link",href:"https://www.overleaf.com/blog/were-retiring-our-legacy-source-editor",target:"_blank",rel:"noreferrer",onClick:h,children:"Read the blog post"})," ","to learn more and find out how to report any problems."]})]})]}):null}));function FA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}x.Z.component("legacyEditorWarning",(0,S.react2angular)(eu.use(NA),["delay"]));var BA=function(){var e=(0,ec.yW)({splitTestVariants:j().object}).splitTestVariants["documentation-on-editor"],t="";"latex-help"===e?t="LaTeX help":"documentation"===e?t="Documentation":"help-guides"===e&&(t="Help guides");var n=FA((0,E.useState)(!("default"===e)),2),r=n[0],a=n[1];return r?(0,D.jsxs)("div",{className:"documentation-btn-container",children:[(0,D.jsxs)("a",{href:"/learn",target:"_blank",rel:"noreferrer",className:"documentation-link",onClick:function(){(0,nc.sendMB)("file-tree-documentation-click")},children:[(0,D.jsx)(Ii.Z,{type:"question-circle",className:"outline-caret-icon"}),(0,D.jsx)("h4",{className:"outline-header-name",children:t})]}),(0,D.jsx)(Ri.Z,{bsStyle:"link",className:"documentation-close",children:(0,D.jsx)(Ii.Z,{type:"times",onClick:function(){(0,nc.sendMB)("file-tree-documentation-dismiss "),a(!1)},className:"outline-caret-icon "})})]}):null};x.Z.component("documentationButton",(0,S.react2angular)(eu.use(BA),[]));var UA=10;function HA(e,t){return(0,U.ty)("/project/".concat(e,"/restore_file"),{body:{version:t.deletedAtV,pathname:t.pathname}})}function zA(e){return"renamed"===e.operation}function VA(e){return"removed"===e.operation}function WA(e){return function(e){return"editable"in e}(e)?e.editable:"edited"===e.operation}function ZA(e){return(zA(e)?e.newPathname:null)||e.pathname}function GA(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return KA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KA(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function KA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function YA(e,t){for(var n,r,a=null!==(n=null==t||null===(r=t.pathname)||void 0===r?void 0:r.split("/"))&&void 0!==n?n:"",l=e,f=function(){var e=a[d];if(d===a.length-1){var n=C().clone(t);n.name=e,n.type="file",l.push(n)}else{var r,f=C().find(l,(function(t){return t.name===e}));void 0===f&&(f={name:e,type:"folder",children:[],pathname:e,editable:!1},l.push(f)),l=null!==(r=f.children)&&void 0!==r?r:[]}},d=0;d<a.length;d++)f();return e}function XA(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rootFolder",r=[],a=[],l=GA(e);try{for(l.s();!(t=l.n()).done;){var f=t.value;if("file"===f.type){var d,h,p=VA(f)?f.deletedAtV:void 0,y={pathname:null!==(d=f.pathname)&&void 0!==d?d:"",name:null!==(h=f.name)&&void 0!==h?h:"",deletedAtV:p,editable:WA(f),operation:"operation"in f?f.operation:void 0};a.push(y)}else if("folder"===f.type&&f.children){var w=XA(f.children,f.name);r.push(w)}}}catch(e){l.e(e)}finally{l.f()}return{docs:a,folders:r,name:n}}function JA(e){return function(e){if(Array.isArray(e))return tP(e)}(e)||nP(e)||eP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QA(e){return function(e){if(Array.isArray(e))return e}(e)||nP(e)||eP(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eP(e,t){if(e){if("string"==typeof e)return tP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tP(e,t):void 0}}function tP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nP(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var rP=function(e){return!0===e.isPseudoCurrentStateLabel},iP=function(e){return!rP(e)},oP=function(e,t){var n=function(e){return(0,k.orderBy)(e,["isPseudoCurrentStateLabel","version","created_at"],["asc","desc","desc"])}(e),r=function(e){return e.length&&rP(e[0])?QA(e).slice(1):e}(n),a=function(e,t){return e.length&&e[0].version===t?e:[{id:"1",isPseudoCurrentStateLabel:!0,version:t,created_at:(new Date).toISOString()}].concat(JA(e))}(r,t);return a},aP=function(e){var t=[];if(e){var n=(0,k.groupBy)(e,"version");t=Object.keys(n).map((function(e){return{version:parseInt(e,10),labels:n[e]}})),t=(0,k.orderBy)(t,["version"],["desc"])}return t},sP=function(e,t){var n,r=aP(e).map((function(e){return e.version})),a=null===(n=t.updateRange)||void 0===n?void 0:n.toV;return a&&!r.includes(a)};function lP(e){return lP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lP(e)}function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cP(Object(n),!0).forEach((function(t){fP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==lP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lP(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return hP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hP(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function hP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pP=["edited","added","renamed","removed"];function mP(e,t,n,r,a){var l=function(e,t,n,r){if(t&&!n){var a=[];if(r){var l,f=new Map,d=dP(e);try{for(d.s();!(l=d.n()).done;){var h=l.value,p=ZA(h);f.set(p,h)}}catch(e){d.e(e)}finally{d.f()}var y,w=function(e){var t=f.get(e);return!!t&&WA(t)},x=dP(r.pathnames);try{for(x.s();!(y=x.n()).done;){var _=y.value;a.push({pathname:_,editable:w(_),operation:"edited"})}}catch(e){x.e(e)}finally{x.f()}var S,k=dP(r.project_ops);try{for(k.s();!(S=k.n()).done;){var C=S.value,E=null;C.add?E={pathname:C.add.pathname,operation:"added"}:C.remove?E={pathname:C.remove.pathname,operation:"removed"}:C.rename&&(E={pathname:C.rename.newPathname,operation:"renamed"}),null!==E&&a.push(uP({editable:w(E.pathname)},E))}}catch(e){k.e(e)}finally{k.f()}}return a}var O=e.reduce((function(e,t){return"operation"in t&&e.push({pathname:t.pathname,editable:WA(t),operation:t.operation}),e}),[]);return O}(e,t,n,r),f=e.find((function(e){return e.pathname===a})),d=l.some((function(e){return e.pathname===a}));if(f&&d)return f;var h,p=dP(pP);try{var y=function(){var t=h.value,n=l.find((function(e){return e.operation===t&&e.editable}));if(n){var r=e.find((function(e){return ZA(e)===n.pathname}));if(r)return{v:r}}};for(p.s();!(h=p.n()).done;){var w=y();if("object"===lP(w))return w.v}}catch(e){p.e(e)}finally{p.f()}return f||e.find((function(e){return/main\.tex$/.test(e.pathname)}))||e.find((function(e){return/\.tex$/.test(e.pathname)}))||e[0]}var gP=__webpack_require__(80589),vP=function(e){var t=Ch.getHueForUserId(null==e?void 0:e.id)||100;return"hsl(".concat(t,", 70%, 50%)")};function yP(e){if(e.updateRange){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var l=r[0],f=r[1];return f=null!==(t=f)&&void 0!==t?t:l,e.comparing?l>=e.updateRange.fromV&&f<=e.updateRange.toV:f===e.updateRange.toV}return!1}var bP=function(e,t){return t.find((function(t){return t.toV===e}))},wP=function(e){var t=e.fromV,n=e.toV,r=e.meta.end_ts;return{fromV:t,toV:n,fromVTimestamp:r,toVTimestamp:r}};function xP(e){return xP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xP(e)}function _P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_P(Object(n),!0).forEach((function(t){kP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==xP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xP(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=OP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function EP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||OP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OP(e,t){if(e){if("string"==typeof e)return jP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jP(e,t):void 0}}function jP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var TP={updateRange:null,comparing:!1,files:[],previouslySelectedPathname:null},AP={updates:[],visibleUpdateCount:null,atEnd:!1,freeHistoryLimitHit:!1,nextBeforeTimestamp:void 0,loadingState:"loadingInitial"};function PP(){var e,t,n=(0,le.l5)().view,r=(0,La.SE)(),a=(0,A.d2)(),l=r.id,f=a._id,d=null===(e=a.owner)||void 0===e?void 0:e._id,h=Boolean((null===(t=a.features)||void 0===t?void 0:t.versioning)||r.isAdmin),p=d===l,y=EP((0,E.useState)(TP),2),w=y[0],x=y[1],_=EP((0,E.useState)(AP),2),S=_[0],C=_[1],O=EP((0,E.useState)(null),2),j=O[0],T=O[1],P=EP((0,ce.Z)("history.userPrefs.showOnlyLabels.".concat(f),!1),2),D=P[0],R=P[1],I=(0,E.useRef)(null),M=(0,gP.useErrorHandler)(),L=(0,E.useCallback)((function(){if(!I.current){var e=S.loadingState;if(!(S.atEnd||"loadingInitial"!==e&&"ready"!==e)){I.current=new AbortController;var t,n,r,a,l=I.current.signal,d=(t=function(e,t,n){var r={min_count:UA.toString()};null!=t&&(r.before=t.toString());var a=new URLSearchParams(r).toString(),l="/project/".concat(e,"/updates?").concat(a);return(0,U.xA)(l,{signal:n})}(f,S.nextBeforeTimestamp,l),n=new URLSearchParams(window.location.search),r=n.get("history-max-updates"),null===(a=n.get("history-updates-delay"))&&null===r?t:t.then((function(e){var t=e.updates,n=e.nextBeforeTimestamp,l=r?parseInt(r,10):0,f=a?parseInt(a,10):0;l>0&&t.length>l&&(n=(t=t.slice(0,l))[t.length-1].fromV);var d={updates:t,nextBeforeTimestamp:n};return f>0?new Promise((function(e){window.setTimeout((function(){return e(d)}),f)})):d}))),p=null==j?function(e,t){var n="/project/".concat(e,"/labels");return(0,U.xA)(n,{signal:t})}(f,l):null;C(SP(SP({},S),{},{loadingState:"ready"===e?"loadingUpdates":"loadingInitial"})),Promise.all([d,p]).then((function(e){var t=EP(e,2),n=t[0],r=n.updates,a=n.nextBeforeTimestamp,l=t[1],f=r.length?r[0].toV:null;l&&T(oP(l,f));var d=function(e){var t,n=new Date,r=n.setDate(n.getDate()-1),a=S.updates,l=S.freeHistoryLimitHit,f=S.visibleUpdateCount,d=a[a.length-1],p=(0,k.cloneDeep)(e),y=CP(p.entries());try{for(y.s();!(t=y.n()).done;){var w,x=EP(t.value,2),_=x[0],C=x[1],E=CP(C.meta.users);try{for(E.s();!(w=E.n()).done;){var O=w.value;O&&(O.hue=Ch.getHueForUserId(O.id))}}catch(e){E.e(e)}finally{E.f()}d&&Vp()(d.meta.end_ts).isSame(C.meta.end_ts,"day")||(C.meta.first_in_day=!0),d=C,!h&&null===f&&C.meta.end_ts<r&&(f=_+1,l=!0)}}catch(e){y.e(e)}finally{y.f()}return{updates:a.concat(p),visibleUpdateCount:f,freeHistoryLimitHit:l}}(r),p=d.updates,y=d.visibleUpdateCount,w=d.freeHistoryLimitHit,x=null==a||w||!p.length;C({updates:p,visibleUpdateCount:y,freeHistoryLimitHit:w,atEnd:x,nextBeforeTimestamp:a,loadingState:"ready"})})).catch(M).finally((function(){I.current=null}))}}}),[S,f,j,M,h]);(0,E.useEffect)((function(){return function(){I.current&&I.current.abort()}}),[]);var N=(0,E.useRef)(!1);(0,E.useEffect)((function(){if("history"===n&&!N.current)return N.current=!0,L()}),[n,L]),(0,E.useEffect)((function(){"history"!==n&&(N.current=!1,x((function(e){return SP(SP({},TP),{},{previouslySelectedPathname:e.previouslySelectedPathname})})),C(AP),T(null))}),[n]);var F=(0,E.useCallback)((function(){x(TP)}),[]),q=w.updateRange,B=q||{},H=B.fromV,z=B.toV,V=S.updates,W=void 0===z?void 0:bP(z,V),Z=EP((0,E.useState)(!1),2),G=Z[0],K=Z[1];return(0,E.useEffect)((function(){if(void 0!==H&&void 0!==z){var e=new AbortController;return K(!0),function(e,t,n,r){var a={from:t.toString(),to:n.toString()},l=new URLSearchParams(a).toString(),f="/project/".concat(e,"/filetree/diff?").concat(l);return(0,U.xA)(f,{signal:r})}(f,H,z,e.signal).then((function(e){var t=e.diff;x((function(e){var n=mP(t,z,e.comparing,W,e.previouslySelectedPathname),r=t.map((function(e){return zA(e)&&e.newPathname?function(e){return{oldPathname:e.pathname,pathname:e.newPathname,operation:e.operation,editable:e.editable}}(e):e}));return SP(SP({},e),{},{files:r,selectedFile:n,previouslySelectedPathname:n.pathname})}))})).catch(M).finally((function(){K(!1),e=null})),function(){e&&e.abort()}}}),[f,H,z,W,M]),(0,E.useEffect)((function(){V.length&&!q&&x((function(e){return SP(SP({},e),{},{updateRange:{fromV:V[0].fromV,toV:V[0].toV,fromVTimestamp:V[0].meta.end_ts,toVTimestamp:V[0].meta.end_ts},comparing:!1,files:[]})}))}),[q,V]),{value:(0,E.useMemo)((function(){return{loadingFileDiffs:G,updatesInfo:S,setUpdatesInfo:C,labels:j,setLabels:T,labelsOnly:D,setLabelsOnly:R,userHasFullFeature:h,currentUserIsOwner:p,projectId:f,selection:w,setSelection:x,fetchNextBatchOfUpdates:L,resetSelection:F}}),[G,S,C,j,T,D,R,h,p,f,w,x,L,F])}}var DP=(0,E.createContext)(void 0);function RP(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),n=PP().value;return(0,D.jsx)(DP.Provider,SP({value:n},t))}function IP(){var e=(0,E.useContext)(DP);if(!e)throw new Error("HistoryContext is only available inside HistoryProvider");return e}var MP=function(e,t){return{fromV:Math.min(e.fromV,t.fromV),toV:Math.max(e.toV,t.toV),fromVTimestamp:Math.min(e.fromVTimestamp,t.fromVTimestamp),toVTimestamp:Math.max(e.toVTimestamp,t.toVTimestamp)}};var LP=function(e){var t=e.labelsOnly,n=e.setLabelsOnly,r=(0,Qe.$)().t,a=IP(),l=a.selection,f=a.setSelection,d=a.resetSelection,h=a.updatesInfo,p=a.labels,y=function(e){if(l.comparing)d();else if(e)sP(p,l)&&d();else{var t=l.updateRange,r=null!=t&&t.toV?bP(t.toV,h.updates):null;if(t&&r&&(r.fromV!==t.fromV||r.toV!==t.toV)){var a=MP(wP(r),t);f((function(e){var t=e.previouslySelectedPathname;return{updateRange:a,comparing:!1,files:[],previouslySelectedPathname:t}}))}}n(e)};return(0,D.jsxs)("fieldset",{className:"toggle-switch",children:[(0,D.jsx)("legend",{className:"sr-only",children:r("history_view_a11y_description")}),(0,D.jsx)("input",{type:"radio",name:"labels-only-toggle-switch",checked:!t,onChange:function(){return y(!1)},className:"toggle-switch-input",id:"toggle-switch-all-history"}),(0,D.jsx)("label",{htmlFor:"toggle-switch-all-history",className:"toggle-switch-label",children:(0,D.jsx)("span",{children:r("history_view_all")})}),(0,D.jsx)("input",{type:"radio",name:"labels-only-toggle-switch",checked:t,onChange:function(){return y(!0)},className:"toggle-switch-input",id:"toggle-switch-labels"}),(0,D.jsx)("label",{htmlFor:"toggle-switch-labels",className:"toggle-switch-label",children:(0,D.jsx)("span",{children:r("history_view_labels")})})]})};var NP=function(e){var t=e.children,n=e.selected,r=e.updateRange,a=e.selectable,l=e.setSelection;return(0,D.jsx)("div",{className:se()("history-version-details clearfix",{"history-version-selected":n,"history-version-selectable":a}),"data-testid":"history-version-details","data-selected":n,onClick:a?function(e){var t=e.target;!t.closest(".dropdown")&&e.currentTarget.contains(t)&&l((function(e){var t=e.previouslySelectedPathname;return{updateRange:r,comparing:!1,files:[],previouslySelectedPathname:t}}))}:void 0,children:t})};function FP(e){return FP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FP(e)}var qP=["prepend","children","className","closeButton","onClose","closeBtnProps","size"];function BP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BP(Object(n),!0).forEach((function(t){HP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==FP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==FP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===FP(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zP(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var VP=function(e){var t=e.prepend,n=e.children,r=e.className,a=e.closeButton,l=void 0!==a&&a,f=e.onClose,d=e.closeBtnProps,h=(e.size,zP(e,qP));return(0,D.jsxs)("span",UP(UP({className:se()("badge-new",r)},h),{},{children:[t,(0,D.jsx)("span",{className:"badge-new-comment",children:n}),l&&(0,D.jsx)("button",UP(UP({type:"button",className:"badge-new-close",onClick:f},d),{},{children:(0,D.jsx)("span",{"aria-hidden":"true",children:"×"})}))]}))};var WP=function ModalError(e){var t,n,r=e.error,a=(0,Qe.$)().t;return 400===(null===(t=r.response)||void 0===t?void 0:t.status)&&null!==(n=r.data)&&void 0!==n&&n.message?(0,D.jsx)(ts.Z,{bsStyle:"danger",children:r.data.message}):(0,D.jsx)(ts.Z,{bsStyle:"danger",children:a("generic_something_went_wrong")})};function ZP(e){return ZP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZP(e)}function GP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||QP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KP(Object(n),!0).forEach((function(t){XP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ZP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ZP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ZP(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JP(e){return function(e){if(Array.isArray(e))return eD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||QP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QP(e,t){if(e){if("string"==typeof e)return eD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eD(e,t):void 0}}function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tD=function(){var e=IP(),t=e.updatesInfo,n=e.setUpdatesInfo,r=e.labels,a=e.setLabels,l=e.selection,f=e.resetSelection,d=function(e,l){var f,d=JP(t.updates),h=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=QP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}(d.entries());try{for(h.s();!(f=h.n()).done;){var p=GP(f.value,2),y=p[0],w=p[1];if(w.toV===e.version){d[y]=YP(YP({},w),{},{labels:l(w.labels)});break}}}catch(e){h.e(e)}finally{h.f()}if(n(YP(YP({},t),{},{updates:d})),r){var x=l(r.filter(iP)),_=oP(x,d[0].toV);return a(_),_}return null};return{addUpdateLabel:function(e){d(e,(function(t){return t.concat(e)}))},removeUpdateLabel:function(e){var t=d(e,(function(t){return t.filter((function(t){return t.id!==e.id}))}));sP(t,l)&&f()}}};function nD(e){return nD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nD(e)}var rD=["label","currentUserId"];function iD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iD(Object(n),!0).forEach((function(t){aD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==nD(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nD(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cD(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function uD(e){var t=e.label,n=e.currentUserId,r=cD(e,rD),a=(0,Qe.$)().t,l=sD((0,E.useState)(!1),2),f=l[0],d=l[1],h=IP().projectId,p=(0,os.Z)().signal,y=tD().removeUpdateLabel,w=ig(),x=w.isLoading,_=w.isSuccess,S=w.isError,k=w.error,C=w.reset,O=w.runAsync,j=rP(t),T=j?null:t.user_id===n,A=k;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(VP,oD(oD({prepend:(0,D.jsx)(Ii.Z,{type:"tag",fw:!0}),onClose:function(e){e.stopPropagation(),d(!0)},closeButton:Boolean(T&&!j),closeBtnProps:{"aria-label":a("delete")},className:"history-version-badge","data-testid":"history-version-badge"},r),{},{children:j?a("history_label_project_current_state"):t.comment})),!j&&(0,D.jsxs)(So.Z,{show:f,onExited:function(){_&&(j||y(t),C())},onHide:function(){return d(!1)},id:"delete-history-label",children:[(0,D.jsx)(_o.Z.Header,{children:(0,D.jsx)(_o.Z.Title,{children:a("history_delete_label")})}),(0,D.jsxs)(_o.Z.Body,{children:[S&&(0,D.jsx)(WP,{error:A}),(0,D.jsxs)("p",{children:[a("history_are_you_sure_delete_label")," ",(0,D.jsxs)("strong",{children:['"',t.comment,'"']}),"?"]})]}),(0,D.jsxs)(_o.Z.Footer,{children:[(0,D.jsx)("button",{type:"button",className:"btn btn-secondary",disabled:x,onClick:function(){return d(!1)},children:a("cancel")}),(0,D.jsx)("button",{type:"button",className:"btn btn-danger",disabled:x,onClick:function(){O(function(e,t,n){return(0,U.K$)("/project/".concat(e,"/labels/").concat(t),{signal:n})}(h,t.id,p)).then((function(){return d(!1)})).catch(console.error)},children:a(x?"history_deleting_label":"history_delete_label")})]})]})]})}var fD=function(e){var t,n,r=e.label,a=e.currentUserId,l=e.showTooltip,f=(0,Qe.$)().t,d=IP().labels,h=rP(r),p=null==d?void 0:d.find((function(e){return e.id===r.id})),y=p&&!rP(p)?p.user_display_name:f("anonymous");return l&&!h?(0,D.jsx)(vo.Z,{description:(0,D.jsxs)("div",{className:"history-version-label-tooltip",children:[(0,D.jsx)("div",{className:"history-version-label-tooltip-row",children:(0,D.jsxs)("b",{className:"history-version-label-tooltip-row-comment",children:[(0,D.jsx)(Ii.Z,{type:"tag",fw:!0}),r.comment]})}),(0,D.jsxs)("div",{className:"history-version-label-tooltip-row",children:[f("history_label_created_by")," ",y]}),(0,D.jsx)("div",{className:"history-version-label-tooltip-row",children:(0,D.jsx)("time",{children:(t=r.created_at,t?(null==n&&(n="Do MMM YYYY, h:mm a"),Vp()(t).format(n)):"N/A")})})]}),id:r.id,overlayProps:{placement:"left"},children:(0,D.jsx)(uD,{label:r,currentUserId:a})}):(0,D.jsx)(uD,{label:r,currentUserId:a})};var dD=function(e){var t=e.pathnames,n=e.projectOps,r=(0,Qe.$)().t;return(0,D.jsxs)("ol",{className:"history-version-changes",children:[t.map((function(e){return(0,D.jsxs)("li",{children:[(0,D.jsx)("div",{className:"history-version-change-action","data-testid":"history-version-change-action",children:r("file_action_edited")}),(0,D.jsx)("div",{className:"history-version-change-doc","data-testid":"history-version-change-doc",children:e})]},e)})),n.map((function(e,t){return(0,D.jsxs)("li",{children:[(0,D.jsxs)("div",{className:"history-version-change-action","data-testid":"history-version-change-action",children:[e.rename&&r("file_action_renamed"),e.add&&r("file_action_created"),e.remove&&r("file_action_deleted")]}),(0,D.jsx)("div",{className:"history-version-change-doc","data-testid":"history-version-change-doc",children:(n=e,n.rename?"".concat(n.rename.pathname," → ").concat(n.rename.newPathname):n.add?"".concat(n.add.pathname):n.remove?"".concat(n.remove.pathname):"")})]},t);var n}))]})};var hD=function(e){var t,n=e.user,r=e.currentUserId,a=(0,Qe.$)().t;return t=n?n.id===r?a("you"):"displayName"in n?n.displayName:function(e){var t=[e.first_name,e.last_name].filter((function(e){return null!=e})).join(" ").trim();return""===t&&(t=e.email.split("@")[0]),null==t||""===t?"?":t}(n):a("anonymous"),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("span",{className:"history-version-user-badge-color",style:{backgroundColor:vP(n)}}),(0,D.jsx)("span",{className:"history-version-user-badge-text",children:t})]})};var pD=function(e){var t=e.users,n=e.origin,r=e.currentUserId,a=(0,Qe.$)().t;return(0,D.jsxs)("ol",{className:"history-version-metadata-users","data-testid":"history-version-metadata-users",children:[t.map((function(e,t){return(0,D.jsx)("li",{children:(0,D.jsx)(hD,{user:e,currentUserId:r})},t)})),!t.length&&(0,D.jsxs)("li",{children:[(0,D.jsx)("span",{className:"history-version-user-badge-color",style:{backgroundColor:vP()}}),"history-resync"===(null==n?void 0:n.kind)||"history-migration"===(null==n?void 0:n.kind)?a("overleaf_history_system"):a("anonymous")]})]})};var mD=function(e){var t=e.origin,n=(0,Qe.$)().t,r=null;return"dropbox"===(null==t?void 0:t.kind)&&(r=n("history_entry_origin_dropbox")),"upload"===(null==t?void 0:t.kind)&&(r=n("history_entry_origin_upload")),"git-bridge"===(null==t?void 0:t.kind)&&(r=n("history_entry_origin_git")),"github"===(null==t?void 0:t.kind)&&(r=n("history_entry_origin_github")),r?(0,D.jsxs)("span",{className:"history-version-origin",children:["(",r,")"]}):null};function gD(e){return gD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gD(e)}var vD=["tooltipProps","children","bsClass","className","open","bsRole"];function yD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yD(Object(n),!0).forEach((function(t){wD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==gD(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gD(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xD(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _D=(0,E.forwardRef)((function(e,t){var n=e.tooltipProps,r=e.children,a=e.bsClass,l=e.className,f=e.open,d=(e.bsRole,xD(e,vD));return(0,D.jsx)(vo.Z,bD(bD({},n),{},{children:(0,D.jsx)("button",bD(bD({type:"button",ref:t,className:se()(a,"btn",l),"aria-expanded":f,"aria-haspopup":"true"},d),{},{children:r}))}))}));_D.displayName="DropdownToggleWithTooltip";var SD=_D;function kD(e){return kD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kD(e)}var CD=["children","bsRole","bsClass","className","open","pullRight","labelledBy","menuRef","onClose","rootCloseEvent"];function ED(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ED(Object(n),!0).forEach((function(t){jD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==kD(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===kD(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $D(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var TD=(0,E.forwardRef)((function(e,t){var n=e.children,r=e.bsRole,a=e.bsClass,l=e.className,f=e.open,d=e.pullRight,h=e.labelledBy,p=e.menuRef,y=e.onClose,w=e.rootCloseEvent,x=$D(e,CD);return(0,D.jsx)(aa(),{disabled:!f,onRootClose:y,event:w,children:(0,D.jsx)("ul",OD(OD({role:r,className:se()(l,a,{"dropdown-menu-right":d}),"aria-labelledby":h,ref:function(e){"function"==typeof t&&t(e),p.current=e}},x),{},{children:n}))})}));TD.displayName="DropdownMenuWithRef";var AD=TD;var PD=function(e){var t=e.id,n=e.children,r=e.parentSelector,a=e.isOpened,l=e.setIsOpened,f=(0,Qe.$)().t,d=(0,E.useRef)();return(0,E.useEffect)((function(){if(d.current&&r){var e=d.current.closest(r);if(!e)return;var t=e.getBoundingClientRect().bottom,n=d.current.getBoundingClientRect();n.top+n.height>t?(d.current.style.bottom="100%",d.current.style.top="auto"):(d.current.style.bottom="auto",d.current.style.top="100%")}})),(0,D.jsxs)(Ea,{id:"history-version-dropdown-".concat(t),pullRight:!0,open:a,onToggle:function(e){return l(e)},className:"pull-right",children:[(0,D.jsx)(SD,{bsRole:"toggle",className:"history-version-dropdown-menu-btn",tooltipProps:{id:t,description:f("more_actions"),overlayProps:{placement:"bottom",trigger:["hover"]}},children:(0,D.jsx)(Ii.Z,{type:"ellipsis-v",accessibilityLabel:f("more_actions")})}),(0,D.jsx)(AD,{bsRole:"menu",className:"history-version-dropdown-menu",menuRef:d,children:n})]})};var DD=function(e){var t=e.children,n=e.id,r=e.isOpened,a=e.setIsOpened;return(0,D.jsx)(PD,{id:n,isOpened:r,setIsOpened:a,parentSelector:"[data-history-version-list-container]",children:t})};function RD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ID(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ID(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ID(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var MD=function(e){var t=e.show,n=e.setShow,r=e.version,a=(0,Qe.$)().t,l=RD((0,E.useState)(""),2),f=l[0],d=l[1],h=ig(),p=h.isLoading,y=h.isSuccess,w=h.isError,x=h.error,_=h.data,S=h.reset,k=h.runAsync,C=IP().projectId,O=(0,os.Z)().signal,j=tD().addUpdateLabel,T=Ci(),A=T.autoFocusedRef,P=T.resetAutoFocus;(0,E.useEffect)((function(){t&&P()}),[P,t]);var R=x;return(0,D.jsxs)(So.Z,{show:t,onExited:function(){d(""),y&&_&&(j(_),S())},onHide:function(){return n(!1)},id:"add-history-label",children:[(0,D.jsx)(_o.Z.Header,{children:(0,D.jsx)(_o.Z.Title,{children:a("history_add_label")})}),(0,D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k(function(e,t,n){return(0,U.ty)("/project/".concat(e,"/labels"),{body:t,signal:n})}(C,{comment:f,version:r},O)).then((function(){return n(!1)})).catch(console.error)},children:[(0,D.jsxs)(_o.Z.Body,{children:[w&&(0,D.jsx)(WP,{error:R}),(0,D.jsx)(ns.Z,{children:(0,D.jsx)("input",{ref:A,className:"form-control",type:"text",placeholder:a("history_new_label_name"),required:!0,value:f,onChange:function(e){return d(e.target.value)}})})]}),(0,D.jsxs)(_o.Z.Footer,{children:[(0,D.jsx)("button",{type:"button",className:"btn btn-secondary",disabled:p,onClick:function(){return n(!1)},children:a("cancel")}),(0,D.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:p||!f.length,children:a(p?"history_adding_label":"history_add_label")})]})]})]})};function LD(e){return LD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LD(e)}var ND=["version","projectId","closeDropdown"];function FD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FD(Object(n),!0).forEach((function(t){BD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==LD(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==LD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===LD(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return HD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zD(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var VD=function(e){var t=e.version,n=(e.projectId,e.closeDropdown),r=zD(e,ND),a=(0,Qe.$)().t,l=UD((0,E.useState)(!1),2),f=l[0],d=l[1];return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)($a,qD(qD({onClick:function(){n(),d(!0)}},r),{},{children:[(0,D.jsx)(Ii.Z,{type:"tag",fw:!0})," ",a("history_label_this_version")]})),(0,D.jsx)(MD,{show:f,setShow:d,version:t})]})};function WD(e){return WD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WD(e)}var ZD=["version","projectId","closeDropdown"];function GD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GD(Object(n),!0).forEach((function(t){YD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==WD(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==WD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===WD(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XD(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var JD=function(e){var t=e.version,n=e.projectId,r=e.closeDropdown,a=XD(e,ZD),l=(0,Qe.$)().t;return(0,D.jsxs)($a,KD(KD({href:"/project/".concat(n,"/version/").concat(t,"/zip"),download:"".concat(n,"_v").concat(t,".zip"),rel:"noreferrer",onClick:r},a),{},{children:[(0,D.jsx)(Ii.Z,{type:"cloud-download",fw:!0})," ",l("history_download_this_version")]}))};function QD(e){return QD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QD(e)}var eR=["comparisonRange","text","closeDropdown","icon"];function tR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tR(Object(n),!0).forEach((function(t){rR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==QD(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==QD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===QD(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iR(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var oR=function(e){var t=e.comparisonRange,n=e.text,r=e.closeDropdown,a=e.icon,l=void 0===a?(0,D.jsx)(Ii.Z,{type:"exchange",fw:!0}):a,f=iR(e,eR),d=IP().setSelection;return(0,D.jsxs)($a,nR(nR({onClick:function(e){e.stopPropagation(),r(),d((function(e){var n=e.previouslySelectedPathname;return{updateRange:t,comparing:!0,files:[],previouslySelectedPathname:n}}))}},f),{},{children:[l," ",n]}))};function aR(e){return aR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aR(e)}var sR=["type","className","accessibilityLabel"];function lR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lR(Object(n),!0).forEach((function(t){uR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==aR(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==aR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===aR(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fR(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var dR=function(e){var t=e.type,n=e.className,r=e.accessibilityLabel,a=fR(e,sR),l=se()("material-symbols-rounded",n);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("span",cR(cR({className:l,"aria-hidden":"true"},a),{},{children:t})),r&&(0,D.jsx)("span",{className:"sr-only",children:r})]})};var hR=function(e){var t=e.updateRange,n=e.selected,r=e.closeDropdown,a=(0,Qe.$)().t,l=IP().selection,f=l.updateRange,d=l.comparing,h=!!f&&d&&t.toV!==f.toV&&t.fromV!==f.fromV,p=!d&&!!f&&!n,y=h&&t.toV>f.fromV,w=h&&t.fromV<f.toV;return(0,D.jsxs)(D.Fragment,{children:[p?(0,D.jsx)(oR,{comparisonRange:MP(t,f),closeDropdown:r,text:a("history_compare_to_selected_version")}):null,w?(0,D.jsx)(oR,{comparisonRange:{fromV:t.fromV,toV:f.toV,fromVTimestamp:t.fromVTimestamp,toVTimestamp:f.toVTimestamp},closeDropdown:r,text:a("history_compare_from_this_version"),icon:(0,D.jsx)(dR,{type:"line_start_circle",className:"fa-fw"})}):null,y?(0,D.jsx)(oR,{comparisonRange:{fromV:f.fromV,toV:t.toV,fromVTimestamp:f.fromVTimestamp,toVTimestamp:t.toVTimestamp},closeDropdown:r,text:a("history_compare_up_to_this_version"),icon:(0,D.jsx)(dR,{type:"line_end_circle",className:"fa-fw"})}):null]})};var pR=function(e){var t=e.projectId,n=e.update,r=e.selected,a=e.closeDropdownForItem,l=wP(n),f=(0,E.useCallback)((function(){a(n)}),[a,n]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(VD,{projectId:t,version:n.toV,closeDropdown:f}),(0,D.jsx)(JD,{projectId:t,version:n.toV,closeDropdown:f}),(0,D.jsx)(hR,{updateRange:l,selected:r,closeDropdown:f})]})};function mR(e){var t=e.update,n=e.currentUserId,r=e.projectId,a=e.selectable,l=e.faded,f=e.showDivider,d=e.selected,h=e.setSelection,p=e.dropdownOpen,y=e.dropdownActive,w=e.setActiveDropdownItem,x=e.closeDropdownForItem,_=(0,k.orderBy)(t.labels,["created_at"],["desc"]);return(0,D.jsxs)(D.Fragment,{children:[f?(0,D.jsx)("hr",{className:"history-version-divider"}):null,t.meta.first_in_day?(0,D.jsx)("time",{className:"history-version-day",children:(0,ww.K8)(t.meta.end_ts)}):null,(0,D.jsx)("div",{"data-testid":"history-version",className:se()({"history-version-faded":l}),children:(0,D.jsxs)(NP,{selected:d,setSelection:h,updateRange:wP(t),selectable:a,children:[l?null:(0,D.jsx)(DD,{id:"".concat(t.fromV,"_").concat(t.toV),isOpened:p,setIsOpened:function(e){return w({item:t,isOpened:e})},children:y?(0,D.jsx)(pR,{selected:d,update:t,projectId:r,closeDropdownForItem:x}):null}),(0,D.jsxs)("div",{className:"history-version-main-details",children:[(0,D.jsx)("time",{className:"history-version-metadata-time","data-testid":"history-version-metadata-time",children:(0,D.jsx)("b",{children:(0,ww.mr)(t.meta.end_ts,"Do MMMM, h:mm a")})}),_.map((function(e){return(0,D.jsx)(fD,{showTooltip:!0,currentUserId:n,label:e},e.id)})),(0,D.jsx)(dD,{pathnames:t.pathnames,projectOps:t.project_ops}),(0,D.jsx)(pD,{users:t.meta.users,origin:t.meta.origin,currentUserId:n}),(0,D.jsx)(mD,{origin:t.meta.origin})]})]})})]})}var gR=(0,E.memo)(mR);function vR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bR(e){var t=e.text;return(0,D.jsxs)("li",{children:[(0,D.jsx)(Ii.Z,{type:"check"})," ",t]})}function wR(){var e=(0,Qe.$)().t,t=vR((0,E.useState)(!1),2),n=t[0],r=t[1];(0,E.useEffect)((function(){nc.send("subscription-funnel","editor-click-feature","history"),(0,im.xG)("history")}),[]);var a=(0,E.useCallback)((function(){r(!0)}),[]);return(0,D.jsxs)("div",{className:"history-paywall-prompt",children:[(0,D.jsx)("h2",{className:"history-paywall-heading",children:e("premium_feature")}),(0,D.jsx)("p",{children:e("currently_seeing_only_24_hrs_history")}),(0,D.jsx)("p",{children:(0,D.jsx)("strong",{children:e("upgrade_to_get_feature",{feature:"full Project History"})})}),(0,D.jsxs)("ul",{className:"history-feature-list",children:[(0,D.jsx)(bR,{text:e("unlimited_projects")}),(0,D.jsx)(bR,{text:e("collabs_per_proj",{collabcount:"Multiple"})}),(0,D.jsx)(bR,{text:e("full_doc_history")}),(0,D.jsx)(bR,{text:e("sync_to_dropbox")}),(0,D.jsx)(bR,{text:e("sync_to_github")}),(0,D.jsx)(bR,{text:e("compile_larger_projects")})]}),(0,D.jsx)("p",{children:(0,D.jsx)(ws.Z,{source:"history",buttonProps:{bsStyle:"default",className:"btn-premium"},handleClick:a})}),n?(0,D.jsx)("p",{className:"small",children:e("refresh_page_after_starting_free_trial")}):null]})}function xR(){var e=(0,Qe.$)().t;return(0,D.jsxs)("div",{className:"history-paywall-prompt",children:[(0,D.jsx)("h2",{className:"history-paywall-heading",children:e("premium_feature")}),(0,D.jsx)("p",{children:e("currently_seeing_only_24_hrs_history")}),(0,D.jsx)("p",{children:(0,D.jsx)("strong",{children:e("ask_proj_owner_to_upgrade_for_full_history")})})]})}function _R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return SR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kR=function(){var e=_R((0,E.useState)({item:null,isOpened:!1}),2),t=e[0],n=e[1],r=(0,E.useCallback)((function(e){return n({item:e,isOpened:!1})}),[n]);return{activeDropdownItem:t,setActiveDropdownItem:n,closeDropdownForItem:r}};function CR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ER(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ER(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ER(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var OR=function(){var e=(0,La.SE)().id,t=IP(),n=t.projectId,r=t.updatesInfo,a=t.fetchNextBatchOfUpdates,l=t.currentUserIsOwner,f=t.selection,d=t.setSelection,h=r.visibleUpdateCount,p=r.updates,y=r.atEnd,w=r.loadingState,x=(0,E.useRef)(null),_=(0,E.useRef)(null),S=(0,E.useRef)(null),k=CR((0,E.useState)(!1),2),C=k[0],O=k[1],j=kR(),T=j.activeDropdownItem,A=j.setActiveDropdownItem,P=j.closeDropdownForItem,R="ready"===w&&r.freeHistoryLimitHit,I=R&&l,M=R&&!l,L=null===h?p:p.slice(0,h);return(0,E.useEffect)((function(){if("ready"===w&&!S.current){var e=x.current,t=_.current;if(e&&t)return S.current=new IntersectionObserver((function(e){O(e[0].isIntersecting)}),{root:e}),S.current.observe(t),function(){S.current&&S.current.disconnect()}}}),[w]),(0,E.useEffect)((function(){!y&&"ready"===w&&C&&a()}),[y,C,a,w]),(0,E.useEffect)((function(){"ready"!==w&&S.current&&(O(!1),S.current&&(S.current.disconnect(),S.current=null))}),[w]),(0,D.jsxs)("div",{ref:x,className:"history-all-versions-scroller",children:[(0,D.jsxs)("div",{className:"history-all-versions-container",children:[(0,D.jsx)("div",{ref:_,className:"history-versions-bottom"}),L.map((function(t,a){var l=yP(f,t.fromV,t.toV),h=t===T.item,p=Boolean(t.meta.first_in_day&&a>0),y=r.freeHistoryLimitHit&&a===L.length-1,w=!y&&(f.comparing||!l);return(0,D.jsx)(gR,{update:t,faded:y,showDivider:p,setSelection:d,selected:l,currentUserId:e,selectable:w,projectId:n,setActiveDropdownItem:A,closeDropdownForItem:P,dropdownOpen:T.isOpened&&h,dropdownActive:h},"".concat(t.fromV,"_").concat(t.toV))}))]}),I?(0,D.jsx)(wR,{}):null,M?(0,D.jsx)(xR,{}):null,"loadingInitial"===w||"loadingUpdates"===w?(0,D.jsx)(uy,{}):null]})};var jR=function(e){var t=e.projectId,n=e.version,r=e.versionTimestamp,a=e.selected,l=e.closeDropdownForItem,f=(0,E.useCallback)((function(){l(n)}),[l,n]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(JD,{projectId:t,version:n,closeDropdown:f}),(0,D.jsx)(hR,{updateRange:{fromV:n,toV:n,fromVTimestamp:r,toVTimestamp:r},selected:a,closeDropdown:f})]})};function $R(e){var t=e.version,n=e.labels,r=e.currentUserId,a=e.projectId,l=e.selected,f=e.selectable,d=e.setSelection,h=e.dropdownOpen,p=e.dropdownActive,y=e.setActiveDropdownItem,w=e.closeDropdownForItem,x=(0,Qe.$)().t,_=(0,ww.oT)(n[n.length-1].created_at),S=(0,ww.oT)(n[0].created_at),k={fromV:t,toV:t,fromVTimestamp:_,toVTimestamp:S},C=(0,E.useCallback)((function(e){y({item:t,isOpened:e})}),[y,t]);return(0,D.jsxs)(NP,{updateRange:k,selected:l,selectable:f,setSelection:d,children:[(0,D.jsx)(DD,{id:t.toString(),isOpened:h,setIsOpened:C,children:p?(0,D.jsx)(jR,{selected:l,version:t,versionTimestamp:S,projectId:a,closeDropdownForItem:w}):null}),(0,D.jsx)("div",{className:"history-version-main-details",children:n.map((function(e){return(0,D.jsxs)("div",{className:"history-version-label",children:[(0,D.jsx)(fD,{showTooltip:!1,currentUserId:r,label:e}),(0,D.jsx)("time",{className:"history-version-metadata-time","data-testid":"history-version-metadata-time",children:(0,ww.mr)(e.created_at,"Do MMMM, h:mm a")}),!rP(e)&&(0,D.jsxs)("div",{className:"history-version-saved-by",children:[(0,D.jsx)("span",{className:"history-version-saved-by-label",children:x("saved_by")}),(0,D.jsx)(hD,{user:{id:e.user_id,displayName:e.user_display_name},currentUserId:r})]})]},e.id)}))})]},t)}var TR=(0,E.memo)($R);var AR=function(){var e=(0,La.SE)().id,t=IP(),n=t.projectId,r=t.labels,a=t.selection,l=t.setSelection,f=kR(),d=f.activeDropdownItem,h=f.setActiveDropdownItem,p=f.closeDropdownForItem,y=(0,E.useMemo)((function(){return aP(r)}),[r]),w=new Set(Array.from(y.values(),(function(e){return e.version})).filter((function(e){return yP(a,e)}))),x=1===w.size;return(0,D.jsx)(D.Fragment,{children:y.map((function(t){var r=t.version,a=t.labels,f=w.has(r),y=r===d.item;return(0,D.jsx)(TR,{labels:a,version:r,currentUserId:e,projectId:n,selected:f,selectable:!(x&&f),setSelection:l,dropdownOpen:d.isOpened&&y,dropdownActive:y,setActiveDropdownItem:h,closeDropdownForItem:p},r)}))})};var PR=function(){var e=IP(),t=e.labelsOnly,n=e.setLabelsOnly;return(0,D.jsxs)("aside",{className:"change-list",children:[(0,D.jsx)("div",{className:"history-header history-toggle-switch-container",children:(0,D.jsx)(LP,{labelsOnly:t,setLabelsOnly:n})}),(0,D.jsx)("div",{className:"history-version-list-container","data-history-version-list-container":!0,children:t?(0,D.jsx)(AR,{}):(0,D.jsx)(OR,{})})]})};function DR(e){var t,n,r,a=e.selection;return(0,D.jsx)("div",{className:"history-react-toolbar-datetime",children:a.comparing?(0,D.jsx)($o.c,{i18nKey:"comparing_from_x_to_y",components:[(0,D.jsx)("time",{className:"history-react-toolbar-time"})],values:{startTime:(0,ww.mr)(null===(t=a.updateRange)||void 0===t?void 0:t.fromVTimestamp,"Do MMMM · h:mm a"),endTime:(0,ww.mr)(null===(n=a.updateRange)||void 0===n?void 0:n.toVTimestamp,"Do MMMM · h:mm a")}}):(0,D.jsx)($o.c,{i18nKey:"viewing_x",components:[(0,D.jsx)("time",{className:"history-react-toolbar-time"})],values:{endTime:(0,ww.mr)(null===(r=a.updateRange)||void 0===r?void 0:r.toVTimestamp,"Do MMMM · h:mm a")}})})}function RR(e){var t,n,r,a=e.diff,l=e.selection,f=(0,Qe.$)().t;return(0,D.jsxs)("div",{className:"history-react-toolbar-file-info",children:[f("x_changes_in",{count:null!==(t=null==a||null===(n=a.docDiff)||void 0===n||null===(r=n.highlights)||void 0===r?void 0:r.length)&&void 0!==t?t:0})," ",(0,D.jsx)("strong",{children:IR(l)})]})}function IR(e){var t,n,r,a=null==e||null===(t=e.selectedFile)||void 0===t||null===(n=t.pathname)||void 0===n?void 0:n.split("/");return a&&(r=a[a.length-1]),r}function MR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,r=Math.floor(t/n),a=0;return new Promise((function(l,f){!function d(){if(a>r)f(console.error("waiting too long, ".concat(JSON.stringify({timeout:t,pollInterval:n}))));else{a+=1;var h=e();h?l(h):setTimeout(d,n)}}()}))}function LR(e){return LR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LR(e)}function NR(){NR=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",f=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function p(e,t,n,a){var l=t&&t.prototype instanceof x?t:x,f=Object.create(l.prototype),d=new I(a||[]);return r(f,"_invoke",{value:A(e,n,d)}),f}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var w={};function x(){}function _(){}function S(){}var k={};h(k,l,(function(){return this}));var C=Object.getPrototypeOf,E=C&&C(C(M([])));E&&E!==t&&n.call(E,l)&&(k=E);var O=S.prototype=x.prototype=Object.create(k);function j(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function a(r,l,f,d){var h=y(e[r],e,l);if("throw"!==h.type){var p=h.arg,w=p.value;return w&&"object"==LR(w)&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){a("next",e,f,d)}),(function(e){a("throw",e,f,d)})):t.resolve(w).then((function(e){p.value=e,f(p)}),(function(e){return a("throw",e,f,d)}))}d(h.arg)}var l;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function A(e,t,n){var r="suspendedStart";return function(a,l){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw l;return L()}for(n.method=a,n.arg=l;;){var f=n.delegate;if(f){var d=P(f,n);if(d){if(d===w)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=y(e,t,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===w)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=y(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,w;var l=a.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function M(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return _.prototype=S,r(O,"constructor",{value:S,configurable:!0}),r(S,"constructor",{value:_,configurable:!0}),_.displayName=h(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,h(e,d,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(T.prototype),h(T.prototype,f,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,l){void 0===l&&(l=Promise);var f=new T(p(t,n,r,a),l);return e.isGeneratorFunction(n)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(O),h(O,d,"Generator"),h(O,l,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function r(n,r){return f.type="throw",f.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],f=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var d=n.call(l,"catchLoc"),h=n.call(l,"finallyLoc");if(d&&h){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(d){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var f=l?l.completion:{};return f.type=e,f.arg=t,l?(this.method="next",this.next=l.finallyLoc,w):this.complete(f)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;R(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},e}function FR(e,t,n,r,a,l,f){try{var d=e[l](f),h=d.value}catch(e){return void n(e)}d.done?t(h):Promise.resolve(h).then(r,a)}function qR(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function f(e){FR(l,r,a,f,d,"next",e)}function d(e){FR(l,r,a,f,d,"throw",e)}f(void 0)}))}}function BR(e){var t=e.selection,n=(0,Qe.$)().t,r=function(){var e=ig(),t=e.isLoading,n=e.runAsync,r=IP().projectId,a=(0,Tl.I)(),l=(0,le.l5)().setView,f=(0,gP.useErrorHandler)(),d=function(){var e=qR(NR().mark((function e(t){var d;return NR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((d=t.selectedFile)&&d.pathname&&VA(d))){e.next=5;break}return(0,nc.sendMB)("history-v2-restore-deleted"),e.next=5,n(HA(r,d).then(function(){var e=qR(NR().mark((function e(t){var n,r,f;return NR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.type,e.next=3,MR((function(){return a.fileTreeManager.findEntityById(n)}),3e3);case 3:f=e.sent,"doc"===r?a.editorManager.openDoc(f):a.binaryFilesManager.openFile(f),l("editor");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(f));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{restoreDeletedFile:d,isLoading:t}}(),a=r.restoreDeletedFile,l=r.isLoading;return(0,D.jsx)(Ri.Z,{className:"btn-secondary history-react-toolbar-restore-file-button",bsSize:"xs",bsStyle:null,onClick:function(){return a(t)},disabled:l,children:l?"".concat(n("restoring"),"…"):n("restore_file")})}function UR(e){var t,n=e.diff,r=e.selection,a=r.selectedFile&&VA(r.selectedFile);return(0,D.jsxs)("div",{className:"history-react-toolbar",children:[(0,D.jsx)(kA.Z,{splitTestName:"history-view",displayOnVariants:["react"]}),(0,D.jsx)(DR,{selection:r}),null!==(t=r.selectedFile)&&void 0!==t&&t.pathname?(0,D.jsx)(RR,{diff:n,selection:r}):null,a?(0,D.jsx)(BR,{selection:r}):null]})}var HR,zR=__webpack_require__(1727),VR=__webpack_require__(11445),WR=__webpack_require__(40807);function ZR(e){return ZR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZR(e)}function GR(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KR(e,t)}function KR(e,t){return KR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},KR(e,t)}function YR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=JR(e);if(t){var a=JR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ZR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return XR(e)}(this,n)}}function XR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JR(e){return JR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JR(e)}function QR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rI(r.key),r)}}function tI(e,t,n){return t&&eI(e.prototype,t),n&&eI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nI(e,t,n){return(t=rI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rI(e){var t=function(e,t){if("object"!==ZR(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ZR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ZR(t)?t:String(t)}function iI(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return oI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oI(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function oI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var aI=zR.Py.define(),sI="ol-cm-addition-marker",lI="ol-cm-deletion-marker";function cI(e,t){var n,r=new Map,a=iI(e);try{for(a.s();!(n=a.n()).done;)for(var l=n.value,f=t.doc.lineAt(l.range.from).number,d=t.doc.lineAt(l.range.to).number,h=f;h<=d;++h){var p=r.get(h);if(p)p.highlights.push(l),p.changeType!==l.type&&(p.changeType="mixed");else{var y=t.doc.line(h);r.set(h,{line:y,highlights:[l],empty:0===y.length,changeType:l.type})}}}catch(e){a.e(e)}finally{a.f()}return r}var uI=VR.tk.baseTheme((nI(HR={},"."+sI,{paddingTop:"var(--half-leading)",paddingBottom:"var(--half-leading)",backgroundColor:"hsl(var(--hue), 70%, 85%)"}),nI(HR,"."+lI,{textDecoration:"line-through",color:"hsl(var(--hue), 70%, 40%)"}),nI(HR,".cm-tooltip",{backgroundColor:"transparent",borderWidth:0,pointerEvents:"none"}),nI(HR,".ol-cm-highlight-tooltip",{backgroundColor:"hsl(var(--hue), 70%, 50%)",borderRadius:"4px",padding:"4px",color:"#fff"}),nI(HR,".ol-cm-empty-line-addition-marker",{padding:"var(--half-leading) 2px"}),nI(HR,".ol-cm-changed-line",{backgroundColor:"rgba(0, 0, 0, 0.03)"}),nI(HR,".ol-cm-change-gutter",{width:"3px",paddingLeft:"1px"}),nI(HR,".ol-cm-changed-line-gutter",{backgroundColor:"hsl(var(--hue), 70%, 40%)",height:"100%"}),nI(HR,".ol-cm-highlighted-line-gutter",{backgroundColor:"rgba(0, 0, 0, 0.03)"}),HR));var fI=zR.Py.define(),dI=zR.QQ.define({create:function(){return null},update:function(e,t){var n,r=iI(t.effects);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.is(fI))return a.value}}catch(e){r.e(e)}finally{r.f()}return e},provide:function(e){return VR.hJ.from(e)}});var hI=VR.lg.fromClass(function(){function e(t){QR(this,e),nI(this,"lastTooltipPos",null),this.view=t}return tI(e,[{key:"setHighlightTooltip",value:function(e){this.view.dispatch({effects:fI.of(e)})}},{key:"setTooltipFromEvent",value:function(e){var t=this.view.posAtCoords({x:e.clientX,y:e.clientY});if(t!==this.lastTooltipPos){var n=null;if(null!==t){var r=function(e,t){return e.field(kI).highlights.find((function(e){var n=e.range,r=n.from,a=n.to;return t>=r&&t<=a}))}(this.view.state,t);r&&(n=function(e,t){return{pos:e,above:!0,create:function(){var e=document.createElement("div");return e.classList.add("ol-cm-highlight-tooltip"),e.style.setProperty("--hue",t.hue.toString()),e.textContent=t.label,{dom:e}}}}(t,r))}this.setHighlightTooltip(n),this.lastTooltipPos=t}}},{key:"handleMouseMove",value:function(e){this.setTooltipFromEvent(e)}},{key:"startHover",value:function(e,t){var n=this,r=this.handleMouseMove.bind(this);this.view.contentDOM.addEventListener("mousemove",r);t.addEventListener("mouseleave",(function e(){n.setHighlightTooltip(null),n.lastTooltipPos=null,n.view.contentDOM.removeEventListener("mousemove",r),t.removeEventListener("mouseleave",e)})),this.setTooltipFromEvent(e)}}]),e}(),{eventHandlers:{mouseover:function(e){var t=e.target,n=t.classList;(n.contains(sI)||n.contains(lI)||n.contains("cm-line")&&t.querySelector(".ol-cm-empty-line-addition-marker, .ol-cm-empty-line-deletion-marker"))&&this.startHover(e,t)}},provide:function(){return dI}}),pI=function(e){GR(n,e);var t=YR(n);function n(e){var r;return QR(this,n),(r=t.call(this)).hue=e,r}return tI(n,[{key:"toDOM",value:function(e){var t=document.createElement("span");return t.classList.add("ol-cm-empty-line-addition-marker",sI),t.style.setProperty("--hue",this.hue.toString()),t}}]),n}(VR.l9),mI=function(e){GR(n,e);var t=YR(n);function n(e){var r;return QR(this,n),(r=t.call(this)).hue=e,r}return tI(n,[{key:"toDOM",value:function(e){var t=document.createElement("span");return t.classList.add("ol-cm-empty-line-deletion-marker",lI),t.style.setProperty("--hue",this.hue.toString()),t.textContent=" ",t}}]),n}(VR.l9);function gI(e){return zR.Xs.of(e.map((function(e){return function(e){var t="addition"===e.type?sI:lI,n=e.range,r=n.from,a=n.to;return VR.p.mark({class:t,attributes:{style:"--hue: ".concat(e.hue)}}).range(r,a)}(e)})))}function vI(e){var t,n=[],r=iI(e.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;if(0===a.line.length){var l=a.highlights[0],f="addition"===l.type?new pI(l.hue):new mI(l.hue);n.push(VR.p.widget({widget:f}).range(a.line.from))}}}catch(e){r.e(e)}finally{r.f()}return zR.Xs.of(n)}var yI=function(e){GR(n,e);var t=YR(n);function n(e){var r;return QR(this,n),(r=t.call(this)).hue=e,r}return tI(n,[{key:"toDOM",value:function(e){var t=document.createElement("div");return t.className="ol-cm-changed-line-gutter",t.style.setProperty("--hue",this.hue.toString()),t}}]),n}(VR.SJ);function bI(e){var t,n=[],r=iI(e.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(new yI(a.highlights[0].hue).range(a.line.from))}}catch(e){r.e(e)}finally{r.f()}return zR.Xs.of(n)}var wI=VR.p.line({class:"ol-cm-changed-line"});function xI(e){var t,n=[],r=iI(e.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(wI.range(a.line.from))}}catch(e){r.e(e)}finally{r.f()}return zR.Xs.of(n)}var _I=new(function(e){GR(n,e);var t=YR(n);function n(){var e;QR(this,n);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return nI(XR(e=t.call.apply(t,[this].concat(a))),"elementClass","ol-cm-highlighted-line-gutter"),e}return tI(n)}(VR.SJ));function SI(e){var t,n=[],r=iI(e.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(_I.range(a.line.from))}}catch(e){r.e(e)}finally{r.f()}return zR.Xs.of(n,!0)}var kI=zR.QQ.define({create:function(){return{highlights:[],highlightMarkers:VR.p.none,emptyLineHighlightMarkers:VR.p.none,lineHighlights:VR.p.none,gutterMarkers:zR.Xs.empty,gutterHighlights:zR.Xs.empty}},update:function(e,t){var n,r=iI(t.effects);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.is(aI)){var l=a.value,f=cI(l,t.state);return{highlights:l,highlightMarkers:gI(l),emptyLineHighlightMarkers:vI(f),lineHighlights:xI(f),gutterMarkers:bI(f),gutterHighlights:SI(f)}}}}catch(e){r.e(e)}finally{r.f()}return e},provide:function(e){return[VR.tk.decorations.from(e,(function(e){return e.highlightMarkers})),VR.tk.decorations.from(e,(function(e){return e.emptyLineHighlightMarkers})),VR.tk.decorations.from(e,(function(e){return e.lineHighlights})),uI,hI]}}),CI=(0,VR.v5)({class:"ol-cm-change-gutter",markers:function(e){return e.state.field(kI).gutterMarkers},renderEmptyElements:!1}),EI=VR.v7.from(kI,(function(e){return e.gutterHighlights}));var OI=new zR.F6,jI=function(e){return[OI.of(AI(e))]},$I={compact:1.33,normal:1.6,wide:2},TI={monaco:["Monaco","Menlo","Ubuntu Mono","Consolas","monospace"],lucida:["Lucida Console","Source Code Pro","monospace"]},AI=function(e){var t,n=e.fontSize,r=void 0===n?12:n,a=e.fontFamily,l=void 0===a?"monaco":a,f=e.lineHeight,d=void 0===f?"normal":f,h=null===(t=TI[l])||void 0===t?void 0:t.join(", ");return[VR.tk.theme({"&.cm-editor":{"--font-size":"".concat(r,"px"),"--source-font-family":h,"--line-height":$I[d]},".cm-content":{fontSize:"var(--font-size)",fontFamily:"var(--source-font-family)",lineHeight:"var(--line-height)",color:"#000"},".cm-gutters":{fontSize:"var(--font-size)",lineHeight:"var(--line-height)"},".cm-tooltip":{"--font-size":"".concat(r,"px"),"--source-font-family":h,fontSize:"var(--font-size)"},".cm-lineNumbers":{fontFamily:"var(--source-font-family)"}})]},PI=__webpack_require__(77120),DI=__webpack_require__(31931);function RI(e){return RI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RI(e)}function II(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,l=void 0,l=function(e,t){if("object"!==RI(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==RI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===RI(l)?l:String(l)),r)}var a,l}function MI(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return LI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LI(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function LI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var NI=zR.Py.define(),FI=(0,DI.V9)(NI);var qI=VR.lg.fromClass(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t}var t,n,r;return t=e,n=[{key:"dispatchIfChanged",value:function(){var e=this.view.state.field(BI),t=function(e){var t,n,r,a=[],l=[],f=(null===(t=e.state.field(kI))||void 0===t?void 0:t.highlights)||[];if(0===f.length)return{before:0,after:0};var d,h=function(e){var t=e.scrollDOM.getBoundingClientRect(),n=t.top,r=t.bottom,a=e.lineBlockAtHeight(n-e.documentTop),l=e.lineBlockAtHeight(r-e.documentTop);return{from:a.from,to:l.to}}(e),p=h.from,y=h.to,w=MI(f);try{for(w.s();!(d=w.n()).done;){var x=d.value;x.range.to<=p?a.push(x):x.range.from>=y&&l.push(x)}}catch(e){w.e(e)}finally{w.f()}var _=a.length,S=l.length;return _>0&&(r=a[a.length-1]),S>0&&(n=l[0]),{before:_,after:S,previous:r,next:n}}(this.view);(0,k.isEqual)(e,t)||this.view.dispatch({effects:NI.of(t)})}},{key:"update",value:function(e){var t=this;FI(e)||window.setTimeout((function(){return t.dispatchIfChanged()}))}}],n&&II(t.prototype,n),r&&II(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),{eventHandlers:{scroll:(0,k.throttle)((function(e,t){var n;null===(n=t.plugin(qI))||void 0===n||n.dispatchIfChanged()}),120,{trailing:!0})}}),BI=zR.QQ.define({create:function(){return{before:0,visible:0,after:0}},update:function(e,t){var n,r=MI(t.effects);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.is(NI))return a.value}}catch(e){r.e(e)}finally{r.f()}return e},provide:function(){return[qI]}});function UI(e,t){e.dispatch({effects:VR.tk.scrollIntoView(zR.jT.range(t.range.from,t.range.to),{y:"center"})})}var HI=__webpack_require__(8224);function zI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return VI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WI(e){return[VR.tk.editable.of(!1),VR.tk.contentAttributes.of({tabindex:"0"}),(0,VR.Eu)(),VR.tk.lineWrapping,PI.c.of("    "),(0,WR.C)({hideFirstIndent:!0,highlightActiveBlock:!1}),[kI,CI,EI],BI,jI(e),(0,HI.K)(!1)]}var ZI=function(e){var t=e.doc,n=e.highlights,r=zI((0,tc.Z)("settings.fontFamily"),1)[0],a=zI((0,tc.Z)("settings.fontSize"),1)[0],l=zI((0,tc.Z)("settings.lineHeight"),1)[0],f=(0,Ra.Z)(),d=(0,Qe.$)().t,h=zI((0,E.useState)((function(){return zR.yy.create({doc:t,extensions:WI({fontSize:a,fontFamily:r,lineHeight:l})})})),2),p=h[0],y=h[1],w=zI((0,E.useState)((function(){return new VR.tk({state:p,dispatch:function(e){w.update([e]),f.current&&y(w.state)}})})),1)[0],x=p.field(BI),_=(0,E.useCallback)((function(e){e&&e.appendChild(w.dom)}),[w]),S=(0,E.useCallback)((function(){x.previous&&UI(w,x.previous)}),[x.previous,w]),k=(0,E.useCallback)((function(){x.next&&UI(w,x.next)}),[x.next,w]),C=x.before,O=x.after;return(0,E.useEffect)((function(){var e=[aI.of(n)];if(n.length>0){var r=n[0].range,a=r.from,l=r.to;e.push(VR.tk.scrollIntoView(zR.jT.range(a,l),{y:"center"}))}w.dispatch({changes:{from:0,to:w.state.doc.length,insert:t},effects:e})}),[t,n,w]),(0,E.useEffect)((function(){w.dispatch(function(e){return{effects:OI.reconfigure(AI(e))}}({fontSize:a,fontFamily:r,lineHeight:l}))}),[w,a,r,l]),(0,D.jsxs)("div",{className:"document-diff-container",children:[(0,D.jsx)("div",{ref:_,className:"cm-viewer-container"}),C>0?(0,D.jsxs)("button",{className:"btn btn-secondary previous-highlight-button",onClick:S,children:[(0,D.jsx)(Ii.Z,{type:"arrow-up"})," ",d("n_more_updates_above",{count:C})]}):null,O>0?(0,D.jsxs)("button",{className:"btn btn-secondary next-highlight-button",onClick:k,children:[(0,D.jsx)(Ii.Z,{type:"arrow-down"})," ",d("n_more_updates_below",{count:O})]}):null]})};var GI=function(e){var t=e.diff,n=e.isLoading,r=(0,Qe.$)().t;if(n)return(0,D.jsx)(uy,{});if(!t)return(0,D.jsx)("div",{className:"history-content",children:"No document"});if(t.binary)return(0,D.jsx)("div",{className:"history-content",children:(0,D.jsx)("div",{className:"alert alert-info",children:r("binary_history_error")})});if(t.docDiff){var a=t.docDiff,l=a.doc,f=a.highlights;return(0,D.jsx)(ZI,{doc:l,highlights:f})}return null};function KI(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return YI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YI(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,f=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return f=e.done,e},e:function(e){d=!0,l=e},f:function(){try{f||null==n.return||n.return()}finally{if(d)throw l}}}}function YI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XI(e,t){var n,r=0,a=[],l="",f=KI(e);try{for(f.s();!(n=f.n()).done;){var d=n.value,h=d.u||d.i||d.d||"",p=r,y=(l+=h).length;r=y;var w={from:p,to:y},x="string"==typeof d.i,_="string"==typeof d.d;if(x||_){var S,k=d.meta;if(!k)throw new Error("No meta found");var C=null===(S=k.users)||void 0===S?void 0:S[0],E=Wp(C),O=Vp()(k.end_ts).format("Do MMM YYYY, h:mm a");x?a.push({type:"addition",label:t("added_by_on",{name:E,date:O}),range:w,hue:Ch.getHueForUserId(null==C?void 0:C.id)}):_&&a.push({type:"deletion",label:t("deleted_by_on",{name:E,date:O}),range:w,hue:Ch.getHueForUserId(null==C?void 0:C.id)})}}}catch(e){f.e(e)}finally{f.f()}return{doc:l,highlights:a}}var JI=function(){var e,t=IP(),n=t.selection,r=t.projectId,a=t.loadingFileDiffs,l=ig(),f=l.isLoading,d=l.data,h=l.runAsync,p=(0,Qe.$)().t,y=n.updateRange,w=n.selectedFile,x=(0,gP.useErrorHandler)();return(0,E.useEffect)((function(){if(y&&null!=w&&w.pathname&&!a){var e=y.fromV,t=y.toV,n=new AbortController;return h(function(e,t,n,r,a){var l={from:t.toString(),to:n.toString(),pathname:r},f=new URLSearchParams(l).toString(),d="/project/".concat(e,"/diff?").concat(f);return(0,U.xA)(d,{signal:a})}(r,e,t,w.pathname,n.signal)).catch(x).finally((function(){n=null})),function(){n&&n.abort()}}}),[r,h,y,w,a,x]),e=null!=d&&d.diff?"binary"in d.diff?{binary:!0}:{binary:!1,docDiff:XI(d.diff,p)}:null,(0,D.jsxs)("div",{className:"doc-panel",children:[(0,D.jsx)("div",{className:"history-header toolbar-container",children:(0,D.jsx)(UR,{diff:e,selection:n})}),(0,D.jsx)("div",{className:"doc-container",children:(0,D.jsx)(GI,{diff:e,isLoading:f||a})})]})};function QI(e){var t=e.name,n=e.operation,r=e.icons;return(0,D.jsxs)("div",{className:"history-file-tree-item",role:"presentation",children:[r,(0,D.jsxs)("div",{className:"history-file-tree-item-name-wrapper",children:[(0,D.jsx)("div",{className:se()("history-file-tree-item-name",{strikethrough:"removed"===n}),children:t}),n?(0,D.jsx)(VP,{className:"history-file-tree-item-badge",size:"sm",children:n}):null]})]})}function eM(e){var t=e.file,n=e.name,r=e.selected,a=e.onClick,l=e.onKeyDown;return(0,D.jsx)("li",{role:"treeitem",className:se()({selected:r}),onClick:function(){return a(t)},onKeyDown:function(e){return l(t,e)},"aria-selected":r,"aria-label":n,tabIndex:0,children:(0,D.jsx)(QI,{name:n,operation:"operation"in t?t.operation:void 0,icons:(0,D.jsx)(Ii.Z,{type:Hi(n),fw:!0,className:"spaced file-tree-icon"})})})}var tM=(0,E.memo)(eM);function nM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,f,d=[],h=!0,p=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=l.call(n)).done)&&(d.push(r.value),d.length!==t);h=!0);}catch(e){p=!0,a=e}finally{try{if(!h&&null!=n.return&&(f=n.return(),Object(f)!==f))return}finally{if(p)throw a}}return d}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rM(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iM(e){var t=e.name,n=e.folders,r=e.docs,a=(0,Qe.$)().t,l=nM((0,E.useState)(!0),2),f=l[0],d=l[1],h=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("button",{onClick:function(){return d(!f)},"aria-label":a(f?"collapse":"expand"),className:"history-file-tree-folder-button",children:(0,D.jsx)(Ii.Z,{type:f?"angle-down":"angle-right",fw:!0,className:"file-tree-expand-icon"})}),(0,D.jsx)(Ii.Z,{type:f?"folder-open":"folder",fw:!0,className:"file-tree-folder-icon"})]});return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("li",{role:"treeitem","aria-expanded":f,"aria-label":t,tabIndex:0,onClick:function(){return d(!f)},onKeyDown:function(){return d(!f)},children:(0,D.jsx)(QI,{name:t,icons:h})}),f?(0,D.jsx)(uM,{folders:n,docs:r}):null]})}var oM=(0,E.memo)(iM);function aM(e){return aM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aM(e)}function sM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sM(Object(n),!0).forEach((function(t){cM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cM(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==aM(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==aM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===aM(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uM=function(e){var t=e.folders,n=e.docs,r=e.rootClassName,a=e.children,l=IP(),f=l.selection,d=l.setSelection,h=(0,E.useCallback)((function(e){d((function(t){var n;return e.pathname!==(null===(n=t.selectedFile)||void 0===n?void 0:n.pathname)?lM(lM({},t),{},{selectedFile:e,previouslySelectedPathname:e.pathname}):t}))}),[d]),p=(0,E.useCallback)((function(e){h(e)}),[h]),y=(0,E.useCallback)((function(e,t){"Enter"!==t.key&&" "!==t.key||h(e)}),[h]);return(0,D.jsxs)("ul",{className:se()("list-unstyled",r),role:"tree",children:[t.map((function(e){var t;return(0,D.jsx)(oM,{name:e.name,folders:e.folders,docs:null!==(t=e.docs)&&void 0!==t?t:[]},e.name)})),n.map((function(e){return(0,D.jsx)(tM,{name:e.name,file:e,selected:!!f.selectedFile&&ZA(f.selectedFile)===e.pathname,onClick:p,onKeyDown:y},e.pathname)})),a]})};function fM(){var e,t=IP().selection,n=(0,E.useMemo)((function(){return(0,k.reduce)(t.files,YA,[])}),[t.files]),r=(0,E.useMemo)((function(){return(0,k.orderBy)(n,["-type","operation","name"])}),[n]),a=(0,E.useMemo)((function(){return XA(r)}),[r]);return(0,D.jsx)(uM,{folders:a.folders,docs:null!==(e=a.docs)&&void 0!==e?e:[],rootClassName:"history-file-tree-list",children:(0,D.jsx)("li",{className:"bottom-buffer"})})}var dM=document.getElementById("history-file-tree");function hM(){var e,t=(0,le.l5)().view,n=IP().updatesInfo;return"history"!==t?null:(e="loadingInitial"===n.loadingState?(0,D.jsx)(uy,{}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(JI,{}),(0,D.jsx)(PR,{})]}),(0,D.jsxs)(D.Fragment,{children:[dM?(0,Pi.createPortal)((0,D.jsx)(fM,{}),dM):null,(0,D.jsx)("div",{className:"history-react",children:e})]}))}var pM=(0,T.Z)((function(){return(0,D.jsx)(RP,{children:(0,D.jsx)(hM,{})})}),VS.l);x.Z.component("historyRoot",(0,S.react2angular)(eu.use(pM))),x.Z.component("historyFileTreeReact",(0,S.react2angular)(eu.use(fM)));var mM=__webpack_require__(43363);x.Z.controller("IdeController",["$scope","$timeout","ide","localStorage","eventTracking","metadata","$q","CobrandingDataService","$window",function(e,t,n,r,a,l,f,d,h){var p,y,w;e.$originalApply=e.$apply,e.$apply=function(e){null==e&&(e=function(){});var t=this.$root.$$phase;return"$apply"===t||"$digest"===t?e():this.$originalApply(e)},e.state={loading:!0,load_progress:40,error:null},e.ui={leftMenuShown:!1,view:"editor",chatOpen:!1,pdfLayout:"sideBySide",pdfHidden:!1,pdfWidth:0,reviewPanelOpen:r("ui.reviewPanelOpen.".concat(window.project_id)),miniReviewPanelVisible:!1,chatResizerSizeOpen:7,chatResizerSizeClosed:0},e.user=window.user,e.settings=window.userSettings,e.anonymous=window.anonymous,e.isTokenMember=window.isTokenMember,e.isRestrictedTokenMember=window.isRestrictedTokenMember,e.cobranding={isProjectCobranded:d.isProjectCobranded(),logoImgUrl:d.getLogoImgUrl(),submitBtnHtml:d.getSubmitBtnHtml(),brandVariationName:d.getBrandVariationName(),brandVariationHomeUrl:d.getBrandVariationHomeUrl()},e.chat={},n.toggleReviewPanel=e.toggleReviewPanel=function(){e.$applyAsync((function(){e.project.features.trackChangesVisible&&(e.ui.reviewPanelOpen=!e.ui.reviewPanelOpen,a.sendMB("rp-toggle-panel",{value:e.ui.reviewPanelOpen}))}))},e.$watch("ui.reviewPanelOpen",(function(e){if(null!=e)return r("ui.reviewPanelOpen.".concat(window.project_id),e)})),e.$on("layout:pdf:resize",(function(t,n){return e.ui.pdfHidden=n.east.initClosed,e.ui.pdfWidth=n.east.size})),e.$watch("ui.view",(function(t,n){t!==n&&e.$broadcast("layout:flat-screen:toggle"),null!=t&&"editor"!==t&&"pdf"!==t&&a.sendMBOnce("ide-open-view-".concat(t,"-once"))})),e.$watch("ui.chatOpen",(function(e){e&&a.sendMBOnce("ide-open-chat-once")})),e.$watch("ui.leftMenuShown",(function(e){e&&a.sendMBOnce("ide-open-left-menu-once")})),e.trackHover=function(e){a.sendMBOnce("ide-hover-".concat(e,"-once"))},window._ide=n,n.validFileRegex="^[^*/]*$";var x=window.location&&window.location.search&&window.location.search.match(/ws=fallback/);n.wsUrl=x?null:window.sharelatex.wsUrl||null,n.project_id=e.project_id=window.project_id,n.$scope=e,n.referencesSearchManager=new xm(n,e),n.loadingManager=new Ju(e),n.connectionManager=new $f(n,e),n.fileTreeManager=new su(n,e),n.editorManager=new qp(n,e,r,a),n.onlineUsersManager=new Hp(n,e),n.historyManager=new cm(n,e,r),n.permissionsManager=new hm(n,e),n.binaryFilesManager=new gm(n,e),n.metadataManager=new km(n,e,l),n.outlineManager=new zm(n,e);var _=!1;e.$on("project:joined",(function(){if(!_)return _=!0,vM(null!=e?e.project:void 0,(function(e){return e.deletedByExternalDataSource}))&&n.showGenericMessageModal("Project Renamed or Deleted","This project has either been renamed or deleted by an external data source such as Dropbox.\nWe don't want to delete your data on Overleaf, so this project still contains your history and collaborators.\nIf the project has been renamed please look in your project list for a new project under the new name."),t((function(){if(e.permissions.write)return n.metadataManager.loadProjectMetaFromServer(),!0}),200)}));var S=!1;e.$on("doc:opened",(function(){if(!S)return e.$broadcast("ide:loaded"),S=!0})),n.editingSessionHeartbeat=function(){a.editingSessionHeartbeat((function(){var e=n.editorManager.getEditorType(),t={editorType:e};if("cm6"===e||"cm6-rich-text"===e){var r=(0,mM.N)();if(r.numberOfEntries>0)for(var a=0,l=["Max","Mean","Median","NinetyFifthPercentile","DocLength","NumberOfEntries","MaxUserEventsBetweenDomUpdates","Grammarly","SessionLength","Memory","Lags","NonLags","LongestLag","MeanLagsPerMeasure","MeanKeypressesPerMeasure","MeanKeypressPaint","LongTasks","Release"];a<l.length;a++){var f=l[a],d=r[f.charAt(0).toLowerCase()+f.slice(1)];null!==d&&(t["cm6Perf"+f]=d)}}else if("ace"===e){var h=gp();if(h.numberOfEntries>0)for(var p=0,y=["NumberOfEntries","MeanKeypressPaint","Grammarly","SessionLength","Memory","Lags","NonLags","LongestLag","MeanLagsPerMeasure","MeanKeypressesPerMeasure","Release"];p<y.length;p++){var w=y[p],x=h[w.charAt(0).toLowerCase()+w.slice(1)];null!==x&&(t["acePerf"+w]=x)}}return t}))},e.$on("cursor:editor:update",(function(){n.editingSessionHeartbeat()})),e.$on("scroll:editor:update",(function(){n.editingSessionHeartbeat()})),angular.element(h).on("click",n.editingSessionHeartbeat),e.$on("$destroy",(function(){return angular.element(h).off("click",n.editingSessionHeartbeat)}));var k=["ambiance","chaos","clouds_midnight","cobalt","idle_fingers","merbivore","merbivore_soft","mono_industrial","monokai","pastel_on_dark","solarized_dark","terminal","tomorrow_night","tomorrow_night_blue","tomorrow_night_bright","tomorrow_night_eighties","twilight","vibrant_ink"];e.darkTheme=!1,e.$watch("settings.editorTheme",(function(t){return Array.from(k).includes(t)?e.darkTheme=!0:e.darkTheme=!1})),n.localStorage=r,n.browserIsSafari=!1,e.switchToFlatLayout=function(t){return e.ui.pdfLayout="flat",e.ui.view=t,n.localStorage("pdf.layout","flat")},e.switchToSideBySideLayout=function(t){return e.ui.pdfLayout="sideBySide",e.ui.view=t,r("pdf.layout","split")},(y=r("pdf.layout"))?("split"===y&&e.switchToSideBySideLayout(),"flat"===y&&e.switchToFlatLayout()):e.switchToSideBySideLayout(),e.$watch("ui.pdfLayout",(function(t){e.ui.pdfOpen="sideBySide"===t})),e.$watch("ui.pdfOpen",(function(t){e.ui.pdfLayout=t?"sideBySide":"flat",t&&window.dispatchEvent(new CustomEvent("ui:pdf-open"))})),e.handleKeyDown=function(){};try{w=navigator.userAgent,n.browserIsSafari=w&&/.*Safari\/.*/.test(w)&&!/.*Chrome\/.*/.test(w)&&!/.*Chromium\/.*/.test(w)}catch(e){p=e,console.error(p)}n.browserIsSafari&&(n.safariScrollPatcher=new Gm(e));try{null!=(parseFloat(navigator.userAgent.split(" Chrome/")[1])||null)&&document.styleSheets[0].insertRule(".ace_editor.ace_autocomplete .ace_completion-highlight { text-shadow: none !important; font-weight: bold; }",1)}catch(e){p=e,console.error(p)}return n.featureToggle=vM(vM("undefined"!=typeof location&&null!==location?location.search:void 0,(function(e){return e.match(/^\?ft=(\w+)$/)})),(function(e){return e[1]})),window.addEventListener("editor:lint",(function(t){e.hasLintingError=t.detail.hasLintingError})),n.socket.on("project:access:revoked",(function(){n.showGenericMessageModal("Removed From Project","You have been removed from this project, and will no longer have access to it. You will be redirected to your project dashboard momentarily.")})),n.socket.on("project:publicAccessLevel:changed",(function(t){if(null!=t.newAccessLevel)return n.$scope.project.publicAccesLevel=t.newAccessLevel,e.$digest()}))}]),function(){try{navigator.serviceWorker.getRegistrations().catch((function(){return[]})).then((function(e){e.forEach((function(e){e.unregister()}))}))}catch(e){}}(),angular.module("SharelatexApp").config(["$provide",function(e){e.decorator("$browser",["$delegate",function(e){return e.onUrlChange=function(){},e.url=function(){return""},e}])}]);var gM=angular.bootstrap(document.body,["SharelatexApp"]);function vM(e,t){return null!=e?t(e):void 0}}(),__webpack_exports__}()}));